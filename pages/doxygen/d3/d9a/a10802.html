<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AzerothCore: Aura Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AzerothCore<span id="projectnumber">&#160;3.3.5a</span>
   </div>
   <div id="projectbrief">OpenSource WoW Emulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d3/d9a/a10802.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="../../d3/dee/a10799.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Aura Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &quot;<a class="el" href="../../">SpellAuras.h</a>&quot;</code></p>
<div class="dynheader">
Inheritance diagram for Aura:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d3/d9a/a10802.png" usemap="#Aura_map" alt=""/>
  <map id="Aura_map" name="Aura_map">
<area href="../../d9/d7c/a10810.html" alt="DynObjAura" shape="rect" coords="0,56,83,80"/>
<area href="../../d5/db1/a10806.html" alt="UnitAura" shape="rect" coords="93,56,176,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:af94996c697b3f790489314b6175ab311"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#af94996c697b3f790489314b6175ab311">ApplicationMap</a></td></tr>
<tr class="separator:af94996c697b3f790489314b6175ab311"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aca7aa7ab17d4d24ddcef476c6c0c08b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aca7aa7ab17d4d24ddcef476c6c0c08b6">Aura</a> (<a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *spellproto, <a class="el" href="../../db/df3/a08182.html">WorldObject</a> *owner, <a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster, <a class="el" href="../../d9/d36/a08106.html">Item</a> *castItem, <a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> casterGUID, <a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> itemGUID=<a class="el" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a>)</td></tr>
<tr class="separator:aca7aa7ab17d4d24ddcef476c6c0c08b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab477124f94af36e9be706451dce791f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ab477124f94af36e9be706451dce791f7">_InitEffects</a> (<a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effMask, <a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *baseAmount)</td></tr>
<tr class="separator:ab477124f94af36e9be706451dce791f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7a35591f5b0d0429cf706984dbe4316"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ac7a35591f5b0d0429cf706984dbe4316">~Aura</a> ()</td></tr>
<tr class="separator:ac7a35591f5b0d0429cf706984dbe4316"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4abe60bbc09777bab95a0a0ec66af25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a> () const</td></tr>
<tr class="separator:ab4abe60bbc09777bab95a0a0ec66af25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54447127bfb738f6722d3f6feddfc168"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a> () const</td></tr>
<tr class="separator:a54447127bfb738f6722d3f6feddfc168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5641e8e175470f121e2c6eda7dfb253"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ab5641e8e175470f121e2c6eda7dfb253">GetCastItemGUID</a> () const</td></tr>
<tr class="separator:ab5641e8e175470f121e2c6eda7dfb253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90bc220f5ffcca4efa900c1905782355"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a90bc220f5ffcca4efa900c1905782355">GetCastItemEntry</a> () const</td></tr>
<tr class="separator:a90bc220f5ffcca4efa900c1905782355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c4dfe75dad16fbf2afaf23ce77e4262"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a> () const</td></tr>
<tr class="separator:a3c4dfe75dad16fbf2afaf23ce77e4262"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fc52109b7711606f15d9880fda8f815"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a> () const</td></tr>
<tr class="separator:a6fc52109b7711606f15d9880fda8f815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5041a8d07612a0ddf3bc2b944e14c9ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/df3/a08182.html">WorldObject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a> () const</td></tr>
<tr class="separator:a5041a8d07612a0ddf3bc2b944e14c9ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25ce9277dfb99c46f2f0136e4aa5ab7c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a25ce9277dfb99c46f2f0136e4aa5ab7c">GetUnitOwner</a> () const</td></tr>
<tr class="separator:a25ce9277dfb99c46f2f0136e4aa5ab7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34626ddba98ab48275cfa6be44ed8390"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d3d/a07926.html">DynamicObject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a34626ddba98ab48275cfa6be44ed8390">GetDynobjOwner</a> () const</td></tr>
<tr class="separator:a34626ddba98ab48275cfa6be44ed8390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaddb94cd3bd95b145a8b8392e9feecca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2">AuraObjectType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aaddb94cd3bd95b145a8b8392e9feecca">GetType</a> () const</td></tr>
<tr class="separator:aaddb94cd3bd95b145a8b8392e9feecca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1c2269615a73318dc9438801d1ee087"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ad1c2269615a73318dc9438801d1ee087">_ApplyForTarget</a> (<a class="el" href="../../d6/d15/a08526.html">Unit</a> *target, <a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *auraApp)</td></tr>
<tr class="separator:ad1c2269615a73318dc9438801d1ee087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a068cc46b636b35d317aea47a2de6253e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a068cc46b636b35d317aea47a2de6253e">_UnapplyForTarget</a> (<a class="el" href="../../d6/d15/a08526.html">Unit</a> *target, <a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *auraApp)</td></tr>
<tr class="separator:a068cc46b636b35d317aea47a2de6253e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb6874ab08b221b2f1f9d7582c1c93be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#afb6874ab08b221b2f1f9d7582c1c93be">_Remove</a> (<a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a> removeMode)</td></tr>
<tr class="separator:afb6874ab08b221b2f1f9d7582c1c93be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9799e5670c2bc3899e3430aa793ca20"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#af9799e5670c2bc3899e3430aa793ca20">Remove</a> (<a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a> removeMode=<a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a>)=0</td></tr>
<tr class="separator:af9799e5670c2bc3899e3430aa793ca20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a304404f284fba0b6d8dc046140e309ae"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a304404f284fba0b6d8dc046140e309ae">FillTargetMap</a> (std::map&lt; <a class="el" href="../../d6/d15/a08526.html">Unit</a> *, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> &gt; &amp;targets, <a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster)=0</td></tr>
<tr class="separator:a304404f284fba0b6d8dc046140e309ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b5668b0179cec254f21a0b6bdf83974"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a8b5668b0179cec254f21a0b6bdf83974">UpdateTargetMap</a> (<a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster, bool apply=true)</td></tr>
<tr class="separator:a8b5668b0179cec254f21a0b6bdf83974"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39432e85258e75a84161c672a68d8f5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a39432e85258e75a84161c672a68d8f5f">_RegisterForTargets</a> ()</td></tr>
<tr class="separator:a39432e85258e75a84161c672a68d8f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d8873578888c4c29200e3cba17d0502"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a8d8873578888c4c29200e3cba17d0502">ApplyForTargets</a> ()</td></tr>
<tr class="separator:a8d8873578888c4c29200e3cba17d0502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf49ca3ee98e09b072985755bcfb2d34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aaf49ca3ee98e09b072985755bcfb2d34">_ApplyEffectForTargets</a> (<a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effIndex)</td></tr>
<tr class="separator:aaf49ca3ee98e09b072985755bcfb2d34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6349dd41e39827b8c55464982801d1b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a6349dd41e39827b8c55464982801d1b4">UpdateOwner</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> diff, <a class="el" href="../../db/df3/a08182.html">WorldObject</a> *owner)</td></tr>
<tr class="separator:a6349dd41e39827b8c55464982801d1b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c573f5f8069c14c997c85c08bac3dd4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a4c573f5f8069c14c997c85c08bac3dd4">Update</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> diff, <a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster)</td></tr>
<tr class="separator:a4c573f5f8069c14c997c85c08bac3dd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae88253dbdddede64cf443796dc155852"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ae88253dbdddede64cf443796dc155852">GetApplyTime</a> () const</td></tr>
<tr class="separator:ae88253dbdddede64cf443796dc155852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14457cfa6d589b8024bbeeb1d4aa03d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a14457cfa6d589b8024bbeeb1d4aa03d3">GetMaxDuration</a> () const</td></tr>
<tr class="separator:a14457cfa6d589b8024bbeeb1d4aa03d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf0ff1d6e3be882ce7e8ddd7e935ab66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#abf0ff1d6e3be882ce7e8ddd7e935ab66">SetMaxDuration</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> duration)</td></tr>
<tr class="separator:abf0ff1d6e3be882ce7e8ddd7e935ab66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97f212bb7332fdf03fccafe5389c1e0a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a97f212bb7332fdf03fccafe5389c1e0a">CalcMaxDuration</a> () const</td></tr>
<tr class="separator:a97f212bb7332fdf03fccafe5389c1e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a507acdaa5041d3faa9a804e49c29264e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a507acdaa5041d3faa9a804e49c29264e">CalcMaxDuration</a> (<a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a507acdaa5041d3faa9a804e49c29264e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e79eaa33b5f9ae5aaa44a62d096d6fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">GetDuration</a> () const</td></tr>
<tr class="separator:a5e79eaa33b5f9ae5aaa44a62d096d6fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99930c42ad9f6e002ffe6de5e5fbe59b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a99930c42ad9f6e002ffe6de5e5fbe59b">SetDuration</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> duration, bool withMods=false)</td></tr>
<tr class="separator:a99930c42ad9f6e002ffe6de5e5fbe59b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f108f33766c253a827d41c2f3fdc45e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a2f108f33766c253a827d41c2f3fdc45e">RefreshDuration</a> (bool withMods=false)</td></tr>
<tr class="separator:a2f108f33766c253a827d41c2f3fdc45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fa2b27d98d99af4f226c0156d47a628"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a2fa2b27d98d99af4f226c0156d47a628">RefreshTimers</a> (bool periodicReset=false)</td></tr>
<tr class="separator:a2fa2b27d98d99af4f226c0156d47a628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2726873f756aff2cdc90c61ac7358181"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a2726873f756aff2cdc90c61ac7358181">RefreshTimersWithMods</a> ()</td></tr>
<tr class="separator:a2726873f756aff2cdc90c61ac7358181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace74284832d9713a175bb3905449f954"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ace74284832d9713a175bb3905449f954">IsExpired</a> () const</td></tr>
<tr class="separator:ace74284832d9713a175bb3905449f954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af70f37c9e40b7038cf952c2969ae9ab2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#af70f37c9e40b7038cf952c2969ae9ab2">IsPermanent</a> () const</td></tr>
<tr class="separator:af70f37c9e40b7038cf952c2969ae9ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab07705be94c0c10fce558c80d7208e0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ab07705be94c0c10fce558c80d7208e0b">GetCharges</a> () const</td></tr>
<tr class="separator:ab07705be94c0c10fce558c80d7208e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f7d613279717173c13708425f3a8083"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a7f7d613279717173c13708425f3a8083">SetCharges</a> (<a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> charges)</td></tr>
<tr class="separator:a7f7d613279717173c13708425f3a8083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744d6c3e73a644a84d5f49863c1bca53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a744d6c3e73a644a84d5f49863c1bca53">CalcMaxCharges</a> (<a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a744d6c3e73a644a84d5f49863c1bca53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad786924c8b4617ff4724065b6452b04f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ad786924c8b4617ff4724065b6452b04f">CalcMaxCharges</a> () const</td></tr>
<tr class="separator:ad786924c8b4617ff4724065b6452b04f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52fbcc7d7f48d46bed2873889640e6d3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a52fbcc7d7f48d46bed2873889640e6d3">ModCharges</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> num, <a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a> removeMode=<a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a>)</td></tr>
<tr class="separator:a52fbcc7d7f48d46bed2873889640e6d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9803e108cc68b115fec9043b03f1118"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#af9803e108cc68b115fec9043b03f1118">DropCharge</a> (<a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a> removeMode=<a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a>)</td></tr>
<tr class="separator:af9803e108cc68b115fec9043b03f1118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae0b7e0da61a681e67a19b6d23c2cee6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a> () const</td></tr>
<tr class="separator:aae0b7e0da61a681e67a19b6d23c2cee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f6c2606d7dc499c1fc1ba0cee1f255b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a1f6c2606d7dc499c1fc1ba0cee1f255b">SetStackAmount</a> (<a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> num)</td></tr>
<tr class="separator:a1f6c2606d7dc499c1fc1ba0cee1f255b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69b589a7414d5d73ed75d12d5ba736ef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a69b589a7414d5d73ed75d12d5ba736ef">ModStackAmount</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> num, <a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a> removeMode=<a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a>, bool periodicReset=false)</td></tr>
<tr class="separator:a69b589a7414d5d73ed75d12d5ba736ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2a6c05d26b1254d93038b666d1e46cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ae2a6c05d26b1254d93038b666d1e46cd">RefreshSpellMods</a> ()</td></tr>
<tr class="separator:ae2a6c05d26b1254d93038b666d1e46cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef16baec1bec4d7c5e1db67ce392035"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a4ef16baec1bec4d7c5e1db67ce392035">GetCasterLevel</a> () const</td></tr>
<tr class="separator:a4ef16baec1bec4d7c5e1db67ce392035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13f14942fd6394df8e5d8ae820fd3fc7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a13f14942fd6394df8e5d8ae820fd3fc7">IsArea</a> () const</td></tr>
<tr class="separator:a13f14942fd6394df8e5d8ae820fd3fc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae24c050668e78ef9d8728e6b5bd77c12"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a> () const</td></tr>
<tr class="separator:ae24c050668e78ef9d8728e6b5bd77c12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64355d207f7177e6d35a568b93ec322f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a64355d207f7177e6d35a568b93ec322f">IsDeathPersistent</a> () const</td></tr>
<tr class="separator:a64355d207f7177e6d35a568b93ec322f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbd4948d31a548af813815efb91ff311"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#abbd4948d31a548af813815efb91ff311">IsRemovedOnShapeLost</a> (<a class="el" href="../../d6/d15/a08526.html">Unit</a> *target) const</td></tr>
<tr class="separator:abbd4948d31a548af813815efb91ff311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b7486aa10607794eaa6739f73b19741"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a0b7486aa10607794eaa6739f73b19741">CanBeSaved</a> () const</td></tr>
<tr class="separator:a0b7486aa10607794eaa6739f73b19741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a462457cadd52ba8a0edd5609c71ebbc0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a462457cadd52ba8a0edd5609c71ebbc0">IsRemoved</a> () const</td></tr>
<tr class="separator:a462457cadd52ba8a0edd5609c71ebbc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a323b5e9af786e15e7e1bdac6a47ea359"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a323b5e9af786e15e7e1bdac6a47ea359">CanBeSentToClient</a> () const</td></tr>
<tr class="separator:a323b5e9af786e15e7e1bdac6a47ea359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb782970ace7a9385038481911d388fc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#afb782970ace7a9385038481911d388fc">IsSingleTarget</a> () const</td></tr>
<tr class="separator:afb782970ace7a9385038481911d388fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51d9e2f08034d14c95ab54045d6860a1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a51d9e2f08034d14c95ab54045d6860a1">IsSingleTargetWith</a> (<a class="el" href="../../d3/d9a/a10802.html">Aura</a> const *aura) const</td></tr>
<tr class="separator:a51d9e2f08034d14c95ab54045d6860a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb34c6f61b861a35398f1d8b7947312e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#acb34c6f61b861a35398f1d8b7947312e">SetIsSingleTarget</a> (bool val)</td></tr>
<tr class="separator:acb34c6f61b861a35398f1d8b7947312e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a640ec9d7dd98eaf508209a8e3991ea4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a640ec9d7dd98eaf508209a8e3991ea4c">UnregisterSingleTarget</a> ()</td></tr>
<tr class="separator:a640ec9d7dd98eaf508209a8e3991ea4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e2bf3f6ccfcf6531a3cb146f1eb5405"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a7e2bf3f6ccfcf6531a3cb146f1eb5405">CalcDispelChance</a> (<a class="el" href="../../d6/d15/a08526.html">Unit</a> *auraTarget, bool offensive) const</td></tr>
<tr class="separator:a7e2bf3f6ccfcf6531a3cb146f1eb5405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a585e23fd7b42fa974a2d014fe366ede9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a585e23fd7b42fa974a2d014fe366ede9">SetLoadedState</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> maxduration, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> duration, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> charges, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> stackamount, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> recalculateMask, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *amount)</td></tr>
<tr class="separator:a585e23fd7b42fa974a2d014fe366ede9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d22c519ba658770e61a1616be667a09"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a3d22c519ba658770e61a1616be667a09">HasEffect</a> (<a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effIndex) const</td></tr>
<tr class="separator:a3d22c519ba658770e61a1616be667a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6890e111fba863b7163fa5eb0b0870f5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a6890e111fba863b7163fa5eb0b0870f5">HasEffectType</a> (<a class="el" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799">AuraType</a> type) const</td></tr>
<tr class="separator:a6890e111fba863b7163fa5eb0b0870f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ee04786fcd54da7e3e2b7a0277adeb8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a> (<a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effIndex) const</td></tr>
<tr class="separator:a6ee04786fcd54da7e3e2b7a0277adeb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a998a0e0cfd700ef9fed95f969ad9b791"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a998a0e0cfd700ef9fed95f969ad9b791">GetEffectMask</a> () const</td></tr>
<tr class="separator:a998a0e0cfd700ef9fed95f969ad9b791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbd7f397bbd36e4273d430032ddcd073"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#adbd7f397bbd36e4273d430032ddcd073">RecalculateAmountOfEffects</a> ()</td></tr>
<tr class="separator:adbd7f397bbd36e4273d430032ddcd073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03c8f1e4156ac6526e401f2a95ad08e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a03c8f1e4156ac6526e401f2a95ad08e7">HandleAllEffects</a> (<a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply)</td></tr>
<tr class="separator:a03c8f1e4156ac6526e401f2a95ad08e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f5268b496e4212bc6e5f887034d04b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d9a/a10802.html#af94996c697b3f790489314b6175ab311">ApplicationMap</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a1f5268b496e4212bc6e5f887034d04b0">GetApplicationMap</a> ()</td></tr>
<tr class="separator:a1f5268b496e4212bc6e5f887034d04b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f71f0ac319d34ae8cbe5bc4b4bcfb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a66f71f0ac319d34ae8cbe5bc4b4bcfb7">GetApplicationList</a> (std::list&lt; <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> * &gt; &amp;applicationList) const</td></tr>
<tr class="separator:a66f71f0ac319d34ae8cbe5bc4b4bcfb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5e42f1c32857e82102fd95bb46ec013"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aa5e42f1c32857e82102fd95bb46ec013">GetApplicationOfTarget</a> (<a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> guid) const</td></tr>
<tr class="separator:aa5e42f1c32857e82102fd95bb46ec013"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8b613264a2fe06bb7f39043d6d7af32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ac8b613264a2fe06bb7f39043d6d7af32">GetApplicationOfTarget</a> (<a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> guid)</td></tr>
<tr class="separator:ac8b613264a2fe06bb7f39043d6d7af32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5860e9094ea1ef6525b77c1957879486"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a5860e9094ea1ef6525b77c1957879486">IsAppliedOnTarget</a> (<a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> guid) const</td></tr>
<tr class="separator:a5860e9094ea1ef6525b77c1957879486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f9f4a57e87c86b384b637403fff06e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a8f9f4a57e87c86b384b637403fff06e7">SetNeedClientUpdateForTargets</a> () const</td></tr>
<tr class="separator:a8f9f4a57e87c86b384b637403fff06e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6a690bd3e87d00af4c6a562b250f6f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ac6a690bd3e87d00af4c6a562b250f6f1">HandleAuraSpecificMods</a> (<a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster, bool apply, bool onReapply)</td></tr>
<tr class="separator:ac6a690bd3e87d00af4c6a562b250f6f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2ee53cb584c3528f2990d391393bc1d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ac2ee53cb584c3528f2990d391393bc1d">CanBeAppliedOn</a> (<a class="el" href="../../d6/d15/a08526.html">Unit</a> *target)</td></tr>
<tr class="separator:ac2ee53cb584c3528f2990d391393bc1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139193e2e2688d6ea9c6a817c0a00318"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a139193e2e2688d6ea9c6a817c0a00318">CheckAreaTarget</a> (<a class="el" href="../../d6/d15/a08526.html">Unit</a> *target)</td></tr>
<tr class="separator:a139193e2e2688d6ea9c6a817c0a00318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40cd6707c45eead445b1f487991da9c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a40cd6707c45eead445b1f487991da9c1">CanStackWith</a> (<a class="el" href="../../d3/d9a/a10802.html">Aura</a> const *checkAura, bool remove) const</td></tr>
<tr class="separator:a40cd6707c45eead445b1f487991da9c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4544d5fa6bb4171de4fccdad5e96918"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ac4544d5fa6bb4171de4fccdad5e96918">IsAuraStronger</a> (<a class="el" href="../../d3/d9a/a10802.html">Aura</a> const *newAura) const</td></tr>
<tr class="separator:ac4544d5fa6bb4171de4fccdad5e96918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b82ca1499317e9a44b1315e16472d44"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a9b82ca1499317e9a44b1315e16472d44">IsProcOnCooldown</a> () const</td></tr>
<tr class="separator:a9b82ca1499317e9a44b1315e16472d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4febc2d258a8e20326e465a9c1ed8512"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a4febc2d258a8e20326e465a9c1ed8512">AddProcCooldown</a> (<a class="el" href="../../dc/d84/a00338.html#a1c3834b9e3853535027d58bf21bec81f">Milliseconds</a> msec)</td></tr>
<tr class="separator:a4febc2d258a8e20326e465a9c1ed8512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62c2b89c6a9269aba7870b36e5872330"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a62c2b89c6a9269aba7870b36e5872330">IsUsingCharges</a> () const</td></tr>
<tr class="separator:a62c2b89c6a9269aba7870b36e5872330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a357ceeec6595c847d01b5ed4713ffd2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a357ceeec6595c847d01b5ed4713ffd2f">SetUsingCharges</a> (bool val)</td></tr>
<tr class="separator:a357ceeec6595c847d01b5ed4713ffd2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace1f81adb69a07eddbdeee16bfe2ed33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ace1f81adb69a07eddbdeee16bfe2ed33">PrepareProcToTrigger</a> (<a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *aurApp, <a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:ace1f81adb69a07eddbdeee16bfe2ed33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac514e08ac3f8733a650d243239dada58"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ac514e08ac3f8733a650d243239dada58">IsProcTriggeredOnEvent</a> (<a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *aurApp, <a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;eventInfo) const</td></tr>
<tr class="separator:ac514e08ac3f8733a650d243239dada58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa515b9daf648d268f02ef974b3573550"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aa515b9daf648d268f02ef974b3573550">CalcProcChance</a> (<a class="el" href="../../d1/d6c/a10914.html">SpellProcEntry</a> const &amp;procEntry, <a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;eventInfo) const</td></tr>
<tr class="separator:aa515b9daf648d268f02ef974b3573550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0d4d20bb3fac4108ba3dbc891d8dec9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ab0d4d20bb3fac4108ba3dbc891d8dec9">TriggerProcOnEvent</a> (<a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *aurApp, <a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:ab0d4d20bb3fac4108ba3dbc891d8dec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ed84a2b95a1cb898a682c809dd25d2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a9ed84a2b95a1cb898a682c809dd25d2b">LoadScripts</a> ()</td></tr>
<tr class="separator:a9ed84a2b95a1cb898a682c809dd25d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3666518caf5cf301c27857b2e909cf16"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a3666518caf5cf301c27857b2e909cf16">CallScriptCheckAreaTargetHandlers</a> (<a class="el" href="../../d6/d15/a08526.html">Unit</a> *target)</td></tr>
<tr class="separator:a3666518caf5cf301c27857b2e909cf16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cb0ef5c31c0ebb5e274a99c186e83ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a1cb0ef5c31c0ebb5e274a99c186e83ab">CallScriptDispel</a> (<a class="el" href="../../de/dcb/a08482.html">DispelInfo</a> *dispelInfo)</td></tr>
<tr class="separator:a1cb0ef5c31c0ebb5e274a99c186e83ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa8b3462e2d68da5a9972c6cbd637022"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#afa8b3462e2d68da5a9972c6cbd637022">CallScriptAfterDispel</a> (<a class="el" href="../../de/dcb/a08482.html">DispelInfo</a> *dispelInfo)</td></tr>
<tr class="separator:afa8b3462e2d68da5a9972c6cbd637022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a882f4ec3b0f104d3c18c718dc71ec668"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a882f4ec3b0f104d3c18c718dc71ec668">CallScriptEffectApplyHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a> mode)</td></tr>
<tr class="separator:a882f4ec3b0f104d3c18c718dc71ec668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a192c8e0119a8bc304c1711b15376e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a37a192c8e0119a8bc304c1711b15376e">CallScriptEffectRemoveHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a> mode)</td></tr>
<tr class="separator:a37a192c8e0119a8bc304c1711b15376e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76282958056070ecbf58c7a864ea7494"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a76282958056070ecbf58c7a864ea7494">CallScriptAfterEffectApplyHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a> mode)</td></tr>
<tr class="separator:a76282958056070ecbf58c7a864ea7494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893e1bed86677e695a28d8eb4fab763d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a893e1bed86677e695a28d8eb4fab763d">CallScriptAfterEffectRemoveHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a> mode)</td></tr>
<tr class="separator:a893e1bed86677e695a28d8eb4fab763d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b0854e2019338fd16c9ca46e3997931"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a3b0854e2019338fd16c9ca46e3997931">CallScriptEffectPeriodicHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp)</td></tr>
<tr class="separator:a3b0854e2019338fd16c9ca46e3997931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac81f948f034942046b45a94fea365f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#adac81f948f034942046b45a94fea365f">CallScriptEffectUpdatePeriodicHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *aurEff)</td></tr>
<tr class="separator:adac81f948f034942046b45a94fea365f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38c31b87dea32024c55f15d37faa93da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a38c31b87dea32024c55f15d37faa93da">CallScriptEffectCalcAmountHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *aurEff, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> &amp;amount, bool &amp;canBeRecalculated)</td></tr>
<tr class="separator:a38c31b87dea32024c55f15d37faa93da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd4f379de7ed0890f28df1209aad70c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#abd4f379de7ed0890f28df1209aad70c7">CallScriptEffectCalcPeriodicHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *aurEff, bool &amp;isPeriodic, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> &amp;amplitude)</td></tr>
<tr class="separator:abd4f379de7ed0890f28df1209aad70c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a205938814ca394a9a229f4b4e80e54a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a205938814ca394a9a229f4b4e80e54a6">CallScriptEffectCalcSpellModHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *aurEff, <a class="el" href="../../dd/d5f/a08298.html">SpellModifier</a> *&amp;spellMod)</td></tr>
<tr class="separator:a205938814ca394a9a229f4b4e80e54a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1734994c88d98ccd513b4f8d2f090d70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a1734994c88d98ccd513b4f8d2f090d70">CallScriptEffectAbsorbHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../de/d75/a08490.html">DamageInfo</a> &amp;dmgInfo, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;absorbAmount, bool &amp;defaultPrevented)</td></tr>
<tr class="separator:a1734994c88d98ccd513b4f8d2f090d70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5ebe6aa240ef26f1bfe4ac77240dd35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aa5ebe6aa240ef26f1bfe4ac77240dd35">CallScriptEffectAfterAbsorbHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../de/d75/a08490.html">DamageInfo</a> &amp;dmgInfo, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;absorbAmount)</td></tr>
<tr class="separator:aa5ebe6aa240ef26f1bfe4ac77240dd35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa75669dbdf619c939c3dc7fff9fe8736"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aa75669dbdf619c939c3dc7fff9fe8736">CallScriptEffectManaShieldHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../de/d75/a08490.html">DamageInfo</a> &amp;dmgInfo, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;absorbAmount, bool &amp;defaultPrevented)</td></tr>
<tr class="separator:aa75669dbdf619c939c3dc7fff9fe8736"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0236680754f81e374b015640e4b6eff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#af0236680754f81e374b015640e4b6eff">CallScriptEffectAfterManaShieldHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../de/d75/a08490.html">DamageInfo</a> &amp;dmgInfo, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;absorbAmount)</td></tr>
<tr class="separator:af0236680754f81e374b015640e4b6eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad107d81d9d0898ac5922504526dd07e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aad107d81d9d0898ac5922504526dd07e">CallScriptEffectSplitHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../de/d75/a08490.html">DamageInfo</a> &amp;dmgInfo, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;splitAmount)</td></tr>
<tr class="separator:aad107d81d9d0898ac5922504526dd07e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87be004e2c34b6652cd5350689b24dc3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a87be004e2c34b6652cd5350689b24dc3">CallScriptCheckProcHandlers</a> (<a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:a87be004e2c34b6652cd5350689b24dc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21722597230f267a7c32a80854f6c110"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a21722597230f267a7c32a80854f6c110">CallScriptAfterCheckProcHandlers</a> (<a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;eventInfo, bool isTriggeredAtSpellProcEvent)</td></tr>
<tr class="separator:a21722597230f267a7c32a80854f6c110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6577a1543d871da43ab8b015f67d4150"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a6577a1543d871da43ab8b015f67d4150">CallScriptPrepareProcHandlers</a> (<a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:a6577a1543d871da43ab8b015f67d4150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99d38e9baa13b6683db43d67757ec982"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a99d38e9baa13b6683db43d67757ec982">CallScriptProcHandlers</a> (<a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:a99d38e9baa13b6683db43d67757ec982"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bac8c34612850e65cd2411f2c7b6baa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a3bac8c34612850e65cd2411f2c7b6baa">CallScriptAfterProcHandlers</a> (<a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:a3bac8c34612850e65cd2411f2c7b6baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96d2072a3b0b06f82113eb9d3e186ac1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a96d2072a3b0b06f82113eb9d3e186ac1">CallScriptEffectProcHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:a96d2072a3b0b06f82113eb9d3e186ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97347f8dc5f2dd96c7c45a77c13988a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a97347f8dc5f2dd96c7c45a77c13988a5">CallScriptAfterEffectProcHandlers</a> (<a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *aurEff, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:a97347f8dc5f2dd96c7c45a77c13988a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab048dcde17f19db0f48464f9cdea182b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d74/a11022.html">AuraScript</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ab048dcde17f19db0f48464f9cdea182b">GetScriptByName</a> (std::string const &amp;scriptName) const</td></tr>
<tr class="separator:ab048dcde17f19db0f48464f9cdea182b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a184dae26b21f0c106cd2ccf2db67c452"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a184dae26b21f0c106cd2ccf2db67c452">GetDebugInfo</a> () const</td></tr>
<tr class="separator:a184dae26b21f0c106cd2ccf2db67c452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32cda9926aa3e5d7def42ebf85f23bc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a32cda9926aa3e5d7def42ebf85f23bc8">SetTriggeredByAuraSpellInfo</a> (<a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *triggeredByAuraSpellInfo)</td></tr>
<tr class="separator:a32cda9926aa3e5d7def42ebf85f23bc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af64f07e2756640cb9caf21433bd4e2b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#af64f07e2756640cb9caf21433bd4e2b6">GetTriggeredByAuraSpellInfo</a> () const</td></tr>
<tr class="separator:af64f07e2756640cb9caf21433bd4e2b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aca22c44b0c3179824f9951b0b3ce206c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aca22c44b0c3179824f9951b0b3ce206c">BuildEffectMaskForOwner</a> (<a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *spellProto, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> avalibleEffectMask, <a class="el" href="../../db/df3/a08182.html">WorldObject</a> *owner)</td></tr>
<tr class="separator:aca22c44b0c3179824f9951b0b3ce206c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9637e205c147457e50b47efe0f8f7904"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d9a/a10802.html">Aura</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a9637e205c147457e50b47efe0f8f7904">TryRefreshStackOrCreate</a> (<a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *spellproto, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> tryEffMask, <a class="el" href="../../db/df3/a08182.html">WorldObject</a> *owner, <a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *baseAmount=nullptr, <a class="el" href="../../d9/d36/a08106.html">Item</a> *castItem=nullptr, <a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> casterGUID=<a class="el" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a>, bool *refresh=nullptr, bool periodicReset=false)</td></tr>
<tr class="separator:a9637e205c147457e50b47efe0f8f7904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bbcbc2c658a2d959b20837e1e2c31b7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d9a/a10802.html">Aura</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a3bbcbc2c658a2d959b20837e1e2c31b7">TryCreate</a> (<a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *spellproto, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effMask, <a class="el" href="../../db/df3/a08182.html">WorldObject</a> *owner, <a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *baseAmount=nullptr, <a class="el" href="../../d9/d36/a08106.html">Item</a> *castItem=nullptr, <a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> casterGUID=<a class="el" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a>, <a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> itemGUID=<a class="el" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a>)</td></tr>
<tr class="separator:a3bbcbc2c658a2d959b20837e1e2c31b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae44dc9394657b8fbc90bec95911cac03"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d9a/a10802.html">Aura</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ae44dc9394657b8fbc90bec95911cac03">Create</a> (<a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *spellproto, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effMask, <a class="el" href="../../db/df3/a08182.html">WorldObject</a> *owner, <a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *baseAmount, <a class="el" href="../../d9/d36/a08106.html">Item</a> *castItem, <a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> casterGUID, <a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> itemGUID=<a class="el" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a>)</td></tr>
<tr class="separator:ae44dc9394657b8fbc90bec95911cac03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a2f182c808ac1ea674dbc625ac03716b6"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="../../d3/d74/a11022.html">AuraScript</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a></td></tr>
<tr class="separator:a2f182c808ac1ea674dbc625ac03716b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aaba50101334e21660ff99d4668ae06b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const  *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a></td></tr>
<tr class="separator:aaba50101334e21660ff99d4668ae06b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac031b57268ab2f7c4346ef3dbfea2af0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ac031b57268ab2f7c4346ef3dbfea2af0">m_casterGuid</a></td></tr>
<tr class="separator:ac031b57268ab2f7c4346ef3dbfea2af0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a742caadbfa7658d6957bf73eda7c624a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a742caadbfa7658d6957bf73eda7c624a">m_castItemGuid</a></td></tr>
<tr class="separator:a742caadbfa7658d6957bf73eda7c624a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47c4549c9990b34a2728c6795de64af6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a47c4549c9990b34a2728c6795de64af6">m_castItemEntry</a></td></tr>
<tr class="separator:a47c4549c9990b34a2728c6795de64af6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27b0ba184d3b92d5da4a24802f119b03"><td class="memItemLeft" align="right" valign="top">time_t const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a27b0ba184d3b92d5da4a24802f119b03">m_applyTime</a></td></tr>
<tr class="separator:a27b0ba184d3b92d5da4a24802f119b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab415594d025a57ab429a85ab70e598cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/df3/a08182.html">WorldObject</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ab415594d025a57ab429a85ab70e598cb">m_owner</a></td></tr>
<tr class="separator:ab415594d025a57ab429a85ab70e598cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24ab9b1f0a73ca4da9aa77e9ee0e3a55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">m_maxDuration</a></td></tr>
<tr class="separator:a24ab9b1f0a73ca4da9aa77e9ee0e3a55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a406738b04948572a30626082ebe7a0e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a406738b04948572a30626082ebe7a0e0">m_duration</a></td></tr>
<tr class="separator:a406738b04948572a30626082ebe7a0e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7af03c4091eed4aab81dd2d0613b4eca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a7af03c4091eed4aab81dd2d0613b4eca">m_timeCla</a></td></tr>
<tr class="separator:a7af03c4091eed4aab81dd2d0613b4eca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb7fadeb3b25c9d5a2903e5c1ea06ff2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aeb7fadeb3b25c9d5a2903e5c1ea06ff2">m_updateTargetMapInterval</a></td></tr>
<tr class="separator:aeb7fadeb3b25c9d5a2903e5c1ea06ff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac53ebfd796f09dd49bf93877b4edb615"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ac53ebfd796f09dd49bf93877b4edb615">m_casterLevel</a></td></tr>
<tr class="separator:ac53ebfd796f09dd49bf93877b4edb615"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af32b9da81a73be723f660ae4e3363e74"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a></td></tr>
<tr class="separator:af32b9da81a73be723f660ae4e3363e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c01fd7df3476af276831667baa3a0ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a3c01fd7df3476af276831667baa3a0ee">m_stackAmount</a></td></tr>
<tr class="separator:a3c01fd7df3476af276831667baa3a0ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cea44bce63fa2b3fe6fa71905b3e1e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a> [3]</td></tr>
<tr class="separator:a2cea44bce63fa2b3fe6fa71905b3e1e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59978cc8d9ebb00cb569d64eed5cef03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d9a/a10802.html#af94996c697b3f790489314b6175ab311">ApplicationMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a></td></tr>
<tr class="separator:a59978cc8d9ebb00cb569d64eed5cef03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae63436802a402d26115d21f4a2073e1a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ae63436802a402d26115d21f4a2073e1a">m_isRemoved</a>: 1</td></tr>
<tr class="separator:ae63436802a402d26115d21f4a2073e1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af22450afa8bf33c979c0a0f7d801ab4c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#af22450afa8bf33c979c0a0f7d801ab4c">m_isSingleTarget</a>: 1</td></tr>
<tr class="separator:af22450afa8bf33c979c0a0f7d801ab4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8811634ba5d82b9581e94e8a0fd6097"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#ad8811634ba5d82b9581e94e8a0fd6097">m_isUsingCharges</a>: 1</td></tr>
<tr class="separator:ad8811634ba5d82b9581e94e8a0fd6097"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:accc852560f7b56d60c77581365a3b17f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#accc852560f7b56d60c77581365a3b17f">_DeleteRemovedApplications</a> ()</td></tr>
<tr class="separator:accc852560f7b56d60c77581365a3b17f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a04a25715c9b268afa2025a47681df76c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d15/a08526.html#a6ab419b95396e1e4db4d6191834d4ef3">Unit::AuraApplicationList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a04a25715c9b268afa2025a47681df76c">m_removedApplications</a></td></tr>
<tr class="separator:a04a25715c9b268afa2025a47681df76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4972c4116685b08f25f6a2711c196d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const  *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#aa4972c4116685b08f25f6a2711c196d3">m_triggeredByAuraSpellInfo</a></td></tr>
<tr class="separator:aa4972c4116685b08f25f6a2711c196d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a851e18dcd4b806db1cd3843a7814d15a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d9a/a10802.html">Aura</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/a10802.html#a851e18dcd4b806db1cd3843a7814d15a">Unit::_TryStackingOrRefreshingExistingAura</a> (<a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *newAura, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effMask, <a class="el" href="../../d6/d15/a08526.html">Unit</a> *caster, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *baseAmount, <a class="el" href="../../d9/d36/a08106.html">Item</a> *castItem, <a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> casterGUID, bool noPeriodicReset)</td></tr>
<tr class="separator:a851e18dcd4b806db1cd3843a7814d15a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="af94996c697b3f790489314b6175ab311" name="af94996c697b3f790489314b6175ab311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af94996c697b3f790489314b6175ab311">&#9670;&#160;</a></span>ApplicationMap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>, <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a>*&gt; <a class="el" href="../../d3/d9a/a10802.html#af94996c697b3f790489314b6175ab311">Aura::ApplicationMap</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aca7aa7ab17d4d24ddcef476c6c0c08b6" name="aca7aa7ab17d4d24ddcef476c6c0c08b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca7aa7ab17d4d24ddcef476c6c0c08b6">&#9670;&#160;</a></span>Aura()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Aura::Aura </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *&#160;</td>
          <td class="paramname"><em>spellproto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df3/a08182.html">WorldObject</a> *&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d36/a08106.html">Item</a> *&#160;</td>
          <td class="paramname"><em>castItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>casterGUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>itemGUID</em> = <code><a class="el" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  409</span>                                                                                                                                      :</div>
<div class="line"><span class="lineno">  410</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>(spellproto), <a class="code hl_variable" href="../../d3/d9a/a10802.html#ac031b57268ab2f7c4346ef3dbfea2af0">m_casterGuid</a>(casterGUID ? casterGUID : caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>()),</div>
<div class="line"><span class="lineno">  411</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a742caadbfa7658d6957bf73eda7c624a">m_castItemGuid</a>(itemGUID ? itemGUID : castItem ? castItem-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>() : <a class="code hl_variable" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a>), <a class="code hl_variable" href="../../d3/d9a/a10802.html#a47c4549c9990b34a2728c6795de64af6">m_castItemEntry</a>(castItem ? castItem-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>() : 0), <a class="code hl_variable" href="../../d3/d9a/a10802.html#a27b0ba184d3b92d5da4a24802f119b03">m_applyTime</a>(<a class="code hl_function" href="../../de/df1/a04758.html#adbe1785d1327dedf2ac403b7cc8e99c2">GameTime::GetGameTime</a>().count()),</div>
<div class="line"><span class="lineno">  412</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#ab415594d025a57ab429a85ab70e598cb">m_owner</a>(owner), <a class="code hl_variable" href="../../d3/d9a/a10802.html#a7af03c4091eed4aab81dd2d0613b4eca">m_timeCla</a>(0), <a class="code hl_variable" href="../../d3/d9a/a10802.html#aeb7fadeb3b25c9d5a2903e5c1ea06ff2">m_updateTargetMapInterval</a>(0),</div>
<div class="line"><span class="lineno">  413</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#ac53ebfd796f09dd49bf93877b4edb615">m_casterLevel</a>(caster ? caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#af4767dc4f1480f7c0527db4efe2643d9">GetLevel</a>() : <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a0696e18f727a511bfa4ac86a8c16b9f0">SpellLevel</a>), <a class="code hl_variable" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a>(0), <a class="code hl_variable" href="../../d3/d9a/a10802.html#a3c01fd7df3476af276831667baa3a0ee">m_stackAmount</a>(1),</div>
<div class="line"><span class="lineno">  414</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#ae63436802a402d26115d21f4a2073e1a">m_isRemoved</a>(<span class="keyword">false</span>), <a class="code hl_variable" href="../../d3/d9a/a10802.html#af22450afa8bf33c979c0a0f7d801ab4c">m_isSingleTarget</a>(<span class="keyword">false</span>), <a class="code hl_variable" href="../../d3/d9a/a10802.html#ad8811634ba5d82b9581e94e8a0fd6097">m_isUsingCharges</a>(<span class="keyword">false</span>), <a class="code hl_variable" href="../../d3/d9a/a10802.html#aa4972c4116685b08f25f6a2711c196d3">m_triggeredByAuraSpellInfo</a>(<span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">  415</span>{</div>
<div class="line"><span class="lineno">  416</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a8fff47546b8052ac55963dd40e4ae394">ManaPerSecond</a> || <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a40cefe82961ab58e8070546b2d1a1fc5">ManaPerSecondPerLevel</a>) &amp;&amp; !<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a>))</div>
<div class="line"><span class="lineno">  417</span>        <a class="code hl_variable" href="../../d3/d9a/a10802.html#a7af03c4091eed4aab81dd2d0613b4eca">m_timeCla</a> = 1 * <a class="code hl_variable" href="../../d4/d51/a00017.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a>;</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">m_maxDuration</a> = <a class="code hl_function" href="../../d3/d9a/a10802.html#a97f212bb7332fdf03fccafe5389c1e0a">CalcMaxDuration</a>(caster);</div>
<div class="line"><span class="lineno">  420</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a406738b04948572a30626082ebe7a0e0">m_duration</a> = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">m_maxDuration</a>;</div>
<div class="line"><span class="lineno">  421</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a> = <a class="code hl_function" href="../../d3/d9a/a10802.html#ad786924c8b4617ff4724065b6452b04f">CalcMaxCharges</a>(caster);</div>
<div class="line"><span class="lineno">  422</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#ad8811634ba5d82b9581e94e8a0fd6097">m_isUsingCharges</a> = <a class="code hl_variable" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a> != 0;</div>
<div class="line"><span class="lineno">  423</span>    memset(<a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>));</div>
<div class="line"><span class="lineno">  424</span>    <span class="comment">// m_casterLevel = cast item level/caster level, caster level should be saved to db, confirmed with sniffs</span></div>
<div class="line"><span class="lineno">  425</span>}</div>
<div class="ttc" id="aa00017_html_a84190f79c8167211609f67284e066c58"><div class="ttname"><a href="../../d4/d51/a00017.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a></div><div class="ttdeci">constexpr auto IN_MILLISECONDS</div><div class="ttdef"><b>Definition:</b> Common.h:53</div></div>
<div class="ttc" id="aa02771_html_a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec"><div class="ttname"><a href="../../d0/dbd/a02771.html#a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a></div><div class="ttdeci">@ SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:467</div></div>
<div class="ttc" id="aa04758_html_adbe1785d1327dedf2ac403b7cc8e99c2"><div class="ttname"><a href="../../de/df1/a04758.html#adbe1785d1327dedf2ac403b7cc8e99c2">GameTime::GetGameTime</a></div><div class="ttdeci">Seconds GetGameTime()</div><div class="ttdef"><b>Definition:</b> GameTime.cpp:38</div></div>
<div class="ttc" id="aa08150_html_aa627fe2967ed0e0ed1d8aeeb4365a961"><div class="ttname"><a href="../../d6/d80/a08150.html#aa627fe2967ed0e0ed1d8aeeb4365a961">Object::GetEntry</a></div><div class="ttdeci">uint32 GetEntry() const</div><div class="ttdef"><b>Definition:</b> Object.h:112</div></div>
<div class="ttc" id="aa08150_html_ad23b997e2442fa6a6228ba73a7ecc138"><div class="ttname"><a href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">Object::GetGUID</a></div><div class="ttdeci">static ObjectGuid GetGUID(Object const *o)</div><div class="ttdef"><b>Definition:</b> Object.h:109</div></div>
<div class="ttc" id="aa08198_html_a14039d3f3df79203693f713495503165"><div class="ttname"><a href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a></div><div class="ttdeci">static ObjectGuid const Empty</div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:120</div></div>
<div class="ttc" id="aa08526_html_af4767dc4f1480f7c0527db4efe2643d9"><div class="ttname"><a href="../../d6/d15/a08526.html#af4767dc4f1480f7c0527db4efe2643d9">Unit::GetLevel</a></div><div class="ttdeci">uint8 GetLevel() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1024</div></div>
<div class="ttc" id="aa10802_html_a24ab9b1f0a73ca4da9aa77e9ee0e3a55"><div class="ttname"><a href="../../d3/d9a/a10802.html#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">Aura::m_maxDuration</a></div><div class="ttdeci">int32 m_maxDuration</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:256</div></div>
<div class="ttc" id="aa10802_html_a27b0ba184d3b92d5da4a24802f119b03"><div class="ttname"><a href="../../d3/d9a/a10802.html#a27b0ba184d3b92d5da4a24802f119b03">Aura::m_applyTime</a></div><div class="ttdeci">time_t const m_applyTime</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:253</div></div>
<div class="ttc" id="aa10802_html_a2cea44bce63fa2b3fe6fa71905b3e1e2"><div class="ttname"><a href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">Aura::m_effects</a></div><div class="ttdeci">AuraEffect * m_effects[3]</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:265</div></div>
<div class="ttc" id="aa10802_html_a3c01fd7df3476af276831667baa3a0ee"><div class="ttname"><a href="../../d3/d9a/a10802.html#a3c01fd7df3476af276831667baa3a0ee">Aura::m_stackAmount</a></div><div class="ttdeci">uint8 m_stackAmount</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:263</div></div>
<div class="ttc" id="aa10802_html_a406738b04948572a30626082ebe7a0e0"><div class="ttname"><a href="../../d3/d9a/a10802.html#a406738b04948572a30626082ebe7a0e0">Aura::m_duration</a></div><div class="ttdeci">int32 m_duration</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:257</div></div>
<div class="ttc" id="aa10802_html_a47c4549c9990b34a2728c6795de64af6"><div class="ttname"><a href="../../d3/d9a/a10802.html#a47c4549c9990b34a2728c6795de64af6">Aura::m_castItemEntry</a></div><div class="ttdeci">uint32 const m_castItemEntry</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:252</div></div>
<div class="ttc" id="aa10802_html_a742caadbfa7658d6957bf73eda7c624a"><div class="ttname"><a href="../../d3/d9a/a10802.html#a742caadbfa7658d6957bf73eda7c624a">Aura::m_castItemGuid</a></div><div class="ttdeci">ObjectGuid const m_castItemGuid</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:251</div></div>
<div class="ttc" id="aa10802_html_a7af03c4091eed4aab81dd2d0613b4eca"><div class="ttname"><a href="../../d3/d9a/a10802.html#a7af03c4091eed4aab81dd2d0613b4eca">Aura::m_timeCla</a></div><div class="ttdeci">int32 m_timeCla</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:258</div></div>
<div class="ttc" id="aa10802_html_a97f212bb7332fdf03fccafe5389c1e0a"><div class="ttname"><a href="../../d3/d9a/a10802.html#a97f212bb7332fdf03fccafe5389c1e0a">Aura::CalcMaxDuration</a></div><div class="ttdeci">int32 CalcMaxDuration() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:131</div></div>
<div class="ttc" id="aa10802_html_aa4972c4116685b08f25f6a2711c196d3"><div class="ttname"><a href="../../d3/d9a/a10802.html#aa4972c4116685b08f25f6a2711c196d3">Aura::m_triggeredByAuraSpellInfo</a></div><div class="ttdeci">SpellInfo const  * m_triggeredByAuraSpellInfo</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:275</div></div>
<div class="ttc" id="aa10802_html_aaba50101334e21660ff99d4668ae06b7"><div class="ttname"><a href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">Aura::m_spellInfo</a></div><div class="ttdeci">SpellInfo const  *const m_spellInfo</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:249</div></div>
<div class="ttc" id="aa10802_html_ab415594d025a57ab429a85ab70e598cb"><div class="ttname"><a href="../../d3/d9a/a10802.html#ab415594d025a57ab429a85ab70e598cb">Aura::m_owner</a></div><div class="ttdeci">WorldObject *const m_owner</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:254</div></div>
<div class="ttc" id="aa10802_html_ac031b57268ab2f7c4346ef3dbfea2af0"><div class="ttname"><a href="../../d3/d9a/a10802.html#ac031b57268ab2f7c4346ef3dbfea2af0">Aura::m_casterGuid</a></div><div class="ttdeci">ObjectGuid const m_casterGuid</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:250</div></div>
<div class="ttc" id="aa10802_html_ac53ebfd796f09dd49bf93877b4edb615"><div class="ttname"><a href="../../d3/d9a/a10802.html#ac53ebfd796f09dd49bf93877b4edb615">Aura::m_casterLevel</a></div><div class="ttdeci">uint8 const m_casterLevel</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:261</div></div>
<div class="ttc" id="aa10802_html_ad786924c8b4617ff4724065b6452b04f"><div class="ttname"><a href="../../d3/d9a/a10802.html#ad786924c8b4617ff4724065b6452b04f">Aura::CalcMaxCharges</a></div><div class="ttdeci">uint8 CalcMaxCharges() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:144</div></div>
<div class="ttc" id="aa10802_html_ad8811634ba5d82b9581e94e8a0fd6097"><div class="ttname"><a href="../../d3/d9a/a10802.html#ad8811634ba5d82b9581e94e8a0fd6097">Aura::m_isUsingCharges</a></div><div class="ttdeci">bool m_isUsingCharges</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:270</div></div>
<div class="ttc" id="aa10802_html_ae63436802a402d26115d21f4a2073e1a"><div class="ttname"><a href="../../d3/d9a/a10802.html#ae63436802a402d26115d21f4a2073e1a">Aura::m_isRemoved</a></div><div class="ttdeci">bool m_isRemoved</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:268</div></div>
<div class="ttc" id="aa10802_html_aeb7fadeb3b25c9d5a2903e5c1ea06ff2"><div class="ttname"><a href="../../d3/d9a/a10802.html#aeb7fadeb3b25c9d5a2903e5c1ea06ff2">Aura::m_updateTargetMapInterval</a></div><div class="ttdeci">int32 m_updateTargetMapInterval</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:259</div></div>
<div class="ttc" id="aa10802_html_af22450afa8bf33c979c0a0f7d801ab4c"><div class="ttname"><a href="../../d3/d9a/a10802.html#af22450afa8bf33c979c0a0f7d801ab4c">Aura::m_isSingleTarget</a></div><div class="ttdeci">bool m_isSingleTarget</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:269</div></div>
<div class="ttc" id="aa10802_html_af32b9da81a73be723f660ae4e3363e74"><div class="ttname"><a href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">Aura::m_procCharges</a></div><div class="ttdeci">uint8 m_procCharges</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:262</div></div>
<div class="ttc" id="aa10906_html_a0696e18f727a511bfa4ac86a8c16b9f0"><div class="ttname"><a href="../../d4/db9/a10906.html#a0696e18f727a511bfa4ac86a8c16b9f0">SpellInfo::SpellLevel</a></div><div class="ttdeci">uint32 SpellLevel</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:360</div></div>
<div class="ttc" id="aa10906_html_a40cefe82961ab58e8070546b2d1a1fc5"><div class="ttname"><a href="../../d4/db9/a10906.html#a40cefe82961ab58e8070546b2d1a1fc5">SpellInfo::ManaPerSecondPerLevel</a></div><div class="ttdeci">uint32 ManaPerSecondPerLevel</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:366</div></div>
<div class="ttc" id="aa10906_html_a8fff47546b8052ac55963dd40e4ae394"><div class="ttname"><a href="../../d4/db9/a10906.html#a8fff47546b8052ac55963dd40e4ae394">SpellInfo::ManaPerSecond</a></div><div class="ttdeci">uint32 ManaPerSecond</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:365</div></div>
<div class="ttc" id="aa10906_html_a975746d6b737abb063ea037327abfc5a"><div class="ttname"><a href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">SpellInfo::HasAttribute</a></div><div class="ttdeci">bool HasAttribute(SpellAttr0 attribute) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:415</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00144">CalcMaxCharges()</a>, <a class="el" href="../../#l00131">CalcMaxDuration()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l00053">IN_MILLISECONDS</a>, <a class="el" href="../../#l00257">m_duration</a>, <a class="el" href="../../#l00265">m_effects</a>, <a class="el" href="../../#l00270">m_isUsingCharges</a>, <a class="el" href="../../#l00256">m_maxDuration</a>, <a class="el" href="../../#l00262">m_procCharges</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l00258">m_timeCla</a>, <a class="el" href="../../#l00365">SpellInfo::ManaPerSecond</a>, <a class="el" href="../../#l00366">SpellInfo::ManaPerSecondPerLevel</a>, and <a class="el" href="../../#l00467">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a>.</p>

</div>
</div>
<a id="ac7a35591f5b0d0429cf706984dbe4316" name="ac7a35591f5b0d0429cf706984dbe4316"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7a35591f5b0d0429cf706984dbe4316">&#9670;&#160;</a></span>~Aura()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Aura::~Aura </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  448</span>{</div>
<div class="line"><span class="lineno">  449</span>    <span class="comment">// unload scripts</span></div>
<div class="line"><span class="lineno">  450</span>    <span class="keywordflow">while</span> (!<a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.empty())</div>
<div class="line"><span class="lineno">  451</span>    {</div>
<div class="line"><span class="lineno">  452</span>        std::list&lt;AuraScript*&gt;::iterator itr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin();</div>
<div class="line"><span class="lineno">  453</span>        (*itr)-&gt;_Unload();</div>
<div class="line"><span class="lineno">  454</span>        <span class="keyword">delete</span> (*itr);</div>
<div class="line"><span class="lineno">  455</span>        <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.erase(itr);</div>
<div class="line"><span class="lineno">  456</span>    }</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>    <span class="comment">// free effects memory</span></div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno">  460</span>        <span class="keyword">delete</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i];</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.empty());</div>
<div class="line"><span class="lineno">  463</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#accc852560f7b56d60c77581365a3b17f">_DeleteRemovedApplications</a>();</div>
<div class="line"><span class="lineno">  464</span>}</div>
<div class="ttc" id="aa00011_html_af343b20373ba49a92fce523e948f2ab3"><div class="ttname"><a href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a></div><div class="ttdeci">#define ASSERT</div><div class="ttdef"><b>Definition:</b> Errors.h:68</div></div>
<div class="ttc" id="aa00497_html_a15a8d014fadf85c99a2268d8cbd00767"><div class="ttname"><a href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a></div><div class="ttdeci">std::uint8_t uint8</div><div class="ttdef"><b>Definition:</b> Define.h:109</div></div>
<div class="ttc" id="aa02750_html_ac5733f5b58bf8a23a1919a005b5ec895"><div class="ttname"><a href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a></div><div class="ttdeci">#define MAX_SPELL_EFFECTS</div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1636</div></div>
<div class="ttc" id="aa10802_html_a2f182c808ac1ea674dbc625ac03716b6"><div class="ttname"><a href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">Aura::m_loadedScripts</a></div><div class="ttdeci">std::list&lt; AuraScript * &gt; m_loadedScripts</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:238</div></div>
<div class="ttc" id="aa10802_html_a59978cc8d9ebb00cb569d64eed5cef03"><div class="ttname"><a href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">Aura::m_applications</a></div><div class="ttdeci">ApplicationMap m_applications</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:266</div></div>
<div class="ttc" id="aa10802_html_accc852560f7b56d60c77581365a3b17f"><div class="ttname"><a href="../../d3/d9a/a10802.html#accc852560f7b56d60c77581365a3b17f">Aura::_DeleteRemovedApplications</a></div><div class="ttdeci">void _DeleteRemovedApplications()</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2347</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02347">_DeleteRemovedApplications()</a>, <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00266">m_applications</a>, <a class="el" href="../../#l00265">m_effects</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aaf49ca3ee98e09b072985755bcfb2d34" name="aaf49ca3ee98e09b072985755bcfb2d34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf49ca3ee98e09b072985755bcfb2d34">&#9670;&#160;</a></span>_ApplyEffectForTargets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::_ApplyEffectForTargets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>effIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  736</span>{</div>
<div class="line"><span class="lineno">  737</span>    <span class="comment">// prepare list of aura targets</span></div>
<div class="line"><span class="lineno">  738</span>    <a class="code hl_typedef" href="../../de/d3d/a03515.html#abbe331960980fa852a0be15ccebef947">UnitList</a> targetList;</div>
<div class="line"><span class="lineno">  739</span>    <span class="keywordflow">for</span> (ApplicationMap::iterator appIter = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.begin(); appIter != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.end(); ++appIter)</div>
<div class="line"><span class="lineno">  740</span>    {</div>
<div class="line"><span class="lineno">  741</span>        <span class="keywordflow">if</span> ((appIter-&gt;second-&gt;GetEffectsToApply() &amp; (1 &lt;&lt; effIndex)) &amp;&amp; !appIter-&gt;second-&gt;HasEffect(effIndex))</div>
<div class="line"><span class="lineno">  742</span>            targetList.push_back(appIter-&gt;second-&gt;GetTarget());</div>
<div class="line"><span class="lineno">  743</span>    }</div>
<div class="line"><span class="lineno">  744</span> </div>
<div class="line"><span class="lineno">  745</span>    <span class="comment">// apply effect to targets</span></div>
<div class="line"><span class="lineno">  746</span>    <span class="keywordflow">for</span> (UnitList::iterator itr = targetList.begin(); itr != targetList.end(); ++itr)</div>
<div class="line"><span class="lineno">  747</span>    {</div>
<div class="line"><span class="lineno">  748</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#aa5e42f1c32857e82102fd95bb46ec013">GetApplicationOfTarget</a>((*itr)-&gt;GetGUID()))</div>
<div class="line"><span class="lineno">  749</span>        {</div>
<div class="line"><span class="lineno">  750</span>            <span class="comment">// owner has to be in world, or effect has to be applied to self</span></div>
<div class="line"><span class="lineno">  751</span>            <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>((!<a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;IsInWorld() &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>() == *itr) || <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;IsInMap(*itr));</div>
<div class="line"><span class="lineno">  752</span>            (*itr)-&gt;_ApplyAuraEffect(<span class="keyword">this</span>, effIndex);</div>
<div class="line"><span class="lineno">  753</span>        }</div>
<div class="line"><span class="lineno">  754</span>    }</div>
<div class="line"><span class="lineno">  755</span>}</div>
<div class="ttc" id="aa03515_html_abbe331960980fa852a0be15ccebef947"><div class="ttname"><a href="../../de/d3d/a03515.html#abbe331960980fa852a0be15ccebef947">UnitList</a></div><div class="ttdeci">std::list&lt; Unit * &gt; UnitList</div><div class="ttdef"><b>Definition:</b> Unit.h:76</div></div>
<div class="ttc" id="aa10802_html_a5041a8d07612a0ddf3bc2b944e14c9ad"><div class="ttname"><a href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">Aura::GetOwner</a></div><div class="ttdeci">WorldObject * GetOwner() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:107</div></div>
<div class="ttc" id="aa10802_html_aa5e42f1c32857e82102fd95bb46ec013"><div class="ttname"><a href="../../d3/d9a/a10802.html#aa5e42f1c32857e82102fd95bb46ec013">Aura::GetApplicationOfTarget</a></div><div class="ttdeci">const AuraApplication * GetApplicationOfTarget(ObjectGuid guid) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:183</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00183">GetApplicationOfTarget()</a>, <a class="el" href="../../#l00107">GetOwner()</a>, and <a class="el" href="../../#l00266">m_applications</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01319">Spell::EffectApplyAreaAura()</a>, <a class="el" href="../../#l01308">Spell::EffectApplyAura()</a>, and <a class="el" href="../../#l01844">Spell::EffectPersistentAA()</a>.</p>

</div>
</div>
<a id="ad1c2269615a73318dc9438801d1ee087" name="ad1c2269615a73318dc9438801d1ee087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1c2269615a73318dc9438801d1ee087">&#9670;&#160;</a></span>_ApplyForTarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::_ApplyForTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>auraApp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="../../d5/db1/a10806.html#a920549cf55c8def37149b00ae971127d">UnitAura</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  493</span>{</div>
<div class="line"><span class="lineno">  494</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(target);</div>
<div class="line"><span class="lineno">  495</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(auraApp);</div>
<div class="line"><span class="lineno">  496</span>    <span class="comment">// aura mustn&#39;t be already applied on target</span></div>
<div class="line"><span class="lineno">  497</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a> (!<a class="code hl_function" href="../../d3/d9a/a10802.html#a5860e9094ea1ef6525b77c1957879486">IsAppliedOnTarget</a>(target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>()) &amp;&amp; <span class="stringliteral">&quot;Aura::_ApplyForTarget: aura musn&#39;t be already applied on target&quot;</span>);</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>[target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>()] = auraApp;</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>    <span class="comment">// set infinity cooldown state for spells</span></div>
<div class="line"><span class="lineno">  502</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a43566c3ed76d2e2a9eb6830061c772bd">IsCooldownStartedOnEvent</a>() &amp;&amp; !<a class="code hl_variable" href="../../d3/d9a/a10802.html#a742caadbfa7658d6957bf73eda7c624a">m_castItemGuid</a> &amp;&amp; caster)</div>
<div class="line"><span class="lineno">  503</span>    {</div>
<div class="line"><span class="lineno">  504</span>        <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno">  505</span>        {</div>
<div class="line"><span class="lineno">  506</span>            caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a7d8edd7357f54d719fbe47e021b9997e">AddSpellAndCategoryCooldowns</a>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, 0, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  507</span>        }</div>
<div class="line"><span class="lineno">  508</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  509</span>        {</div>
<div class="line"><span class="lineno">  510</span>            caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>()-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#ab0dbb5f519f404a1003b7ef55112e79c">AddSpellCooldown</a>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>, 0, <a class="code hl_variable" href="../../de/d3d/a03515.html#a76b85ce9200f098d29159574458e921e">infinityCooldownDelay</a>);</div>
<div class="line"><span class="lineno">  511</span>        }</div>
<div class="line"><span class="lineno">  512</span>    }</div>
<div class="line"><span class="lineno">  513</span>}</div>
<div class="ttc" id="aa03515_html_a76b85ce9200f098d29159574458e921e"><div class="ttname"><a href="../../de/d3d/a03515.html#a76b85ce9200f098d29159574458e921e">infinityCooldownDelay</a></div><div class="ttdeci">static constexpr uint32 infinityCooldownDelay</div><div class="ttdef"><b>Definition:</b> Unit.h:46</div></div>
<div class="ttc" id="aa07778_html_ab0dbb5f519f404a1003b7ef55112e79c"><div class="ttname"><a href="../../df/d49/a07778.html#ab0dbb5f519f404a1003b7ef55112e79c">Creature::AddSpellCooldown</a></div><div class="ttdeci">void AddSpellCooldown(uint32 spell_id, uint32, uint32 end_time, bool needSendToClient=false, bool forceSendToSpectator=false) override</div><div class="ttdef"><b>Definition:</b> Creature.cpp:2860</div></div>
<div class="ttc" id="aa08150_html_a1b9ed00e8d7ac5fed698ef6431905296"><div class="ttname"><a href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">Object::IsPlayer</a></div><div class="ttdeci">bool IsPlayer() const</div><div class="ttdef"><b>Definition:</b> Object.h:197</div></div>
<div class="ttc" id="aa08150_html_a328d5f752cc33ed398b3d9861ef6929d"><div class="ttname"><a href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">Object::ToPlayer</a></div><div class="ttdeci">Player * ToPlayer()</div><div class="ttdef"><b>Definition:</b> Object.h:198</div></div>
<div class="ttc" id="aa08150_html_ab0e2ef1ac1daa91476f749e0ec6ad3c6"><div class="ttname"><a href="../../d6/d80/a08150.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">Object::ToCreature</a></div><div class="ttdeci">Creature * ToCreature()</div><div class="ttdef"><b>Definition:</b> Object.h:202</div></div>
<div class="ttc" id="aa08394_html_a7d8edd7357f54d719fbe47e021b9997e"><div class="ttname"><a href="../../da/da3/a08394.html#a7d8edd7357f54d719fbe47e021b9997e">Player::AddSpellAndCategoryCooldowns</a></div><div class="ttdeci">void AddSpellAndCategoryCooldowns(SpellInfo const *spellInfo, uint32 itemId, Spell *spell=nullptr, bool infinityCooldown=false)</div><div class="ttdef"><b>Definition:</b> Player.cpp:10917</div></div>
<div class="ttc" id="aa10802_html_a5860e9094ea1ef6525b77c1957879486"><div class="ttname"><a href="../../d3/d9a/a10802.html#a5860e9094ea1ef6525b77c1957879486">Aura::IsAppliedOnTarget</a></div><div class="ttdeci">bool IsAppliedOnTarget(ObjectGuid guid) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:185</div></div>
<div class="ttc" id="aa10906_html_a43566c3ed76d2e2a9eb6830061c772bd"><div class="ttname"><a href="../../d4/db9/a10906.html#a43566c3ed76d2e2a9eb6830061c772bd">SpellInfo::IsCooldownStartedOnEvent</a></div><div class="ttdeci">bool IsCooldownStartedOnEvent() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1212</div></div>
<div class="ttc" id="aa10906_html_a49bc14059c2bd3785231c52e0d54d382"><div class="ttname"><a href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">SpellInfo::Id</a></div><div class="ttdeci">uint32 Id</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:320</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l10917">Player::AddSpellAndCategoryCooldowns()</a>, <a class="el" href="../../#l02860">Creature::AddSpellCooldown()</a>, <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l00046">infinityCooldownDelay</a>, <a class="el" href="../../#l00185">IsAppliedOnTarget()</a>, <a class="el" href="../../#l01212">SpellInfo::IsCooldownStartedOnEvent()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00266">m_applications</a>, <a class="el" href="../../#l00251">m_castItemGuid</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l00202">Object::ToCreature()</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02775">UnitAura::_ApplyForTarget()</a>, and <a class="el" href="../../#l04453">Unit::_CreateAuraApplication()</a>.</p>

</div>
</div>
<a id="accc852560f7b56d60c77581365a3b17f" name="accc852560f7b56d60c77581365a3b17f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accc852560f7b56d60c77581365a3b17f">&#9670;&#160;</a></span>_DeleteRemovedApplications()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::_DeleteRemovedApplications </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2348</span>{</div>
<div class="line"><span class="lineno"> 2349</span>    <span class="keywordflow">while</span> (!<a class="code hl_variable" href="../../d3/d9a/a10802.html#a04a25715c9b268afa2025a47681df76c">m_removedApplications</a>.empty())</div>
<div class="line"><span class="lineno"> 2350</span>    {</div>
<div class="line"><span class="lineno"> 2351</span>        <span class="keyword">delete</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#a04a25715c9b268afa2025a47681df76c">m_removedApplications</a>.front();</div>
<div class="line"><span class="lineno"> 2352</span>        <a class="code hl_variable" href="../../d3/d9a/a10802.html#a04a25715c9b268afa2025a47681df76c">m_removedApplications</a>.pop_front();</div>
<div class="line"><span class="lineno"> 2353</span>    }</div>
<div class="line"><span class="lineno"> 2354</span>}</div>
<div class="ttc" id="aa10802_html_a04a25715c9b268afa2025a47681df76c"><div class="ttname"><a href="../../d3/d9a/a10802.html#a04a25715c9b268afa2025a47681df76c">Aura::m_removedApplications</a></div><div class="ttdeci">Unit::AuraApplicationList m_removedApplications</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:273</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00273">m_removedApplications</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00756">UpdateOwner()</a>, and <a class="el" href="../../#l00447">~Aura()</a>.</p>

</div>
</div>
<a id="ab477124f94af36e9be706451dce791f7" name="ab477124f94af36e9be706451dce791f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab477124f94af36e9be706451dce791f7">&#9670;&#160;</a></span>_InitEffects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::_InitEffects </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>effMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>baseAmount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  436</span>{</div>
<div class="line"><span class="lineno">  437</span>    <span class="comment">// shouldn&#39;t be in constructor - functions in AuraEffect::AuraEffect use polymorphism</span></div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno">  439</span>    {</div>
<div class="line"><span class="lineno">  440</span>        <span class="keywordflow">if</span> (effMask &amp; (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>(1) &lt;&lt; i))</div>
<div class="line"><span class="lineno">  441</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i] = <span class="keyword">new</span> <a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>(<span class="keyword">this</span>, i, baseAmount ? baseAmount + i : <span class="keyword">nullptr</span>, caster);</div>
<div class="line"><span class="lineno">  442</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  443</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i] = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  444</span>    }</div>
<div class="line"><span class="lineno">  445</span>}</div>
<div class="ttc" id="aa10790_html"><div class="ttname"><a href="../../de/d50/a10790.html">AuraEffect</a></div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:39</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00265">m_effects</a>, and <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02869">DynObjAura::DynObjAura()</a>, and <a class="el" href="../../#l02766">UnitAura::UnitAura()</a>.</p>

</div>
</div>
<a id="a39432e85258e75a84161c672a68d8f5f" name="a39432e85258e75a84161c672a68d8f5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39432e85258e75a84161c672a68d8f5f">&#9670;&#160;</a></span>_RegisterForTargets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::_RegisterForTargets </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  121</span>{<a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>(); <a class="code hl_function" href="../../d3/d9a/a10802.html#a8b5668b0179cec254f21a0b6bdf83974">UpdateTargetMap</a>(caster, <span class="keyword">false</span>);}</div>
<div class="ttc" id="aa08526_html"><div class="ttname"><a href="../../d6/d15/a08526.html">Unit</a></div><div class="ttdef"><b>Definition:</b> Unit.h:630</div></div>
<div class="ttc" id="aa10802_html_a6fc52109b7711606f15d9880fda8f815"><div class="ttname"><a href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">Aura::GetCaster</a></div><div class="ttdeci">Unit * GetCaster() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:471</div></div>
<div class="ttc" id="aa10802_html_a8b5668b0179cec254f21a0b6bdf83974"><div class="ttname"><a href="../../d3/d9a/a10802.html#a8b5668b0179cec254f21a0b6bdf83974">Aura::UpdateTargetMap</a></div><div class="ttdeci">void UpdateTargetMap(Unit *caster, bool apply=true)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:588</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00471">GetCaster()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03002">Spell::DoSpellHitOnUnit()</a>, and <a class="el" href="../../#l01844">Spell::EffectPersistentAA()</a>.</p>

</div>
</div>
<a id="afb6874ab08b221b2f1f9d7582c1c93be" name="afb6874ab08b221b2f1f9d7582c1c93be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb6874ab08b221b2f1f9d7582c1c93be">&#9670;&#160;</a></span>_Remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::_Remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a>&#160;</td>
          <td class="paramname"><em>removeMode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  575</span>{</div>
<div class="line"><span class="lineno">  576</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a> (!<a class="code hl_variable" href="../../d3/d9a/a10802.html#ae63436802a402d26115d21f4a2073e1a">m_isRemoved</a>);</div>
<div class="line"><span class="lineno">  577</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#ae63436802a402d26115d21f4a2073e1a">m_isRemoved</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  578</span>    ApplicationMap::iterator appItr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.begin();</div>
<div class="line"><span class="lineno">  579</span>    <span class="keywordflow">for</span> (appItr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.begin(); appItr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.end();)</div>
<div class="line"><span class="lineno">  580</span>    {</div>
<div class="line"><span class="lineno">  581</span>        <a class="code hl_class" href="../../d4/d87/a10798.html">AuraApplication</a>* aurApp = appItr-&gt;second;</div>
<div class="line"><span class="lineno">  582</span>        <a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../d4/d87/a10798.html#a0447441f89446b170d751abbdda541b8">GetTarget</a>();</div>
<div class="line"><span class="lineno">  583</span>        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a2681906ad625eb9effbe367c7f53a930">_UnapplyAura</a>(aurApp, removeMode);</div>
<div class="line"><span class="lineno">  584</span>        appItr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.begin();</div>
<div class="line"><span class="lineno">  585</span>    }</div>
<div class="line"><span class="lineno">  586</span>}</div>
<div class="ttc" id="aa08526_html_a2681906ad625eb9effbe367c7f53a930"><div class="ttname"><a href="../../d6/d15/a08526.html#a2681906ad625eb9effbe367c7f53a930">Unit::_UnapplyAura</a></div><div class="ttdeci">void _UnapplyAura(AuraApplicationMap::iterator &amp;i, AuraRemoveMode removeMode)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4551</div></div>
<div class="ttc" id="aa10798_html"><div class="ttname"><a href="../../d4/d87/a10798.html">AuraApplication</a></div><div class="ttdef"><b>Definition:</b> SpellAuras.h:37</div></div>
<div class="ttc" id="aa10798_html_a0447441f89446b170d751abbdda541b8"><div class="ttname"><a href="../../d4/d87/a10798.html#a0447441f89446b170d751abbdda541b8">AuraApplication::GetTarget</a></div><div class="ttdeci">Unit * GetTarget() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:61</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l04551">Unit::_UnapplyAura()</a>, <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00266">m_applications</a>, and <a class="el" href="../../#l00268">m_isRemoved</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02880">DynObjAura::Remove()</a>, <a class="el" href="../../#l00222">DynamicObject::RemoveAura()</a>, and <a class="el" href="../../#l04705">Unit::RemoveOwnedAura()</a>.</p>

</div>
</div>
<a id="a068cc46b636b35d317aea47a2de6253e" name="a068cc46b636b35d317aea47a2de6253e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a068cc46b636b35d317aea47a2de6253e">&#9670;&#160;</a></span>_UnapplyForTarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::_UnapplyForTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>auraApp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000117">Todo:</a></b></dt><dd>: Figure out why this happens </dd></dl>

<p>Reimplemented in <a class="el" href="../../d5/db1/a10806.html#af4d453cee6758e633bdcae0049581898">UnitAura</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  516</span>{</div>
<div class="line"><span class="lineno">  517</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(target);</div>
<div class="line"><span class="lineno">  518</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(auraApp-&gt;<a class="code hl_function" href="../../d4/d87/a10798.html#ae6b921446fc7901f8f053e19c3fb3f4c">GetRemoveMode</a>());</div>
<div class="line"><span class="lineno">  519</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(auraApp);</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>    ApplicationMap::iterator itr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.find(target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  524</span>    <span class="keywordflow">if</span> (itr == <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.end())</div>
<div class="line"><span class="lineno">  525</span>    {</div>
<div class="line"><span class="lineno">  526</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;Aura::_UnapplyForTarget, target:{}, caster:{}, spell:{} was not found in owners application map!&quot;</span>,</div>
<div class="line"><span class="lineno">  527</span>                       target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../d9/d08/a08198.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>(), caster ? caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../d9/d08/a08198.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>() : <span class="stringliteral">&quot;&quot;</span>, auraApp-&gt;<a class="code hl_function" href="../../d4/d87/a10798.html#a9b6b06314c8c0314cfb8e19ec4e27bfd">GetBase</a>()-&gt;<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>);</div>
<div class="line"><span class="lineno">  528</span>        <a class="code hl_define" href="../../da/d45/a00011.html#a5376571bbf4cdc9782683635f366f89a">ABORT</a>();</div>
<div class="line"><span class="lineno">  529</span>    }</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>    <span class="comment">// aura has to be already applied</span></div>
<div class="line"><span class="lineno">  532</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(itr-&gt;second == auraApp);</div>
<div class="line"><span class="lineno">  533</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.erase(itr);</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a04a25715c9b268afa2025a47681df76c">m_removedApplications</a>.push_back(auraApp);</div>
<div class="line"><span class="lineno">  536</span> </div>
<div class="line"><span class="lineno">  537</span>    <span class="comment">// reset cooldown state for spells</span></div>
<div class="line"><span class="lineno">  538</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a43566c3ed76d2e2a9eb6830061c772bd">IsCooldownStartedOnEvent</a>() &amp;&amp; !<a class="code hl_variable" href="../../d3/d9a/a10802.html#a742caadbfa7658d6957bf73eda7c624a">m_castItemGuid</a> &amp;&amp; caster)</div>
<div class="line"><span class="lineno">  539</span>    {</div>
<div class="line"><span class="lineno">  540</span>        <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno">  541</span>        {</div>
<div class="line"><span class="lineno">  542</span>            <span class="comment">// note: item based cooldowns and cooldown spell mods with charges ignored (unknown existed cases)</span></div>
<div class="line"><span class="lineno">  543</span>            caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#af30525fcf507cfc5f665e70eb6181318">SendCooldownEvent</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno">  544</span>        }</div>
<div class="line"><span class="lineno">  545</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  546</span>        {</div>
<div class="line"><span class="lineno">  547</span>            caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>()-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#ab0dbb5f519f404a1003b7ef55112e79c">AddSpellCooldown</a>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>, 0, 0);</div>
<div class="line"><span class="lineno">  548</span> </div>
<div class="line"><span class="lineno">  549</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* owner = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a7cdd398abd6ac328deb42529195e6add">GetCharmerOrOwner</a>())</div>
<div class="line"><span class="lineno">  550</span>            {</div>
<div class="line"><span class="lineno">  551</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../da/da3/a08394.html">Player</a>* playerOwner = owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno">  552</span>                {</div>
<div class="line"><span class="lineno">  553</span>                    <a class="code hl_class" href="../../d2/da2/a10706.html">WorldPacket</a> data(<a class="code hl_enumvalue" href="../../d5/dfd/a04680.html#gga1073b6abb3a749f18bf1633020879e9ba2afee601e77270eb586edd96c08bb57e">SMSG_COOLDOWN_EVENT</a>, 4 + 8);</div>
<div class="line"><span class="lineno">  554</span>                    data &lt;&lt; <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>);</div>
<div class="line"><span class="lineno">  555</span>                    data &lt;&lt; caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>();</div>
<div class="line"><span class="lineno">  556</span>                    playerOwner-&gt;SendDirectMessage(&amp;data);</div>
<div class="line"><span class="lineno">  557</span>                }</div>
<div class="line"><span class="lineno">  558</span>            }</div>
<div class="line"><span class="lineno">  559</span>        }</div>
<div class="line"><span class="lineno">  560</span>    }</div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span>    <span class="keywordflow">if</span> (caster &amp;&amp; caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno">  563</span>    {</div>
<div class="line"><span class="lineno">  564</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;IsCooldownStartedOnEvent() &amp;&amp; !<a class="code hl_variable" href="../../d3/d9a/a10802.html#a742caadbfa7658d6957bf73eda7c624a">m_castItemGuid</a>)</div>
<div class="line"><span class="lineno">  565</span>        {</div>
<div class="line"><span class="lineno">  566</span>            <span class="comment">// note: item based cooldowns and cooldown spell mods with charges ignored (unknown existed cases)</span></div>
<div class="line"><span class="lineno">  567</span>            caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#af30525fcf507cfc5f665e70eb6181318">SendCooldownEvent</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno">  568</span>        }</div>
<div class="line"><span class="lineno">  569</span>    }</div>
<div class="line"><span class="lineno">  570</span>}</div>
<div class="ttc" id="aa00011_html_a5376571bbf4cdc9782683635f366f89a"><div class="ttname"><a href="../../da/d45/a00011.html#a5376571bbf4cdc9782683635f366f89a">ABORT</a></div><div class="ttdeci">#define ABORT</div><div class="ttdef"><b>Definition:</b> Errors.h:76</div></div>
<div class="ttc" id="aa00035_html_a43832e3fa8508deb4ce43e520005fcd9"><div class="ttname"><a href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR(filterType__,...)</div><div class="ttdef"><b>Definition:</b> Log.h:157</div></div>
<div class="ttc" id="aa00497_html_a22f78cc9780bf32aff91ae17c3101c8d"><div class="ttname"><a href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a></div><div class="ttdeci">std::uint32_t uint32</div><div class="ttdef"><b>Definition:</b> Define.h:107</div></div>
<div class="ttc" id="aa04680_html_gga1073b6abb3a749f18bf1633020879e9ba2afee601e77270eb586edd96c08bb57e"><div class="ttname"><a href="../../d5/dfd/a04680.html#gga1073b6abb3a749f18bf1633020879e9ba2afee601e77270eb586edd96c08bb57e">SMSG_COOLDOWN_EVENT</a></div><div class="ttdeci">@ SMSG_COOLDOWN_EVENT</div><div class="ttdef"><b>Definition:</b> Opcodes.h:339</div></div>
<div class="ttc" id="aa08198_html_a78f5fb47e3b35addf8984000c175125b"><div class="ttname"><a href="../../d9/d08/a08198.html#a78f5fb47e3b35addf8984000c175125b">ObjectGuid::ToString</a></div><div class="ttdeci">std::string ToString() const</div><div class="ttdef"><b>Definition:</b> ObjectGuid.cpp:47</div></div>
<div class="ttc" id="aa08394_html"><div class="ttname"><a href="../../da/da3/a08394.html">Player</a></div><div class="ttdef"><b>Definition:</b> Player.h:1064</div></div>
<div class="ttc" id="aa08394_html_af30525fcf507cfc5f665e70eb6181318"><div class="ttname"><a href="../../da/da3/a08394.html#af30525fcf507cfc5f665e70eb6181318">Player::SendCooldownEvent</a></div><div class="ttdeci">void SendCooldownEvent(SpellInfo const *spellInfo, uint32 itemId=0, Spell *spell=nullptr, bool setCooldown=true)</div><div class="ttdef"><b>Definition:</b> Player.cpp:11115</div></div>
<div class="ttc" id="aa08526_html_a7cdd398abd6ac328deb42529195e6add"><div class="ttname"><a href="../../d6/d15/a08526.html#a7cdd398abd6ac328deb42529195e6add">Unit::GetCharmerOrOwner</a></div><div class="ttdeci">Unit * GetCharmerOrOwner() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1211</div></div>
<div class="ttc" id="aa10706_html"><div class="ttname"><a href="../../d2/da2/a10706.html">WorldPacket</a></div><div class="ttdef"><b>Definition:</b> WorldPacket.h:26</div></div>
<div class="ttc" id="aa10798_html_a9b6b06314c8c0314cfb8e19ec4e27bfd"><div class="ttname"><a href="../../d4/d87/a10798.html#a9b6b06314c8c0314cfb8e19ec4e27bfd">AuraApplication::GetBase</a></div><div class="ttdeci">Aura * GetBase() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:62</div></div>
<div class="ttc" id="aa10798_html_ae6b921446fc7901f8f053e19c3fb3f4c"><div class="ttname"><a href="../../d4/d87/a10798.html#ae6b921446fc7901f8f053e19c3fb3f4c">AuraApplication::GetRemoveMode</a></div><div class="ttdeci">AuraRemoveMode GetRemoveMode() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:73</div></div>
<div class="ttc" id="aa10802_html_ab4abe60bbc09777bab95a0a0ec66af25"><div class="ttname"><a href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">Aura::GetSpellInfo</a></div><div class="ttdeci">SpellInfo const * GetSpellInfo() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:100</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00076">ABORT</a>, <a class="el" href="../../#l02860">Creature::AddSpellCooldown()</a>, <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00062">AuraApplication::GetBase()</a>, <a class="el" href="../../#l01211">Unit::GetCharmerOrOwner()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l01212">SpellInfo::IsCooldownStartedOnEvent()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00157">LOG_ERROR</a>, <a class="el" href="../../#l00266">m_applications</a>, <a class="el" href="../../#l00251">m_castItemGuid</a>, <a class="el" href="../../#l00273">m_removedApplications</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l11115">Player::SendCooldownEvent()</a>, <a class="el" href="../../#l00339">SMSG_COOLDOWN_EVENT</a>, <a class="el" href="../../#l00202">Object::ToCreature()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00047">ObjectGuid::ToString()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04551">Unit::_UnapplyAura()</a>, and <a class="el" href="../../#l02784">UnitAura::_UnapplyForTarget()</a>.</p>

</div>
</div>
<a id="a4febc2d258a8e20326e465a9c1ed8512" name="a4febc2d258a8e20326e465a9c1ed8512"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4febc2d258a8e20326e465a9c1ed8512">&#9670;&#160;</a></span>AddProcCooldown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::AddProcCooldown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d84/a00338.html#a1c3834b9e3853535027d58bf21bec81f">Milliseconds</a>&#160;</td>
          <td class="paramname"><em>msec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2202</span>{</div>
<div class="line"><span class="lineno"> 2203</span>    <span class="comment">//m_procCooldown = std:chrono::steady_clock::now() + msec;</span></div>
<div class="line"><span class="lineno"> 2204</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l02206">PrepareProcToTrigger()</a>.</p>

</div>
</div>
<a id="a8d8873578888c4c29200e3cba17d0502" name="a8d8873578888c4c29200e3cba17d0502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d8873578888c4c29200e3cba17d0502">&#9670;&#160;</a></span>ApplyForTargets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::ApplyForTargets </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  122</span>{<a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>(); <a class="code hl_function" href="../../d3/d9a/a10802.html#a8b5668b0179cec254f21a0b6bdf83974">UpdateTargetMap</a>(caster, <span class="keyword">true</span>);}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00471">GetCaster()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l18879">Unit::AddAura()</a>.</p>

</div>
</div>
<a id="aca22c44b0c3179824f9951b0b3ce206c" name="aca22c44b0c3179824f9951b0b3ce206c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca22c44b0c3179824f9951b0b3ce206c">&#9670;&#160;</a></span>BuildEffectMaskForOwner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> Aura::BuildEffectMaskForOwner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *&#160;</td>
          <td class="paramname"><em>spellProto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>avalibleEffectMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df3/a08182.html">WorldObject</a> *&#160;</td>
          <td class="paramname"><em>owner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  299</span>{</div>
<div class="line"><span class="lineno">  300</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(spellProto);</div>
<div class="line"><span class="lineno">  301</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(owner);</div>
<div class="line"><span class="lineno">  302</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effMask = 0;</div>
<div class="line"><span class="lineno">  303</span>    <span class="keywordflow">switch</span> (owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>())</div>
<div class="line"><span class="lineno">  304</span>    {</div>
<div class="line"><span class="lineno">  305</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d7/db0/a03467.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a>:</div>
<div class="line"><span class="lineno">  306</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d7/db0/a03467.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>:</div>
<div class="line"><span class="lineno">  307</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno">  308</span>            {</div>
<div class="line"><span class="lineno">  309</span>                <span class="keywordflow">if</span> (spellProto-&gt;Effects[i].IsUnitOwnedAuraEffect())</div>
<div class="line"><span class="lineno">  310</span>                    effMask |= 1 &lt;&lt; i;</div>
<div class="line"><span class="lineno">  311</span>            }</div>
<div class="line"><span class="lineno">  312</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  313</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d7/db0/a03467.html#a183c40b2ba67065929d70b3987da4cc2a86e2d54e816ea646c9cda372df01dc68">TYPEID_DYNAMICOBJECT</a>:</div>
<div class="line"><span class="lineno">  314</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno">  315</span>            {</div>
<div class="line"><span class="lineno">  316</span>                <span class="keywordflow">if</span> (spellProto-&gt;Effects[i].Effect == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a>)</div>
<div class="line"><span class="lineno">  317</span>                    effMask |= 1 &lt;&lt; i;</div>
<div class="line"><span class="lineno">  318</span>            }</div>
<div class="line"><span class="lineno">  319</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  320</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  321</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  322</span>    }</div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">return</span> effMask &amp; avalibleEffectMask;</div>
<div class="line"><span class="lineno">  324</span>}</div>
<div class="ttc" id="aa00011_html_ae4aa5b88f8a0cd841e02343e63098f7a"><div class="ttname"><a href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a></div><div class="ttdeci">#define ASSERT_NODEBUGINFO</div><div class="ttdef"><b>Definition:</b> Errors.h:69</div></div>
<div class="ttc" id="aa02771_html_a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1"><div class="ttname"><a href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a></div><div class="ttdeci">@ SPELL_EFFECT_PERSISTENT_AREA_AURA</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:805</div></div>
<div class="ttc" id="aa03467_html_a183c40b2ba67065929d70b3987da4cc2a86e2d54e816ea646c9cda372df01dc68"><div class="ttname"><a href="../../d7/db0/a03467.html#a183c40b2ba67065929d70b3987da4cc2a86e2d54e816ea646c9cda372df01dc68">TYPEID_DYNAMICOBJECT</a></div><div class="ttdeci">@ TYPEID_DYNAMICOBJECT</div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:38</div></div>
<div class="ttc" id="aa03467_html_a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9"><div class="ttname"><a href="../../d7/db0/a03467.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a></div><div class="ttdeci">@ TYPEID_UNIT</div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:35</div></div>
<div class="ttc" id="aa03467_html_a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c"><div class="ttname"><a href="../../d7/db0/a03467.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a></div><div class="ttdeci">@ TYPEID_PLAYER</div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:36</div></div>
<div class="ttc" id="aa08150_html_a621a345fc34deed6d3a4e1e498a652da"><div class="ttname"><a href="../../d6/d80/a08150.html#a621a345fc34deed6d3a4e1e498a652da">Object::GetTypeId</a></div><div class="ttdeci">TypeID GetTypeId() const</div><div class="ttdef"><b>Definition:</b> Object.h:124</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00069">ASSERT_NODEBUGINFO</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00124">Object::GetTypeId()</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l00805">SPELL_EFFECT_PERSISTENT_AREA_AURA</a>, <a class="el" href="../../#l00038">TYPEID_DYNAMICOBJECT</a>, <a class="el" href="../../#l00036">TYPEID_PLAYER</a>, and <a class="el" href="../../#l00035">TYPEID_UNIT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00352">TryCreate()</a>, and <a class="el" href="../../#l00326">TryRefreshStackOrCreate()</a>.</p>

</div>
</div>
<a id="a7e2bf3f6ccfcf6531a3cb146f1eb5405" name="a7e2bf3f6ccfcf6531a3cb146f1eb5405"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e2bf3f6ccfcf6531a3cb146f1eb5405">&#9670;&#160;</a></span>CalcDispelChance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> Aura::CalcDispelChance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>auraTarget</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>offensive</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1183</span>{</div>
<div class="line"><span class="lineno"> 1184</span>    <span class="comment">// we assume that aura dispel chance is 100% on start</span></div>
<div class="line"><span class="lineno"> 1185</span>    <span class="comment">// need formula for level difference based chance</span></div>
<div class="line"><span class="lineno"> 1186</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> resistChance = 0;</div>
<div class="line"><span class="lineno"> 1187</span> </div>
<div class="line"><span class="lineno"> 1188</span>    <span class="comment">// Apply dispel mod from aura caster</span></div>
<div class="line"><span class="lineno"> 1189</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>())</div>
<div class="line"><span class="lineno"> 1190</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../da/da3/a08394.html">Player</a>* modOwner = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a2e6a98844f96c211f47b911a2766ada8">GetSpellModOwner</a>())</div>
<div class="line"><span class="lineno"> 1191</span>            modOwner-&gt;ApplySpellMod(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>(), <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351afeabfe64507fbc8262484ccb76f4bf49">SPELLMOD_RESIST_DISPEL_CHANCE</a>, resistChance);</div>
<div class="line"><span class="lineno"> 1192</span> </div>
<div class="line"><span class="lineno"> 1193</span>    <span class="comment">// Dispel resistance from target SPELL_AURA_MOD_DISPEL_RESIST</span></div>
<div class="line"><span class="lineno"> 1194</span>    <span class="comment">// Only affects offensive dispels</span></div>
<div class="line"><span class="lineno"> 1195</span>    <span class="keywordflow">if</span> (offensive &amp;&amp; auraTarget)</div>
<div class="line"><span class="lineno"> 1196</span>        resistChance += auraTarget-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#ad8ea13960b62a966b516a1929585ea7b">GetTotalAuraModifier</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afba710f82abb2c1c8a2c9a267a68a340">SPELL_AURA_MOD_DISPEL_RESIST</a>);</div>
<div class="line"><span class="lineno"> 1197</span> </div>
<div class="line"><span class="lineno"> 1198</span>    resistChance = resistChance &lt; 0 ? 0 : resistChance;</div>
<div class="line"><span class="lineno"> 1199</span>    resistChance = resistChance &gt; 100 ? 100 : resistChance;</div>
<div class="line"><span class="lineno"> 1200</span>    <span class="keywordflow">return</span> 100 - resistChance;</div>
<div class="line"><span class="lineno"> 1201</span>}</div>
<div class="ttc" id="aa00497_html_a0bf9964a3ce962c07ad3d8b5432bbbcd"><div class="ttname"><a href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a></div><div class="ttdeci">std::int32_t int32</div><div class="ttdef"><b>Definition:</b> Define.h:103</div></div>
<div class="ttc" id="aa03080_html_a39b60e1f12cca9b6873cb817e7717351afeabfe64507fbc8262484ccb76f4bf49"><div class="ttname"><a href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351afeabfe64507fbc8262484ccb76f4bf49">SPELLMOD_RESIST_DISPEL_CHANCE</a></div><div class="ttdeci">@ SPELLMOD_RESIST_DISPEL_CHANCE</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:104</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799afba710f82abb2c1c8a2c9a267a68a340"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afba710f82abb2c1c8a2c9a267a68a340">SPELL_AURA_MOD_DISPEL_RESIST</a></div><div class="ttdeci">@ SPELL_AURA_MOD_DISPEL_RESIST</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:298</div></div>
<div class="ttc" id="aa08526_html_a2e6a98844f96c211f47b911a2766ada8"><div class="ttname"><a href="../../d6/d15/a08526.html#a2e6a98844f96c211f47b911a2766ada8">Unit::GetSpellModOwner</a></div><div class="ttdeci">Player * GetSpellModOwner() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:16578</div></div>
<div class="ttc" id="aa08526_html_ad8ea13960b62a966b516a1929585ea7b"><div class="ttname"><a href="../../d6/d15/a08526.html#ad8ea13960b62a966b516a1929585ea7b">Unit::GetTotalAuraModifier</a></div><div class="ttdeci">int32 GetTotalAuraModifier(AuraType auratype) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5910</div></div>
<div class="ttc" id="aa10802_html_a54447127bfb738f6722d3f6feddfc168"><div class="ttname"><a href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">Aura::GetId</a></div><div class="ttdeci">uint32 GetId() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:466</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l16578">Unit::GetSpellModOwner()</a>, <a class="el" href="../../#l05910">Unit::GetTotalAuraModifier()</a>, <a class="el" href="../../#l00298">SPELL_AURA_MOD_DISPEL_RESIST</a>, and <a class="el" href="../../#l00104">SPELLMOD_RESIST_DISPEL_CHANCE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l05162">Spell::EffectDispelMechanic()</a>.</p>

</div>
</div>
<a id="ad786924c8b4617ff4724065b6452b04f" name="ad786924c8b4617ff4724065b6452b04f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad786924c8b4617ff4724065b6452b04f">&#9670;&#160;</a></span>CalcMaxCharges() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> Aura::CalcMaxCharges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  144</span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#ad786924c8b4617ff4724065b6452b04f">CalcMaxCharges</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>()); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00144">CalcMaxCharges()</a>, and <a class="el" href="../../#l00471">GetCaster()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00409">Aura()</a>, <a class="el" href="../../#l00144">CalcMaxCharges()</a>, <a class="el" href="../../#l00973">ModCharges()</a>, and <a class="el" href="../../#l01021">ModStackAmount()</a>.</p>

</div>
</div>
<a id="a744d6c3e73a644a84d5f49863c1bca53" name="a744d6c3e73a644a84d5f49863c1bca53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a744d6c3e73a644a84d5f49863c1bca53">&#9670;&#160;</a></span>CalcMaxCharges() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> Aura::CalcMaxCharges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  962</span>{</div>
<div class="line"><span class="lineno">  963</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> maxProcCharges = <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a4b82e530c085010e7247ae0862301ac9">ProcCharges</a>;</div>
<div class="line"><span class="lineno">  964</span>    <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../d1/d6c/a10914.html">SpellProcEntry</a> <span class="keyword">const</span>* procEntry = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellProcEntry(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>()))</div>
<div class="line"><span class="lineno">  965</span>        maxProcCharges = procEntry-&gt;Charges;</div>
<div class="line"><span class="lineno">  966</span> </div>
<div class="line"><span class="lineno">  967</span>    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno">  968</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../da/da3/a08394.html">Player</a>* modOwner = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a2e6a98844f96c211f47b911a2766ada8">GetSpellModOwner</a>())</div>
<div class="line"><span class="lineno">  969</span>            modOwner-&gt;ApplySpellMod(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>(), <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351ae8f4e49f8ba63fb75c0c151d851b5bae">SPELLMOD_CHARGES</a>, maxProcCharges);</div>
<div class="line"><span class="lineno">  970</span>    <span class="keywordflow">return</span> maxProcCharges;</div>
<div class="line"><span class="lineno">  971</span>}</div>
<div class="ttc" id="aa03080_html_a39b60e1f12cca9b6873cb817e7717351ae8f4e49f8ba63fb75c0c151d851b5bae"><div class="ttname"><a href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351ae8f4e49f8ba63fb75c0c151d851b5bae">SPELLMOD_CHARGES</a></div><div class="ttdeci">@ SPELLMOD_CHARGES</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:80</div></div>
<div class="ttc" id="aa03110_html_aa21e14d8e1145507b746a69b5487109d"><div class="ttname"><a href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a></div><div class="ttdeci">#define sSpellMgr</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:825</div></div>
<div class="ttc" id="aa10906_html_a4b82e530c085010e7247ae0862301ac9"><div class="ttname"><a href="../../d4/db9/a10906.html#a4b82e530c085010e7247ae0862301ac9">SpellInfo::ProcCharges</a></div><div class="ttdeci">uint32 ProcCharges</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:357</div></div>
<div class="ttc" id="aa10914_html"><div class="ttname"><a href="../../d1/d6c/a10914.html">SpellProcEntry</a></div><div class="ttdef"><b>Definition:</b> SpellMgr.h:290</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l16578">Unit::GetSpellModOwner()</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l00357">SpellInfo::ProcCharges</a>, <a class="el" href="../../#l00080">SPELLMOD_CHARGES</a>, and <a class="el" href="../../#l00825">sSpellMgr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01110">AuraScript::CalcMaxCharges()</a>.</p>

</div>
</div>
<a id="a97f212bb7332fdf03fccafe5389c1e0a" name="a97f212bb7332fdf03fccafe5389c1e0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97f212bb7332fdf03fccafe5389c1e0a">&#9670;&#160;</a></span>CalcMaxDuration() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> Aura::CalcMaxDuration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  131</span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#a97f212bb7332fdf03fccafe5389c1e0a">CalcMaxDuration</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>()); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00131">CalcMaxDuration()</a>, and <a class="el" href="../../#l00471">GetCaster()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00409">Aura()</a>, <a class="el" href="../../#l00131">CalcMaxDuration()</a>, <a class="el" href="../../#l01085">AuraScript::CalcMaxDuration()</a>, <a class="el" href="../../#l00909">RefreshTimers()</a>, and <a class="el" href="../../#l00931">RefreshTimersWithMods()</a>.</p>

</div>
</div>
<a id="a507acdaa5041d3faa9a804e49c29264e" name="a507acdaa5041d3faa9a804e49c29264e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a507acdaa5041d3faa9a804e49c29264e">&#9670;&#160;</a></span>CalcMaxDuration() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> Aura::CalcMaxDuration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  845</span>{</div>
<div class="line"><span class="lineno">  846</span>    <a class="code hl_class" href="../../da/da3/a08394.html">Player</a>* modOwner = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  847</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> maxDuration;</div>
<div class="line"><span class="lineno">  848</span> </div>
<div class="line"><span class="lineno">  849</span>    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno">  850</span>    {</div>
<div class="line"><span class="lineno">  851</span>        modOwner = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a2e6a98844f96c211f47b911a2766ada8">GetSpellModOwner</a>();</div>
<div class="line"><span class="lineno">  852</span>        maxDuration = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a490990b2ec18be95c613e6394e4f3f6a">CalcSpellDuration</a>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>);</div>
<div class="line"><span class="lineno">  853</span>    }</div>
<div class="line"><span class="lineno">  854</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  855</span>        maxDuration = <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#aa8de3a55617f9dbe8313e4d66907a0b7">GetDuration</a>();</div>
<div class="line"><span class="lineno">  856</span> </div>
<div class="line"><span class="lineno">  857</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>() &amp;&amp; !<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a9904a9ebdd084815af5ef6d1653ffbbd">DurationEntry</a>)</div>
<div class="line"><span class="lineno">  858</span>        maxDuration = -1;</div>
<div class="line"><span class="lineno">  859</span> </div>
<div class="line"><span class="lineno">  860</span>    <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;OnCalcMaxDuration(<span class="keyword">this</span>, maxDuration);</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>    <span class="comment">// IsPermanent() checks max duration (which we are supposed to calculate here)</span></div>
<div class="line"><span class="lineno">  863</span>    <span class="keywordflow">if</span> (maxDuration != -1 &amp;&amp; modOwner)</div>
<div class="line"><span class="lineno">  864</span>        modOwner-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#ac49430e1a68d78207f5e3a932a9306ce">ApplySpellMod</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>(), <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351abbf47ed0b69b726537ecd64649c0d73c">SPELLMOD_DURATION</a>, maxDuration);</div>
<div class="line"><span class="lineno">  865</span>    <span class="keywordflow">return</span> maxDuration;</div>
<div class="line"><span class="lineno">  866</span>}</div>
<div class="ttc" id="aa03080_html_a39b60e1f12cca9b6873cb817e7717351abbf47ed0b69b726537ecd64649c0d73c"><div class="ttname"><a href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351abbf47ed0b69b726537ecd64649c0d73c">SPELLMOD_DURATION</a></div><div class="ttdeci">@ SPELLMOD_DURATION</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:77</div></div>
<div class="ttc" id="aa04202_html_ae8161e629869974bc49b1cbfc73c1087"><div class="ttname"><a href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a></div><div class="ttdeci">#define sScriptMgr</div><div class="ttdef"><b>Definition:</b> ScriptMgr.h:709</div></div>
<div class="ttc" id="aa08394_html_ac49430e1a68d78207f5e3a932a9306ce"><div class="ttname"><a href="../../da/da3/a08394.html#ac49430e1a68d78207f5e3a932a9306ce">Player::ApplySpellMod</a></div><div class="ttdeci">void ApplySpellMod(uint32 spellId, SpellModOp op, T &amp;basevalue, Spell *spell=nullptr, bool temporaryPet=false)</div><div class="ttdef"><b>Definition:</b> Player.cpp:9739</div></div>
<div class="ttc" id="aa08526_html_a490990b2ec18be95c613e6394e4f3f6a"><div class="ttname"><a href="../../d6/d15/a08526.html#a490990b2ec18be95c613e6394e4f3f6a">Unit::CalcSpellDuration</a></div><div class="ttdeci">int32 CalcSpellDuration(SpellInfo const *spellProto)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14856</div></div>
<div class="ttc" id="aa10802_html_ae24c050668e78ef9d8728e6b5bd77c12"><div class="ttname"><a href="../../d3/d9a/a10802.html#ae24c050668e78ef9d8728e6b5bd77c12">Aura::IsPassive</a></div><div class="ttdeci">bool IsPassive() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:1082</div></div>
<div class="ttc" id="aa10906_html_a9904a9ebdd084815af5ef6d1653ffbbd"><div class="ttname"><a href="../../d4/db9/a10906.html#a9904a9ebdd084815af5ef6d1653ffbbd">SpellInfo::DurationEntry</a></div><div class="ttdeci">SpellDurationEntry const  * DurationEntry</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:361</div></div>
<div class="ttc" id="aa10906_html_aa8de3a55617f9dbe8313e4d66907a0b7"><div class="ttname"><a href="../../d4/db9/a10906.html#aa8de3a55617f9dbe8313e4d66907a0b7">SpellInfo::GetDuration</a></div><div class="ttdeci">int32 GetDuration() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:2338</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l09739">Player::ApplySpellMod()</a>, <a class="el" href="../../#l14856">Unit::CalcSpellDuration()</a>, <a class="el" href="../../#l00361">SpellInfo::DurationEntry</a>, <a class="el" href="../../#l02338">SpellInfo::GetDuration()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l16578">Unit::GetSpellModOwner()</a>, <a class="el" href="../../#l01082">IsPassive()</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l00077">SPELLMOD_DURATION</a>, and <a class="el" href="../../#l00709">sScriptMgr</a>.</p>

</div>
</div>
<a id="aa515b9daf648d268f02ef974b3573550" name="aa515b9daf648d268f02ef974b3573550"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa515b9daf648d268f02ef974b3573550">&#9670;&#160;</a></span>CalcProcChance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float Aura::CalcProcChance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d6c/a10914.html">SpellProcEntry</a> const &amp;&#160;</td>
          <td class="paramname"><em>procEntry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2312</span>{</div>
<div class="line"><span class="lineno"> 2313</span>    <span class="keywordtype">float</span> chance = procEntry.Chance;</div>
<div class="line"><span class="lineno"> 2314</span>    <span class="comment">// calculate chances depending on unit with caster&#39;s data</span></div>
<div class="line"><span class="lineno"> 2315</span>    <span class="comment">// so talents modifying chances and judgements will have properly calculated proc chance</span></div>
<div class="line"><span class="lineno"> 2316</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>())</div>
<div class="line"><span class="lineno"> 2317</span>    {</div>
<div class="line"><span class="lineno"> 2318</span>        <span class="comment">// calculate ppm chance if present and we&#39;re using weapon</span></div>
<div class="line"><span class="lineno"> 2319</span>        <span class="keywordflow">if</span> (eventInfo.<a class="code hl_function" href="../../d3/daf/a08498.html#ad2eb8dffb2a2b91b02ca1b56861c7221">GetDamageInfo</a>() &amp;&amp; procEntry.ProcsPerMinute != 0)</div>
<div class="line"><span class="lineno"> 2320</span>        {</div>
<div class="line"><span class="lineno"> 2321</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> WeaponSpeed = caster-&gt;GetAttackTime(eventInfo.<a class="code hl_function" href="../../d3/daf/a08498.html#ad2eb8dffb2a2b91b02ca1b56861c7221">GetDamageInfo</a>()-&gt;<a class="code hl_function" href="../../de/d75/a08490.html#a8bf9edb2df92b0164ffc21a00c8925d6">GetAttackType</a>());</div>
<div class="line"><span class="lineno"> 2322</span>            chance = caster-&gt;GetPPMProcChance(WeaponSpeed, procEntry.ProcsPerMinute, <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 2323</span>        }</div>
<div class="line"><span class="lineno"> 2324</span>        <span class="comment">// apply chance modifer aura, applies also to ppm chance (see improved judgement of light spell)</span></div>
<div class="line"><span class="lineno"> 2325</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../da/da3/a08394.html">Player</a>* modOwner = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a2e6a98844f96c211f47b911a2766ada8">GetSpellModOwner</a>())</div>
<div class="line"><span class="lineno"> 2326</span>            modOwner-&gt;ApplySpellMod(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>(), <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a0ed7ea54baf4ab31426eac33358a734b">SPELLMOD_CHANCE_OF_SUCCESS</a>, chance);</div>
<div class="line"><span class="lineno"> 2327</span>    }</div>
<div class="line"><span class="lineno"> 2328</span>    <span class="keywordflow">return</span> chance;</div>
<div class="line"><span class="lineno"> 2329</span>}</div>
<div class="ttc" id="aa03080_html_a39b60e1f12cca9b6873cb817e7717351a0ed7ea54baf4ab31426eac33358a734b"><div class="ttname"><a href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a0ed7ea54baf4ab31426eac33358a734b">SPELLMOD_CHANCE_OF_SUCCESS</a></div><div class="ttdeci">@ SPELLMOD_CHANCE_OF_SUCCESS</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:94</div></div>
<div class="ttc" id="aa08490_html_a8bf9edb2df92b0164ffc21a00c8925d6"><div class="ttname"><a href="../../de/d75/a08490.html#a8bf9edb2df92b0164ffc21a00c8925d6">DamageInfo::GetAttackType</a></div><div class="ttdeci">WeaponAttackType GetAttackType() const</div><div class="ttdef"><b>Definition:</b> Unit.h:363</div></div>
<div class="ttc" id="aa08498_html_ad2eb8dffb2a2b91b02ca1b56861c7221"><div class="ttname"><a href="../../d3/daf/a08498.html#ad2eb8dffb2a2b91b02ca1b56861c7221">ProcEventInfo::GetDamageInfo</a></div><div class="ttdeci">DamageInfo * GetDamageInfo() const</div><div class="ttdef"><b>Definition:</b> Unit.h:449</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00300">SpellProcEntry::Chance</a>, <a class="el" href="../../#l00363">DamageInfo::GetAttackType()</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00449">ProcEventInfo::GetDamageInfo()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l16578">Unit::GetSpellModOwner()</a>, <a class="el" href="../../#l00299">SpellProcEntry::ProcsPerMinute</a>, and <a class="el" href="../../#l00094">SPELLMOD_CHANCE_OF_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02227">IsProcTriggeredOnEvent()</a>.</p>

</div>
</div>
<a id="a21722597230f267a7c32a80854f6c110" name="a21722597230f267a7c32a80854f6c110"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21722597230f267a7c32a80854f6c110">&#9670;&#160;</a></span>CallScriptAfterCheckProcHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CallScriptAfterCheckProcHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isTriggeredAtSpellProcEvent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2650</span>{</div>
<div class="line"><span class="lineno"> 2651</span>    <span class="keywordtype">bool</span> result = isTriggeredAtSpellProcEvent;</div>
<div class="line"><span class="lineno"> 2652</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2653</span>    {</div>
<div class="line"><span class="lineno"> 2654</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236acde546405435d878d8a552c7209e50fb">AURA_SCRIPT_HOOK_AFTER_CHECK_PROC</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2655</span>        std::list&lt;AuraScript::AfterCheckProcHandler&gt;::iterator hookItrEnd = (*scritr)-&gt;DoAfterCheckProc.end(), hookItr = (*scritr)-&gt;DoAfterCheckProc.begin();</div>
<div class="line"><span class="lineno"> 2656</span>        <span class="keywordflow">for</span> (; hookItr != hookItrEnd; ++hookItr)</div>
<div class="line"><span class="lineno"> 2657</span>            result &amp;= hookItr-&gt;Call(*scritr, eventInfo, isTriggeredAtSpellProcEvent);</div>
<div class="line"><span class="lineno"> 2658</span> </div>
<div class="line"><span class="lineno"> 2659</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2660</span>    }</div>
<div class="line"><span class="lineno"> 2661</span> </div>
<div class="line"><span class="lineno"> 2662</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 2663</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236acde546405435d878d8a552c7209e50fb"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236acde546405435d878d8a552c7209e50fb">AURA_SCRIPT_HOOK_AFTER_CHECK_PROC</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_AFTER_CHECK_PROC</div><div class="ttdef"><b>Definition:</b> SpellScript.h:502</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00502">AURA_SCRIPT_HOOK_AFTER_CHECK_PROC</a>, and <a class="el" href="../../#l00238">m_loadedScripts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l16055">Unit::ProcDamageAndSpellFor()</a>.</p>

</div>
</div>
<a id="afa8b3462e2d68da5a9972c6cbd637022" name="afa8b3462e2d68da5a9972c6cbd637022"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa8b3462e2d68da5a9972c6cbd637022">&#9670;&#160;</a></span>CallScriptAfterDispel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptAfterDispel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dcb/a08482.html">DispelInfo</a> *&#160;</td>
          <td class="paramname"><em>dispelInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2404</span>{</div>
<div class="line"><span class="lineno"> 2405</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2406</span>    {</div>
<div class="line"><span class="lineno"> 2407</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236adc21054212f2fda577059533337ff63a">AURA_SCRIPT_HOOK_AFTER_DISPEL</a>);</div>
<div class="line"><span class="lineno"> 2408</span>        std::list&lt;AuraScript::AuraDispelHandler&gt;::iterator hookItrEnd = (*scritr)-&gt;AfterDispel.end(), hookItr = (*scritr)-&gt;AfterDispel.begin();</div>
<div class="line"><span class="lineno"> 2409</span>        <span class="keywordflow">for</span> (; hookItr != hookItrEnd; ++hookItr)</div>
<div class="line"><span class="lineno"> 2410</span>            hookItr-&gt;Call(*scritr, dispelInfo);</div>
<div class="line"><span class="lineno"> 2411</span> </div>
<div class="line"><span class="lineno"> 2412</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2413</span>    }</div>
<div class="line"><span class="lineno"> 2414</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236adc21054212f2fda577059533337ff63a"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236adc21054212f2fda577059533337ff63a">AURA_SCRIPT_HOOK_AFTER_DISPEL</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_AFTER_DISPEL</div><div class="ttdef"><b>Definition:</b> SpellScript.h:499</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00499">AURA_SCRIPT_HOOK_AFTER_DISPEL</a>, and <a class="el" href="../../#l00238">m_loadedScripts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>.</p>

</div>
</div>
<a id="a76282958056070ecbf58c7a864ea7494" name="a76282958056070ecbf58c7a864ea7494"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76282958056070ecbf58c7a864ea7494">&#9670;&#160;</a></span>CallScriptAfterEffectApplyHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptAfterEffectApplyHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2456</span>{</div>
<div class="line"><span class="lineno"> 2457</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2458</span>    {</div>
<div class="line"><span class="lineno"> 2459</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a3d296fe0adb2f6f3c0ae690ef48e0626">AURA_SCRIPT_HOOK_EFFECT_AFTER_APPLY</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2460</span>        std::list&lt;AuraScript::EffectApplyHandler&gt;::iterator effEndItr = (*scritr)-&gt;AfterEffectApply.end(), effItr = (*scritr)-&gt;AfterEffectApply.begin();</div>
<div class="line"><span class="lineno"> 2461</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2462</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;GetEffIndex()))</div>
<div class="line"><span class="lineno"> 2463</span>                effItr-&gt;Call(*scritr, aurEff, mode);</div>
<div class="line"><span class="lineno"> 2464</span> </div>
<div class="line"><span class="lineno"> 2465</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2466</span>    }</div>
<div class="line"><span class="lineno"> 2467</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a3d296fe0adb2f6f3c0ae690ef48e0626"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a3d296fe0adb2f6f3c0ae690ef48e0626">AURA_SCRIPT_HOOK_EFFECT_AFTER_APPLY</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_AFTER_APPLY</div><div class="ttdef"><b>Definition:</b> SpellScript.h:484</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00484">AURA_SCRIPT_HOOK_EFFECT_AFTER_APPLY</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00741">AuraEffect::HandleEffect()</a>.</p>

</div>
</div>
<a id="a97347f8dc5f2dd96c7c45a77c13988a5" name="a97347f8dc5f2dd96c7c45a77c13988a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97347f8dc5f2dd96c7c45a77c13988a5">&#9670;&#160;</a></span>CallScriptAfterEffectProcHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptAfterEffectProcHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2734</span>{</div>
<div class="line"><span class="lineno"> 2735</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2736</span>    {</div>
<div class="line"><span class="lineno"> 2737</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236ab303f97a56ee2f3d7ecd4e7a7950236c">AURA_SCRIPT_HOOK_EFFECT_AFTER_PROC</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2738</span>        std::list&lt;AuraScript::EffectProcHandler&gt;::iterator effEndItr = (*scritr)-&gt;AfterEffectProc.end(), effItr = (*scritr)-&gt;AfterEffectProc.begin();</div>
<div class="line"><span class="lineno"> 2739</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2740</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;GetEffIndex()))</div>
<div class="line"><span class="lineno"> 2741</span>                effItr-&gt;Call(*scritr, aurEff, eventInfo);</div>
<div class="line"><span class="lineno"> 2742</span> </div>
<div class="line"><span class="lineno"> 2743</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2744</span>    }</div>
<div class="line"><span class="lineno"> 2745</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236ab303f97a56ee2f3d7ecd4e7a7950236c"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236ab303f97a56ee2f3d7ecd4e7a7950236c">AURA_SCRIPT_HOOK_EFFECT_AFTER_PROC</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_AFTER_PROC</div><div class="ttdef"><b>Definition:</b> SpellScript.h:506</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00506">AURA_SCRIPT_HOOK_EFFECT_AFTER_PROC</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01169">AuraEffect::HandleProc()</a>.</p>

</div>
</div>
<a id="a893e1bed86677e695a28d8eb4fab763d" name="a893e1bed86677e695a28d8eb4fab763d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a893e1bed86677e695a28d8eb4fab763d">&#9670;&#160;</a></span>CallScriptAfterEffectRemoveHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptAfterEffectRemoveHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2470</span>{</div>
<div class="line"><span class="lineno"> 2471</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2472</span>    {</div>
<div class="line"><span class="lineno"> 2473</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a419d135d3d232ceabcb89fba6b5cc2b1">AURA_SCRIPT_HOOK_EFFECT_AFTER_REMOVE</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2474</span>        std::list&lt;AuraScript::EffectApplyHandler&gt;::iterator effEndItr = (*scritr)-&gt;AfterEffectRemove.end(), effItr = (*scritr)-&gt;AfterEffectRemove.begin();</div>
<div class="line"><span class="lineno"> 2475</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2476</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;GetEffIndex()))</div>
<div class="line"><span class="lineno"> 2477</span>                effItr-&gt;Call(*scritr, aurEff, mode);</div>
<div class="line"><span class="lineno"> 2478</span> </div>
<div class="line"><span class="lineno"> 2479</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2480</span>    }</div>
<div class="line"><span class="lineno"> 2481</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a419d135d3d232ceabcb89fba6b5cc2b1"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a419d135d3d232ceabcb89fba6b5cc2b1">AURA_SCRIPT_HOOK_EFFECT_AFTER_REMOVE</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_AFTER_REMOVE</div><div class="ttdef"><b>Definition:</b> SpellScript.h:486</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00486">AURA_SCRIPT_HOOK_EFFECT_AFTER_REMOVE</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00741">AuraEffect::HandleEffect()</a>.</p>

</div>
</div>
<a id="a3bac8c34612850e65cd2411f2c7b6baa" name="a3bac8c34612850e65cd2411f2c7b6baa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bac8c34612850e65cd2411f2c7b6baa">&#9670;&#160;</a></span>CallScriptAfterProcHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptAfterProcHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2702</span>{</div>
<div class="line"><span class="lineno"> 2703</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2704</span>    {</div>
<div class="line"><span class="lineno"> 2705</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a4bfd62ef873930a2ed1f6da09b85296d">AURA_SCRIPT_HOOK_AFTER_PROC</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2706</span>        std::list&lt;AuraScript::AuraProcHandler&gt;::iterator hookItrEnd = (*scritr)-&gt;AfterProc.end(), hookItr = (*scritr)-&gt;AfterProc.begin();</div>
<div class="line"><span class="lineno"> 2707</span>        <span class="keywordflow">for</span> (; hookItr != hookItrEnd; ++hookItr)</div>
<div class="line"><span class="lineno"> 2708</span>            hookItr-&gt;Call(*scritr, eventInfo);</div>
<div class="line"><span class="lineno"> 2709</span> </div>
<div class="line"><span class="lineno"> 2710</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2711</span>    }</div>
<div class="line"><span class="lineno"> 2712</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a4bfd62ef873930a2ed1f6da09b85296d"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a4bfd62ef873930a2ed1f6da09b85296d">AURA_SCRIPT_HOOK_AFTER_PROC</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_AFTER_PROC</div><div class="ttdef"><b>Definition:</b> SpellScript.h:507</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00507">AURA_SCRIPT_HOOK_AFTER_PROC</a>, and <a class="el" href="../../#l00238">m_loadedScripts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02331">TriggerProcOnEvent()</a>.</p>

</div>
</div>
<a id="a3666518caf5cf301c27857b2e909cf16" name="a3666518caf5cf301c27857b2e909cf16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3666518caf5cf301c27857b2e909cf16">&#9670;&#160;</a></span>CallScriptCheckAreaTargetHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CallScriptCheckAreaTargetHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2376</span>{</div>
<div class="line"><span class="lineno"> 2377</span>    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2378</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2379</span>    {</div>
<div class="line"><span class="lineno"> 2380</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a59cf037b8b521ba0958c29e7a8a4c262">AURA_SCRIPT_HOOK_CHECK_AREA_TARGET</a>);</div>
<div class="line"><span class="lineno"> 2381</span>        std::list&lt;AuraScript::CheckAreaTargetHandler&gt;::iterator hookItrEnd = (*scritr)-&gt;DoCheckAreaTarget.end(), hookItr = (*scritr)-&gt;DoCheckAreaTarget.begin();</div>
<div class="line"><span class="lineno"> 2382</span>        <span class="keywordflow">for</span> (; hookItr != hookItrEnd; ++hookItr)</div>
<div class="line"><span class="lineno"> 2383</span>            result &amp;= hookItr-&gt;Call(*scritr, target);</div>
<div class="line"><span class="lineno"> 2384</span> </div>
<div class="line"><span class="lineno"> 2385</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2386</span>    }</div>
<div class="line"><span class="lineno"> 2387</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 2388</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a59cf037b8b521ba0958c29e7a8a4c262"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a59cf037b8b521ba0958c29e7a8a4c262">AURA_SCRIPT_HOOK_CHECK_AREA_TARGET</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_CHECK_AREA_TARGET</div><div class="ttdef"><b>Definition:</b> SpellScript.h:497</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00497">AURA_SCRIPT_HOOK_CHECK_AREA_TARGET</a>, and <a class="el" href="../../#l00238">m_loadedScripts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01987">CheckAreaTarget()</a>.</p>

</div>
</div>
<a id="a87be004e2c34b6652cd5350689b24dc3" name="a87be004e2c34b6652cd5350689b24dc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87be004e2c34b6652cd5350689b24dc3">&#9670;&#160;</a></span>CallScriptCheckProcHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CallScriptCheckProcHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2634</span>{</div>
<div class="line"><span class="lineno"> 2635</span>    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2636</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2637</span>    {</div>
<div class="line"><span class="lineno"> 2638</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236add4f24c7c71aa1892b4f7aa25f162420">AURA_SCRIPT_HOOK_CHECK_PROC</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2639</span>        std::list&lt;AuraScript::CheckProcHandler&gt;::iterator hookItrEnd = (*scritr)-&gt;DoCheckProc.end(), hookItr = (*scritr)-&gt;DoCheckProc.begin();</div>
<div class="line"><span class="lineno"> 2640</span>        <span class="keywordflow">for</span> (; hookItr != hookItrEnd; ++hookItr)</div>
<div class="line"><span class="lineno"> 2641</span>            result &amp;= hookItr-&gt;Call(*scritr, eventInfo);</div>
<div class="line"><span class="lineno"> 2642</span> </div>
<div class="line"><span class="lineno"> 2643</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2644</span>    }</div>
<div class="line"><span class="lineno"> 2645</span> </div>
<div class="line"><span class="lineno"> 2646</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 2647</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236add4f24c7c71aa1892b4f7aa25f162420"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236add4f24c7c71aa1892b4f7aa25f162420">AURA_SCRIPT_HOOK_CHECK_PROC</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_CHECK_PROC</div><div class="ttdef"><b>Definition:</b> SpellScript.h:501</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00501">AURA_SCRIPT_HOOK_CHECK_PROC</a>, and <a class="el" href="../../#l00238">m_loadedScripts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02227">IsProcTriggeredOnEvent()</a>, and <a class="el" href="../../#l16055">Unit::ProcDamageAndSpellFor()</a>.</p>

</div>
</div>
<a id="a1cb0ef5c31c0ebb5e274a99c186e83ab" name="a1cb0ef5c31c0ebb5e274a99c186e83ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cb0ef5c31c0ebb5e274a99c186e83ab">&#9670;&#160;</a></span>CallScriptDispel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptDispel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dcb/a08482.html">DispelInfo</a> *&#160;</td>
          <td class="paramname"><em>dispelInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2391</span>{</div>
<div class="line"><span class="lineno"> 2392</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2393</span>    {</div>
<div class="line"><span class="lineno"> 2394</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a9c2d093615242927901d1c4c256212b2">AURA_SCRIPT_HOOK_DISPEL</a>);</div>
<div class="line"><span class="lineno"> 2395</span>        std::list&lt;AuraScript::AuraDispelHandler&gt;::iterator hookItrEnd = (*scritr)-&gt;OnDispel.end(), hookItr = (*scritr)-&gt;OnDispel.begin();</div>
<div class="line"><span class="lineno"> 2396</span>        <span class="keywordflow">for</span> (; hookItr != hookItrEnd; ++hookItr)</div>
<div class="line"><span class="lineno"> 2397</span>            hookItr-&gt;Call(*scritr, dispelInfo);</div>
<div class="line"><span class="lineno"> 2398</span> </div>
<div class="line"><span class="lineno"> 2399</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2400</span>    }</div>
<div class="line"><span class="lineno"> 2401</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a9c2d093615242927901d1c4c256212b2"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a9c2d093615242927901d1c4c256212b2">AURA_SCRIPT_HOOK_DISPEL</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_DISPEL</div><div class="ttdef"><b>Definition:</b> SpellScript.h:498</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00498">AURA_SCRIPT_HOOK_DISPEL</a>, and <a class="el" href="../../#l00238">m_loadedScripts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>.</p>

</div>
</div>
<a id="a1734994c88d98ccd513b4f8d2f090d70" name="a1734994c88d98ccd513b4f8d2f090d70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1734994c88d98ccd513b4f8d2f090d70">&#9670;&#160;</a></span>CallScriptEffectAbsorbHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptEffectAbsorbHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d75/a08490.html">DamageInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>dmgInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;&#160;</td>
          <td class="paramname"><em>absorbAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>defaultPrevented</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2560</span>{</div>
<div class="line"><span class="lineno"> 2561</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2562</span>    {</div>
<div class="line"><span class="lineno"> 2563</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236ac1dc8a3040268f42f5fbce32d51c71e3">AURA_SCRIPT_HOOK_EFFECT_ABSORB</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2564</span>        std::list&lt;AuraScript::EffectAbsorbHandler&gt;::iterator effEndItr = (*scritr)-&gt;OnEffectAbsorb.end(), effItr = (*scritr)-&gt;OnEffectAbsorb.begin();</div>
<div class="line"><span class="lineno"> 2565</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2566</span> </div>
<div class="line"><span class="lineno"> 2567</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno"> 2568</span>                effItr-&gt;Call(*scritr, aurEff, dmgInfo, absorbAmount);</div>
<div class="line"><span class="lineno"> 2569</span> </div>
<div class="line"><span class="lineno"> 2570</span>        <span class="keywordflow">if</span> (!defaultPrevented)</div>
<div class="line"><span class="lineno"> 2571</span>            defaultPrevented = (*scritr)-&gt;_IsDefaultActionPrevented();</div>
<div class="line"><span class="lineno"> 2572</span> </div>
<div class="line"><span class="lineno"> 2573</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2574</span>    }</div>
<div class="line"><span class="lineno"> 2575</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236ac1dc8a3040268f42f5fbce32d51c71e3"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236ac1dc8a3040268f42f5fbce32d51c71e3">AURA_SCRIPT_HOOK_EFFECT_ABSORB</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_ABSORB</div><div class="ttdef"><b>Definition:</b> SpellScript.h:492</div></div>
<div class="ttc" id="aa10790_html_ab8c4811ced24cbd9b4afff1c22fbb1b0"><div class="ttname"><a href="../../de/d50/a10790.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">AuraEffect::GetEffIndex</a></div><div class="ttdeci">uint32 GetEffIndex() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:56</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00492">AURA_SCRIPT_HOOK_EFFECT_ABSORB</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>.</p>

</div>
</div>
<a id="aa5ebe6aa240ef26f1bfe4ac77240dd35" name="aa5ebe6aa240ef26f1bfe4ac77240dd35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5ebe6aa240ef26f1bfe4ac77240dd35">&#9670;&#160;</a></span>CallScriptEffectAfterAbsorbHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptEffectAfterAbsorbHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d75/a08490.html">DamageInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>dmgInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;&#160;</td>
          <td class="paramname"><em>absorbAmount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2578</span>{</div>
<div class="line"><span class="lineno"> 2579</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2580</span>    {</div>
<div class="line"><span class="lineno"> 2581</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a9bab1f8dcc1dccde2a98e7f492c9d5a9">AURA_SCRIPT_HOOK_EFFECT_AFTER_ABSORB</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2582</span>        std::list&lt;AuraScript::EffectAbsorbHandler&gt;::iterator effEndItr = (*scritr)-&gt;AfterEffectAbsorb.end(), effItr = (*scritr)-&gt;AfterEffectAbsorb.begin();</div>
<div class="line"><span class="lineno"> 2583</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2584</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno"> 2585</span>                effItr-&gt;Call(*scritr, aurEff, dmgInfo, absorbAmount);</div>
<div class="line"><span class="lineno"> 2586</span> </div>
<div class="line"><span class="lineno"> 2587</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2588</span>    }</div>
<div class="line"><span class="lineno"> 2589</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a9bab1f8dcc1dccde2a98e7f492c9d5a9"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a9bab1f8dcc1dccde2a98e7f492c9d5a9">AURA_SCRIPT_HOOK_EFFECT_AFTER_ABSORB</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_AFTER_ABSORB</div><div class="ttdef"><b>Definition:</b> SpellScript.h:493</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00493">AURA_SCRIPT_HOOK_EFFECT_AFTER_ABSORB</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>.</p>

</div>
</div>
<a id="af0236680754f81e374b015640e4b6eff" name="af0236680754f81e374b015640e4b6eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0236680754f81e374b015640e4b6eff">&#9670;&#160;</a></span>CallScriptEffectAfterManaShieldHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptEffectAfterManaShieldHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d75/a08490.html">DamageInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>dmgInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;&#160;</td>
          <td class="paramname"><em>absorbAmount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2606</span>{</div>
<div class="line"><span class="lineno"> 2607</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2608</span>    {</div>
<div class="line"><span class="lineno"> 2609</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a2ef312bd29f036eb8b15fedd4d2bc082">AURA_SCRIPT_HOOK_EFFECT_AFTER_MANASHIELD</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2610</span>        std::list&lt;AuraScript::EffectManaShieldHandler&gt;::iterator effEndItr = (*scritr)-&gt;AfterEffectManaShield.end(), effItr = (*scritr)-&gt;AfterEffectManaShield.begin();</div>
<div class="line"><span class="lineno"> 2611</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2612</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno"> 2613</span>                effItr-&gt;Call(*scritr, aurEff, dmgInfo, absorbAmount);</div>
<div class="line"><span class="lineno"> 2614</span> </div>
<div class="line"><span class="lineno"> 2615</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2616</span>    }</div>
<div class="line"><span class="lineno"> 2617</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a2ef312bd29f036eb8b15fedd4d2bc082"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a2ef312bd29f036eb8b15fedd4d2bc082">AURA_SCRIPT_HOOK_EFFECT_AFTER_MANASHIELD</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_AFTER_MANASHIELD</div><div class="ttdef"><b>Definition:</b> SpellScript.h:495</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00495">AURA_SCRIPT_HOOK_EFFECT_AFTER_MANASHIELD</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>.</p>

</div>
</div>
<a id="a882f4ec3b0f104d3c18c718dc71ec668" name="a882f4ec3b0f104d3c18c718dc71ec668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a882f4ec3b0f104d3c18c718dc71ec668">&#9670;&#160;</a></span>CallScriptEffectApplyHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CallScriptEffectApplyHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2417</span>{</div>
<div class="line"><span class="lineno"> 2418</span>    <span class="keywordtype">bool</span> preventDefault = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2419</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2420</span>    {</div>
<div class="line"><span class="lineno"> 2421</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236aa70d783c590006f1a8cbf2b3d144e94c">AURA_SCRIPT_HOOK_EFFECT_APPLY</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2422</span>        std::list&lt;AuraScript::EffectApplyHandler&gt;::iterator effEndItr = (*scritr)-&gt;OnEffectApply.end(), effItr = (*scritr)-&gt;OnEffectApply.begin();</div>
<div class="line"><span class="lineno"> 2423</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2424</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;GetEffIndex()))</div>
<div class="line"><span class="lineno"> 2425</span>                effItr-&gt;Call(*scritr, aurEff, mode);</div>
<div class="line"><span class="lineno"> 2426</span> </div>
<div class="line"><span class="lineno"> 2427</span>        <span class="keywordflow">if</span> (!preventDefault)</div>
<div class="line"><span class="lineno"> 2428</span>            preventDefault = (*scritr)-&gt;_IsDefaultActionPrevented();</div>
<div class="line"><span class="lineno"> 2429</span> </div>
<div class="line"><span class="lineno"> 2430</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2431</span>    }</div>
<div class="line"><span class="lineno"> 2432</span> </div>
<div class="line"><span class="lineno"> 2433</span>    <span class="keywordflow">return</span> preventDefault;</div>
<div class="line"><span class="lineno"> 2434</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236aa70d783c590006f1a8cbf2b3d144e94c"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236aa70d783c590006f1a8cbf2b3d144e94c">AURA_SCRIPT_HOOK_EFFECT_APPLY</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_APPLY</div><div class="ttdef"><b>Definition:</b> SpellScript.h:483</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00483">AURA_SCRIPT_HOOK_EFFECT_APPLY</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00741">AuraEffect::HandleEffect()</a>.</p>

</div>
</div>
<a id="a38c31b87dea32024c55f15d37faa93da" name="a38c31b87dea32024c55f15d37faa93da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38c31b87dea32024c55f15d37faa93da">&#9670;&#160;</a></span>CallScriptEffectCalcAmountHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptEffectCalcAmountHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> &amp;&#160;</td>
          <td class="paramname"><em>amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>canBeRecalculated</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2518</span>{</div>
<div class="line"><span class="lineno"> 2519</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2520</span>    {</div>
<div class="line"><span class="lineno"> 2521</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a12c382920aa6890efbc36805fc32e25a">AURA_SCRIPT_HOOK_EFFECT_CALC_AMOUNT</a>);</div>
<div class="line"><span class="lineno"> 2522</span>        std::list&lt;AuraScript::EffectCalcAmountHandler&gt;::iterator effEndItr = (*scritr)-&gt;DoEffectCalcAmount.end(), effItr = (*scritr)-&gt;DoEffectCalcAmount.begin();</div>
<div class="line"><span class="lineno"> 2523</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2524</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;GetEffIndex()))</div>
<div class="line"><span class="lineno"> 2525</span>                effItr-&gt;Call(*scritr, aurEff, amount, canBeRecalculated);</div>
<div class="line"><span class="lineno"> 2526</span> </div>
<div class="line"><span class="lineno"> 2527</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2528</span>    }</div>
<div class="line"><span class="lineno"> 2529</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a12c382920aa6890efbc36805fc32e25a"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a12c382920aa6890efbc36805fc32e25a">AURA_SCRIPT_HOOK_EFFECT_CALC_AMOUNT</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_CALC_AMOUNT</div><div class="ttdef"><b>Definition:</b> SpellScript.h:489</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00489">AURA_SCRIPT_HOOK_EFFECT_CALC_AMOUNT</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00452">AuraEffect::CalculateAmount()</a>.</p>

</div>
</div>
<a id="abd4f379de7ed0890f28df1209aad70c7" name="abd4f379de7ed0890f28df1209aad70c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd4f379de7ed0890f28df1209aad70c7">&#9670;&#160;</a></span>CallScriptEffectCalcPeriodicHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptEffectCalcPeriodicHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>isPeriodic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> &amp;&#160;</td>
          <td class="paramname"><em>amplitude</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2532</span>{</div>
<div class="line"><span class="lineno"> 2533</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2534</span>    {</div>
<div class="line"><span class="lineno"> 2535</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a01bccb65044d0e5ccab470539e8a71a3">AURA_SCRIPT_HOOK_EFFECT_CALC_PERIODIC</a>);</div>
<div class="line"><span class="lineno"> 2536</span>        std::list&lt;AuraScript::EffectCalcPeriodicHandler&gt;::iterator effEndItr = (*scritr)-&gt;DoEffectCalcPeriodic.end(), effItr = (*scritr)-&gt;DoEffectCalcPeriodic.begin();</div>
<div class="line"><span class="lineno"> 2537</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2538</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;GetEffIndex()))</div>
<div class="line"><span class="lineno"> 2539</span>                effItr-&gt;Call(*scritr, aurEff, isPeriodic, amplitude);</div>
<div class="line"><span class="lineno"> 2540</span> </div>
<div class="line"><span class="lineno"> 2541</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2542</span>    }</div>
<div class="line"><span class="lineno"> 2543</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a01bccb65044d0e5ccab470539e8a71a3"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a01bccb65044d0e5ccab470539e8a71a3">AURA_SCRIPT_HOOK_EFFECT_CALC_PERIODIC</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_CALC_PERIODIC</div><div class="ttdef"><b>Definition:</b> SpellScript.h:490</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00490">AURA_SCRIPT_HOOK_EFFECT_CALC_PERIODIC</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00593">AuraEffect::CalculatePeriodic()</a>.</p>

</div>
</div>
<a id="a205938814ca394a9a229f4b4e80e54a6" name="a205938814ca394a9a229f4b4e80e54a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a205938814ca394a9a229f4b4e80e54a6">&#9670;&#160;</a></span>CallScriptEffectCalcSpellModHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptEffectCalcSpellModHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d5f/a08298.html">SpellModifier</a> *&amp;&#160;</td>
          <td class="paramname"><em>spellMod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2546</span>{</div>
<div class="line"><span class="lineno"> 2547</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2548</span>    {</div>
<div class="line"><span class="lineno"> 2549</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236ad09bca933a358610ff271989afdc2f9a">AURA_SCRIPT_HOOK_EFFECT_CALC_SPELLMOD</a>);</div>
<div class="line"><span class="lineno"> 2550</span>        std::list&lt;AuraScript::EffectCalcSpellModHandler&gt;::iterator effEndItr = (*scritr)-&gt;DoEffectCalcSpellMod.end(), effItr = (*scritr)-&gt;DoEffectCalcSpellMod.begin();</div>
<div class="line"><span class="lineno"> 2551</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2552</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;GetEffIndex()))</div>
<div class="line"><span class="lineno"> 2553</span>                effItr-&gt;Call(*scritr, aurEff, spellMod);</div>
<div class="line"><span class="lineno"> 2554</span> </div>
<div class="line"><span class="lineno"> 2555</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2556</span>    }</div>
<div class="line"><span class="lineno"> 2557</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236ad09bca933a358610ff271989afdc2f9a"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236ad09bca933a358610ff271989afdc2f9a">AURA_SCRIPT_HOOK_EFFECT_CALC_SPELLMOD</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_CALC_SPELLMOD</div><div class="ttdef"><b>Definition:</b> SpellScript.h:491</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00491">AURA_SCRIPT_HOOK_EFFECT_CALC_SPELLMOD</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00684">AuraEffect::CalculateSpellMod()</a>.</p>

</div>
</div>
<a id="aa75669dbdf619c939c3dc7fff9fe8736" name="aa75669dbdf619c939c3dc7fff9fe8736"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa75669dbdf619c939c3dc7fff9fe8736">&#9670;&#160;</a></span>CallScriptEffectManaShieldHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptEffectManaShieldHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d75/a08490.html">DamageInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>dmgInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;&#160;</td>
          <td class="paramname"><em>absorbAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>defaultPrevented</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2592</span>{</div>
<div class="line"><span class="lineno"> 2593</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2594</span>    {</div>
<div class="line"><span class="lineno"> 2595</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a67050daee69746f58a49b0f131a4a4de">AURA_SCRIPT_HOOK_EFFECT_MANASHIELD</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2596</span>        std::list&lt;AuraScript::EffectManaShieldHandler&gt;::iterator effEndItr = (*scritr)-&gt;OnEffectManaShield.end(), effItr = (*scritr)-&gt;OnEffectManaShield.begin();</div>
<div class="line"><span class="lineno"> 2597</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2598</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno"> 2599</span>                effItr-&gt;Call(*scritr, aurEff, dmgInfo, absorbAmount);</div>
<div class="line"><span class="lineno"> 2600</span> </div>
<div class="line"><span class="lineno"> 2601</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2602</span>    }</div>
<div class="line"><span class="lineno"> 2603</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a67050daee69746f58a49b0f131a4a4de"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a67050daee69746f58a49b0f131a4a4de">AURA_SCRIPT_HOOK_EFFECT_MANASHIELD</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_MANASHIELD</div><div class="ttdef"><b>Definition:</b> SpellScript.h:494</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00494">AURA_SCRIPT_HOOK_EFFECT_MANASHIELD</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>.</p>

</div>
</div>
<a id="a3b0854e2019338fd16c9ca46e3997931" name="a3b0854e2019338fd16c9ca46e3997931"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b0854e2019338fd16c9ca46e3997931">&#9670;&#160;</a></span>CallScriptEffectPeriodicHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CallScriptEffectPeriodicHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2484</span>{</div>
<div class="line"><span class="lineno"> 2485</span>    <span class="keywordtype">bool</span> preventDefault = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2486</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2487</span>    {</div>
<div class="line"><span class="lineno"> 2488</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236aaf214dbb6995dfa6ae911fa471484b01">AURA_SCRIPT_HOOK_EFFECT_PERIODIC</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2489</span>        std::list&lt;AuraScript::EffectPeriodicHandler&gt;::iterator effEndItr = (*scritr)-&gt;OnEffectPeriodic.end(), effItr = (*scritr)-&gt;OnEffectPeriodic.begin();</div>
<div class="line"><span class="lineno"> 2490</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2491</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;GetEffIndex()))</div>
<div class="line"><span class="lineno"> 2492</span>                effItr-&gt;Call(*scritr, aurEff);</div>
<div class="line"><span class="lineno"> 2493</span> </div>
<div class="line"><span class="lineno"> 2494</span>        <span class="keywordflow">if</span> (!preventDefault)</div>
<div class="line"><span class="lineno"> 2495</span>            preventDefault = (*scritr)-&gt;_IsDefaultActionPrevented();</div>
<div class="line"><span class="lineno"> 2496</span> </div>
<div class="line"><span class="lineno"> 2497</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2498</span>    }</div>
<div class="line"><span class="lineno"> 2499</span> </div>
<div class="line"><span class="lineno"> 2500</span>    <span class="keywordflow">return</span> preventDefault;</div>
<div class="line"><span class="lineno"> 2501</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236aaf214dbb6995dfa6ae911fa471484b01"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236aaf214dbb6995dfa6ae911fa471484b01">AURA_SCRIPT_HOOK_EFFECT_PERIODIC</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_PERIODIC</div><div class="ttdef"><b>Definition:</b> SpellScript.h:487</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00487">AURA_SCRIPT_HOOK_EFFECT_PERIODIC</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">AuraEffect::PeriodicTick()</a>.</p>

</div>
</div>
<a id="a96d2072a3b0b06f82113eb9d3e186ac1" name="a96d2072a3b0b06f82113eb9d3e186ac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96d2072a3b0b06f82113eb9d3e186ac1">&#9670;&#160;</a></span>CallScriptEffectProcHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CallScriptEffectProcHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2715</span>{</div>
<div class="line"><span class="lineno"> 2716</span>    <span class="keywordtype">bool</span> preventDefault = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2717</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2718</span>    {</div>
<div class="line"><span class="lineno"> 2719</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236ac81ead411b37d2496c7a9993f339a39d">AURA_SCRIPT_HOOK_EFFECT_PROC</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2720</span>        std::list&lt;AuraScript::EffectProcHandler&gt;::iterator effEndItr = (*scritr)-&gt;OnEffectProc.end(), effItr = (*scritr)-&gt;OnEffectProc.begin();</div>
<div class="line"><span class="lineno"> 2721</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2722</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;GetEffIndex()))</div>
<div class="line"><span class="lineno"> 2723</span>                effItr-&gt;Call(*scritr, aurEff, eventInfo);</div>
<div class="line"><span class="lineno"> 2724</span> </div>
<div class="line"><span class="lineno"> 2725</span>        <span class="keywordflow">if</span> (!preventDefault)</div>
<div class="line"><span class="lineno"> 2726</span>            preventDefault = (*scritr)-&gt;_IsDefaultActionPrevented();</div>
<div class="line"><span class="lineno"> 2727</span> </div>
<div class="line"><span class="lineno"> 2728</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2729</span>    }</div>
<div class="line"><span class="lineno"> 2730</span>    <span class="keywordflow">return</span> preventDefault;</div>
<div class="line"><span class="lineno"> 2731</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236ac81ead411b37d2496c7a9993f339a39d"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236ac81ead411b37d2496c7a9993f339a39d">AURA_SCRIPT_HOOK_EFFECT_PROC</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_PROC</div><div class="ttdef"><b>Definition:</b> SpellScript.h:505</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00505">AURA_SCRIPT_HOOK_EFFECT_PROC</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01169">AuraEffect::HandleProc()</a>.</p>

</div>
</div>
<a id="a37a192c8e0119a8bc304c1711b15376e" name="a37a192c8e0119a8bc304c1711b15376e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37a192c8e0119a8bc304c1711b15376e">&#9670;&#160;</a></span>CallScriptEffectRemoveHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CallScriptEffectRemoveHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> const *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2437</span>{</div>
<div class="line"><span class="lineno"> 2438</span>    <span class="keywordtype">bool</span> preventDefault = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2439</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2440</span>    {</div>
<div class="line"><span class="lineno"> 2441</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a1794d2594c7b6dfe59a79a48aba6f142">AURA_SCRIPT_HOOK_EFFECT_REMOVE</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2442</span>        std::list&lt;AuraScript::EffectApplyHandler&gt;::iterator effEndItr = (*scritr)-&gt;OnEffectRemove.end(), effItr = (*scritr)-&gt;OnEffectRemove.begin();</div>
<div class="line"><span class="lineno"> 2443</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2444</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;GetEffIndex()))</div>
<div class="line"><span class="lineno"> 2445</span>                effItr-&gt;Call(*scritr, aurEff, mode);</div>
<div class="line"><span class="lineno"> 2446</span> </div>
<div class="line"><span class="lineno"> 2447</span>        <span class="keywordflow">if</span> (!preventDefault)</div>
<div class="line"><span class="lineno"> 2448</span>            preventDefault = (*scritr)-&gt;_IsDefaultActionPrevented();</div>
<div class="line"><span class="lineno"> 2449</span> </div>
<div class="line"><span class="lineno"> 2450</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2451</span>    }</div>
<div class="line"><span class="lineno"> 2452</span>    <span class="keywordflow">return</span> preventDefault;</div>
<div class="line"><span class="lineno"> 2453</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a1794d2594c7b6dfe59a79a48aba6f142"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a1794d2594c7b6dfe59a79a48aba6f142">AURA_SCRIPT_HOOK_EFFECT_REMOVE</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_REMOVE</div><div class="ttdef"><b>Definition:</b> SpellScript.h:485</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00485">AURA_SCRIPT_HOOK_EFFECT_REMOVE</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00741">AuraEffect::HandleEffect()</a>.</p>

</div>
</div>
<a id="aad107d81d9d0898ac5922504526dd07e" name="aad107d81d9d0898ac5922504526dd07e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad107d81d9d0898ac5922504526dd07e">&#9670;&#160;</a></span>CallScriptEffectSplitHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptEffectSplitHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *&#160;</td>
          <td class="paramname"><em>aurEff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d75/a08490.html">DamageInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>dmgInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;&#160;</td>
          <td class="paramname"><em>splitAmount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2620</span>{</div>
<div class="line"><span class="lineno"> 2621</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2622</span>    {</div>
<div class="line"><span class="lineno"> 2623</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236aca91b48c557565055039bb70ba1fd2eb">AURA_SCRIPT_HOOK_EFFECT_SPLIT</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2624</span>        std::list&lt;AuraScript::EffectSplitHandler&gt;::iterator effEndItr = (*scritr)-&gt;OnEffectSplit.end(), effItr = (*scritr)-&gt;OnEffectSplit.begin();</div>
<div class="line"><span class="lineno"> 2625</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2626</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno"> 2627</span>                effItr-&gt;Call(*scritr, aurEff, dmgInfo, splitAmount);</div>
<div class="line"><span class="lineno"> 2628</span> </div>
<div class="line"><span class="lineno"> 2629</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2630</span>    }</div>
<div class="line"><span class="lineno"> 2631</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236aca91b48c557565055039bb70ba1fd2eb"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236aca91b48c557565055039bb70ba1fd2eb">AURA_SCRIPT_HOOK_EFFECT_SPLIT</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_SPLIT</div><div class="ttdef"><b>Definition:</b> SpellScript.h:496</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00496">AURA_SCRIPT_HOOK_EFFECT_SPLIT</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

</div>
</div>
<a id="adac81f948f034942046b45a94fea365f" name="adac81f948f034942046b45a94fea365f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adac81f948f034942046b45a94fea365f">&#9670;&#160;</a></span>CallScriptEffectUpdatePeriodicHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::CallScriptEffectUpdatePeriodicHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> *&#160;</td>
          <td class="paramname"><em>aurEff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2504</span>{</div>
<div class="line"><span class="lineno"> 2505</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2506</span>    {</div>
<div class="line"><span class="lineno"> 2507</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236aef9114d2ad5df80081d2e5fce725a352">AURA_SCRIPT_HOOK_EFFECT_UPDATE_PERIODIC</a>);</div>
<div class="line"><span class="lineno"> 2508</span>        std::list&lt;AuraScript::EffectUpdatePeriodicHandler&gt;::iterator effEndItr = (*scritr)-&gt;OnEffectUpdatePeriodic.end(), effItr = (*scritr)-&gt;OnEffectUpdatePeriodic.begin();</div>
<div class="line"><span class="lineno"> 2509</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2510</span>            <span class="keywordflow">if</span> (effItr-&gt;IsEffectAffected(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno"> 2511</span>                effItr-&gt;Call(*scritr, aurEff);</div>
<div class="line"><span class="lineno"> 2512</span> </div>
<div class="line"><span class="lineno"> 2513</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2514</span>    }</div>
<div class="line"><span class="lineno"> 2515</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236aef9114d2ad5df80081d2e5fce725a352"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236aef9114d2ad5df80081d2e5fce725a352">AURA_SCRIPT_HOOK_EFFECT_UPDATE_PERIODIC</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_EFFECT_UPDATE_PERIODIC</div><div class="ttdef"><b>Definition:</b> SpellScript.h:488</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00488">AURA_SCRIPT_HOOK_EFFECT_UPDATE_PERIODIC</a>, <a class="el" href="../../#l00056">AuraEffect::GetEffIndex()</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, and <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00927">AuraEffect::UpdatePeriodic()</a>.</p>

</div>
</div>
<a id="a6577a1543d871da43ab8b015f67d4150" name="a6577a1543d871da43ab8b015f67d4150"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6577a1543d871da43ab8b015f67d4150">&#9670;&#160;</a></span>CallScriptPrepareProcHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CallScriptPrepareProcHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2666</span>{</div>
<div class="line"><span class="lineno"> 2667</span>    <span class="keywordtype">bool</span> prepare = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2668</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2669</span>    {</div>
<div class="line"><span class="lineno"> 2670</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a35f3fc9519440c5f846a1cb2789706df">AURA_SCRIPT_HOOK_PREPARE_PROC</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2671</span>        std::list&lt;AuraScript::AuraProcHandler&gt;::iterator effEndItr = (*scritr)-&gt;DoPrepareProc.end(), effItr = (*scritr)-&gt;DoPrepareProc.begin();</div>
<div class="line"><span class="lineno"> 2672</span>        <span class="keywordflow">for</span> (; effItr != effEndItr; ++effItr)</div>
<div class="line"><span class="lineno"> 2673</span>            effItr-&gt;Call(*scritr, eventInfo);</div>
<div class="line"><span class="lineno"> 2674</span> </div>
<div class="line"><span class="lineno"> 2675</span>        <span class="keywordflow">if</span> (prepare)</div>
<div class="line"><span class="lineno"> 2676</span>            prepare = !(*scritr)-&gt;_IsDefaultActionPrevented();</div>
<div class="line"><span class="lineno"> 2677</span> </div>
<div class="line"><span class="lineno"> 2678</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2679</span>    }</div>
<div class="line"><span class="lineno"> 2680</span> </div>
<div class="line"><span class="lineno"> 2681</span>    <span class="keywordflow">return</span> prepare;</div>
<div class="line"><span class="lineno"> 2682</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a35f3fc9519440c5f846a1cb2789706df"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a35f3fc9519440c5f846a1cb2789706df">AURA_SCRIPT_HOOK_PREPARE_PROC</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_PREPARE_PROC</div><div class="ttdef"><b>Definition:</b> SpellScript.h:503</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00503">AURA_SCRIPT_HOOK_PREPARE_PROC</a>, and <a class="el" href="../../#l00238">m_loadedScripts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02206">PrepareProcToTrigger()</a>.</p>

</div>
</div>
<a id="a99d38e9baa13b6683db43d67757ec982" name="a99d38e9baa13b6683db43d67757ec982"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99d38e9baa13b6683db43d67757ec982">&#9670;&#160;</a></span>CallScriptProcHandlers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CallScriptProcHandlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2685</span>{</div>
<div class="line"><span class="lineno"> 2686</span>    <span class="keywordtype">bool</span> handled = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2687</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator scritr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); scritr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++scritr)</div>
<div class="line"><span class="lineno"> 2688</span>    {</div>
<div class="line"><span class="lineno"> 2689</span>        (*scritr)-&gt;_PrepareScriptCall(<a class="code hl_enumvalue" href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a7ab83bc59e26f2a76b49c41feebe0726">AURA_SCRIPT_HOOK_PROC</a>, aurApp);</div>
<div class="line"><span class="lineno"> 2690</span>        std::list&lt;AuraScript::AuraProcHandler&gt;::iterator hookItrEnd = (*scritr)-&gt;OnProc.end(), hookItr = (*scritr)-&gt;OnProc.begin();</div>
<div class="line"><span class="lineno"> 2691</span>        <span class="keywordflow">for</span> (; hookItr != hookItrEnd; ++hookItr)</div>
<div class="line"><span class="lineno"> 2692</span>            hookItr-&gt;Call(*scritr, eventInfo);</div>
<div class="line"><span class="lineno"> 2693</span> </div>
<div class="line"><span class="lineno"> 2694</span>        handled |= (*scritr)-&gt;_IsDefaultActionPrevented();</div>
<div class="line"><span class="lineno"> 2695</span>        (*scritr)-&gt;_FinishScriptCall();</div>
<div class="line"><span class="lineno"> 2696</span>    }</div>
<div class="line"><span class="lineno"> 2697</span> </div>
<div class="line"><span class="lineno"> 2698</span>    <span class="keywordflow">return</span> handled;</div>
<div class="line"><span class="lineno"> 2699</span>}</div>
<div class="ttc" id="aa03083_html_a0106a0551a3a660c390c8335a1655236a7ab83bc59e26f2a76b49c41feebe0726"><div class="ttname"><a href="../../d5/dd8/a03083.html#a0106a0551a3a660c390c8335a1655236a7ab83bc59e26f2a76b49c41feebe0726">AURA_SCRIPT_HOOK_PROC</a></div><div class="ttdeci">@ AURA_SCRIPT_HOOK_PROC</div><div class="ttdef"><b>Definition:</b> SpellScript.h:504</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00504">AURA_SCRIPT_HOOK_PROC</a>, and <a class="el" href="../../#l00238">m_loadedScripts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02331">TriggerProcOnEvent()</a>.</p>

</div>
</div>
<a id="ac2ee53cb584c3528f2990d391393bc1d" name="ac2ee53cb584c3528f2990d391393bc1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2ee53cb584c3528f2990d391393bc1d">&#9670;&#160;</a></span>CanBeAppliedOn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CanBeAppliedOn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1971</span>{</div>
<div class="line"><span class="lineno"> 1972</span>    <span class="comment">// unit not in world or during remove from world</span></div>
<div class="line"><span class="lineno"> 1973</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a3aeab7def818ba6c50249f197ad2f9ca">IsInWorld</a>() || target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a7b8654ccb16f3b1e7be4d93d74a304ba">IsDuringRemoveFromWorld</a>())</div>
<div class="line"><span class="lineno"> 1974</span>    {</div>
<div class="line"><span class="lineno"> 1975</span>        <span class="comment">// area auras mustn&#39;t be applied</span></div>
<div class="line"><span class="lineno"> 1976</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>() != target)</div>
<div class="line"><span class="lineno"> 1977</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1978</span>        <span class="comment">// not selfcasted single target auras mustn&#39;t be applied</span></div>
<div class="line"><span class="lineno"> 1979</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>() != <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;GetGUID() &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d3/d9a/a10802.html#afb782970ace7a9385038481911d388fc">IsSingleTarget</a>())</div>
<div class="line"><span class="lineno"> 1980</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1981</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1982</span>    }</div>
<div class="line"><span class="lineno"> 1983</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1984</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#a139193e2e2688d6ea9c6a817c0a00318">CheckAreaTarget</a>(target);</div>
<div class="line"><span class="lineno"> 1985</span>}</div>
<div class="ttc" id="aa08150_html_a3aeab7def818ba6c50249f197ad2f9ca"><div class="ttname"><a href="../../d6/d80/a08150.html#a3aeab7def818ba6c50249f197ad2f9ca">Object::IsInWorld</a></div><div class="ttdeci">bool IsInWorld() const</div><div class="ttdef"><b>Definition:</b> Object.h:104</div></div>
<div class="ttc" id="aa08526_html_a7b8654ccb16f3b1e7be4d93d74a304ba"><div class="ttname"><a href="../../d6/d15/a08526.html#a7b8654ccb16f3b1e7be4d93d74a304ba">Unit::IsDuringRemoveFromWorld</a></div><div class="ttdeci">bool IsDuringRemoveFromWorld() const</div><div class="ttdef"><b>Definition:</b> Unit.h:668</div></div>
<div class="ttc" id="aa10802_html_a139193e2e2688d6ea9c6a817c0a00318"><div class="ttname"><a href="../../d3/d9a/a10802.html#a139193e2e2688d6ea9c6a817c0a00318">Aura::CheckAreaTarget</a></div><div class="ttdeci">bool CheckAreaTarget(Unit *target)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:1987</div></div>
<div class="ttc" id="aa10802_html_a3c4dfe75dad16fbf2afaf23ce77e4262"><div class="ttname"><a href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">Aura::GetCasterGUID</a></div><div class="ttdeci">ObjectGuid GetCasterGUID() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:105</div></div>
<div class="ttc" id="aa10802_html_afb782970ace7a9385038481911d388fc"><div class="ttname"><a href="../../d3/d9a/a10802.html#afb782970ace7a9385038481911d388fc">Aura::IsSingleTarget</a></div><div class="ttdeci">bool IsSingleTarget() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:164</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01987">CheckAreaTarget()</a>, <a class="el" href="../../#l00105">GetCasterGUID()</a>, <a class="el" href="../../#l00107">GetOwner()</a>, <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l00668">Unit::IsDuringRemoveFromWorld()</a>, <a class="el" href="../../#l00104">Object::IsInWorld()</a>, and <a class="el" href="../../#l00164">IsSingleTarget()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

</div>
</div>
<a id="a0b7486aa10607794eaa6739f73b19741" name="a0b7486aa10607794eaa6739f73b19741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b7486aa10607794eaa6739f73b19741">&#9670;&#160;</a></span>CanBeSaved()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CanBeSaved </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1098</span>{</div>
<div class="line"><span class="lineno"> 1099</span>    <a class="code hl_class" href="../../d4/db9/a10906.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>();</div>
<div class="line"><span class="lineno"> 1100</span> </div>
<div class="line"><span class="lineno"> 1101</span>    <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d4/d44/a03065.html#a93795b2131c8cbe38a7b23768a5a146da4d7ba94d96c89ebddcef8c081fb14557">SPELL_ATTR0_CU_FORCE_AURA_SAVING</a>))</div>
<div class="line"><span class="lineno"> 1102</span>    {</div>
<div class="line"><span class="lineno"> 1103</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1104</span>    }</div>
<div class="line"><span class="lineno"> 1105</span> </div>
<div class="line"><span class="lineno"> 1106</span>    <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d4/d44/a03065.html#a93795b2131c8cbe38a7b23768a5a146da82c401e647fb2c1c09ed1c6dd9568c2d">SPELL_ATTR0_CU_AURA_CANNOT_BE_SAVED</a>))</div>
<div class="line"><span class="lineno"> 1107</span>    {</div>
<div class="line"><span class="lineno"> 1108</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1109</span>    }</div>
<div class="line"><span class="lineno"> 1110</span> </div>
<div class="line"><span class="lineno"> 1111</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>() || (spellInfo-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75">SPELL_ATTR0_DO_NOT_DISPLAY</a>) &amp;&amp; spellInfo-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a21cf48a7eb77db7f731ebe746d2d6878">Stances</a>))</div>
<div class="line"><span class="lineno"> 1112</span>    {</div>
<div class="line"><span class="lineno"> 1113</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1114</span>    }</div>
<div class="line"><span class="lineno"> 1115</span> </div>
<div class="line"><span class="lineno"> 1116</span>    <span class="comment">// Xinef: do not save channel auras</span></div>
<div class="line"><span class="lineno"> 1117</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;IsChanneled())</div>
<div class="line"><span class="lineno"> 1118</span>    {</div>
<div class="line"><span class="lineno"> 1119</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1120</span>    }</div>
<div class="line"><span class="lineno"> 1121</span> </div>
<div class="line"><span class="lineno"> 1122</span>    <span class="comment">// Xinef: Check if aura is single target, not only spell info</span></div>
<div class="line"><span class="lineno"> 1123</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>() != <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;GetGUID() &amp;&amp; (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d3/d9a/a10802.html#afb782970ace7a9385038481911d388fc">IsSingleTarget</a>() || <a class="code hl_function" href="../../d3/d9a/a10802.html#afb782970ace7a9385038481911d388fc">IsSingleTarget</a>()))</div>
<div class="line"><span class="lineno"> 1124</span>    {</div>
<div class="line"><span class="lineno"> 1125</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1126</span>    }</div>
<div class="line"><span class="lineno"> 1127</span> </div>
<div class="line"><span class="lineno"> 1128</span>    <span class="comment">// don&#39;t save auras removed by proc system</span></div>
<div class="line"><span class="lineno"> 1129</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a62c2b89c6a9269aba7870b36e5872330">IsUsingCharges</a>() &amp;&amp; !<a class="code hl_function" href="../../d3/d9a/a10802.html#ab07705be94c0c10fce558c80d7208e0b">GetCharges</a>())</div>
<div class="line"><span class="lineno"> 1130</span>    {</div>
<div class="line"><span class="lineno"> 1131</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1132</span>    }</div>
<div class="line"><span class="lineno"> 1133</span> </div>
<div class="line"><span class="lineno"> 1134</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1135</span>}</div>
<div class="ttc" id="aa02771_html_a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75">SPELL_ATTR0_DO_NOT_DISPLAY</a></div><div class="ttdeci">@ SPELL_ATTR0_DO_NOT_DISPLAY</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:389</div></div>
<div class="ttc" id="aa03065_html_a93795b2131c8cbe38a7b23768a5a146da4d7ba94d96c89ebddcef8c081fb14557"><div class="ttname"><a href="../../d4/d44/a03065.html#a93795b2131c8cbe38a7b23768a5a146da4d7ba94d96c89ebddcef8c081fb14557">SPELL_ATTR0_CU_FORCE_AURA_SAVING</a></div><div class="ttdeci">@ SPELL_ATTR0_CU_FORCE_AURA_SAVING</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:205</div></div>
<div class="ttc" id="aa03065_html_a93795b2131c8cbe38a7b23768a5a146da82c401e647fb2c1c09ed1c6dd9568c2d"><div class="ttname"><a href="../../d4/d44/a03065.html#a93795b2131c8cbe38a7b23768a5a146da82c401e647fb2c1c09ed1c6dd9568c2d">SPELL_ATTR0_CU_AURA_CANNOT_BE_SAVED</a></div><div class="ttdeci">@ SPELL_ATTR0_CU_AURA_CANNOT_BE_SAVED</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:200</div></div>
<div class="ttc" id="aa10802_html_a62c2b89c6a9269aba7870b36e5872330"><div class="ttname"><a href="../../d3/d9a/a10802.html#a62c2b89c6a9269aba7870b36e5872330">Aura::IsUsingCharges</a></div><div class="ttdeci">bool IsUsingCharges() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:200</div></div>
<div class="ttc" id="aa10802_html_ab07705be94c0c10fce558c80d7208e0b"><div class="ttname"><a href="../../d3/d9a/a10802.html#ab07705be94c0c10fce558c80d7208e0b">Aura::GetCharges</a></div><div class="ttdeci">uint8 GetCharges() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:141</div></div>
<div class="ttc" id="aa10906_html"><div class="ttname"><a href="../../d4/db9/a10906.html">SpellInfo</a></div><div class="ttdef"><b>Definition:</b> SpellInfo.h:316</div></div>
<div class="ttc" id="aa10906_html_a21cf48a7eb77db7f731ebe746d2d6878"><div class="ttname"><a href="../../d4/db9/a10906.html#a21cf48a7eb77db7f731ebe746d2d6878">SpellInfo::Stances</a></div><div class="ttdeci">uint32 Stances</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:333</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00105">GetCasterGUID()</a>, <a class="el" href="../../#l00141">GetCharges()</a>, <a class="el" href="../../#l00107">GetOwner()</a>, <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l01082">IsPassive()</a>, <a class="el" href="../../#l00164">IsSingleTarget()</a>, <a class="el" href="../../#l00200">IsUsingCharges()</a>, <a class="el" href="../../#l00200">SPELL_ATTR0_CU_AURA_CANNOT_BE_SAVED</a>, <a class="el" href="../../#l00205">SPELL_ATTR0_CU_FORCE_AURA_SAVING</a>, <a class="el" href="../../#l00389">SPELL_ATTR0_DO_NOT_DISPLAY</a>, and <a class="el" href="../../#l00333">SpellInfo::Stances</a>.</p>

</div>
</div>
<a id="a323b5e9af786e15e7e1bdac6a47ea359" name="a323b5e9af786e15e7e1bdac6a47ea359"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a323b5e9af786e15e7e1bdac6a47ea359">&#9670;&#160;</a></span>CanBeSentToClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CanBeSentToClient </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1138</span>{</div>
<div class="line"><span class="lineno"> 1139</span>    <span class="keywordflow">return</span> !<a class="code hl_function" href="../../d3/d9a/a10802.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>() || <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#abdcbf79c1c255a5f7029a93a75e5cebf">HasAreaAuraEffect</a>() || <a class="code hl_function" href="../../d3/d9a/a10802.html#a6890e111fba863b7163fa5eb0b0870f5">HasEffectType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1a0187ab21626c9032d7398c0b98941d">SPELL_AURA_ABILITY_IGNORE_AURASTATE</a>);</div>
<div class="line"><span class="lineno"> 1140</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a1a0187ab21626c9032d7398c0b98941d"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1a0187ab21626c9032d7398c0b98941d">SPELL_AURA_ABILITY_IGNORE_AURASTATE</a></div><div class="ttdeci">@ SPELL_AURA_ABILITY_IGNORE_AURASTATE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:325</div></div>
<div class="ttc" id="aa10802_html_a6890e111fba863b7163fa5eb0b0870f5"><div class="ttname"><a href="../../d3/d9a/a10802.html#a6890e111fba863b7163fa5eb0b0870f5">Aura::HasEffectType</a></div><div class="ttdeci">bool HasEffectType(AuraType type) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:1222</div></div>
<div class="ttc" id="aa10906_html_abdcbf79c1c255a5f7029a93a75e5cebf"><div class="ttname"><a href="../../d4/db9/a10906.html#abdcbf79c1c255a5f7029a93a75e5cebf">SpellInfo::HasAreaAuraEffect</a></div><div class="ttdeci">bool HasAreaAuraEffect() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:909</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l00909">SpellInfo::HasAreaAuraEffect()</a>, <a class="el" href="../../#l01222">HasEffectType()</a>, <a class="el" href="../../#l01082">IsPassive()</a>, and <a class="el" href="../../#l00325">SPELL_AURA_ABILITY_IGNORE_AURASTATE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03140">Spell::EffectSummonPet()</a>.</p>

</div>
</div>
<a id="a40cd6707c45eead445b1f487991da9c1" name="a40cd6707c45eead445b1f487991da9c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40cd6707c45eead445b1f487991da9c1">&#9670;&#160;</a></span>CanStackWith()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CanStackWith </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d9a/a10802.html">Aura</a> const *&#160;</td>
          <td class="paramname"><em>checkAura</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>remove</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2022</span>{</div>
<div class="line"><span class="lineno"> 2023</span>    <span class="comment">// Can stack with self</span></div>
<div class="line"><span class="lineno"> 2024</span>    <span class="keywordflow">if</span> (<span class="keyword">this</span> == existingAura)</div>
<div class="line"><span class="lineno"> 2025</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2026</span> </div>
<div class="line"><span class="lineno"> 2027</span>    <a class="code hl_class" href="../../d4/db9/a10906.html">SpellInfo</a> <span class="keyword">const</span>* existingSpellInfo = existingAura-&gt;GetSpellInfo();</div>
<div class="line"><span class="lineno"> 2028</span>    <span class="keywordtype">bool</span> sameCaster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>() == existingAura-&gt;GetCasterGUID();</div>
<div class="line"><span class="lineno"> 2029</span> </div>
<div class="line"><span class="lineno"> 2030</span>    <span class="comment">// Dynobj auras always stack</span></div>
<div class="line"><span class="lineno"> 2031</span>    <span class="comment">// xinef: dont allow different ranks (or the same rank) of same spell to stack (many flamestrikes for example)</span></div>
<div class="line"><span class="lineno"> 2032</span>    <span class="keywordflow">if</span> (existingAura-&gt;GetType() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a>)</div>
<div class="line"><span class="lineno"> 2033</span>    {</div>
<div class="line"><span class="lineno"> 2034</span>        <span class="comment">// xinef: desecration lag fix - bound this condition to periodics</span></div>
<div class="line"><span class="lineno"> 2035</span>        <span class="keywordflow">if</span> (sameCaster &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;Id == existingSpellInfo-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a> &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;HasAura(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>))</div>
<div class="line"><span class="lineno"> 2036</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2037</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2038</span>    }</div>
<div class="line"><span class="lineno"> 2039</span> </div>
<div class="line"><span class="lineno"> 2040</span>    <span class="comment">// passive auras don&#39;t stack with another rank of the spell cast by same caster</span></div>
<div class="line"><span class="lineno"> 2041</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>() &amp;&amp; sameCaster &amp;&amp; (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#ac8da2514a9cabed9631f91779dcd623c">IsDifferentRankOf</a>(existingSpellInfo) || (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a> == existingSpellInfo-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a> &amp;&amp; <a class="code hl_variable" href="../../d3/d9a/a10802.html#a742caadbfa7658d6957bf73eda7c624a">m_castItemGuid</a>.<a class="code hl_function" href="../../d9/d08/a08198.html#a32695a11f47a244236e7bce277fcf3a8">IsEmpty</a>())))</div>
<div class="line"><span class="lineno"> 2042</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2043</span> </div>
<div class="line"><span class="lineno"> 2044</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 2045</span>    {</div>
<div class="line"><span class="lineno"> 2046</span>        <span class="comment">// prevent remove triggering aura by triggered aura</span></div>
<div class="line"><span class="lineno"> 2047</span>        <span class="keywordflow">if</span> (existingSpellInfo-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[i].TriggerSpell == <a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>()</div>
<div class="line"><span class="lineno"> 2048</span>                <span class="comment">// prevent remove triggered aura by triggering aura refresh</span></div>
<div class="line"><span class="lineno"> 2049</span>                || <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[i].TriggerSpell == existingAura-&gt;GetId())</div>
<div class="line"><span class="lineno"> 2050</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2051</span>    }</div>
<div class="line"><span class="lineno"> 2052</span> </div>
<div class="line"><span class="lineno"> 2053</span>    <span class="comment">// check spell specific stack rules</span></div>
<div class="line"><span class="lineno"> 2054</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a49b3ca759c4a7aaa0f97c01c9273e39b">IsAuraExclusiveBySpecificWith</a>(existingSpellInfo)</div>
<div class="line"><span class="lineno"> 2055</span>            || (sameCaster &amp;&amp; <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a3f193840a6704ec13ba08bbe39824737">IsAuraExclusiveBySpecificPerCasterWith</a>(existingSpellInfo)))</div>
<div class="line"><span class="lineno"> 2056</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2057</span> </div>
<div class="line"><span class="lineno"> 2058</span>    <span class="comment">// check spell group stack rules</span></div>
<div class="line"><span class="lineno"> 2059</span>    <span class="comment">// xinef: this assures us that both spells are in same group!</span></div>
<div class="line"><span class="lineno"> 2060</span>    <a class="code hl_enumeration" href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88">SpellGroupStackFlags</a> stackFlags = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;CheckSpellGroupStackRules(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>, existingSpellInfo, remove, <a class="code hl_function" href="../../d3/d9a/a10802.html#a13f14942fd6394df8e5d8ae820fd3fc7">IsArea</a>());</div>
<div class="line"><span class="lineno"> 2061</span>    <span class="keywordflow">if</span> (stackFlags)</div>
<div class="line"><span class="lineno"> 2062</span>    {</div>
<div class="line"><span class="lineno"> 2063</span>        <span class="comment">// xinef: same caster rule is bounded by spellfamily</span></div>
<div class="line"><span class="lineno"> 2064</span>        <span class="keywordflow">if</span> (sameCaster &amp;&amp; <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a> == existingSpellInfo-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 2065</span>                (stackFlags &amp; <a class="code hl_enumvalue" href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88ab87195d8c88d548d93dc11460e7ebf6a">SPELL_GROUP_STACK_FLAG_NOT_SAME_CASTER</a>))</div>
<div class="line"><span class="lineno"> 2066</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2067</span> </div>
<div class="line"><span class="lineno"> 2068</span>        <span class="comment">// xinef: normal exclusive stacking, remove if auras are equal by effects</span></div>
<div class="line"><span class="lineno"> 2069</span>        <span class="keywordflow">if</span> (stackFlags &amp; <a class="code hl_enumvalue" href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88a3556b4b6eac1a9cc343a58851626cc35">SPELL_GROUP_STACK_FLAG_EXCLUSIVE</a>)</div>
<div class="line"><span class="lineno"> 2070</span>        {</div>
<div class="line"><span class="lineno"> 2071</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;IsAuraEffectEqual(existingSpellInfo) || <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;IsRankOf(existingSpellInfo))</div>
<div class="line"><span class="lineno"> 2072</span>            {</div>
<div class="line"><span class="lineno"> 2073</span>                <span class="keywordflow">if</span> (remove)</div>
<div class="line"><span class="lineno"> 2074</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#ac4544d5fa6bb4171de4fccdad5e96918">IsAuraStronger</a>(existingAura);</div>
<div class="line"><span class="lineno"> 2075</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2076</span>                    <span class="keywordflow">return</span> existingAura-&gt;IsAuraStronger(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 2077</span>            }</div>
<div class="line"><span class="lineno"> 2078</span>        }</div>
<div class="line"><span class="lineno"> 2079</span> </div>
<div class="line"><span class="lineno"> 2080</span>        <span class="comment">// xinef: check priority before effect mask</span></div>
<div class="line"><span class="lineno"> 2081</span>        <a class="code hl_enumeration" href="../../df/d64/a03110.html#ab9f8654c03ec40ac9bdc5214da99e1eb">SpellGroupSpecialFlags</a> thisAuraFlag = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellGroupSpecialFlags(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>());</div>
<div class="line"><span class="lineno"> 2082</span>        <a class="code hl_enumeration" href="../../df/d64/a03110.html#ab9f8654c03ec40ac9bdc5214da99e1eb">SpellGroupSpecialFlags</a> existingAuraFlag = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellGroupSpecialFlags(existingSpellInfo-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>);</div>
<div class="line"><span class="lineno"> 2083</span>        <span class="keywordflow">if</span> (thisAuraFlag &gt;= <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ab9f8654c03ec40ac9bdc5214da99e1eba1241df11023c863e2de7d3371c703d76">SPELL_GROUP_SPECIAL_FLAG_PRIORITY1</a> &amp;&amp; thisAuraFlag &lt;= <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ab9f8654c03ec40ac9bdc5214da99e1ebaa1865762e5eea260fb0e1ab62aa9f903">SPELL_GROUP_SPECIAL_FLAG_PRIORITY4</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 2084</span>            existingAuraFlag &gt;= <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ab9f8654c03ec40ac9bdc5214da99e1eba1241df11023c863e2de7d3371c703d76">SPELL_GROUP_SPECIAL_FLAG_PRIORITY1</a> &amp;&amp; existingAuraFlag &lt;= <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ab9f8654c03ec40ac9bdc5214da99e1ebaa1865762e5eea260fb0e1ab62aa9f903">SPELL_GROUP_SPECIAL_FLAG_PRIORITY4</a>)</div>
<div class="line"><span class="lineno"> 2085</span>        {</div>
<div class="line"><span class="lineno"> 2086</span>            <span class="keywordflow">if</span> (thisAuraFlag &lt; existingAuraFlag)</div>
<div class="line"><span class="lineno"> 2087</span>            {</div>
<div class="line"><span class="lineno"> 2088</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2089</span>            }</div>
<div class="line"><span class="lineno"> 2090</span>        }</div>
<div class="line"><span class="lineno"> 2091</span> </div>
<div class="line"><span class="lineno"> 2092</span>        <span class="comment">// xinef: forced strongest aura in group by flag</span></div>
<div class="line"><span class="lineno"> 2093</span>        <span class="keywordflow">if</span> (stackFlags &amp; <a class="code hl_enumvalue" href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88a657ce08869043f0b71ee8815c6fb869e">SPELL_GROUP_STACK_FLAG_FORCED_STRONGEST</a>)</div>
<div class="line"><span class="lineno"> 2094</span>            <span class="keywordflow">return</span> !remove;</div>
<div class="line"><span class="lineno"> 2095</span>        <span class="keywordflow">if</span> (stackFlags &amp; <a class="code hl_enumvalue" href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88a4cfbddea486e9940cbeb5ebdab267b3e">SPELL_GROUP_STACK_FLAG_FORCED_WEAKEST</a>)</div>
<div class="line"><span class="lineno"> 2096</span>            <span class="keywordflow">return</span> remove;</div>
<div class="line"><span class="lineno"> 2097</span> </div>
<div class="line"><span class="lineno"> 2098</span>        <span class="comment">// xinef: forced return, handle all cases using available flags!</span></div>
<div class="line"><span class="lineno"> 2099</span>        <span class="keywordflow">return</span> !(stackFlags &amp; <a class="code hl_enumvalue" href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88adf0c38d0364b5e9c36aa3bf4f68da680">SPELL_GROUP_STACK_FLAG_NEVER_STACK</a>);</div>
<div class="line"><span class="lineno"> 2100</span>    }</div>
<div class="line"><span class="lineno"> 2101</span> </div>
<div class="line"><span class="lineno"> 2102</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a> != existingSpellInfo-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a>)</div>
<div class="line"><span class="lineno"> 2103</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2104</span> </div>
<div class="line"><span class="lineno"> 2105</span>    <span class="keywordflow">if</span> (!sameCaster)</div>
<div class="line"><span class="lineno"> 2106</span>    {</div>
<div class="line"><span class="lineno"> 2107</span>        <span class="comment">// Channeled auras can stack if not forbidden by db or aura type</span></div>
<div class="line"><span class="lineno"> 2108</span>        <span class="keywordflow">if</span> (existingAura-&gt;GetSpellInfo()-&gt;IsChanneled())</div>
<div class="line"><span class="lineno"> 2109</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2110</span> </div>
<div class="line"><span class="lineno"> 2111</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a6f95d0d447e8085b1097ac9965af2a81a47666e0aca649bbf39649d0214f4bc67">SPELL_ATTR3_DOT_STACKING_RULE</a>))</div>
<div class="line"><span class="lineno"> 2112</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2113</span> </div>
<div class="line"><span class="lineno"> 2114</span>        <span class="comment">// check same periodic auras</span></div>
<div class="line"><span class="lineno"> 2115</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 2116</span>        {</div>
<div class="line"><span class="lineno"> 2117</span>            <span class="keywordflow">switch</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[i].ApplyAuraName)</div>
<div class="line"><span class="lineno"> 2118</span>            {</div>
<div class="line"><span class="lineno"> 2119</span>                <span class="comment">// DOT or HOT from different casters will stack</span></div>
<div class="line"><span class="lineno"> 2120</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>:</div>
<div class="line"><span class="lineno"> 2121</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56">SPELL_AURA_PERIODIC_DUMMY</a>:</div>
<div class="line"><span class="lineno"> 2122</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a>:</div>
<div class="line"><span class="lineno"> 2123</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>:</div>
<div class="line"><span class="lineno"> 2124</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab9f377f6e107ad1633d32a22da2ec7d2">SPELL_AURA_PERIODIC_ENERGIZE</a>:</div>
<div class="line"><span class="lineno"> 2125</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2eb3f6e6a49bc0b70fa9726b1fa12bb3">SPELL_AURA_PERIODIC_MANA_LEECH</a>:</div>
<div class="line"><span class="lineno"> 2126</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a>:</div>
<div class="line"><span class="lineno"> 2127</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ad06611922c0cf903c24b220140daacab">SPELL_AURA_POWER_BURN</a>:</div>
<div class="line"><span class="lineno"> 2128</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a4f1feb3950d2776a74c938c366adbbdf">SPELL_AURA_OBS_MOD_POWER</a>:</div>
<div class="line"><span class="lineno"> 2129</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a>:</div>
<div class="line"><span class="lineno"> 2130</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab6c4d806c60e94fec189c27a7a205576">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a>:</div>
<div class="line"><span class="lineno"> 2131</span>                    <span class="comment">// periodic auras which target areas are not allowed to stack this way (replenishment for example)</span></div>
<div class="line"><span class="lineno"> 2132</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[i].IsTargetingArea() || existingSpellInfo-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[i].IsTargetingArea())</div>
<div class="line"><span class="lineno"> 2133</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2134</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2135</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2136</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2137</span>            }</div>
<div class="line"><span class="lineno"> 2138</span>        }</div>
<div class="line"><span class="lineno"> 2139</span>    }</div>
<div class="line"><span class="lineno"> 2140</span> </div>
<div class="line"><span class="lineno"> 2141</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> VehicleAura1 = 0;</div>
<div class="line"><span class="lineno"> 2142</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> VehicleAura2 = 0;</div>
<div class="line"><span class="lineno"> 2143</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0;</div>
<div class="line"><span class="lineno"> 2144</span>    <span class="keywordflow">while</span> (i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a> &amp;&amp; !(VehicleAura1 &amp;&amp; VehicleAura2))</div>
<div class="line"><span class="lineno"> 2145</span>    {</div>
<div class="line"><span class="lineno"> 2146</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[i].ApplyAuraName == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a583bf7e94825b7252010ad12dd50ed6f">SPELL_AURA_CONTROL_VEHICLE</a>)</div>
<div class="line"><span class="lineno"> 2147</span>            VehicleAura1 = i + 1;</div>
<div class="line"><span class="lineno"> 2148</span>        <span class="keywordflow">if</span> (existingSpellInfo-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[i].ApplyAuraName == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a583bf7e94825b7252010ad12dd50ed6f">SPELL_AURA_CONTROL_VEHICLE</a>)</div>
<div class="line"><span class="lineno"> 2149</span>            VehicleAura2 = i + 1;</div>
<div class="line"><span class="lineno"> 2150</span> </div>
<div class="line"><span class="lineno"> 2151</span>        ++i;</div>
<div class="line"><span class="lineno"> 2152</span>    }</div>
<div class="line"><span class="lineno"> 2153</span> </div>
<div class="line"><span class="lineno"> 2154</span>    <span class="keywordflow">if</span> (VehicleAura1 &amp;&amp; VehicleAura2)</div>
<div class="line"><span class="lineno"> 2155</span>    {</div>
<div class="line"><span class="lineno"> 2156</span>        <a class="code hl_class" href="../../db/dc8/a08558.html">Vehicle</a>* veh = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 2157</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#afd88f95deffad982ca0b5ef16b6244e8">ToUnit</a>())</div>
<div class="line"><span class="lineno"> 2158</span>            veh = <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#afd88f95deffad982ca0b5ef16b6244e8">ToUnit</a>()-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#ae54fce65a1c084c982043777288895ec">GetVehicleKit</a>();</div>
<div class="line"><span class="lineno"> 2159</span> </div>
<div class="line"><span class="lineno"> 2160</span>        <span class="keywordflow">if</span> (!veh)           <span class="comment">// We should probably just let it stack. Vehicle system will prevent undefined behaviour later</span></div>
<div class="line"><span class="lineno"> 2161</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2162</span> </div>
<div class="line"><span class="lineno"> 2163</span>        <span class="comment">// xinef: allow direct auras to stack if there is no passenger in this slot</span></div>
<div class="line"><span class="lineno"> 2164</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* aurEff = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(VehicleAura1 - 1))</div>
<div class="line"><span class="lineno"> 2165</span>            <span class="keywordflow">if</span> (aurEff-&gt;GetAmount() &gt; 0)</div>
<div class="line"><span class="lineno"> 2166</span>                <span class="keywordflow">if</span> (!veh-&gt;<a class="code hl_function" href="../../db/dc8/a08558.html#a250a3ae75407ecbf79d3235a9c56679f">GetPassenger</a>(aurEff-&gt;GetAmount() - 1))</div>
<div class="line"><span class="lineno"> 2167</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2168</span> </div>
<div class="line"><span class="lineno"> 2169</span>        <span class="keywordflow">if</span> (!veh-&gt;<a class="code hl_function" href="../../db/dc8/a08558.html#a1b4a880c866af98a9eccc944786e3393">GetAvailableSeatCount</a>())</div>
<div class="line"><span class="lineno"> 2170</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// No empty seat available</span></div>
<div class="line"><span class="lineno"> 2171</span> </div>
<div class="line"><span class="lineno"> 2172</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;        <span class="comment">// Empty seat available (skip rest)</span></div>
<div class="line"><span class="lineno"> 2173</span>    }</div>
<div class="line"><span class="lineno"> 2174</span> </div>
<div class="line"><span class="lineno"> 2175</span>    <span class="comment">// spell of same spell rank chain</span></div>
<div class="line"><span class="lineno"> 2176</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a0a651a1cf655c9d5619f6b78e471656a">IsRankOf</a>(existingSpellInfo) &amp;&amp; !(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a> == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba66df9b34a3b922a8242d3dfb74494026">SPELLFAMILY_HUNTER</a> &amp;&amp; <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a30452de2bd62607418f3962d00124144">SpellFamilyFlags</a>[1] &amp; 0x80000000))</div>
<div class="line"><span class="lineno"> 2177</span>    {</div>
<div class="line"><span class="lineno"> 2178</span>        <span class="comment">// don&#39;t allow passive area auras to stack</span></div>
<div class="line"><span class="lineno"> 2179</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a6c038b16dbe3eacfcdd424c6075b8f78">IsMultiSlotAura</a>() &amp;&amp; !<a class="code hl_function" href="../../d3/d9a/a10802.html#a13f14942fd6394df8e5d8ae820fd3fc7">IsArea</a>())</div>
<div class="line"><span class="lineno"> 2180</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2181</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab5641e8e175470f121e2c6eda7dfb253">GetCastItemGUID</a>() &amp;&amp; existingAura-&gt;GetCastItemGUID())</div>
<div class="line"><span class="lineno"> 2182</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab5641e8e175470f121e2c6eda7dfb253">GetCastItemGUID</a>() != existingAura-&gt;GetCastItemGUID() &amp;&amp; <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d4/d44/a03065.html#a93795b2131c8cbe38a7b23768a5a146da23162f829e73ed8653b153a3e5212a39">SPELL_ATTR0_CU_ENCHANT_PROC</a>))</div>
<div class="line"><span class="lineno"> 2183</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2184</span>        <span class="comment">// same spell with same caster should not stack</span></div>
<div class="line"><span class="lineno"> 2185</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2186</span>    }</div>
<div class="line"><span class="lineno"> 2187</span> </div>
<div class="line"><span class="lineno"> 2188</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2189</span>}</div>
<div class="ttc" id="aa02771_html_a6f95d0d447e8085b1097ac9965af2a81a47666e0aca649bbf39649d0214f4bc67"><div class="ttname"><a href="../../d0/dbd/a02771.html#a6f95d0d447e8085b1097ac9965af2a81a47666e0aca649bbf39649d0214f4bc67">SPELL_ATTR3_DOT_STACKING_RULE</a></div><div class="ttdeci">@ SPELL_ATTR3_DOT_STACKING_RULE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:500</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba66df9b34a3b922a8242d3dfb74494026"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba66df9b34a3b922a8242d3dfb74494026">SPELLFAMILY_HUNTER</a></div><div class="ttdeci">@ SPELLFAMILY_HUNTER</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3537</div></div>
<div class="ttc" id="aa03065_html_a93795b2131c8cbe38a7b23768a5a146da23162f829e73ed8653b153a3e5212a39"><div class="ttname"><a href="../../d4/d44/a03065.html#a93795b2131c8cbe38a7b23768a5a146da23162f829e73ed8653b153a3e5212a39">SPELL_ATTR0_CU_ENCHANT_PROC</a></div><div class="ttdeci">@ SPELL_ATTR0_CU_ENCHANT_PROC</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:176</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_DAMAGE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:66</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a></div><div class="ttdeci">@ SPELL_AURA_OBS_MOD_HEALTH</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:83</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a2eb3f6e6a49bc0b70fa9726b1fa12bb3"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2eb3f6e6a49bc0b70fa9726b1fa12bb3">SPELL_AURA_PERIODIC_MANA_LEECH</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_MANA_LEECH</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:127</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a4f1feb3950d2776a74c938c366adbbdf"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a4f1feb3950d2776a74c938c366adbbdf">SPELL_AURA_OBS_MOD_POWER</a></div><div class="ttdeci">@ SPELL_AURA_OBS_MOD_POWER</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:84</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a583bf7e94825b7252010ad12dd50ed6f"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a583bf7e94825b7252010ad12dd50ed6f">SPELL_AURA_CONTROL_VEHICLE</a></div><div class="ttdeci">@ SPELL_AURA_CONTROL_VEHICLE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:299</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_HEAL</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:71</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ab6c4d806c60e94fec189c27a7a205576"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab6c4d806c60e94fec189c27a7a205576">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:290</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ab9f377f6e107ad1633d32a22da2ec7d2"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab9f377f6e107ad1633d32a22da2ec7d2">SPELL_AURA_PERIODIC_ENERGIZE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_ENERGIZE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:87</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_LEECH</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:116</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ad06611922c0cf903c24b220140daacab"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ad06611922c0cf903c24b220140daacab">SPELL_AURA_POWER_BURN</a></div><div class="ttdeci">@ SPELL_AURA_POWER_BURN</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:225</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56">SPELL_AURA_PERIODIC_DUMMY</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_DUMMY</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:289</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_TRIGGER_SPELL</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:86</div></div>
<div class="ttc" id="aa03092_html_ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4"><div class="ttname"><a href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a></div><div class="ttdeci">@ DYNOBJ_AURA_TYPE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:386</div></div>
<div class="ttc" id="aa03110_html_a3384f828e7f362dbdaecb22673641c88"><div class="ttname"><a href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88">SpellGroupStackFlags</a></div><div class="ttdeci">SpellGroupStackFlags</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:356</div></div>
<div class="ttc" id="aa03110_html_a3384f828e7f362dbdaecb22673641c88a3556b4b6eac1a9cc343a58851626cc35"><div class="ttname"><a href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88a3556b4b6eac1a9cc343a58851626cc35">SPELL_GROUP_STACK_FLAG_EXCLUSIVE</a></div><div class="ttdeci">@ SPELL_GROUP_STACK_FLAG_EXCLUSIVE</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:358</div></div>
<div class="ttc" id="aa03110_html_a3384f828e7f362dbdaecb22673641c88a4cfbddea486e9940cbeb5ebdab267b3e"><div class="ttname"><a href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88a4cfbddea486e9940cbeb5ebdab267b3e">SPELL_GROUP_STACK_FLAG_FORCED_WEAKEST</a></div><div class="ttdeci">@ SPELL_GROUP_STACK_FLAG_FORCED_WEAKEST</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:367</div></div>
<div class="ttc" id="aa03110_html_a3384f828e7f362dbdaecb22673641c88a657ce08869043f0b71ee8815c6fb869e"><div class="ttname"><a href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88a657ce08869043f0b71ee8815c6fb869e">SPELL_GROUP_STACK_FLAG_FORCED_STRONGEST</a></div><div class="ttdeci">@ SPELL_GROUP_STACK_FLAG_FORCED_STRONGEST</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:366</div></div>
<div class="ttc" id="aa03110_html_a3384f828e7f362dbdaecb22673641c88ab87195d8c88d548d93dc11460e7ebf6a"><div class="ttname"><a href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88ab87195d8c88d548d93dc11460e7ebf6a">SPELL_GROUP_STACK_FLAG_NOT_SAME_CASTER</a></div><div class="ttdeci">@ SPELL_GROUP_STACK_FLAG_NOT_SAME_CASTER</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:359</div></div>
<div class="ttc" id="aa03110_html_a3384f828e7f362dbdaecb22673641c88adf0c38d0364b5e9c36aa3bf4f68da680"><div class="ttname"><a href="../../df/d64/a03110.html#a3384f828e7f362dbdaecb22673641c88adf0c38d0364b5e9c36aa3bf4f68da680">SPELL_GROUP_STACK_FLAG_NEVER_STACK</a></div><div class="ttdeci">@ SPELL_GROUP_STACK_FLAG_NEVER_STACK</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:361</div></div>
<div class="ttc" id="aa03110_html_ab9f8654c03ec40ac9bdc5214da99e1eb"><div class="ttname"><a href="../../df/d64/a03110.html#ab9f8654c03ec40ac9bdc5214da99e1eb">SpellGroupSpecialFlags</a></div><div class="ttdeci">SpellGroupSpecialFlags</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:334</div></div>
<div class="ttc" id="aa03110_html_ab9f8654c03ec40ac9bdc5214da99e1eba1241df11023c863e2de7d3371c703d76"><div class="ttname"><a href="../../df/d64/a03110.html#ab9f8654c03ec40ac9bdc5214da99e1eba1241df11023c863e2de7d3371c703d76">SPELL_GROUP_SPECIAL_FLAG_PRIORITY1</a></div><div class="ttdeci">@ SPELL_GROUP_SPECIAL_FLAG_PRIORITY1</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:344</div></div>
<div class="ttc" id="aa03110_html_ab9f8654c03ec40ac9bdc5214da99e1ebaa1865762e5eea260fb0e1ab62aa9f903"><div class="ttname"><a href="../../df/d64/a03110.html#ab9f8654c03ec40ac9bdc5214da99e1ebaa1865762e5eea260fb0e1ab62aa9f903">SPELL_GROUP_SPECIAL_FLAG_PRIORITY4</a></div><div class="ttdeci">@ SPELL_GROUP_SPECIAL_FLAG_PRIORITY4</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:347</div></div>
<div class="ttc" id="aa08150_html_afd88f95deffad982ca0b5ef16b6244e8"><div class="ttname"><a href="../../d6/d80/a08150.html#afd88f95deffad982ca0b5ef16b6244e8">Object::ToUnit</a></div><div class="ttdeci">Unit * ToUnit()</div><div class="ttdef"><b>Definition:</b> Object.h:206</div></div>
<div class="ttc" id="aa08198_html_a32695a11f47a244236e7bce277fcf3a8"><div class="ttname"><a href="../../d9/d08/a08198.html#a32695a11f47a244236e7bce277fcf3a8">ObjectGuid::IsEmpty</a></div><div class="ttdeci">bool IsEmpty() const</div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:161</div></div>
<div class="ttc" id="aa08526_html_ae54fce65a1c084c982043777288895ec"><div class="ttname"><a href="../../d6/d15/a08526.html#ae54fce65a1c084c982043777288895ec">Unit::GetVehicleKit</a></div><div class="ttdeci">Vehicle * GetVehicleKit() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1785</div></div>
<div class="ttc" id="aa08558_html"><div class="ttname"><a href="../../db/dc8/a08558.html">Vehicle</a></div><div class="ttdef"><b>Definition:</b> Vehicle.h:28</div></div>
<div class="ttc" id="aa08558_html_a1b4a880c866af98a9eccc944786e3393"><div class="ttname"><a href="../../db/dc8/a08558.html#a1b4a880c866af98a9eccc944786e3393">Vehicle::GetAvailableSeatCount</a></div><div class="ttdeci">uint8 GetAvailableSeatCount() const</div><div class="ttdef"><b>Definition:</b> Vehicle.cpp:617</div></div>
<div class="ttc" id="aa08558_html_a250a3ae75407ecbf79d3235a9c56679f"><div class="ttname"><a href="../../db/dc8/a08558.html#a250a3ae75407ecbf79d3235a9c56679f">Vehicle::GetPassenger</a></div><div class="ttdeci">Unit * GetPassenger(int8 seatId) const</div><div class="ttdef"><b>Definition:</b> Vehicle.cpp:227</div></div>
<div class="ttc" id="aa10802_html_a13f14942fd6394df8e5d8ae820fd3fc7"><div class="ttname"><a href="../../d3/d9a/a10802.html#a13f14942fd6394df8e5d8ae820fd3fc7">Aura::IsArea</a></div><div class="ttdeci">bool IsArea() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:1072</div></div>
<div class="ttc" id="aa10802_html_a6ee04786fcd54da7e3e2b7a0277adeb8"><div class="ttname"><a href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">Aura::GetEffect</a></div><div class="ttdeci">AuraEffect * GetEffect(uint8 effIndex) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:175</div></div>
<div class="ttc" id="aa10802_html_ab5641e8e175470f121e2c6eda7dfb253"><div class="ttname"><a href="../../d3/d9a/a10802.html#ab5641e8e175470f121e2c6eda7dfb253">Aura::GetCastItemGUID</a></div><div class="ttdeci">ObjectGuid GetCastItemGUID() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:103</div></div>
<div class="ttc" id="aa10802_html_ac4544d5fa6bb4171de4fccdad5e96918"><div class="ttname"><a href="../../d3/d9a/a10802.html#ac4544d5fa6bb4171de4fccdad5e96918">Aura::IsAuraStronger</a></div><div class="ttdeci">bool IsAuraStronger(Aura const *newAura) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:1992</div></div>
<div class="ttc" id="aa10906_html_a0a651a1cf655c9d5619f6b78e471656a"><div class="ttname"><a href="../../d4/db9/a10906.html#a0a651a1cf655c9d5619f6b78e471656a">SpellInfo::IsRankOf</a></div><div class="ttdeci">bool IsRankOf(SpellInfo const *spellInfo) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:2569</div></div>
<div class="ttc" id="aa10906_html_a30452de2bd62607418f3962d00124144"><div class="ttname"><a href="../../d4/db9/a10906.html#a30452de2bd62607418f3962d00124144">SpellInfo::SpellFamilyFlags</a></div><div class="ttdeci">flag96 SpellFamilyFlags</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:388</div></div>
<div class="ttc" id="aa10906_html_a3f193840a6704ec13ba08bbe39824737"><div class="ttname"><a href="../../d4/db9/a10906.html#a3f193840a6704ec13ba08bbe39824737">SpellInfo::IsAuraExclusiveBySpecificPerCasterWith</a></div><div class="ttdeci">bool IsAuraExclusiveBySpecificPerCasterWith(SpellInfo const *spellInfo) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1415</div></div>
<div class="ttc" id="aa10906_html_a49b3ca759c4a7aaa0f97c01c9273e39b"><div class="ttname"><a href="../../d4/db9/a10906.html#a49b3ca759c4a7aaa0f97c01c9273e39b">SpellInfo::IsAuraExclusiveBySpecificWith</a></div><div class="ttdeci">bool IsAuraExclusiveBySpecificWith(SpellInfo const *spellInfo) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1383</div></div>
<div class="ttc" id="aa10906_html_a6c038b16dbe3eacfcdd424c6075b8f78"><div class="ttname"><a href="../../d4/db9/a10906.html#a6c038b16dbe3eacfcdd424c6075b8f78">SpellInfo::IsMultiSlotAura</a></div><div class="ttdeci">bool IsMultiSlotAura() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1207</div></div>
<div class="ttc" id="aa10906_html_aa5bb0d7d6df03526d011d9cbfa3734e0"><div class="ttname"><a href="../../d4/db9/a10906.html#aa5bb0d7d6df03526d011d9cbfa3734e0">SpellInfo::Effects</a></div><div class="ttdeci">std::array&lt; SpellEffectInfo, MAX_SPELL_EFFECTS &gt; Effects</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:393</div></div>
<div class="ttc" id="aa10906_html_ac8da2514a9cabed9631f91779dcd623c"><div class="ttname"><a href="../../d4/db9/a10906.html#ac8da2514a9cabed9631f91779dcd623c">SpellInfo::IsDifferentRankOf</a></div><div class="ttdeci">bool IsDifferentRankOf(SpellInfo const *spellInfo) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:2574</div></div>
<div class="ttc" id="aa10906_html_af6ec577353f7d3cc59badd7d332153b0"><div class="ttname"><a href="../../d4/db9/a10906.html#af6ec577353f7d3cc59badd7d332153b0">SpellInfo::SpellFamilyName</a></div><div class="ttdeci">uint32 SpellFamilyName</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:387</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00386">DYNOBJ_AURA_TYPE</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00617">Vehicle::GetAvailableSeatCount()</a>, <a class="el" href="../../#l00105">GetCasterGUID()</a>, <a class="el" href="../../#l00103">GetCastItemGUID()</a>, <a class="el" href="../../#l00175">GetEffect()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l00107">GetOwner()</a>, <a class="el" href="../../#l00227">Vehicle::GetPassenger()</a>, <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l00481">GetType()</a>, <a class="el" href="../../#l01785">Unit::GetVehicleKit()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l01072">IsArea()</a>, <a class="el" href="../../#l01415">SpellInfo::IsAuraExclusiveBySpecificPerCasterWith()</a>, <a class="el" href="../../#l01383">SpellInfo::IsAuraExclusiveBySpecificWith()</a>, <a class="el" href="../../#l01992">IsAuraStronger()</a>, <a class="el" href="../../#l01256">SpellInfo::IsChanneled()</a>, <a class="el" href="../../#l02574">SpellInfo::IsDifferentRankOf()</a>, <a class="el" href="../../#l00161">ObjectGuid::IsEmpty()</a>, <a class="el" href="../../#l01207">SpellInfo::IsMultiSlotAura()</a>, <a class="el" href="../../#l01082">IsPassive()</a>, <a class="el" href="../../#l02569">SpellInfo::IsRankOf()</a>, <a class="el" href="../../#l00251">m_castItemGuid</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l00176">SPELL_ATTR0_CU_ENCHANT_PROC</a>, <a class="el" href="../../#l00500">SPELL_ATTR3_DOT_STACKING_RULE</a>, <a class="el" href="../../#l00299">SPELL_AURA_CONTROL_VEHICLE</a>, <a class="el" href="../../#l00083">SPELL_AURA_OBS_MOD_HEALTH</a>, <a class="el" href="../../#l00084">SPELL_AURA_OBS_MOD_POWER</a>, <a class="el" href="../../#l00066">SPELL_AURA_PERIODIC_DAMAGE</a>, <a class="el" href="../../#l00289">SPELL_AURA_PERIODIC_DUMMY</a>, <a class="el" href="../../#l00087">SPELL_AURA_PERIODIC_ENERGIZE</a>, <a class="el" href="../../#l00071">SPELL_AURA_PERIODIC_HEAL</a>, <a class="el" href="../../#l00116">SPELL_AURA_PERIODIC_LEECH</a>, <a class="el" href="../../#l00127">SPELL_AURA_PERIODIC_MANA_LEECH</a>, <a class="el" href="../../#l00086">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>, <a class="el" href="../../#l00290">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a>, <a class="el" href="../../#l00225">SPELL_AURA_POWER_BURN</a>, <a class="el" href="../../#l00344">SPELL_GROUP_SPECIAL_FLAG_PRIORITY1</a>, <a class="el" href="../../#l00347">SPELL_GROUP_SPECIAL_FLAG_PRIORITY4</a>, <a class="el" href="../../#l00358">SPELL_GROUP_STACK_FLAG_EXCLUSIVE</a>, <a class="el" href="../../#l00366">SPELL_GROUP_STACK_FLAG_FORCED_STRONGEST</a>, <a class="el" href="../../#l00367">SPELL_GROUP_STACK_FLAG_FORCED_WEAKEST</a>, <a class="el" href="../../#l00361">SPELL_GROUP_STACK_FLAG_NEVER_STACK</a>, <a class="el" href="../../#l00359">SPELL_GROUP_STACK_FLAG_NOT_SAME_CASTER</a>, <a class="el" href="../../#l03537">SPELLFAMILY_HUNTER</a>, <a class="el" href="../../#l00388">SpellInfo::SpellFamilyFlags</a>, <a class="el" href="../../#l00387">SpellInfo::SpellFamilyName</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, and <a class="el" href="../../#l00206">Object::ToUnit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04667">Unit::_RemoveNoStackAurasDueToAura()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

</div>
</div>
<a id="a139193e2e2688d6ea9c6a817c0a00318" name="a139193e2e2688d6ea9c6a817c0a00318"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a139193e2e2688d6ea9c6a817c0a00318">&#9670;&#160;</a></span>CheckAreaTarget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::CheckAreaTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1988</span>{</div>
<div class="line"><span class="lineno"> 1989</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#a3666518caf5cf301c27857b2e909cf16">CallScriptCheckAreaTargetHandlers</a>(target);</div>
<div class="line"><span class="lineno"> 1990</span>}</div>
<div class="ttc" id="aa10802_html_a3666518caf5cf301c27857b2e909cf16"><div class="ttname"><a href="../../d3/d9a/a10802.html#a3666518caf5cf301c27857b2e909cf16">Aura::CallScriptCheckAreaTargetHandlers</a></div><div class="ttdeci">bool CallScriptCheckAreaTargetHandlers(Unit *target)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2375</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02375">CallScriptCheckAreaTargetHandlers()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01970">CanBeAppliedOn()</a>.</p>

</div>
</div>
<a id="ae44dc9394657b8fbc90bec95911cac03" name="ae44dc9394657b8fbc90bec95911cac03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae44dc9394657b8fbc90bec95911cac03">&#9670;&#160;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d9a/a10802.html">Aura</a> * Aura::Create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *&#160;</td>
          <td class="paramname"><em>spellproto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>effMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df3/a08182.html">WorldObject</a> *&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>baseAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d36/a08106.html">Item</a> *&#160;</td>
          <td class="paramname"><em>castItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>casterGUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>itemGUID</em> = <code><a class="el" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  365</span>{</div>
<div class="line"><span class="lineno">  366</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(effMask);</div>
<div class="line"><span class="lineno">  367</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(spellproto);</div>
<div class="line"><span class="lineno">  368</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(owner);</div>
<div class="line"><span class="lineno">  369</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(caster || casterGUID);</div>
<div class="line"><span class="lineno">  370</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(effMask &lt;= <a class="code hl_define" href="../../d7/d14/a02750.html#a3ac65d8635b4379f0d5b75a0e2dfd9c8">MAX_EFFECT_MASK</a>);</div>
<div class="line"><span class="lineno">  371</span>    <span class="comment">// try to get caster of aura</span></div>
<div class="line"><span class="lineno">  372</span>    <span class="keywordflow">if</span> (casterGUID)</div>
<div class="line"><span class="lineno">  373</span>    {</div>
<div class="line"><span class="lineno">  374</span>        <span class="keywordflow">if</span> (owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>() == casterGUID)</div>
<div class="line"><span class="lineno">  375</span>            caster = owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#afd88f95deffad982ca0b5ef16b6244e8">ToUnit</a>();</div>
<div class="line"><span class="lineno">  376</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  377</span>            caster = <a class="code hl_function" href="../../d9/d06/a04735.html#a02c2dfb59db7d7e2501dcc9a4f9baf07">ObjectAccessor::GetUnit</a>(*owner, casterGUID);</div>
<div class="line"><span class="lineno">  378</span>    }</div>
<div class="line"><span class="lineno">  379</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  380</span>        casterGUID = caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>();</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>    <span class="comment">// check if aura can be owned by owner</span></div>
<div class="line"><span class="lineno">  383</span>    <span class="keywordflow">if</span> (owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a5f4cb5fb092b0178b1bd59a850d79de5">IsUnit</a>())</div>
<div class="line"><span class="lineno">  384</span>        <span class="keywordflow">if</span> (!owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a3aeab7def818ba6c50249f197ad2f9ca">IsInWorld</a>() || ((<a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>*)owner)-&gt;IsDuringRemoveFromWorld())</div>
<div class="line"><span class="lineno">  385</span>            <span class="comment">// owner not in world so don&#39;t allow to own not self casted single target auras</span></div>
<div class="line"><span class="lineno">  386</span>            <span class="keywordflow">if</span> (casterGUID != owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>() &amp;&amp; spellproto-&gt;IsSingleTarget())</div>
<div class="line"><span class="lineno">  387</span>                <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>    <a class="code hl_class" href="../../d3/d9a/a10802.html">Aura</a>* aura = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  390</span>    <span class="keywordflow">switch</span> (owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a621a345fc34deed6d3a4e1e498a652da">GetTypeId</a>())</div>
<div class="line"><span class="lineno">  391</span>    {</div>
<div class="line"><span class="lineno">  392</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d7/db0/a03467.html#a183c40b2ba67065929d70b3987da4cc2a93dfa528ffc48db4993fb7ac62696db9">TYPEID_UNIT</a>:</div>
<div class="line"><span class="lineno">  393</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d7/db0/a03467.html#a183c40b2ba67065929d70b3987da4cc2aca37d750899c40a5743285ccda2bba9c">TYPEID_PLAYER</a>:</div>
<div class="line"><span class="lineno">  394</span>            aura = <span class="keyword">new</span> <a class="code hl_class" href="../../d5/db1/a10806.html">UnitAura</a>(spellproto, effMask, owner, caster, baseAmount, castItem, casterGUID, itemGUID);</div>
<div class="line"><span class="lineno">  395</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  396</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d7/db0/a03467.html#a183c40b2ba67065929d70b3987da4cc2a86e2d54e816ea646c9cda372df01dc68">TYPEID_DYNAMICOBJECT</a>:</div>
<div class="line"><span class="lineno">  397</span>            aura = <span class="keyword">new</span> <a class="code hl_class" href="../../d9/d7c/a10810.html">DynObjAura</a>(spellproto, effMask, owner, caster, baseAmount, castItem, casterGUID, itemGUID);</div>
<div class="line"><span class="lineno">  398</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  399</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  400</span>            <a class="code hl_define" href="../../da/d45/a00011.html#a5376571bbf4cdc9782683635f366f89a">ABORT</a>();</div>
<div class="line"><span class="lineno">  401</span>            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  402</span>    }</div>
<div class="line"><span class="lineno">  403</span>    <span class="comment">// aura can be removed in Unit::_AddAura call</span></div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">if</span> (aura-&gt;<a class="code hl_function" href="../../d3/d9a/a10802.html#a462457cadd52ba8a0edd5609c71ebbc0">IsRemoved</a>())</div>
<div class="line"><span class="lineno">  405</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  406</span>    <span class="keywordflow">return</span> aura;</div>
<div class="line"><span class="lineno">  407</span>}</div>
<div class="ttc" id="aa02750_html_a3ac65d8635b4379f0d5b75a0e2dfd9c8"><div class="ttname"><a href="../../d7/d14/a02750.html#a3ac65d8635b4379f0d5b75a0e2dfd9c8">MAX_EFFECT_MASK</a></div><div class="ttdeci">#define MAX_EFFECT_MASK</div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1637</div></div>
<div class="ttc" id="aa04735_html_a02c2dfb59db7d7e2501dcc9a4f9baf07"><div class="ttname"><a href="../../d9/d06/a04735.html#a02c2dfb59db7d7e2501dcc9a4f9baf07">ObjectAccessor::GetUnit</a></div><div class="ttdeci">Unit * GetUnit(WorldObject const &amp;, ObjectGuid const guid)</div><div class="ttdef"><b>Definition:</b> ObjectAccessor.cpp:199</div></div>
<div class="ttc" id="aa08150_html_a5f4cb5fb092b0178b1bd59a850d79de5"><div class="ttname"><a href="../../d6/d80/a08150.html#a5f4cb5fb092b0178b1bd59a850d79de5">Object::IsUnit</a></div><div class="ttdeci">bool IsUnit() const</div><div class="ttdef"><b>Definition:</b> Object.h:205</div></div>
<div class="ttc" id="aa10802_html"><div class="ttname"><a href="../../d3/d9a/a10802.html">Aura</a></div><div class="ttdef"><b>Definition:</b> SpellAuras.h:87</div></div>
<div class="ttc" id="aa10802_html_a462457cadd52ba8a0edd5609c71ebbc0"><div class="ttname"><a href="../../d3/d9a/a10802.html#a462457cadd52ba8a0edd5609c71ebbc0">Aura::IsRemoved</a></div><div class="ttdeci">bool IsRemoved() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:161</div></div>
<div class="ttc" id="aa10806_html"><div class="ttname"><a href="../../d5/db1/a10806.html">UnitAura</a></div><div class="ttdef"><b>Definition:</b> SpellAuras.h:279</div></div>
<div class="ttc" id="aa10810_html"><div class="ttname"><a href="../../d9/d7c/a10810.html">DynObjAura</a></div><div class="ttdef"><b>Definition:</b> SpellAuras.h:302</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00076">ABORT</a>, <a class="el" href="../../#l00069">ASSERT_NODEBUGINFO</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00124">Object::GetTypeId()</a>, <a class="el" href="../../#l00199">ObjectAccessor::GetUnit()</a>, <a class="el" href="../../#l00104">Object::IsInWorld()</a>, <a class="el" href="../../#l00161">IsRemoved()</a>, <a class="el" href="../../#l01374">SpellInfo::IsSingleTarget()</a>, <a class="el" href="../../#l00205">Object::IsUnit()</a>, <a class="el" href="../../#l01637">MAX_EFFECT_MASK</a>, <a class="el" href="../../#l00206">Object::ToUnit()</a>, <a class="el" href="../../#l00038">TYPEID_DYNAMICOBJECT</a>, <a class="el" href="../../#l00036">TYPEID_PLAYER</a>, and <a class="el" href="../../#l00035">TYPEID_UNIT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00352">TryCreate()</a>, and <a class="el" href="../../#l00326">TryRefreshStackOrCreate()</a>.</p>

</div>
</div>
<a id="af9803e108cc68b115fec9043b03f1118" name="af9803e108cc68b115fec9043b03f1118"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9803e108cc68b115fec9043b03f1118">&#9670;&#160;</a></span>DropCharge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::DropCharge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a>&#160;</td>
          <td class="paramname"><em>removeMode</em> = <code><a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  146</span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#a52fbcc7d7f48d46bed2873889640e6d3">ModCharges</a>(-1, removeMode); }</div>
<div class="ttc" id="aa10802_html_a52fbcc7d7f48d46bed2873889640e6d3"><div class="ttname"><a href="../../d3/d9a/a10802.html#a52fbcc7d7f48d46bed2873889640e6d3">Aura::ModCharges</a></div><div class="ttdeci">bool ModCharges(int32 num, AuraRemoveMode removeMode=AURA_REMOVE_BY_DEFAULT)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:973</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00973">ModCharges()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01120">AuraScript::DropCharge()</a>, and <a class="el" href="../../#l10019">Player::RemoveSpellMods()</a>.</p>

</div>
</div>
<a id="a304404f284fba0b6d8dc046140e309ae" name="a304404f284fba0b6d8dc046140e309ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a304404f284fba0b6d8dc046140e309ae">&#9670;&#160;</a></span>FillTargetMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Aura::FillTargetMap </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d6/d15/a08526.html">Unit</a> *, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>targets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="../../d5/db1/a10806.html#add5ce04446338e078c5986420abfd16e">UnitAura</a>, and <a class="el" href="../../d9/d7c/a10810.html#af8e36643ed675ff5652e4665bee9b0c3">DynObjAura</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

</div>
</div>
<a id="a66f71f0ac319d34ae8cbe5bc4b4bcfb7" name="a66f71f0ac319d34ae8cbe5bc4b4bcfb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66f71f0ac319d34ae8cbe5bc4b4bcfb7">&#9670;&#160;</a></span>GetApplicationList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::GetApplicationList </td>
          <td>(</td>
          <td class="paramtype">std::list&lt; <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>applicationList</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1250</span>{</div>
<div class="line"><span class="lineno"> 1251</span>    <span class="keywordflow">for</span> (Aura::ApplicationMap::const_iterator appIter = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.begin(); appIter != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.end(); ++appIter)</div>
<div class="line"><span class="lineno"> 1252</span>    {</div>
<div class="line"><span class="lineno"> 1253</span>        <span class="keywordflow">if</span> (appIter-&gt;second-&gt;GetEffectMask())</div>
<div class="line"><span class="lineno"> 1254</span>            applicationList.push_back(appIter-&gt;second);</div>
<div class="line"><span class="lineno"> 1255</span>    }</div>
<div class="line"><span class="lineno"> 1256</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00266">m_applications</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00995">SetStackAmount()</a>.</p>

</div>
</div>
<a id="a1f5268b496e4212bc6e5f887034d04b0" name="a1f5268b496e4212bc6e5f887034d04b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f5268b496e4212bc6e5f887034d04b0">&#9670;&#160;</a></span>GetApplicationMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d9a/a10802.html#af94996c697b3f790489314b6175ab311">ApplicationMap</a> const  &amp; Aura::GetApplicationMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  181</span>{<span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00266">m_applications</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00422">AuraEffect::GetApplicationList()</a>, <a class="el" href="../../#l00411">AuraEffect::GetTargetList()</a>, and <a class="el" href="../../#l05286">Unit::RemoveAreaAurasDueToLeaveWorld()</a>.</p>

</div>
</div>
<a id="ac8b613264a2fe06bb7f39043d6d7af32" name="ac8b613264a2fe06bb7f39043d6d7af32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8b613264a2fe06bb7f39043d6d7af32">&#9670;&#160;</a></span>GetApplicationOfTarget() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> * Aura::GetApplicationOfTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>guid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  184</span>{ ApplicationMap::iterator itr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.find(guid); <span class="keywordflow">if</span> (itr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.end()) <span class="keywordflow">return</span> itr-&gt;second; <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00266">m_applications</a>.</p>

</div>
</div>
<a id="aa5e42f1c32857e82102fd95bb46ec013" name="aa5e42f1c32857e82102fd95bb46ec013"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5e42f1c32857e82102fd95bb46ec013">&#9670;&#160;</a></span>GetApplicationOfTarget() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> * Aura::GetApplicationOfTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>guid</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  183</span>{ ApplicationMap::const_iterator itr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.find(guid); <span class="keywordflow">if</span> (itr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.end()) <span class="keywordflow">return</span> itr-&gt;second; <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00266">m_applications</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04491">Unit::_ApplyAuraEffect()</a>, <a class="el" href="../../#l00735">_ApplyEffectForTargets()</a>, <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../#l04646">Unit::_UnapplyAura()</a>, <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../#l03002">Spell::DoSpellHitOnUnit()</a>, <a class="el" href="../../#l05162">Spell::EffectDispelMechanic()</a>, <a class="el" href="../../#l05591">Spell::EffectStealBeneficialBuff()</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00792">AuraEffect::HandleEffect()</a>, <a class="el" href="../../#l01583">SpellInfo::IsStrongerAuraActive()</a>, <a class="el" href="../../#l04806">Unit::RemoveAura()</a>, <a class="el" href="../../#l05110">Unit::RemoveAurasByType()</a>, <a class="el" href="../../#l16776">Unit::RestoreDisplayId()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

</div>
</div>
<a id="ae88253dbdddede64cf443796dc155852" name="ae88253dbdddede64cf443796dc155852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae88253dbdddede64cf443796dc155852">&#9670;&#160;</a></span>GetApplyTime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">time_t Aura::GetApplyTime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  128</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#a27b0ba184d3b92d5da4a24802f119b03">m_applyTime</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00253">m_applyTime</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l06419">Player::DuelComplete()</a>, <a class="el" href="../../#l01070">AuraScript::GetApplyTime()</a>, and <a class="el" href="../../#l05821">Unit::GetDiseasesByCaster()</a>.</p>

</div>
</div>
<a id="a6fc52109b7711606f15d9880fda8f815" name="a6fc52109b7711606f15d9880fda8f815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fc52109b7711606f15d9880fda8f815">&#9670;&#160;</a></span>GetCaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d15/a08526.html">Unit</a> * Aura::GetCaster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  472</span>{</div>
<div class="line"><span class="lineno">  473</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;GetGUID() == <a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>())</div>
<div class="line"><span class="lineno">  474</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#a25ce9277dfb99c46f2f0136e4aa5ab7c">GetUnitOwner</a>();</div>
<div class="line"><span class="lineno">  475</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d4/d87/a10798.html">AuraApplication</a> <span class="keyword">const</span>* aurApp = <a class="code hl_function" href="../../d3/d9a/a10802.html#aa5e42f1c32857e82102fd95bb46ec013">GetApplicationOfTarget</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>()))</div>
<div class="line"><span class="lineno">  476</span>        <span class="keywordflow">return</span> aurApp-&gt;GetTarget();</div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d9/d06/a04735.html#a02c2dfb59db7d7e2501dcc9a4f9baf07">ObjectAccessor::GetUnit</a>(*<a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>(), <a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno">  479</span>}</div>
<div class="ttc" id="aa10802_html_a25ce9277dfb99c46f2f0136e4aa5ab7c"><div class="ttname"><a href="../../d3/d9a/a10802.html#a25ce9277dfb99c46f2f0136e4aa5ab7c">Aura::GetUnitOwner</a></div><div class="ttdeci">Unit * GetUnitOwner() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:108</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00183">GetApplicationOfTarget()</a>, <a class="el" href="../../#l00105">GetCasterGUID()</a>, <a class="el" href="../../#l00107">GetOwner()</a>, <a class="el" href="../../#l00199">ObjectAccessor::GetUnit()</a>, and <a class="el" href="../../#l00108">GetUnitOwner()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04505">Unit::_ApplyAura()</a>, <a class="el" href="../../#l04453">Unit::_CreateAuraApplication()</a>, <a class="el" href="../../#l00121">_RegisterForTargets()</a>, <a class="el" href="../../#l04551">Unit::_UnapplyAura()</a>, <a class="el" href="../../#l00122">ApplyForTargets()</a>, <a class="el" href="../../#l01182">CalcDispelChance()</a>, <a class="el" href="../../#l00144">CalcMaxCharges()</a>, <a class="el" href="../../#l00131">CalcMaxDuration()</a>, <a class="el" href="../../#l02311">CalcProcChance()</a>, <a class="el" href="../../#l02887">DynObjAura::FillTargetMap()</a>, <a class="el" href="../../#l00047">AuraEffect::GetCaster()</a>, <a class="el" href="../../#l01020">AuraScript::GetCaster()</a>, <a class="el" href="../../#l05409">AuraEffect::HandleAuraDummy()</a>, <a class="el" href="../../#l08739">Unit::HandleAuraProc()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l08934">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../#l01232">RecalculateAmountOfEffects()</a>, <a class="el" href="../../#l00880">RefreshDuration()</a>, <a class="el" href="../../#l00909">RefreshTimers()</a>, <a class="el" href="../../#l00931">RefreshTimersWithMods()</a>, <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>, <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>, <a class="el" href="../../#l00868">SetDuration()</a>, <a class="el" href="../../#l01203">SetLoadedState()</a>, <a class="el" href="../../#l00995">SetStackAmount()</a>, <a class="el" href="../../#l01167">UnregisterSingleTarget()</a>, and <a class="el" href="../../#l00756">UpdateOwner()</a>.</p>

</div>
</div>
<a id="a3c4dfe75dad16fbf2afaf23ce77e4262" name="a3c4dfe75dad16fbf2afaf23ce77e4262"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c4dfe75dad16fbf2afaf23ce77e4262">&#9670;&#160;</a></span>GetCasterGUID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> Aura::GetCasterGUID </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  105</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#ac031b57268ab2f7c4346ef3dbfea2af0">m_casterGuid</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00250">m_casterGuid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04414">Unit::_AddAura()</a>, <a class="el" href="../../#l00124">AuraApplication::_InitFlags()</a>, <a class="el" href="../../#l04551">Unit::_UnapplyAura()</a>, <a class="el" href="../../#l00799">AuraEffect::ApplySpellMod()</a>, <a class="el" href="../../#l00248">AuraApplication::BuildUpdatePacket()</a>, <a class="el" href="../../#l01970">CanBeAppliedOn()</a>, <a class="el" href="../../#l01097">CanBeSaved()</a>, <a class="el" href="../../#l02021">CanStackWith()</a>, <a class="el" href="../../#l05462">Unit::DelayOwnedAuras()</a>, <a class="el" href="../../#l06419">Player::DuelComplete()</a>, <a class="el" href="../../#l05162">Spell::EffectDispelMechanic()</a>, <a class="el" href="../../#l05562">Unit::GetAuraApplication()</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00048">AuraEffect::GetCasterGUID()</a>, <a class="el" href="../../#l01015">AuraScript::GetCasterGUID()</a>, <a class="el" href="../../#l02752">GetDebugInfo()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l04118">spell_item_luffa::HandleEffect()</a>, <a class="el" href="../../#l00226">ArenaSpectator::HandleResetCommand()</a>, <a class="el" href="../../#l00442">spell_hun_chimera_shot::HandleScriptEffect()</a>, <a class="el" href="../../#l05781">Unit::HasNegativeAuraWithAttribute()</a>, <a class="el" href="../../#l01092">IsRemovedOnShapeLost()</a>, <a class="el" href="../../#l00452">list_commandscript::ListAurasCommand()</a>, <a class="el" href="../../#l04789">Unit::RemoveAura()</a>, <a class="el" href="../../#l04925">Unit::RemoveAuraFromStack()</a>, <a class="el" href="../../#l05110">Unit::RemoveAurasByType()</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>, <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>, <a class="el" href="../../#l05216">Unit::RemoveAurasWithFamily()</a>, <a class="el" href="../../#l12587">Player::RemoveItemDependentAurasAndCasts()</a>, <a class="el" href="../../#l05145">Unit::RemoveNotOwnSingleTargetAuras()</a>, and <a class="el" href="../../#l00282">ArenaSpectator::ShouldSendAura()</a>.</p>

</div>
</div>
<a id="a4ef16baec1bec4d7c5e1db67ce392035" name="a4ef16baec1bec4d7c5e1db67ce392035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ef16baec1bec4d7c5e1db67ce392035">&#9670;&#160;</a></span>GetCasterLevel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> Aura::GetCasterLevel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  154</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#ac53ebfd796f09dd49bf93877b4edb615">m_casterLevel</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00261">m_casterLevel</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00248">AuraApplication::BuildUpdatePacket()</a>, <a class="el" href="../../#l04100">spell_item_luffa::CheckCast()</a>, and <a class="el" href="../../#l04118">spell_item_luffa::HandleEffect()</a>.</p>

</div>
</div>
<a id="a90bc220f5ffcca4efa900c1905782355" name="a90bc220f5ffcca4efa900c1905782355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90bc220f5ffcca4efa900c1905782355">&#9670;&#160;</a></span>GetCastItemEntry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> Aura::GetCastItemEntry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  104</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#a47c4549c9990b34a2728c6795de64af6">m_castItemEntry</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00252">m_castItemEntry</a>.</p>

</div>
</div>
<a id="ab5641e8e175470f121e2c6eda7dfb253" name="ab5641e8e175470f121e2c6eda7dfb253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5641e8e175470f121e2c6eda7dfb253">&#9670;&#160;</a></span>GetCastItemGUID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> Aura::GetCastItemGUID </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  103</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#a742caadbfa7658d6957bf73eda7c624a">m_castItemGuid</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00251">m_castItemGuid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l15076">Player::ActivateSpec()</a>, <a class="el" href="../../#l02021">CanStackWith()</a>, <a class="el" href="../../#l05562">Unit::GetAuraApplication()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l09861">Unit::HandleOverrideClassScriptAuraProc()</a>, <a class="el" href="../../#l06878">AuraEffect::HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l08934">Unit::HandleProcTriggerSpell()</a>, and <a class="el" href="../../#l01737">SpellInfo::ValidateAttribute6SpellDamageMods()</a>.</p>

</div>
</div>
<a id="ab07705be94c0c10fce558c80d7208e0b" name="ab07705be94c0c10fce558c80d7208e0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab07705be94c0c10fce558c80d7208e0b">&#9670;&#160;</a></span>GetCharges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> Aura::GetCharges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  141</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00262">m_procCharges</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00248">AuraApplication::BuildUpdatePacket()</a>, <a class="el" href="../../#l00684">AuraEffect::CalculateSpellMod()</a>, <a class="el" href="../../#l01097">CanBeSaved()</a>, <a class="el" href="../../#l05591">Spell::EffectStealBeneficialBuff()</a>, <a class="el" href="../../#l01100">AuraScript::GetCharges()</a>, <a class="el" href="../../#l05605">Unit::GetDispellableAuraList()</a>, <a class="el" href="../../#l08739">Unit::HandleAuraProc()</a>, <a class="el" href="../../#l17652">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../#l17563">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l07272">AuraEffect::HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../#l07320">AuraEffect::HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../#l00226">ArenaSpectator::HandleResetCommand()</a>, <a class="el" href="../../#l02227">IsProcTriggeredOnEvent()</a>, <a class="el" href="../../#l00452">list_commandscript::ListAurasCommand()</a>, <a class="el" href="../../#l01021">ModStackAmount()</a>, <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>, <a class="el" href="../../#l09945">Player::RestoreSpellMods()</a>, and <a class="el" href="../../#l02331">TriggerProcOnEvent()</a>.</p>

</div>
</div>
<a id="a184dae26b21f0c106cd2ccf2db67c452" name="a184dae26b21f0c106cd2ccf2db67c452"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a184dae26b21f0c106cd2ccf2db67c452">&#9670;&#160;</a></span>GetDebugInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Aura::GetDebugInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2753</span>{</div>
<div class="line"><span class="lineno"> 2754</span>    std::stringstream sstr;</div>
<div class="line"><span class="lineno"> 2755</span>    sstr &lt;&lt; std::boolalpha</div>
<div class="line"><span class="lineno"> 2756</span>        &lt;&lt; <span class="stringliteral">&quot;Id: &quot;</span> &lt;&lt; <a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>() &lt;&lt; <span class="stringliteral">&quot; Caster: &quot;</span> &lt;&lt; <a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>().<a class="code hl_function" href="../../d9/d08/a08198.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>()</div>
<div class="line"><span class="lineno"> 2757</span>        &lt;&lt; <span class="stringliteral">&quot;\nOwner: &quot;</span> &lt;&lt; (<a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>() ? <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;<a class="code hl_function" href="../../db/df3/a08182.html#a4a495dba05e29028f7967ccc08560870">GetDebugInfo</a>() : <span class="stringliteral">&quot;NULL&quot;</span>);</div>
<div class="line"><span class="lineno"> 2758</span>    <span class="keywordflow">return</span> sstr.str();</div>
<div class="line"><span class="lineno"> 2759</span>}</div>
<div class="ttc" id="aa08182_html_a4a495dba05e29028f7967ccc08560870"><div class="ttname"><a href="../../db/df3/a08182.html#a4a495dba05e29028f7967ccc08560870">WorldObject::GetDebugInfo</a></div><div class="ttdeci">std::string GetDebugInfo() const override</div><div class="ttdef"><b>Definition:</b> Object.cpp:2484</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00105">GetCasterGUID()</a>, <a class="el" href="../../#l02484">WorldObject::GetDebugInfo()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l00107">GetOwner()</a>, and <a class="el" href="../../#l00047">ObjectGuid::ToString()</a>.</p>

</div>
</div>
<a id="a5e79eaa33b5f9ae5aaa44a62d096d6fe" name="a5e79eaa33b5f9ae5aaa44a62d096d6fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e79eaa33b5f9ae5aaa44a62d096d6fe">&#9670;&#160;</a></span>GetDuration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> Aura::GetDuration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  133</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#a406738b04948572a30626082ebe7a0e0">m_duration</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00257">m_duration</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00460">Battleground::_ProcessJoin()</a>, <a class="el" href="../../#l01687">Pet::_SaveAuras()</a>, <a class="el" href="../../#l07182">Player::_SaveAuras()</a>, <a class="el" href="../../#l00248">AuraApplication::BuildUpdatePacket()</a>, <a class="el" href="../../#l00593">AuraEffect::CalculatePeriodic()</a>, <a class="el" href="../../#l05462">Unit::DelayOwnedAuras()</a>, <a class="el" href="../../#l03268">Spell::DoTriggersOnSpellHit()</a>, <a class="el" href="../../#l01472">Spell::EffectHeal()</a>, <a class="el" href="../../#l05821">Unit::GetDiseasesByCaster()</a>, <a class="el" href="../../#l00195">DynamicObject::GetDuration()</a>, <a class="el" href="../../#l01055">AuraScript::GetDuration()</a>, <a class="el" href="../../#l00098">deserter_commandscript::HandleDeserterAdd()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l00226">ArenaSpectator::HandleResetCommand()</a>, <a class="el" href="../../#l00499">spell_dru_glyph_of_starfire::HandleScriptEffect()</a>, <a class="el" href="../../#l01992">IsAuraStronger()</a>, <a class="el" href="../../#l00138">IsExpired()</a>, <a class="el" href="../../#l00452">list_commandscript::ListAurasCommand()</a>, <a class="el" href="../../#l00569">npc_air_force_bots::npc_air_force_botsAI::MoveInLineOfSight()</a>, <a class="el" href="../../#l01615">Player::ProcessDelayedOperations()</a>, <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>, <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>, <a class="el" href="../../#l00091">boss_anomalus::SetData()</a>, and <a class="el" href="../../#l01622">npc_tournament_training_dummy::npc_tournament_training_dummyAI::UpdateAI()</a>.</p>

</div>
</div>
<a id="a34626ddba98ab48275cfa6be44ed8390" name="a34626ddba98ab48275cfa6be44ed8390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34626ddba98ab48275cfa6be44ed8390">&#9670;&#160;</a></span>GetDynobjOwner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d3d/a07926.html">DynamicObject</a> * Aura::GetDynobjOwner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  109</span>{ <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#aaddb94cd3bd95b145a8b8392e9feecca">GetType</a>() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a>); <span class="keywordflow">return</span> (<a class="code hl_class" href="../../dc/d3d/a07926.html">DynamicObject</a>*)<a class="code hl_variable" href="../../d3/d9a/a10802.html#ab415594d025a57ab429a85ab70e598cb">m_owner</a>; }</div>
<div class="ttc" id="aa07926_html"><div class="ttname"><a href="../../dc/d3d/a07926.html">DynamicObject</a></div><div class="ttdef"><b>Definition:</b> DynamicObject.h:35</div></div>
<div class="ttc" id="aa10802_html_aaddb94cd3bd95b145a8b8392e9feecca"><div class="ttname"><a href="../../d3/d9a/a10802.html#aaddb94cd3bd95b145a8b8392e9feecca">Aura::GetType</a></div><div class="ttdeci">AuraObjectType GetType() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:481</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00386">DYNOBJ_AURA_TYPE</a>, <a class="el" href="../../#l00481">GetType()</a>, and <a class="el" href="../../#l00254">m_owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02869">DynObjAura::DynObjAura()</a>, <a class="el" href="../../#l01844">Spell::EffectPersistentAA()</a>, <a class="el" href="../../#l02887">DynObjAura::FillTargetMap()</a>, and <a class="el" href="../../#l01035">AuraScript::GetDynobjOwner()</a>.</p>

</div>
</div>
<a id="a6ee04786fcd54da7e3e2b7a0277adeb8" name="a6ee04786fcd54da7e3e2b7a0277adeb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ee04786fcd54da7e3e2b7a0277adeb8">&#9670;&#160;</a></span>GetEffect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a> * Aura::GetEffect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>effIndex</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  175</span>{ <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a> (effIndex &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>); <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[effIndex]; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00265">m_effects</a>, and <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../#l01687">Pet::_SaveAuras()</a>, <a class="el" href="../../#l07182">Player::_SaveAuras()</a>, <a class="el" href="../../#l00799">AuraEffect::ApplySpellMod()</a>, <a class="el" href="../../#l02021">CanStackWith()</a>, <a class="el" href="../../#l06855">Spell::CheckCasterAuras()</a>, <a class="el" href="../../#l01155">AuraScript::GetEffect()</a>, <a class="el" href="../../#l00221">spell_muru_summon_blood_elves_periodic_aura::HandleApply()</a>, <a class="el" href="../../#l00789">spell_gen_baby_murloc_passive::HandleApply()</a>, <a class="el" href="../../#l08739">Unit::HandleAuraProc()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l00134">spell_optic_link_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00205">spell_warl_improved_demonic_tactics::HandlePeriodic()</a>, <a class="el" href="../../#l00744">spell_warl_seed_of_corruption_aura::HandleProc()</a>, <a class="el" href="../../#l00803">spell_warl_seed_of_corruption_generic_aura::HandleProc()</a>, <a class="el" href="../../#l00442">spell_hun_chimera_shot::HandleScriptEffect()</a>, <a class="el" href="../../#l00173">HasEffect()</a>, <a class="el" href="../../#l01992">IsAuraStronger()</a>, <a class="el" href="../../#l01021">ModStackAmount()</a>, <a class="el" href="../../#l00354">spell_hadronox_summon_periodic_aura::OnApply()</a>, <a class="el" href="../../#l00523">spell_kalecgos_curse_of_boundless_agony_aura::OnPeriodic()</a>, <a class="el" href="../../#l16055">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>, <a class="el" href="../../#l00282">ArenaSpectator::ShouldSendAura()</a>, <a class="el" href="../../#l02331">TriggerProcOnEvent()</a>, and <a class="el" href="../../#l00353">spell_black_temple_shadow_inferno_aura::Update()</a>.</p>

</div>
</div>
<a id="a998a0e0cfd700ef9fed95f969ad9b791" name="a998a0e0cfd700ef9fed95f969ad9b791"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a998a0e0cfd700ef9fed95f969ad9b791">&#9670;&#160;</a></span>GetEffectMask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> Aura::GetEffectMask </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  176</span>{ <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effMask = 0; <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i) <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]) effMask |= 1 &lt;&lt; i; <span class="keywordflow">return</span> effMask; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00265">m_effects</a>, and <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l05562">Unit::GetAuraApplication()</a>, <a class="el" href="../../#l00226">ArenaSpectator::HandleResetCommand()</a>, <a class="el" href="../../#l04789">Unit::RemoveAura()</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, and <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>.</p>

</div>
</div>
<a id="a54447127bfb738f6722d3f6feddfc168" name="a54447127bfb738f6722d3f6feddfc168"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54447127bfb738f6722d3f6feddfc168">&#9670;&#160;</a></span>GetId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> Aura::GetId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  467</span>{</div>
<div class="line"><span class="lineno">  468</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>;</div>
<div class="line"><span class="lineno">  469</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00100">GetSpellInfo()</a>, and <a class="el" href="../../#l00320">SpellInfo::Id</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04414">Unit::_AddAura()</a>, <a class="el" href="../../#l04551">Unit::_UnapplyAura()</a>, <a class="el" href="../../#l15076">Player::ActivateSpec()</a>, <a class="el" href="../../#l00767">WorldSession::BuildPartyMemberStatsChangedPacket()</a>, <a class="el" href="../../#l00248">AuraApplication::BuildUpdatePacket()</a>, <a class="el" href="../../#l01182">CalcDispelChance()</a>, <a class="el" href="../../#l00961">CalcMaxCharges()</a>, <a class="el" href="../../#l00844">CalcMaxDuration()</a>, <a class="el" href="../../#l02311">CalcProcChance()</a>, <a class="el" href="../../#l02021">CanStackWith()</a>, <a class="el" href="../../#l05462">Unit::DelayOwnedAuras()</a>, <a class="el" href="../../#l05162">Spell::EffectDispelMechanic()</a>, <a class="el" href="../../#l02752">GetDebugInfo()</a>, <a class="el" href="../../#l01010">AuraScript::GetId()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l00689">spell_item_powerful_anti_venom::HandleDummy()</a>, <a class="el" href="../../#l00724">spell_item_strong_anti_venom::HandleDummy()</a>, <a class="el" href="../../#l00755">spell_item_anti_venom::HandleDummy()</a>, <a class="el" href="../../#l04118">spell_item_luffa::HandleEffect()</a>, <a class="el" href="../../#l17337">Unit::IsPetAura()</a>, <a class="el" href="../../#l02227">IsProcTriggeredOnEvent()</a>, <a class="el" href="../../#l17424">Unit::IsTriggeredAtSpellProcEvent()</a>, <a class="el" href="../../#l00452">list_commandscript::ListAurasCommand()</a>, <a class="el" href="../../#l00426">boss_high_nethermancer_zerevor::OnAuraRemove()</a>, <a class="el" href="../../#l15849">ProcTriggeredData::operator==()</a>, <a class="el" href="../../#l02206">PrepareProcToTrigger()</a>, <a class="el" href="../../#l04806">Unit::RemoveAura()</a>, <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>, <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>, <a class="el" href="../../#l05181">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../#l05253">Unit::RemoveAurasWithMechanic()</a>, <a class="el" href="../../#l04738">Unit::RemoveOwnedAura()</a>, <a class="el" href="../../#l00868">SetDuration()</a>, <a class="el" href="../../#l01167">UnregisterSingleTarget()</a>, <a class="el" href="../../#l00756">UpdateOwner()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

</div>
</div>
<a id="a14457cfa6d589b8024bbeeb1d4aa03d3" name="a14457cfa6d589b8024bbeeb1d4aa03d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14457cfa6d589b8024bbeeb1d4aa03d3">&#9670;&#160;</a></span>GetMaxDuration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> Aura::GetMaxDuration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  129</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">m_maxDuration</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00256">m_maxDuration</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00248">AuraApplication::BuildUpdatePacket()</a>, <a class="el" href="../../#l03002">Spell::DoSpellHitOnUnit()</a>, <a class="el" href="../../#l05821">Unit::GetDiseasesByCaster()</a>, <a class="el" href="../../#l01075">AuraScript::GetMaxDuration()</a>, <a class="el" href="../../#l07365">AuraEffect::GetTotalTicks()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l00226">ArenaSpectator::HandleResetCommand()</a>, <a class="el" href="../../#l00499">spell_dru_glyph_of_starfire::HandleScriptEffect()</a>, <a class="el" href="../../#l00139">IsPermanent()</a>, <a class="el" href="../../#l00452">list_commandscript::ListAurasCommand()</a>, <a class="el" href="../../#l00880">RefreshDuration()</a>, and <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>.</p>

</div>
</div>
<a id="a5041a8d07612a0ddf3bc2b944e14c9ad" name="a5041a8d07612a0ddf3bc2b944e14c9ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5041a8d07612a0ddf3bc2b944e14c9ad">&#9670;&#160;</a></span>GetOwner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/df3/a08182.html">WorldObject</a> * Aura::GetOwner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  107</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#ab415594d025a57ab429a85ab70e598cb">m_owner</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00254">m_owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00735">_ApplyEffectForTargets()</a>, <a class="el" href="../../#l04453">Unit::_CreateAuraApplication()</a>, <a class="el" href="../../#l04551">Unit::_UnapplyAura()</a>, <a class="el" href="../../#l01970">CanBeAppliedOn()</a>, <a class="el" href="../../#l01097">CanBeSaved()</a>, <a class="el" href="../../#l02021">CanStackWith()</a>, <a class="el" href="../../#l01319">Spell::EffectApplyAreaAura()</a>, <a class="el" href="../../#l01308">Spell::EffectApplyAura()</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l02752">GetDebugInfo()</a>, <a class="el" href="../../#l01025">AuraScript::GetOwner()</a>, <a class="el" href="../../#l04776">Unit::RemoveAura()</a>, <a class="el" href="../../#l04738">Unit::RemoveOwnedAura()</a>, <a class="el" href="../../#l01167">UnregisterSingleTarget()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

</div>
</div>
<a id="ab048dcde17f19db0f48464f9cdea182b" name="ab048dcde17f19db0f48464f9cdea182b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab048dcde17f19db0f48464f9cdea182b">&#9670;&#160;</a></span>GetScriptByName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d74/a11022.html">AuraScript</a> * Aura::GetScriptByName </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>scriptName</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  428</span>{</div>
<div class="line"><span class="lineno">  429</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::const_iterator itr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); itr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end(); ++itr)</div>
<div class="line"><span class="lineno">  430</span>        <span class="keywordflow">if</span> ((*itr)-&gt;_GetScriptName()-&gt;compare(scriptName) == 0)</div>
<div class="line"><span class="lineno">  431</span>            <span class="keywordflow">return</span> *itr;</div>
<div class="line"><span class="lineno">  432</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  433</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00238">m_loadedScripts</a>.</p>

</div>
</div>
<a id="ab4abe60bbc09777bab95a0a0ec66af25" name="ab4abe60bbc09777bab95a0a0ec66af25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4abe60bbc09777bab95a0a0ec66af25">&#9670;&#160;</a></span>GetSpellInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const  * Aura::GetSpellInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  100</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00249">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04414">Unit::_AddAura()</a>, <a class="el" href="../../#l04505">Unit::_ApplyAura()</a>, <a class="el" href="../../#l04453">Unit::_CreateAuraApplication()</a>, <a class="el" href="../../#l00124">AuraApplication::_InitFlags()</a>, <a class="el" href="../../#l01687">Pet::_SaveAuras()</a>, <a class="el" href="../../#l04551">Unit::_UnapplyAura()</a>, <a class="el" href="../../#l00515">_UnapplyForTarget()</a>, <a class="el" href="../../#l09739">Player::ApplySpellMod()</a>, <a class="el" href="../../#l00799">AuraEffect::ApplySpellMod()</a>, <a class="el" href="../../#l00248">AuraApplication::BuildUpdatePacket()</a>, <a class="el" href="../../#l02311">CalcProcChance()</a>, <a class="el" href="../../#l01970">CanBeAppliedOn()</a>, <a class="el" href="../../#l01097">CanBeSaved()</a>, <a class="el" href="../../#l01137">CanBeSentToClient()</a>, <a class="el" href="../../#l02021">CanStackWith()</a>, <a class="el" href="../../#l05724">Player::CheckAreaExploreAndOutdoor()</a>, <a class="el" href="../../#l04100">spell_item_luffa::CheckCast()</a>, <a class="el" href="../../#l06855">Spell::CheckCasterAuras()</a>, <a class="el" href="../../#l03002">Spell::DoSpellHitOnUnit()</a>, <a class="el" href="../../#l05162">Spell::EffectDispelMechanic()</a>, <a class="el" href="../../#l05591">Spell::EffectStealBeneficialBuff()</a>, <a class="el" href="../../#l02800">UnitAura::FillTargetMap()</a>, <a class="el" href="../../#l02887">DynObjAura::FillTargetMap()</a>, <a class="el" href="../../#l05605">Unit::GetDispellableAuraList()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l01005">AuraScript::GetSpellInfo()</a>, <a class="el" href="../../#l05409">AuraEffect::HandleAuraDummy()</a>, <a class="el" href="../../#l08739">Unit::HandleAuraProc()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l00689">spell_item_powerful_anti_venom::HandleDummy()</a>, <a class="el" href="../../#l00724">spell_item_strong_anti_venom::HandleDummy()</a>, <a class="el" href="../../#l00755">spell_item_anti_venom::HandleDummy()</a>, <a class="el" href="../../#l04118">spell_item_luffa::HandleEffect()</a>, <a class="el" href="../../#l00226">ArenaSpectator::HandleResetCommand()</a>, <a class="el" href="../../#l01388">spell_gen_clear_debuffs::HandleScript()</a>, <a class="el" href="../../#l00499">spell_dru_glyph_of_starfire::HandleScriptEffect()</a>, <a class="el" href="../../#l00442">spell_hun_chimera_shot::HandleScriptEffect()</a>, <a class="el" href="../../#l05781">Unit::HasNegativeAuraWithAttribute()</a>, <a class="el" href="../../#l01072">IsArea()</a>, <a class="el" href="../../#l01087">IsDeathPersistent()</a>, <a class="el" href="../../#l01082">IsPassive()</a>, <a class="el" href="../../#l02227">IsProcTriggeredOnEvent()</a>, <a class="el" href="../../#l01142">IsSingleTargetWith()</a>, <a class="el" href="../../#l17424">Unit::IsTriggeredAtSpellProcEvent()</a>, <a class="el" href="../../#l00452">list_commandscript::ListAurasCommand()</a>, <a class="el" href="../../#l04918">Player::LoadFromDB()</a>, <a class="el" href="../../#l05393">Unit::RemoveAllAurasExceptType()</a>, <a class="el" href="../../#l05349">Unit::RemoveAllAurasOnDeath()</a>, <a class="el" href="../../#l05372">Unit::RemoveAllAurasRequiringDeadTarget()</a>, <a class="el" href="../../#l05335">Unit::RemoveArenaAuras()</a>, <a class="el" href="../../#l05270">Unit::RemoveAurasByShapeShift()</a>, <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>, <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>, <a class="el" href="../../#l05216">Unit::RemoveAurasWithFamily()</a>, <a class="el" href="../../#l05181">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../#l05253">Unit::RemoveAurasWithMechanic()</a>, <a class="el" href="../../#l05437">Unit::RemoveEvadeAuras()</a>, <a class="el" href="../../#l12587">Player::RemoveItemDependentAurasAndCasts()</a>, <a class="el" href="../../#l05234">Unit::RemoveMovementImpairingAuras()</a>, <a class="el" href="../../#l10019">Player::RemoveSpellMods()</a>, <a class="el" href="../../#l09945">Player::RestoreSpellMods()</a>, <a class="el" href="../../#l00282">ArenaSpectator::ShouldSendAura()</a>, <a class="el" href="../../#l11284">Unit::SpellPctDamageModsDone()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

</div>
</div>
<a id="aae0b7e0da61a681e67a19b6d23c2cee6" name="aae0b7e0da61a681e67a19b6d23c2cee6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae0b7e0da61a681e67a19b6d23c2cee6">&#9670;&#160;</a></span>GetStackAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> Aura::GetStackAmount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  148</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#a3c01fd7df3476af276831667baa3a0ee">m_stackAmount</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00263">m_stackAmount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00248">AuraApplication::BuildUpdatePacket()</a>, <a class="el" href="../../#l00452">AuraEffect::CalculateAmount()</a>, <a class="el" href="../../#l00323">Spell::EffectSchoolDMG()</a>, <a class="el" href="../../#l05591">Spell::EffectStealBeneficialBuff()</a>, <a class="el" href="../../#l05605">Unit::GetDispellableAuraList()</a>, <a class="el" href="../../#l01125">AuraScript::GetStackAmount()</a>, <a class="el" href="../../#l06053">AuraEffect::HandleAuraLinked()</a>, <a class="el" href="../../#l08739">Unit::HandleAuraProc()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l00838">spell_brewfest_main_ram_buff::HandleEffectPeriodic()</a>, <a class="el" href="../../#l01779">spell_sindragosa_frost_breath::HandleInfusion()</a>, <a class="el" href="../../#l06878">AuraEffect::HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l08934">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../#l00226">ArenaSpectator::HandleResetCommand()</a>, <a class="el" href="../../#l00365">spell_festergut_gastric_bloat::HandleScript()</a>, <a class="el" href="../../#l00614">spell_rotface_large_ooze_combine::HandleScript()</a>, <a class="el" href="../../#l04173">spell_gen_bonked::HandleScript()</a>, <a class="el" href="../../#l00442">spell_hun_chimera_shot::HandleScriptEffect()</a>, <a class="el" href="../../#l01124">spell_pal_seal_of_vengeance::HandleScriptEffect()</a>, <a class="el" href="../../#l00452">list_commandscript::ListAurasCommand()</a>, <a class="el" href="../../#l01021">ModStackAmount()</a>, <a class="el" href="../../#l03126">spell_gen_defend::RefreshVisualShields()</a>, <a class="el" href="../../#l11284">Unit::SpellPctDamageModsDone()</a>, and <a class="el" href="../../#l01622">npc_tournament_training_dummy::npc_tournament_training_dummyAI::UpdateAI()</a>.</p>

</div>
</div>
<a id="af64f07e2756640cb9caf21433bd4e2b6" name="af64f07e2756640cb9caf21433bd4e2b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af64f07e2756640cb9caf21433bd4e2b6">&#9670;&#160;</a></span>GetTriggeredByAuraSpellInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const  * Aura::GetTriggeredByAuraSpellInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2762</span>{</div>
<div class="line"><span class="lineno"> 2763</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#aa4972c4116685b08f25f6a2711c196d3">m_triggeredByAuraSpellInfo</a>;</div>
<div class="line"><span class="lineno"> 2764</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00275">m_triggeredByAuraSpellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l15076">Player::ActivateSpec()</a>, <a class="el" href="../../#l04337">Spell::EffectApplyGlyph()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, and <a class="el" href="../../#l01573">WorldSession::HandleRemoveGlyph()</a>.</p>

</div>
</div>
<a id="aaddb94cd3bd95b145a8b8392e9feecca" name="aaddb94cd3bd95b145a8b8392e9feecca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaddb94cd3bd95b145a8b8392e9feecca">&#9670;&#160;</a></span>GetType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2">AuraObjectType</a> Aura::GetType </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  482</span>{</div>
<div class="line"><span class="lineno">  483</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d3/d9a/a10802.html#ab415594d025a57ab429a85ab70e598cb">m_owner</a>)</div>
<div class="line"><span class="lineno">  484</span>    {</div>
<div class="line"><span class="lineno">  485</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells&quot;</span>, <span class="stringliteral">&quot;Aura::GetType m_owner is null!&quot;</span>);</div>
<div class="line"><span class="lineno">  486</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a>;</div>
<div class="line"><span class="lineno">  487</span>    }</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>    <span class="keywordflow">return</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#ab415594d025a57ab429a85ab70e598cb">m_owner</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ae4c76bc345c6067c152aaf0fb9f91957">IsDynamicObject</a>()) ? <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a> : <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a>;</div>
<div class="line"><span class="lineno">  490</span>}</div>
<div class="ttc" id="aa03092_html_ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379"><div class="ttname"><a href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a></div><div class="ttdeci">@ UNIT_AURA_TYPE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:385</div></div>
<div class="ttc" id="aa08150_html_ae4c76bc345c6067c152aaf0fb9f91957"><div class="ttname"><a href="../../d6/d80/a08150.html#ae4c76bc345c6067c152aaf0fb9f91957">Object::IsDynamicObject</a></div><div class="ttdeci">bool IsDynamicObject() const</div><div class="ttdef"><b>Definition:</b> Object.h:217</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00386">DYNOBJ_AURA_TYPE</a>, <a class="el" href="../../#l00217">Object::IsDynamicObject()</a>, <a class="el" href="../../#l00157">LOG_ERROR</a>, <a class="el" href="../../#l00254">m_owner</a>, and <a class="el" href="../../#l00385">UNIT_AURA_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02021">CanStackWith()</a>, <a class="el" href="../../#l00109">GetDynobjOwner()</a>, <a class="el" href="../../#l01050">AuraScript::GetType()</a>, <a class="el" href="../../#l00108">GetUnitOwner()</a>, <a class="el" href="../../#l06878">AuraEffect::HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l04925">Unit::RemoveAuraFromStack()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

</div>
</div>
<a id="a25ce9277dfb99c46f2f0136e4aa5ab7c" name="a25ce9277dfb99c46f2f0136e4aa5ab7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25ce9277dfb99c46f2f0136e4aa5ab7c">&#9670;&#160;</a></span>GetUnitOwner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d15/a08526.html">Unit</a> * Aura::GetUnitOwner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  108</span>{ <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#aaddb94cd3bd95b145a8b8392e9feecca">GetType</a>() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a>); <span class="keywordflow">return</span> (<a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>*)<a class="code hl_variable" href="../../d3/d9a/a10802.html#ab415594d025a57ab429a85ab70e598cb">m_owner</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00481">GetType()</a>, <a class="el" href="../../#l00254">m_owner</a>, and <a class="el" href="../../#l00385">UNIT_AURA_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02800">UnitAura::FillTargetMap()</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l01030">AuraScript::GetUnitOwner()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l06287">AuraEffect::HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../#l16055">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../#l02793">UnitAura::Remove()</a>, <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>, <a class="el" href="../../#l05145">Unit::RemoveNotOwnSingleTargetAuras()</a>, and <a class="el" href="../../#l02766">UnitAura::UnitAura()</a>.</p>

</div>
</div>
<a id="a03c8f1e4156ac6526e401f2a95ad08e7" name="a03c8f1e4156ac6526e401f2a95ad08e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03c8f1e4156ac6526e401f2a95ad08e7">&#9670;&#160;</a></span>HandleAllEffects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::HandleAllEffects </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1242</span>{</div>
<div class="line"><span class="lineno"> 1243</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a> (!<a class="code hl_function" href="../../d3/d9a/a10802.html#a462457cadd52ba8a0edd5609c71ebbc0">IsRemoved</a>());</div>
<div class="line"><span class="lineno"> 1244</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 1245</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i] &amp;&amp; !<a class="code hl_function" href="../../d3/d9a/a10802.html#a462457cadd52ba8a0edd5609c71ebbc0">IsRemoved</a>())</div>
<div class="line"><span class="lineno"> 1246</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a7710e32fe9dc267292c3b15333521560">HandleEffect</a>(aurApp, mode, apply);</div>
<div class="line"><span class="lineno"> 1247</span>}</div>
<div class="ttc" id="aa10790_html_a7710e32fe9dc267292c3b15333521560"><div class="ttname"><a href="../../de/d50/a10790.html#a7710e32fe9dc267292c3b15333521560">AuraEffect::HandleEffect</a></div><div class="ttdeci">void HandleEffect(AuraApplication *aurApp, uint8 mode, bool apply)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:741</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00741">AuraEffect::HandleEffect()</a>, <a class="el" href="../../#l00161">IsRemoved()</a>, <a class="el" href="../../#l00265">m_effects</a>, and <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l05724">Player::CheckAreaExploreAndOutdoor()</a>, and <a class="el" href="../../#l04918">Player::LoadFromDB()</a>.</p>

</div>
</div>
<a id="ac6a690bd3e87d00af4c6a562b250f6f1" name="ac6a690bd3e87d00af4c6a562b250f6f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6a690bd3e87d00af4c6a562b250f6f1">&#9670;&#160;</a></span>HandleAuraSpecificMods()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::HandleAuraSpecificMods </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>onReapply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000118">Todo:</a></b></dt><dd>: This should be moved to similar function in spell::hit </dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000119">Todo:</a></b></dt><dd>: Not sure whether the fallthrough was a mistake (forgetting a break) or intended. This should be double-checked. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 1266</span>{</div>
<div class="line"><span class="lineno"> 1267</span>    <a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1268</span>    <a class="code hl_enumeration" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a> removeMode = aurApp-&gt;GetRemoveMode();</div>
<div class="line"><span class="lineno"> 1269</span>    <span class="comment">// handle spell_area table</span></div>
<div class="line"><span class="lineno"> 1270</span>    <a class="code hl_typedef" href="../../df/d64/a03110.html#a69bbd3906e9d334176d6a0ffde617490">SpellAreaForAreaMapBounds</a> saBounds = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellAreaForAuraMapBounds(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>());</div>
<div class="line"><span class="lineno"> 1271</span>    <span class="keywordflow">if</span> (saBounds.first != saBounds.second)</div>
<div class="line"><span class="lineno"> 1272</span>    {</div>
<div class="line"><span class="lineno"> 1273</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> zone, area;</div>
<div class="line"><span class="lineno"> 1274</span>        target-&gt;<a class="code hl_function" href="../../db/df3/a08182.html#ae1a8efe701e885f0ed1eaeb93bbece8e">GetZoneAndAreaId</a>(zone, area);</div>
<div class="line"><span class="lineno"> 1275</span> </div>
<div class="line"><span class="lineno"> 1276</span>        <span class="keywordflow">for</span> (SpellAreaForAreaMap::const_iterator itr = saBounds.first; itr != saBounds.second; ++itr)</div>
<div class="line"><span class="lineno"> 1277</span>        {</div>
<div class="line"><span class="lineno"> 1278</span>            <span class="comment">// some auras remove at aura remove</span></div>
<div class="line"><span class="lineno"> 1279</span>            <span class="keywordflow">if</span> (!itr-&gt;second-&gt;IsFitToRequirements(target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>(), zone, area) &amp;&amp; !apply)</div>
<div class="line"><span class="lineno"> 1280</span>                target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(itr-&gt;second-&gt;spellId);</div>
<div class="line"><span class="lineno"> 1281</span>            <span class="comment">// some auras applied at aura apply</span></div>
<div class="line"><span class="lineno"> 1282</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (itr-&gt;second-&gt;autocast)</div>
<div class="line"><span class="lineno"> 1283</span>            {</div>
<div class="line"><span class="lineno"> 1284</span>                <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(itr-&gt;second-&gt;spellId))</div>
<div class="line"><span class="lineno"> 1285</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, itr-&gt;second-&gt;spellId, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1286</span>            }</div>
<div class="line"><span class="lineno"> 1287</span>        }</div>
<div class="line"><span class="lineno"> 1288</span>    }</div>
<div class="line"><span class="lineno"> 1289</span> </div>
<div class="line"><span class="lineno"> 1290</span>    <span class="comment">// handle spell_linked_spell table</span></div>
<div class="line"><span class="lineno"> 1291</span>    <span class="keywordflow">if</span> (!onReapply)</div>
<div class="line"><span class="lineno"> 1292</span>    {</div>
<div class="line"><span class="lineno"> 1293</span>        <span class="comment">// apply linked auras</span></div>
<div class="line"><span class="lineno"> 1294</span>        <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1295</span>        {</div>
<div class="line"><span class="lineno"> 1296</span>            <span class="keywordflow">if</span> (std::vector&lt;int32&gt; <span class="keyword">const</span>* spellTriggered = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellLinked(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>() + <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ab05dedebdd8cfd6f2028ccc48bd240ddaa3391be8356e56c204b6a35987068fb0">SPELL_LINK_AURA</a>))</div>
<div class="line"><span class="lineno"> 1297</span>            {</div>
<div class="line"><span class="lineno"> 1298</span>                <span class="keywordflow">for</span> (std::vector&lt;int32&gt;::const_iterator itr = spellTriggered-&gt;begin(); itr != spellTriggered-&gt;end(); ++itr)</div>
<div class="line"><span class="lineno"> 1299</span>                {</div>
<div class="line"><span class="lineno"> 1300</span>                    <span class="keywordflow">if</span> (*itr &lt; 0)</div>
<div class="line"><span class="lineno"> 1301</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a981326220afec59126417e02e0b882de">IMMUNITY_ID</a>, -(*itr), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1302</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 1303</span>                        caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a51d433dde350cd94d7c3c43e30ca997f">AddAura</a>(*itr, target);</div>
<div class="line"><span class="lineno"> 1304</span>                }</div>
<div class="line"><span class="lineno"> 1305</span>            }</div>
<div class="line"><span class="lineno"> 1306</span>        }</div>
<div class="line"><span class="lineno"> 1307</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1308</span>        {</div>
<div class="line"><span class="lineno"> 1309</span>            <span class="comment">// remove linked auras</span></div>
<div class="line"><span class="lineno"> 1310</span>            <span class="keywordflow">if</span> (std::vector&lt;int32&gt; <span class="keyword">const</span>* spellTriggered = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellLinked(-(<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>()))</div>
<div class="line"><span class="lineno"> 1311</span>            {</div>
<div class="line"><span class="lineno"> 1312</span>                <span class="keywordflow">for</span> (std::vector&lt;int32&gt;::const_iterator itr = spellTriggered-&gt;begin(); itr != spellTriggered-&gt;end(); ++itr)</div>
<div class="line"><span class="lineno"> 1313</span>                {</div>
<div class="line"><span class="lineno"> 1314</span>                    <span class="keywordflow">if</span> (*itr &lt; 0)</div>
<div class="line"><span class="lineno"> 1315</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(-(*itr));</div>
<div class="line"><span class="lineno"> 1316</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (removeMode != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea8b8b753a1458a21a162528088acee913">AURA_REMOVE_BY_DEATH</a>)</div>
<div class="line"><span class="lineno"> 1317</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, *itr, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno"> 1318</span>                }</div>
<div class="line"><span class="lineno"> 1319</span>            }</div>
<div class="line"><span class="lineno"> 1320</span>            <span class="keywordflow">if</span> (std::vector&lt;int32&gt; <span class="keyword">const</span>* spellTriggered = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellLinked(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>() + <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ab05dedebdd8cfd6f2028ccc48bd240ddaa3391be8356e56c204b6a35987068fb0">SPELL_LINK_AURA</a>))</div>
<div class="line"><span class="lineno"> 1321</span>            {</div>
<div class="line"><span class="lineno"> 1322</span>                <span class="keywordflow">for</span> (std::vector&lt;int32&gt;::const_iterator itr = spellTriggered-&gt;begin(); itr != spellTriggered-&gt;end(); ++itr)</div>
<div class="line"><span class="lineno"> 1323</span>                {</div>
<div class="line"><span class="lineno"> 1324</span>                    <span class="keywordflow">if</span> (*itr &lt; 0)</div>
<div class="line"><span class="lineno"> 1325</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a981326220afec59126417e02e0b882de">IMMUNITY_ID</a>, -(*itr), <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1326</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1327</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(*itr, <a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>(), 0, removeMode);</div>
<div class="line"><span class="lineno"> 1328</span>                }</div>
<div class="line"><span class="lineno"> 1329</span>            }</div>
<div class="line"><span class="lineno"> 1330</span>        }</div>
<div class="line"><span class="lineno"> 1331</span>    }</div>
<div class="line"><span class="lineno"> 1332</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1333</span>    {</div>
<div class="line"><span class="lineno"> 1334</span>        <span class="comment">// modify stack amount of linked auras</span></div>
<div class="line"><span class="lineno"> 1335</span>        <span class="keywordflow">if</span> (std::vector&lt;int32&gt; <span class="keyword">const</span>* spellTriggered = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellLinked(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>() + <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ab05dedebdd8cfd6f2028ccc48bd240ddaa3391be8356e56c204b6a35987068fb0">SPELL_LINK_AURA</a>))</div>
<div class="line"><span class="lineno"> 1336</span>        {</div>
<div class="line"><span class="lineno"> 1337</span>            <span class="keywordflow">for</span> (std::vector&lt;int32&gt;::const_iterator itr = spellTriggered-&gt;begin(); itr != spellTriggered-&gt;end(); ++itr)</div>
<div class="line"><span class="lineno"> 1338</span>                <span class="keywordflow">if</span> (*itr &gt; 0)</div>
<div class="line"><span class="lineno"> 1339</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d3/d9a/a10802.html">Aura</a>* triggeredAura = target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a135e4d345c338da83450a60528f71222">GetAura</a>(*itr, <a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>()))</div>
<div class="line"><span class="lineno"> 1340</span>                        triggeredAura-&gt;ModStackAmount(<a class="code hl_function" href="../../d3/d9a/a10802.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>() - triggeredAura-&gt;GetStackAmount());</div>
<div class="line"><span class="lineno"> 1341</span>        }</div>
<div class="line"><span class="lineno"> 1342</span>    }</div>
<div class="line"><span class="lineno"> 1343</span> </div>
<div class="line"><span class="lineno"> 1344</span>    <span class="comment">// mods at aura apply</span></div>
<div class="line"><span class="lineno"> 1345</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1346</span>    {</div>
<div class="line"><span class="lineno"> 1347</span>        <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyName)</div>
<div class="line"><span class="lineno"> 1348</span>        {</div>
<div class="line"><span class="lineno"> 1349</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>:</div>
<div class="line"><span class="lineno"> 1350</span>                <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>())</div>
<div class="line"><span class="lineno"> 1351</span>                {</div>
<div class="line"><span class="lineno"> 1352</span>                    <span class="keywordflow">case</span> 32474: <span class="comment">// Buffeting Winds of Susurrus</span></div>
<div class="line"><span class="lineno"> 1353</span>                        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 1354</span>                            target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a582a0cd15b37f0b0302e6f758e299e2c">ActivateTaxiPathTo</a>(506, <a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>());</div>
<div class="line"><span class="lineno"> 1355</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1356</span>                    <span class="keywordflow">case</span> 33572: <span class="comment">// Gronn Lord&#39;s Grasp, becomes stoned</span></div>
<div class="line"><span class="lineno"> 1357</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>() &gt;= 5 &amp;&amp; !target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(33652))</div>
<div class="line"><span class="lineno"> 1358</span>                            target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 33652, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1359</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1360</span>                    <span class="keywordflow">case</span> 50836: <span class="comment">//Petrifying Grip, becomes stoned</span></div>
<div class="line"><span class="lineno"> 1361</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>() &gt;= 5 &amp;&amp; !target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(50812))</div>
<div class="line"><span class="lineno"> 1362</span>                            target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 50812, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1363</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1364</span>                    <span class="keywordflow">case</span> 60970: <span class="comment">// Heroic Fury (remove Intercept cooldown)</span></div>
<div class="line"><span class="lineno"> 1365</span>                        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 1366</span>                            target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#ad52044947ef0aa2325b2688075bac34d">RemoveSpellCooldown</a>(20252, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1367</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1368</span>                }</div>
<div class="line"><span class="lineno"> 1369</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1370</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a>:</div>
<div class="line"><span class="lineno"> 1371</span>                <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 1372</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1373</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x00000001 &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[2] &amp; 0x00000008)</div>
<div class="line"><span class="lineno"> 1374</span>                {</div>
<div class="line"><span class="lineno"> 1375</span>                    <span class="comment">// Glyph of Fireball</span></div>
<div class="line"><span class="lineno"> 1376</span>                    <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(56368))</div>
<div class="line"><span class="lineno"> 1377</span>                        <a class="code hl_function" href="../../d3/d9a/a10802.html#a99930c42ad9f6e002ffe6de5e5fbe59b">SetDuration</a>(0);</div>
<div class="line"><span class="lineno"> 1378</span>                }</div>
<div class="line"><span class="lineno"> 1379</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x00000020 &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellVisual[0] == 13)</div>
<div class="line"><span class="lineno"> 1380</span>                {</div>
<div class="line"><span class="lineno"> 1381</span>                    <span class="comment">// Glyph of Frostbolt</span></div>
<div class="line"><span class="lineno"> 1382</span>                    <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(56370))</div>
<div class="line"><span class="lineno"> 1383</span>                        <a class="code hl_function" href="../../d3/d9a/a10802.html#a99930c42ad9f6e002ffe6de5e5fbe59b">SetDuration</a>(0);</div>
<div class="line"><span class="lineno"> 1384</span>                }</div>
<div class="line"><span class="lineno"> 1386</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x01000000)</div>
<div class="line"><span class="lineno"> 1387</span>                {</div>
<div class="line"><span class="lineno"> 1388</span>                    <span class="comment">// Polymorph Sound - Sheep &amp;&amp; Penguin</span></div>
<div class="line"><span class="lineno"> 1389</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellIconID == 82 &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellVisual[0] == 12978)</div>
<div class="line"><span class="lineno"> 1390</span>                    {</div>
<div class="line"><span class="lineno"> 1391</span>                        <span class="comment">// Glyph of the Penguin</span></div>
<div class="line"><span class="lineno"> 1392</span>                        <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(52648))</div>
<div class="line"><span class="lineno"> 1393</span>                            caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 61635, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1394</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1395</span>                            caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 61634, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1396</span>                    }</div>
<div class="line"><span class="lineno"> 1397</span> </div>
<div class="line"><span class="lineno"> 1398</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../df/d49/a07778.html">Creature</a>* creatureTarget = target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>())</div>
<div class="line"><span class="lineno"> 1399</span>                    {</div>
<div class="line"><span class="lineno"> 1400</span>                        creatureTarget-&gt;CallAssistance(caster);</div>
<div class="line"><span class="lineno"> 1401</span>                    }</div>
<div class="line"><span class="lineno"> 1402</span>                }</div>
<div class="line"><span class="lineno"> 1403</span>                <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>())</div>
<div class="line"><span class="lineno"> 1404</span>                {</div>
<div class="line"><span class="lineno"> 1405</span>                    <span class="keywordflow">case</span> 12536: <span class="comment">// Clearcasting</span></div>
<div class="line"><span class="lineno"> 1406</span>                    <span class="keywordflow">case</span> 12043: <span class="comment">// Presence of Mind</span></div>
<div class="line"><span class="lineno"> 1407</span>                        <span class="comment">// Arcane Potency</span></div>
<div class="line"><span class="lineno"> 1408</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a66cca11731d68512cb0bb652cb1e7caf">SPELL_AURA_DUMMY</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a>, 2120, 0))</div>
<div class="line"><span class="lineno"> 1409</span>                        {</div>
<div class="line"><span class="lineno"> 1410</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = 0;</div>
<div class="line"><span class="lineno"> 1411</span> </div>
<div class="line"><span class="lineno"> 1412</span>                            <span class="keywordflow">switch</span> (aurEff-&gt;GetId())</div>
<div class="line"><span class="lineno"> 1413</span>                            {</div>
<div class="line"><span class="lineno"> 1414</span>                                <span class="keywordflow">case</span> 31571:</div>
<div class="line"><span class="lineno"> 1415</span>                                    spellId = 57529;</div>
<div class="line"><span class="lineno"> 1416</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1417</span>                                <span class="keywordflow">case</span> 31572:</div>
<div class="line"><span class="lineno"> 1418</span>                                    spellId = 57531;</div>
<div class="line"><span class="lineno"> 1419</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1420</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1421</span>                                    <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;Aura::HandleAuraSpecificMods: Unknown rank of Arcane Potency ({}) found&quot;</span>, aurEff-&gt;GetId());</div>
<div class="line"><span class="lineno"> 1422</span>                            }</div>
<div class="line"><span class="lineno"> 1423</span>                            <span class="keywordflow">if</span> (spellId)</div>
<div class="line"><span class="lineno"> 1424</span>                                caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(caster, spellId, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1425</span>                        }</div>
<div class="line"><span class="lineno"> 1426</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1427</span>                    <span class="keywordflow">case</span> 44544: <span class="comment">// Fingers of Frost</span></div>
<div class="line"><span class="lineno"> 1428</span>                        {</div>
<div class="line"><span class="lineno"> 1429</span>                            <span class="comment">// See if we already have the indicator aura. If not, create one.</span></div>
<div class="line"><span class="lineno"> 1430</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d3/d9a/a10802.html">Aura</a>* aur = target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a135e4d345c338da83450a60528f71222">GetAura</a>(74396))</div>
<div class="line"><span class="lineno"> 1431</span>                            {</div>
<div class="line"><span class="lineno"> 1432</span>                                <span class="comment">// Aura already there. Refresh duration and set original charges</span></div>
<div class="line"><span class="lineno"> 1433</span>                                aur-&gt;SetCharges(2);</div>
<div class="line"><span class="lineno"> 1434</span>                                aur-&gt;RefreshDuration();</div>
<div class="line"><span class="lineno"> 1435</span>                            }</div>
<div class="line"><span class="lineno"> 1436</span>                            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1437</span>                                target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a51d433dde350cd94d7c3c43e30ca997f">AddAura</a>(74396, target);</div>
<div class="line"><span class="lineno"> 1438</span>                        }</div>
<div class="line"><span class="lineno"> 1439</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1440</span>                    <span class="keywordflow">case</span> 12494: <span class="comment">// Frostbite, synchronise with Fingers of Frost</span></div>
<div class="line"><span class="lineno"> 1441</span>                    {</div>
<div class="line"><span class="lineno"> 1442</span>                        <span class="comment">// Find Fingers of Frost</span></div>
<div class="line"><span class="lineno"> 1443</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* aurEff = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b">SPELL_AURA_PROC_TRIGGER_SPELL</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a>, 2947, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ffae36fda04a2c1fff26525d0c57f79a36d">EFFECT_0</a>))</div>
<div class="line"><span class="lineno"> 1444</span>                        {</div>
<div class="line"><span class="lineno"> 1445</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d4/db9/a10906.html">SpellInfo</a> <span class="keyword">const</span>* triggeringSpellInfo = <a class="code hl_function" href="../../d3/d9a/a10802.html#af64f07e2756640cb9caf21433bd4e2b6">GetTriggeredByAuraSpellInfo</a>())</div>
<div class="line"><span class="lineno"> 1446</span>                            {</div>
<div class="line"><span class="lineno"> 1447</span>                                <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> fbRank = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellRank(triggeringSpellInfo-&gt;Id);</div>
<div class="line"><span class="lineno"> 1448</span>                                <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> fofRank = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellRank(aurEff-&gt;GetId());</div>
<div class="line"><span class="lineno"> 1449</span>                                <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> chance = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>(std::ceil(fofRank * fbRank * 16.6f));</div>
<div class="line"><span class="lineno"> 1450</span> </div>
<div class="line"><span class="lineno"> 1451</span>                                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/dc9/a00389.html#a50320d4edff86db31b25138ae72161ad">roll_chance_i</a>(chance))</div>
<div class="line"><span class="lineno"> 1452</span>                                {</div>
<div class="line"><span class="lineno"> 1453</span>                                    caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(caster, aurEff-&gt;GetSpellInfo()-&gt;Effects[<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ffae36fda04a2c1fff26525d0c57f79a36d">EFFECT_0</a>].TriggerSpell, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1454</span>                                }</div>
<div class="line"><span class="lineno"> 1455</span>                            }</div>
<div class="line"><span class="lineno"> 1456</span>                        }</div>
<div class="line"><span class="lineno"> 1457</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1458</span>                    }</div>
<div class="line"><span class="lineno"> 1459</span>                    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1460</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1461</span>                }</div>
<div class="line"><span class="lineno"> 1462</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1463</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>:</div>
<div class="line"><span class="lineno"> 1464</span>                <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 1465</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1466</span>                <span class="comment">// Rejuvenation</span></div>
<div class="line"><span class="lineno"> 1467</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x10 &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0))</div>
<div class="line"><span class="lineno"> 1468</span>                {</div>
<div class="line"><span class="lineno"> 1469</span>                    <span class="comment">// Druid T8 Restoration 4P Bonus</span></div>
<div class="line"><span class="lineno"> 1470</span>                    <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a73f40bd61fe24bcead25d6ab3b9efc25">GetAuraEffectDummy</a>(64760))</div>
<div class="line"><span class="lineno"> 1471</span>                    {</div>
<div class="line"><span class="lineno"> 1472</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0)-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><span class="lineno"> 1473</span>                        damage = target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aeac23e55488fc69a1b90f0e92eaf1626">SpellHealingBonusTaken</a>(caster, <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>(), damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>);</div>
<div class="line"><span class="lineno"> 1474</span> </div>
<div class="line"><span class="lineno"> 1475</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> basepoints0 = damage;</div>
<div class="line"><span class="lineno"> 1476</span>                        caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 64801, &amp;basepoints0, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0));</div>
<div class="line"><span class="lineno"> 1477</span>                    }</div>
<div class="line"><span class="lineno"> 1478</span>                }</div>
<div class="line"><span class="lineno"> 1479</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1480</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207">SPELLFAMILY_PRIEST</a>:</div>
<div class="line"><span class="lineno"> 1481</span>                <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 1482</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1483</span>                <span class="comment">// Devouring Plague</span></div>
<div class="line"><span class="lineno"> 1484</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x02000000 &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0))</div>
<div class="line"><span class="lineno"> 1485</span>                {</div>
<div class="line"><span class="lineno"> 1486</span>                    <span class="comment">// Improved Devouring Plague</span></div>
<div class="line"><span class="lineno"> 1487</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#ad0d63bc686dc3c20de0ace8d4da4fc28">GetDummyAuraEffect</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207">SPELLFAMILY_PRIEST</a>, 3790, 1))</div>
<div class="line"><span class="lineno"> 1488</span>                    {</div>
<div class="line"><span class="lineno"> 1489</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0)-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><span class="lineno"> 1490</span>                        damage = target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a8e8d13276a1ebef454bd4fc27fedc3f1">SpellDamageBonusTaken</a>(caster, <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>(), damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>);</div>
<div class="line"><span class="lineno"> 1491</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> basepoints0 = aurEff-&gt;GetAmount() * <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0)-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a67ca18798f448847e77665752fa4a32c">GetTotalTicks</a>() * <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(damage) / 100;</div>
<div class="line"><span class="lineno"> 1492</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> heal = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(<a class="code hl_function" href="../../d4/d13/a00377.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(basepoints0, 15));</div>
<div class="line"><span class="lineno"> 1493</span> </div>
<div class="line"><span class="lineno"> 1494</span>                        caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 63675, &amp;basepoints0, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0));</div>
<div class="line"><span class="lineno"> 1495</span>                        caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(caster, 75999, &amp;heal, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0));</div>
<div class="line"><span class="lineno"> 1496</span>                    }</div>
<div class="line"><span class="lineno"> 1497</span>                }</div>
<div class="line"><span class="lineno"> 1498</span>                <span class="comment">// Power Word: Shield</span></div>
<div class="line"><span class="lineno"> 1499</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a30452de2bd62607418f3962d00124144">SpellFamilyFlags</a>[0] &amp; 0x1 &amp;&amp; <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a30452de2bd62607418f3962d00124144">SpellFamilyFlags</a>[2] &amp; 0x400 &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0))</div>
<div class="line"><span class="lineno"> 1500</span>                {</div>
<div class="line"><span class="lineno"> 1501</span>                    <span class="comment">// Glyph of Power Word: Shield</span></div>
<div class="line"><span class="lineno"> 1502</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* glyph = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(55672, 0))</div>
<div class="line"><span class="lineno"> 1503</span>                    {</div>
<div class="line"><span class="lineno"> 1504</span>                        <span class="comment">// instantly heal m_amount% of the absorb-value</span></div>
<div class="line"><span class="lineno"> 1505</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> heal = glyph-&gt;GetAmount() * <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0)-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() / 100;</div>
<div class="line"><span class="lineno"> 1506</span>                        caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a25ce9277dfb99c46f2f0136e4aa5ab7c">GetUnitOwner</a>(), 56160, &amp;heal, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, 0, <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0));</div>
<div class="line"><span class="lineno"> 1507</span>                    }</div>
<div class="line"><span class="lineno"> 1508</span>                }</div>
<div class="line"><span class="lineno"> 1509</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1510</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1">SPELLFAMILY_ROGUE</a>:</div>
<div class="line"><span class="lineno"> 1511</span>                <span class="comment">// Sprint (skip non player casted spells by category)</span></div>
<div class="line"><span class="lineno"> 1512</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x40 &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;GetCategory() == 44)</div>
<div class="line"><span class="lineno"> 1513</span>                    <span class="comment">// in official maybe there is only one icon?</span></div>
<div class="line"><span class="lineno"> 1514</span>                    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(58039)) <span class="comment">// Glyph of Blurred Speed</span></div>
<div class="line"><span class="lineno"> 1515</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 61922, <span class="keyword">true</span>); <span class="comment">// Sprint (waterwalk)</span></div>
<div class="line"><span class="lineno"> 1516</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1517</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a>:</div>
<div class="line"><span class="lineno"> 1518</span>            {</div>
<div class="line"><span class="lineno"> 1519</span>                <span class="comment">// Ghost Wolf Speed (PvP 58 lvl set)</span></div>
<div class="line"><span class="lineno"> 1520</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x00000800 &amp;&amp; target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(22801) &amp;&amp; target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#af4767dc4f1480f7c0527db4efe2643d9">GetLevel</a>() &lt;= 60)</div>
<div class="line"><span class="lineno"> 1521</span>                {</div>
<div class="line"><span class="lineno"> 1522</span>                    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> bp0 = 15;</div>
<div class="line"><span class="lineno"> 1523</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 47017, &amp;bp0, 0, 0, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1524</span>                }</div>
<div class="line"><span class="lineno"> 1525</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1526</span>            }</div>
<div class="line"><span class="lineno"> 1527</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1badc34b27f2cd523716d80c51d4e1d6f02">SPELLFAMILY_DEATHKNIGHT</a>:</div>
<div class="line"><span class="lineno"> 1528</span>                <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 1529</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1530</span>                <span class="comment">// Frost Fever and Blood Plague</span></div>
<div class="line"><span class="lineno"> 1531</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[2] &amp; 0x2)</div>
<div class="line"><span class="lineno"> 1532</span>                {</div>
<div class="line"><span class="lineno"> 1533</span>                    <span class="comment">// Can&#39;t proc on self</span></div>
<div class="line"><span class="lineno"> 1534</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>() == target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>())</div>
<div class="line"><span class="lineno"> 1535</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1536</span> </div>
<div class="line"><span class="lineno"> 1537</span>                    <a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* aurEff = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1538</span>                    <span class="comment">// Ebon Plaguebringer / Crypt Fever</span></div>
<div class="line"><span class="lineno"> 1539</span>                    <a class="code hl_typedef" href="../../d6/d15/a08526.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; TalentAuras = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee9829857fab1a5438db7a7fdf8806fa">SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</a>);</div>
<div class="line"><span class="lineno"> 1540</span>                    <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator itr = TalentAuras.begin(); itr != TalentAuras.end(); ++itr)</div>
<div class="line"><span class="lineno"> 1541</span>                    {</div>
<div class="line"><span class="lineno"> 1542</span>                        <span class="keywordflow">if</span> ((*itr)-&gt;GetMiscValue() == 7282)</div>
<div class="line"><span class="lineno"> 1543</span>                        {</div>
<div class="line"><span class="lineno"> 1544</span>                            aurEff = *itr;</div>
<div class="line"><span class="lineno"> 1545</span>                            <span class="comment">// Ebon Plaguebringer - end search if found</span></div>
<div class="line"><span class="lineno"> 1546</span>                            <span class="keywordflow">if</span> ((*itr)-&gt;GetSpellInfo()-&gt;SpellIconID == 1766)</div>
<div class="line"><span class="lineno"> 1547</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1548</span>                        }</div>
<div class="line"><span class="lineno"> 1549</span>                    }</div>
<div class="line"><span class="lineno"> 1550</span>                    <span class="keywordflow">if</span> (aurEff)</div>
<div class="line"><span class="lineno"> 1551</span>                    {</div>
<div class="line"><span class="lineno"> 1552</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = 0;</div>
<div class="line"><span class="lineno"> 1553</span>                        <span class="keywordflow">switch</span> (aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno"> 1554</span>                        {</div>
<div class="line"><span class="lineno"> 1555</span>                            <span class="comment">// Ebon Plague</span></div>
<div class="line"><span class="lineno"> 1556</span>                            <span class="keywordflow">case</span> 51161:</div>
<div class="line"><span class="lineno"> 1557</span>                                spellId = 51735;</div>
<div class="line"><span class="lineno"> 1558</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1559</span>                            <span class="keywordflow">case</span> 51160:</div>
<div class="line"><span class="lineno"> 1560</span>                                spellId = 51734;</div>
<div class="line"><span class="lineno"> 1561</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1562</span>                            <span class="keywordflow">case</span> 51099:</div>
<div class="line"><span class="lineno"> 1563</span>                                spellId = 51726;</div>
<div class="line"><span class="lineno"> 1564</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1565</span>                            <span class="comment">// Crypt Fever</span></div>
<div class="line"><span class="lineno"> 1566</span>                            <span class="keywordflow">case</span> 49632:</div>
<div class="line"><span class="lineno"> 1567</span>                                spellId = 50510;</div>
<div class="line"><span class="lineno"> 1568</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1569</span>                            <span class="keywordflow">case</span> 49631:</div>
<div class="line"><span class="lineno"> 1570</span>                                spellId = 50509;</div>
<div class="line"><span class="lineno"> 1571</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1572</span>                            <span class="keywordflow">case</span> 49032:</div>
<div class="line"><span class="lineno"> 1573</span>                                spellId = 50508;</div>
<div class="line"><span class="lineno"> 1574</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1575</span>                            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1576</span>                                <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;Aura::HandleAuraSpecificMods: Unknown rank of Crypt Fever/Ebon Plague ({}) found&quot;</span>, aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 1577</span>                        }</div>
<div class="line"><span class="lineno"> 1578</span>                        caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spellId, <span class="keyword">true</span>, 0, <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0));</div>
<div class="line"><span class="lineno"> 1579</span>                    }</div>
<div class="line"><span class="lineno"> 1580</span>                }</div>
<div class="line"><span class="lineno"> 1581</span>                <span class="comment">// Unholy blight</span></div>
<div class="line"><span class="lineno"> 1582</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>() == 50536)</div>
<div class="line"><span class="lineno"> 1583</span>                {</div>
<div class="line"><span class="lineno"> 1584</span>                    <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#abdfe022523c40277d917754f75edb722">IsFriendlyTo</a>(target))</div>
<div class="line"><span class="lineno"> 1585</span>                        <a class="code hl_function" href="../../d3/d9a/a10802.html#a99930c42ad9f6e002ffe6de5e5fbe59b">SetDuration</a>(0);</div>
<div class="line"><span class="lineno"> 1586</span>                }</div>
<div class="line"><span class="lineno"> 1587</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1588</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba84336097f9e363a9b6a4d7d4839c1b54">SPELLFAMILY_POTION</a>:</div>
<div class="line"><span class="lineno"> 1589</span>                <span class="comment">// Alchemy: Mixology</span></div>
<div class="line"><span class="lineno"> 1590</span>                <span class="keywordflow">if</span> (caster &amp;&amp; caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(53042) &amp;&amp; caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; !caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a6ab11ca64cde7c5cde1f53998a6f7253">GetSession</a>()-&gt;<a class="code hl_function" href="../../db/d29/a10750.html#a6518fa6d76b730689eb44f2256af3726">PlayerLoading</a>())</div>
<div class="line"><span class="lineno"> 1591</span>                {</div>
<div class="line"><span class="lineno"> 1592</span>                    <span class="keywordflow">if</span> (<a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellGroup(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>()) == 1) <span class="comment">/*Elixirs*/</span></div>
<div class="line"><span class="lineno"> 1593</span>                    {</div>
<div class="line"><span class="lineno"> 1594</span>                        <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a745ede574ea561dcfdd7f32f2f2a6c7e">HasSpell</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;Effects[<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ffae36fda04a2c1fff26525d0c57f79a36d">EFFECT_0</a>].TriggerSpell))</div>
<div class="line"><span class="lineno"> 1595</span>                        {</div>
<div class="line"><span class="lineno"> 1596</span>                            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 1597</span>                                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(i))</div>
<div class="line"><span class="lineno"> 1598</span>                                    <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(i)-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a9790b9f33c52c6d3b830dc6f56f08bf0">SetAmount</a>(<a class="code hl_function" href="../../d4/d13/a00377.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(i)-&gt;GetAmount(), 100 + <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellMixologyBonus(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>())));</div>
<div class="line"><span class="lineno"> 1599</span> </div>
<div class="line"><span class="lineno"> 1600</span>                            <a class="code hl_function" href="../../d3/d9a/a10802.html#abf0ff1d6e3be882ce7e8ddd7e935ab66">SetMaxDuration</a>(caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a490990b2ec18be95c613e6394e4f3f6a">CalcSpellDuration</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()) * 2);</div>
<div class="line"><span class="lineno"> 1601</span>                            <a class="code hl_function" href="../../d3/d9a/a10802.html#a99930c42ad9f6e002ffe6de5e5fbe59b">SetDuration</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a14457cfa6d589b8024bbeeb1d4aa03d3">GetMaxDuration</a>());</div>
<div class="line"><span class="lineno"> 1602</span>                        }</div>
<div class="line"><span class="lineno"> 1603</span>                    }</div>
<div class="line"><span class="lineno"> 1604</span>                }</div>
<div class="line"><span class="lineno"> 1605</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1606</span>        }</div>
<div class="line"><span class="lineno"> 1607</span>    }</div>
<div class="line"><span class="lineno"> 1608</span>    <span class="comment">// mods at aura remove</span></div>
<div class="line"><span class="lineno"> 1609</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1610</span>    {</div>
<div class="line"><span class="lineno"> 1611</span>        <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyName)</div>
<div class="line"><span class="lineno"> 1612</span>        {</div>
<div class="line"><span class="lineno"> 1613</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>:</div>
<div class="line"><span class="lineno"> 1614</span>                <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 1615</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1616</span>                <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>())</div>
<div class="line"><span class="lineno"> 1617</span>                {</div>
<div class="line"><span class="lineno"> 1618</span>                    <span class="keywordflow">case</span> 61987: <span class="comment">// Avenging Wrath</span></div>
<div class="line"><span class="lineno"> 1619</span>                        <span class="comment">// Remove the immunity shield marker on Avenging Wrath removal if Forbearance is not present</span></div>
<div class="line"><span class="lineno"> 1620</span>                        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(61988) &amp;&amp; !target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(25771))</div>
<div class="line"><span class="lineno"> 1621</span>                            target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(61988);</div>
<div class="line"><span class="lineno"> 1622</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1623</span>                    <span class="keywordflow">case</span> 72368: <span class="comment">// Shared Suffering</span></div>
<div class="line"><span class="lineno"> 1624</span>                    <span class="keywordflow">case</span> 72369:</div>
<div class="line"><span class="lineno"> 1625</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* aurEff = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0))</div>
<div class="line"><span class="lineno"> 1626</span>                        {</div>
<div class="line"><span class="lineno"> 1627</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> remainingDamage = aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() * (aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a67ca18798f448847e77665752fa4a32c">GetTotalTicks</a>() - aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a0c28e995bc0e15c692c24154bab9df4d">GetTickNumber</a>());</div>
<div class="line"><span class="lineno"> 1628</span>                            <span class="keywordflow">if</span> (remainingDamage &gt; 0)</div>
<div class="line"><span class="lineno"> 1629</span>                                caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(caster, 72373, <span class="keyword">nullptr</span>, &amp;remainingDamage, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1630</span>                        }</div>
<div class="line"><span class="lineno"> 1631</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1632</span>                }</div>
<div class="line"><span class="lineno"> 1633</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1634</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a>:</div>
<div class="line"><span class="lineno"> 1635</span>            {</div>
<div class="line"><span class="lineno"> 1636</span>                <span class="comment">// Polymorph</span></div>
<div class="line"><span class="lineno"> 1637</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a30452de2bd62607418f3962d00124144">SpellFamilyFlags</a>[0] &amp; 0x01000000)</div>
<div class="line"><span class="lineno"> 1638</span>                {</div>
<div class="line"><span class="lineno"> 1639</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../df/d49/a07778.html">Creature</a>* creatureTarget = target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>())</div>
<div class="line"><span class="lineno"> 1640</span>                    {</div>
<div class="line"><span class="lineno"> 1641</span>                        creatureTarget-&gt;SetNoCallAssistance(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1642</span>                    }</div>
<div class="line"><span class="lineno"> 1643</span>                }</div>
<div class="line"><span class="lineno"> 1644</span>                <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>())</div>
<div class="line"><span class="lineno"> 1645</span>                {</div>
<div class="line"><span class="lineno"> 1646</span>                    <span class="keywordflow">case</span> 66: <span class="comment">// Invisibility</span></div>
<div class="line"><span class="lineno"> 1647</span>                        <span class="keywordflow">if</span> (removeMode != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a>)</div>
<div class="line"><span class="lineno"> 1648</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1649</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 32612, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(1));</div>
<div class="line"><span class="lineno"> 1650</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a18f77484ed2acc7be7fa29d1df7a0c12">CombatStop</a>();</div>
<div class="line"><span class="lineno"> 1651</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1652</span>                    <span class="keywordflow">case</span> 74396: <span class="comment">// Fingers of Frost</span></div>
<div class="line"><span class="lineno"> 1653</span>                        <span class="comment">// Remove the IGNORE_AURASTATE aura</span></div>
<div class="line"><span class="lineno"> 1654</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(44544);</div>
<div class="line"><span class="lineno"> 1655</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1656</span>                    <span class="keywordflow">case</span> 44401: <span class="comment">// Missile Barrage</span></div>
<div class="line"><span class="lineno"> 1657</span>                    <span class="keywordflow">case</span> 48108: <span class="comment">// Hot Streak</span></div>
<div class="line"><span class="lineno"> 1658</span>                    <span class="keywordflow">case</span> 57761: <span class="comment">// Fireball!</span></div>
<div class="line"><span class="lineno"> 1659</span>                        <span class="keywordflow">if</span> (removeMode != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a> || aurApp-&gt;GetBase()-&gt;IsExpired())</div>
<div class="line"><span class="lineno"> 1660</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1661</span>                        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(70752)) <span class="comment">// Item - Mage T10 2P Bonus</span></div>
<div class="line"><span class="lineno"> 1662</span>                            target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 70753, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1663</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1664</span>                    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1665</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1666</span>                }</div>
<div class="line"><span class="lineno"> 1667</span>                <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 1668</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1669</span>                <span class="comment">// Ice barrier - dispel/absorb remove</span></div>
<div class="line"><span class="lineno"> 1670</span>                <span class="keywordflow">if</span> (removeMode == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115eaa40c81252e354a16d6f036827c872e12">AURA_REMOVE_BY_ENEMY_SPELL</a> &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a30452de2bd62607418f3962d00124144">SpellFamilyFlags</a>[1] &amp; 0x1)</div>
<div class="line"><span class="lineno"> 1671</span>                {</div>
<div class="line"><span class="lineno"> 1672</span>                    <span class="comment">// Shattered Barrier</span></div>
<div class="line"><span class="lineno"> 1673</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* absorb = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ffae36fda04a2c1fff26525d0c57f79a36d">EFFECT_0</a>))</div>
<div class="line"><span class="lineno"> 1674</span>                        <span class="keywordflow">if</span> (absorb-&gt;GetAmount() &lt;= 0) <span class="comment">// removed by damage, not dispel</span></div>
<div class="line"><span class="lineno"> 1675</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* dummy = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#ad0d63bc686dc3c20de0ace8d4da4fc28">GetDummyAuraEffect</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a>, 2945, 0))</div>
<div class="line"><span class="lineno"> 1676</span>                                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/dc9/a00389.html#a50320d4edff86db31b25138ae72161ad">roll_chance_i</a>(dummy-&gt;GetSpellInfo()-&gt;ProcChance))</div>
<div class="line"><span class="lineno"> 1677</span>                                    caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 55080, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0));</div>
<div class="line"><span class="lineno"> 1678</span>                }</div>
<div class="line"><span class="lineno"> 1679</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1680</span>            }</div>
<div class="line"><span class="lineno"> 1681</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba52acbcf14a96b5ed01b8a43052a26a11">SPELLFAMILY_WARRIOR</a>:</div>
<div class="line"><span class="lineno"> 1682</span>                <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 1683</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1684</span>                [[fallthrough]]; </div>
<div class="line"><span class="lineno"> 1685</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a>:</div>
<div class="line"><span class="lineno"> 1686</span>                <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 1687</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1688</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a30452de2bd62607418f3962d00124144">SpellFamilyFlags</a>[1] &amp; 0x00000400)</div>
<div class="line"><span class="lineno"> 1689</span>                {</div>
<div class="line"><span class="lineno"> 1690</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* aurEff = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a66cca11731d68512cb0bb652cb1e7caf">SPELL_AURA_DUMMY</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a>, 98, 0))</div>
<div class="line"><span class="lineno"> 1691</span>                    {</div>
<div class="line"><span class="lineno"> 1692</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = 0;</div>
<div class="line"><span class="lineno"> 1693</span>                        <span class="keywordflow">switch</span> (aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno"> 1694</span>                        {</div>
<div class="line"><span class="lineno"> 1695</span>                            <span class="keywordflow">case</span> 53759:</div>
<div class="line"><span class="lineno"> 1696</span>                                spellId = 60947;</div>
<div class="line"><span class="lineno"> 1697</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1698</span>                            <span class="keywordflow">case</span> 53754:</div>
<div class="line"><span class="lineno"> 1699</span>                                spellId = 60946;</div>
<div class="line"><span class="lineno"> 1700</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1701</span>                            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1702</span>                                <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;Aura::HandleAuraSpecificMods: Unknown rank of Improved Fear ({}) found&quot;</span>, aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 1703</span>                        }</div>
<div class="line"><span class="lineno"> 1704</span>                        <span class="keywordflow">if</span> (spellId)</div>
<div class="line"><span class="lineno"> 1705</span>                            caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spellId, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1706</span>                    }</div>
<div class="line"><span class="lineno"> 1707</span>                }</div>
<div class="line"><span class="lineno"> 1708</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1709</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207">SPELLFAMILY_PRIEST</a>:</div>
<div class="line"><span class="lineno"> 1710</span>                <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 1711</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1712</span>                <span class="comment">// Shadow word: Pain // Vampiric Touch</span></div>
<div class="line"><span class="lineno"> 1713</span>                <span class="keywordflow">if</span> (removeMode == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115eaa40c81252e354a16d6f036827c872e12">AURA_REMOVE_BY_ENEMY_SPELL</a> &amp;&amp; (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x00008000 || <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[1] &amp; 0x00000400))</div>
<div class="line"><span class="lineno"> 1714</span>                {</div>
<div class="line"><span class="lineno"> 1715</span>                    <span class="comment">// Shadow Affinity</span></div>
<div class="line"><span class="lineno"> 1716</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#ad0d63bc686dc3c20de0ace8d4da4fc28">GetDummyAuraEffect</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207">SPELLFAMILY_PRIEST</a>, 178, 1))</div>
<div class="line"><span class="lineno"> 1717</span>                    {</div>
<div class="line"><span class="lineno"> 1718</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> basepoints0 = aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() * caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#ae0ca62842bea9e94497c0200b37891d8">GetCreateMana</a>() / 100;</div>
<div class="line"><span class="lineno"> 1719</span>                        caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(caster, 64103, &amp;basepoints0, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0));</div>
<div class="line"><span class="lineno"> 1720</span>                    }</div>
<div class="line"><span class="lineno"> 1721</span>                }</div>
<div class="line"><span class="lineno"> 1722</span>                <span class="comment">// Power word: shield</span></div>
<div class="line"><span class="lineno"> 1723</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (removeMode == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115eaa40c81252e354a16d6f036827c872e12">AURA_REMOVE_BY_ENEMY_SPELL</a> &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x00000001)</div>
<div class="line"><span class="lineno"> 1724</span>                {</div>
<div class="line"><span class="lineno"> 1725</span>                    <span class="comment">// Rapture</span></div>
<div class="line"><span class="lineno"> 1726</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d3/d9a/a10802.html">Aura</a> <span class="keyword">const</span>* aura = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a1b5426ed0a821b78377faac8113796b1">GetAuraOfRankedSpell</a>(47535))</div>
<div class="line"><span class="lineno"> 1727</span>                    {</div>
<div class="line"><span class="lineno"> 1728</span>                        <span class="comment">// check cooldown</span></div>
<div class="line"><span class="lineno"> 1729</span>                        <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 1730</span>                        {</div>
<div class="line"><span class="lineno"> 1731</span>                            <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a6b5d9a18a5a03f4e55b7ff90479acee9">HasSpellCooldown</a>(aura-&gt;GetId()))</div>
<div class="line"><span class="lineno"> 1732</span>                            {</div>
<div class="line"><span class="lineno"> 1733</span>                                <span class="comment">// This additional check is needed to add a minimal delay before cooldown in in effect</span></div>
<div class="line"><span class="lineno"> 1734</span>                                <span class="comment">// to allow all bubbles broken by a single damage source proc mana return</span></div>
<div class="line"><span class="lineno"> 1735</span>                                <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#ac1da2650933e6311dc3c26416ae70c9c">GetSpellCooldownDelay</a>(aura-&gt;GetId()) &lt;= 11500)</div>
<div class="line"><span class="lineno"> 1736</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1737</span>                            }</div>
<div class="line"><span class="lineno"> 1738</span>                            <span class="keywordflow">else</span>    <span class="comment">// and add if needed</span></div>
<div class="line"><span class="lineno"> 1739</span>                                caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a8b94883b20744d45b498bb1ae292083d">AddSpellCooldown</a>(aura-&gt;GetId(), 0, 12 * <a class="code hl_variable" href="../../d4/d51/a00017.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a>);</div>
<div class="line"><span class="lineno"> 1740</span>                        }</div>
<div class="line"><span class="lineno"> 1741</span> </div>
<div class="line"><span class="lineno"> 1742</span>                        <span class="comment">// effect on caster</span></div>
<div class="line"><span class="lineno"> 1743</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = aura-&gt;GetEffect(0))</div>
<div class="line"><span class="lineno"> 1744</span>                        {</div>
<div class="line"><span class="lineno"> 1745</span>                            <span class="keywordtype">float</span> multiplier = (float)aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><span class="lineno"> 1746</span>                            <span class="keywordflow">if</span> (aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 47535)</div>
<div class="line"><span class="lineno"> 1747</span>                                multiplier -= 0.5f;</div>
<div class="line"><span class="lineno"> 1748</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 47537)</div>
<div class="line"><span class="lineno"> 1749</span>                                multiplier += 0.5f;</div>
<div class="line"><span class="lineno"> 1750</span> </div>
<div class="line"><span class="lineno"> 1751</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> basepoints0 = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(<a class="code hl_function" href="../../d4/d13/a00377.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>), multiplier));</div>
<div class="line"><span class="lineno"> 1752</span>                            caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(caster, 47755, &amp;basepoints0, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1753</span>                        }</div>
<div class="line"><span class="lineno"> 1754</span>                        <span class="comment">// effect on aura target</span></div>
<div class="line"><span class="lineno"> 1755</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = aura-&gt;GetEffect(1))</div>
<div class="line"><span class="lineno"> 1756</span>                        {</div>
<div class="line"><span class="lineno"> 1757</span>                            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../dc/dc9/a00389.html#a50320d4edff86db31b25138ae72161ad">roll_chance_i</a>(aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()))</div>
<div class="line"><span class="lineno"> 1758</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1759</span> </div>
<div class="line"><span class="lineno"> 1760</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> triggeredSpellId = 0;</div>
<div class="line"><span class="lineno"> 1761</span>                            <span class="keywordflow">switch</span> (target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#ad44d31430fab9282a79e8682822ccd9c">getPowerType</a>())</div>
<div class="line"><span class="lineno"> 1762</span>                            {</div>
<div class="line"><span class="lineno"> 1763</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>:</div>
<div class="line"><span class="lineno"> 1764</span>                                    {</div>
<div class="line"><span class="lineno"> 1765</span>                                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> basepoints0 = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(<a class="code hl_function" href="../../d4/d13/a00377.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>), 2));</div>
<div class="line"><span class="lineno"> 1766</span>                                        caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 63654, &amp;basepoints0, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1767</span>                                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1768</span>                                    }</div>
<div class="line"><span class="lineno"> 1769</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>:</div>
<div class="line"><span class="lineno"> 1770</span>                                    triggeredSpellId = 63653;</div>
<div class="line"><span class="lineno"> 1771</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1772</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a>:</div>
<div class="line"><span class="lineno"> 1773</span>                                    triggeredSpellId = (!target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(70405) ? 63655 : 0);</div>
<div class="line"><span class="lineno"> 1774</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1775</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a4c504424e60c95f01e0ec1468a52d221">POWER_RUNIC_POWER</a>:</div>
<div class="line"><span class="lineno"> 1776</span>                                    triggeredSpellId = 63652;</div>
<div class="line"><span class="lineno"> 1777</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1778</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1779</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1780</span>                            }</div>
<div class="line"><span class="lineno"> 1781</span>                            <span class="keywordflow">if</span> (triggeredSpellId)</div>
<div class="line"><span class="lineno"> 1782</span>                                caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, triggeredSpellId, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1783</span>                        }</div>
<div class="line"><span class="lineno"> 1784</span>                    }</div>
<div class="line"><span class="lineno"> 1785</span>                }</div>
<div class="line"><span class="lineno"> 1786</span>                <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>())</div>
<div class="line"><span class="lineno"> 1787</span>                {</div>
<div class="line"><span class="lineno"> 1788</span>                    <span class="keywordflow">case</span> 47788: <span class="comment">// Guardian Spirit</span></div>
<div class="line"><span class="lineno"> 1789</span>                    {</div>
<div class="line"><span class="lineno"> 1790</span>                        <span class="keywordflow">if</span> (removeMode != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a>)</div>
<div class="line"><span class="lineno"> 1791</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1792</span>                        <span class="keywordflow">if</span> (!caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 1793</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1794</span> </div>
<div class="line"><span class="lineno"> 1795</span>                        <a class="code hl_class" href="../../da/da3/a08394.html">Player</a>* player = caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>();</div>
<div class="line"><span class="lineno"> 1796</span>                        <span class="comment">// Glyph of Guardian Spirit</span></div>
<div class="line"><span class="lineno"> 1797</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* aurEff = player-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(63231, 0))</div>
<div class="line"><span class="lineno"> 1798</span>                        {</div>
<div class="line"><span class="lineno"> 1799</span>                            <span class="keywordflow">if</span> (!player-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a6b5d9a18a5a03f4e55b7ff90479acee9">HasSpellCooldown</a>(47788))</div>
<div class="line"><span class="lineno"> 1800</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1801</span> </div>
<div class="line"><span class="lineno"> 1802</span>                            player-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a8b94883b20744d45b498bb1ae292083d">AddSpellCooldown</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>, 0, aurEff-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()*<a class="code hl_variable" href="../../d4/d51/a00017.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a>);</div>
<div class="line"><span class="lineno"> 1803</span> </div>
<div class="line"><span class="lineno"> 1804</span>                            <a class="code hl_class" href="../../d2/da2/a10706.html">WorldPacket</a> data(<a class="code hl_enumvalue" href="../../d5/dfd/a04680.html#gga1073b6abb3a749f18bf1633020879e9ba5fec169c1f6ef708fd7217f7dcba3a31">SMSG_MODIFY_COOLDOWN</a>, 4 + 8 + 4);</div>
<div class="line"><span class="lineno"> 1805</span>                            data &lt;&lt; <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>());                  <span class="comment">// Spell ID</span></div>
<div class="line"><span class="lineno"> 1806</span>                            data &lt;&lt; player-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>();                <span class="comment">// Player GUID</span></div>
<div class="line"><span class="lineno"> 1807</span>                            data &lt;&lt; <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(-110000);                   <span class="comment">// Cooldown mod in milliseconds</span></div>
<div class="line"><span class="lineno"> 1808</span>                            player-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a2ad9b8f6c94365d5afe104567198aba8">SendDirectMessage</a>(&amp;data);</div>
<div class="line"><span class="lineno"> 1809</span>                        }</div>
<div class="line"><span class="lineno"> 1810</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1811</span>                    }</div>
<div class="line"><span class="lineno"> 1812</span>                    <span class="keywordflow">case</span> 47585: <span class="comment">// Dispersion (fixed bug invisible as a Shadow Priest)</span></div>
<div class="line"><span class="lineno"> 1813</span>                    {</div>
<div class="line"><span class="lineno"> 1814</span>                        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa8ff700c8aec70f3ab1e1385262959b1">IsMounted</a>())</div>
<div class="line"><span class="lineno"> 1815</span>                        {</div>
<div class="line"><span class="lineno"> 1816</span>                            target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 53444, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1817</span>                        }</div>
<div class="line"><span class="lineno"> 1818</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1819</span>                    }</div>
<div class="line"><span class="lineno"> 1820</span>                }</div>
<div class="line"><span class="lineno"> 1821</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1822</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1">SPELLFAMILY_ROGUE</a>:</div>
<div class="line"><span class="lineno"> 1823</span>                {</div>
<div class="line"><span class="lineno"> 1824</span>                    <span class="comment">// Overkill, Master of Subtlety</span></div>
<div class="line"><span class="lineno"> 1825</span>                    <span class="keywordflow">if</span> (caster &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellIconID == 250)</div>
<div class="line"><span class="lineno"> 1826</span>                    {</div>
<div class="line"><span class="lineno"> 1827</span>                        <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#ad0d63bc686dc3c20de0ace8d4da4fc28">GetDummyAuraEffect</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1">SPELLFAMILY_ROGUE</a>, 2114, 0))</div>
<div class="line"><span class="lineno"> 1828</span>                            caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(caster, 31666, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1829</span> </div>
<div class="line"><span class="lineno"> 1830</span>                        <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a73f40bd61fe24bcead25d6ab3b9efc25">GetAuraEffectDummy</a>(58426))</div>
<div class="line"><span class="lineno"> 1831</span>                            caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(caster, 58428, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1832</span>                    }</div>
<div class="line"><span class="lineno"> 1833</span>                    <span class="comment">// Remove Vanish on stealth remove</span></div>
<div class="line"><span class="lineno"> 1834</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>() == 1784)</div>
<div class="line"><span class="lineno"> 1835</span>                    {</div>
<div class="line"><span class="lineno"> 1836</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a1560f8912954788c900cab1bfa57ea76">RemoveAurasWithFamily</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1">SPELLFAMILY_ROGUE</a>, 0x800, 0, 0, <a class="code hl_variable" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a>);</div>
<div class="line"><span class="lineno"> 1837</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(18461);</div>
<div class="line"><span class="lineno"> 1838</span>                    }</div>
<div class="line"><span class="lineno"> 1839</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1840</span>                }</div>
<div class="line"><span class="lineno"> 1841</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a>:</div>
<div class="line"><span class="lineno"> 1842</span>            {</div>
<div class="line"><span class="lineno"> 1843</span>                <span class="comment">// Ghost Wolf Speed (PvP 58 lvl set)</span></div>
<div class="line"><span class="lineno"> 1844</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x00000800)</div>
<div class="line"><span class="lineno"> 1845</span>                {</div>
<div class="line"><span class="lineno"> 1846</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(47017);</div>
<div class="line"><span class="lineno"> 1847</span>                }</div>
<div class="line"><span class="lineno"> 1848</span>                <span class="comment">// Lightning Shield vs The Earthshatterer 8/9 set bonus</span></div>
<div class="line"><span class="lineno"> 1849</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x00000400)</div>
<div class="line"><span class="lineno"> 1850</span>                {</div>
<div class="line"><span class="lineno"> 1851</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(28820);</div>
<div class="line"><span class="lineno"> 1852</span>                }</div>
<div class="line"><span class="lineno"> 1853</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1854</span>            }</div>
<div class="line"><span class="lineno"> 1855</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1badc34b27f2cd523716d80c51d4e1d6f02">SPELLFAMILY_DEATHKNIGHT</a>:</div>
<div class="line"><span class="lineno"> 1856</span>                <span class="comment">// Blood of the North</span></div>
<div class="line"><span class="lineno"> 1857</span>                <span class="comment">// Reaping</span></div>
<div class="line"><span class="lineno"> 1858</span>                <span class="comment">// Death Rune Mastery</span></div>
<div class="line"><span class="lineno"> 1859</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellIconID == 3041 || <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellIconID == 22 || <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellIconID == 2622)</div>
<div class="line"><span class="lineno"> 1860</span>                {</div>
<div class="line"><span class="lineno"> 1861</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0) || <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0)-&gt;GetAuraType() != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56">SPELL_AURA_PERIODIC_DUMMY</a>)</div>
<div class="line"><span class="lineno"> 1862</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1863</span>                    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 1864</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1865</span>                    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a966607859ce9c9537038b9ca21b9e827">IsClass</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a86e4e3df7a5142175aa5df522d3346cfa7f7b30426fd386c181799196c1739058">CLASS_DEATH_KNIGHT</a>, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a2a9983288cb2a06108c1d1a94c96c046a14fe87d018c5ff3c07e81b54fb10ae90">CLASS_CONTEXT_ABILITY</a>))</div>
<div class="line"><span class="lineno"> 1866</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1867</span> </div>
<div class="line"><span class="lineno"> 1868</span>                    <span class="comment">// aura removed - remove death runes</span></div>
<div class="line"><span class="lineno"> 1869</span>                    target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a0d99907a41953dfe2e4589a785503fc1">RemoveRunesByAuraEffect</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0));</div>
<div class="line"><span class="lineno"> 1870</span>                }</div>
<div class="line"><span class="lineno"> 1871</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1872</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba573f9ad8924e7632156291378448e742">SPELLFAMILY_PALADIN</a>:</div>
<div class="line"><span class="lineno"> 1873</span>                <span class="comment">// Remove the immunity shield marker on Forbearance removal if AW marker is not present</span></div>
<div class="line"><span class="lineno"> 1874</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>() == 25771 &amp;&amp; target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(61988) &amp;&amp; !target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(61987))</div>
<div class="line"><span class="lineno"> 1875</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(61988);</div>
<div class="line"><span class="lineno"> 1876</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1877</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba66df9b34a3b922a8242d3dfb74494026">SPELLFAMILY_HUNTER</a>:</div>
<div class="line"><span class="lineno"> 1878</span>                <span class="comment">// Glyph of Freezing Trap</span></div>
<div class="line"><span class="lineno"> 1879</span>                <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x00000008) &amp;&amp; caster &amp;&amp; caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(56845))</div>
<div class="line"><span class="lineno"> 1880</span>                {</div>
<div class="line"><span class="lineno"> 1881</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 61394, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1882</span>                }</div>
<div class="line"><span class="lineno"> 1883</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1884</span>        }</div>
<div class="line"><span class="lineno"> 1885</span>    }</div>
<div class="line"><span class="lineno"> 1886</span> </div>
<div class="line"><span class="lineno"> 1887</span>    <span class="comment">// mods at aura apply or remove</span></div>
<div class="line"><span class="lineno"> 1888</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;SpellFamilyName)</div>
<div class="line"><span class="lineno"> 1889</span>    {</div>
<div class="line"><span class="lineno"> 1890</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba66df9b34a3b922a8242d3dfb74494026">SPELLFAMILY_HUNTER</a>:</div>
<div class="line"><span class="lineno"> 1891</span>            <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>())</div>
<div class="line"><span class="lineno"> 1892</span>            {</div>
<div class="line"><span class="lineno"> 1893</span>                <span class="keywordflow">case</span> 19574: <span class="comment">// Bestial Wrath</span></div>
<div class="line"><span class="lineno"> 1894</span>                    <span class="comment">// The Beast Within cast on owner if talent present</span></div>
<div class="line"><span class="lineno"> 1895</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* owner = target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a16a73fea59a6ef3595093aa29225b37b">GetOwner</a>())</div>
<div class="line"><span class="lineno"> 1896</span>                    {</div>
<div class="line"><span class="lineno"> 1897</span>                        <span class="comment">// Search talent</span></div>
<div class="line"><span class="lineno"> 1898</span>                        <span class="keywordflow">if</span> (owner-&gt;HasAura(34692))</div>
<div class="line"><span class="lineno"> 1899</span>                        {</div>
<div class="line"><span class="lineno"> 1900</span>                            <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1901</span>                                owner-&gt;CastSpell(owner, 34471, <span class="keyword">true</span>, 0, <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0));</div>
<div class="line"><span class="lineno"> 1902</span>                            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1903</span>                                owner-&gt;RemoveAurasDueToSpell(34471);</div>
<div class="line"><span class="lineno"> 1904</span>                        }</div>
<div class="line"><span class="lineno"> 1905</span>                    }</div>
<div class="line"><span class="lineno"> 1906</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1907</span>                <span class="keywordflow">case</span> 34026: <span class="comment">// Kill Command</span></div>
<div class="line"><span class="lineno"> 1908</span>                    <span class="comment">// Dungeon Set 3</span></div>
<div class="line"><span class="lineno"> 1909</span>                    <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(37483))</div>
<div class="line"><span class="lineno"> 1910</span>                    {</div>
<div class="line"><span class="lineno"> 1911</span>                        <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1912</span>                        {</div>
<div class="line"><span class="lineno"> 1913</span>                            caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(caster, 37482, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1914</span>                        }</div>
<div class="line"><span class="lineno"> 1915</span>                    }</div>
<div class="line"><span class="lineno"> 1916</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1917</span>            }</div>
<div class="line"><span class="lineno"> 1918</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1919</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba573f9ad8924e7632156291378448e742">SPELLFAMILY_PALADIN</a>:</div>
<div class="line"><span class="lineno"> 1920</span>            <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>())</div>
<div class="line"><span class="lineno"> 1921</span>            {</div>
<div class="line"><span class="lineno"> 1922</span>                <span class="keywordflow">case</span> 19746:</div>
<div class="line"><span class="lineno"> 1923</span>                <span class="keywordflow">case</span> 31821:</div>
<div class="line"><span class="lineno"> 1924</span>                    <span class="comment">// Aura Mastery Triggered Spell Handler</span></div>
<div class="line"><span class="lineno"> 1925</span>                    <span class="comment">// If apply Concentration Aura -&gt; trigger -&gt; apply Aura Mastery Immunity</span></div>
<div class="line"><span class="lineno"> 1926</span>                    <span class="comment">// If remove Concentration Aura -&gt; trigger -&gt; remove Aura Mastery Immunity</span></div>
<div class="line"><span class="lineno"> 1927</span>                    <span class="comment">// If remove Aura Mastery -&gt; trigger -&gt; remove Aura Mastery Immunity</span></div>
<div class="line"><span class="lineno"> 1928</span>                    <span class="comment">// Do effects only on aura owner</span></div>
<div class="line"><span class="lineno"> 1929</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>() != target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>())</div>
<div class="line"><span class="lineno"> 1930</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1931</span>                    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1932</span>                    {</div>
<div class="line"><span class="lineno"> 1933</span>                        <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;Id == 31821 &amp;&amp; target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(19746, <a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>())) || (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;Id == 19746 &amp;&amp; target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(31821)))</div>
<div class="line"><span class="lineno"> 1934</span>                            target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 64364, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1935</span>                    }</div>
<div class="line"><span class="lineno"> 1936</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1937</span>                        target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(64364, <a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno"> 1938</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1939</span>                <span class="keywordflow">case</span> 31842:</div>
<div class="line"><span class="lineno"> 1940</span>                    <span class="keywordflow">if</span> (caster &amp;&amp; caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(70755))</div>
<div class="line"><span class="lineno"> 1941</span>                    {</div>
<div class="line"><span class="lineno"> 1942</span>                        <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1943</span>                            target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 71166, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1944</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1945</span>                            target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(71166);</div>
<div class="line"><span class="lineno"> 1946</span>                    }</div>
<div class="line"><span class="lineno"> 1947</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1948</span>            }</div>
<div class="line"><span class="lineno"> 1949</span> </div>
<div class="line"><span class="lineno"> 1950</span>            <span class="comment">// Sanctified Retribution, Improved Devotion Aura, Swift Retribution, Improved Concentration Aura</span></div>
<div class="line"><span class="lineno"> 1951</span>            <span class="keywordflow">if</span> (caster == target &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;GetSpellSpecific() == <a class="code hl_enumvalue" href="../../d4/d44/a03065.html#a967f80d0c19acebc2e322c73b7b16442a8b31c1d8a369ac3bfa30c9e5b9b10ffa">SPELL_SPECIFIC_AURA</a>)</div>
<div class="line"><span class="lineno"> 1952</span>            {</div>
<div class="line"><span class="lineno"> 1953</span>                <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1954</span>                {</div>
<div class="line"><span class="lineno"> 1955</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 63510, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1956</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 63514, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1957</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 63531, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1958</span>                }</div>
<div class="line"><span class="lineno"> 1959</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1960</span>                {</div>
<div class="line"><span class="lineno"> 1961</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(63510);</div>
<div class="line"><span class="lineno"> 1962</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(63514);</div>
<div class="line"><span class="lineno"> 1963</span>                    target-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(63531);</div>
<div class="line"><span class="lineno"> 1964</span>                }</div>
<div class="line"><span class="lineno"> 1965</span>            }</div>
<div class="line"><span class="lineno"> 1966</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1967</span>    }</div>
<div class="line"><span class="lineno"> 1968</span>}</div>
<div class="ttc" id="aa00377_html_ae00607f8188c59ffcea5a3997c0120b0"><div class="ttname"><a href="../../d4/d13/a00377.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a></div><div class="ttdeci">T CalculatePct(T base, U pct)</div><div class="ttdef"><b>Definition:</b> Util.h:61</div></div>
<div class="ttc" id="aa00389_html_a50320d4edff86db31b25138ae72161ad"><div class="ttname"><a href="../../dc/dc9/a00389.html#a50320d4edff86db31b25138ae72161ad">roll_chance_i</a></div><div class="ttdeci">bool roll_chance_i(int chance)</div><div class="ttdef"><b>Definition:</b> Random.h:59</div></div>
<div class="ttc" id="aa02771_html_a091a832125de330a1d2fb91d57c0e1ffae36fda04a2c1fff26525d0c57f79a36d"><div class="ttname"><a href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ffae36fda04a2c1fff26525d0c57f79a36d">EFFECT_0</a></div><div class="ttdeci">@ EFFECT_0</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:31</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a></div><div class="ttdeci">@ POWER_RAGE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:270</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414a4c504424e60c95f01e0ec1468a52d221"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a4c504424e60c95f01e0ec1468a52d221">POWER_RUNIC_POWER</a></div><div class="ttdeci">@ POWER_RUNIC_POWER</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:275</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a></div><div class="ttdeci">@ POWER_ENERGY</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:272</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a></div><div class="ttdeci">@ POWER_MANA</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:269</div></div>
<div class="ttc" id="aa02771_html_a86e4e3df7a5142175aa5df522d3346cfa7f7b30426fd386c181799196c1739058"><div class="ttname"><a href="../../d0/dbd/a02771.html#a86e4e3df7a5142175aa5df522d3346cfa7f7b30426fd386c181799196c1739058">CLASS_DEATH_KNIGHT</a></div><div class="ttdeci">@ CLASS_DEATH_KNIGHT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:146</div></div>
<div class="ttc" id="aa02771_html_a91d505a1e789c6ea6a338f3a3c85b6b9a981326220afec59126417e02e0b882de"><div class="ttname"><a href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a981326220afec59126417e02e0b882de">IMMUNITY_ID</a></div><div class="ttdeci">@ IMMUNITY_ID</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1400</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207">SPELLFAMILY_PRIEST</a></div><div class="ttdeci">@ SPELLFAMILY_PRIEST</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3534</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a></div><div class="ttdeci">@ SPELLFAMILY_WARLOCK</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3533</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a></div><div class="ttdeci">@ SPELLFAMILY_MAGE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3531</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a></div><div class="ttdeci">@ SPELLFAMILY_GENERIC</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3528</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba52acbcf14a96b5ed01b8a43052a26a11"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba52acbcf14a96b5ed01b8a43052a26a11">SPELLFAMILY_WARRIOR</a></div><div class="ttdeci">@ SPELLFAMILY_WARRIOR</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3532</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba573f9ad8924e7632156291378448e742"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba573f9ad8924e7632156291378448e742">SPELLFAMILY_PALADIN</a></div><div class="ttdeci">@ SPELLFAMILY_PALADIN</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3538</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba84336097f9e363a9b6a4d7d4839c1b54"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba84336097f9e363a9b6a4d7d4839c1b54">SPELLFAMILY_POTION</a></div><div class="ttdeci">@ SPELLFAMILY_POTION</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3541</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1">SPELLFAMILY_ROGUE</a></div><div class="ttdeci">@ SPELLFAMILY_ROGUE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3536</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a></div><div class="ttdeci">@ SPELLFAMILY_SHAMAN</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3539</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a></div><div class="ttdeci">@ SPELLFAMILY_DRUID</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3535</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1badc34b27f2cd523716d80c51d4e1d6f02"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1badc34b27f2cd523716d80c51d4e1d6f02">SPELLFAMILY_DEATHKNIGHT</a></div><div class="ttdeci">@ SPELLFAMILY_DEATHKNIGHT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3543</div></div>
<div class="ttc" id="aa03065_html_a967f80d0c19acebc2e322c73b7b16442a8b31c1d8a369ac3bfa30c9e5b9b10ffa"><div class="ttname"><a href="../../d4/d44/a03065.html#a967f80d0c19acebc2e322c73b7b16442a8b31c1d8a369ac3bfa30c9e5b9b10ffa">SPELL_SPECIFIC_AURA</a></div><div class="ttdeci">@ SPELL_SPECIFIC_AURA</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:152</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b">SPELL_AURA_PROC_TRIGGER_SPELL</a></div><div class="ttdeci">@ SPELL_AURA_PROC_TRIGGER_SPELL</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:105</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a66cca11731d68512cb0bb652cb1e7caf"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a66cca11731d68512cb0bb652cb1e7caf">SPELL_AURA_DUMMY</a></div><div class="ttdeci">@ SPELL_AURA_DUMMY</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:67</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799aee9829857fab1a5438db7a7fdf8806fa"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee9829857fab1a5438db7a7fdf8806fa">SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</a></div><div class="ttdeci">@ SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:175</div></div>
<div class="ttc" id="aa03092_html_a56f7dd5627e22afd9eb73530b767115e"><div class="ttname"><a href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a></div><div class="ttdeci">AuraRemoveMode</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:390</div></div>
<div class="ttc" id="aa03092_html_a56f7dd5627e22afd9eb73530b767115ea8b8b753a1458a21a162528088acee913"><div class="ttname"><a href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea8b8b753a1458a21a162528088acee913">AURA_REMOVE_BY_DEATH</a></div><div class="ttdeci">@ AURA_REMOVE_BY_DEATH</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:396</div></div>
<div class="ttc" id="aa03092_html_a56f7dd5627e22afd9eb73530b767115ea9ca05b22853d12d44ac7e80a9e864a10"><div class="ttname"><a href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a></div><div class="ttdeci">@ AURA_REMOVE_BY_EXPIRE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:395</div></div>
<div class="ttc" id="aa03092_html_a56f7dd5627e22afd9eb73530b767115eaa40c81252e354a16d6f036827c872e12"><div class="ttname"><a href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115eaa40c81252e354a16d6f036827c872e12">AURA_REMOVE_BY_ENEMY_SPELL</a></div><div class="ttdeci">@ AURA_REMOVE_BY_ENEMY_SPELL</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:394</div></div>
<div class="ttc" id="aa03110_html_a69bbd3906e9d334176d6a0ffde617490"><div class="ttname"><a href="../../df/d64/a03110.html#a69bbd3906e9d334176d6a0ffde617490">SpellAreaForAreaMapBounds</a></div><div class="ttdeci">std::pair&lt; SpellAreaForAreaMap::const_iterator, SpellAreaForAreaMap::const_iterator &gt; SpellAreaForAreaMapBounds</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:550</div></div>
<div class="ttc" id="aa03110_html_ab05dedebdd8cfd6f2028ccc48bd240ddaa3391be8356e56c204b6a35987068fb0"><div class="ttname"><a href="../../df/d64/a03110.html#ab05dedebdd8cfd6f2028ccc48bd240ddaa3391be8356e56c204b6a35987068fb0">SPELL_LINK_AURA</a></div><div class="ttdeci">@ SPELL_LINK_AURA</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:98</div></div>
<div class="ttc" id="aa03515_html_ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f"><div class="ttname"><a href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a></div><div class="ttdeci">@ DOT</div><div class="ttdef"><b>Definition:</b> Unit.h:250</div></div>
<div class="ttc" id="aa03521_html_a2a9983288cb2a06108c1d1a94c96c046a14fe87d018c5ff3c07e81b54fb10ae90"><div class="ttname"><a href="../../d8/dbe/a03521.html#a2a9983288cb2a06108c1d1a94c96c046a14fe87d018c5ff3c07e81b54fb10ae90">CLASS_CONTEXT_ABILITY</a></div><div class="ttdeci">@ CLASS_CONTEXT_ABILITY</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:213</div></div>
<div class="ttc" id="aa04680_html_gga1073b6abb3a749f18bf1633020879e9ba5fec169c1f6ef708fd7217f7dcba3a31"><div class="ttname"><a href="../../d5/dfd/a04680.html#gga1073b6abb3a749f18bf1633020879e9ba5fec169c1f6ef708fd7217f7dcba3a31">SMSG_MODIFY_COOLDOWN</a></div><div class="ttdeci">@ SMSG_MODIFY_COOLDOWN</div><div class="ttdef"><b>Definition:</b> Opcodes.h:1199</div></div>
<div class="ttc" id="aa07778_html"><div class="ttname"><a href="../../df/d49/a07778.html">Creature</a></div><div class="ttdef"><b>Definition:</b> Creature.h:43</div></div>
<div class="ttc" id="aa08182_html_ae1a8efe701e885f0ed1eaeb93bbece8e"><div class="ttname"><a href="../../db/df3/a08182.html#ae1a8efe701e885f0ed1eaeb93bbece8e">WorldObject::GetZoneAndAreaId</a></div><div class="ttdeci">void GetZoneAndAreaId(uint32 &amp;zoneid, uint32 &amp;areaid) const</div><div class="ttdef"><b>Definition:</b> Object.cpp:3162</div></div>
<div class="ttc" id="aa08394_html_a0d99907a41953dfe2e4589a785503fc1"><div class="ttname"><a href="../../da/da3/a08394.html#a0d99907a41953dfe2e4589a785503fc1">Player::RemoveRunesByAuraEffect</a></div><div class="ttdeci">void RemoveRunesByAuraEffect(AuraEffect const *aura)</div><div class="ttdef"><b>Definition:</b> Player.cpp:13396</div></div>
<div class="ttc" id="aa08394_html_a2ad9b8f6c94365d5afe104567198aba8"><div class="ttname"><a href="../../da/da3/a08394.html#a2ad9b8f6c94365d5afe104567198aba8">Player::SendDirectMessage</a></div><div class="ttdeci">void SendDirectMessage(WorldPacket const *data) const</div><div class="ttdef"><b>Definition:</b> Player.cpp:5701</div></div>
<div class="ttc" id="aa08394_html_a582a0cd15b37f0b0302e6f758e299e2c"><div class="ttname"><a href="../../da/da3/a08394.html#a582a0cd15b37f0b0302e6f758e299e2c">Player::ActivateTaxiPathTo</a></div><div class="ttdeci">bool ActivateTaxiPathTo(std::vector&lt; uint32 &gt; const &amp;nodes, Creature *npc=nullptr, uint32 spellid=1)</div><div class="ttdef"><b>Definition:</b> Player.cpp:10240</div></div>
<div class="ttc" id="aa08394_html_a6ab11ca64cde7c5cde1f53998a6f7253"><div class="ttname"><a href="../../da/da3/a08394.html#a6ab11ca64cde7c5cde1f53998a6f7253">Player::GetSession</a></div><div class="ttdeci">WorldSession * GetSession() const</div><div class="ttdef"><b>Definition:</b> Player.h:1981</div></div>
<div class="ttc" id="aa08394_html_a6b5d9a18a5a03f4e55b7ff90479acee9"><div class="ttname"><a href="../../da/da3/a08394.html#a6b5d9a18a5a03f4e55b7ff90479acee9">Player::HasSpellCooldown</a></div><div class="ttdeci">bool HasSpellCooldown(uint32 spell_id) const override</div><div class="ttdef"><b>Definition:</b> Player.cpp:16339</div></div>
<div class="ttc" id="aa08394_html_a8b94883b20744d45b498bb1ae292083d"><div class="ttname"><a href="../../da/da3/a08394.html#a8b94883b20744d45b498bb1ae292083d">Player::AddSpellCooldown</a></div><div class="ttdeci">void AddSpellCooldown(uint32 spell_id, uint32 itemid, uint32 end_time, bool needSendToClient=false, bool forceSendToSpectator=false) override</div><div class="ttdef"><b>Definition:</b> Player.cpp:11095</div></div>
<div class="ttc" id="aa08394_html_a966607859ce9c9537038b9ca21b9e827"><div class="ttname"><a href="../../da/da3/a08394.html#a966607859ce9c9537038b9ca21b9e827">Player::IsClass</a></div><div class="ttdeci">bool IsClass(Classes playerClass, ClassContext context=CLASS_CONTEXT_NONE) const override</div><div class="ttdef"><b>Definition:</b> Player.cpp:1281</div></div>
<div class="ttc" id="aa08394_html_ac1da2650933e6311dc3c26416ae70c9c"><div class="ttname"><a href="../../da/da3/a08394.html#ac1da2650933e6311dc3c26416ae70c9c">Player::GetSpellCooldownDelay</a></div><div class="ttdeci">uint32 GetSpellCooldownDelay(uint32 spell_id) const</div><div class="ttdef"><b>Definition:</b> Player.cpp:16351</div></div>
<div class="ttc" id="aa08394_html_ad52044947ef0aa2325b2688075bac34d"><div class="ttname"><a href="../../da/da3/a08394.html#ad52044947ef0aa2325b2688075bac34d">Player::RemoveSpellCooldown</a></div><div class="ttdeci">void RemoveSpellCooldown(uint32 spell_id, bool update=false)</div><div class="ttdef"><b>Definition:</b> Player.cpp:3514</div></div>
<div class="ttc" id="aa08526_html_a0b6417e1489c3f2e1ced1e0384d48ff8"><div class="ttname"><a href="../../d6/d15/a08526.html#a0b6417e1489c3f2e1ced1e0384d48ff8">Unit::GetAuraEffectsByType</a></div><div class="ttdeci">AuraEffectList const &amp; GetAuraEffectsByType(AuraType type) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1349</div></div>
<div class="ttc" id="aa08526_html_a135e4d345c338da83450a60528f71222"><div class="ttname"><a href="../../d6/d15/a08526.html#a135e4d345c338da83450a60528f71222">Unit::GetAura</a></div><div class="ttdeci">Aura * GetAura(uint32 spellId, ObjectGuid casterGUID=ObjectGuid::Empty, ObjectGuid itemCasterGUID=ObjectGuid::Empty, uint8 reqEffMask=0) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5581</div></div>
<div class="ttc" id="aa08526_html_a1560f8912954788c900cab1bfa57ea76"><div class="ttname"><a href="../../d6/d15/a08526.html#a1560f8912954788c900cab1bfa57ea76">Unit::RemoveAurasWithFamily</a></div><div class="ttdeci">void RemoveAurasWithFamily(SpellFamilyNames family, uint32 familyFlag1, uint32 familyFlag2, uint32 familyFlag3, ObjectGuid casterGUID)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5216</div></div>
<div class="ttc" id="aa08526_html_a16a73fea59a6ef3595093aa29225b37b"><div class="ttname"><a href="../../d6/d15/a08526.html#a16a73fea59a6ef3595093aa29225b37b">Unit::GetOwner</a></div><div class="ttdeci">Unit * GetOwner() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10600</div></div>
<div class="ttc" id="aa08526_html_a18f77484ed2acc7be7fa29d1df7a0c12"><div class="ttname"><a href="../../d6/d15/a08526.html#a18f77484ed2acc7be7fa29d1df7a0c12">Unit::CombatStop</a></div><div class="ttdeci">void CombatStop(bool includingCast=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10436</div></div>
<div class="ttc" id="aa08526_html_a1afc1e413f12c5bd7bc00c926fa05833"><div class="ttname"><a href="../../d6/d15/a08526.html#a1afc1e413f12c5bd7bc00c926fa05833">Unit::ApplySpellImmune</a></div><div class="ttdeci">void ApplySpellImmune(uint32 spellId, uint32 op, uint32 type, bool apply, SpellImmuneBlockType blockType=SPELL_BLOCK_TYPE_ALL)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:13389</div></div>
<div class="ttc" id="aa08526_html_a1b5426ed0a821b78377faac8113796b1"><div class="ttname"><a href="../../d6/d15/a08526.html#a1b5426ed0a821b78377faac8113796b1">Unit::GetAuraOfRankedSpell</a></div><div class="ttdeci">Aura * GetAuraOfRankedSpell(uint32 spellId, ObjectGuid casterGUID=ObjectGuid::Empty, ObjectGuid itemCasterGUID=ObjectGuid::Empty, uint8 reqEffMask=0) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5599</div></div>
<div class="ttc" id="aa08526_html_a1be09c524dfdd2c3538f2ae977c58399"><div class="ttname"><a href="../../d6/d15/a08526.html#a1be09c524dfdd2c3538f2ae977c58399">Unit::RemoveAura</a></div><div class="ttdeci">void RemoveAura(AuraApplicationMap::iterator &amp;i, AuraRemoveMode mode=AURA_REMOVE_BY_DEFAULT)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4776</div></div>
<div class="ttc" id="aa08526_html_a51d433dde350cd94d7c3c43e30ca997f"><div class="ttname"><a href="../../d6/d15/a08526.html#a51d433dde350cd94d7c3c43e30ca997f">Unit::AddAura</a></div><div class="ttdeci">Aura * AddAura(uint32 spellId, Unit *target)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:18864</div></div>
<div class="ttc" id="aa08526_html_a51ec81e114bf82a2485ba9f66200afd2"><div class="ttname"><a href="../../d6/d15/a08526.html#a51ec81e114bf82a2485ba9f66200afd2">Unit::CastCustomSpell</a></div><div class="ttdeci">SpellCastResult CastCustomSpell(Unit *victim, uint32 spellId, int32 const *bp0, int32 const *bp1, int32 const *bp2, bool triggered, Item *castItem=nullptr, AuraEffect const *triggeredByAura=nullptr, ObjectGuid originalCaster=ObjectGuid::Empty)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:1224</div></div>
<div class="ttc" id="aa08526_html_a520e229dc1a93ea4a53d0ba81e586d11"><div class="ttname"><a href="../../d6/d15/a08526.html#a520e229dc1a93ea4a53d0ba81e586d11">Unit::GetAuraEffect</a></div><div class="ttdeci">AuraEffect * GetAuraEffect(uint32 spellId, uint8 effIndex, ObjectGuid casterGUID=ObjectGuid::Empty) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5494</div></div>
<div class="ttc" id="aa08526_html_a69c5ac45b65cf0dede6e0ee837361f61"><div class="ttname"><a href="../../d6/d15/a08526.html#a69c5ac45b65cf0dede6e0ee837361f61">Unit::HasAura</a></div><div class="ttdeci">bool HasAura(uint32 spellId, ObjectGuid casterGUID=ObjectGuid::Empty, ObjectGuid itemCasterGUID=ObjectGuid::Empty, uint8 reqEffMask=0) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5698</div></div>
<div class="ttc" id="aa08526_html_a73f40bd61fe24bcead25d6ab3b9efc25"><div class="ttname"><a href="../../d6/d15/a08526.html#a73f40bd61fe24bcead25d6ab3b9efc25">Unit::GetAuraEffectDummy</a></div><div class="ttdeci">AuraEffect * GetAuraEffectDummy(uint32 spellid) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5550</div></div>
<div class="ttc" id="aa08526_html_a745ede574ea561dcfdd7f32f2f2a6c7e"><div class="ttname"><a href="../../d6/d15/a08526.html#a745ede574ea561dcfdd7f32f2f2a6c7e">Unit::HasSpell</a></div><div class="ttdeci">virtual bool HasSpell(uint32) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1454</div></div>
<div class="ttc" id="aa08526_html_a8e8d13276a1ebef454bd4fc27fedc3f1"><div class="ttname"><a href="../../d6/d15/a08526.html#a8e8d13276a1ebef454bd4fc27fedc3f1">Unit::SpellDamageBonusTaken</a></div><div class="ttdeci">uint32 SpellDamageBonusTaken(Unit *caster, SpellInfo const *spellProto, uint32 pdamage, DamageEffectType damagetype, uint32 stack=1)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:11791</div></div>
<div class="ttc" id="aa08526_html_a93f83fd909310de2c76382d00d7dbbf1"><div class="ttname"><a href="../../d6/d15/a08526.html#a93f83fd909310de2c76382d00d7dbbf1">Unit::GetMaxPower</a></div><div class="ttdeci">uint32 GetMaxPower(Powers power) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1057</div></div>
<div class="ttc" id="aa08526_html_aa3ca95f7a14041f562ed69c3994afdfc"><div class="ttname"><a href="../../d6/d15/a08526.html#aa3ca95f7a14041f562ed69c3994afdfc">Unit::CastSpell</a></div><div class="ttdeci">SpellCastResult CastSpell(SpellCastTargets const &amp;targets, SpellInfo const *spellInfo, CustomSpellValues const *value, TriggerCastFlags triggerFlags=TRIGGERED_NONE, Item *castItem=nullptr, AuraEffect const *triggeredByAura=nullptr, ObjectGuid originalCaster=ObjectGuid::Empty)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:1167</div></div>
<div class="ttc" id="aa08526_html_aa8ff700c8aec70f3ab1e1385262959b1"><div class="ttname"><a href="../../d6/d15/a08526.html#aa8ff700c8aec70f3ab1e1385262959b1">Unit::IsMounted</a></div><div class="ttdeci">bool IsMounted() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1747</div></div>
<div class="ttc" id="aa08526_html_aac612f06e84142d92dcfc432b5feb4ac"><div class="ttname"><a href="../../d6/d15/a08526.html#aac612f06e84142d92dcfc432b5feb4ac">Unit::RemoveAurasDueToSpell</a></div><div class="ttdeci">void RemoveAurasDueToSpell(uint32 spellId, ObjectGuid casterGUID=ObjectGuid::Empty, uint8 reqEffMask=0, AuraRemoveMode removeMode=AURA_REMOVE_BY_DEFAULT)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4909</div></div>
<div class="ttc" id="aa08526_html_abdfe022523c40277d917754f75edb722"><div class="ttname"><a href="../../d6/d15/a08526.html#abdfe022523c40277d917754f75edb722">Unit::IsFriendlyTo</a></div><div class="ttdeci">bool IsFriendlyTo(Unit const *unit) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10241</div></div>
<div class="ttc" id="aa08526_html_ad0d63bc686dc3c20de0ace8d4da4fc28"><div class="ttname"><a href="../../d6/d15/a08526.html#ad0d63bc686dc3c20de0ace8d4da4fc28">Unit::GetDummyAuraEffect</a></div><div class="ttdeci">AuraEffect * GetDummyAuraEffect(SpellFamilyNames name, uint32 iconId, uint8 effIndex) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1358</div></div>
<div class="ttc" id="aa08526_html_ad44d31430fab9282a79e8682822ccd9c"><div class="ttname"><a href="../../d6/d15/a08526.html#ad44d31430fab9282a79e8682822ccd9c">Unit::getPowerType</a></div><div class="ttdeci">Powers getPowerType() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1052</div></div>
<div class="ttc" id="aa08526_html_adcdd87d0c137619dfc869536c1315dd7"><div class="ttname"><a href="../../d6/d15/a08526.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a></div><div class="ttdeci">std::list&lt; AuraEffect * &gt; AuraEffectList</div><div class="ttdef"><b>Definition:</b> Unit.h:646</div></div>
<div class="ttc" id="aa08526_html_ae0ca62842bea9e94497c0200b37891d8"><div class="ttname"><a href="../../d6/d15/a08526.html#ae0ca62842bea9e94497c0200b37891d8">Unit::GetCreateMana</a></div><div class="ttdeci">uint32 GetCreateMana() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1070</div></div>
<div class="ttc" id="aa08526_html_aeac23e55488fc69a1b90f0e92eaf1626"><div class="ttname"><a href="../../d6/d15/a08526.html#aeac23e55488fc69a1b90f0e92eaf1626">Unit::SpellHealingBonusTaken</a></div><div class="ttdeci">uint32 SpellHealingBonusTaken(Unit *caster, SpellInfo const *spellProto, uint32 healamount, DamageEffectType damagetype, uint32 stack=1)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:12570</div></div>
<div class="ttc" id="aa08526_html_af387d5e18806e37f65ebc3408c0b8712"><div class="ttname"><a href="../../d6/d15/a08526.html#af387d5e18806e37f65ebc3408c0b8712">Unit::GetTarget</a></div><div class="ttdeci">ObjectGuid GetTarget() const</div><div class="ttdef"><b>Definition:</b> Unit.h:818</div></div>
<div class="ttc" id="aa10750_html_a6518fa6d76b730689eb44f2256af3726"><div class="ttname"><a href="../../db/d29/a10750.html#a6518fa6d76b730689eb44f2256af3726">WorldSession::PlayerLoading</a></div><div class="ttdeci">bool PlayerLoading() const</div><div class="ttdef"><b>Definition:</b> WorldSession.h:337</div></div>
<div class="ttc" id="aa10790_html_a0c28e995bc0e15c692c24154bab9df4d"><div class="ttname"><a href="../../de/d50/a10790.html#a0c28e995bc0e15c692c24154bab9df4d">AuraEffect::GetTickNumber</a></div><div class="ttdeci">uint32 GetTickNumber() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:87</div></div>
<div class="ttc" id="aa10790_html_a63863fb01a8cf08251c0b4482be6a20f"><div class="ttname"><a href="../../de/d50/a10790.html#a63863fb01a8cf08251c0b4482be6a20f">AuraEffect::GetId</a></div><div class="ttdeci">uint32 GetId() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:432</div></div>
<div class="ttc" id="aa10790_html_a67ca18798f448847e77665752fa4a32c"><div class="ttname"><a href="../../de/d50/a10790.html#a67ca18798f448847e77665752fa4a32c">AuraEffect::GetTotalTicks</a></div><div class="ttdeci">int32 GetTotalTicks() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:7365</div></div>
<div class="ttc" id="aa10790_html_a9790b9f33c52c6d3b830dc6f56f08bf0"><div class="ttname"><a href="../../de/d50/a10790.html#a9790b9f33c52c6d3b830dc6f56f08bf0">AuraEffect::SetAmount</a></div><div class="ttdeci">void SetAmount(int32 amount)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:66</div></div>
<div class="ttc" id="aa10790_html_afcf272bebf373ad3aebc03cce644cbee"><div class="ttname"><a href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">AuraEffect::GetAmount</a></div><div class="ttdeci">int32 GetAmount() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:64</div></div>
<div class="ttc" id="aa10802_html_a14457cfa6d589b8024bbeeb1d4aa03d3"><div class="ttname"><a href="../../d3/d9a/a10802.html#a14457cfa6d589b8024bbeeb1d4aa03d3">Aura::GetMaxDuration</a></div><div class="ttdeci">int32 GetMaxDuration() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:129</div></div>
<div class="ttc" id="aa10802_html_a99930c42ad9f6e002ffe6de5e5fbe59b"><div class="ttname"><a href="../../d3/d9a/a10802.html#a99930c42ad9f6e002ffe6de5e5fbe59b">Aura::SetDuration</a></div><div class="ttdeci">void SetDuration(int32 duration, bool withMods=false)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:868</div></div>
<div class="ttc" id="aa10802_html_aae0b7e0da61a681e67a19b6d23c2cee6"><div class="ttname"><a href="../../d3/d9a/a10802.html#aae0b7e0da61a681e67a19b6d23c2cee6">Aura::GetStackAmount</a></div><div class="ttdeci">uint8 GetStackAmount() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:148</div></div>
<div class="ttc" id="aa10802_html_abf0ff1d6e3be882ce7e8ddd7e935ab66"><div class="ttname"><a href="../../d3/d9a/a10802.html#abf0ff1d6e3be882ce7e8ddd7e935ab66">Aura::SetMaxDuration</a></div><div class="ttdeci">void SetMaxDuration(int32 duration)</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:130</div></div>
<div class="ttc" id="aa10802_html_af64f07e2756640cb9caf21433bd4e2b6"><div class="ttname"><a href="../../d3/d9a/a10802.html#af64f07e2756640cb9caf21433bd4e2b6">Aura::GetTriggeredByAuraSpellInfo</a></div><div class="ttdeci">SpellInfo const * GetTriggeredByAuraSpellInfo() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2761</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l10240">Player::ActivateTaxiPathTo()</a>, <a class="el" href="../../#l18864">Unit::AddAura()</a>, <a class="el" href="../../#l11095">Player::AddSpellCooldown()</a>, <a class="el" href="../../#l13389">Unit::ApplySpellImmune()</a>, <a class="el" href="../../#l00396">AURA_REMOVE_BY_DEATH</a>, <a class="el" href="../../#l00394">AURA_REMOVE_BY_ENEMY_SPELL</a>, <a class="el" href="../../#l00395">AURA_REMOVE_BY_EXPIRE</a>, <a class="el" href="../../#l14856">Unit::CalcSpellDuration()</a>, <a class="el" href="../../#l00061">CalculatePct()</a>, <a class="el" href="../../#l01224">Unit::CastCustomSpell()</a>, <a class="el" href="../../#l01167">Unit::CastSpell()</a>, <a class="el" href="../../#l00213">CLASS_CONTEXT_ABILITY</a>, <a class="el" href="../../#l00146">CLASS_DEATH_KNIGHT</a>, <a class="el" href="../../#l10436">Unit::CombatStop()</a>, <a class="el" href="../../#l00250">DOT</a>, <a class="el" href="../../#l00031">EFFECT_0</a>, <a class="el" href="../../#l00120">ObjectGuid::Empty</a>, <a class="el" href="../../#l00064">AuraEffect::GetAmount()</a>, <a class="el" href="../../#l05581">Unit::GetAura()</a>, <a class="el" href="../../#l05494">Unit::GetAuraEffect()</a>, <a class="el" href="../../#l05550">Unit::GetAuraEffectDummy()</a>, <a class="el" href="../../#l01349">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../#l05599">Unit::GetAuraOfRankedSpell()</a>, <a class="el" href="../../#l00062">AuraApplication::GetBase()</a>, <a class="el" href="../../#l00105">GetCasterGUID()</a>, <a class="el" href="../../#l01070">Unit::GetCreateMana()</a>, <a class="el" href="../../#l01358">Unit::GetDummyAuraEffect()</a>, <a class="el" href="../../#l00175">GetEffect()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00432">AuraEffect::GetId()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l01024">Unit::GetLevel()</a>, <a class="el" href="../../#l00129">GetMaxDuration()</a>, <a class="el" href="../../#l01057">Unit::GetMaxPower()</a>, <a class="el" href="../../#l10600">Unit::GetOwner()</a>, <a class="el" href="../../#l01052">Unit::getPowerType()</a>, <a class="el" href="../../#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../#l01981">Player::GetSession()</a>, <a class="el" href="../../#l16351">Player::GetSpellCooldownDelay()</a>, <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l00148">GetStackAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l07365">AuraEffect::GetTotalTicks()</a>, <a class="el" href="../../#l02761">GetTriggeredByAuraSpellInfo()</a>, <a class="el" href="../../#l00108">GetUnitOwner()</a>, <a class="el" href="../../#l03162">WorldObject::GetZoneAndAreaId()</a>, <a class="el" href="../../#l05698">Unit::HasAura()</a>, <a class="el" href="../../#l01454">Unit::HasSpell()</a>, <a class="el" href="../../#l16339">Player::HasSpellCooldown()</a>, <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l01400">IMMUNITY_ID</a>, <a class="el" href="../../#l00053">IN_MILLISECONDS</a>, <a class="el" href="../../#l01281">Player::IsClass()</a>, <a class="el" href="../../#l00138">IsExpired()</a>, <a class="el" href="../../#l10241">Unit::IsFriendlyTo()</a>, <a class="el" href="../../#l01747">Unit::IsMounted()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00157">LOG_ERROR</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l00337">WorldSession::PlayerLoading()</a>, <a class="el" href="../../#l00272">POWER_ENERGY</a>, <a class="el" href="../../#l00269">POWER_MANA</a>, <a class="el" href="../../#l00270">POWER_RAGE</a>, <a class="el" href="../../#l00275">POWER_RUNIC_POWER</a>, <a class="el" href="../../#l04776">Unit::RemoveAura()</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../#l05216">Unit::RemoveAurasWithFamily()</a>, <a class="el" href="../../#l13396">Player::RemoveRunesByAuraEffect()</a>, <a class="el" href="../../#l03514">Player::RemoveSpellCooldown()</a>, <a class="el" href="../../#l00059">roll_chance_i()</a>, <a class="el" href="../../#l05701">Player::SendDirectMessage()</a>, <a class="el" href="../../#l00066">AuraEffect::SetAmount()</a>, <a class="el" href="../../#l00868">SetDuration()</a>, <a class="el" href="../../#l00130">SetMaxDuration()</a>, <a class="el" href="../../#l01199">SMSG_MODIFY_COOLDOWN</a>, <a class="el" href="../../#l00067">SPELL_AURA_DUMMY</a>, <a class="el" href="../../#l00175">SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</a>, <a class="el" href="../../#l00289">SPELL_AURA_PERIODIC_DUMMY</a>, <a class="el" href="../../#l00105">SPELL_AURA_PROC_TRIGGER_SPELL</a>, <a class="el" href="../../#l00098">SPELL_LINK_AURA</a>, <a class="el" href="../../#l00152">SPELL_SPECIFIC_AURA</a>, <a class="el" href="../../#l11791">Unit::SpellDamageBonusTaken()</a>, <a class="el" href="../../#l03543">SPELLFAMILY_DEATHKNIGHT</a>, <a class="el" href="../../#l03535">SPELLFAMILY_DRUID</a>, <a class="el" href="../../#l03528">SPELLFAMILY_GENERIC</a>, <a class="el" href="../../#l03537">SPELLFAMILY_HUNTER</a>, <a class="el" href="../../#l03531">SPELLFAMILY_MAGE</a>, <a class="el" href="../../#l03538">SPELLFAMILY_PALADIN</a>, <a class="el" href="../../#l03541">SPELLFAMILY_POTION</a>, <a class="el" href="../../#l03534">SPELLFAMILY_PRIEST</a>, <a class="el" href="../../#l03536">SPELLFAMILY_ROGUE</a>, <a class="el" href="../../#l03539">SPELLFAMILY_SHAMAN</a>, <a class="el" href="../../#l03533">SPELLFAMILY_WARLOCK</a>, <a class="el" href="../../#l03532">SPELLFAMILY_WARRIOR</a>, <a class="el" href="../../#l00388">SpellInfo::SpellFamilyFlags</a>, <a class="el" href="../../#l12570">Unit::SpellHealingBonusTaken()</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, <a class="el" href="../../#l00202">Object::ToCreature()</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04505">Unit::_ApplyAura()</a>, <a class="el" href="../../#l04551">Unit::_UnapplyAura()</a>, and <a class="el" href="../../#l00995">SetStackAmount()</a>.</p>

</div>
</div>
<a id="a3d22c519ba658770e61a1616be667a09" name="a3d22c519ba658770e61a1616be667a09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d22c519ba658770e61a1616be667a09">&#9670;&#160;</a></span>HasEffect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::HasEffect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>effIndex</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  173</span>{ <span class="keywordflow">return</span> bool(<a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(effIndex)); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00175">GetEffect()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04491">Unit::_ApplyAuraEffect()</a>, <a class="el" href="../../#l02800">UnitAura::FillTargetMap()</a>, <a class="el" href="../../#l02887">DynObjAura::FillTargetMap()</a>, <a class="el" href="../../#l01150">AuraScript::HasEffect()</a>, <a class="el" href="../../#l01222">HasEffectType()</a>, <a class="el" href="../../#l01072">IsArea()</a>, <a class="el" href="../../#l01232">RecalculateAmountOfEffects()</a>, and <a class="el" href="../../#l00995">SetStackAmount()</a>.</p>

</div>
</div>
<a id="a6890e111fba863b7163fa5eb0b0870f5" name="a6890e111fba863b7163fa5eb0b0870f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6890e111fba863b7163fa5eb0b0870f5">&#9670;&#160;</a></span>HasEffectType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::HasEffectType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799">AuraType</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1223</span>{</div>
<div class="line"><span class="lineno"> 1224</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 1225</span>    {</div>
<div class="line"><span class="lineno"> 1226</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a3d22c519ba658770e61a1616be667a09">HasEffect</a>(i) &amp;&amp; <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]-&gt;GetAuraType() == type)</div>
<div class="line"><span class="lineno"> 1227</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1228</span>    }</div>
<div class="line"><span class="lineno"> 1229</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1230</span>}</div>
<div class="ttc" id="aa10802_html_a3d22c519ba658770e61a1616be667a09"><div class="ttname"><a href="../../d3/d9a/a10802.html#a3d22c519ba658770e61a1616be667a09">Aura::HasEffect</a></div><div class="ttdeci">bool HasEffect(uint8 effIndex) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:173</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00173">HasEffect()</a>, <a class="el" href="../../#l00265">m_effects</a>, and <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04414">Unit::_AddAura()</a>, <a class="el" href="../../#l00460">Battleground::_ProcessJoin()</a>, <a class="el" href="../../#l01137">CanBeSentToClient()</a>, <a class="el" href="../../#l01160">AuraScript::HasEffectType()</a>, <a class="el" href="../../#l01142">IsSingleTargetWith()</a>, and <a class="el" href="../../#l04806">Unit::RemoveAura()</a>.</p>

</div>
</div>
<a id="a5860e9094ea1ef6525b77c1957879486" name="a5860e9094ea1ef6525b77c1957879486"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5860e9094ea1ef6525b77c1957879486">&#9670;&#160;</a></span>IsAppliedOnTarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsAppliedOnTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>guid</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  185</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.find(guid) != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.end(); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00266">m_applications</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00492">_ApplyForTarget()</a>, and <a class="el" href="../../#l04453">Unit::_CreateAuraApplication()</a>.</p>

</div>
</div>
<a id="a13f14942fd6394df8e5d8ae820fd3fc7" name="a13f14942fd6394df8e5d8ae820fd3fc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13f14942fd6394df8e5d8ae820fd3fc7">&#9670;&#160;</a></span>IsArea()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsArea </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1073</span>{</div>
<div class="line"><span class="lineno"> 1074</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 1075</span>    {</div>
<div class="line"><span class="lineno"> 1076</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a3d22c519ba658770e61a1616be667a09">HasEffect</a>(i) &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;Effects[i].IsAreaAuraEffect())</div>
<div class="line"><span class="lineno"> 1077</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1078</span>    }</div>
<div class="line"><span class="lineno"> 1079</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1080</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l00173">HasEffect()</a>, and <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02021">CanStackWith()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

</div>
</div>
<a id="ac4544d5fa6bb4171de4fccdad5e96918" name="ac4544d5fa6bb4171de4fccdad5e96918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4544d5fa6bb4171de4fccdad5e96918">&#9670;&#160;</a></span>IsAuraStronger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsAuraStronger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d9a/a10802.html">Aura</a> const *&#160;</td>
          <td class="paramname"><em>newAura</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1993</span>{</div>
<div class="line"><span class="lineno"> 1994</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ffae36fda04a2c1fff26525d0c57f79a36d">EFFECT_0</a>; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 1995</span>    {</div>
<div class="line"><span class="lineno"> 1996</span>        <a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* thisEffect = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(i);</div>
<div class="line"><span class="lineno"> 1997</span>        <span class="keywordflow">if</span> (!thisEffect)</div>
<div class="line"><span class="lineno"> 1998</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1999</span> </div>
<div class="line"><span class="lineno"> 2000</span>        <a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* newEffect = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 2001</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> j = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ffae36fda04a2c1fff26525d0c57f79a36d">EFFECT_0</a>; j &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++j)</div>
<div class="line"><span class="lineno"> 2002</span>        {</div>
<div class="line"><span class="lineno"> 2003</span>            newEffect = newAura-&gt;GetEffect(j);</div>
<div class="line"><span class="lineno"> 2004</span>            <span class="keywordflow">if</span> (!newEffect || thisEffect-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() != newEffect-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() || thisEffect-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() != newEffect-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>())</div>
<div class="line"><span class="lineno"> 2005</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2006</span> </div>
<div class="line"><span class="lineno"> 2007</span>            <span class="comment">// xinef: assume that all spells are either positive or negative, otherwise they should not be in one group</span></div>
<div class="line"><span class="lineno"> 2008</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> curValue = std::abs(thisEffect-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 2009</span>            <span class="keywordflow">if</span> (curValue &lt; std::abs(newEffect-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()))</div>
<div class="line"><span class="lineno"> 2010</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2011</span> </div>
<div class="line"><span class="lineno"> 2012</span>            <span class="keywordflow">if</span> (curValue == std::abs(newEffect-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()))</div>
<div class="line"><span class="lineno"> 2013</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d3/d9a/a10802.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>() &amp;&amp; !<a class="code hl_function" href="../../d3/d9a/a10802.html#af70f37c9e40b7038cf952c2969ae9ab2">IsPermanent</a>() &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">GetDuration</a>() &lt; newAura-&gt;GetDuration())</div>
<div class="line"><span class="lineno"> 2014</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2015</span>        }</div>
<div class="line"><span class="lineno"> 2016</span>    }</div>
<div class="line"><span class="lineno"> 2017</span> </div>
<div class="line"><span class="lineno"> 2018</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2019</span>}</div>
<div class="ttc" id="aa10790_html_a120cf8a45a3c816e4ef588733fa812e5"><div class="ttname"><a href="../../de/d50/a10790.html#a120cf8a45a3c816e4ef588733fa812e5">AuraEffect::GetAuraType</a></div><div class="ttdeci">AuraType GetAuraType() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:447</div></div>
<div class="ttc" id="aa10790_html_aa183791665930afb43bbac2163b1d8d4"><div class="ttname"><a href="../../de/d50/a10790.html#aa183791665930afb43bbac2163b1d8d4">AuraEffect::GetMiscValue</a></div><div class="ttdeci">int32 GetMiscValue() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:442</div></div>
<div class="ttc" id="aa10802_html_a5e79eaa33b5f9ae5aaa44a62d096d6fe"><div class="ttname"><a href="../../d3/d9a/a10802.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">Aura::GetDuration</a></div><div class="ttdeci">int32 GetDuration() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:133</div></div>
<div class="ttc" id="aa10802_html_af70f37c9e40b7038cf952c2969ae9ab2"><div class="ttname"><a href="../../d3/d9a/a10802.html#af70f37c9e40b7038cf952c2969ae9ab2">Aura::IsPermanent</a></div><div class="ttdeci">bool IsPermanent() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:139</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00031">EFFECT_0</a>, <a class="el" href="../../#l00064">AuraEffect::GetAmount()</a>, <a class="el" href="../../#l00447">AuraEffect::GetAuraType()</a>, <a class="el" href="../../#l00133">GetDuration()</a>, <a class="el" href="../../#l00175">GetEffect()</a>, <a class="el" href="../../#l00442">AuraEffect::GetMiscValue()</a>, <a class="el" href="../../#l01082">IsPassive()</a>, <a class="el" href="../../#l00139">IsPermanent()</a>, and <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02021">CanStackWith()</a>.</p>

</div>
</div>
<a id="a64355d207f7177e6d35a568b93ec322f" name="a64355d207f7177e6d35a568b93ec322f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64355d207f7177e6d35a568b93ec322f">&#9670;&#160;</a></span>IsDeathPersistent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsDeathPersistent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1088</span>{</div>
<div class="line"><span class="lineno"> 1089</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a40f8c8d2e4fc70591e503113a4328f46">IsDeathPersistent</a>();</div>
<div class="line"><span class="lineno"> 1090</span>}</div>
<div class="ttc" id="aa10906_html_a40f8c8d2e4fc70591e503113a4328f46"><div class="ttname"><a href="../../d4/db9/a10906.html#a40f8c8d2e4fc70591e503113a4328f46">SpellInfo::IsDeathPersistent</a></div><div class="ttdeci">bool IsDeathPersistent() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1217</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00100">GetSpellInfo()</a>, and <a class="el" href="../../#l01217">SpellInfo::IsDeathPersistent()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01145">AuraScript::IsDeathPersistent()</a>, and <a class="el" href="../../#l05349">Unit::RemoveAllAurasOnDeath()</a>.</p>

</div>
</div>
<a id="ace74284832d9713a175bb3905449f954" name="ace74284832d9713a175bb3905449f954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace74284832d9713a175bb3905449f954">&#9670;&#160;</a></span>IsExpired()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsExpired </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  138</span>{ <span class="keywordflow">return</span> !<a class="code hl_function" href="../../d3/d9a/a10802.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">GetDuration</a>();}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00133">GetDuration()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l01090">AuraScript::IsExpired()</a>, and <a class="el" href="../../#l00139">DynamicObject::Update()</a>.</p>

</div>
</div>
<a id="ae24c050668e78ef9d8728e6b5bd77c12" name="ae24c050668e78ef9d8728e6b5bd77c12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae24c050668e78ef9d8728e6b5bd77c12">&#9670;&#160;</a></span>IsPassive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsPassive </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1083</span>{</div>
<div class="line"><span class="lineno"> 1084</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a44ac36a7f40b3c5b26a82a3bb0e8af30">IsPassive</a>();</div>
<div class="line"><span class="lineno"> 1085</span>}</div>
<div class="ttc" id="aa10906_html_a44ac36a7f40b3c5b26a82a3bb0e8af30"><div class="ttname"><a href="../../d4/db9/a10906.html#a44ac36a7f40b3c5b26a82a3bb0e8af30">SpellInfo::IsPassive</a></div><div class="ttdeci">bool IsPassive() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1098</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00100">GetSpellInfo()</a>, and <a class="el" href="../../#l01098">SpellInfo::IsPassive()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00799">AuraEffect::ApplySpellMod()</a>, <a class="el" href="../../#l00844">CalcMaxDuration()</a>, <a class="el" href="../../#l00593">AuraEffect::CalculatePeriodic()</a>, <a class="el" href="../../#l01097">CanBeSaved()</a>, <a class="el" href="../../#l01137">CanBeSentToClient()</a>, <a class="el" href="../../#l02021">CanStackWith()</a>, <a class="el" href="../../#l05724">Player::CheckAreaExploreAndOutdoor()</a>, <a class="el" href="../../#l05591">Spell::EffectStealBeneficialBuff()</a>, <a class="el" href="../../#l03140">Spell::EffectSummonPet()</a>, <a class="el" href="../../#l05605">Unit::GetDispellableAuraList()</a>, <a class="el" href="../../#l01992">IsAuraStronger()</a>, <a class="el" href="../../#l01140">AuraScript::IsPassive()</a>, <a class="el" href="../../#l02227">IsProcTriggeredOnEvent()</a>, <a class="el" href="../../#l00452">list_commandscript::ListAurasCommand()</a>, <a class="el" href="../../#l03480">Spell::prepare()</a>, <a class="el" href="../../#l05349">Unit::RemoveAllAurasOnDeath()</a>, <a class="el" href="../../#l05372">Unit::RemoveAllAurasRequiringDeadTarget()</a>, <a class="el" href="../../#l05335">Unit::RemoveArenaAuras()</a>, <a class="el" href="../../#l05437">Unit::RemoveEvadeAuras()</a>, and <a class="el" href="../../#l12587">Player::RemoveItemDependentAurasAndCasts()</a>.</p>

</div>
</div>
<a id="af70f37c9e40b7038cf952c2969ae9ab2" name="af70f37c9e40b7038cf952c2969ae9ab2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af70f37c9e40b7038cf952c2969ae9ab2">&#9670;&#160;</a></span>IsPermanent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsPermanent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  139</span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#a14457cfa6d589b8024bbeeb1d4aa03d3">GetMaxDuration</a>() == -1; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00129">GetMaxDuration()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00460">Battleground::_ProcessJoin()</a>, <a class="el" href="../../#l01687">Pet::_SaveAuras()</a>, <a class="el" href="../../#l00799">AuraEffect::ApplySpellMod()</a>, <a class="el" href="../../#l01992">IsAuraStronger()</a>, <a class="el" href="../../#l01095">AuraScript::IsPermanent()</a>, and <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>.</p>

</div>
</div>
<a id="a9b82ca1499317e9a44b1315e16472d44" name="a9b82ca1499317e9a44b1315e16472d44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b82ca1499317e9a44b1315e16472d44">&#9670;&#160;</a></span>IsProcOnCooldown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsProcOnCooldown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2192</span>{</div>
<div class="line"><span class="lineno"> 2193</span>    <span class="comment">/*if (m_procCooldown)</span></div>
<div class="line"><span class="lineno"> 2194</span><span class="comment">    {</span></div>
<div class="line"><span class="lineno"> 2195</span><span class="comment">        if (m_procCooldown &gt; GameTime::GetGameTime().count())</span></div>
<div class="line"><span class="lineno"> 2196</span><span class="comment">            return true;</span></div>
<div class="line"><span class="lineno"> 2197</span><span class="comment">    }*/</span></div>
<div class="line"><span class="lineno"> 2198</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2199</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l02227">IsProcTriggeredOnEvent()</a>.</p>

</div>
</div>
<a id="ac514e08ac3f8733a650d243239dada58" name="ac514e08ac3f8733a650d243239dada58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac514e08ac3f8733a650d243239dada58">&#9670;&#160;</a></span>IsProcTriggeredOnEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsProcTriggeredOnEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000120">Todo:</a></b></dt><dd>: </dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000121">Todo:</a></b></dt><dd>: </dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000122">Todo:</a></b></dt><dd>: this needs to be unified for all kinds of auras </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 2228</span>{</div>
<div class="line"><span class="lineno"> 2229</span>    <a class="code hl_struct" href="../../d1/d6c/a10914.html">SpellProcEntry</a> <span class="keyword">const</span>* procEntry = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellProcEntry(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>());</div>
<div class="line"><span class="lineno"> 2230</span>    <span class="comment">// only auras with spell proc entry can trigger proc</span></div>
<div class="line"><span class="lineno"> 2231</span>    <span class="keywordflow">if</span> (!procEntry)</div>
<div class="line"><span class="lineno"> 2232</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2233</span> </div>
<div class="line"><span class="lineno"> 2234</span>    <span class="comment">// check if we have charges to proc with</span></div>
<div class="line"><span class="lineno"> 2235</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a62c2b89c6a9269aba7870b36e5872330">IsUsingCharges</a>() &amp;&amp; !<a class="code hl_function" href="../../d3/d9a/a10802.html#ab07705be94c0c10fce558c80d7208e0b">GetCharges</a>())</div>
<div class="line"><span class="lineno"> 2236</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2237</span> </div>
<div class="line"><span class="lineno"> 2238</span>    <span class="comment">// check proc cooldown</span></div>
<div class="line"><span class="lineno"> 2239</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a9b82ca1499317e9a44b1315e16472d44">IsProcOnCooldown</a>())</div>
<div class="line"><span class="lineno"> 2240</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2241</span> </div>
<div class="line"><span class="lineno"> 2243</span>    <span class="comment">// something about triggered spells triggering, and add extra attack effect</span></div>
<div class="line"><span class="lineno"> 2244</span> </div>
<div class="line"><span class="lineno"> 2245</span>    <span class="comment">// do checks against db data</span></div>
<div class="line"><span class="lineno"> 2246</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;CanSpellTriggerProcOnEvent(*procEntry, eventInfo))</div>
<div class="line"><span class="lineno"> 2247</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2248</span> </div>
<div class="line"><span class="lineno"> 2249</span>    <span class="comment">// do checks using conditions table</span></div>
<div class="line"><span class="lineno"> 2250</span>    <a class="code hl_typedef" href="../../dd/d51/a03842.html#ae942a8e25dc24ce42e62625bb583c0dd">ConditionList</a> conditions = <a class="code hl_define" href="../../dd/d51/a03842.html#a5ab0412c3dc24dbd690ba6d7f01657f8">sConditionMgr</a>-&gt;GetConditionsForNotGroupedEntry(<a class="code hl_enumvalue" href="../../dd/d51/a03842.html#a5ba040e3c1f6efbefb512efb9bd69a7faf346b42db2a33729fa82322e5b422843">CONDITION_SOURCE_TYPE_SPELL_PROC</a>, <a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>());</div>
<div class="line"><span class="lineno"> 2251</span>    <a class="code hl_struct" href="../../dd/d69/a07650.html">ConditionSourceInfo</a> condInfo = <a class="code hl_struct" href="../../dd/d69/a07650.html">ConditionSourceInfo</a>(eventInfo.<a class="code hl_function" href="../../d3/daf/a08498.html#a89d8ab0bf0b01e3e1ca4ae10a3cbde10">GetActor</a>(), eventInfo.<a class="code hl_function" href="../../d3/daf/a08498.html#a1b55684ec526bdc9b7d5d3b2ac4297a9">GetActionTarget</a>());</div>
<div class="line"><span class="lineno"> 2252</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="../../dd/d51/a03842.html#a5ab0412c3dc24dbd690ba6d7f01657f8">sConditionMgr</a>-&gt;IsObjectMeetToConditions(condInfo, conditions))</div>
<div class="line"><span class="lineno"> 2253</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2254</span> </div>
<div class="line"><span class="lineno"> 2255</span>    <span class="comment">// AuraScript Hook</span></div>
<div class="line"><span class="lineno"> 2256</span>    <span class="keywordtype">bool</span> check = <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="../../d3/d9a/a10802.html">Aura</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="../../d3/d9a/a10802.html#a87be004e2c34b6652cd5350689b24dc3">CallScriptCheckProcHandlers</a>(aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 2257</span>    <span class="keywordflow">if</span> (!check)</div>
<div class="line"><span class="lineno"> 2258</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2259</span> </div>
<div class="line"><span class="lineno"> 2261</span>    <span class="comment">// do allow additional requirements for procs</span></div>
<div class="line"><span class="lineno"> 2262</span>    <span class="comment">// this is needed because this is the last moment in which you can prevent aura charge drop on proc</span></div>
<div class="line"><span class="lineno"> 2263</span>    <span class="comment">// and possibly a way to prevent default checks (if there&#39;re going to be any)</span></div>
<div class="line"><span class="lineno"> 2264</span> </div>
<div class="line"><span class="lineno"> 2265</span>    <span class="comment">// Check if current equipment meets aura requirements</span></div>
<div class="line"><span class="lineno"> 2266</span>    <span class="comment">// do that only for passive spells</span></div>
<div class="line"><span class="lineno"> 2268</span><span class="comment"></span>    <a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../d4/d87/a10798.html#a0447441f89446b170d751abbdda541b8">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 2269</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>() &amp;&amp; target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a6dc0b0fd741c87fae3faccea295b0616">EquippedItemClass</a> != -1)</div>
<div class="line"><span class="lineno"> 2270</span>    {</div>
<div class="line"><span class="lineno"> 2271</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a6f95d0d447e8085b1097ac9965af2a81a4edf48bdff5870bc31c248bd4a299a17">SPELL_ATTR3_NO_PROC_EQUIP_REQUIREMENT</a>))</div>
<div class="line"><span class="lineno"> 2272</span>        {</div>
<div class="line"><span class="lineno"> 2273</span>            <a class="code hl_class" href="../../d9/d36/a08106.html">Item</a>* item = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 2274</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a6dc0b0fd741c87fae3faccea295b0616">EquippedItemClass</a> == <a class="code hl_enumvalue" href="../../da/dfd/a03401.html#ab76605e05d3b13f61472b9a89cd22a68aeaefdfc527a31c7c733104c01368ac2a">ITEM_CLASS_WEAPON</a>)</div>
<div class="line"><span class="lineno"> 2275</span>            {</div>
<div class="line"><span class="lineno"> 2276</span>                <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#abbc1994b31e8c2706a99c0d35269b89c">IsInFeralForm</a>())</div>
<div class="line"><span class="lineno"> 2277</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2278</span> </div>
<div class="line"><span class="lineno"> 2279</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d75/a08490.html">DamageInfo</a> <span class="keyword">const</span>* damageInfo = eventInfo.<a class="code hl_function" href="../../d3/daf/a08498.html#ad2eb8dffb2a2b91b02ca1b56861c7221">GetDamageInfo</a>())</div>
<div class="line"><span class="lineno"> 2280</span>                {</div>
<div class="line"><span class="lineno"> 2281</span>                    <span class="keywordflow">switch</span> (damageInfo-&gt;GetAttackType())</div>
<div class="line"><span class="lineno"> 2282</span>                    {</div>
<div class="line"><span class="lineno"> 2283</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>:</div>
<div class="line"><span class="lineno"> 2284</span>                            item = target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a353e85643f04f4a98fb0c59a3a13e982">GetUseableItemByPos</a>(<a class="code hl_define" href="../../d7/d13/a03365.html#ad3dd8ed856e16139eaa67147d40cf24e">INVENTORY_SLOT_BAG_0</a>, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd">EQUIPMENT_SLOT_MAINHAND</a>);</div>
<div class="line"><span class="lineno"> 2285</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2286</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>:</div>
<div class="line"><span class="lineno"> 2287</span>                            item = target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a353e85643f04f4a98fb0c59a3a13e982">GetUseableItemByPos</a>(<a class="code hl_define" href="../../d7/d13/a03365.html#ad3dd8ed856e16139eaa67147d40cf24e">INVENTORY_SLOT_BAG_0</a>, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afab44cb19f2d7a24d14ef74748716cd731">EQUIPMENT_SLOT_OFFHAND</a>);</div>
<div class="line"><span class="lineno"> 2288</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2289</span>                        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2290</span>                            item = target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a353e85643f04f4a98fb0c59a3a13e982">GetUseableItemByPos</a>(<a class="code hl_define" href="../../d7/d13/a03365.html#ad3dd8ed856e16139eaa67147d40cf24e">INVENTORY_SLOT_BAG_0</a>, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afafc73f33a54a6e48f474648a2ad5bd72a">EQUIPMENT_SLOT_RANGED</a>);</div>
<div class="line"><span class="lineno"> 2291</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2292</span>                    }</div>
<div class="line"><span class="lineno"> 2293</span>                }</div>
<div class="line"><span class="lineno"> 2294</span>            }</div>
<div class="line"><span class="lineno"> 2295</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a6dc0b0fd741c87fae3faccea295b0616">EquippedItemClass</a> == <a class="code hl_enumvalue" href="../../da/dfd/a03401.html#ab76605e05d3b13f61472b9a89cd22a68acd2b804e85add83cfd65339c4a084f48">ITEM_CLASS_ARMOR</a>)</div>
<div class="line"><span class="lineno"> 2296</span>            {</div>
<div class="line"><span class="lineno"> 2297</span>                <span class="comment">// Check if player is wearing shield</span></div>
<div class="line"><span class="lineno"> 2298</span>                item = target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a353e85643f04f4a98fb0c59a3a13e982">GetUseableItemByPos</a>(<a class="code hl_define" href="../../d7/d13/a03365.html#ad3dd8ed856e16139eaa67147d40cf24e">INVENTORY_SLOT_BAG_0</a>, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afab44cb19f2d7a24d14ef74748716cd731">EQUIPMENT_SLOT_OFFHAND</a>);</div>
<div class="line"><span class="lineno"> 2299</span>            }</div>
<div class="line"><span class="lineno"> 2300</span> </div>
<div class="line"><span class="lineno"> 2301</span>            <span class="keywordflow">if</span> (!item || item-&gt;<a class="code hl_function" href="../../d9/d36/a08106.html#a65aafded62a4c193fc631a1ed5c72f71">IsBroken</a>() || !item-&gt;<a class="code hl_function" href="../../d9/d36/a08106.html#af64f6b0baa8ab4ce263b60058af19196">IsFitToSpellRequirements</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()))</div>
<div class="line"><span class="lineno"> 2302</span>            {</div>
<div class="line"><span class="lineno"> 2303</span>                <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2304</span>            }</div>
<div class="line"><span class="lineno"> 2305</span>        }</div>
<div class="line"><span class="lineno"> 2306</span>    }</div>
<div class="line"><span class="lineno"> 2307</span> </div>
<div class="line"><span class="lineno"> 2308</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../dc/dc9/a00389.html#a4b15099bc81731469c5078a778673c94">roll_chance_f</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#aa515b9daf648d268f02ef974b3573550">CalcProcChance</a>(*procEntry, eventInfo));</div>
<div class="line"><span class="lineno"> 2309</span>}</div>
<div class="ttc" id="aa00389_html_a4b15099bc81731469c5078a778673c94"><div class="ttname"><a href="../../dc/dc9/a00389.html#a4b15099bc81731469c5078a778673c94">roll_chance_f</a></div><div class="ttdeci">bool roll_chance_f(float chance)</div><div class="ttdef"><b>Definition:</b> Random.h:53</div></div>
<div class="ttc" id="aa02771_html_a6f95d0d447e8085b1097ac9965af2a81a4edf48bdff5870bc31c248bd4a299a17"><div class="ttname"><a href="../../d0/dbd/a02771.html#a6f95d0d447e8085b1097ac9965af2a81a4edf48bdff5870bc31c248bd4a299a17">SPELL_ATTR3_NO_PROC_EQUIP_REQUIREMENT</a></div><div class="ttdeci">@ SPELL_ATTR3_NO_PROC_EQUIP_REQUIREMENT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:494</div></div>
<div class="ttc" id="aa03365_html_a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd"><div class="ttname"><a href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd">EQUIPMENT_SLOT_MAINHAND</a></div><div class="ttdeci">@ EQUIPMENT_SLOT_MAINHAND</div><div class="ttdef"><b>Definition:</b> Player.h:690</div></div>
<div class="ttc" id="aa03365_html_a93b8041f948d575ef2d23746324a37afab44cb19f2d7a24d14ef74748716cd731"><div class="ttname"><a href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afab44cb19f2d7a24d14ef74748716cd731">EQUIPMENT_SLOT_OFFHAND</a></div><div class="ttdeci">@ EQUIPMENT_SLOT_OFFHAND</div><div class="ttdef"><b>Definition:</b> Player.h:691</div></div>
<div class="ttc" id="aa03365_html_a93b8041f948d575ef2d23746324a37afafc73f33a54a6e48f474648a2ad5bd72a"><div class="ttname"><a href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afafc73f33a54a6e48f474648a2ad5bd72a">EQUIPMENT_SLOT_RANGED</a></div><div class="ttdeci">@ EQUIPMENT_SLOT_RANGED</div><div class="ttdef"><b>Definition:</b> Player.h:692</div></div>
<div class="ttc" id="aa03365_html_ad3dd8ed856e16139eaa67147d40cf24e"><div class="ttname"><a href="../../d7/d13/a03365.html#ad3dd8ed856e16139eaa67147d40cf24e">INVENTORY_SLOT_BAG_0</a></div><div class="ttdeci">#define INVENTORY_SLOT_BAG_0</div><div class="ttdef"><b>Definition:</b> Player.h:670</div></div>
<div class="ttc" id="aa03401_html_ab76605e05d3b13f61472b9a89cd22a68acd2b804e85add83cfd65339c4a084f48"><div class="ttname"><a href="../../da/dfd/a03401.html#ab76605e05d3b13f61472b9a89cd22a68acd2b804e85add83cfd65339c4a084f48">ITEM_CLASS_ARMOR</a></div><div class="ttdeci">@ ITEM_CLASS_ARMOR</div><div class="ttdef"><b>Definition:</b> ItemTemplate.h:295</div></div>
<div class="ttc" id="aa03401_html_ab76605e05d3b13f61472b9a89cd22a68aeaefdfc527a31c7c733104c01368ac2a"><div class="ttname"><a href="../../da/dfd/a03401.html#ab76605e05d3b13f61472b9a89cd22a68aeaefdfc527a31c7c733104c01368ac2a">ITEM_CLASS_WEAPON</a></div><div class="ttdeci">@ ITEM_CLASS_WEAPON</div><div class="ttdef"><b>Definition:</b> ItemTemplate.h:293</div></div>
<div class="ttc" id="aa03515_html_a85524ab4e1fb005ed500bd190f79c352a052681ec165e5b5e3edcf2089607ae67"><div class="ttname"><a href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a></div><div class="ttdeci">@ OFF_ATTACK</div><div class="ttdef"><b>Definition:</b> Unit.h:210</div></div>
<div class="ttc" id="aa03515_html_a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae"><div class="ttname"><a href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a></div><div class="ttdeci">@ BASE_ATTACK</div><div class="ttdef"><b>Definition:</b> Unit.h:209</div></div>
<div class="ttc" id="aa03842_html_a5ab0412c3dc24dbd690ba6d7f01657f8"><div class="ttname"><a href="../../dd/d51/a03842.html#a5ab0412c3dc24dbd690ba6d7f01657f8">sConditionMgr</a></div><div class="ttdeci">#define sConditionMgr</div><div class="ttdef"><b>Definition:</b> ConditionMgr.h:290</div></div>
<div class="ttc" id="aa03842_html_a5ba040e3c1f6efbefb512efb9bd69a7faf346b42db2a33729fa82322e5b422843"><div class="ttname"><a href="../../dd/d51/a03842.html#a5ba040e3c1f6efbefb512efb9bd69a7faf346b42db2a33729fa82322e5b422843">CONDITION_SOURCE_TYPE_SPELL_PROC</a></div><div class="ttdeci">@ CONDITION_SOURCE_TYPE_SPELL_PROC</div><div class="ttdef"><b>Definition:</b> ConditionMgr.h:147</div></div>
<div class="ttc" id="aa03842_html_ae942a8e25dc24ce42e62625bb583c0dd"><div class="ttname"><a href="../../dd/d51/a03842.html#ae942a8e25dc24ce42e62625bb583c0dd">ConditionList</a></div><div class="ttdeci">std::list&lt; Condition * &gt; ConditionList</div><div class="ttdef"><b>Definition:</b> ConditionMgr.h:237</div></div>
<div class="ttc" id="aa07650_html"><div class="ttname"><a href="../../dd/d69/a07650.html">ConditionSourceInfo</a></div><div class="ttdef"><b>Definition:</b> ConditionMgr.h:182</div></div>
<div class="ttc" id="aa08106_html"><div class="ttname"><a href="../../d9/d36/a08106.html">Item</a></div><div class="ttdef"><b>Definition:</b> Item.h:220</div></div>
<div class="ttc" id="aa08106_html_a65aafded62a4c193fc631a1ed5c72f71"><div class="ttname"><a href="../../d9/d36/a08106.html#a65aafded62a4c193fc631a1ed5c72f71">Item::IsBroken</a></div><div class="ttdeci">bool IsBroken() const</div><div class="ttdef"><b>Definition:</b> Item.h:257</div></div>
<div class="ttc" id="aa08106_html_af64f6b0baa8ab4ce263b60058af19196"><div class="ttname"><a href="../../d9/d36/a08106.html#af64f6b0baa8ab4ce263b60058af19196">Item::IsFitToSpellRequirements</a></div><div class="ttdeci">bool IsFitToSpellRequirements(SpellInfo const *spellInfo) const</div><div class="ttdef"><b>Definition:</b> Item.cpp:884</div></div>
<div class="ttc" id="aa08394_html_a353e85643f04f4a98fb0c59a3a13e982"><div class="ttname"><a href="../../da/da3/a08394.html#a353e85643f04f4a98fb0c59a3a13e982">Player::GetUseableItemByPos</a></div><div class="ttdeci">Item * GetUseableItemByPos(uint8 bag, uint8 slot) const</div><div class="ttdef"><b>Definition:</b> Player.h:1244</div></div>
<div class="ttc" id="aa08490_html"><div class="ttname"><a href="../../de/d75/a08490.html">DamageInfo</a></div><div class="ttdef"><b>Definition:</b> Unit.h:330</div></div>
<div class="ttc" id="aa08498_html_a1b55684ec526bdc9b7d5d3b2ac4297a9"><div class="ttname"><a href="../../d3/daf/a08498.html#a1b55684ec526bdc9b7d5d3b2ac4297a9">ProcEventInfo::GetActionTarget</a></div><div class="ttdeci">Unit * GetActionTarget() const</div><div class="ttdef"><b>Definition:</b> Unit.h:440</div></div>
<div class="ttc" id="aa08498_html_a89d8ab0bf0b01e3e1ca4ae10a3cbde10"><div class="ttname"><a href="../../d3/daf/a08498.html#a89d8ab0bf0b01e3e1ca4ae10a3cbde10">ProcEventInfo::GetActor</a></div><div class="ttdeci">Unit * GetActor()</div><div class="ttdef"><b>Definition:</b> Unit.h:439</div></div>
<div class="ttc" id="aa08526_html_abbc1994b31e8c2706a99c0d35269b89c"><div class="ttname"><a href="../../d6/d15/a08526.html#abbc1994b31e8c2706a99c0d35269b89c">Unit::IsInFeralForm</a></div><div class="ttdeci">bool IsInFeralForm() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1823</div></div>
<div class="ttc" id="aa10802_html_a87be004e2c34b6652cd5350689b24dc3"><div class="ttname"><a href="../../d3/d9a/a10802.html#a87be004e2c34b6652cd5350689b24dc3">Aura::CallScriptCheckProcHandlers</a></div><div class="ttdeci">bool CallScriptCheckProcHandlers(AuraApplication const *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2633</div></div>
<div class="ttc" id="aa10802_html_a9b82ca1499317e9a44b1315e16472d44"><div class="ttname"><a href="../../d3/d9a/a10802.html#a9b82ca1499317e9a44b1315e16472d44">Aura::IsProcOnCooldown</a></div><div class="ttdeci">bool IsProcOnCooldown() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2191</div></div>
<div class="ttc" id="aa10802_html_aa515b9daf648d268f02ef974b3573550"><div class="ttname"><a href="../../d3/d9a/a10802.html#aa515b9daf648d268f02ef974b3573550">Aura::CalcProcChance</a></div><div class="ttdeci">float CalcProcChance(SpellProcEntry const &amp;procEntry, ProcEventInfo &amp;eventInfo) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2311</div></div>
<div class="ttc" id="aa10906_html_a6dc0b0fd741c87fae3faccea295b0616"><div class="ttname"><a href="../../d4/db9/a10906.html#a6dc0b0fd741c87fae3faccea295b0616">SpellInfo::EquippedItemClass</a></div><div class="ttdeci">int32 EquippedItemClass</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:375</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l02311">CalcProcChance()</a>, <a class="el" href="../../#l02633">CallScriptCheckProcHandlers()</a>, <a class="el" href="../../#l00147">CONDITION_SOURCE_TYPE_SPELL_PROC</a>, <a class="el" href="../../#l00690">EQUIPMENT_SLOT_MAINHAND</a>, <a class="el" href="../../#l00691">EQUIPMENT_SLOT_OFFHAND</a>, <a class="el" href="../../#l00692">EQUIPMENT_SLOT_RANGED</a>, <a class="el" href="../../#l00375">SpellInfo::EquippedItemClass</a>, <a class="el" href="../../#l00440">ProcEventInfo::GetActionTarget()</a>, <a class="el" href="../../#l00439">ProcEventInfo::GetActor()</a>, <a class="el" href="../../#l00141">GetCharges()</a>, <a class="el" href="../../#l00449">ProcEventInfo::GetDamageInfo()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01244">Player::GetUseableItemByPos()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l00670">INVENTORY_SLOT_BAG_0</a>, <a class="el" href="../../#l00257">Item::IsBroken()</a>, <a class="el" href="../../#l00884">Item::IsFitToSpellRequirements()</a>, <a class="el" href="../../#l01823">Unit::IsInFeralForm()</a>, <a class="el" href="../../#l01082">IsPassive()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l02191">IsProcOnCooldown()</a>, <a class="el" href="../../#l00200">IsUsingCharges()</a>, <a class="el" href="../../#l00295">ITEM_CLASS_ARMOR</a>, <a class="el" href="../../#l00293">ITEM_CLASS_WEAPON</a>, <a class="el" href="../../#l00210">OFF_ATTACK</a>, <a class="el" href="../../#l00053">roll_chance_f()</a>, <a class="el" href="../../#l00290">sConditionMgr</a>, <a class="el" href="../../#l00494">SPELL_ATTR3_NO_PROC_EQUIP_REQUIREMENT</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a462457cadd52ba8a0edd5609c71ebbc0" name="a462457cadd52ba8a0edd5609c71ebbc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a462457cadd52ba8a0edd5609c71ebbc0">&#9670;&#160;</a></span>IsRemoved()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsRemoved </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  161</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#ae63436802a402d26115d21f4a2073e1a">m_isRemoved</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00268">m_isRemoved</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04414">Unit::_AddAura()</a>, <a class="el" href="../../#l04453">Unit::_CreateAuraApplication()</a>, <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../#l00364">Create()</a>, <a class="el" href="../../#l05821">Unit::GetDiseasesByCaster()</a>, <a class="el" href="../../#l00554">SpellScript::GetHitAura()</a>, <a class="el" href="../../#l01241">HandleAllEffects()</a>, <a class="el" href="../../#l01232">RecalculateAmountOfEffects()</a>, <a class="el" href="../../#l02793">UnitAura::Remove()</a>, <a class="el" href="../../#l02880">DynObjAura::Remove()</a>, <a class="el" href="../../#l00222">DynamicObject::RemoveAura()</a>, <a class="el" href="../../#l04806">Unit::RemoveAura()</a>, <a class="el" href="../../#l04705">Unit::RemoveOwnedAura()</a>, <a class="el" href="../../#l00139">DynamicObject::Update()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

</div>
</div>
<a id="abbd4948d31a548af813815efb91ff311" name="abbd4948d31a548af813815efb91ff311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbd4948d31a548af813815efb91ff311">&#9670;&#160;</a></span>IsRemovedOnShapeLost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsRemovedOnShapeLost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1093</span>{</div>
<div class="line"><span class="lineno"> 1094</span>    <span class="keywordflow">return</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>() == target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>() &amp;&amp; <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a21cf48a7eb77db7f731ebe746d2d6878">Stances</a> &amp;&amp; !<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a583cc1b9a8909370e4d51a890d897668a7d005cac4a5ae05e73630754eee639fc">SPELL_ATTR2_ALLOW_WHILE_NOT_SHAPESHIFTED</a>) &amp;&amp; !<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada181bc0f8031c0a2e477f0eb213ae3fc0">SPELL_ATTR0_NOT_SHAPESHIFTED</a>));</div>
<div class="line"><span class="lineno"> 1095</span>}</div>
<div class="ttc" id="aa02771_html_a583cc1b9a8909370e4d51a890d897668a7d005cac4a5ae05e73630754eee639fc"><div class="ttname"><a href="../../d0/dbd/a02771.html#a583cc1b9a8909370e4d51a890d897668a7d005cac4a5ae05e73630754eee639fc">SPELL_ATTR2_ALLOW_WHILE_NOT_SHAPESHIFTED</a></div><div class="ttdeci">@ SPELL_ATTR2_ALLOW_WHILE_NOT_SHAPESHIFTED</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:475</div></div>
<div class="ttc" id="aa02771_html_a9dcd0ba8d94905ba214797c12e7c44ada181bc0f8031c0a2e477f0eb213ae3fc0"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada181bc0f8031c0a2e477f0eb213ae3fc0">SPELL_ATTR0_NOT_SHAPESHIFTED</a></div><div class="ttdeci">@ SPELL_ATTR0_NOT_SHAPESHIFTED</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:398</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00105">GetCasterGUID()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l00398">SPELL_ATTR0_NOT_SHAPESHIFTED</a>, <a class="el" href="../../#l00475">SPELL_ATTR2_ALLOW_WHILE_NOT_SHAPESHIFTED</a>, and <a class="el" href="../../#l00333">SpellInfo::Stances</a>.</p>

</div>
</div>
<a id="afb782970ace7a9385038481911d388fc" name="afb782970ace7a9385038481911d388fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb782970ace7a9385038481911d388fc">&#9670;&#160;</a></span>IsSingleTarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsSingleTarget </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  164</span>{<span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#af22450afa8bf33c979c0a0f7d801ab4c">m_isSingleTarget</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00269">m_isSingleTarget</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04414">Unit::_AddAura()</a>, <a class="el" href="../../#l01970">CanBeAppliedOn()</a>, <a class="el" href="../../#l01097">CanBeSaved()</a>, <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>, <a class="el" href="../../#l05145">Unit::RemoveNotOwnSingleTargetAuras()</a>, and <a class="el" href="../../#l04705">Unit::RemoveOwnedAura()</a>.</p>

</div>
</div>
<a id="a51d9e2f08034d14c95ab54045d6860a1" name="a51d9e2f08034d14c95ab54045d6860a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51d9e2f08034d14c95ab54045d6860a1">&#9670;&#160;</a></span>IsSingleTargetWith()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsSingleTargetWith </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d9a/a10802.html">Aura</a> const *&#160;</td>
          <td class="paramname"><em>aura</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1143</span>{</div>
<div class="line"><span class="lineno"> 1144</span>    <span class="comment">// Same spell?</span></div>
<div class="line"><span class="lineno"> 1145</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;IsRankOf(aura-&gt;GetSpellInfo()))</div>
<div class="line"><span class="lineno"> 1146</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1147</span> </div>
<div class="line"><span class="lineno"> 1148</span>    <a class="code hl_enumeration" href="../../d4/d44/a03065.html#a967f80d0c19acebc2e322c73b7b16442">SpellSpecificType</a> spec = <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a5f7fd27528084c1e80f74896fac4ac53">GetSpellSpecific</a>();</div>
<div class="line"><span class="lineno"> 1149</span>    <span class="comment">// spell with single target specific types</span></div>
<div class="line"><span class="lineno"> 1150</span>    <span class="keywordflow">switch</span> (spec)</div>
<div class="line"><span class="lineno"> 1151</span>    {</div>
<div class="line"><span class="lineno"> 1152</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d4/d44/a03065.html#a967f80d0c19acebc2e322c73b7b16442a7fec7caa0a8ef5d84d2c896a2e06520f">SPELL_SPECIFIC_JUDGEMENT</a>:</div>
<div class="line"><span class="lineno"> 1153</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d4/d44/a03065.html#a967f80d0c19acebc2e322c73b7b16442ab739709876cc712a09e288c112b7d128">SPELL_SPECIFIC_MAGE_POLYMORPH</a>:</div>
<div class="line"><span class="lineno"> 1154</span>            <span class="keywordflow">if</span> (aura-&gt;GetSpellInfo()-&gt;GetSpellSpecific() == spec)</div>
<div class="line"><span class="lineno"> 1155</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1156</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1157</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1158</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1159</span>    }</div>
<div class="line"><span class="lineno"> 1160</span> </div>
<div class="line"><span class="lineno"> 1161</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a6890e111fba863b7163fa5eb0b0870f5">HasEffectType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a583bf7e94825b7252010ad12dd50ed6f">SPELL_AURA_CONTROL_VEHICLE</a>) &amp;&amp; aura-&gt;HasEffectType(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a583bf7e94825b7252010ad12dd50ed6f">SPELL_AURA_CONTROL_VEHICLE</a>))</div>
<div class="line"><span class="lineno"> 1162</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1163</span> </div>
<div class="line"><span class="lineno"> 1164</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1165</span>}</div>
<div class="ttc" id="aa03065_html_a967f80d0c19acebc2e322c73b7b16442"><div class="ttname"><a href="../../d4/d44/a03065.html#a967f80d0c19acebc2e322c73b7b16442">SpellSpecificType</a></div><div class="ttdeci">SpellSpecificType</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:149</div></div>
<div class="ttc" id="aa03065_html_a967f80d0c19acebc2e322c73b7b16442a7fec7caa0a8ef5d84d2c896a2e06520f"><div class="ttname"><a href="../../d4/d44/a03065.html#a967f80d0c19acebc2e322c73b7b16442a7fec7caa0a8ef5d84d2c896a2e06520f">SPELL_SPECIFIC_JUDGEMENT</a></div><div class="ttdeci">@ SPELL_SPECIFIC_JUDGEMENT</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:161</div></div>
<div class="ttc" id="aa03065_html_a967f80d0c19acebc2e322c73b7b16442ab739709876cc712a09e288c112b7d128"><div class="ttname"><a href="../../d4/d44/a03065.html#a967f80d0c19acebc2e322c73b7b16442ab739709876cc712a09e288c112b7d128">SPELL_SPECIFIC_MAGE_POLYMORPH</a></div><div class="ttdeci">@ SPELL_SPECIFIC_MAGE_POLYMORPH</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:160</div></div>
<div class="ttc" id="aa10906_html_a5f7fd27528084c1e80f74896fac4ac53"><div class="ttname"><a href="../../d4/db9/a10906.html#a5f7fd27528084c1e80f74896fac4ac53">SpellInfo::GetSpellSpecific</a></div><div class="ttdeci">SpellSpecificType GetSpellSpecific() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:2137</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l02137">SpellInfo::GetSpellSpecific()</a>, <a class="el" href="../../#l01222">HasEffectType()</a>, <a class="el" href="../../#l00299">SPELL_AURA_CONTROL_VEHICLE</a>, <a class="el" href="../../#l00161">SPELL_SPECIFIC_JUDGEMENT</a>, and <a class="el" href="../../#l00160">SPELL_SPECIFIC_MAGE_POLYMORPH</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04414">Unit::_AddAura()</a>.</p>

</div>
</div>
<a id="a62c2b89c6a9269aba7870b36e5872330" name="a62c2b89c6a9269aba7870b36e5872330"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62c2b89c6a9269aba7870b36e5872330">&#9670;&#160;</a></span>IsUsingCharges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::IsUsingCharges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  200</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/d9a/a10802.html#ad8811634ba5d82b9581e94e8a0fd6097">m_isUsingCharges</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00270">m_isUsingCharges</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01097">CanBeSaved()</a>, <a class="el" href="../../#l02227">IsProcTriggeredOnEvent()</a>, <a class="el" href="../../#l00973">ModCharges()</a>, <a class="el" href="../../#l02206">PrepareProcToTrigger()</a>, <a class="el" href="../../#l10019">Player::RemoveSpellMods()</a>, <a class="el" href="../../#l09945">Player::RestoreSpellMods()</a>, and <a class="el" href="../../#l02331">TriggerProcOnEvent()</a>.</p>

</div>
</div>
<a id="a9ed84a2b95a1cb898a682c809dd25d2b" name="a9ed84a2b95a1cb898a682c809dd25d2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ed84a2b95a1cb898a682c809dd25d2b">&#9670;&#160;</a></span>LoadScripts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::LoadScripts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2357</span>{</div>
<div class="line"><span class="lineno"> 2358</span>    <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;CreateAuraScripts(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>, <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>);</div>
<div class="line"><span class="lineno"> 2359</span>    <span class="keywordflow">for</span> (std::list&lt;AuraScript*&gt;::iterator itr = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.begin(); itr != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.end();)</div>
<div class="line"><span class="lineno"> 2360</span>    {</div>
<div class="line"><span class="lineno"> 2361</span>        <span class="keywordflow">if</span> (!(*itr)-&gt;_Load(<span class="keyword">this</span>))</div>
<div class="line"><span class="lineno"> 2362</span>        {</div>
<div class="line"><span class="lineno"> 2363</span>            std::list&lt;AuraScript*&gt;::iterator bitr = itr;</div>
<div class="line"><span class="lineno"> 2364</span>            ++itr;</div>
<div class="line"><span class="lineno"> 2365</span>            <span class="keyword">delete</span> (*bitr);</div>
<div class="line"><span class="lineno"> 2366</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2f182c808ac1ea674dbc625ac03716b6">m_loadedScripts</a>.erase(bitr);</div>
<div class="line"><span class="lineno"> 2367</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2368</span>        }</div>
<div class="line"><span class="lineno"> 2369</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;Aura::LoadScripts: Script `{}` for aura `{}` is loaded now&quot;</span>, (*itr)-&gt;_GetScriptName()-&gt;c_str(), <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>);</div>
<div class="line"><span class="lineno"> 2370</span>        (*itr)-&gt;Register();</div>
<div class="line"><span class="lineno"> 2371</span>        ++itr;</div>
<div class="line"><span class="lineno"> 2372</span>    }</div>
<div class="line"><span class="lineno"> 2373</span>}</div>
<div class="ttc" id="aa00035_html_a47ac782b14a7531c6232777165a1a161"><div class="ttname"><a href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG(filterType__,...)</div><div class="ttdef"><b>Definition:</b> Log.h:169</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00238">m_loadedScripts</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, and <a class="el" href="../../#l00709">sScriptMgr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02869">DynObjAura::DynObjAura()</a>, and <a class="el" href="../../#l02766">UnitAura::UnitAura()</a>.</p>

</div>
</div>
<a id="a52fbcc7d7f48d46bed2873889640e6d3" name="a52fbcc7d7f48d46bed2873889640e6d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52fbcc7d7f48d46bed2873889640e6d3">&#9670;&#160;</a></span>ModCharges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::ModCharges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a>&#160;</td>
          <td class="paramname"><em>removeMode</em> = <code><a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  974</span>{</div>
<div class="line"><span class="lineno">  975</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a62c2b89c6a9269aba7870b36e5872330">IsUsingCharges</a>())</div>
<div class="line"><span class="lineno">  976</span>    {</div>
<div class="line"><span class="lineno">  977</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> charges = <a class="code hl_variable" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a> + num;</div>
<div class="line"><span class="lineno">  978</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> maxCharges = <a class="code hl_function" href="../../d3/d9a/a10802.html#ad786924c8b4617ff4724065b6452b04f">CalcMaxCharges</a>();</div>
<div class="line"><span class="lineno">  979</span> </div>
<div class="line"><span class="lineno">  980</span>        <span class="comment">// limit charges (only on charges increase, charges may be changed manually)</span></div>
<div class="line"><span class="lineno">  981</span>        <span class="keywordflow">if</span> ((num &gt; 0) &amp;&amp; (charges &gt; <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(maxCharges)))</div>
<div class="line"><span class="lineno">  982</span>            charges = maxCharges;</div>
<div class="line"><span class="lineno">  983</span>        <span class="comment">// we&#39;re out of charges, remove</span></div>
<div class="line"><span class="lineno">  984</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (charges &lt;= 0)</div>
<div class="line"><span class="lineno">  985</span>        {</div>
<div class="line"><span class="lineno">  986</span>            <a class="code hl_function" href="../../d3/d9a/a10802.html#af9799e5670c2bc3899e3430aa793ca20">Remove</a>(removeMode);</div>
<div class="line"><span class="lineno">  987</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  988</span>        }</div>
<div class="line"><span class="lineno">  989</span> </div>
<div class="line"><span class="lineno">  990</span>        <a class="code hl_function" href="../../d3/d9a/a10802.html#a7f7d613279717173c13708425f3a8083">SetCharges</a>(charges);</div>
<div class="line"><span class="lineno">  991</span>    }</div>
<div class="line"><span class="lineno">  992</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  993</span>}</div>
<div class="ttc" id="aa10802_html_a7f7d613279717173c13708425f3a8083"><div class="ttname"><a href="../../d3/d9a/a10802.html#a7f7d613279717173c13708425f3a8083">Aura::SetCharges</a></div><div class="ttdeci">void SetCharges(uint8 charges)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:952</div></div>
<div class="ttc" id="aa10802_html_af9799e5670c2bc3899e3430aa793ca20"><div class="ttname"><a href="../../d3/d9a/a10802.html#af9799e5670c2bc3899e3430aa793ca20">Aura::Remove</a></div><div class="ttdeci">virtual void Remove(AuraRemoveMode removeMode=AURA_REMOVE_BY_DEFAULT)=0</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00144">CalcMaxCharges()</a>, <a class="el" href="../../#l00200">IsUsingCharges()</a>, <a class="el" href="../../#l00262">m_procCharges</a>, <a class="el" href="../../d3/d9a/a10802.html#af9799e5670c2bc3899e3430aa793ca20">Remove()</a>, and <a class="el" href="../../#l00952">SetCharges()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00146">DropCharge()</a>, <a class="el" href="../../#l01115">AuraScript::ModCharges()</a>, <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>, and <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>.</p>

</div>
</div>
<a id="a69b589a7414d5d73ed75d12d5ba736ef" name="a69b589a7414d5d73ed75d12d5ba736ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69b589a7414d5d73ed75d12d5ba736ef">&#9670;&#160;</a></span>ModStackAmount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::ModStackAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a>&#160;</td>
          <td class="paramname"><em>removeMode</em> = <code><a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>periodicReset</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1022</span>{</div>
<div class="line"><span class="lineno"> 1023</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> stackAmount = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a3c01fd7df3476af276831667baa3a0ee">m_stackAmount</a> + num;</div>
<div class="line"><span class="lineno"> 1024</span> </div>
<div class="line"><span class="lineno"> 1025</span>    <span class="comment">// limit the stack amount (only on stack increase, stack amount may be changed manually)</span></div>
<div class="line"><span class="lineno"> 1026</span>    <span class="keywordflow">if</span> ((num &gt; 0) &amp;&amp; (stackAmount &gt; <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>)))</div>
<div class="line"><span class="lineno"> 1027</span>    {</div>
<div class="line"><span class="lineno"> 1028</span>        <span class="comment">// not stackable aura - set stack amount to 1</span></div>
<div class="line"><span class="lineno"> 1029</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>)</div>
<div class="line"><span class="lineno"> 1030</span>            stackAmount = 1;</div>
<div class="line"><span class="lineno"> 1031</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1032</span>            stackAmount = <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>;</div>
<div class="line"><span class="lineno"> 1033</span>    }</div>
<div class="line"><span class="lineno"> 1034</span>    <span class="comment">// we&#39;re out of stacks, remove</span></div>
<div class="line"><span class="lineno"> 1035</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stackAmount &lt;= 0)</div>
<div class="line"><span class="lineno"> 1036</span>    {</div>
<div class="line"><span class="lineno"> 1037</span>        <a class="code hl_function" href="../../d3/d9a/a10802.html#af9799e5670c2bc3899e3430aa793ca20">Remove</a>(removeMode);</div>
<div class="line"><span class="lineno"> 1038</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1039</span>    }</div>
<div class="line"><span class="lineno"> 1040</span> </div>
<div class="line"><span class="lineno"> 1041</span>    <span class="keywordtype">bool</span> refresh = stackAmount &gt;= <a class="code hl_function" href="../../d3/d9a/a10802.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>() &amp;&amp; (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a> || !<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a638f8f550e23b2e3180b481bb3f38076a804cce10f0767b3a9083e899217af6e3">SPELL_ATTR1_AURA_UNIQUE</a>));</div>
<div class="line"><span class="lineno"> 1042</span> </div>
<div class="line"><span class="lineno"> 1043</span>    <span class="comment">// Update stack amount</span></div>
<div class="line"><span class="lineno"> 1044</span>    <span class="keywordflow">if</span> (refresh)</div>
<div class="line"><span class="lineno"> 1045</span>    {</div>
<div class="line"><span class="lineno"> 1046</span>        <a class="code hl_function" href="../../d3/d9a/a10802.html#ae2a6c05d26b1254d93038b666d1e46cd">RefreshSpellMods</a>();</div>
<div class="line"><span class="lineno"> 1047</span>        <a class="code hl_function" href="../../d3/d9a/a10802.html#a2fa2b27d98d99af4f226c0156d47a628">RefreshTimers</a>(periodicReset);</div>
<div class="line"><span class="lineno"> 1048</span> </div>
<div class="line"><span class="lineno"> 1049</span>        <span class="comment">// reset charges</span></div>
<div class="line"><span class="lineno"> 1050</span>        <a class="code hl_function" href="../../d3/d9a/a10802.html#a7f7d613279717173c13708425f3a8083">SetCharges</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#ad786924c8b4617ff4724065b6452b04f">CalcMaxCharges</a>());</div>
<div class="line"><span class="lineno"> 1051</span>        <span class="comment">// FIXME: not a best way to synchronize charges, but works</span></div>
<div class="line"><span class="lineno"> 1052</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 1053</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* aurEff = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(i))</div>
<div class="line"><span class="lineno"> 1054</span>                <span class="keywordflow">if</span> (aurEff-&gt;GetAuraType() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a50563ee6555455f041b81ce199ad1a4f">SPELL_AURA_ADD_FLAT_MODIFIER</a> || aurEff-&gt;GetAuraType() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2c530c4b7d2f3b77f65f62395bda9c4a">SPELL_AURA_ADD_PCT_MODIFIER</a>)</div>
<div class="line"><span class="lineno"> 1055</span>                    <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../dd/d5f/a08298.html">SpellModifier</a>* mod = aurEff-&gt;GetSpellModifier())</div>
<div class="line"><span class="lineno"> 1056</span>                        mod-&gt;charges = <a class="code hl_function" href="../../d3/d9a/a10802.html#ab07705be94c0c10fce558c80d7208e0b">GetCharges</a>();</div>
<div class="line"><span class="lineno"> 1057</span>    }</div>
<div class="line"><span class="lineno"> 1058</span> </div>
<div class="line"><span class="lineno"> 1059</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a1f6c2606d7dc499c1fc1ba0cee1f255b">SetStackAmount</a>(stackAmount);</div>
<div class="line"><span class="lineno"> 1060</span> </div>
<div class="line"><span class="lineno"> 1061</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a8f9f4a57e87c86b384b637403fff06e7">SetNeedClientUpdateForTargets</a>();</div>
<div class="line"><span class="lineno"> 1062</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1063</span>}</div>
<div class="ttc" id="aa02771_html_a638f8f550e23b2e3180b481bb3f38076a804cce10f0767b3a9083e899217af6e3"><div class="ttname"><a href="../../d0/dbd/a02771.html#a638f8f550e23b2e3180b481bb3f38076a804cce10f0767b3a9083e899217af6e3">SPELL_ATTR1_AURA_UNIQUE</a></div><div class="ttdeci">@ SPELL_ATTR1_AURA_UNIQUE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:430</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a2c530c4b7d2f3b77f65f62395bda9c4a"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2c530c4b7d2f3b77f65f62395bda9c4a">SPELL_AURA_ADD_PCT_MODIFIER</a></div><div class="ttdeci">@ SPELL_AURA_ADD_PCT_MODIFIER</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:171</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a50563ee6555455f041b81ce199ad1a4f"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a50563ee6555455f041b81ce199ad1a4f">SPELL_AURA_ADD_FLAT_MODIFIER</a></div><div class="ttdeci">@ SPELL_AURA_ADD_FLAT_MODIFIER</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:170</div></div>
<div class="ttc" id="aa08298_html"><div class="ttname"><a href="../../dd/d5f/a08298.html">SpellModifier</a></div><div class="ttdef"><b>Definition:</b> Player.h:181</div></div>
<div class="ttc" id="aa10802_html_a1f6c2606d7dc499c1fc1ba0cee1f255b"><div class="ttname"><a href="../../d3/d9a/a10802.html#a1f6c2606d7dc499c1fc1ba0cee1f255b">Aura::SetStackAmount</a></div><div class="ttdeci">void SetStackAmount(uint8 num)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:995</div></div>
<div class="ttc" id="aa10802_html_a2fa2b27d98d99af4f226c0156d47a628"><div class="ttname"><a href="../../d3/d9a/a10802.html#a2fa2b27d98d99af4f226c0156d47a628">Aura::RefreshTimers</a></div><div class="ttdeci">void RefreshTimers(bool periodicReset=false)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:909</div></div>
<div class="ttc" id="aa10802_html_a8f9f4a57e87c86b384b637403fff06e7"><div class="ttname"><a href="../../d3/d9a/a10802.html#a8f9f4a57e87c86b384b637403fff06e7">Aura::SetNeedClientUpdateForTargets</a></div><div class="ttdeci">void SetNeedClientUpdateForTargets() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:1258</div></div>
<div class="ttc" id="aa10802_html_ae2a6c05d26b1254d93038b666d1e46cd"><div class="ttname"><a href="../../d3/d9a/a10802.html#ae2a6c05d26b1254d93038b666d1e46cd">Aura::RefreshSpellMods</a></div><div class="ttdeci">void RefreshSpellMods()</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:1065</div></div>
<div class="ttc" id="aa10906_html_a46f51f384b1455b03000e98a08d11790"><div class="ttname"><a href="../../d4/db9/a10906.html#a46f51f384b1455b03000e98a08d11790">SpellInfo::StackAmount</a></div><div class="ttdeci">uint32 StackAmount</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:371</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00144">CalcMaxCharges()</a>, <a class="el" href="../../#l00141">GetCharges()</a>, <a class="el" href="../../#l00175">GetEffect()</a>, <a class="el" href="../../#l00148">GetStackAmount()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l00263">m_stackAmount</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l01065">RefreshSpellMods()</a>, <a class="el" href="../../#l00909">RefreshTimers()</a>, <a class="el" href="../../d3/d9a/a10802.html#af9799e5670c2bc3899e3430aa793ca20">Remove()</a>, <a class="el" href="../../#l00952">SetCharges()</a>, <a class="el" href="../../#l01258">SetNeedClientUpdateForTargets()</a>, <a class="el" href="../../#l00995">SetStackAmount()</a>, <a class="el" href="../../#l00430">SPELL_ATTR1_AURA_UNIQUE</a>, <a class="el" href="../../#l00170">SPELL_AURA_ADD_FLAT_MODIFIER</a>, <a class="el" href="../../#l00171">SPELL_AURA_ADD_PCT_MODIFIER</a>, and <a class="el" href="../../#l00371">SpellInfo::StackAmount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01945">spell_the_lich_king_necrotic_plague_jump::AddMissingStack()</a>, <a class="el" href="../../#l03002">Spell::DoSpellHitOnUnit()</a>, <a class="el" href="../../#l00660">misc_commandscript::HandleAuraStacksCommand()</a>, <a class="el" href="../../#l01116">spell_charge_shield_bomber::HandleDummy()</a>, <a class="el" href="../../#l01135">AuraScript::ModStackAmount()</a>, <a class="el" href="../../#l04925">Unit::RemoveAuraFromStack()</a>, <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>, and <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>.</p>

</div>
</div>
<a id="ace1f81adb69a07eddbdeee16bfe2ed33" name="ace1f81adb69a07eddbdeee16bfe2ed33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace1f81adb69a07eddbdeee16bfe2ed33">&#9670;&#160;</a></span>PrepareProcToTrigger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::PrepareProcToTrigger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2207</span>{</div>
<div class="line"><span class="lineno"> 2208</span>    <span class="keywordtype">bool</span> prepare = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6577a1543d871da43ab8b015f67d4150">CallScriptPrepareProcHandlers</a>(aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 2209</span>    <span class="keywordflow">if</span> (!prepare)</div>
<div class="line"><span class="lineno"> 2210</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2211</span> </div>
<div class="line"><span class="lineno"> 2212</span>    <span class="comment">// take one charge, aura expiration will be handled in Aura::TriggerProcOnEvent (if needed)</span></div>
<div class="line"><span class="lineno"> 2213</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a62c2b89c6a9269aba7870b36e5872330">IsUsingCharges</a>() &amp;&amp; (!eventInfo.<a class="code hl_function" href="../../d3/daf/a08498.html#a759add2c89e786125196eb6bd3b20c6d">GetSpellInfo</a>() || !eventInfo.<a class="code hl_function" href="../../d3/daf/a08498.html#a759add2c89e786125196eb6bd3b20c6d">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#afc0226d0611e178e6edb4d2776e03094a7e3a5efaeb82064d20232846d5e4437d">SPELL_ATTR6_DO_NOT_CONSUME_RESOURCES</a>)))</div>
<div class="line"><span class="lineno"> 2214</span>    {</div>
<div class="line"><span class="lineno"> 2215</span>        --<a class="code hl_variable" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a>;</div>
<div class="line"><span class="lineno"> 2216</span>        <a class="code hl_function" href="../../d3/d9a/a10802.html#a8f9f4a57e87c86b384b637403fff06e7">SetNeedClientUpdateForTargets</a>();</div>
<div class="line"><span class="lineno"> 2217</span>    }</div>
<div class="line"><span class="lineno"> 2218</span> </div>
<div class="line"><span class="lineno"> 2219</span>    <a class="code hl_struct" href="../../d1/d6c/a10914.html">SpellProcEntry</a> <span class="keyword">const</span>* procEntry = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellProcEntry(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>());</div>
<div class="line"><span class="lineno"> 2220</span> </div>
<div class="line"><span class="lineno"> 2221</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(procEntry);</div>
<div class="line"><span class="lineno"> 2222</span> </div>
<div class="line"><span class="lineno"> 2223</span>    <span class="comment">// cooldowns should be added to the whole aura (see 51698 area aura)</span></div>
<div class="line"><span class="lineno"> 2224</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a4febc2d258a8e20326e465a9c1ed8512">AddProcCooldown</a>(procEntry-&gt;<a class="code hl_variable" href="../../d1/d6c/a10914.html#a4e6185aea35599a3efc2e806145cb1d2">Cooldown</a>);</div>
<div class="line"><span class="lineno"> 2225</span>}</div>
<div class="ttc" id="aa02771_html_afc0226d0611e178e6edb4d2776e03094a7e3a5efaeb82064d20232846d5e4437d"><div class="ttname"><a href="../../d0/dbd/a02771.html#afc0226d0611e178e6edb4d2776e03094a7e3a5efaeb82064d20232846d5e4437d">SPELL_ATTR6_DO_NOT_CONSUME_RESOURCES</a></div><div class="ttdeci">@ SPELL_ATTR6_DO_NOT_CONSUME_RESOURCES</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:609</div></div>
<div class="ttc" id="aa08498_html_a759add2c89e786125196eb6bd3b20c6d"><div class="ttname"><a href="../../d3/daf/a08498.html#a759add2c89e786125196eb6bd3b20c6d">ProcEventInfo::GetSpellInfo</a></div><div class="ttdeci">SpellInfo const * GetSpellInfo() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:184</div></div>
<div class="ttc" id="aa10802_html_a4febc2d258a8e20326e465a9c1ed8512"><div class="ttname"><a href="../../d3/d9a/a10802.html#a4febc2d258a8e20326e465a9c1ed8512">Aura::AddProcCooldown</a></div><div class="ttdeci">void AddProcCooldown(Milliseconds msec)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2201</div></div>
<div class="ttc" id="aa10802_html_a6577a1543d871da43ab8b015f67d4150"><div class="ttname"><a href="../../d3/d9a/a10802.html#a6577a1543d871da43ab8b015f67d4150">Aura::CallScriptPrepareProcHandlers</a></div><div class="ttdeci">bool CallScriptPrepareProcHandlers(AuraApplication const *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2665</div></div>
<div class="ttc" id="aa10914_html_a4e6185aea35599a3efc2e806145cb1d2"><div class="ttname"><a href="../../d1/d6c/a10914.html#a4e6185aea35599a3efc2e806145cb1d2">SpellProcEntry::Cooldown</a></div><div class="ttdeci">Milliseconds Cooldown</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:301</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02201">AddProcCooldown()</a>, <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l02665">CallScriptPrepareProcHandlers()</a>, <a class="el" href="../../#l00301">SpellProcEntry::Cooldown</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l00184">ProcEventInfo::GetSpellInfo()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l00200">IsUsingCharges()</a>, <a class="el" href="../../#l00262">m_procCharges</a>, <a class="el" href="../../#l01258">SetNeedClientUpdateForTargets()</a>, <a class="el" href="../../#l00609">SPELL_ATTR6_DO_NOT_CONSUME_RESOURCES</a>, and <a class="el" href="../../#l00825">sSpellMgr</a>.</p>

</div>
</div>
<a id="adbd7f397bbd36e4273d430032ddcd073" name="adbd7f397bbd36e4273d430032ddcd073"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbd7f397bbd36e4273d430032ddcd073">&#9670;&#160;</a></span>RecalculateAmountOfEffects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::RecalculateAmountOfEffects </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1233</span>{</div>
<div class="line"><span class="lineno"> 1234</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a> (!<a class="code hl_function" href="../../d3/d9a/a10802.html#a462457cadd52ba8a0edd5609c71ebbc0">IsRemoved</a>());</div>
<div class="line"><span class="lineno"> 1235</span>    <a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 1236</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 1237</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a3d22c519ba658770e61a1616be667a09">HasEffect</a>(i))</div>
<div class="line"><span class="lineno"> 1238</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#adc38a016285e442a485c9b9bc17a6105">RecalculateAmount</a>(caster);</div>
<div class="line"><span class="lineno"> 1239</span>}</div>
<div class="ttc" id="aa10790_html_adc38a016285e442a485c9b9bc17a6105"><div class="ttname"><a href="../../de/d50/a10790.html#adc38a016285e442a485c9b9bc17a6105">AuraEffect::RecalculateAmount</a></div><div class="ttdeci">void RecalculateAmount()</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:76</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00173">HasEffect()</a>, <a class="el" href="../../#l00161">IsRemoved()</a>, <a class="el" href="../../#l00265">m_effects</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, and <a class="el" href="../../#l00076">AuraEffect::RecalculateAmount()</a>.</p>

</div>
</div>
<a id="a2f108f33766c253a827d41c2f3fdc45e" name="a2f108f33766c253a827d41c2f3fdc45e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f108f33766c253a827d41c2f3fdc45e">&#9670;&#160;</a></span>RefreshDuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::RefreshDuration </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>withMods</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000124">Todo:</a></b></dt><dd><ul>
<li>Look to convert to std::chrono </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  881</span>{</div>
<div class="line"><span class="lineno">  882</span>    <a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>();</div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span>    <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno">  885</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>    <span class="keywordflow">if</span> (withMods &amp;&amp; caster)</div>
<div class="line"><span class="lineno">  888</span>    {</div>
<div class="line"><span class="lineno">  889</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> duration = <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a6cc135f2b87d1fecd6e7db475f9039dd">GetMaxDuration</a>();</div>
<div class="line"><span class="lineno">  890</span>        <span class="comment">// Calculate duration of periodics affected by haste.</span></div>
<div class="line"><span class="lineno">  891</span>        <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a000570a88dd253d3746e6ff5ac1c918b">HasAuraTypeWithAffectMask</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1191ab2524c100b0d91f8d63cee8e781">SPELL_AURA_PERIODIC_HASTE</a>, <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>) || <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a376aa62261a98289589839b821786adaa884cc9555b9162ae33956c5ded8cb1d7">SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</a>))</div>
<div class="line"><span class="lineno">  892</span>            duration = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(duration * caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a8797257c31223076c1b76b4b1a6f8007">GetFloatValue</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235">UNIT_MOD_CAST_SPEED</a>));</div>
<div class="line"><span class="lineno">  893</span>        <a class="code hl_function" href="../../d3/d9a/a10802.html#abf0ff1d6e3be882ce7e8ddd7e935ab66">SetMaxDuration</a>(duration);</div>
<div class="line"><span class="lineno">  894</span> </div>
<div class="line"><span class="lineno">  895</span>        <a class="code hl_function" href="../../d3/d9a/a10802.html#a99930c42ad9f6e002ffe6de5e5fbe59b">SetDuration</a>(duration);</div>
<div class="line"><span class="lineno">  896</span>    }</div>
<div class="line"><span class="lineno">  897</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  898</span>        <a class="code hl_function" href="../../d3/d9a/a10802.html#a99930c42ad9f6e002ffe6de5e5fbe59b">SetDuration</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a14457cfa6d589b8024bbeeb1d4aa03d3">GetMaxDuration</a>());</div>
<div class="line"><span class="lineno">  899</span> </div>
<div class="line"><span class="lineno">  900</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a8fff47546b8052ac55963dd40e4ae394">ManaPerSecond</a> || <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a40cefe82961ab58e8070546b2d1a1fc5">ManaPerSecondPerLevel</a>) &amp;&amp; !<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a>))</div>
<div class="line"><span class="lineno">  901</span>        <a class="code hl_variable" href="../../d3/d9a/a10802.html#a7af03c4091eed4aab81dd2d0613b4eca">m_timeCla</a> = 1 * <a class="code hl_variable" href="../../d4/d51/a00017.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a>;</div>
<div class="line"><span class="lineno">  902</span> </div>
<div class="line"><span class="lineno">  903</span>    <span class="comment">// also reset periodic counters</span></div>
<div class="line"><span class="lineno">  904</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno">  905</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* aurEff = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i])</div>
<div class="line"><span class="lineno">  906</span>            aurEff-&gt;ResetTicks();</div>
<div class="line"><span class="lineno">  907</span>}</div>
<div class="ttc" id="aa02771_html_a376aa62261a98289589839b821786adaa884cc9555b9162ae33956c5ded8cb1d7"><div class="ttname"><a href="../../d0/dbd/a02771.html#a376aa62261a98289589839b821786adaa884cc9555b9162ae33956c5ded8cb1d7">SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</a></div><div class="ttdeci">@ SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:580</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a1191ab2524c100b0d91f8d63cee8e781"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1191ab2524c100b0d91f8d63cee8e781">SPELL_AURA_PERIODIC_HASTE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_HASTE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:379</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235">UNIT_MOD_CAST_SPEED</a></div><div class="ttdeci">@ UNIT_MOD_CAST_SPEED</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:137</div></div>
<div class="ttc" id="aa08150_html_a8797257c31223076c1b76b4b1a6f8007"><div class="ttname"><a href="../../d6/d80/a08150.html#a8797257c31223076c1b76b4b1a6f8007">Object::GetFloatValue</a></div><div class="ttdeci">float GetFloatValue(uint16 index) const</div><div class="ttdef"><b>Definition:</b> Object.cpp:317</div></div>
<div class="ttc" id="aa08526_html_a000570a88dd253d3746e6ff5ac1c918b"><div class="ttname"><a href="../../d6/d15/a08526.html#a000570a88dd253d3746e6ff5ac1c918b">Unit::HasAuraTypeWithAffectMask</a></div><div class="ttdeci">bool HasAuraTypeWithAffectMask(AuraType auratype, SpellInfo const *affectedSpell) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5738</div></div>
<div class="ttc" id="aa10906_html_a6cc135f2b87d1fecd6e7db475f9039dd"><div class="ttname"><a href="../../d4/db9/a10906.html#a6cc135f2b87d1fecd6e7db475f9039dd">SpellInfo::GetMaxDuration</a></div><div class="ttdeci">int32 GetMaxDuration() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:2345</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00317">Object::GetFloatValue()</a>, <a class="el" href="../../#l00129">GetMaxDuration()</a>, <a class="el" href="../../#l02345">SpellInfo::GetMaxDuration()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l05738">Unit::HasAuraTypeWithAffectMask()</a>, <a class="el" href="../../#l00053">IN_MILLISECONDS</a>, <a class="el" href="../../#l00265">m_effects</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l00258">m_timeCla</a>, <a class="el" href="../../#l00365">SpellInfo::ManaPerSecond</a>, <a class="el" href="../../#l00366">SpellInfo::ManaPerSecondPerLevel</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l00868">SetDuration()</a>, <a class="el" href="../../#l00130">SetMaxDuration()</a>, <a class="el" href="../../#l00467">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a>, <a class="el" href="../../#l00580">SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</a>, <a class="el" href="../../#l00379">SPELL_AURA_PERIODIC_HASTE</a>, and <a class="el" href="../../#l00137">UNIT_MOD_CAST_SPEED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00442">spell_hun_chimera_shot::HandleScriptEffect()</a>, <a class="el" href="../../#l01065">AuraScript::RefreshDuration()</a>, <a class="el" href="../../#l00909">RefreshTimers()</a>, <a class="el" href="../../#l00931">RefreshTimersWithMods()</a>, and <a class="el" href="../../#l00927">AuraEffect::UpdatePeriodic()</a>.</p>

</div>
</div>
<a id="ae2a6c05d26b1254d93038b666d1e46cd" name="ae2a6c05d26b1254d93038b666d1e46cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2a6c05d26b1254d93038b666d1e46cd">&#9670;&#160;</a></span>RefreshSpellMods()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::RefreshSpellMods </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1066</span>{</div>
<div class="line"><span class="lineno"> 1067</span>    <span class="keywordflow">for</span> (Aura::ApplicationMap::const_iterator appIter = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.begin(); appIter != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.end(); ++appIter)</div>
<div class="line"><span class="lineno"> 1068</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../da/da3/a08394.html">Player</a>* player = appIter-&gt;second-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>()-&gt;ToPlayer())</div>
<div class="line"><span class="lineno"> 1069</span>            player-&gt;RestoreAllSpellMods(0, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1070</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00818">Unit::GetTarget()</a>, and <a class="el" href="../../#l00266">m_applications</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01021">ModStackAmount()</a>.</p>

</div>
</div>
<a id="a2fa2b27d98d99af4f226c0156d47a628" name="a2fa2b27d98d99af4f226c0156d47a628"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fa2b27d98d99af4f226c0156d47a628">&#9670;&#160;</a></span>RefreshTimers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::RefreshTimers </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>periodicReset</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  910</span>{</div>
<div class="line"><span class="lineno">  911</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">m_maxDuration</a> = <a class="code hl_function" href="../../d3/d9a/a10802.html#a97f212bb7332fdf03fccafe5389c1e0a">CalcMaxDuration</a>();</div>
<div class="line"><span class="lineno">  912</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a2f108f33766c253a827d41c2f3fdc45e">RefreshDuration</a>();</div>
<div class="line"><span class="lineno">  913</span>    <a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>();</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>    <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno">  916</span>    {</div>
<div class="line"><span class="lineno">  917</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  918</span>    }</div>
<div class="line"><span class="lineno">  919</span> </div>
<div class="line"><span class="lineno">  920</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno">  921</span>    {</div>
<div class="line"><span class="lineno">  922</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* aurEff = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i])</div>
<div class="line"><span class="lineno">  923</span>        {</div>
<div class="line"><span class="lineno">  924</span>            aurEff-&gt;CalculatePeriodic(caster, periodicReset, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  925</span>            aurEff-&gt;CalculatePeriodicData();</div>
<div class="line"><span class="lineno">  926</span>        }</div>
<div class="line"><span class="lineno">  927</span>    }</div>
<div class="line"><span class="lineno">  928</span>}</div>
<div class="ttc" id="aa10802_html_a2f108f33766c253a827d41c2f3fdc45e"><div class="ttname"><a href="../../d3/d9a/a10802.html#a2f108f33766c253a827d41c2f3fdc45e">Aura::RefreshDuration</a></div><div class="ttdeci">void RefreshDuration(bool withMods=false)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:880</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00131">CalcMaxDuration()</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00265">m_effects</a>, <a class="el" href="../../#l00256">m_maxDuration</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, and <a class="el" href="../../#l00880">RefreshDuration()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01021">ModStackAmount()</a>.</p>

</div>
</div>
<a id="a2726873f756aff2cdc90c61ac7358181" name="a2726873f756aff2cdc90c61ac7358181"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2726873f756aff2cdc90c61ac7358181">&#9670;&#160;</a></span>RefreshTimersWithMods()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::RefreshTimersWithMods </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  932</span>{</div>
<div class="line"><span class="lineno">  933</span>    <a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>();</div>
<div class="line"><span class="lineno">  934</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">m_maxDuration</a> = <a class="code hl_function" href="../../d3/d9a/a10802.html#a97f212bb7332fdf03fccafe5389c1e0a">CalcMaxDuration</a>();</div>
<div class="line"><span class="lineno">  935</span>    <span class="keywordflow">if</span> ((caster &amp;&amp; caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a000570a88dd253d3746e6ff5ac1c918b">HasAuraTypeWithAffectMask</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1191ab2524c100b0d91f8d63cee8e781">SPELL_AURA_PERIODIC_HASTE</a>, <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>)) || <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a376aa62261a98289589839b821786adaa884cc9555b9162ae33956c5ded8cb1d7">SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</a>))</div>
<div class="line"><span class="lineno">  936</span>    {</div>
<div class="line"><span class="lineno">  937</span>        <a class="code hl_variable" href="../../d3/d9a/a10802.html#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">m_maxDuration</a> = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">m_maxDuration</a> * caster-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a8797257c31223076c1b76b4b1a6f8007">GetFloatValue</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235">UNIT_MOD_CAST_SPEED</a>));</div>
<div class="line"><span class="lineno">  938</span>    }</div>
<div class="line"><span class="lineno">  939</span> </div>
<div class="line"><span class="lineno">  940</span>    <span class="comment">// xinef: we should take ModSpellDuration into account, but none of the spells using this function is affected by contents of ModSpellDuration</span></div>
<div class="line"><span class="lineno">  941</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a2f108f33766c253a827d41c2f3fdc45e">RefreshDuration</a>();</div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno">  944</span>    {</div>
<div class="line"><span class="lineno">  945</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d50/a10790.html">AuraEffect</a>* aurEff = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i])</div>
<div class="line"><span class="lineno">  946</span>        {</div>
<div class="line"><span class="lineno">  947</span>            aurEff-&gt;CalculatePeriodic(caster, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  948</span>        }</div>
<div class="line"><span class="lineno">  949</span>    }</div>
<div class="line"><span class="lineno">  950</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00131">CalcMaxDuration()</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00317">Object::GetFloatValue()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l05738">Unit::HasAuraTypeWithAffectMask()</a>, <a class="el" href="../../#l00265">m_effects</a>, <a class="el" href="../../#l00256">m_maxDuration</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l00880">RefreshDuration()</a>, <a class="el" href="../../#l00580">SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</a>, <a class="el" href="../../#l00379">SPELL_AURA_PERIODIC_HASTE</a>, and <a class="el" href="../../#l00137">UNIT_MOD_CAST_SPEED</a>.</p>

</div>
</div>
<a id="af9799e5670c2bc3899e3430aa793ca20" name="af9799e5670c2bc3899e3430aa793ca20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9799e5670c2bc3899e3430aa793ca20">&#9670;&#160;</a></span>Remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Aura::Remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a>&#160;</td>
          <td class="paramname"><em>removeMode</em> = <code><a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="../../d5/db1/a10806.html#a28f714404942bb5c614ac844cf937546">UnitAura</a>, and <a class="el" href="../../d9/d7c/a10810.html#ada3f65b4a817e2337da43da437b93a3b">DynObjAura</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l15076">Player::ActivateSpec()</a>, <a class="el" href="../../#l02224">spell_dragonblight_corrosive_spit::AfterApply()</a>, <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../#l02502">Unit::CalcHealAbsorb()</a>, <a class="el" href="../../#l03002">Spell::DoSpellHitOnUnit()</a>, <a class="el" href="../../#l01445">spell_pos_glacial_strike_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00973">ModCharges()</a>, <a class="el" href="../../#l01021">ModStackAmount()</a>, <a class="el" href="../../#l02230">spell_dragonblight_corrosive_spit::PeriodicTick()</a>, <a class="el" href="../../#l00568">SpellScript::PreventHitAura()</a>, <a class="el" href="../../#l01040">AuraScript::Remove()</a>, <a class="el" href="../../#l04776">Unit::RemoveAura()</a>, <a class="el" href="../../#l05145">Unit::RemoveNotOwnSingleTargetAuras()</a>, <a class="el" href="../../#l13408">Player::RestoreBaseRune()</a>, <a class="el" href="../../#l02331">TriggerProcOnEvent()</a>, and <a class="el" href="../../#l00798">Update()</a>.</p>

</div>
</div>
<a id="a7f7d613279717173c13708425f3a8083" name="a7f7d613279717173c13708425f3a8083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f7d613279717173c13708425f3a8083">&#9670;&#160;</a></span>SetCharges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::SetCharges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>charges</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  953</span>{</div>
<div class="line"><span class="lineno">  954</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a> == charges)</div>
<div class="line"><span class="lineno">  955</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  956</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a> = charges;</div>
<div class="line"><span class="lineno">  957</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#ad8811634ba5d82b9581e94e8a0fd6097">m_isUsingCharges</a> = <a class="code hl_variable" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a> != 0;</div>
<div class="line"><span class="lineno">  958</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a8f9f4a57e87c86b384b637403fff06e7">SetNeedClientUpdateForTargets</a>();</div>
<div class="line"><span class="lineno">  959</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00270">m_isUsingCharges</a>, <a class="el" href="../../#l00262">m_procCharges</a>, and <a class="el" href="../../#l01258">SetNeedClientUpdateForTargets()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l05409">AuraEffect::HandleAuraDummy()</a>, <a class="el" href="../../#l17652">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../#l17563">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../#l07272">AuraEffect::HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../#l07320">AuraEffect::HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../#l00973">ModCharges()</a>, <a class="el" href="../../#l01021">ModStackAmount()</a>, and <a class="el" href="../../#l01105">AuraScript::SetCharges()</a>.</p>

</div>
</div>
<a id="a99930c42ad9f6e002ffe6de5e5fbe59b" name="a99930c42ad9f6e002ffe6de5e5fbe59b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99930c42ad9f6e002ffe6de5e5fbe59b">&#9670;&#160;</a></span>SetDuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::SetDuration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>withMods</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  869</span>{</div>
<div class="line"><span class="lineno">  870</span>    <span class="keywordflow">if</span> (withMods)</div>
<div class="line"><span class="lineno">  871</span>    {</div>
<div class="line"><span class="lineno">  872</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>())</div>
<div class="line"><span class="lineno">  873</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../da/da3/a08394.html">Player</a>* modOwner = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a2e6a98844f96c211f47b911a2766ada8">GetSpellModOwner</a>())</div>
<div class="line"><span class="lineno">  874</span>                modOwner-&gt;ApplySpellMod(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>(), <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351abbf47ed0b69b726537ecd64649c0d73c">SPELLMOD_DURATION</a>, duration);</div>
<div class="line"><span class="lineno">  875</span>    }</div>
<div class="line"><span class="lineno">  876</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a406738b04948572a30626082ebe7a0e0">m_duration</a> = duration;</div>
<div class="line"><span class="lineno">  877</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a8f9f4a57e87c86b384b637403fff06e7">SetNeedClientUpdateForTargets</a>();</div>
<div class="line"><span class="lineno">  878</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l16578">Unit::GetSpellModOwner()</a>, <a class="el" href="../../#l00257">m_duration</a>, <a class="el" href="../../#l01258">SetNeedClientUpdateForTargets()</a>, and <a class="el" href="../../#l00077">SPELLMOD_DURATION</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00593">AuraEffect::CalculatePeriodic()</a>, <a class="el" href="../../#l05462">Unit::DelayOwnedAuras()</a>, <a class="el" href="../../#l03002">Spell::DoSpellHitOnUnit()</a>, <a class="el" href="../../#l03794">Spell::EffectScriptEffect()</a>, <a class="el" href="../../#l05821">Unit::GetDiseasesByCaster()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l00098">deserter_commandscript::HandleDeserterAdd()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l00499">spell_dru_glyph_of_starfire::HandleScriptEffect()</a>, <a class="el" href="../../#l03480">Spell::prepare()</a>, <a class="el" href="../../#l00880">RefreshDuration()</a>, <a class="el" href="../../#l01060">AuraScript::SetDuration()</a>, and <a class="el" href="../../#l00203">DynamicObject::SetDuration()</a>.</p>

</div>
</div>
<a id="acb34c6f61b861a35398f1d8b7947312e" name="acb34c6f61b861a35398f1d8b7947312e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb34c6f61b861a35398f1d8b7947312e">&#9670;&#160;</a></span>SetIsSingleTarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::SetIsSingleTarget </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  166</span>{ <a class="code hl_variable" href="../../d3/d9a/a10802.html#af22450afa8bf33c979c0a0f7d801ab4c">m_isSingleTarget</a> = val; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00269">m_isSingleTarget</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04414">Unit::_AddAura()</a>, <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>, and <a class="el" href="../../#l01167">UnregisterSingleTarget()</a>.</p>

</div>
</div>
<a id="a585e23fd7b42fa974a2d014fe366ede9" name="a585e23fd7b42fa974a2d014fe366ede9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a585e23fd7b42fa974a2d014fe366ede9">&#9670;&#160;</a></span>SetLoadedState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::SetLoadedState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>maxduration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>charges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>stackamount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>recalculateMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>amount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1204</span>{</div>
<div class="line"><span class="lineno"> 1205</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">m_maxDuration</a> = maxduration;</div>
<div class="line"><span class="lineno"> 1206</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a406738b04948572a30626082ebe7a0e0">m_duration</a> = duration;</div>
<div class="line"><span class="lineno"> 1207</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a> = charges;</div>
<div class="line"><span class="lineno"> 1208</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#ad8811634ba5d82b9581e94e8a0fd6097">m_isUsingCharges</a> = <a class="code hl_variable" href="../../d3/d9a/a10802.html#af32b9da81a73be723f660ae4e3363e74">m_procCharges</a> != 0;</div>
<div class="line"><span class="lineno"> 1209</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a3c01fd7df3476af276831667baa3a0ee">m_stackAmount</a> = stackamount;</div>
<div class="line"><span class="lineno"> 1210</span>    <a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 1211</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 1212</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i])</div>
<div class="line"><span class="lineno"> 1213</span>        {</div>
<div class="line"><span class="lineno"> 1214</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a9790b9f33c52c6d3b830dc6f56f08bf0">SetAmount</a>(amount[i]);</div>
<div class="line"><span class="lineno"> 1215</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#af93cf68cd8854d93010663353043e4a2">SetCanBeRecalculated</a>(recalculateMask &amp; (1 &lt;&lt; i));</div>
<div class="line"><span class="lineno"> 1216</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a5b0a6694f62bf72c41a1f461f9894581">CalculatePeriodic</a>(caster, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1217</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a5d248ef37c73049cf4df98b6fc1008fe">CalculateSpellMod</a>();</div>
<div class="line"><span class="lineno"> 1218</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#adc38a016285e442a485c9b9bc17a6105">RecalculateAmount</a>(caster);</div>
<div class="line"><span class="lineno"> 1219</span>        }</div>
<div class="line"><span class="lineno"> 1220</span>}</div>
<div class="ttc" id="aa10790_html_a5b0a6694f62bf72c41a1f461f9894581"><div class="ttname"><a href="../../de/d50/a10790.html#a5b0a6694f62bf72c41a1f461f9894581">AuraEffect::CalculatePeriodic</a></div><div class="ttdeci">void CalculatePeriodic(Unit *caster, bool create=false, bool load=false)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:593</div></div>
<div class="ttc" id="aa10790_html_a5d248ef37c73049cf4df98b6fc1008fe"><div class="ttname"><a href="../../de/d50/a10790.html#a5d248ef37c73049cf4df98b6fc1008fe">AuraEffect::CalculateSpellMod</a></div><div class="ttdeci">void CalculateSpellMod()</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:684</div></div>
<div class="ttc" id="aa10790_html_af93cf68cd8854d93010663353043e4a2"><div class="ttname"><a href="../../de/d50/a10790.html#af93cf68cd8854d93010663353043e4a2">AuraEffect::SetCanBeRecalculated</a></div><div class="ttdeci">void SetCanBeRecalculated(bool val)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:79</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00593">AuraEffect::CalculatePeriodic()</a>, <a class="el" href="../../#l00684">AuraEffect::CalculateSpellMod()</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00257">m_duration</a>, <a class="el" href="../../#l00265">m_effects</a>, <a class="el" href="../../#l00270">m_isUsingCharges</a>, <a class="el" href="../../#l00256">m_maxDuration</a>, <a class="el" href="../../#l00262">m_procCharges</a>, <a class="el" href="../../#l00263">m_stackAmount</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l00076">AuraEffect::RecalculateAmount()</a>, <a class="el" href="../../#l00066">AuraEffect::SetAmount()</a>, and <a class="el" href="../../#l00079">AuraEffect::SetCanBeRecalculated()</a>.</p>

</div>
</div>
<a id="abf0ff1d6e3be882ce7e8ddd7e935ab66" name="abf0ff1d6e3be882ce7e8ddd7e935ab66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf0ff1d6e3be882ce7e8ddd7e935ab66">&#9670;&#160;</a></span>SetMaxDuration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::SetMaxDuration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>duration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  130</span>{ <a class="code hl_variable" href="../../d3/d9a/a10802.html#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">m_maxDuration</a> = duration; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00256">m_maxDuration</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03002">Spell::DoSpellHitOnUnit()</a>, <a class="el" href="../../#l03794">Spell::EffectScriptEffect()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l00499">spell_dru_glyph_of_starfire::HandleScriptEffect()</a>, <a class="el" href="../../#l00880">RefreshDuration()</a>, and <a class="el" href="../../#l01080">AuraScript::SetMaxDuration()</a>.</p>

</div>
</div>
<a id="a8f9f4a57e87c86b384b637403fff06e7" name="a8f9f4a57e87c86b384b637403fff06e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f9f4a57e87c86b384b637403fff06e7">&#9670;&#160;</a></span>SetNeedClientUpdateForTargets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::SetNeedClientUpdateForTargets </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1259</span>{</div>
<div class="line"><span class="lineno"> 1260</span>    <span class="keywordflow">for</span> (ApplicationMap::const_iterator appIter = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.begin(); appIter != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.end(); ++appIter)</div>
<div class="line"><span class="lineno"> 1261</span>        appIter-&gt;second-&gt;SetNeedClientUpdate();</div>
<div class="line"><span class="lineno"> 1262</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00266">m_applications</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l05462">Unit::DelayOwnedAuras()</a>, <a class="el" href="../../#l01021">ModStackAmount()</a>, <a class="el" href="../../#l02206">PrepareProcToTrigger()</a>, <a class="el" href="../../#l00952">SetCharges()</a>, <a class="el" href="../../#l00868">SetDuration()</a>, and <a class="el" href="../../#l00995">SetStackAmount()</a>.</p>

</div>
</div>
<a id="a1f6c2606d7dc499c1fc1ba0cee1f255b" name="a1f6c2606d7dc499c1fc1ba0cee1f255b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f6c2606d7dc499c1fc1ba0cee1f255b">&#9670;&#160;</a></span>SetStackAmount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::SetStackAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  996</span>{</div>
<div class="line"><span class="lineno">  997</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a3c01fd7df3476af276831667baa3a0ee">m_stackAmount</a> = stackAmount;</div>
<div class="line"><span class="lineno">  998</span>    <a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>();</div>
<div class="line"><span class="lineno">  999</span> </div>
<div class="line"><span class="lineno"> 1000</span>    <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 1001</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1002</span> </div>
<div class="line"><span class="lineno"> 1003</span>    std::list&lt;AuraApplication*&gt; applications;</div>
<div class="line"><span class="lineno"> 1004</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a66f71f0ac319d34ae8cbe5bc4b4bcfb7">GetApplicationList</a>(applications);</div>
<div class="line"><span class="lineno"> 1005</span> </div>
<div class="line"><span class="lineno"> 1006</span>    <span class="keywordflow">for</span> (std::list&lt;AuraApplication*&gt;::const_iterator apptItr = applications.begin(); apptItr != applications.end(); ++apptItr)</div>
<div class="line"><span class="lineno"> 1007</span>        <span class="keywordflow">if</span> (!(*apptItr)-&gt;GetRemoveMode())</div>
<div class="line"><span class="lineno"> 1008</span>            <a class="code hl_function" href="../../d3/d9a/a10802.html#ac6a690bd3e87d00af4c6a562b250f6f1">HandleAuraSpecificMods</a>(*apptItr, caster, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1009</span> </div>
<div class="line"><span class="lineno"> 1010</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 1011</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a3d22c519ba658770e61a1616be667a09">HasEffect</a>(i))</div>
<div class="line"><span class="lineno"> 1012</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a07673908af178ffaee01353a6d11a703">ChangeAmount</a>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]-&gt;CalculateAmount(caster), <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1013</span> </div>
<div class="line"><span class="lineno"> 1014</span>    <span class="keywordflow">for</span> (std::list&lt;AuraApplication*&gt;::const_iterator apptItr = applications.begin(); apptItr != applications.end(); ++apptItr)</div>
<div class="line"><span class="lineno"> 1015</span>        <span class="keywordflow">if</span> (!(*apptItr)-&gt;GetRemoveMode())</div>
<div class="line"><span class="lineno"> 1016</span>            <a class="code hl_function" href="../../d3/d9a/a10802.html#ac6a690bd3e87d00af4c6a562b250f6f1">HandleAuraSpecificMods</a>(*apptItr, caster, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1017</span> </div>
<div class="line"><span class="lineno"> 1018</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a8f9f4a57e87c86b384b637403fff06e7">SetNeedClientUpdateForTargets</a>();</div>
<div class="line"><span class="lineno"> 1019</span>}</div>
<div class="ttc" id="aa10790_html_a07673908af178ffaee01353a6d11a703"><div class="ttname"><a href="../../de/d50/a10790.html#a07673908af178ffaee01353a6d11a703">AuraEffect::ChangeAmount</a></div><div class="ttdeci">void ChangeAmount(int32 newAmount, bool mark=true, bool onStackOrReapply=false)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:708</div></div>
<div class="ttc" id="aa10802_html_a66f71f0ac319d34ae8cbe5bc4b4bcfb7"><div class="ttname"><a href="../../d3/d9a/a10802.html#a66f71f0ac319d34ae8cbe5bc4b4bcfb7">Aura::GetApplicationList</a></div><div class="ttdeci">void GetApplicationList(std::list&lt; AuraApplication * &gt; &amp;applicationList) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:1249</div></div>
<div class="ttc" id="aa10802_html_ac6a690bd3e87d00af4c6a562b250f6f1"><div class="ttname"><a href="../../d3/d9a/a10802.html#ac6a690bd3e87d00af4c6a562b250f6f1">Aura::HandleAuraSpecificMods</a></div><div class="ttdeci">void HandleAuraSpecificMods(AuraApplication const *aurApp, Unit *caster, bool apply, bool onReapply)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:1265</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00708">AuraEffect::ChangeAmount()</a>, <a class="el" href="../../#l01249">GetApplicationList()</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l00173">HasEffect()</a>, <a class="el" href="../../#l00265">m_effects</a>, <a class="el" href="../../#l00263">m_stackAmount</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, and <a class="el" href="../../#l01258">SetNeedClientUpdateForTargets()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03002">Spell::DoSpellHitOnUnit()</a>, <a class="el" href="../../#l05409">AuraEffect::HandleAuraDummy()</a>, <a class="el" href="../../#l00838">spell_brewfest_main_ram_buff::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00614">spell_rotface_large_ooze_combine::HandleScript()</a>, <a class="el" href="../../#l01021">ModStackAmount()</a>, <a class="el" href="../../#l18903">Unit::SetAuraStack()</a>, and <a class="el" href="../../#l01130">AuraScript::SetStackAmount()</a>.</p>

</div>
</div>
<a id="a32cda9926aa3e5d7def42ebf85f23bc8" name="a32cda9926aa3e5d7def42ebf85f23bc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32cda9926aa3e5d7def42ebf85f23bc8">&#9670;&#160;</a></span>SetTriggeredByAuraSpellInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::SetTriggeredByAuraSpellInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *&#160;</td>
          <td class="paramname"><em>triggeredByAuraSpellInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2748</span>{</div>
<div class="line"><span class="lineno"> 2749</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#aa4972c4116685b08f25f6a2711c196d3">m_triggeredByAuraSpellInfo</a> = triggeredByAuraSpellInfo;</div>
<div class="line"><span class="lineno"> 2750</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00275">m_triggeredByAuraSpellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03002">Spell::DoSpellHitOnUnit()</a>, and <a class="el" href="../../#l01844">Spell::EffectPersistentAA()</a>.</p>

</div>
</div>
<a id="a357ceeec6595c847d01b5ed4713ffd2f" name="a357ceeec6595c847d01b5ed4713ffd2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a357ceeec6595c847d01b5ed4713ffd2f">&#9670;&#160;</a></span>SetUsingCharges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::SetUsingCharges </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  201</span>{ <a class="code hl_variable" href="../../d3/d9a/a10802.html#ad8811634ba5d82b9581e94e8a0fd6097">m_isUsingCharges</a> = val; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00270">m_isUsingCharges</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l07272">AuraEffect::HandleRaidProcFromChargeAuraProc()</a>, and <a class="el" href="../../#l07320">AuraEffect::HandleRaidProcFromChargeWithValueAuraProc()</a>.</p>

</div>
</div>
<a id="ab0d4d20bb3fac4108ba3dbc891d8dec9" name="ab0d4d20bb3fac4108ba3dbc891d8dec9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0d4d20bb3fac4108ba3dbc891d8dec9">&#9670;&#160;</a></span>TriggerProcOnEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::TriggerProcOnEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d87/a10798.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/daf/a08498.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2332</span>{</div>
<div class="line"><span class="lineno"> 2333</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a99d38e9baa13b6683db43d67757ec982">CallScriptProcHandlers</a>(aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 2334</span> </div>
<div class="line"><span class="lineno"> 2335</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 2336</span>        <span class="keywordflow">if</span> (aurApp-&gt;<a class="code hl_function" href="../../d4/d87/a10798.html#af3e44cda4fe299e5bf2ba8ca37142cba">HasEffect</a>(i))</div>
<div class="line"><span class="lineno"> 2337</span>            <span class="comment">// OnEffectProc / AfterEffectProc hooks handled in AuraEffect::HandleProc()</span></div>
<div class="line"><span class="lineno"> 2338</span>            <a class="code hl_function" href="../../d3/d9a/a10802.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(i)-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#ad2a6d0a6fcbf6f5d53633e0d1ab10dd3">HandleProc</a>(aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 2339</span> </div>
<div class="line"><span class="lineno"> 2340</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a3bac8c34612850e65cd2411f2c7b6baa">CallScriptAfterProcHandlers</a>(aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 2341</span> </div>
<div class="line"><span class="lineno"> 2342</span>    <span class="comment">// Remove aura if we&#39;ve used last charge to proc</span></div>
<div class="line"><span class="lineno"> 2343</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a62c2b89c6a9269aba7870b36e5872330">IsUsingCharges</a>() &amp;&amp; !<a class="code hl_function" href="../../d3/d9a/a10802.html#ab07705be94c0c10fce558c80d7208e0b">GetCharges</a>())</div>
<div class="line"><span class="lineno"> 2344</span>        <a class="code hl_function" href="../../d3/d9a/a10802.html#af9799e5670c2bc3899e3430aa793ca20">Remove</a>();</div>
<div class="line"><span class="lineno"> 2345</span>}</div>
<div class="ttc" id="aa10790_html_ad2a6d0a6fcbf6f5d53633e0d1ab10dd3"><div class="ttname"><a href="../../de/d50/a10790.html#ad2a6d0a6fcbf6f5d53633e0d1ab10dd3">AuraEffect::HandleProc</a></div><div class="ttdeci">void HandleProc(AuraApplication *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:1169</div></div>
<div class="ttc" id="aa10798_html_af3e44cda4fe299e5bf2ba8ca37142cba"><div class="ttname"><a href="../../d4/d87/a10798.html#af3e44cda4fe299e5bf2ba8ca37142cba">AuraApplication::HasEffect</a></div><div class="ttdeci">bool HasEffect(uint8 effect) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:67</div></div>
<div class="ttc" id="aa10802_html_a3bac8c34612850e65cd2411f2c7b6baa"><div class="ttname"><a href="../../d3/d9a/a10802.html#a3bac8c34612850e65cd2411f2c7b6baa">Aura::CallScriptAfterProcHandlers</a></div><div class="ttdeci">void CallScriptAfterProcHandlers(AuraApplication const *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2701</div></div>
<div class="ttc" id="aa10802_html_a99d38e9baa13b6683db43d67757ec982"><div class="ttname"><a href="../../d3/d9a/a10802.html#a99d38e9baa13b6683db43d67757ec982">Aura::CallScriptProcHandlers</a></div><div class="ttdeci">bool CallScriptProcHandlers(AuraApplication const *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2684</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02701">CallScriptAfterProcHandlers()</a>, <a class="el" href="../../#l02684">CallScriptProcHandlers()</a>, <a class="el" href="../../#l00141">GetCharges()</a>, <a class="el" href="../../#l00175">GetEffect()</a>, <a class="el" href="../../#l01169">AuraEffect::HandleProc()</a>, <a class="el" href="../../#l00067">AuraApplication::HasEffect()</a>, <a class="el" href="../../#l00200">IsUsingCharges()</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, and <a class="el" href="../../d3/d9a/a10802.html#af9799e5670c2bc3899e3430aa793ca20">Remove()</a>.</p>

</div>
</div>
<a id="a3bbcbc2c658a2d959b20837e1e2c31b7" name="a3bbcbc2c658a2d959b20837e1e2c31b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bbcbc2c658a2d959b20837e1e2c31b7">&#9670;&#160;</a></span>TryCreate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d9a/a10802.html">Aura</a> * Aura::TryCreate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *&#160;</td>
          <td class="paramname"><em>spellproto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>effMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df3/a08182.html">WorldObject</a> *&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>baseAmount</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d36/a08106.html">Item</a> *&#160;</td>
          <td class="paramname"><em>castItem</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>casterGUID</em> = <code><a class="el" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>itemGUID</em> = <code><a class="el" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  353</span>{</div>
<div class="line"><span class="lineno">  354</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(spellproto);</div>
<div class="line"><span class="lineno">  355</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(owner);</div>
<div class="line"><span class="lineno">  356</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(caster || casterGUID);</div>
<div class="line"><span class="lineno">  357</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(tryEffMask &lt;= <a class="code hl_define" href="../../d7/d14/a02750.html#a3ac65d8635b4379f0d5b75a0e2dfd9c8">MAX_EFFECT_MASK</a>);</div>
<div class="line"><span class="lineno">  358</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effMask = <a class="code hl_function" href="../../d3/d9a/a10802.html#aca22c44b0c3179824f9951b0b3ce206c">Aura::BuildEffectMaskForOwner</a>(spellproto, tryEffMask, owner);</div>
<div class="line"><span class="lineno">  359</span>    <span class="keywordflow">if</span> (!effMask)</div>
<div class="line"><span class="lineno">  360</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  361</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#ae44dc9394657b8fbc90bec95911cac03">Create</a>(spellproto, effMask, owner, caster, baseAmount, castItem, casterGUID, itemGUID);</div>
<div class="line"><span class="lineno">  362</span>}</div>
<div class="ttc" id="aa10802_html_aca22c44b0c3179824f9951b0b3ce206c"><div class="ttname"><a href="../../d3/d9a/a10802.html#aca22c44b0c3179824f9951b0b3ce206c">Aura::BuildEffectMaskForOwner</a></div><div class="ttdeci">static uint8 BuildEffectMaskForOwner(SpellInfo const *spellProto, uint8 avalibleEffectMask, WorldObject *owner)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:298</div></div>
<div class="ttc" id="aa10802_html_ae44dc9394657b8fbc90bec95911cac03"><div class="ttname"><a href="../../d3/d9a/a10802.html#ae44dc9394657b8fbc90bec95911cac03">Aura::Create</a></div><div class="ttdeci">static Aura * Create(SpellInfo const *spellproto, uint8 effMask, WorldObject *owner, Unit *caster, int32 *baseAmount, Item *castItem, ObjectGuid casterGUID, ObjectGuid itemGUID=ObjectGuid::Empty)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:364</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00069">ASSERT_NODEBUGINFO</a>, <a class="el" href="../../#l00298">BuildEffectMaskForOwner()</a>, <a class="el" href="../../#l00364">Create()</a>, and <a class="el" href="../../#l01637">MAX_EFFECT_MASK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01607">Pet::_LoadAuras()</a>, <a class="el" href="../../#l05699">Player::_LoadAuras()</a>, <a class="el" href="../../#l01844">Spell::EffectPersistentAA()</a>, and <a class="el" href="../../#l04942">Unit::RemoveAurasDueToSpellByDispel()</a>.</p>

</div>
</div>
<a id="a9637e205c147457e50b47efe0f8f7904" name="a9637e205c147457e50b47efe0f8f7904"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9637e205c147457e50b47efe0f8f7904">&#9670;&#160;</a></span>TryRefreshStackOrCreate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d9a/a10802.html">Aura</a> * Aura::TryRefreshStackOrCreate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *&#160;</td>
          <td class="paramname"><em>spellproto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>tryEffMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df3/a08182.html">WorldObject</a> *&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>baseAmount</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d36/a08106.html">Item</a> *&#160;</td>
          <td class="paramname"><em>castItem</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>casterGUID</em> = <code><a class="el" href="../../d9/d08/a08198.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>refresh</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>periodicReset</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  327</span>{</div>
<div class="line"><span class="lineno">  328</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(spellproto);</div>
<div class="line"><span class="lineno">  329</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(owner);</div>
<div class="line"><span class="lineno">  330</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(caster || casterGUID);</div>
<div class="line"><span class="lineno">  331</span>    <a class="code hl_define" href="../../da/d45/a00011.html#ae4aa5b88f8a0cd841e02343e63098f7a">ASSERT_NODEBUGINFO</a>(tryEffMask &lt;= <a class="code hl_define" href="../../d7/d14/a02750.html#a3ac65d8635b4379f0d5b75a0e2dfd9c8">MAX_EFFECT_MASK</a>);</div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">if</span> (refresh)</div>
<div class="line"><span class="lineno">  333</span>        *refresh = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  334</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effMask = <a class="code hl_function" href="../../d3/d9a/a10802.html#aca22c44b0c3179824f9951b0b3ce206c">Aura::BuildEffectMaskForOwner</a>(spellproto, tryEffMask, owner);</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">if</span> (!effMask)</div>
<div class="line"><span class="lineno">  336</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d3/d9a/a10802.html">Aura</a>* foundAura = owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#afd88f95deffad982ca0b5ef16b6244e8">ToUnit</a>()-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a9f63d861cbd0113802b941275e90208c">_TryStackingOrRefreshingExistingAura</a>(spellproto, effMask, caster, baseAmount, castItem, casterGUID, periodicReset))</div>
<div class="line"><span class="lineno">  338</span>    {</div>
<div class="line"><span class="lineno">  339</span>        <span class="comment">// we&#39;ve here aura, which script triggered removal after modding stack amount</span></div>
<div class="line"><span class="lineno">  340</span>        <span class="comment">// check the state here, so we won&#39;t create new Aura object</span></div>
<div class="line"><span class="lineno">  341</span>        <span class="keywordflow">if</span> (foundAura-&gt;IsRemoved())</div>
<div class="line"><span class="lineno">  342</span>            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>        <span class="keywordflow">if</span> (refresh)</div>
<div class="line"><span class="lineno">  345</span>            *refresh = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  346</span>        <span class="keywordflow">return</span> foundAura;</div>
<div class="line"><span class="lineno">  347</span>    }</div>
<div class="line"><span class="lineno">  348</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  349</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/d9a/a10802.html#ae44dc9394657b8fbc90bec95911cac03">Create</a>(spellproto, effMask, owner, caster, baseAmount, castItem, casterGUID);</div>
<div class="line"><span class="lineno">  350</span>}</div>
<div class="ttc" id="aa08526_html_a9f63d861cbd0113802b941275e90208c"><div class="ttname"><a href="../../d6/d15/a08526.html#a9f63d861cbd0113802b941275e90208c">Unit::_TryStackingOrRefreshingExistingAura</a></div><div class="ttdeci">Aura * _TryStackingOrRefreshingExistingAura(SpellInfo const *newAura, uint8 effMask, Unit *caster, int32 *baseAmount=nullptr, Item *castItem=nullptr, ObjectGuid casterGUID=ObjectGuid::Empty, bool periodicReset=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4354</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l04354">Unit::_TryStackingOrRefreshingExistingAura()</a>, <a class="el" href="../../#l00069">ASSERT_NODEBUGINFO</a>, <a class="el" href="../../#l00298">BuildEffectMaskForOwner()</a>, <a class="el" href="../../#l00364">Create()</a>, <a class="el" href="../../#l01637">MAX_EFFECT_MASK</a>, and <a class="el" href="../../#l00206">Object::ToUnit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l18879">Unit::AddAura()</a>, <a class="el" href="../../#l03002">Spell::DoSpellHitOnUnit()</a>, <a class="el" href="../../#l00634">misc_commandscript::HandleAuraCommand()</a>, <a class="el" href="../../#l02861">misc_commandscript::HandleFreezeCommand()</a>, <a class="el" href="../../#l00886">spell_putricide_slime_puddle::HandleScript()</a>, <a class="el" href="../../#l19555">Unit::HandleSpellClick()</a>, and <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>.</p>

</div>
</div>
<a id="a640ec9d7dd98eaf508209a8e3991ea4c" name="a640ec9d7dd98eaf508209a8e3991ea4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a640ec9d7dd98eaf508209a8e3991ea4c">&#9670;&#160;</a></span>UnregisterSingleTarget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::UnregisterSingleTarget </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1168</span>{</div>
<div class="line"><span class="lineno"> 1169</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#af22450afa8bf33c979c0a0f7d801ab4c">m_isSingleTarget</a>);</div>
<div class="line"><span class="lineno"> 1170</span>    <a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 1171</span>    <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 1172</span>    {</div>
<div class="line"><span class="lineno"> 1173</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a271e427d8e8481efd5cd5f537ec9e419">LOG_INFO</a>(<span class="stringliteral">&quot;spells&quot;</span>, <span class="stringliteral">&quot;Aura::UnregisterSingleTarget: (A1) - {}, {}, {}, {}&quot;</span>, <a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>(), <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;GetTypeId(), <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;GetEntry(), <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;<a class="code hl_function" href="../../d2/ddc/a04717.html#af911e3860ec519c541d6df35468ee41b">GetName</a>());</div>
<div class="line"><span class="lineno"> 1174</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells&quot;</span>, <span class="stringliteral">&quot;Aura::UnregisterSingleTarget: No caster was found.&quot;</span>); <span class="comment">//ASSERT(caster);</span></div>
<div class="line"><span class="lineno"> 1175</span>    }</div>
<div class="line"><span class="lineno"> 1176</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1177</span>        caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#ae40c55cefd703448ec0159fa7b010a42">GetSingleCastAuras</a>().remove(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1178</span> </div>
<div class="line"><span class="lineno"> 1179</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#acb34c6f61b861a35398f1d8b7947312e">SetIsSingleTarget</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1180</span>}</div>
<div class="ttc" id="aa00035_html_a271e427d8e8481efd5cd5f537ec9e419"><div class="ttname"><a href="../../d4/d8c/a00035.html#a271e427d8e8481efd5cd5f537ec9e419">LOG_INFO</a></div><div class="ttdeci">#define LOG_INFO(filterType__,...)</div><div class="ttdef"><b>Definition:</b> Log.h:165</div></div>
<div class="ttc" id="aa04717_html_af911e3860ec519c541d6df35468ee41b"><div class="ttname"><a href="../../d2/ddc/a04717.html#af911e3860ec519c541d6df35468ee41b">AccountMgr::GetName</a></div><div class="ttdeci">bool GetName(uint32 accountId, std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> AccountMgr.cpp:257</div></div>
<div class="ttc" id="aa08526_html_ae40c55cefd703448ec0159fa7b010a42"><div class="ttname"><a href="../../d6/d15/a08526.html#ae40c55cefd703448ec0159fa7b010a42">Unit::GetSingleCastAuras</a></div><div class="ttdeci">AuraList &amp; GetSingleCastAuras()</div><div class="ttdef"><b>Definition:</b> Unit.h:1350</div></div>
<div class="ttc" id="aa10802_html_acb34c6f61b861a35398f1d8b7947312e"><div class="ttname"><a href="../../d3/d9a/a10802.html#acb34c6f61b861a35398f1d8b7947312e">Aura::SetIsSingleTarget</a></div><div class="ttdeci">void SetIsSingleTarget(bool val)</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:166</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l00107">GetOwner()</a>, <a class="el" href="../../#l01350">Unit::GetSingleCastAuras()</a>, <a class="el" href="../../#l00157">LOG_ERROR</a>, <a class="el" href="../../#l00165">LOG_INFO</a>, <a class="el" href="../../#l00269">m_isSingleTarget</a>, and <a class="el" href="../../#l00166">SetIsSingleTarget()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>, and <a class="el" href="../../#l04705">Unit::RemoveOwnedAura()</a>.</p>

</div>
</div>
<a id="a4c573f5f8069c14c997c85c08bac3dd4" name="a4c573f5f8069c14c997c85c08bac3dd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c573f5f8069c14c997c85c08bac3dd4">&#9670;&#160;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::Update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>diff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  799</span>{</div>
<div class="line"><span class="lineno">  800</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#a406738b04948572a30626082ebe7a0e0">m_duration</a> &gt; 0)</div>
<div class="line"><span class="lineno">  801</span>    {</div>
<div class="line"><span class="lineno">  802</span>        <a class="code hl_variable" href="../../d3/d9a/a10802.html#a406738b04948572a30626082ebe7a0e0">m_duration</a> -= diff;</div>
<div class="line"><span class="lineno">  803</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#a406738b04948572a30626082ebe7a0e0">m_duration</a> &lt; 0)</div>
<div class="line"><span class="lineno">  804</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a406738b04948572a30626082ebe7a0e0">m_duration</a> = 0;</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>        <span class="comment">// handle ManaPerSecond/ManaPerSecondPerLevel</span></div>
<div class="line"><span class="lineno">  807</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#a7af03c4091eed4aab81dd2d0613b4eca">m_timeCla</a>)</div>
<div class="line"><span class="lineno">  808</span>        {</div>
<div class="line"><span class="lineno">  809</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#a7af03c4091eed4aab81dd2d0613b4eca">m_timeCla</a> &gt; <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(diff))</div>
<div class="line"><span class="lineno">  810</span>                <a class="code hl_variable" href="../../d3/d9a/a10802.html#a7af03c4091eed4aab81dd2d0613b4eca">m_timeCla</a> -= diff;</div>
<div class="line"><span class="lineno">  811</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno">  812</span>            {</div>
<div class="line"><span class="lineno">  813</span>                <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> ManaPerSecond = <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a8fff47546b8052ac55963dd40e4ae394">ManaPerSecond</a> + <a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a40cefe82961ab58e8070546b2d1a1fc5">ManaPerSecondPerLevel</a> * caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#af4767dc4f1480f7c0527db4efe2643d9">GetLevel</a>())</div>
<div class="line"><span class="lineno">  814</span>                {</div>
<div class="line"><span class="lineno">  815</span>                    <a class="code hl_variable" href="../../d3/d9a/a10802.html#a7af03c4091eed4aab81dd2d0613b4eca">m_timeCla</a> += 1000 - diff;</div>
<div class="line"><span class="lineno">  816</span> </div>
<div class="line"><span class="lineno">  817</span>                    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> powertype = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code hl_variable" href="../../d3/d9a/a10802.html#aaba50101334e21660ff99d4668ae06b7">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d4/db9/a10906.html#a517ef88a7d9ce773b7906bdd19a88e85">PowerType</a>);</div>
<div class="line"><span class="lineno">  818</span>                    <span class="keywordflow">if</span> (powertype == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a46379b081e66f0ab034f94a9f5dbad22">POWER_HEALTH</a>)</div>
<div class="line"><span class="lineno">  819</span>                    {</div>
<div class="line"><span class="lineno">  820</span>                        <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>()) &gt; ManaPerSecond)</div>
<div class="line"><span class="lineno">  821</span>                            caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a009a87eeb9cc40ed7017610cbb914b9b">ModifyHealth</a>(-ManaPerSecond);</div>
<div class="line"><span class="lineno">  822</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  823</span>                        {</div>
<div class="line"><span class="lineno">  824</span>                            <a class="code hl_function" href="../../d3/d9a/a10802.html#af9799e5670c2bc3899e3430aa793ca20">Remove</a>();</div>
<div class="line"><span class="lineno">  825</span>                            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  826</span>                        }</div>
<div class="line"><span class="lineno">  827</span>                    }</div>
<div class="line"><span class="lineno">  828</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  829</span>                    {</div>
<div class="line"><span class="lineno">  830</span>                        <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(powertype)) &gt;= ManaPerSecond)</div>
<div class="line"><span class="lineno">  831</span>                            caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a04eac3be7ccc3a12db515b6d2ea20f07">ModifyPower</a>(powertype, -ManaPerSecond);</div>
<div class="line"><span class="lineno">  832</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  833</span>                        {</div>
<div class="line"><span class="lineno">  834</span>                            <a class="code hl_function" href="../../d3/d9a/a10802.html#af9799e5670c2bc3899e3430aa793ca20">Remove</a>();</div>
<div class="line"><span class="lineno">  835</span>                            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  836</span>                        }</div>
<div class="line"><span class="lineno">  837</span>                    }</div>
<div class="line"><span class="lineno">  838</span>                }</div>
<div class="line"><span class="lineno">  839</span>            }</div>
<div class="line"><span class="lineno">  840</span>        }</div>
<div class="line"><span class="lineno">  841</span>    }</div>
<div class="line"><span class="lineno">  842</span>}</div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a></div><div class="ttdeci">Powers</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:268</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414a46379b081e66f0ab034f94a9f5dbad22"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a46379b081e66f0ab034f94a9f5dbad22">POWER_HEALTH</a></div><div class="ttdeci">@ POWER_HEALTH</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:278</div></div>
<div class="ttc" id="aa08526_html_a009a87eeb9cc40ed7017610cbb914b9b"><div class="ttname"><a href="../../d6/d15/a08526.html#a009a87eeb9cc40ed7017610cbb914b9b">Unit::ModifyHealth</a></div><div class="ttdeci">int32 ModifyHealth(int32 val)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14091</div></div>
<div class="ttc" id="aa08526_html_a04eac3be7ccc3a12db515b6d2ea20f07"><div class="ttname"><a href="../../d6/d15/a08526.html#a04eac3be7ccc3a12db515b6d2ea20f07">Unit::ModifyPower</a></div><div class="ttdeci">int32 ModifyPower(Powers power, int32 val, bool withPowerUpdate=true)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14149</div></div>
<div class="ttc" id="aa08526_html_a958172d6051b106e3b3c776e4f9f3952"><div class="ttname"><a href="../../d6/d15/a08526.html#a958172d6051b106e3b3c776e4f9f3952">Unit::GetHealth</a></div><div class="ttdeci">uint32 GetHealth() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1029</div></div>
<div class="ttc" id="aa08526_html_ad7e475d80b9af430cc076d7c01f967e9"><div class="ttname"><a href="../../d6/d15/a08526.html#ad7e475d80b9af430cc076d7c01f967e9">Unit::GetPower</a></div><div class="ttdeci">uint32 GetPower(Powers power) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1056</div></div>
<div class="ttc" id="aa10906_html_a517ef88a7d9ce773b7906bdd19a88e85"><div class="ttname"><a href="../../d4/db9/a10906.html#a517ef88a7d9ce773b7906bdd19a88e85">SpellInfo::PowerType</a></div><div class="ttdeci">uint32 PowerType</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:362</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01029">Unit::GetHealth()</a>, <a class="el" href="../../#l01024">Unit::GetLevel()</a>, <a class="el" href="../../#l01056">Unit::GetPower()</a>, <a class="el" href="../../#l00257">m_duration</a>, <a class="el" href="../../#l00249">m_spellInfo</a>, <a class="el" href="../../#l00258">m_timeCla</a>, <a class="el" href="../../#l00365">SpellInfo::ManaPerSecond</a>, <a class="el" href="../../#l00366">SpellInfo::ManaPerSecondPerLevel</a>, <a class="el" href="../../#l14091">Unit::ModifyHealth()</a>, <a class="el" href="../../#l14149">Unit::ModifyPower()</a>, <a class="el" href="../../#l00278">POWER_HEALTH</a>, <a class="el" href="../../#l00362">SpellInfo::PowerType</a>, and <a class="el" href="../../d3/d9a/a10802.html#af9799e5670c2bc3899e3430aa793ca20">Remove()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00756">UpdateOwner()</a>.</p>

</div>
</div>
<a id="a6349dd41e39827b8c55464982801d1b4" name="a6349dd41e39827b8c55464982801d1b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6349dd41e39827b8c55464982801d1b4">&#9670;&#160;</a></span>UpdateOwner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::UpdateOwner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>diff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df3/a08182.html">WorldObject</a> *&#160;</td>
          <td class="paramname"><em>owner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  757</span>{</div>
<div class="line"><span class="lineno">  758</span>    <span class="keywordflow">if</span> (owner != <a class="code hl_variable" href="../../d3/d9a/a10802.html#ab415594d025a57ab429a85ab70e598cb">m_owner</a>)</div>
<div class="line"><span class="lineno">  759</span>    {</div>
<div class="line"><span class="lineno">  760</span>        <a class="code hl_define" href="../../da/d45/a00011.html#a5376571bbf4cdc9782683635f366f89a">ABORT</a>();</div>
<div class="line"><span class="lineno">  761</span>    }</div>
<div class="line"><span class="lineno">  762</span> </div>
<div class="line"><span class="lineno">  763</span>    <a class="code hl_class" href="../../d6/d15/a08526.html">Unit</a>* caster = <a class="code hl_function" href="../../d3/d9a/a10802.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>();</div>
<div class="line"><span class="lineno">  764</span>    <span class="comment">// Apply spellmods for channeled auras</span></div>
<div class="line"><span class="lineno">  765</span>    <span class="comment">// used for example when triggered spell of spell:10 is modded</span></div>
<div class="line"><span class="lineno">  766</span>    <a class="code hl_class" href="../../da/dce/a10842.html">Spell</a>* modSpell = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  767</span>    <a class="code hl_class" href="../../da/da3/a08394.html">Player</a>* modOwner = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  768</span>    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno">  769</span>    {</div>
<div class="line"><span class="lineno">  770</span>        modOwner = caster-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a2e6a98844f96c211f47b911a2766ada8">GetSpellModOwner</a>();</div>
<div class="line"><span class="lineno">  771</span>        <span class="keywordflow">if</span> (modOwner)</div>
<div class="line"><span class="lineno">  772</span>        {</div>
<div class="line"><span class="lineno">  773</span>            modSpell = modOwner-&gt;<a class="code hl_function" href="../../d6/d15/a08526.html#a2e9a4c70bb5a75e546c63acf5242b6f0">FindCurrentSpellBySpellId</a>(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>());</div>
<div class="line"><span class="lineno">  774</span>            <span class="keywordflow">if</span> (modSpell)</div>
<div class="line"><span class="lineno">  775</span>                modOwner-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a0a8d74504a10a162c77d4a64d652a1b5">SetSpellModTakingSpell</a>(modSpell, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  776</span>        }</div>
<div class="line"><span class="lineno">  777</span>    }</div>
<div class="line"><span class="lineno">  778</span> </div>
<div class="line"><span class="lineno">  779</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a4c573f5f8069c14c997c85c08bac3dd4">Update</a>(diff, caster);</div>
<div class="line"><span class="lineno">  780</span> </div>
<div class="line"><span class="lineno">  781</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#aeb7fadeb3b25c9d5a2903e5c1ea06ff2">m_updateTargetMapInterval</a> &lt;= <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(diff))</div>
<div class="line"><span class="lineno">  782</span>        <a class="code hl_function" href="../../d3/d9a/a10802.html#a8b5668b0179cec254f21a0b6bdf83974">UpdateTargetMap</a>(caster);</div>
<div class="line"><span class="lineno">  783</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  784</span>        <a class="code hl_variable" href="../../d3/d9a/a10802.html#aeb7fadeb3b25c9d5a2903e5c1ea06ff2">m_updateTargetMapInterval</a> -= diff;</div>
<div class="line"><span class="lineno">  785</span> </div>
<div class="line"><span class="lineno">  786</span>    <span class="comment">// update aura effects</span></div>
<div class="line"><span class="lineno">  787</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno">  788</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i])</div>
<div class="line"><span class="lineno">  789</span>            <a class="code hl_variable" href="../../d3/d9a/a10802.html#a2cea44bce63fa2b3fe6fa71905b3e1e2">m_effects</a>[i]-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a1e57c07b017695d76137b0d81074df1e">Update</a>(diff, caster);</div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>    <span class="comment">// remove spellmods after effects update</span></div>
<div class="line"><span class="lineno">  792</span>    <span class="keywordflow">if</span> (modSpell)</div>
<div class="line"><span class="lineno">  793</span>        modOwner-&gt;<a class="code hl_function" href="../../da/da3/a08394.html#a0a8d74504a10a162c77d4a64d652a1b5">SetSpellModTakingSpell</a>(modSpell, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  794</span> </div>
<div class="line"><span class="lineno">  795</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#accc852560f7b56d60c77581365a3b17f">_DeleteRemovedApplications</a>();</div>
<div class="line"><span class="lineno">  796</span>}</div>
<div class="ttc" id="aa08394_html_a0a8d74504a10a162c77d4a64d652a1b5"><div class="ttname"><a href="../../da/da3/a08394.html#a0a8d74504a10a162c77d4a64d652a1b5">Player::SetSpellModTakingSpell</a></div><div class="ttdeci">void SetSpellModTakingSpell(Spell *spell, bool apply)</div><div class="ttdef"><b>Definition:</b> Player.cpp:10087</div></div>
<div class="ttc" id="aa08526_html_a2e9a4c70bb5a75e546c63acf5242b6f0"><div class="ttname"><a href="../../d6/d15/a08526.html#a2e9a4c70bb5a75e546c63acf5242b6f0">Unit::FindCurrentSpellBySpellId</a></div><div class="ttdeci">Spell * FindCurrentSpellBySpellId(uint32 spell_id) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4144</div></div>
<div class="ttc" id="aa10790_html_a1e57c07b017695d76137b0d81074df1e"><div class="ttname"><a href="../../de/d50/a10790.html#a1e57c07b017695d76137b0d81074df1e">AuraEffect::Update</a></div><div class="ttdeci">void Update(uint32 diff, Unit *caster)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:897</div></div>
<div class="ttc" id="aa10802_html_a4c573f5f8069c14c997c85c08bac3dd4"><div class="ttname"><a href="../../d3/d9a/a10802.html#a4c573f5f8069c14c997c85c08bac3dd4">Aura::Update</a></div><div class="ttdeci">void Update(uint32 diff, Unit *caster)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:798</div></div>
<div class="ttc" id="aa10842_html"><div class="ttname"><a href="../../da/dce/a10842.html">Spell</a></div><div class="ttdef"><b>Definition:</b> Spell.h:287</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02347">_DeleteRemovedApplications()</a>, <a class="el" href="../../#l00076">ABORT</a>, <a class="el" href="../../#l04144">Unit::FindCurrentSpellBySpellId()</a>, <a class="el" href="../../#l00471">GetCaster()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l16578">Unit::GetSpellModOwner()</a>, <a class="el" href="../../#l00265">m_effects</a>, <a class="el" href="../../#l00254">m_owner</a>, <a class="el" href="../../#l00259">m_updateTargetMapInterval</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l10087">Player::SetSpellModTakingSpell()</a>, <a class="el" href="../../#l00897">AuraEffect::Update()</a>, <a class="el" href="../../#l00798">Update()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03844">Unit::_UpdateSpells()</a>, and <a class="el" href="../../#l00139">DynamicObject::Update()</a>.</p>

</div>
</div>
<a id="a8b5668b0179cec254f21a0b6bdf83974" name="a8b5668b0179cec254f21a0b6bdf83974"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b5668b0179cec254f21a0b6bdf83974">&#9670;&#160;</a></span>UpdateTargetMap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Aura::UpdateTargetMap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  589</span>{</div>
<div class="line"><span class="lineno">  590</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a462457cadd52ba8a0edd5609c71ebbc0">IsRemoved</a>())</div>
<div class="line"><span class="lineno">  591</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>    <a class="code hl_variable" href="../../d3/d9a/a10802.html#aeb7fadeb3b25c9d5a2903e5c1ea06ff2">m_updateTargetMapInterval</a> = <a class="code hl_variable" href="../../d7/d54/a03089.html#a49c1eff45f8eb67e523f8593923a5df0">UPDATE_TARGET_MAP_INTERVAL</a>;</div>
<div class="line"><span class="lineno">  594</span> </div>
<div class="line"><span class="lineno">  595</span>    <span class="comment">// fill up to date target list</span></div>
<div class="line"><span class="lineno">  596</span>    <span class="comment">//       target, effMask</span></div>
<div class="line"><span class="lineno">  597</span>    std::map&lt;Unit*, uint8&gt; targets;</div>
<div class="line"><span class="lineno">  598</span> </div>
<div class="line"><span class="lineno">  599</span>    <a class="code hl_function" href="../../d3/d9a/a10802.html#a304404f284fba0b6d8dc046140e309ae">FillTargetMap</a>(targets, caster);</div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>    <a class="code hl_typedef" href="../../de/d3d/a03515.html#abbe331960980fa852a0be15ccebef947">UnitList</a> targetsToRemove;</div>
<div class="line"><span class="lineno">  602</span> </div>
<div class="line"><span class="lineno">  603</span>    <span class="comment">// mark all auras as ready to remove</span></div>
<div class="line"><span class="lineno">  604</span>    <span class="keywordflow">for</span> (ApplicationMap::iterator appIter = <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.begin(); appIter != <a class="code hl_variable" href="../../d3/d9a/a10802.html#a59978cc8d9ebb00cb569d64eed5cef03">m_applications</a>.end(); ++appIter)</div>
<div class="line"><span class="lineno">  605</span>    {</div>
<div class="line"><span class="lineno">  606</span>        std::map&lt;Unit*, uint8&gt;::iterator existing = targets.find(appIter-&gt;second-&gt;GetTarget());</div>
<div class="line"><span class="lineno">  607</span>        <span class="comment">// not found in current area - remove the aura</span></div>
<div class="line"><span class="lineno">  608</span>        <span class="keywordflow">if</span> (existing == targets.end())</div>
<div class="line"><span class="lineno">  609</span>            targetsToRemove.push_back(appIter-&gt;second-&gt;GetTarget());</div>
<div class="line"><span class="lineno">  610</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  611</span>        {</div>
<div class="line"><span class="lineno">  612</span>            <span class="comment">// xinef: check immunities here, so aura wont get removed on every tick and then reapplied</span></div>
<div class="line"><span class="lineno">  613</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#a13f14942fd6394df8e5d8ae820fd3fc7">IsArea</a>())</div>
<div class="line"><span class="lineno">  614</span>                <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effIndex = 0; effIndex &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++effIndex)</div>
<div class="line"><span class="lineno">  615</span>                {</div>
<div class="line"><span class="lineno">  616</span>                    <span class="keywordflow">if</span> ((existing-&gt;second &amp; (1 &lt;&lt; effIndex)) &amp;&amp; existing-&gt;first-&gt;IsImmunedToSpellEffect(<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>(), effIndex))</div>
<div class="line"><span class="lineno">  617</span>                        existing-&gt;second &amp;= ~(1 &lt;&lt; effIndex);</div>
<div class="line"><span class="lineno">  618</span>                }</div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span>            <span class="comment">// needs readding - remove now, will be applied in next update cycle</span></div>
<div class="line"><span class="lineno">  621</span>            <span class="comment">// (dbcs do not have auras which apply on same type of targets but have different radius, so this is not really needed)</span></div>
<div class="line"><span class="lineno">  622</span>            <span class="keywordflow">if</span> (appIter-&gt;second-&gt;GetEffectMask() != existing-&gt;second || !<a class="code hl_function" href="../../d3/d9a/a10802.html#ac2ee53cb584c3528f2990d391393bc1d">CanBeAppliedOn</a>(existing-&gt;first))</div>
<div class="line"><span class="lineno">  623</span>                targetsToRemove.push_back(appIter-&gt;second-&gt;GetTarget());</div>
<div class="line"><span class="lineno">  624</span>            <span class="comment">// nothing todo - aura already applied</span></div>
<div class="line"><span class="lineno">  625</span>            <span class="comment">// remove from auras to register list</span></div>
<div class="line"><span class="lineno">  626</span>            targets.erase(existing);</div>
<div class="line"><span class="lineno">  627</span>        }</div>
<div class="line"><span class="lineno">  628</span>    }</div>
<div class="line"><span class="lineno">  629</span> </div>
<div class="line"><span class="lineno">  630</span>    <span class="comment">// register auras for units</span></div>
<div class="line"><span class="lineno">  631</span>    <span class="keywordflow">for</span> (std::map&lt;Unit*, uint8&gt;::iterator itr = targets.begin(); itr != targets.end();)</div>
<div class="line"><span class="lineno">  632</span>    {</div>
<div class="line"><span class="lineno">  633</span>        <span class="comment">// aura mustn&#39;t be already applied on target</span></div>
<div class="line"><span class="lineno">  634</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d4/d87/a10798.html">AuraApplication</a>* aurApp = <a class="code hl_function" href="../../d3/d9a/a10802.html#aa5e42f1c32857e82102fd95bb46ec013">GetApplicationOfTarget</a>(itr-&gt;first-&gt;GetGUID()))</div>
<div class="line"><span class="lineno">  635</span>        {</div>
<div class="line"><span class="lineno">  636</span>            <span class="comment">// the core created 2 different units with same guid</span></div>
<div class="line"><span class="lineno">  637</span>            <span class="comment">// this is a major failue, which i can&#39;t fix right now</span></div>
<div class="line"><span class="lineno">  638</span>            <span class="comment">// let&#39;s remove one unit from aura list</span></div>
<div class="line"><span class="lineno">  639</span>            <span class="comment">// this may cause area aura &quot;bouncing&quot; between 2 units after each update</span></div>
<div class="line"><span class="lineno">  640</span>            <span class="comment">// but because we know the reason of a crash we can remove the assertion for now</span></div>
<div class="line"><span class="lineno">  641</span>            <span class="keywordflow">if</span> (aurApp-&gt;GetTarget() != itr-&gt;first)</div>
<div class="line"><span class="lineno">  642</span>            {</div>
<div class="line"><span class="lineno">  643</span>                <span class="comment">// remove from auras to register list</span></div>
<div class="line"><span class="lineno">  644</span>                targets.erase(itr++);</div>
<div class="line"><span class="lineno">  645</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  646</span>            }</div>
<div class="line"><span class="lineno">  647</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  648</span>            {</div>
<div class="line"><span class="lineno">  649</span>                <span class="comment">// ok, we have one unit twice in target map (impossible, but...)</span></div>
<div class="line"><span class="lineno">  650</span>                <a class="code hl_define" href="../../da/d45/a00011.html#a5376571bbf4cdc9782683635f366f89a">ABORT</a>();</div>
<div class="line"><span class="lineno">  651</span>            }</div>
<div class="line"><span class="lineno">  652</span>        }</div>
<div class="line"><span class="lineno">  653</span> </div>
<div class="line"><span class="lineno">  654</span>        <span class="keywordtype">bool</span> addUnit = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  655</span>        <span class="comment">// check target immunities</span></div>
<div class="line"><span class="lineno">  656</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effIndex = 0; effIndex &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++effIndex)</div>
<div class="line"><span class="lineno">  657</span>        {</div>
<div class="line"><span class="lineno">  658</span>            <span class="keywordflow">if</span> ((itr-&gt;second &amp; (1 &lt;&lt; effIndex)) &amp;&amp; itr-&gt;first-&gt;IsImmunedToSpellEffect(<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>(), effIndex))</div>
<div class="line"><span class="lineno">  659</span>                itr-&gt;second &amp;= ~(1 &lt;&lt; effIndex);</div>
<div class="line"><span class="lineno">  660</span>        }</div>
<div class="line"><span class="lineno">  661</span>        <span class="keywordflow">if</span> (!itr-&gt;second || itr-&gt;first-&gt;IsImmunedToSpell(<a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()) || !<a class="code hl_function" href="../../d3/d9a/a10802.html#ac2ee53cb584c3528f2990d391393bc1d">CanBeAppliedOn</a>(itr-&gt;first))</div>
<div class="line"><span class="lineno">  662</span>            addUnit = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  663</span> </div>
<div class="line"><span class="lineno">  664</span>        <span class="keywordflow">if</span> (addUnit)</div>
<div class="line"><span class="lineno">  665</span>        {</div>
<div class="line"><span class="lineno">  666</span>            <span class="comment">// persistent area aura does not hit flying targets</span></div>
<div class="line"><span class="lineno">  667</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/d9a/a10802.html#aaddb94cd3bd95b145a8b8392e9feecca">GetType</a>() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a>)</div>
<div class="line"><span class="lineno">  668</span>            {</div>
<div class="line"><span class="lineno">  669</span>                <span class="keywordflow">if</span> (itr-&gt;first-&gt;IsInFlight())</div>
<div class="line"><span class="lineno">  670</span>                    addUnit = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>            <span class="comment">// Allow only 1 persistent area aura to affect our targets if a custom flag is set.</span></div>
<div class="line"><span class="lineno">  673</span>            <span class="keywordflow">if</span> (itr-&gt;first-&gt;HasAura(<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>()) &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d4/db9/a10906.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d4/d44/a03065.html#a93795b2131c8cbe38a7b23768a5a146dae9ced52980e85ea4d56e1a2540d0d0e9">SPELL_ATTR0_CU_ONLY_ONE_AREA_AURA</a>))</div>
<div class="line"><span class="lineno">  674</span>                addUnit = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  675</span>            }</div>
<div class="line"><span class="lineno">  676</span>            <span class="comment">// unit auras can not stack with each other</span></div>
<div class="line"><span class="lineno">  677</span>            <span class="keywordflow">else</span> <span class="comment">// (GetType() == UNIT_AURA_TYPE)</span></div>
<div class="line"><span class="lineno">  678</span>            {</div>
<div class="line"><span class="lineno">  679</span>                <span class="comment">// Allow to remove by stack when aura is going to be applied on owner</span></div>
<div class="line"><span class="lineno">  680</span>                <span class="keywordflow">if</span> (itr-&gt;first != <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>())</div>
<div class="line"><span class="lineno">  681</span>                {</div>
<div class="line"><span class="lineno">  682</span>                    <span class="comment">// check if not stacking aura already on target</span></div>
<div class="line"><span class="lineno">  683</span>                    <span class="comment">// this one prevents unwanted usefull buff loss because of stacking and prevents overriding auras periodicaly by 2 near area aura owners</span></div>
<div class="line"><span class="lineno">  684</span>                    <span class="keywordflow">for</span> (Unit::AuraApplicationMap::iterator iter = itr-&gt;first-&gt;GetAppliedAuras().begin(); iter != itr-&gt;first-&gt;GetAppliedAuras().end(); ++iter)</div>
<div class="line"><span class="lineno">  685</span>                    {</div>
<div class="line"><span class="lineno">  686</span>                        <a class="code hl_class" href="../../d3/d9a/a10802.html">Aura</a> <span class="keyword">const</span>* aura = iter-&gt;second-&gt;GetBase();</div>
<div class="line"><span class="lineno">  687</span>                        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d3/d9a/a10802.html#a40cd6707c45eead445b1f487991da9c1">CanStackWith</a>(aura, <span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  688</span>                        {</div>
<div class="line"><span class="lineno">  689</span>                            addUnit = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  690</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  691</span>                        }</div>
<div class="line"><span class="lineno">  692</span>                    }</div>
<div class="line"><span class="lineno">  693</span>                }</div>
<div class="line"><span class="lineno">  694</span>            }</div>
<div class="line"><span class="lineno">  695</span>        }</div>
<div class="line"><span class="lineno">  696</span>        <span class="keywordflow">if</span> (!addUnit)</div>
<div class="line"><span class="lineno">  697</span>            targets.erase(itr++);</div>
<div class="line"><span class="lineno">  698</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  699</span>        {</div>
<div class="line"><span class="lineno">  700</span>            <span class="comment">// owner has to be in world, or effect has to be applied to self</span></div>
<div class="line"><span class="lineno">  701</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;<a class="code hl_function" href="../../db/df3/a08182.html#a5f9bf74852e013f57c57ac1893afc89e">IsSelfOrInSameMap</a>(itr-&gt;first))</div>
<div class="line"><span class="lineno">  702</span>            {</div>
<div class="line"><span class="lineno">  703</span>                <span class="comment">//TODO: There is a crash caused by shadowfiend load addon</span></div>
<div class="line"><span class="lineno">  704</span>                <a class="code hl_define" href="../../d4/d8c/a00035.html#a0e09b50c268dc6897a1c70aa46de936e">LOG_FATAL</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;Aura {}: Owner {} (map {}) is not in the same map as target {} (map {}).&quot;</span>, <a class="code hl_function" href="../../d3/d9a/a10802.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;Id,</div>
<div class="line"><span class="lineno">  705</span>                               <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;<a class="code hl_function" href="../../d2/ddc/a04717.html#af911e3860ec519c541d6df35468ee41b">GetName</a>(), <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;IsInWorld() ? <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;GetMap()-&gt;<a class="code hl_function" href="../../d3/d9a/a10802.html#a54447127bfb738f6722d3f6feddfc168">GetId</a>() : <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(-1),</div>
<div class="line"><span class="lineno">  706</span>                               itr-&gt;first-&gt;GetName(), itr-&gt;first-&gt;IsInWorld() ? itr-&gt;first-&gt;GetMap()-&gt;GetId() : <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(-1));</div>
<div class="line"><span class="lineno">  707</span>                <a class="code hl_define" href="../../da/d45/a00011.html#a5376571bbf4cdc9782683635f366f89a">ABORT</a>();</div>
<div class="line"><span class="lineno">  708</span>            }</div>
<div class="line"><span class="lineno">  709</span>            itr-&gt;first-&gt;_CreateAuraApplication(<span class="keyword">this</span>, itr-&gt;second);</div>
<div class="line"><span class="lineno">  710</span>            ++itr;</div>
<div class="line"><span class="lineno">  711</span>        }</div>
<div class="line"><span class="lineno">  712</span>    }</div>
<div class="line"><span class="lineno">  713</span> </div>
<div class="line"><span class="lineno">  714</span>    <span class="comment">// remove auras from units no longer needing them</span></div>
<div class="line"><span class="lineno">  715</span>    <span class="keywordflow">for</span> (UnitList::iterator itr = targetsToRemove.begin(); itr != targetsToRemove.end(); ++itr)</div>
<div class="line"><span class="lineno">  716</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d4/d87/a10798.html">AuraApplication</a>* aurApp = <a class="code hl_function" href="../../d3/d9a/a10802.html#aa5e42f1c32857e82102fd95bb46ec013">GetApplicationOfTarget</a>((*itr)-&gt;GetGUID()))</div>
<div class="line"><span class="lineno">  717</span>            (*itr)-&gt;_UnapplyAura(aurApp, <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a>);</div>
<div class="line"><span class="lineno">  718</span> </div>
<div class="line"><span class="lineno">  719</span>    <span class="keywordflow">if</span> (!apply)</div>
<div class="line"><span class="lineno">  720</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  721</span> </div>
<div class="line"><span class="lineno">  722</span>    <span class="comment">// apply aura effects for units</span></div>
<div class="line"><span class="lineno">  723</span>    <span class="keywordflow">for</span> (std::map&lt;Unit*, uint8&gt;::iterator itr = targets.begin(); itr != targets.end(); ++itr)</div>
<div class="line"><span class="lineno">  724</span>    {</div>
<div class="line"><span class="lineno">  725</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d4/d87/a10798.html">AuraApplication</a>* aurApp = <a class="code hl_function" href="../../d3/d9a/a10802.html#aa5e42f1c32857e82102fd95bb46ec013">GetApplicationOfTarget</a>(itr-&gt;first-&gt;GetGUID()))</div>
<div class="line"><span class="lineno">  726</span>        {</div>
<div class="line"><span class="lineno">  727</span>            <span class="comment">// owner has to be in world, or effect has to be applied to self</span></div>
<div class="line"><span class="lineno">  728</span>            <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>((!<a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;IsInWorld() &amp;&amp; <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>() == itr-&gt;first) || <a class="code hl_function" href="../../d3/d9a/a10802.html#a5041a8d07612a0ddf3bc2b944e14c9ad">GetOwner</a>()-&gt;IsInMap(itr-&gt;first));</div>
<div class="line"><span class="lineno">  729</span>            itr-&gt;first-&gt;_ApplyAura(aurApp, itr-&gt;second);</div>
<div class="line"><span class="lineno">  730</span>        }</div>
<div class="line"><span class="lineno">  731</span>    }</div>
<div class="line"><span class="lineno">  732</span>}</div>
<div class="ttc" id="aa00035_html_a0e09b50c268dc6897a1c70aa46de936e"><div class="ttname"><a href="../../d4/d8c/a00035.html#a0e09b50c268dc6897a1c70aa46de936e">LOG_FATAL</a></div><div class="ttdeci">#define LOG_FATAL(filterType__,...)</div><div class="ttdef"><b>Definition:</b> Log.h:153</div></div>
<div class="ttc" id="aa03065_html_a93795b2131c8cbe38a7b23768a5a146dae9ced52980e85ea4d56e1a2540d0d0e9"><div class="ttname"><a href="../../d4/d44/a03065.html#a93795b2131c8cbe38a7b23768a5a146dae9ced52980e85ea4d56e1a2540d0d0e9">SPELL_ATTR0_CU_ONLY_ONE_AREA_AURA</a></div><div class="ttdeci">@ SPELL_ATTR0_CU_ONLY_ONE_AREA_AURA</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:206</div></div>
<div class="ttc" id="aa03089_html_a49c1eff45f8eb67e523f8593923a5df0"><div class="ttname"><a href="../../d7/d54/a03089.html#a49c1eff45f8eb67e523f8593923a5df0">UPDATE_TARGET_MAP_INTERVAL</a></div><div class="ttdeci">static constexpr int32 UPDATE_TARGET_MAP_INTERVAL</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:45</div></div>
<div class="ttc" id="aa03092_html_a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c"><div class="ttname"><a href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a></div><div class="ttdeci">@ AURA_REMOVE_BY_DEFAULT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:392</div></div>
<div class="ttc" id="aa08182_html_a5f9bf74852e013f57c57ac1893afc89e"><div class="ttname"><a href="../../db/df3/a08182.html#a5f9bf74852e013f57c57ac1893afc89e">WorldObject::IsSelfOrInSameMap</a></div><div class="ttdeci">bool IsSelfOrInSameMap(WorldObject const *obj) const</div><div class="ttdef"><b>Definition:</b> Object.cpp:1275</div></div>
<div class="ttc" id="aa10802_html_a304404f284fba0b6d8dc046140e309ae"><div class="ttname"><a href="../../d3/d9a/a10802.html#a304404f284fba0b6d8dc046140e309ae">Aura::FillTargetMap</a></div><div class="ttdeci">virtual void FillTargetMap(std::map&lt; Unit *, uint8 &gt; &amp;targets, Unit *caster)=0</div></div>
<div class="ttc" id="aa10802_html_a40cd6707c45eead445b1f487991da9c1"><div class="ttname"><a href="../../d3/d9a/a10802.html#a40cd6707c45eead445b1f487991da9c1">Aura::CanStackWith</a></div><div class="ttdeci">bool CanStackWith(Aura const *checkAura, bool remove) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2021</div></div>
<div class="ttc" id="aa10802_html_ac2ee53cb584c3528f2990d391393bc1d"><div class="ttname"><a href="../../d3/d9a/a10802.html#ac2ee53cb584c3528f2990d391393bc1d">Aura::CanBeAppliedOn</a></div><div class="ttdeci">bool CanBeAppliedOn(Unit *target)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:1970</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00076">ABORT</a>, <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00392">AURA_REMOVE_BY_DEFAULT</a>, <a class="el" href="../../#l01970">CanBeAppliedOn()</a>, <a class="el" href="../../#l02021">CanStackWith()</a>, <a class="el" href="../../#l00386">DYNOBJ_AURA_TYPE</a>, <a class="el" href="../../d3/d9a/a10802.html#a304404f284fba0b6d8dc046140e309ae">FillTargetMap()</a>, <a class="el" href="../../#l00183">GetApplicationOfTarget()</a>, <a class="el" href="../../#l00466">GetId()</a>, <a class="el" href="../../#l00107">GetOwner()</a>, <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l00481">GetType()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l01072">IsArea()</a>, <a class="el" href="../../#l00161">IsRemoved()</a>, <a class="el" href="../../#l01275">WorldObject::IsSelfOrInSameMap()</a>, <a class="el" href="../../#l00153">LOG_FATAL</a>, <a class="el" href="../../#l00266">m_applications</a>, <a class="el" href="../../#l00259">m_updateTargetMapInterval</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l00206">SPELL_ATTR0_CU_ONLY_ONE_AREA_AURA</a>, and <a class="el" href="../../#l00045">UPDATE_TARGET_MAP_INTERVAL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00121">_RegisterForTargets()</a>, <a class="el" href="../../#l00122">ApplyForTargets()</a>, and <a class="el" href="../../#l00756">UpdateOwner()</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a851e18dcd4b806db1cd3843a7814d15a" name="a851e18dcd4b806db1cd3843a7814d15a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a851e18dcd4b806db1cd3843a7814d15a">&#9670;&#160;</a></span>Unit::_TryStackingOrRefreshingExistingAura</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d9a/a10802.html">Aura</a> * <a class="el" href="../../d6/d15/a08526.html#a9f63d861cbd0113802b941275e90208c">Unit::_TryStackingOrRefreshingExistingAura</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const *&#160;</td>
          <td class="paramname"><em>newAura</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>effMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d15/a08526.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>baseAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d36/a08106.html">Item</a> *&#160;</td>
          <td class="paramname"><em>castItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>casterGUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>noPeriodicReset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a59978cc8d9ebb00cb569d64eed5cef03" name="a59978cc8d9ebb00cb569d64eed5cef03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59978cc8d9ebb00cb569d64eed5cef03">&#9670;&#160;</a></span>m_applications</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d9a/a10802.html#af94996c697b3f790489314b6175ab311">ApplicationMap</a> Aura::m_applications</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00735">_ApplyEffectForTargets()</a>, <a class="el" href="../../#l00492">_ApplyForTarget()</a>, <a class="el" href="../../#l00574">_Remove()</a>, <a class="el" href="../../#l00515">_UnapplyForTarget()</a>, <a class="el" href="../../#l01249">GetApplicationList()</a>, <a class="el" href="../../#l00181">GetApplicationMap()</a>, <a class="el" href="../../#l00183">GetApplicationOfTarget()</a>, <a class="el" href="../../#l00185">IsAppliedOnTarget()</a>, <a class="el" href="../../#l01065">RefreshSpellMods()</a>, <a class="el" href="../../#l01258">SetNeedClientUpdateForTargets()</a>, <a class="el" href="../../#l00588">UpdateTargetMap()</a>, and <a class="el" href="../../#l00447">~Aura()</a>.</p>

</div>
</div>
<a id="a27b0ba184d3b92d5da4a24802f119b03" name="a27b0ba184d3b92d5da4a24802f119b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27b0ba184d3b92d5da4a24802f119b03">&#9670;&#160;</a></span>m_applyTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">time_t const Aura::m_applyTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00128">GetApplyTime()</a>.</p>

</div>
</div>
<a id="ac031b57268ab2f7c4346ef3dbfea2af0" name="ac031b57268ab2f7c4346ef3dbfea2af0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac031b57268ab2f7c4346ef3dbfea2af0">&#9670;&#160;</a></span>m_casterGuid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> const Aura::m_casterGuid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00105">GetCasterGUID()</a>.</p>

</div>
</div>
<a id="ac53ebfd796f09dd49bf93877b4edb615" name="ac53ebfd796f09dd49bf93877b4edb615"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac53ebfd796f09dd49bf93877b4edb615">&#9670;&#160;</a></span>m_casterLevel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> const Aura::m_casterLevel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00154">GetCasterLevel()</a>.</p>

</div>
</div>
<a id="a47c4549c9990b34a2728c6795de64af6" name="a47c4549c9990b34a2728c6795de64af6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47c4549c9990b34a2728c6795de64af6">&#9670;&#160;</a></span>m_castItemEntry</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> const Aura::m_castItemEntry</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00104">GetCastItemEntry()</a>.</p>

</div>
</div>
<a id="a742caadbfa7658d6957bf73eda7c624a" name="a742caadbfa7658d6957bf73eda7c624a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a742caadbfa7658d6957bf73eda7c624a">&#9670;&#160;</a></span>m_castItemGuid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a> const Aura::m_castItemGuid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00492">_ApplyForTarget()</a>, <a class="el" href="../../#l00515">_UnapplyForTarget()</a>, <a class="el" href="../../#l02021">CanStackWith()</a>, and <a class="el" href="../../#l00103">GetCastItemGUID()</a>.</p>

</div>
</div>
<a id="a406738b04948572a30626082ebe7a0e0" name="a406738b04948572a30626082ebe7a0e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a406738b04948572a30626082ebe7a0e0">&#9670;&#160;</a></span>m_duration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> Aura::m_duration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00409">Aura()</a>, <a class="el" href="../../#l00133">GetDuration()</a>, <a class="el" href="../../#l00868">SetDuration()</a>, <a class="el" href="../../#l01203">SetLoadedState()</a>, and <a class="el" href="../../#l00798">Update()</a>.</p>

</div>
</div>
<a id="a2cea44bce63fa2b3fe6fa71905b3e1e2" name="a2cea44bce63fa2b3fe6fa71905b3e1e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cea44bce63fa2b3fe6fa71905b3e1e2">&#9670;&#160;</a></span>m_effects</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d50/a10790.html">AuraEffect</a>* Aura::m_effects[3]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00435">_InitEffects()</a>, <a class="el" href="../../#l00409">Aura()</a>, <a class="el" href="../../#l00175">GetEffect()</a>, <a class="el" href="../../#l00176">GetEffectMask()</a>, <a class="el" href="../../#l01241">HandleAllEffects()</a>, <a class="el" href="../../#l01222">HasEffectType()</a>, <a class="el" href="../../#l01232">RecalculateAmountOfEffects()</a>, <a class="el" href="../../#l00880">RefreshDuration()</a>, <a class="el" href="../../#l00909">RefreshTimers()</a>, <a class="el" href="../../#l00931">RefreshTimersWithMods()</a>, <a class="el" href="../../#l01203">SetLoadedState()</a>, <a class="el" href="../../#l00995">SetStackAmount()</a>, <a class="el" href="../../#l00756">UpdateOwner()</a>, and <a class="el" href="../../#l00447">~Aura()</a>.</p>

</div>
</div>
<a id="ae63436802a402d26115d21f4a2073e1a" name="ae63436802a402d26115d21f4a2073e1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae63436802a402d26115d21f4a2073e1a">&#9670;&#160;</a></span>m_isRemoved</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::m_isRemoved</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00574">_Remove()</a>, and <a class="el" href="../../#l00161">IsRemoved()</a>.</p>

</div>
</div>
<a id="af22450afa8bf33c979c0a0f7d801ab4c" name="af22450afa8bf33c979c0a0f7d801ab4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af22450afa8bf33c979c0a0f7d801ab4c">&#9670;&#160;</a></span>m_isSingleTarget</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::m_isSingleTarget</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00164">IsSingleTarget()</a>, <a class="el" href="../../#l00166">SetIsSingleTarget()</a>, and <a class="el" href="../../#l01167">UnregisterSingleTarget()</a>.</p>

</div>
</div>
<a id="ad8811634ba5d82b9581e94e8a0fd6097" name="ad8811634ba5d82b9581e94e8a0fd6097"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8811634ba5d82b9581e94e8a0fd6097">&#9670;&#160;</a></span>m_isUsingCharges</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Aura::m_isUsingCharges</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00409">Aura()</a>, <a class="el" href="../../#l00200">IsUsingCharges()</a>, <a class="el" href="../../#l00952">SetCharges()</a>, <a class="el" href="../../#l01203">SetLoadedState()</a>, and <a class="el" href="../../#l00201">SetUsingCharges()</a>.</p>

</div>
</div>
<a id="a2f182c808ac1ea674dbc625ac03716b6" name="a2f182c808ac1ea674dbc625ac03716b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f182c808ac1ea674dbc625ac03716b6">&#9670;&#160;</a></span>m_loadedScripts</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="../../d3/d74/a11022.html">AuraScript</a>*&gt; Aura::m_loadedScripts</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l02649">CallScriptAfterCheckProcHandlers()</a>, <a class="el" href="../../#l02403">CallScriptAfterDispel()</a>, <a class="el" href="../../#l02455">CallScriptAfterEffectApplyHandlers()</a>, <a class="el" href="../../#l02733">CallScriptAfterEffectProcHandlers()</a>, <a class="el" href="../../#l02469">CallScriptAfterEffectRemoveHandlers()</a>, <a class="el" href="../../#l02701">CallScriptAfterProcHandlers()</a>, <a class="el" href="../../#l02375">CallScriptCheckAreaTargetHandlers()</a>, <a class="el" href="../../#l02633">CallScriptCheckProcHandlers()</a>, <a class="el" href="../../#l02390">CallScriptDispel()</a>, <a class="el" href="../../#l02559">CallScriptEffectAbsorbHandlers()</a>, <a class="el" href="../../#l02577">CallScriptEffectAfterAbsorbHandlers()</a>, <a class="el" href="../../#l02605">CallScriptEffectAfterManaShieldHandlers()</a>, <a class="el" href="../../#l02416">CallScriptEffectApplyHandlers()</a>, <a class="el" href="../../#l02517">CallScriptEffectCalcAmountHandlers()</a>, <a class="el" href="../../#l02531">CallScriptEffectCalcPeriodicHandlers()</a>, <a class="el" href="../../#l02545">CallScriptEffectCalcSpellModHandlers()</a>, <a class="el" href="../../#l02591">CallScriptEffectManaShieldHandlers()</a>, <a class="el" href="../../#l02483">CallScriptEffectPeriodicHandlers()</a>, <a class="el" href="../../#l02714">CallScriptEffectProcHandlers()</a>, <a class="el" href="../../#l02436">CallScriptEffectRemoveHandlers()</a>, <a class="el" href="../../#l02619">CallScriptEffectSplitHandlers()</a>, <a class="el" href="../../#l02503">CallScriptEffectUpdatePeriodicHandlers()</a>, <a class="el" href="../../#l02665">CallScriptPrepareProcHandlers()</a>, <a class="el" href="../../#l02684">CallScriptProcHandlers()</a>, <a class="el" href="../../#l00427">GetScriptByName()</a>, <a class="el" href="../../#l02356">LoadScripts()</a>, and <a class="el" href="../../#l00447">~Aura()</a>.</p>

</div>
</div>
<a id="a24ab9b1f0a73ca4da9aa77e9ee0e3a55" name="a24ab9b1f0a73ca4da9aa77e9ee0e3a55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24ab9b1f0a73ca4da9aa77e9ee0e3a55">&#9670;&#160;</a></span>m_maxDuration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> Aura::m_maxDuration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00409">Aura()</a>, <a class="el" href="../../#l00129">GetMaxDuration()</a>, <a class="el" href="../../#l00909">RefreshTimers()</a>, <a class="el" href="../../#l00931">RefreshTimersWithMods()</a>, <a class="el" href="../../#l01203">SetLoadedState()</a>, and <a class="el" href="../../#l00130">SetMaxDuration()</a>.</p>

</div>
</div>
<a id="ab415594d025a57ab429a85ab70e598cb" name="ab415594d025a57ab429a85ab70e598cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab415594d025a57ab429a85ab70e598cb">&#9670;&#160;</a></span>m_owner</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/df3/a08182.html">WorldObject</a>* const Aura::m_owner</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00109">GetDynobjOwner()</a>, <a class="el" href="../../#l00107">GetOwner()</a>, <a class="el" href="../../#l00481">GetType()</a>, <a class="el" href="../../#l00108">GetUnitOwner()</a>, and <a class="el" href="../../#l00756">UpdateOwner()</a>.</p>

</div>
</div>
<a id="af32b9da81a73be723f660ae4e3363e74" name="af32b9da81a73be723f660ae4e3363e74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af32b9da81a73be723f660ae4e3363e74">&#9670;&#160;</a></span>m_procCharges</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> Aura::m_procCharges</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00409">Aura()</a>, <a class="el" href="../../#l00141">GetCharges()</a>, <a class="el" href="../../#l00973">ModCharges()</a>, <a class="el" href="../../#l02206">PrepareProcToTrigger()</a>, <a class="el" href="../../#l00952">SetCharges()</a>, and <a class="el" href="../../#l01203">SetLoadedState()</a>.</p>

</div>
</div>
<a id="a04a25715c9b268afa2025a47681df76c" name="a04a25715c9b268afa2025a47681df76c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04a25715c9b268afa2025a47681df76c">&#9670;&#160;</a></span>m_removedApplications</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d15/a08526.html#a6ab419b95396e1e4db4d6191834d4ef3">Unit::AuraApplicationList</a> Aura::m_removedApplications</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l02347">_DeleteRemovedApplications()</a>, and <a class="el" href="../../#l00515">_UnapplyForTarget()</a>.</p>

</div>
</div>
<a id="aaba50101334e21660ff99d4668ae06b7" name="aaba50101334e21660ff99d4668ae06b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaba50101334e21660ff99d4668ae06b7">&#9670;&#160;</a></span>m_spellInfo</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const* const Aura::m_spellInfo</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00492">_ApplyForTarget()</a>, <a class="el" href="../../#l00515">_UnapplyForTarget()</a>, <a class="el" href="../../#l00409">Aura()</a>, <a class="el" href="../../#l00961">CalcMaxCharges()</a>, <a class="el" href="../../#l00844">CalcMaxDuration()</a>, <a class="el" href="../../#l02455">CallScriptAfterEffectApplyHandlers()</a>, <a class="el" href="../../#l02733">CallScriptAfterEffectProcHandlers()</a>, <a class="el" href="../../#l02469">CallScriptAfterEffectRemoveHandlers()</a>, <a class="el" href="../../#l02559">CallScriptEffectAbsorbHandlers()</a>, <a class="el" href="../../#l02577">CallScriptEffectAfterAbsorbHandlers()</a>, <a class="el" href="../../#l02605">CallScriptEffectAfterManaShieldHandlers()</a>, <a class="el" href="../../#l02416">CallScriptEffectApplyHandlers()</a>, <a class="el" href="../../#l02517">CallScriptEffectCalcAmountHandlers()</a>, <a class="el" href="../../#l02531">CallScriptEffectCalcPeriodicHandlers()</a>, <a class="el" href="../../#l02545">CallScriptEffectCalcSpellModHandlers()</a>, <a class="el" href="../../#l02591">CallScriptEffectManaShieldHandlers()</a>, <a class="el" href="../../#l02483">CallScriptEffectPeriodicHandlers()</a>, <a class="el" href="../../#l02714">CallScriptEffectProcHandlers()</a>, <a class="el" href="../../#l02436">CallScriptEffectRemoveHandlers()</a>, <a class="el" href="../../#l02619">CallScriptEffectSplitHandlers()</a>, <a class="el" href="../../#l02503">CallScriptEffectUpdatePeriodicHandlers()</a>, <a class="el" href="../../#l02021">CanStackWith()</a>, <a class="el" href="../../#l00100">GetSpellInfo()</a>, <a class="el" href="../../#l01265">HandleAuraSpecificMods()</a>, <a class="el" href="../../#l01092">IsRemovedOnShapeLost()</a>, <a class="el" href="../../#l02356">LoadScripts()</a>, <a class="el" href="../../#l01021">ModStackAmount()</a>, <a class="el" href="../../#l00880">RefreshDuration()</a>, <a class="el" href="../../#l00931">RefreshTimersWithMods()</a>, and <a class="el" href="../../#l00798">Update()</a>.</p>

</div>
</div>
<a id="a3c01fd7df3476af276831667baa3a0ee" name="a3c01fd7df3476af276831667baa3a0ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c01fd7df3476af276831667baa3a0ee">&#9670;&#160;</a></span>m_stackAmount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> Aura::m_stackAmount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00148">GetStackAmount()</a>, <a class="el" href="../../#l01021">ModStackAmount()</a>, <a class="el" href="../../#l01203">SetLoadedState()</a>, and <a class="el" href="../../#l00995">SetStackAmount()</a>.</p>

</div>
</div>
<a id="a7af03c4091eed4aab81dd2d0613b4eca" name="a7af03c4091eed4aab81dd2d0613b4eca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7af03c4091eed4aab81dd2d0613b4eca">&#9670;&#160;</a></span>m_timeCla</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> Aura::m_timeCla</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00409">Aura()</a>, <a class="el" href="../../#l00880">RefreshDuration()</a>, and <a class="el" href="../../#l00798">Update()</a>.</p>

</div>
</div>
<a id="aa4972c4116685b08f25f6a2711c196d3" name="aa4972c4116685b08f25f6a2711c196d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4972c4116685b08f25f6a2711c196d3">&#9670;&#160;</a></span>m_triggeredByAuraSpellInfo</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/db9/a10906.html">SpellInfo</a> const* Aura::m_triggeredByAuraSpellInfo</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l02761">GetTriggeredByAuraSpellInfo()</a>, and <a class="el" href="../../#l02747">SetTriggeredByAuraSpellInfo()</a>.</p>

</div>
</div>
<a id="aeb7fadeb3b25c9d5a2903e5c1ea06ff2" name="aeb7fadeb3b25c9d5a2903e5c1ea06ff2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb7fadeb3b25c9d5a2903e5c1ea06ff2">&#9670;&#160;</a></span>m_updateTargetMapInterval</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> Aura::m_updateTargetMapInterval</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00756">UpdateOwner()</a>, and <a class="el" href="../../#l00588">UpdateTargetMap()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d3/d9a/a10802.html">Aura</a></li>
    <li class="footer">Generated on Mon Dec 2 2024 20:42:00 for AzerothCore by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
