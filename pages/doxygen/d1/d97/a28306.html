<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AzerothCore: MMAP::TileBuilder Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AzerothCore<span id="projectnumber">&#160;3.3.5a</span>
   </div>
   <div id="projectbrief">OpenSource WoW Emulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d1/d97/a28306.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d2/d13/a28303.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MMAP::TileBuilder Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &quot;<a class="el" href="../../">MapBuilder.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acf61f0eada3f4cc5e88ef7d36c6d0c36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#acf61f0eada3f4cc5e88ef7d36c6d0c36">TileBuilder</a> (<a class="el" href="../../db/d59/a28310.html">MapBuilder</a> *mapBuilder, bool skipLiquid, bool bigBaseUnit, bool debugOutput)</td></tr>
<tr class="separator:acf61f0eada3f4cc5e88ef7d36c6d0c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7ed1b1c9fdff7fc933fa6029fa9ff9d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#ac7ed1b1c9fdff7fc933fa6029fa9ff9d">TileBuilder</a> (<a class="el" href="../../d1/d97/a28306.html">TileBuilder</a> &amp;&amp;)=default</td></tr>
<tr class="separator:ac7ed1b1c9fdff7fc933fa6029fa9ff9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fabcd86a5679f19ad69e9c69f1d5885"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#a7fabcd86a5679f19ad69e9c69f1d5885">~TileBuilder</a> ()</td></tr>
<tr class="separator:a7fabcd86a5679f19ad69e9c69f1d5885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c0497cde74883557ec841233376f95c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#a4c0497cde74883557ec841233376f95c">WorkerThread</a> ()</td></tr>
<tr class="separator:a4c0497cde74883557ec841233376f95c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae386f742fed7d2b66bcf3750abf91daf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#ae386f742fed7d2b66bcf3750abf91daf">WaitCompletion</a> ()</td></tr>
<tr class="separator:ae386f742fed7d2b66bcf3750abf91daf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7eca8778fd61ecbfe5f07bba0b38857"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#ab7eca8778fd61ecbfe5f07bba0b38857">buildTile</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> mapID, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> tileX, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> tileY, dtNavMesh *navMesh)</td></tr>
<tr class="separator:ab7eca8778fd61ecbfe5f07bba0b38857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add45abc9c1f79f95dae9d7616b100dc0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#add45abc9c1f79f95dae9d7616b100dc0">buildMoveMapTile</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> mapID, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> tileX, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> tileY, <a class="el" href="../../db/d97/a28314.html">MeshData</a> &amp;meshData, float bmin[3], float bmax[3], dtNavMesh *navMesh)</td></tr>
<tr class="separator:add45abc9c1f79f95dae9d7616b100dc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77ecbab0c34dfe69c414304768b20ea3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#a77ecbab0c34dfe69c414304768b20ea3">shouldSkipTile</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> mapID, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> tileX, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> tileY) const</td></tr>
<tr class="separator:a77ecbab0c34dfe69c414304768b20ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a5b5313e24c00e58940067d53be93a3de"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#a5b5313e24c00e58940067d53be93a3de">m_bigBaseUnit</a></td></tr>
<tr class="separator:a5b5313e24c00e58940067d53be93a3de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c881a6e6ec66b315f72f84da5c534c2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#a4c881a6e6ec66b315f72f84da5c534c2">m_debugOutput</a></td></tr>
<tr class="separator:a4c881a6e6ec66b315f72f84da5c534c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa83fbc484835a6d1a4c7bf6201b46639"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d59/a28310.html">MapBuilder</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a></td></tr>
<tr class="separator:aa83fbc484835a6d1a4c7bf6201b46639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1605fb1b68693516c9fb27f94b278d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/df1/a28318.html">TerrainBuilder</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#ade1605fb1b68693516c9fb27f94b278d">m_terrainBuilder</a></td></tr>
<tr class="separator:ade1605fb1b68693516c9fb27f94b278d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e03cb818b108400737e3a54df24945d"><td class="memItemLeft" align="right" valign="top">std::thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#a4e03cb818b108400737e3a54df24945d">m_workerThread</a></td></tr>
<tr class="separator:a4e03cb818b108400737e3a54df24945d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a160c3ad76146488175c6ae228ad4ef83"><td class="memItemLeft" align="right" valign="top">rcContext *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a></td></tr>
<tr class="separator:a160c3ad76146488175c6ae228ad4ef83"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acf61f0eada3f4cc5e88ef7d36c6d0c36" name="acf61f0eada3f4cc5e88ef7d36c6d0c36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf61f0eada3f4cc5e88ef7d36c6d0c36">&#9670;&#160;</a></span>TileBuilder() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MMAP::TileBuilder::TileBuilder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d59/a28310.html">MapBuilder</a> *&#160;</td>
          <td class="paramname"><em>mapBuilder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>skipLiquid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bigBaseUnit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>debugOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   32</span>                                                                                                        :</div>
<div class="line"><span class="lineno">   33</span>            <a class="code hl_variable" href="../../d1/d97/a28306.html#a5b5313e24c00e58940067d53be93a3de">m_bigBaseUnit</a>(bigBaseUnit),</div>
<div class="line"><span class="lineno">   34</span>            <a class="code hl_variable" href="../../d1/d97/a28306.html#a4c881a6e6ec66b315f72f84da5c534c2">m_debugOutput</a>(debugOutput),</div>
<div class="line"><span class="lineno">   35</span>            <a class="code hl_variable" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a>(mapBuilder),</div>
<div class="line"><span class="lineno">   36</span>            <a class="code hl_variable" href="../../d1/d97/a28306.html#ade1605fb1b68693516c9fb27f94b278d">m_terrainBuilder</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><span class="lineno">   37</span>            <a class="code hl_variable" href="../../d1/d97/a28306.html#a4e03cb818b108400737e3a54df24945d">m_workerThread</a>(&amp;<a class="code hl_function" href="../../d1/d97/a28306.html#a4c0497cde74883557ec841233376f95c">TileBuilder::WorkerThread</a>, <span class="keyword">this</span>),</div>
<div class="line"><span class="lineno">   38</span>            <a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>(<span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno">   39</span>    {</div>
<div class="line"><span class="lineno">   40</span>        <a class="code hl_variable" href="../../d1/d97/a28306.html#ade1605fb1b68693516c9fb27f94b278d">m_terrainBuilder</a> = <span class="keyword">new</span> TerrainBuilder(skipLiquid);</div>
<div class="line"><span class="lineno">   41</span>        <a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a> = <span class="keyword">new</span> rcContext(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">   42</span>    }</div>
<div class="ttc" id="aa28306_html_a160c3ad76146488175c6ae228ad4ef83"><div class="ttname"><a href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">MMAP::TileBuilder::m_rcContext</a></div><div class="ttdeci">rcContext * m_rcContext</div><div class="ttdef"><b>Definition:</b> MapBuilder.h:141</div></div>
<div class="ttc" id="aa28306_html_a4c0497cde74883557ec841233376f95c"><div class="ttname"><a href="../../d1/d97/a28306.html#a4c0497cde74883557ec841233376f95c">MMAP::TileBuilder::WorkerThread</a></div><div class="ttdeci">void WorkerThread()</div><div class="ttdef"><b>Definition:</b> MapBuilder.cpp:397</div></div>
<div class="ttc" id="aa28306_html_a4c881a6e6ec66b315f72f84da5c534c2"><div class="ttname"><a href="../../d1/d97/a28306.html#a4c881a6e6ec66b315f72f84da5c534c2">MMAP::TileBuilder::m_debugOutput</a></div><div class="ttdeci">bool m_debugOutput</div><div class="ttdef"><b>Definition:</b> MapBuilder.h:135</div></div>
<div class="ttc" id="aa28306_html_a4e03cb818b108400737e3a54df24945d"><div class="ttname"><a href="../../d1/d97/a28306.html#a4e03cb818b108400737e3a54df24945d">MMAP::TileBuilder::m_workerThread</a></div><div class="ttdeci">std::thread m_workerThread</div><div class="ttdef"><b>Definition:</b> MapBuilder.h:139</div></div>
<div class="ttc" id="aa28306_html_a5b5313e24c00e58940067d53be93a3de"><div class="ttname"><a href="../../d1/d97/a28306.html#a5b5313e24c00e58940067d53be93a3de">MMAP::TileBuilder::m_bigBaseUnit</a></div><div class="ttdeci">bool m_bigBaseUnit</div><div class="ttdef"><b>Definition:</b> MapBuilder.h:134</div></div>
<div class="ttc" id="aa28306_html_aa83fbc484835a6d1a4c7bf6201b46639"><div class="ttname"><a href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">MMAP::TileBuilder::m_mapBuilder</a></div><div class="ttdeci">MapBuilder * m_mapBuilder</div><div class="ttdef"><b>Definition:</b> MapBuilder.h:137</div></div>
<div class="ttc" id="aa28306_html_ade1605fb1b68693516c9fb27f94b278d"><div class="ttname"><a href="../../d1/d97/a28306.html#ade1605fb1b68693516c9fb27f94b278d">MMAP::TileBuilder::m_terrainBuilder</a></div><div class="ttdeci">TerrainBuilder * m_terrainBuilder</div><div class="ttdef"><b>Definition:</b> MapBuilder.h:138</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00141">m_rcContext</a>, and <a class="el" href="../../#l00138">m_terrainBuilder</a>.</p>

</div>
</div>
<a id="ac7ed1b1c9fdff7fc933fa6029fa9ff9d" name="ac7ed1b1c9fdff7fc933fa6029fa9ff9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7ed1b1c9fdff7fc933fa6029fa9ff9d">&#9670;&#160;</a></span>TileBuilder() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MMAP::TileBuilder::TileBuilder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d97/a28306.html">TileBuilder</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7fabcd86a5679f19ad69e9c69f1d5885" name="a7fabcd86a5679f19ad69e9c69f1d5885"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fabcd86a5679f19ad69e9c69f1d5885">&#9670;&#160;</a></span>~TileBuilder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MMAP::TileBuilder::~TileBuilder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   45</span>    {</div>
<div class="line"><span class="lineno">   46</span>        <a class="code hl_function" href="../../d1/d97/a28306.html#ae386f742fed7d2b66bcf3750abf91daf">WaitCompletion</a>();</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>        <span class="keyword">delete</span> <a class="code hl_variable" href="../../d1/d97/a28306.html#ade1605fb1b68693516c9fb27f94b278d">m_terrainBuilder</a>;</div>
<div class="line"><span class="lineno">   49</span>        <span class="keyword">delete</span> <a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>;</div>
<div class="line"><span class="lineno">   50</span>    }</div>
<div class="ttc" id="aa28306_html_ae386f742fed7d2b66bcf3750abf91daf"><div class="ttname"><a href="../../d1/d97/a28306.html#ae386f742fed7d2b66bcf3750abf91daf">MMAP::TileBuilder::WaitCompletion</a></div><div class="ttdeci">void WaitCompletion()</div><div class="ttdef"><b>Definition:</b> MapBuilder.cpp:52</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00141">m_rcContext</a>, <a class="el" href="../../#l00138">m_terrainBuilder</a>, and <a class="el" href="../../#l00052">WaitCompletion()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="add45abc9c1f79f95dae9d7616b100dc0" name="add45abc9c1f79f95dae9d7616b100dc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add45abc9c1f79f95dae9d7616b100dc0">&#9670;&#160;</a></span>buildMoveMapTile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MMAP::TileBuilder::buildMoveMapTile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>mapID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>tileX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>tileY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d97/a28314.html">MeshData</a> &amp;&#160;</td>
          <td class="paramname"><em>meshData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>bmin</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>bmax</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dtNavMesh *&#160;</td>
          <td class="paramname"><em>navMesh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000263">Todo:</a></b></dt><dd>: special flags for DYNAMIC polygons, ie surfaces that can be turned on and off </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  592</span>    {</div>
<div class="line"><span class="lineno">  593</span>        <span class="comment">// console output</span></div>
<div class="line"><span class="lineno">  594</span>        <span class="keywordtype">char</span> tileString[20];</div>
<div class="line"><span class="lineno">  595</span>        sprintf(tileString, <span class="stringliteral">&quot;[Map %03i] [%02i,%02i]: &quot;</span>, mapID, tileX, tileY);</div>
<div class="line"><span class="lineno">  596</span>        printf(<span class="stringliteral">&quot;%s Building movemap tiles...\n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  597</span> </div>
<div class="line"><span class="lineno">  598</span>        IntermediateValues iv;</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span>        <span class="keywordtype">float</span>* tVerts = meshData.solidVerts.getCArray();</div>
<div class="line"><span class="lineno">  601</span>        <span class="keywordtype">int</span> tVertCount = meshData.solidVerts.size() / 3;</div>
<div class="line"><span class="lineno">  602</span>        <span class="keywordtype">int</span>* tTris = meshData.solidTris.getCArray();</div>
<div class="line"><span class="lineno">  603</span>        <span class="keywordtype">int</span> tTriCount = meshData.solidTris.size() / 3;</div>
<div class="line"><span class="lineno">  604</span> </div>
<div class="line"><span class="lineno">  605</span>        <span class="keywordtype">float</span>* lVerts = meshData.liquidVerts.getCArray();</div>
<div class="line"><span class="lineno">  606</span>        <span class="keywordtype">int</span> lVertCount = meshData.liquidVerts.size() / 3;</div>
<div class="line"><span class="lineno">  607</span>        <span class="keywordtype">int</span>* lTris = meshData.liquidTris.getCArray();</div>
<div class="line"><span class="lineno">  608</span>        <span class="keywordtype">int</span> lTriCount = meshData.liquidTris.size() / 3;</div>
<div class="line"><span class="lineno">  609</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>* lTriFlags = meshData.liquidType.getCArray();</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>        <span class="keyword">const</span> TileConfig tileConfig = TileConfig(<a class="code hl_variable" href="../../d1/d97/a28306.html#a5b5313e24c00e58940067d53be93a3de">m_bigBaseUnit</a>);</div>
<div class="line"><span class="lineno">  612</span>        <span class="keywordtype">int</span> TILES_PER_MAP = tileConfig.TILES_PER_MAP;</div>
<div class="line"><span class="lineno">  613</span>        <span class="keywordtype">float</span> BASE_UNIT_DIM = tileConfig.BASE_UNIT_DIM;</div>
<div class="line"><span class="lineno">  614</span>        rcConfig config = <a class="code hl_variable" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a>-&gt;<a class="code hl_function" href="../../db/d59/a28310.html#a86e75f8857980cff57f87558342fbeb1">GetMapSpecificConfig</a>(mapID, bmin, bmax, tileConfig);</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>        <span class="comment">// this sets the dimensions of the heightfield - should maybe happen before border padding</span></div>
<div class="line"><span class="lineno">  617</span>        rcCalcGridSize(config.bmin, config.bmax, config.cs, &amp;config.width, &amp;config.height);</div>
<div class="line"><span class="lineno">  618</span> </div>
<div class="line"><span class="lineno">  619</span>        <span class="comment">// allocate subregions : tiles</span></div>
<div class="line"><span class="lineno">  620</span>        Tile* tiles = <span class="keyword">new</span> Tile[TILES_PER_MAP * TILES_PER_MAP];</div>
<div class="line"><span class="lineno">  621</span> </div>
<div class="line"><span class="lineno">  622</span>        <span class="comment">// Initialize per tile config.</span></div>
<div class="line"><span class="lineno">  623</span>        rcConfig tileCfg = config;</div>
<div class="line"><span class="lineno">  624</span>        tileCfg.width = config.tileSize + config.borderSize * 2;</div>
<div class="line"><span class="lineno">  625</span>        tileCfg.height = config.tileSize + config.borderSize * 2;</div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>        <span class="comment">// merge per tile poly and detail meshes</span></div>
<div class="line"><span class="lineno">  628</span>        rcPolyMesh** pmmerge = <span class="keyword">new</span> rcPolyMesh*[TILES_PER_MAP * TILES_PER_MAP];</div>
<div class="line"><span class="lineno">  629</span>        rcPolyMeshDetail** dmmerge = <span class="keyword">new</span> rcPolyMeshDetail*[TILES_PER_MAP * TILES_PER_MAP];</div>
<div class="line"><span class="lineno">  630</span>        <span class="keywordtype">int</span> nmerge = 0;</div>
<div class="line"><span class="lineno">  631</span>        <span class="comment">// build all tiles</span></div>
<div class="line"><span class="lineno">  632</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; TILES_PER_MAP; ++y)</div>
<div class="line"><span class="lineno">  633</span>        {</div>
<div class="line"><span class="lineno">  634</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; TILES_PER_MAP; ++x)</div>
<div class="line"><span class="lineno">  635</span>            {</div>
<div class="line"><span class="lineno">  636</span>                Tile&amp; tile = tiles[x + y * TILES_PER_MAP];</div>
<div class="line"><span class="lineno">  637</span> </div>
<div class="line"><span class="lineno">  638</span>                <span class="comment">// Calculate the per tile bounding box.</span></div>
<div class="line"><span class="lineno">  639</span>                tileCfg.bmin[0] = config.bmin[0] + x * float(config.tileSize * config.cs);</div>
<div class="line"><span class="lineno">  640</span>                tileCfg.bmin[2] = config.bmin[2] + y * float(config.tileSize * config.cs);</div>
<div class="line"><span class="lineno">  641</span>                tileCfg.bmax[0] = config.bmin[0] + (x + 1) * <span class="keywordtype">float</span>(config.tileSize * config.cs);</div>
<div class="line"><span class="lineno">  642</span>                tileCfg.bmax[2] = config.bmin[2] + (y + 1) * <span class="keywordtype">float</span>(config.tileSize * config.cs);</div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span>                tileCfg.bmin[0] -= tileCfg.borderSize * tileCfg.cs;</div>
<div class="line"><span class="lineno">  645</span>                tileCfg.bmin[2] -= tileCfg.borderSize * tileCfg.cs;</div>
<div class="line"><span class="lineno">  646</span>                tileCfg.bmax[0] += tileCfg.borderSize * tileCfg.cs;</div>
<div class="line"><span class="lineno">  647</span>                tileCfg.bmax[2] += tileCfg.borderSize * tileCfg.cs;</div>
<div class="line"><span class="lineno">  648</span> </div>
<div class="line"><span class="lineno">  649</span>                <span class="comment">// build heightfield</span></div>
<div class="line"><span class="lineno">  650</span>                tile.solid = rcAllocHeightfield();</div>
<div class="line"><span class="lineno">  651</span>                <span class="keywordflow">if</span> (!tile.solid || !rcCreateHeightfield(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, *tile.solid, tileCfg.width, tileCfg.height, tileCfg.bmin, tileCfg.bmax, tileCfg.cs, tileCfg.ch))</div>
<div class="line"><span class="lineno">  652</span>                {</div>
<div class="line"><span class="lineno">  653</span>                    printf(<span class="stringliteral">&quot;%s Failed building heightfield!            \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  654</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  655</span>                }</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span>                <span class="comment">// mark all walkable tiles, both liquids and solids</span></div>
<div class="line"><span class="lineno">  658</span> </div>
<div class="line"><span class="lineno">  659</span>                <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* triFlags = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[tTriCount];</div>
<div class="line"><span class="lineno">  660</span>                memset(triFlags, <a class="code hl_enumvalue" href="../../d1/dc1/a00092.html#a8a4d0b36dd46d60b691b894fb8c1c5dbac2c74d40490a8ea42121c00a8249bd98">NAV_GROUND</a>, tTriCount * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>));</div>
<div class="line"><span class="lineno">  661</span>                rcClearUnwalkableTriangles(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, tileCfg.walkableSlopeAngle, tVerts, tVertCount, tTris, tTriCount, triFlags);</div>
<div class="line"><span class="lineno">  662</span>                rcRasterizeTriangles(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, tVerts, tVertCount, tTris, triFlags, tTriCount, *tile.solid, config.walkableClimb);</div>
<div class="line"><span class="lineno">  663</span>                <span class="keyword">delete</span>[] triFlags;</div>
<div class="line"><span class="lineno">  664</span> </div>
<div class="line"><span class="lineno">  665</span>                rcFilterLowHangingWalkableObstacles(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, config.walkableClimb, *tile.solid);</div>
<div class="line"><span class="lineno">  666</span>                rcFilterLedgeSpans(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, tileCfg.walkableHeight, tileCfg.walkableClimb, *tile.solid);</div>
<div class="line"><span class="lineno">  667</span>                rcFilterWalkableLowHeightSpans(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, tileCfg.walkableHeight, *tile.solid);</div>
<div class="line"><span class="lineno">  668</span> </div>
<div class="line"><span class="lineno">  669</span>                <span class="comment">// add liquid triangles</span></div>
<div class="line"><span class="lineno">  670</span>                rcRasterizeTriangles(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, lVerts, lVertCount, lTris, lTriFlags, lTriCount, *tile.solid, config.walkableClimb);</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>                <span class="comment">// compact heightfield spans</span></div>
<div class="line"><span class="lineno">  673</span>                tile.chf = rcAllocCompactHeightfield();</div>
<div class="line"><span class="lineno">  674</span>                <span class="keywordflow">if</span> (!tile.chf || !rcBuildCompactHeightfield(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, tileCfg.walkableHeight, tileCfg.walkableClimb, *tile.solid, *tile.chf))</div>
<div class="line"><span class="lineno">  675</span>                {</div>
<div class="line"><span class="lineno">  676</span>                    printf(<span class="stringliteral">&quot;%s Failed compacting heightfield!            \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  677</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  678</span>                }</div>
<div class="line"><span class="lineno">  679</span> </div>
<div class="line"><span class="lineno">  680</span>                <span class="comment">// build polymesh intermediates</span></div>
<div class="line"><span class="lineno">  681</span>                <span class="keywordflow">if</span> (!rcErodeWalkableArea(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, config.walkableRadius, *tile.chf))</div>
<div class="line"><span class="lineno">  682</span>                {</div>
<div class="line"><span class="lineno">  683</span>                    printf(<span class="stringliteral">&quot;%s Failed eroding area!                    \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  684</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  685</span>                }</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>                <span class="keywordflow">if</span> (!rcBuildDistanceField(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, *tile.chf))</div>
<div class="line"><span class="lineno">  688</span>                {</div>
<div class="line"><span class="lineno">  689</span>                    printf(<span class="stringliteral">&quot;%s Failed building distance field!         \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  690</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  691</span>                }</div>
<div class="line"><span class="lineno">  692</span> </div>
<div class="line"><span class="lineno">  693</span>                <span class="keywordflow">if</span> (!rcBuildRegions(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, *tile.chf, tileCfg.borderSize, tileCfg.minRegionArea, tileCfg.mergeRegionArea))</div>
<div class="line"><span class="lineno">  694</span>                {</div>
<div class="line"><span class="lineno">  695</span>                    printf(<span class="stringliteral">&quot;%s Failed building regions!                \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  696</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  697</span>                }</div>
<div class="line"><span class="lineno">  698</span> </div>
<div class="line"><span class="lineno">  699</span>                tile.cset = rcAllocContourSet();</div>
<div class="line"><span class="lineno">  700</span>                <span class="keywordflow">if</span> (!tile.cset || !rcBuildContours(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, *tile.chf, tileCfg.maxSimplificationError, tileCfg.maxEdgeLen, *tile.cset))</div>
<div class="line"><span class="lineno">  701</span>                {</div>
<div class="line"><span class="lineno">  702</span>                    printf(<span class="stringliteral">&quot;%s Failed building contours!               \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  703</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  704</span>                }</div>
<div class="line"><span class="lineno">  705</span> </div>
<div class="line"><span class="lineno">  706</span>                <span class="comment">// build polymesh</span></div>
<div class="line"><span class="lineno">  707</span>                tile.pmesh = rcAllocPolyMesh();</div>
<div class="line"><span class="lineno">  708</span>                <span class="keywordflow">if</span> (!tile.pmesh || !rcBuildPolyMesh(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, *tile.cset, tileCfg.maxVertsPerPoly, *tile.pmesh))</div>
<div class="line"><span class="lineno">  709</span>                {</div>
<div class="line"><span class="lineno">  710</span>                    printf(<span class="stringliteral">&quot;%s Failed building polymesh!               \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  711</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  712</span>                }</div>
<div class="line"><span class="lineno">  713</span> </div>
<div class="line"><span class="lineno">  714</span>                tile.dmesh = rcAllocPolyMeshDetail();</div>
<div class="line"><span class="lineno">  715</span>                <span class="keywordflow">if</span> (!tile.dmesh || !rcBuildPolyMeshDetail(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, *tile.pmesh, *tile.chf, tileCfg.detailSampleDist, tileCfg.detailSampleMaxError, *tile.dmesh))</div>
<div class="line"><span class="lineno">  716</span>                {</div>
<div class="line"><span class="lineno">  717</span>                    printf(<span class="stringliteral">&quot;%s Failed building polymesh detail!        \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  718</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  719</span>                }</div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span>                <span class="comment">// free those up</span></div>
<div class="line"><span class="lineno">  722</span>                <span class="comment">// we may want to keep them in the future for debug</span></div>
<div class="line"><span class="lineno">  723</span>                <span class="comment">// but right now, we don&#39;t have the code to merge them</span></div>
<div class="line"><span class="lineno">  724</span>                rcFreeHeightField(tile.solid);</div>
<div class="line"><span class="lineno">  725</span>                tile.solid = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  726</span>                rcFreeCompactHeightfield(tile.chf);</div>
<div class="line"><span class="lineno">  727</span>                tile.chf = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  728</span>                rcFreeContourSet(tile.cset);</div>
<div class="line"><span class="lineno">  729</span>                tile.cset = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  730</span> </div>
<div class="line"><span class="lineno">  731</span>                pmmerge[nmerge] = tile.pmesh;</div>
<div class="line"><span class="lineno">  732</span>                dmmerge[nmerge] = tile.dmesh;</div>
<div class="line"><span class="lineno">  733</span>                nmerge++;</div>
<div class="line"><span class="lineno">  734</span>            }</div>
<div class="line"><span class="lineno">  735</span>        }</div>
<div class="line"><span class="lineno">  736</span> </div>
<div class="line"><span class="lineno">  737</span>        iv.polyMesh = rcAllocPolyMesh();</div>
<div class="line"><span class="lineno">  738</span>        <span class="keywordflow">if</span> (!iv.polyMesh)</div>
<div class="line"><span class="lineno">  739</span>        {</div>
<div class="line"><span class="lineno">  740</span>            printf(<span class="stringliteral">&quot;%s alloc iv.polyMesh FAILED!\n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  741</span>            <span class="keyword">delete</span>[] pmmerge;</div>
<div class="line"><span class="lineno">  742</span>            <span class="keyword">delete</span>[] dmmerge;</div>
<div class="line"><span class="lineno">  743</span>            <span class="keyword">delete</span>[] tiles;</div>
<div class="line"><span class="lineno">  744</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  745</span>        }</div>
<div class="line"><span class="lineno">  746</span>        rcMergePolyMeshes(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, pmmerge, nmerge, *iv.polyMesh);</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>        iv.polyMeshDetail = rcAllocPolyMeshDetail();</div>
<div class="line"><span class="lineno">  749</span>        <span class="keywordflow">if</span> (!iv.polyMeshDetail)</div>
<div class="line"><span class="lineno">  750</span>        {</div>
<div class="line"><span class="lineno">  751</span>            printf(<span class="stringliteral">&quot;%s alloc m_dmesh FAILED!\n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  752</span>            <span class="keyword">delete</span>[] pmmerge;</div>
<div class="line"><span class="lineno">  753</span>            <span class="keyword">delete</span>[] dmmerge;</div>
<div class="line"><span class="lineno">  754</span>            <span class="keyword">delete</span>[] tiles;</div>
<div class="line"><span class="lineno">  755</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  756</span>        }</div>
<div class="line"><span class="lineno">  757</span>        rcMergePolyMeshDetails(<a class="code hl_variable" href="../../d1/d97/a28306.html#a160c3ad76146488175c6ae228ad4ef83">m_rcContext</a>, dmmerge, nmerge, *iv.polyMeshDetail);</div>
<div class="line"><span class="lineno">  758</span> </div>
<div class="line"><span class="lineno">  759</span>        <span class="comment">// free things up</span></div>
<div class="line"><span class="lineno">  760</span>        <span class="keyword">delete</span>[] pmmerge;</div>
<div class="line"><span class="lineno">  761</span>        <span class="keyword">delete</span>[] dmmerge;</div>
<div class="line"><span class="lineno">  762</span>        <span class="keyword">delete</span>[] tiles;</div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>        <span class="comment">// set polygons as walkable</span></div>
<div class="line"><span class="lineno">  766</span><span class="comment"></span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; iv.polyMesh-&gt;npolys; ++i)</div>
<div class="line"><span class="lineno">  767</span>            <span class="keywordflow">if</span> (iv.polyMesh-&gt;areas[i] &amp; RC_WALKABLE_AREA)</div>
<div class="line"><span class="lineno">  768</span>                iv.polyMesh-&gt;flags[i] = iv.polyMesh-&gt;areas[i];</div>
<div class="line"><span class="lineno">  769</span> </div>
<div class="line"><span class="lineno">  770</span>        <span class="comment">// setup mesh parameters</span></div>
<div class="line"><span class="lineno">  771</span>        dtNavMeshCreateParams params;</div>
<div class="line"><span class="lineno">  772</span>        memset(&amp;params, 0, <span class="keyword">sizeof</span>(params));</div>
<div class="line"><span class="lineno">  773</span>        params.verts = iv.polyMesh-&gt;verts;</div>
<div class="line"><span class="lineno">  774</span>        params.vertCount = iv.polyMesh-&gt;nverts;</div>
<div class="line"><span class="lineno">  775</span>        params.polys = iv.polyMesh-&gt;polys;</div>
<div class="line"><span class="lineno">  776</span>        params.polyAreas = iv.polyMesh-&gt;areas;</div>
<div class="line"><span class="lineno">  777</span>        params.polyFlags = iv.polyMesh-&gt;flags;</div>
<div class="line"><span class="lineno">  778</span>        params.polyCount = iv.polyMesh-&gt;npolys;</div>
<div class="line"><span class="lineno">  779</span>        params.nvp = iv.polyMesh-&gt;nvp;</div>
<div class="line"><span class="lineno">  780</span>        params.detailMeshes = iv.polyMeshDetail-&gt;meshes;</div>
<div class="line"><span class="lineno">  781</span>        params.detailVerts = iv.polyMeshDetail-&gt;verts;</div>
<div class="line"><span class="lineno">  782</span>        params.detailVertsCount = iv.polyMeshDetail-&gt;nverts;</div>
<div class="line"><span class="lineno">  783</span>        params.detailTris = iv.polyMeshDetail-&gt;tris;</div>
<div class="line"><span class="lineno">  784</span>        params.detailTriCount = iv.polyMeshDetail-&gt;ntris;</div>
<div class="line"><span class="lineno">  785</span> </div>
<div class="line"><span class="lineno">  786</span>        params.offMeshConVerts = meshData.offMeshConnections.getCArray();</div>
<div class="line"><span class="lineno">  787</span>        params.offMeshConCount = meshData.offMeshConnections.size() / 6;</div>
<div class="line"><span class="lineno">  788</span>        params.offMeshConRad = meshData.offMeshConnectionRads.getCArray();</div>
<div class="line"><span class="lineno">  789</span>        params.offMeshConDir = meshData.offMeshConnectionDirs.getCArray();</div>
<div class="line"><span class="lineno">  790</span>        params.offMeshConAreas = meshData.offMeshConnectionsAreas.getCArray();</div>
<div class="line"><span class="lineno">  791</span>        params.offMeshConFlags = meshData.offMeshConnectionsFlags.getCArray();</div>
<div class="line"><span class="lineno">  792</span> </div>
<div class="line"><span class="lineno">  793</span>        params.walkableHeight = BASE_UNIT_DIM * config.walkableHeight;  <span class="comment">// agent height</span></div>
<div class="line"><span class="lineno">  794</span>        params.walkableRadius = BASE_UNIT_DIM * config.walkableRadius;  <span class="comment">// agent radius</span></div>
<div class="line"><span class="lineno">  795</span>        params.walkableClimb = BASE_UNIT_DIM * config.walkableClimb;    <span class="comment">// keep less that walkableHeight (aka agent height)!</span></div>
<div class="line"><span class="lineno">  796</span>        params.tileX = (((bmin[0] + bmax[0]) / 2) - navMesh-&gt;getParams()-&gt;orig[0]) / <a class="code hl_variable" href="../../d9/d45/a04693.html#a16e4fdf7de4239156a5a8eb83dcc9e8c">GRID_SIZE</a>;</div>
<div class="line"><span class="lineno">  797</span>        params.tileY = (((bmin[2] + bmax[2]) / 2) - navMesh-&gt;getParams()-&gt;orig[2]) / <a class="code hl_variable" href="../../d9/d45/a04693.html#a16e4fdf7de4239156a5a8eb83dcc9e8c">GRID_SIZE</a>;</div>
<div class="line"><span class="lineno">  798</span>        rcVcopy(params.bmin, bmin);</div>
<div class="line"><span class="lineno">  799</span>        rcVcopy(params.bmax, bmax);</div>
<div class="line"><span class="lineno">  800</span>        params.cs = config.cs;</div>
<div class="line"><span class="lineno">  801</span>        params.ch = config.ch;</div>
<div class="line"><span class="lineno">  802</span>        params.tileLayer = 0;</div>
<div class="line"><span class="lineno">  803</span>        params.buildBvTree = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  804</span> </div>
<div class="line"><span class="lineno">  805</span>        <span class="comment">// will hold final navmesh</span></div>
<div class="line"><span class="lineno">  806</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* navData = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  807</span>        <span class="keywordtype">int</span> navDataSize = 0;</div>
<div class="line"><span class="lineno">  808</span> </div>
<div class="line"><span class="lineno">  809</span>        <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  810</span>        {</div>
<div class="line"><span class="lineno">  811</span>            <span class="comment">// these values are checked within dtCreateNavMeshData - handle them here</span></div>
<div class="line"><span class="lineno">  812</span>            <span class="comment">// so we have a clear error message</span></div>
<div class="line"><span class="lineno">  813</span>            <span class="keywordflow">if</span> (params.nvp &gt; DT_VERTS_PER_POLYGON)</div>
<div class="line"><span class="lineno">  814</span>            {</div>
<div class="line"><span class="lineno">  815</span>                printf(<span class="stringliteral">&quot;%s Invalid verts-per-polygon value!        \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  816</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  817</span>            }</div>
<div class="line"><span class="lineno">  818</span>            <span class="keywordflow">if</span> (params.vertCount &gt;= 0xffff)</div>
<div class="line"><span class="lineno">  819</span>            {</div>
<div class="line"><span class="lineno">  820</span>                printf(<span class="stringliteral">&quot;%s Too many vertices!                      \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  821</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  822</span>            }</div>
<div class="line"><span class="lineno">  823</span>            <span class="keywordflow">if</span> (!params.vertCount || !params.verts)</div>
<div class="line"><span class="lineno">  824</span>            {</div>
<div class="line"><span class="lineno">  825</span>                <span class="comment">// occurs mostly when adjacent tiles have models</span></div>
<div class="line"><span class="lineno">  826</span>                <span class="comment">// loaded but those models don&#39;t span into this tile</span></div>
<div class="line"><span class="lineno">  827</span> </div>
<div class="line"><span class="lineno">  828</span>                <span class="comment">// message is an annoyance</span></div>
<div class="line"><span class="lineno">  829</span>                printf(<span class="stringliteral">&quot;%sNo vertices to build tile!              \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  830</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  831</span>            }</div>
<div class="line"><span class="lineno">  832</span>            <span class="keywordflow">if</span> (!params.polyCount || !params.polys)</div>
<div class="line"><span class="lineno">  833</span>            {</div>
<div class="line"><span class="lineno">  834</span>                <span class="comment">// we have flat tiles with no actual geometry - don&#39;t build those, its useless</span></div>
<div class="line"><span class="lineno">  835</span>                <span class="comment">// keep in mind that we do output those into debug info</span></div>
<div class="line"><span class="lineno">  836</span>                printf(<span class="stringliteral">&quot;%s No polygons to build on tile!              \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  837</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  838</span>            }</div>
<div class="line"><span class="lineno">  839</span>            <span class="keywordflow">if</span> (!params.detailMeshes || !params.detailVerts || !params.detailTris)</div>
<div class="line"><span class="lineno">  840</span>            {</div>
<div class="line"><span class="lineno">  841</span>                printf(<span class="stringliteral">&quot;%s No detail mesh to build tile!           \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  842</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  843</span>            }</div>
<div class="line"><span class="lineno">  844</span> </div>
<div class="line"><span class="lineno">  845</span>            printf(<span class="stringliteral">&quot;%s Building navmesh tile...\n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  846</span>            <span class="keywordflow">if</span> (!dtCreateNavMeshData(&amp;params, &amp;navData, &amp;navDataSize))</div>
<div class="line"><span class="lineno">  847</span>            {</div>
<div class="line"><span class="lineno">  848</span>                printf(<span class="stringliteral">&quot;%s Failed building navmesh tile!           \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  849</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  850</span>            }</div>
<div class="line"><span class="lineno">  851</span> </div>
<div class="line"><span class="lineno">  852</span>            dtTileRef tileRef = 0;</div>
<div class="line"><span class="lineno">  853</span>            printf(<span class="stringliteral">&quot;%s Adding tile to navmesh...\n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  854</span>            <span class="comment">// DT_TILE_FREE_DATA tells detour to unallocate memory when the tile</span></div>
<div class="line"><span class="lineno">  855</span>            <span class="comment">// is removed via removeTile()</span></div>
<div class="line"><span class="lineno">  856</span>            dtStatus dtResult = navMesh-&gt;addTile(navData, navDataSize, DT_TILE_FREE_DATA, 0, &amp;tileRef);</div>
<div class="line"><span class="lineno">  857</span>            <span class="keywordflow">if</span> (!tileRef || dtResult != DT_SUCCESS)</div>
<div class="line"><span class="lineno">  858</span>            {</div>
<div class="line"><span class="lineno">  859</span>                printf(<span class="stringliteral">&quot;%s Failed adding tile to navmesh!           \n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  860</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  861</span>            }</div>
<div class="line"><span class="lineno">  862</span> </div>
<div class="line"><span class="lineno">  863</span>            <span class="comment">// file output</span></div>
<div class="line"><span class="lineno">  864</span>            <span class="keywordtype">char</span> fileName[255];</div>
<div class="line"><span class="lineno">  865</span>            sprintf(fileName, <span class="stringliteral">&quot;mmaps/%03u%02i%02i.mmtile&quot;</span>, mapID, tileY, tileX);</div>
<div class="line"><span class="lineno">  866</span>            FILE* file = fopen(fileName, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><span class="lineno">  867</span>            <span class="keywordflow">if</span> (!file)</div>
<div class="line"><span class="lineno">  868</span>            {</div>
<div class="line"><span class="lineno">  869</span>                <span class="keywordtype">char</span> message[1024];</div>
<div class="line"><span class="lineno">  870</span>                sprintf(message, <span class="stringliteral">&quot;[Map %03i] Failed to open %s for writing!\n&quot;</span>, mapID, fileName);</div>
<div class="line"><span class="lineno">  871</span>                perror(message);</div>
<div class="line"><span class="lineno">  872</span>                navMesh-&gt;removeTile(tileRef, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  873</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  874</span>            }</div>
<div class="line"><span class="lineno">  875</span> </div>
<div class="line"><span class="lineno">  876</span>            printf(<span class="stringliteral">&quot;%s Writing to file...\n&quot;</span>, tileString);</div>
<div class="line"><span class="lineno">  877</span> </div>
<div class="line"><span class="lineno">  878</span>            <span class="comment">// write header</span></div>
<div class="line"><span class="lineno">  879</span>            <a class="code hl_struct" href="../../d0/dca/a04906.html">MmapTileHeader</a> header;</div>
<div class="line"><span class="lineno">  880</span>            header.<a class="code hl_variable" href="../../d0/dca/a04906.html#aeb4e622161a4bb42cff42d37542f0254">usesLiquids</a> = <a class="code hl_variable" href="../../d1/d97/a28306.html#ade1605fb1b68693516c9fb27f94b278d">m_terrainBuilder</a>-&gt;<a class="code hl_function" href="../../d6/df1/a28318.html#ab869d655ea5cb7f9d32dff63ed4df779">usesLiquids</a>();</div>
<div class="line"><span class="lineno">  881</span>            header.<a class="code hl_variable" href="../../d0/dca/a04906.html#a69f3284a4a56b1108792ba56c250bf97">size</a> = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(navDataSize);</div>
<div class="line"><span class="lineno">  882</span>            fwrite(&amp;header, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../d0/dca/a04906.html">MmapTileHeader</a>), 1, file);</div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span>            <span class="comment">// write data</span></div>
<div class="line"><span class="lineno">  885</span>            fwrite(navData, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>), navDataSize, file);</div>
<div class="line"><span class="lineno">  886</span>            fclose(file);</div>
<div class="line"><span class="lineno">  887</span> </div>
<div class="line"><span class="lineno">  888</span>            <span class="comment">// now that tile is written to disk, we can unload it</span></div>
<div class="line"><span class="lineno">  889</span>            navMesh-&gt;removeTile(tileRef, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  890</span>        } <span class="keywordflow">while</span> (<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  891</span> </div>
<div class="line"><span class="lineno">  892</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/d97/a28306.html#a4c881a6e6ec66b315f72f84da5c534c2">m_debugOutput</a>)</div>
<div class="line"><span class="lineno">  893</span>        {</div>
<div class="line"><span class="lineno">  894</span>            <span class="comment">// restore padding so that the debug visualization is correct</span></div>
<div class="line"><span class="lineno">  895</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; iv.polyMesh-&gt;nverts; ++i)</div>
<div class="line"><span class="lineno">  896</span>            {</div>
<div class="line"><span class="lineno">  897</span>                <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>* v = &amp;iv.polyMesh-&gt;verts[i * 3];</div>
<div class="line"><span class="lineno">  898</span>                v[0] += (<span class="keywordtype">unsigned</span> short)config.borderSize;</div>
<div class="line"><span class="lineno">  899</span>                v[2] += (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)config.borderSize;</div>
<div class="line"><span class="lineno">  900</span>            }</div>
<div class="line"><span class="lineno">  901</span> </div>
<div class="line"><span class="lineno">  902</span>            iv.generateObjFile(mapID, tileX, tileY, meshData);</div>
<div class="line"><span class="lineno">  903</span>            iv.writeIV(mapID, tileX, tileY);</div>
<div class="line"><span class="lineno">  904</span>        }</div>
<div class="line"><span class="lineno">  905</span>    }</div>
<div class="ttc" id="aa00092_html_a8a4d0b36dd46d60b691b894fb8c1c5dbac2c74d40490a8ea42121c00a8249bd98"><div class="ttname"><a href="../../d1/dc1/a00092.html#a8a4d0b36dd46d60b691b894fb8c1c5dbac2c74d40490a8ea42121c00a8249bd98">NAV_GROUND</a></div><div class="ttdeci">@ NAV_GROUND</div><div class="ttdef"><b>Definition:</b> MapDefines.h:54</div></div>
<div class="ttc" id="aa00497_html_a15a8d014fadf85c99a2268d8cbd00767"><div class="ttname"><a href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a></div><div class="ttdeci">std::uint8_t uint8</div><div class="ttdef"><b>Definition:</b> Define.h:109</div></div>
<div class="ttc" id="aa00497_html_a22f78cc9780bf32aff91ae17c3101c8d"><div class="ttname"><a href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a></div><div class="ttdeci">std::uint32_t uint32</div><div class="ttdef"><b>Definition:</b> Define.h:107</div></div>
<div class="ttc" id="aa04693_html_a16e4fdf7de4239156a5a8eb83dcc9e8c"><div class="ttname"><a href="../../d9/d45/a04693.html#a16e4fdf7de4239156a5a8eb83dcc9e8c">MMAP::GRID_SIZE</a></div><div class="ttdeci">static const float GRID_SIZE</div><div class="ttdef"><b>Definition:</b> TerrainBuilder.h:48</div></div>
<div class="ttc" id="aa04906_html"><div class="ttname"><a href="../../d0/dca/a04906.html">MmapTileHeader</a></div><div class="ttdef"><b>Definition:</b> MapDefines.h:31</div></div>
<div class="ttc" id="aa04906_html_a69f3284a4a56b1108792ba56c250bf97"><div class="ttname"><a href="../../d0/dca/a04906.html#a69f3284a4a56b1108792ba56c250bf97">MmapTileHeader::size</a></div><div class="ttdeci">uint32 size</div><div class="ttdef"><b>Definition:</b> MapDefines.h:35</div></div>
<div class="ttc" id="aa04906_html_aeb4e622161a4bb42cff42d37542f0254"><div class="ttname"><a href="../../d0/dca/a04906.html#aeb4e622161a4bb42cff42d37542f0254">MmapTileHeader::usesLiquids</a></div><div class="ttdeci">char usesLiquids</div><div class="ttdef"><b>Definition:</b> MapDefines.h:36</div></div>
<div class="ttc" id="aa28310_html_a86e75f8857980cff57f87558342fbeb1"><div class="ttname"><a href="../../db/d59/a28310.html#a86e75f8857980cff57f87558342fbeb1">MMAP::MapBuilder::GetMapSpecificConfig</a></div><div class="ttdeci">rcConfig GetMapSpecificConfig(uint32 mapID, float bmin[3], float bmax[3], const TileConfig &amp;tileConfig) const</div><div class="ttdef"><b>Definition:</b> MapBuilder.cpp:1052</div></div>
<div class="ttc" id="aa28318_html_ab869d655ea5cb7f9d32dff63ed4df779"><div class="ttname"><a href="../../d6/df1/a28318.html#ab869d655ea5cb7f9d32dff63ed4df779">MMAP::TerrainBuilder::usesLiquids</a></div><div class="ttdeci">bool usesLiquids() const</div><div class="ttdef"><b>Definition:</b> TerrainBuilder.h:88</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00089">MMAP::TileConfig::BASE_UNIT_DIM</a>, <a class="el" href="../../#l00067">MMAP::Tile::chf</a>, <a class="el" href="../../#l00069">MMAP::Tile::cset</a>, <a class="el" href="../../#l00071">MMAP::Tile::dmesh</a>, <a class="el" href="../../#l00201">MMAP::IntermediateValues::generateObjFile()</a>, <a class="el" href="../../#l01052">MMAP::MapBuilder::GetMapSpecificConfig()</a>, <a class="el" href="../../#l00048">MMAP::GRID_SIZE</a>, <a class="el" href="../../#l00065">MMAP::MeshData::liquidTris</a>, <a class="el" href="../../#l00066">MMAP::MeshData::liquidType</a>, <a class="el" href="../../#l00064">MMAP::MeshData::liquidVerts</a>, <a class="el" href="../../#l00134">m_bigBaseUnit</a>, <a class="el" href="../../#l00135">m_debugOutput</a>, <a class="el" href="../../#l00137">m_mapBuilder</a>, <a class="el" href="../../#l00141">m_rcContext</a>, <a class="el" href="../../#l00138">m_terrainBuilder</a>, <a class="el" href="../../#l00054">NAV_GROUND</a>, <a class="el" href="../../#l00071">MMAP::MeshData::offMeshConnectionDirs</a>, <a class="el" href="../../#l00070">MMAP::MeshData::offMeshConnectionRads</a>, <a class="el" href="../../#l00069">MMAP::MeshData::offMeshConnections</a>, <a class="el" href="../../#l00072">MMAP::MeshData::offMeshConnectionsAreas</a>, <a class="el" href="../../#l00073">MMAP::MeshData::offMeshConnectionsFlags</a>, <a class="el" href="../../#l00070">MMAP::Tile::pmesh</a>, <a class="el" href="../../#l00032">MMAP::IntermediateValues::polyMesh</a>, <a class="el" href="../../#l00033">MMAP::IntermediateValues::polyMeshDetail</a>, <a class="el" href="../../#l00035">MmapTileHeader::size</a>, <a class="el" href="../../#l00068">MMAP::Tile::solid</a>, <a class="el" href="../../#l00062">MMAP::MeshData::solidTris</a>, <a class="el" href="../../#l00061">MMAP::MeshData::solidVerts</a>, <a class="el" href="../../#l00092">MMAP::TileConfig::TILES_PER_MAP</a>, <a class="el" href="../../#l00036">MmapTileHeader::usesLiquids</a>, <a class="el" href="../../#l00088">MMAP::TerrainBuilder::usesLiquids()</a>, and <a class="el" href="../../#l00031">MMAP::IntermediateValues::writeIV()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00289">MMAP::MapBuilder::buildMeshFromFile()</a>, and <a class="el" href="../../#l00461">buildTile()</a>.</p>

</div>
</div>
<a id="ab7eca8778fd61ecbfe5f07bba0b38857" name="ab7eca8778fd61ecbfe5f07bba0b38857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7eca8778fd61ecbfe5f07bba0b38857">&#9670;&#160;</a></span>buildTile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MMAP::TileBuilder::buildTile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>mapID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>tileX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>tileY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dtNavMesh *&#160;</td>
          <td class="paramname"><em>navMesh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  462</span>    {</div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d1/d97/a28306.html#a77ecbab0c34dfe69c414304768b20ea3">shouldSkipTile</a>(mapID, tileX, tileY))</div>
<div class="line"><span class="lineno">  464</span>        {</div>
<div class="line"><span class="lineno">  465</span>            ++<a class="code hl_variable" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a>-&gt;<a class="code hl_variable" href="../../db/d59/a28310.html#add36069c0521738ff600d6a4c63aae43">m_totalTilesProcessed</a>;</div>
<div class="line"><span class="lineno">  466</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  467</span>        }</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>        printf(<span class="stringliteral">&quot;%u%% [Map %04i] Building tile [%02u,%02u]\n&quot;</span>, <a class="code hl_variable" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a>-&gt;<a class="code hl_function" href="../../db/d59/a28310.html#a7191e674e6c08c325a181bef5f61a2a6">currentPercentageDone</a>(), mapID, tileX, tileY);</div>
<div class="line"><span class="lineno">  470</span> </div>
<div class="line"><span class="lineno">  471</span>        MeshData meshData;</div>
<div class="line"><span class="lineno">  472</span> </div>
<div class="line"><span class="lineno">  473</span>        <span class="comment">// get heightmap data</span></div>
<div class="line"><span class="lineno">  474</span>        <a class="code hl_variable" href="../../d1/d97/a28306.html#ade1605fb1b68693516c9fb27f94b278d">m_terrainBuilder</a>-&gt;<a class="code hl_function" href="../../d6/df1/a28318.html#ab6f3b100ee1a40173c2e77c6ee5a0da9">loadMap</a>(mapID, tileX, tileY, meshData);</div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span>        <span class="comment">// get model data</span></div>
<div class="line"><span class="lineno">  477</span>        <a class="code hl_variable" href="../../d1/d97/a28306.html#ade1605fb1b68693516c9fb27f94b278d">m_terrainBuilder</a>-&gt;<a class="code hl_function" href="../../d6/df1/a28318.html#ae816d445265bde3c3866069bcd9e5184">loadVMap</a>(mapID, tileY, tileX, meshData);</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span>        <span class="comment">// if there is no data, give up now</span></div>
<div class="line"><span class="lineno">  480</span>        <span class="keywordflow">if</span> (!meshData.solidVerts.size() &amp;&amp; !meshData.liquidVerts.size())</div>
<div class="line"><span class="lineno">  481</span>        {</div>
<div class="line"><span class="lineno">  482</span>            ++<a class="code hl_variable" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a>-&gt;<a class="code hl_variable" href="../../db/d59/a28310.html#add36069c0521738ff600d6a4c63aae43">m_totalTilesProcessed</a>;</div>
<div class="line"><span class="lineno">  483</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  484</span>        }</div>
<div class="line"><span class="lineno">  485</span> </div>
<div class="line"><span class="lineno">  486</span>        <span class="comment">// remove unused vertices</span></div>
<div class="line"><span class="lineno">  487</span>        <a class="code hl_function" href="../../d6/df1/a28318.html#a7a3f53367758b6effcc7899894c148de">TerrainBuilder::cleanVertices</a>(meshData.solidVerts, meshData.solidTris);</div>
<div class="line"><span class="lineno">  488</span>        <a class="code hl_function" href="../../d6/df1/a28318.html#a7a3f53367758b6effcc7899894c148de">TerrainBuilder::cleanVertices</a>(meshData.liquidVerts, meshData.liquidTris);</div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>        <span class="comment">// gather all mesh data for final data check, and bounds calculation</span></div>
<div class="line"><span class="lineno">  491</span>        G3D::Array&lt;float&gt; allVerts;</div>
<div class="line"><span class="lineno">  492</span>        allVerts.append(meshData.liquidVerts);</div>
<div class="line"><span class="lineno">  493</span>        allVerts.append(meshData.solidVerts);</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>        <span class="keywordflow">if</span> (!allVerts.size())</div>
<div class="line"><span class="lineno">  496</span>        {</div>
<div class="line"><span class="lineno">  497</span>            ++<a class="code hl_variable" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a>-&gt;<a class="code hl_variable" href="../../db/d59/a28310.html#add36069c0521738ff600d6a4c63aae43">m_totalTilesProcessed</a>;</div>
<div class="line"><span class="lineno">  498</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  499</span>        }</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>        <span class="comment">// get bounds of current tile</span></div>
<div class="line"><span class="lineno">  502</span>        <span class="keywordtype">float</span> bmin[3], bmax[3];</div>
<div class="line"><span class="lineno">  503</span>        <a class="code hl_variable" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a>-&gt;<a class="code hl_function" href="../../db/d59/a28310.html#ad757b128d73f36665ccc63fbc28f2e74">getTileBounds</a>(tileX, tileY, allVerts.getCArray(), allVerts.size() / 3, bmin, bmax);</div>
<div class="line"><span class="lineno">  504</span> </div>
<div class="line"><span class="lineno">  505</span>        <a class="code hl_variable" href="../../d1/d97/a28306.html#ade1605fb1b68693516c9fb27f94b278d">m_terrainBuilder</a>-&gt;<a class="code hl_function" href="../../d6/df1/a28318.html#a8df6feed791e1b6ca3ab46e6001c0f32">loadOffMeshConnections</a>(mapID, tileX, tileY, meshData, <a class="code hl_variable" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a>-&gt;<a class="code hl_variable" href="../../db/d59/a28310.html#a0a5843c2b412f6cc82b3a376df3c6ff0">m_offMeshFilePath</a>);</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>        <span class="comment">// build navmesh tile</span></div>
<div class="line"><span class="lineno">  508</span>        <a class="code hl_function" href="../../d1/d97/a28306.html#add45abc9c1f79f95dae9d7616b100dc0">buildMoveMapTile</a>(mapID, tileX, tileY, meshData, bmin, bmax, navMesh);</div>
<div class="line"><span class="lineno">  509</span> </div>
<div class="line"><span class="lineno">  510</span>        ++<a class="code hl_variable" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a>-&gt;<a class="code hl_variable" href="../../db/d59/a28310.html#add36069c0521738ff600d6a4c63aae43">m_totalTilesProcessed</a>;</div>
<div class="line"><span class="lineno">  511</span>    }</div>
<div class="ttc" id="aa28306_html_a77ecbab0c34dfe69c414304768b20ea3"><div class="ttname"><a href="../../d1/d97/a28306.html#a77ecbab0c34dfe69c414304768b20ea3">MMAP::TileBuilder::shouldSkipTile</a></div><div class="ttdeci">bool shouldSkipTile(uint32 mapID, uint32 tileX, uint32 tileY) const</div><div class="ttdef"><b>Definition:</b> MapBuilder.cpp:1029</div></div>
<div class="ttc" id="aa28306_html_add45abc9c1f79f95dae9d7616b100dc0"><div class="ttname"><a href="../../d1/d97/a28306.html#add45abc9c1f79f95dae9d7616b100dc0">MMAP::TileBuilder::buildMoveMapTile</a></div><div class="ttdeci">void buildMoveMapTile(uint32 mapID, uint32 tileX, uint32 tileY, MeshData &amp;meshData, float bmin[3], float bmax[3], dtNavMesh *navMesh)</div><div class="ttdef"><b>Definition:</b> MapBuilder.cpp:589</div></div>
<div class="ttc" id="aa28310_html_a0a5843c2b412f6cc82b3a376df3c6ff0"><div class="ttname"><a href="../../db/d59/a28310.html#a0a5843c2b412f6cc82b3a376df3c6ff0">MMAP::MapBuilder::m_offMeshFilePath</a></div><div class="ttdeci">const char * m_offMeshFilePath</div><div class="ttdef"><b>Definition:</b> MapBuilder.h:197</div></div>
<div class="ttc" id="aa28310_html_a7191e674e6c08c325a181bef5f61a2a6"><div class="ttname"><a href="../../db/d59/a28310.html#a7191e674e6c08c325a181bef5f61a2a6">MMAP::MapBuilder::currentPercentageDone</a></div><div class="ttdeci">uint32 currentPercentageDone() const</div><div class="ttdef"><b>Definition:</b> MapBuilder.cpp:1106</div></div>
<div class="ttc" id="aa28310_html_ad757b128d73f36665ccc63fbc28f2e74"><div class="ttname"><a href="../../db/d59/a28310.html#ad757b128d73f36665ccc63fbc28f2e74">MMAP::MapBuilder::getTileBounds</a></div><div class="ttdeci">void getTileBounds(uint32 tileX, uint32 tileY, float *verts, int vertCount, float *bmin, float *bmax) const</div><div class="ttdef"><b>Definition:</b> MapBuilder.cpp:908</div></div>
<div class="ttc" id="aa28310_html_add36069c0521738ff600d6a4c63aae43"><div class="ttname"><a href="../../db/d59/a28310.html#add36069c0521738ff600d6a4c63aae43">MMAP::MapBuilder::m_totalTilesProcessed</a></div><div class="ttdeci">std::atomic&lt; uint32 &gt; m_totalTilesProcessed</div><div class="ttdef"><b>Definition:</b> MapBuilder.h:209</div></div>
<div class="ttc" id="aa28318_html_a7a3f53367758b6effcc7899894c148de"><div class="ttname"><a href="../../d6/df1/a28318.html#a7a3f53367758b6effcc7899894c148de">MMAP::TerrainBuilder::cleanVertices</a></div><div class="ttdeci">static void cleanVertices(G3D::Array&lt; float &gt; &amp;verts, G3D::Array&lt; int &gt; &amp;tris)</div><div class="ttdef"><b>Definition:</b> TerrainBuilder.cpp:882</div></div>
<div class="ttc" id="aa28318_html_a8df6feed791e1b6ca3ab46e6001c0f32"><div class="ttname"><a href="../../d6/df1/a28318.html#a8df6feed791e1b6ca3ab46e6001c0f32">MMAP::TerrainBuilder::loadOffMeshConnections</a></div><div class="ttdeci">void loadOffMeshConnections(uint32 mapID, uint32 tileX, uint32 tileY, MeshData &amp;meshData, const char *offMeshFilePath)</div><div class="ttdef"><b>Definition:</b> TerrainBuilder.cpp:925</div></div>
<div class="ttc" id="aa28318_html_ab6f3b100ee1a40173c2e77c6ee5a0da9"><div class="ttname"><a href="../../d6/df1/a28318.html#ab6f3b100ee1a40173c2e77c6ee5a0da9">MMAP::TerrainBuilder::loadMap</a></div><div class="ttdeci">void loadMap(uint32 mapID, uint32 tileX, uint32 tileY, MeshData &amp;meshData)</div><div class="ttdef"><b>Definition:</b> TerrainBuilder.cpp:123</div></div>
<div class="ttc" id="aa28318_html_ae816d445265bde3c3866069bcd9e5184"><div class="ttname"><a href="../../d6/df1/a28318.html#ae816d445265bde3c3866069bcd9e5184">MMAP::TerrainBuilder::loadVMap</a></div><div class="ttdeci">bool loadVMap(uint32 mapID, uint32 tileX, uint32 tileY, MeshData &amp;meshData)</div><div class="ttdef"><b>Definition:</b> TerrainBuilder.cpp:665</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00589">buildMoveMapTile()</a>, <a class="el" href="../../#l00882">MMAP::TerrainBuilder::cleanVertices()</a>, <a class="el" href="../../#l01106">MMAP::MapBuilder::currentPercentageDone()</a>, <a class="el" href="../../#l00908">MMAP::MapBuilder::getTileBounds()</a>, <a class="el" href="../../#l00065">MMAP::MeshData::liquidTris</a>, <a class="el" href="../../#l00064">MMAP::MeshData::liquidVerts</a>, <a class="el" href="../../#l00123">MMAP::TerrainBuilder::loadMap()</a>, <a class="el" href="../../#l00925">MMAP::TerrainBuilder::loadOffMeshConnections()</a>, <a class="el" href="../../#l00665">MMAP::TerrainBuilder::loadVMap()</a>, <a class="el" href="../../#l00137">m_mapBuilder</a>, <a class="el" href="../../#l00197">MMAP::MapBuilder::m_offMeshFilePath</a>, <a class="el" href="../../#l00138">m_terrainBuilder</a>, <a class="el" href="../../#l00209">MMAP::MapBuilder::m_totalTilesProcessed</a>, <a class="el" href="../../#l01029">shouldSkipTile()</a>, <a class="el" href="../../#l00062">MMAP::MeshData::solidTris</a>, and <a class="el" href="../../#l00061">MMAP::MeshData::solidVerts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00376">MMAP::MapBuilder::buildSingleTile()</a>, and <a class="el" href="../../#l00397">WorkerThread()</a>.</p>

</div>
</div>
<a id="a77ecbab0c34dfe69c414304768b20ea3" name="a77ecbab0c34dfe69c414304768b20ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77ecbab0c34dfe69c414304768b20ea3">&#9670;&#160;</a></span>shouldSkipTile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MMAP::TileBuilder::shouldSkipTile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>mapID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>tileX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>tileY</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1030</span>    {</div>
<div class="line"><span class="lineno"> 1031</span>        <span class="keywordtype">char</span> fileName[255];</div>
<div class="line"><span class="lineno"> 1032</span>        sprintf(fileName, <span class="stringliteral">&quot;mmaps/%03u%02i%02i.mmtile&quot;</span>, mapID, tileY, tileX);</div>
<div class="line"><span class="lineno"> 1033</span>        FILE* file = fopen(fileName, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><span class="lineno"> 1034</span>        <span class="keywordflow">if</span> (!file)</div>
<div class="line"><span class="lineno"> 1035</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1036</span> </div>
<div class="line"><span class="lineno"> 1037</span>        <a class="code hl_struct" href="../../d0/dca/a04906.html">MmapTileHeader</a> header;</div>
<div class="line"><span class="lineno"> 1038</span>        <span class="keywordtype">int</span> count = fread(&amp;header, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../d0/dca/a04906.html">MmapTileHeader</a>), 1, file);</div>
<div class="line"><span class="lineno"> 1039</span>        fclose(file);</div>
<div class="line"><span class="lineno"> 1040</span>        <span class="keywordflow">if</span> (count != 1)</div>
<div class="line"><span class="lineno"> 1041</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1042</span> </div>
<div class="line"><span class="lineno"> 1043</span>        <span class="keywordflow">if</span> (header.<a class="code hl_variable" href="../../d0/dca/a04906.html#ace0ec88460c97f1438de2d0e6a9d7774">mmapMagic</a> != <a class="code hl_define" href="../../d1/dc1/a00092.html#af7a9a5e840ab3ad1c160e832500016d1">MMAP_MAGIC</a> || header.<a class="code hl_variable" href="../../d0/dca/a04906.html#a34d3ed8c617139653176454d7fa7934e">dtVersion</a> != <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(DT_NAVMESH_VERSION))</div>
<div class="line"><span class="lineno"> 1044</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1045</span> </div>
<div class="line"><span class="lineno"> 1046</span>        <span class="keywordflow">if</span> (header.<a class="code hl_variable" href="../../d0/dca/a04906.html#a5cc3cd873419fe8aeb479d3187584410">mmapVersion</a> != <a class="code hl_define" href="../../d1/dc1/a00092.html#aea71555fdd0af33ccc21c76c67574421">MMAP_VERSION</a>)</div>
<div class="line"><span class="lineno"> 1047</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1048</span> </div>
<div class="line"><span class="lineno"> 1049</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1050</span>    }</div>
<div class="ttc" id="aa00092_html_aea71555fdd0af33ccc21c76c67574421"><div class="ttname"><a href="../../d1/dc1/a00092.html#aea71555fdd0af33ccc21c76c67574421">MMAP_VERSION</a></div><div class="ttdeci">#define MMAP_VERSION</div><div class="ttdef"><b>Definition:</b> MapDefines.h:28</div></div>
<div class="ttc" id="aa00092_html_af7a9a5e840ab3ad1c160e832500016d1"><div class="ttname"><a href="../../d1/dc1/a00092.html#af7a9a5e840ab3ad1c160e832500016d1">MMAP_MAGIC</a></div><div class="ttdeci">#define MMAP_MAGIC</div><div class="ttdef"><b>Definition:</b> MapDefines.h:27</div></div>
<div class="ttc" id="aa04906_html_a34d3ed8c617139653176454d7fa7934e"><div class="ttname"><a href="../../d0/dca/a04906.html#a34d3ed8c617139653176454d7fa7934e">MmapTileHeader::dtVersion</a></div><div class="ttdeci">uint32 dtVersion</div><div class="ttdef"><b>Definition:</b> MapDefines.h:33</div></div>
<div class="ttc" id="aa04906_html_a5cc3cd873419fe8aeb479d3187584410"><div class="ttname"><a href="../../d0/dca/a04906.html#a5cc3cd873419fe8aeb479d3187584410">MmapTileHeader::mmapVersion</a></div><div class="ttdeci">uint32 mmapVersion</div><div class="ttdef"><b>Definition:</b> MapDefines.h:34</div></div>
<div class="ttc" id="aa04906_html_ace0ec88460c97f1438de2d0e6a9d7774"><div class="ttname"><a href="../../d0/dca/a04906.html#ace0ec88460c97f1438de2d0e6a9d7774">MmapTileHeader::mmapMagic</a></div><div class="ttdeci">uint32 mmapMagic</div><div class="ttdef"><b>Definition:</b> MapDefines.h:32</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00033">MmapTileHeader::dtVersion</a>, <a class="el" href="../../#l00027">MMAP_MAGIC</a>, <a class="el" href="../../#l00028">MMAP_VERSION</a>, <a class="el" href="../../#l00032">MmapTileHeader::mmapMagic</a>, and <a class="el" href="../../#l00034">MmapTileHeader::mmapVersion</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00461">buildTile()</a>.</p>

</div>
</div>
<a id="ae386f742fed7d2b66bcf3750abf91daf" name="ae386f742fed7d2b66bcf3750abf91daf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae386f742fed7d2b66bcf3750abf91daf">&#9670;&#160;</a></span>WaitCompletion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MMAP::TileBuilder::WaitCompletion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   53</span>    {</div>
<div class="line"><span class="lineno">   54</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/d97/a28306.html#a4e03cb818b108400737e3a54df24945d">m_workerThread</a>.joinable())</div>
<div class="line"><span class="lineno">   55</span>            <a class="code hl_variable" href="../../d1/d97/a28306.html#a4e03cb818b108400737e3a54df24945d">m_workerThread</a>.join();</div>
<div class="line"><span class="lineno">   56</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00139">m_workerThread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00044">~TileBuilder()</a>.</p>

</div>
</div>
<a id="a4c0497cde74883557ec841233376f95c" name="a4c0497cde74883557ec841233376f95c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c0497cde74883557ec841233376f95c">&#9670;&#160;</a></span>WorkerThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MMAP::TileBuilder::WorkerThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  398</span>    {</div>
<div class="line"><span class="lineno">  399</span>        <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  400</span>        {</div>
<div class="line"><span class="lineno">  401</span>            TileInfo tileInfo;</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>            <a class="code hl_variable" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a>-&gt;<a class="code hl_variable" href="../../db/d59/a28310.html#a4016c48626d420fe1eed0aa21b7932a1">_queue</a>.WaitAndPop(tileInfo);</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d1/d97/a28306.html#aa83fbc484835a6d1a4c7bf6201b46639">m_mapBuilder</a>-&gt;<a class="code hl_variable" href="../../db/d59/a28310.html#aa9daeb3044b0997170981788b84c2fae">_cancelationToken</a>)</div>
<div class="line"><span class="lineno">  406</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>            dtNavMesh* navMesh = dtAllocNavMesh();</div>
<div class="line"><span class="lineno">  409</span>            <span class="keywordflow">if</span> (!navMesh-&gt;init(&amp;tileInfo.m_navMeshParams))</div>
<div class="line"><span class="lineno">  410</span>            {</div>
<div class="line"><span class="lineno">  411</span>                printf(<span class="stringliteral">&quot;[Map %04i] Failed creating navmesh for tile %i,%i !\n&quot;</span>, tileInfo.m_mapId, tileInfo.m_tileX, tileInfo.m_tileY);</div>
<div class="line"><span class="lineno">  412</span>                dtFreeNavMesh(navMesh);</div>
<div class="line"><span class="lineno">  413</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  414</span>            }</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>            <a class="code hl_function" href="../../d1/d97/a28306.html#ab7eca8778fd61ecbfe5f07bba0b38857">buildTile</a>(tileInfo.m_mapId, tileInfo.m_tileX, tileInfo.m_tileY, navMesh);</div>
<div class="line"><span class="lineno">  417</span> </div>
<div class="line"><span class="lineno">  418</span>            dtFreeNavMesh(navMesh);</div>
<div class="line"><span class="lineno">  419</span>        }</div>
<div class="line"><span class="lineno">  420</span>    }</div>
<div class="ttc" id="aa28306_html_ab7eca8778fd61ecbfe5f07bba0b38857"><div class="ttname"><a href="../../d1/d97/a28306.html#ab7eca8778fd61ecbfe5f07bba0b38857">MMAP::TileBuilder::buildTile</a></div><div class="ttdeci">void buildTile(uint32 mapID, uint32 tileX, uint32 tileY, dtNavMesh *navMesh)</div><div class="ttdef"><b>Definition:</b> MapBuilder.cpp:461</div></div>
<div class="ttc" id="aa28310_html_a4016c48626d420fe1eed0aa21b7932a1"><div class="ttname"><a href="../../db/d59/a28310.html#a4016c48626d420fe1eed0aa21b7932a1">MMAP::MapBuilder::_queue</a></div><div class="ttdeci">ProducerConsumerQueue&lt; TileInfo &gt; _queue</div><div class="ttdef"><b>Definition:</b> MapBuilder.h:215</div></div>
<div class="ttc" id="aa28310_html_aa9daeb3044b0997170981788b84c2fae"><div class="ttname"><a href="../../db/d59/a28310.html#aa9daeb3044b0997170981788b84c2fae">MMAP::MapBuilder::_cancelationToken</a></div><div class="ttdeci">std::atomic&lt; bool &gt; _cancelationToken</div><div class="ttdef"><b>Definition:</b> MapBuilder.h:216</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00216">MMAP::MapBuilder::_cancelationToken</a>, <a class="el" href="../../#l00215">MMAP::MapBuilder::_queue</a>, <a class="el" href="../../#l00461">buildTile()</a>, <a class="el" href="../../#l00137">m_mapBuilder</a>, <a class="el" href="../../#l00099">MMAP::TileInfo::m_mapId</a>, <a class="el" href="../../#l00102">MMAP::TileInfo::m_navMeshParams</a>, <a class="el" href="../../#l00100">MMAP::TileInfo::m_tileX</a>, and <a class="el" href="../../#l00101">MMAP::TileInfo::m_tileY</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5b5313e24c00e58940067d53be93a3de" name="a5b5313e24c00e58940067d53be93a3de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b5313e24c00e58940067d53be93a3de">&#9670;&#160;</a></span>m_bigBaseUnit</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MMAP::TileBuilder::m_bigBaseUnit</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00589">buildMoveMapTile()</a>.</p>

</div>
</div>
<a id="a4c881a6e6ec66b315f72f84da5c534c2" name="a4c881a6e6ec66b315f72f84da5c534c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c881a6e6ec66b315f72f84da5c534c2">&#9670;&#160;</a></span>m_debugOutput</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MMAP::TileBuilder::m_debugOutput</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00589">buildMoveMapTile()</a>.</p>

</div>
</div>
<a id="aa83fbc484835a6d1a4c7bf6201b46639" name="aa83fbc484835a6d1a4c7bf6201b46639"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa83fbc484835a6d1a4c7bf6201b46639">&#9670;&#160;</a></span>m_mapBuilder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d59/a28310.html">MapBuilder</a>* MMAP::TileBuilder::m_mapBuilder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00589">buildMoveMapTile()</a>, <a class="el" href="../../#l00461">buildTile()</a>, and <a class="el" href="../../#l00397">WorkerThread()</a>.</p>

</div>
</div>
<a id="a160c3ad76146488175c6ae228ad4ef83" name="a160c3ad76146488175c6ae228ad4ef83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a160c3ad76146488175c6ae228ad4ef83">&#9670;&#160;</a></span>m_rcContext</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">rcContext* MMAP::TileBuilder::m_rcContext</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00589">buildMoveMapTile()</a>, <a class="el" href="../../#l00032">TileBuilder()</a>, and <a class="el" href="../../#l00044">~TileBuilder()</a>.</p>

</div>
</div>
<a id="ade1605fb1b68693516c9fb27f94b278d" name="ade1605fb1b68693516c9fb27f94b278d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade1605fb1b68693516c9fb27f94b278d">&#9670;&#160;</a></span>m_terrainBuilder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/df1/a28318.html">TerrainBuilder</a>* MMAP::TileBuilder::m_terrainBuilder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00589">buildMoveMapTile()</a>, <a class="el" href="../../#l00461">buildTile()</a>, <a class="el" href="../../#l00032">TileBuilder()</a>, and <a class="el" href="../../#l00044">~TileBuilder()</a>.</p>

</div>
</div>
<a id="a4e03cb818b108400737e3a54df24945d" name="a4e03cb818b108400737e3a54df24945d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e03cb818b108400737e3a54df24945d">&#9670;&#160;</a></span>m_workerThread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::thread MMAP::TileBuilder::m_workerThread</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00052">WaitCompletion()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/d45/a04693.html">MMAP</a></li><li class="navelem"><a class="el" href="../../d1/d97/a28306.html">TileBuilder</a></li>
    <li class="footer">Generated on Mon Nov 25 2024 20:43:55 for AzerothCore by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
