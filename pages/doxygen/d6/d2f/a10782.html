<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AzerothCore: AuraEffect Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AzerothCore<span id="projectnumber">&#160;3.3.5a</span>
   </div>
   <div id="projectbrief">OpenSource WoW Emulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d6/d2f/a10782.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="../../db/d4a/a10779.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">AuraEffect Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &quot;<a class="el" href="../../">SpellAuraEffects.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9ca1c0fbc142af46a5926b2d87520ee3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a> () const</td></tr>
<tr class="separator:a9ca1c0fbc142af46a5926b2d87520ee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad507745acb9935a3a3cb2c6f35788ef6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d40/a08190.html">ObjectGuid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a> () const</td></tr>
<tr class="separator:ad507745acb9935a3a3cb2c6f35788ef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab288b290ebc452f0b03c7d79be1efc52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d4a/a10794.html">Aura</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a> () const</td></tr>
<tr class="separator:ab288b290ebc452f0b03c7d79be1efc52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05df315be4f02b28353b070bfb2c2fde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a05df315be4f02b28353b070bfb2c2fde">GetTargetList</a> (std::list&lt; <a class="el" href="../../db/df9/a08518.html">Unit</a> * &gt; &amp;targetList) const</td></tr>
<tr class="separator:a05df315be4f02b28353b070bfb2c2fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ea63ccc256382991e0802842f69e44f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3ea63ccc256382991e0802842f69e44f">GetApplicationList</a> (std::list&lt; <a class="el" href="../../de/d50/a10790.html">AuraApplication</a> * &gt; &amp;applicationList) const</td></tr>
<tr class="separator:a3ea63ccc256382991e0802842f69e44f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8500c42594d040d396c20997cbffc69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/da7/a08290.html">SpellModifier</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af8500c42594d040d396c20997cbffc69">GetSpellModifier</a> () const</td></tr>
<tr class="separator:af8500c42594d040d396c20997cbffc69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1004d58d71df9a9b603d217ebca51321"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db6/a10898.html">SpellInfo</a> const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a> () const</td></tr>
<tr class="separator:a1004d58d71df9a9b603d217ebca51321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63863fb01a8cf08251c0b4482be6a20f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a> () const</td></tr>
<tr class="separator:a63863fb01a8cf08251c0b4482be6a20f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c4811ced24cbd9b4afff1c22fbb1b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a> () const</td></tr>
<tr class="separator:ab8c4811ced24cbd9b4afff1c22fbb1b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aced766d86694ac0980a6e4f3cae77b5b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aced766d86694ac0980a6e4f3cae77b5b">GetBaseAmount</a> () const</td></tr>
<tr class="separator:aced766d86694ac0980a6e4f3cae77b5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac14e9e6906344f04904ed7ee866f4475"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ac14e9e6906344f04904ed7ee866f4475">GetDieSides</a> () const</td></tr>
<tr class="separator:ac14e9e6906344f04904ed7ee866f4475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a458f465c0150d16e555d1997d7b09fc2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a458f465c0150d16e555d1997d7b09fc2">GetAmplitude</a> () const</td></tr>
<tr class="separator:a458f465c0150d16e555d1997d7b09fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88fa5605246883e095cd82ebd5d75bef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a88fa5605246883e095cd82ebd5d75bef">GetMiscValueB</a> () const</td></tr>
<tr class="separator:a88fa5605246883e095cd82ebd5d75bef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa183791665930afb43bbac2163b1d8d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a> () const</td></tr>
<tr class="separator:aa183791665930afb43bbac2163b1d8d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a120cf8a45a3c816e4ef588733fa812e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799">AuraType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a> () const</td></tr>
<tr class="separator:a120cf8a45a3c816e4ef588733fa812e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf272bebf373ad3aebc03cce644cbee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a> () const</td></tr>
<tr class="separator:afcf272bebf373ad3aebc03cce644cbee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ea46b2ccefe8e6a25eef466847503aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a6ea46b2ccefe8e6a25eef466847503aa">GetForcedAmount</a> () const</td></tr>
<tr class="separator:a6ea46b2ccefe8e6a25eef466847503aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9790b9f33c52c6d3b830dc6f56f08bf0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a9790b9f33c52c6d3b830dc6f56f08bf0">SetAmount</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount)</td></tr>
<tr class="separator:a9790b9f33c52c6d3b830dc6f56f08bf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f11a0855c476d2f991995a449bcf6ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a6f11a0855c476d2f991995a449bcf6ae">GetPeriodicTimer</a> () const</td></tr>
<tr class="separator:a6f11a0855c476d2f991995a449bcf6ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc3f0fbe56a3974699db0056eed45664"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#abc3f0fbe56a3974699db0056eed45664">SetPeriodicTimer</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> periodicTimer)</td></tr>
<tr class="separator:abc3f0fbe56a3974699db0056eed45664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f8fd3fa296b59cee26c35c433e52f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a66f8fd3fa296b59cee26c35c433e52f2">CalculateAmount</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *caster)</td></tr>
<tr class="separator:a66f8fd3fa296b59cee26c35c433e52f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b0a6694f62bf72c41a1f461f9894581"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a5b0a6694f62bf72c41a1f461f9894581">CalculatePeriodic</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *caster, bool create=false, bool load=false)</td></tr>
<tr class="separator:a5b0a6694f62bf72c41a1f461f9894581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b3261b6c7f5ae45348d0113d24f1ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ab0b3261b6c7f5ae45348d0113d24f1ed">CalculatePeriodicData</a> ()</td></tr>
<tr class="separator:ab0b3261b6c7f5ae45348d0113d24f1ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d248ef37c73049cf4df98b6fc1008fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a5d248ef37c73049cf4df98b6fc1008fe">CalculateSpellMod</a> ()</td></tr>
<tr class="separator:a5d248ef37c73049cf4df98b6fc1008fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07673908af178ffaee01353a6d11a703"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a07673908af178ffaee01353a6d11a703">ChangeAmount</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> newAmount, bool mark=true, bool onStackOrReapply=false)</td></tr>
<tr class="separator:a07673908af178ffaee01353a6d11a703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc38a016285e442a485c9b9bc17a6105"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#adc38a016285e442a485c9b9bc17a6105">RecalculateAmount</a> ()</td></tr>
<tr class="separator:adc38a016285e442a485c9b9bc17a6105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a597dbfc9d3bbe964088f601528126818"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a597dbfc9d3bbe964088f601528126818">RecalculateAmount</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *caster)</td></tr>
<tr class="separator:a597dbfc9d3bbe964088f601528126818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2322ac1aaf1bdfe21733d082603c503c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a2322ac1aaf1bdfe21733d082603c503c">CanBeRecalculated</a> () const</td></tr>
<tr class="separator:a2322ac1aaf1bdfe21733d082603c503c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af93cf68cd8854d93010663353043e4a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af93cf68cd8854d93010663353043e4a2">SetCanBeRecalculated</a> (bool val)</td></tr>
<tr class="separator:af93cf68cd8854d93010663353043e4a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7710e32fe9dc267292c3b15333521560"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a7710e32fe9dc267292c3b15333521560">HandleEffect</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply)</td></tr>
<tr class="separator:a7710e32fe9dc267292c3b15333521560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab9391e1ba5774b3df74dee4f65f707a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aab9391e1ba5774b3df74dee4f65f707a">HandleEffect</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply)</td></tr>
<tr class="separator:aab9391e1ba5774b3df74dee4f65f707a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a7bd5fd001ae6fb2ac680b1d25ef378"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a2a7bd5fd001ae6fb2ac680b1d25ef378">ApplySpellMod</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, bool apply)</td></tr>
<tr class="separator:a2a7bd5fd001ae6fb2ac680b1d25ef378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e57c07b017695d76137b0d81074df1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a1e57c07b017695d76137b0d81074df1e">Update</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> diff, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster)</td></tr>
<tr class="separator:a1e57c07b017695d76137b0d81074df1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afebebaa8f9f33d8354d624561c34b461"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#afebebaa8f9f33d8354d624561c34b461">UpdatePeriodic</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *caster)</td></tr>
<tr class="separator:afebebaa8f9f33d8354d624561c34b461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c28e995bc0e15c692c24154bab9df4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a0c28e995bc0e15c692c24154bab9df4d">GetTickNumber</a> () const</td></tr>
<tr class="separator:a0c28e995bc0e15c692c24154bab9df4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ca18798f448847e77665752fa4a32c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a67ca18798f448847e77665752fa4a32c">GetTotalTicks</a> () const</td></tr>
<tr class="separator:a67ca18798f448847e77665752fa4a32c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc2bdb287922c879abcbab9e8a6f4fab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#acc2bdb287922c879abcbab9e8a6f4fab">ResetPeriodic</a> (bool resetPeriodicTimer=false)</td></tr>
<tr class="separator:acc2bdb287922c879abcbab9e8a6f4fab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc2f180bb606c2d4f11ae239d3293dbf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#afc2f180bb606c2d4f11ae239d3293dbf">ResetTicks</a> ()</td></tr>
<tr class="separator:afc2f180bb606c2d4f11ae239d3293dbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d45367044e196745676c63d61fbd89d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a7d45367044e196745676c63d61fbd89d">IsPeriodic</a> () const</td></tr>
<tr class="separator:a7d45367044e196745676c63d61fbd89d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b39616fd9d0543194c9d6dbec186f55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a8b39616fd9d0543194c9d6dbec186f55">SetPeriodic</a> (bool isPeriodic)</td></tr>
<tr class="separator:a8b39616fd9d0543194c9d6dbec186f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71cd3938d8e16b4f6363e6978077aa8f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a71cd3938d8e16b4f6363e6978077aa8f">IsAffectedOnSpell</a> (<a class="el" href="../../d2/db6/a10898.html">SpellInfo</a> const *spell) const</td></tr>
<tr class="separator:a71cd3938d8e16b4f6363e6978077aa8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac47f45d58ef676d9e242852a80c96b01"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ac47f45d58ef676d9e242852a80c96b01">HasSpellClassMask</a> () const</td></tr>
<tr class="separator:ac47f45d58ef676d9e242852a80c96b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ad6938ac754595a00f0f5a8e2019c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a94ad6938ac754595a00f0f5a8e2019c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af498cc64849486b0001f558da9c5c9ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af498cc64849486b0001f558da9c5c9ef">PeriodicTick</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *aurApp, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:af498cc64849486b0001f558da9c5c9ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a6d0a6fcbf6f5d53633e0d1ab10dd3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ad2a6d0a6fcbf6f5d53633e0d1ab10dd3">HandleProc</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *aurApp, <a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:ad2a6d0a6fcbf6f5d53633e0d1ab10dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac313992b1527bbeddf09365da0d28ebc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ac313992b1527bbeddf09365da0d28ebc">CleanupTriggeredSpells</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target)</td></tr>
<tr class="separator:ac313992b1527bbeddf09365da0d28ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66eb63a01dca27eaa327c72f03710c53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a66eb63a01dca27eaa327c72f03710c53">HandleShapeshiftBoosts</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, bool apply) const</td></tr>
<tr class="separator:a66eb63a01dca27eaa327c72f03710c53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a374ccc25c81de041d10e1ed2b52a238c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a374ccc25c81de041d10e1ed2b52a238c">GetCritChance</a> () const</td></tr>
<tr class="separator:a374ccc25c81de041d10e1ed2b52a238c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5fa45a022f85bfea33ae5faf843cd69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aa5fa45a022f85bfea33ae5faf843cd69">SetCritChance</a> (float crit)</td></tr>
<tr class="separator:aa5fa45a022f85bfea33ae5faf843cd69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7595664aebf24652d3ce95d6bdc18ebe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a7595664aebf24652d3ce95d6bdc18ebe">GetCasterLevel</a> () const</td></tr>
<tr class="separator:a7595664aebf24652d3ce95d6bdc18ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1360fcb79edcab37b0a7b362bb6e7b2a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a1360fcb79edcab37b0a7b362bb6e7b2a">CanApplyResilience</a> () const</td></tr>
<tr class="separator:a1360fcb79edcab37b0a7b362bb6e7b2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81665a31d5e4a49027abd82be607a736"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a81665a31d5e4a49027abd82be607a736">GetPctMods</a> () const</td></tr>
<tr class="separator:a81665a31d5e4a49027abd82be607a736"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36e4e8b964658519a723d668b7ad0bba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a36e4e8b964658519a723d668b7ad0bba">GetAuraGroup</a> () const</td></tr>
<tr class="separator:a36e4e8b964658519a723d668b7ad0bba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a306e4d031a37294a17fb999303b71efe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a306e4d031a37294a17fb999303b71efe">GetOldAmount</a> () const</td></tr>
<tr class="separator:a306e4d031a37294a17fb999303b71efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04d3cc9ebda15ebf8f10650864d0724a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a04d3cc9ebda15ebf8f10650864d0724a">SetOldAmount</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount)</td></tr>
<tr class="separator:a04d3cc9ebda15ebf8f10650864d0724a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a063903240b281f490908845ef93ec68a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a063903240b281f490908845ef93ec68a">SetEnabled</a> (bool enabled)</td></tr>
<tr class="separator:a063903240b281f490908845ef93ec68a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22c04d564645569dc99f91ffc9196da3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a22c04d564645569dc99f91ffc9196da3">HandleNULL</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>, bool) const</td></tr>
<tr class="separator:a22c04d564645569dc99f91ffc9196da3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49b7f5bcb03bab576c46e4db57e0625d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a49b7f5bcb03bab576c46e4db57e0625d">HandleUnused</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>, bool) const</td></tr>
<tr class="separator:a49b7f5bcb03bab576c46e4db57e0625d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54cde21a5e4a3fb27b8a3b4cde5b2428"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a54cde21a5e4a3fb27b8a3b4cde5b2428">HandleNoImmediateEffect</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>, bool) const</td></tr>
<tr class="separator:a54cde21a5e4a3fb27b8a3b4cde5b2428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fff389a772b3a1800829b007fd09ad7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a4fff389a772b3a1800829b007fd09ad7">HandleModInvisibilityDetect</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a4fff389a772b3a1800829b007fd09ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff76927ae90362081a6ca6c8c77004f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aff76927ae90362081a6ca6c8c77004f6">HandleModInvisibility</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:aff76927ae90362081a6ca6c8c77004f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72fd00fd9b6b1f1d19e8f5e3d62c6ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ae72fd00fd9b6b1f1d19e8f5e3d62c6ee">HandleModStealth</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ae72fd00fd9b6b1f1d19e8f5e3d62c6ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e7dc7c97738c4404913cab0cae09027"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a9e7dc7c97738c4404913cab0cae09027">HandleModStealthLevel</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a9e7dc7c97738c4404913cab0cae09027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa95ea36217eb2e120bb22fa8fe9c82e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aa95ea36217eb2e120bb22fa8fe9c82e2">HandleModStealthDetect</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:aa95ea36217eb2e120bb22fa8fe9c82e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34bf10f56f62833415339768d825a83f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a34bf10f56f62833415339768d825a83f">HandleDetectAmore</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a34bf10f56f62833415339768d825a83f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40c4c923ea3038d2285ab82992e87dc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a40c4c923ea3038d2285ab82992e87dc8">HandleSpiritOfRedemption</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a40c4c923ea3038d2285ab82992e87dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81f9974032b40d56489fabe89641f81d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a81f9974032b40d56489fabe89641f81d">HandleAuraGhost</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a81f9974032b40d56489fabe89641f81d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ae88f1abefd9f50e42dce8e928b1c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ae4ae88f1abefd9f50e42dce8e928b1c9">HandlePhase</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ae4ae88f1abefd9f50e42dce8e928b1c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05a18e948bfca43240aa65cb7872c909"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a05a18e948bfca43240aa65cb7872c909">HandleAuraModShapeshift</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a05a18e948bfca43240aa65cb7872c909"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aeb4f5c3a5130afb5df2d83667b1877"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a8aeb4f5c3a5130afb5df2d83667b1877">HandleAuraTransform</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a8aeb4f5c3a5130afb5df2d83667b1877"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad290467c397f70ff3ca4c24961a05fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aad290467c397f70ff3ca4c24961a05fb">HandleAuraModScale</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:aad290467c397f70ff3ca4c24961a05fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d873a20f6269d508fee14b54f8190cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a1d873a20f6269d508fee14b54f8190cb">HandleAuraCloneCaster</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a1d873a20f6269d508fee14b54f8190cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4c3dba7effbc5735869a7a49ca39005"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ab4c3dba7effbc5735869a7a49ca39005">HandleFeignDeath</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ab4c3dba7effbc5735869a7a49ca39005"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a909a2bcd0d8036c938a7a5583b4ff432"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a909a2bcd0d8036c938a7a5583b4ff432">HandleModUnattackable</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a909a2bcd0d8036c938a7a5583b4ff432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c25ece7266e707b626dbad6de6be66e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a8c25ece7266e707b626dbad6de6be66e">HandleAuraModDisarm</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a8c25ece7266e707b626dbad6de6be66e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca9f7031c1091b23080c4c8d827fa0e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aca9f7031c1091b23080c4c8d827fa0e3">HandleAuraModSilence</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:aca9f7031c1091b23080c4c8d827fa0e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af48521ad2be2b43241c6bc8ca6274bd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af48521ad2be2b43241c6bc8ca6274bd6">HandleAuraModPacify</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:af48521ad2be2b43241c6bc8ca6274bd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3645d469d5dfd1240fb9f9af3a83920"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ae3645d469d5dfd1240fb9f9af3a83920">HandleAuraModPacifyAndSilence</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ae3645d469d5dfd1240fb9f9af3a83920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8229a29c8125b2558b1a875ae3deace8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a8229a29c8125b2558b1a875ae3deace8">HandleAuraAllowOnlyAbility</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a8229a29c8125b2558b1a875ae3deace8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1432141df83fc575b03313f9def132ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a1432141df83fc575b03313f9def132ad">HandleAuraTrackResources</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a1432141df83fc575b03313f9def132ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5eeb3fd5b51cc797c21c374150a7f41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af5eeb3fd5b51cc797c21c374150a7f41">HandleAuraTrackCreatures</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:af5eeb3fd5b51cc797c21c374150a7f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a901e04d2d5c6418bbfeb5e7820fdba30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a901e04d2d5c6418bbfeb5e7820fdba30">HandleAuraTrackStealthed</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a901e04d2d5c6418bbfeb5e7820fdba30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3f2b2299c080928ff7211a98a6237b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ab3f2b2299c080928ff7211a98a6237b5">HandleAuraModStalked</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ab3f2b2299c080928ff7211a98a6237b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add3e6484132f5de2d6bfe76c0f2b21ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#add3e6484132f5de2d6bfe76c0f2b21ae">HandleAuraUntrackable</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:add3e6484132f5de2d6bfe76c0f2b21ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e9174d203a34abc924e9a58efb2473c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3e9174d203a34abc924e9a58efb2473c">HandleAuraModPetTalentsPoints</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a3e9174d203a34abc924e9a58efb2473c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a0bdae4c5cae40a812b7cf5b00f4233"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a6a0bdae4c5cae40a812b7cf5b00f4233">HandleAuraModSkill</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a6a0bdae4c5cae40a812b7cf5b00f4233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e6d66aa4247cf56b528a1fe2c2eae37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a5e6d66aa4247cf56b528a1fe2c2eae37">HandleAuraMounted</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a5e6d66aa4247cf56b528a1fe2c2eae37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a696f3f2b219427697a36c4d3dd7990a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a696f3f2b219427697a36c4d3dd7990a5">HandleAuraAllowFlight</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a696f3f2b219427697a36c4d3dd7990a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5a0845c419937a8d5450876dff3224c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af5a0845c419937a8d5450876dff3224c">HandleAuraWaterWalk</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:af5a0845c419937a8d5450876dff3224c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fee7fad1f1f304000184269e5b94c5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a1fee7fad1f1f304000184269e5b94c5c">HandleAuraFeatherFall</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a1fee7fad1f1f304000184269e5b94c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c56dc7da49ce169af1d32d111b2a57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ae7c56dc7da49ce169af1d32d111b2a57">HandleAuraHover</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ae7c56dc7da49ce169af1d32d111b2a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e6dfd8b1d19f6f3ab0d60f65e4427a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ae0e6dfd8b1d19f6f3ab0d60f65e4427a">HandleWaterBreathing</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ae0e6dfd8b1d19f6f3ab0d60f65e4427a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9645e47c14c56ae888807b9027e9c34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ad9645e47c14c56ae888807b9027e9c34">HandleForceMoveForward</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ad9645e47c14c56ae888807b9027e9c34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17a750190862b4a8b0ab247e66af3acf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a17a750190862b4a8b0ab247e66af3acf">HandleModThreat</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a17a750190862b4a8b0ab247e66af3acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56f6eebde660cfadaeaccaf8ebc4b6b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a56f6eebde660cfadaeaccaf8ebc4b6b9">HandleAuraModTotalThreat</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a56f6eebde660cfadaeaccaf8ebc4b6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4230057d8bb2cc490b5868109790b811"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a4230057d8bb2cc490b5868109790b811">HandleModTaunt</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a4230057d8bb2cc490b5868109790b811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5aba9aa102d0402b423ce57a616bb0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aa5aba9aa102d0402b423ce57a616bb0c">HandleModConfuse</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:aa5aba9aa102d0402b423ce57a616bb0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26498e695742b5689c35f806af38ae8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a26498e695742b5689c35f806af38ae8a">HandleModFear</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a26498e695742b5689c35f806af38ae8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09506ef85197dd61fba8127fa65d8925"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a09506ef85197dd61fba8127fa65d8925">HandleAuraModStun</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a09506ef85197dd61fba8127fa65d8925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab21864f1999f7797e2287c722c6f0f83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ab21864f1999f7797e2287c722c6f0f83">HandleAuraModRoot</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ab21864f1999f7797e2287c722c6f0f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03f0b850af3051c8815fba75d502c658"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a03f0b850af3051c8815fba75d502c658">HandlePreventFleeing</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a03f0b850af3051c8815fba75d502c658"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affc17fba71418fb11e2cffbb0b1710b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#affc17fba71418fb11e2cffbb0b1710b6">HandleModPossess</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:affc17fba71418fb11e2cffbb0b1710b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ae2a8ce1a85f6a846a39a08566c7567"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3ae2a8ce1a85f6a846a39a08566c7567">HandleModPossessPet</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a3ae2a8ce1a85f6a846a39a08566c7567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3da622f21fc4e175e6948db55b60511"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ac3da622f21fc4e175e6948db55b60511">HandleModCharm</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ac3da622f21fc4e175e6948db55b60511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9939adabdadcf853bbabb848afb5e8b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a9939adabdadcf853bbabb848afb5e8b4">HandleCharmConvert</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a9939adabdadcf853bbabb848afb5e8b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65d82e7ba5aecd7018f082a7580fc491"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a65d82e7ba5aecd7018f082a7580fc491">HandleAuraControlVehicle</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a65d82e7ba5aecd7018f082a7580fc491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea11ca24fdbdb92e653f59bfd181ff0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aaea11ca24fdbdb92e653f59bfd181ff0">HandleAuraModIncreaseSpeed</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:aaea11ca24fdbdb92e653f59bfd181ff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4390a014a9aa70f4d90303c335a61b7c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a4390a014a9aa70f4d90303c335a61b7c">HandleAuraModIncreaseMountedSpeed</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a4390a014a9aa70f4d90303c335a61b7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af27fe9a06b1ec4e7feb0249926d69dba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af27fe9a06b1ec4e7feb0249926d69dba">HandleAuraModIncreaseFlightSpeed</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:af27fe9a06b1ec4e7feb0249926d69dba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5fb8fd52b54a9fc55491d48a62df4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a9b5fb8fd52b54a9fc55491d48a62df4f">HandleAuraModIncreaseSwimSpeed</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a9b5fb8fd52b54a9fc55491d48a62df4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00cc9725cd708174a15de260fef84bda"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a00cc9725cd708174a15de260fef84bda">HandleAuraModDecreaseSpeed</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a00cc9725cd708174a15de260fef84bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1672988a44e4d7f5d73c561892a9c72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ae1672988a44e4d7f5d73c561892a9c72">HandleAuraModUseNormalSpeed</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ae1672988a44e4d7f5d73c561892a9c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e98eced29d22a033eda88c17bc75ac5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a7e98eced29d22a033eda88c17bc75ac5">HandleModStateImmunityMask</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a7e98eced29d22a033eda88c17bc75ac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5aa79360f973fbe4026586ef2eeda03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ae5aa79360f973fbe4026586ef2eeda03">HandleModMechanicImmunity</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ae5aa79360f973fbe4026586ef2eeda03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a179b35bc601d9b36bc8be2961c0af054"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a179b35bc601d9b36bc8be2961c0af054">HandleAuraModEffectImmunity</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a179b35bc601d9b36bc8be2961c0af054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8896bc940fa9cfe2a0cdea0cc27465bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a8896bc940fa9cfe2a0cdea0cc27465bc">HandleAuraModStateImmunity</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a8896bc940fa9cfe2a0cdea0cc27465bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45ef0e9663bb6e5c2fe8d1d90ac670a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a45ef0e9663bb6e5c2fe8d1d90ac670a1">HandleAuraModSchoolImmunity</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a45ef0e9663bb6e5c2fe8d1d90ac670a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dd65a07ecb6f2cfdecbed6a15c8ef08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3dd65a07ecb6f2cfdecbed6a15c8ef08">HandleAuraModDmgImmunity</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a3dd65a07ecb6f2cfdecbed6a15c8ef08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c107b074aa0e5e8cfe63d6c73c14803"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a0c107b074aa0e5e8cfe63d6c73c14803">HandleAuraModDispelImmunity</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a0c107b074aa0e5e8cfe63d6c73c14803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3412eb30c1a4bd66b8cca040fc9ef6d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3412eb30c1a4bd66b8cca040fc9ef6d1">HandleAuraModResistanceExclusive</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a3412eb30c1a4bd66b8cca040fc9ef6d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf85e6ba3ad0ec021f53683452002782"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#adf85e6ba3ad0ec021f53683452002782">HandleAuraModResistance</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:adf85e6ba3ad0ec021f53683452002782"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acedcf3811fd678ac5192d68fd34aa176"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#acedcf3811fd678ac5192d68fd34aa176">HandleAuraModBaseResistancePCT</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:acedcf3811fd678ac5192d68fd34aa176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2accb6290e6f7ee84c9588d641898d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ae2accb6290e6f7ee84c9588d641898d4">HandleModResistancePercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ae2accb6290e6f7ee84c9588d641898d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6663b6902d2e2a6a46bf3e14a35871d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a6663b6902d2e2a6a46bf3e14a35871d8">HandleModBaseResistance</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a6663b6902d2e2a6a46bf3e14a35871d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f294bf8036e7a0c71b83950da2b3eff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a9f294bf8036e7a0c71b83950da2b3eff">HandleModTargetResistance</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a9f294bf8036e7a0c71b83950da2b3eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7e8903a35da1f0660f5ccf53eb1e182"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ad7e8903a35da1f0660f5ccf53eb1e182">HandleAuraModStat</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ad7e8903a35da1f0660f5ccf53eb1e182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a844dcfe2b6e78cc40b8b9996672b4f07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a844dcfe2b6e78cc40b8b9996672b4f07">HandleModPercentStat</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a844dcfe2b6e78cc40b8b9996672b4f07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfe708f78779cd14750387b72c516b33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#abfe708f78779cd14750387b72c516b33">HandleModSpellDamagePercentFromStat</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:abfe708f78779cd14750387b72c516b33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0ade8db29e053f3dd175102766ec745"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ad0ade8db29e053f3dd175102766ec745">HandleModSpellHealingPercentFromStat</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ad0ade8db29e053f3dd175102766ec745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad281398afbdfcf17b271deccfda26b01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ad281398afbdfcf17b271deccfda26b01">HandleModSpellDamagePercentFromAttackPower</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ad281398afbdfcf17b271deccfda26b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada88a03111d74054c088f900f619adf1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ada88a03111d74054c088f900f619adf1">HandleModSpellHealingPercentFromAttackPower</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ada88a03111d74054c088f900f619adf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09dda5a0af27ab34292b312fd20203bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a09dda5a0af27ab34292b312fd20203bb">HandleModHealingDone</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a09dda5a0af27ab34292b312fd20203bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f7dcbeef11bbb6af9fd5d2fb52af3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aa6f7dcbeef11bbb6af9fd5d2fb52af3c">HandleModTotalPercentStat</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:aa6f7dcbeef11bbb6af9fd5d2fb52af3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a501803cfbe4e5b568eb98e32b2c26186"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a501803cfbe4e5b568eb98e32b2c26186">HandleAuraModResistenceOfStatPercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a501803cfbe4e5b568eb98e32b2c26186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88fe5e60d633f96c842170fcaed8c7cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a88fe5e60d633f96c842170fcaed8c7cf">HandleAuraModExpertise</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a88fe5e60d633f96c842170fcaed8c7cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f39fbf45d91d07a1835fb9b9e43f710"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a4f39fbf45d91d07a1835fb9b9e43f710">HandleModPowerRegen</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a4f39fbf45d91d07a1835fb9b9e43f710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af38cb2bbca5005a77d57930e8a9fbb21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af38cb2bbca5005a77d57930e8a9fbb21">HandleModPowerRegenPCT</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:af38cb2bbca5005a77d57930e8a9fbb21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accc046bd1b9adb7c8b60be792f70e814"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#accc046bd1b9adb7c8b60be792f70e814">HandleModManaRegen</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:accc046bd1b9adb7c8b60be792f70e814"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43b0158e5c699baf571fa2a064bf70c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a43b0158e5c699baf571fa2a064bf70c9">HandleAuraModIncreaseHealth</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a43b0158e5c699baf571fa2a064bf70c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bea1efab99a42212d85ea5c39921950"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a9bea1efab99a42212d85ea5c39921950">HandleAuraModIncreaseMaxHealth</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a9bea1efab99a42212d85ea5c39921950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab17ae5878087d1047e5163db7e95564b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ab17ae5878087d1047e5163db7e95564b">HandleAuraModIncreaseEnergy</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ab17ae5878087d1047e5163db7e95564b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc68f3158a932f36315f4348dba5914"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#afbc68f3158a932f36315f4348dba5914">HandleAuraModIncreaseEnergyPercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:afbc68f3158a932f36315f4348dba5914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3286f89b5415bd21a4831285dab7362f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3286f89b5415bd21a4831285dab7362f">HandleAuraModIncreaseHealthPercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a3286f89b5415bd21a4831285dab7362f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58e57c5d8044c555227fffca09a1c1c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a58e57c5d8044c555227fffca09a1c1c5">HandleAuraIncreaseBaseHealthPercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a58e57c5d8044c555227fffca09a1c1c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd6a595444acecc12c84820cc3f86865"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#abd6a595444acecc12c84820cc3f86865">HandleAuraModParryPercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:abd6a595444acecc12c84820cc3f86865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b46362827d3489a5f34a9d34efa489f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3b46362827d3489a5f34a9d34efa489f">HandleAuraModDodgePercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a3b46362827d3489a5f34a9d34efa489f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a037803186b7a5a458d1b7d451fc57d2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a037803186b7a5a458d1b7d451fc57d2b">HandleAuraModBlockPercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a037803186b7a5a458d1b7d451fc57d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbf214d5d4e3a9926d7809234f979ca4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#adbf214d5d4e3a9926d7809234f979ca4">HandleAuraModRegenInterrupt</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:adbf214d5d4e3a9926d7809234f979ca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a564bd992035746f2702e9cb284d789a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a564bd992035746f2702e9cb284d789a6">HandleAuraModWeaponCritPercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a564bd992035746f2702e9cb284d789a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa9f84f40fa41ddee3d6fb22c8bd3ac4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#afa9f84f40fa41ddee3d6fb22c8bd3ac4">HandleModHitChance</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:afa9f84f40fa41ddee3d6fb22c8bd3ac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad16e337a78c3bd2df90a006745bb0ccb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ad16e337a78c3bd2df90a006745bb0ccb">HandleModSpellHitChance</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ad16e337a78c3bd2df90a006745bb0ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa978582e776583063a2a82af4c658c35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aa978582e776583063a2a82af4c658c35">HandleModSpellCritChance</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:aa978582e776583063a2a82af4c658c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92d0072fcf334ace5a8a29d5a58616e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a92d0072fcf334ace5a8a29d5a58616e0">HandleModSpellCritChanceShool</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a92d0072fcf334ace5a8a29d5a58616e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d61f76c6791e1a34f20b87efb425bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af7d61f76c6791e1a34f20b87efb425bc">HandleAuraModCritPct</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:af7d61f76c6791e1a34f20b87efb425bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bc0fe3e6f5ce7ec0c62d3f2e25ebfb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a9bc0fe3e6f5ce7ec0c62d3f2e25ebfb9">HandleModCastingSpeed</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a9bc0fe3e6f5ce7ec0c62d3f2e25ebfb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90f9b0656c55d016c70c02936dd73c9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a90f9b0656c55d016c70c02936dd73c9b">HandleModMeleeRangedSpeedPct</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a90f9b0656c55d016c70c02936dd73c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2578a0c8a91021e22ae67f2c0ff35331"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a2578a0c8a91021e22ae67f2c0ff35331">HandleModCombatSpeedPct</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a2578a0c8a91021e22ae67f2c0ff35331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af470ebc0cd402437abab85c0203d0396"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af470ebc0cd402437abab85c0203d0396">HandleModAttackSpeed</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:af470ebc0cd402437abab85c0203d0396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f86518a11aae0590304353a73b8d40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a45f86518a11aae0590304353a73b8d40">HandleModMeleeSpeedPct</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a45f86518a11aae0590304353a73b8d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63f78f6483abbd00e0f55ef8ea938bbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a63f78f6483abbd00e0f55ef8ea938bbe">HandleAuraModRangedHaste</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a63f78f6483abbd00e0f55ef8ea938bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a964b95da784412c60c9310227a614549"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a964b95da784412c60c9310227a614549">HandleRangedAmmoHaste</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a964b95da784412c60c9310227a614549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5818f07310f7386ca2e2ce8a5fbb594b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a5818f07310f7386ca2e2ce8a5fbb594b">HandleModRating</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a5818f07310f7386ca2e2ce8a5fbb594b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b0a7eb3419f1ef986ae136c9248e173"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a0b0a7eb3419f1ef986ae136c9248e173">HandleModRatingFromStat</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a0b0a7eb3419f1ef986ae136c9248e173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac585c3cd6f893f888463d8de7fbc4b2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ac585c3cd6f893f888463d8de7fbc4b2f">HandleAuraModAttackPower</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ac585c3cd6f893f888463d8de7fbc4b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3911ef5ef63aafac04aaae3a389fb3c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3911ef5ef63aafac04aaae3a389fb3c9">HandleAuraModRangedAttackPower</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a3911ef5ef63aafac04aaae3a389fb3c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40615fe10569d7caed175b71339ae1cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a40615fe10569d7caed175b71339ae1cf">HandleAuraModAttackPowerPercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a40615fe10569d7caed175b71339ae1cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280de8cb7a520bb9b216b9735a2dca32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a280de8cb7a520bb9b216b9735a2dca32">HandleAuraModRangedAttackPowerPercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a280de8cb7a520bb9b216b9735a2dca32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a3ec4c7f1ca6b978189280b4f2424a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a1a3ec4c7f1ca6b978189280b4f2424a7">HandleAuraModRangedAttackPowerOfStatPercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a1a3ec4c7f1ca6b978189280b4f2424a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a3d61e37b7ed3cee1fd37d41d6ba59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ad2a3d61e37b7ed3cee1fd37d41d6ba59">HandleAuraModAttackPowerOfStatPercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ad2a3d61e37b7ed3cee1fd37d41d6ba59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab17b1ef9a6932ad13b43b0ed377e044"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aab17b1ef9a6932ad13b43b0ed377e044">HandleAuraModAttackPowerOfArmor</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:aab17b1ef9a6932ad13b43b0ed377e044"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee0e71dbbb4e685b4e8db327e3b639b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3ee0e71dbbb4e685b4e8db327e3b639b">HandleModDamageDone</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a3ee0e71dbbb4e685b4e8db327e3b639b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1681732afa7c5a767eb0ba2264f4958c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a1681732afa7c5a767eb0ba2264f4958c">HandleModDamagePercentDone</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a1681732afa7c5a767eb0ba2264f4958c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d79983093faf3f9c63c9f1cc65b0155"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a8d79983093faf3f9c63c9f1cc65b0155">HandleModOffhandDamagePercent</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a8d79983093faf3f9c63c9f1cc65b0155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3cf8ea3adbe4a9b6756c1759d515528"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ac3cf8ea3adbe4a9b6756c1759d515528">HandleShieldBlockValue</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ac3cf8ea3adbe4a9b6756c1759d515528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a030d85dec5fb20b11ef19206f6694c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a1a030d85dec5fb20b11ef19206f6694c">HandleModPowerCostPCT</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a1a030d85dec5fb20b11ef19206f6694c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69e8e0ce986f2ada7ccaf38bef2ecf97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a69e8e0ce986f2ada7ccaf38bef2ecf97">HandleModPowerCost</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a69e8e0ce986f2ada7ccaf38bef2ecf97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45af9668ac3271c2f5a924872d0f1614"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a45af9668ac3271c2f5a924872d0f1614">HandleArenaPreparation</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a45af9668ac3271c2f5a924872d0f1614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9558df628dc0b414dae883571ead3ee9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a9558df628dc0b414dae883571ead3ee9">HandleNoReagentUseAura</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a9558df628dc0b414dae883571ead3ee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ae0e56cbc82f9dde5927d069fad34e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a0ae0e56cbc82f9dde5927d069fad34e2">HandleAuraRetainComboPoints</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a0ae0e56cbc82f9dde5927d069fad34e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab48ade74cc824d2ae0e326948c867ece"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ab48ade74cc824d2ae0e326948c867ece">HandleAuraDummy</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ab48ade74cc824d2ae0e326948c867ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab144ae6a14c8fd95ff6b868b64cd7c12"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ab144ae6a14c8fd95ff6b868b64cd7c12">HandleChannelDeathItem</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ab144ae6a14c8fd95ff6b868b64cd7c12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeed00e5103faf76fec0eb8f88b8d071"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aeeed00e5103faf76fec0eb8f88b8d071">HandleBindSight</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:aeeed00e5103faf76fec0eb8f88b8d071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a537d6b3b15ea0530f088c4ba8e1f4c57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a537d6b3b15ea0530f088c4ba8e1f4c57">HandleFarSight</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a537d6b3b15ea0530f088c4ba8e1f4c57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b1c8a621c824d3d9e5021c9503193f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3b1c8a621c824d3d9e5021c9503193f6">HandleForceReaction</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a3b1c8a621c824d3d9e5021c9503193f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cfa8fba22df7460cb11c768e8e6e3ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a1cfa8fba22df7460cb11c768e8e6e3ba">HandleAuraEmpathy</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a1cfa8fba22df7460cb11c768e8e6e3ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26906e499e64074d01966137f9608093"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a26906e499e64074d01966137f9608093">HandleAuraModFaction</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a26906e499e64074d01966137f9608093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b987b958ac0ce5653d44029a31ea59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a95b987b958ac0ce5653d44029a31ea59">HandleComprehendLanguage</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a95b987b958ac0ce5653d44029a31ea59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf478059af657f8126f4979f94b60159"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aaf478059af657f8126f4979f94b60159">HandleAuraConvertRune</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:aaf478059af657f8126f4979f94b60159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af91c6e2c16b5038cadfed381022dad10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af91c6e2c16b5038cadfed381022dad10">HandleAuraLinked</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:af91c6e2c16b5038cadfed381022dad10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5ad5d0e3406e96a0f5e5f58d2c133ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ae5ad5d0e3406e96a0f5e5f58d2c133ce">HandleAuraOpenStable</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:ae5ad5d0e3406e96a0f5e5f58d2c133ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a83116c26a189ee818608f1c1be2a9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a6a83116c26a189ee818608f1c1be2a9d">HandleAuraModFakeInebriation</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a6a83116c26a189ee818608f1c1be2a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af572ebb2a04d65ef7f1544640b5b51ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af572ebb2a04d65ef7f1544640b5b51ab">HandleAuraOverrideSpells</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:af572ebb2a04d65ef7f1544640b5b51ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d687bfbacc779c97d18c866a5544bfe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a2d687bfbacc779c97d18c866a5544bfe">HandleAuraSetVehicle</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a2d687bfbacc779c97d18c866a5544bfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683b73bc2152dcc1cf895731abccdd11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a683b73bc2152dcc1cf895731abccdd11">HandlePreventResurrection</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *aurApp, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> mode, bool apply) const</td></tr>
<tr class="separator:a683b73bc2152dcc1cf895731abccdd11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61bdb07de2581972c79e3c3e46ecdbbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a61bdb07de2581972c79e3c3e46ecdbbe">HandlePeriodicDummyAuraTick</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a61bdb07de2581972c79e3c3e46ecdbbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545377a3f6c71f42c3897206a2dc0919"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a545377a3f6c71f42c3897206a2dc0919">HandlePeriodicTriggerSpellAuraTick</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a545377a3f6c71f42c3897206a2dc0919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af605dc2f9174968cb77b9d3cc50a1fb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af605dc2f9174968cb77b9d3cc50a1fb4">HandlePeriodicTriggerSpellWithValueAuraTick</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:af605dc2f9174968cb77b9d3cc50a1fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f993bd36f255362d3801c708509a868"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a8f993bd36f255362d3801c708509a868">HandlePeriodicDamageAurasTick</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a8f993bd36f255362d3801c708509a868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a757600361597c84413041214cd39dc22"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a757600361597c84413041214cd39dc22">HandlePeriodicHealthLeechAuraTick</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a757600361597c84413041214cd39dc22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35cc3b13cde9e1cfbdfee49d6bdcee57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a35cc3b13cde9e1cfbdfee49d6bdcee57">HandlePeriodicHealthFunnelAuraTick</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a35cc3b13cde9e1cfbdfee49d6bdcee57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c497a3c954b0bade630ac996c440fa3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3c497a3c954b0bade630ac996c440fa3">HandlePeriodicHealAurasTick</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a3c497a3c954b0bade630ac996c440fa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20e3450e5f8299f76561cbe747d12c88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a20e3450e5f8299f76561cbe747d12c88">HandlePeriodicManaLeechAuraTick</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a20e3450e5f8299f76561cbe747d12c88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d4f436ab67e728f66577e043143f32d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a2d4f436ab67e728f66577e043143f32d">HandleObsModPowerAuraTick</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a2d4f436ab67e728f66577e043143f32d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cee5e983225342908700110067f258a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a4cee5e983225342908700110067f258a">HandlePeriodicEnergizeAuraTick</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a4cee5e983225342908700110067f258a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e5699c43a4f49c32daa9c1b6df068ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a0e5699c43a4f49c32daa9c1b6df068ce">HandlePeriodicPowerBurnAuraTick</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> *target, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster) const</td></tr>
<tr class="separator:a0e5699c43a4f49c32daa9c1b6df068ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9b15db701d1d804b52a425b23c1e154"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af9b15db701d1d804b52a425b23c1e154">HandleProcTriggerSpellAuraProc</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *aurApp, <a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:af9b15db701d1d804b52a425b23c1e154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8457bab110c3818d1506a3b5d767a411"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a8457bab110c3818d1506a3b5d767a411">HandleProcTriggerSpellWithValueAuraProc</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *aurApp, <a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:a8457bab110c3818d1506a3b5d767a411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf1a9e6c5d480b4a72634fd4d489c81f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#abf1a9e6c5d480b4a72634fd4d489c81f">HandleProcTriggerDamageAuraProc</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *aurApp, <a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:abf1a9e6c5d480b4a72634fd4d489c81f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71194f9e306aa0a2f477d59f9f0a3b97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a71194f9e306aa0a2f477d59f9f0a3b97">HandleRaidProcFromChargeAuraProc</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *aurApp, <a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:a71194f9e306aa0a2f477d59f9f0a3b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49e3ca52e3aece117127e6712d2069f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ac49e3ca52e3aece117127e6712d2069f">HandleRaidProcFromChargeWithValueAuraProc</a> (<a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *aurApp, <a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;eventInfo)</td></tr>
<tr class="separator:ac49e3ca52e3aece117127e6712d2069f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aea6f4b8bd401df6979e6df65f3fd841e"><td class="memItemLeft" align="right" valign="top">friend&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aea6f4b8bd401df6979e6df65f3fd841e">Aura::~Aura</a> ()</td></tr>
<tr class="separator:aea6f4b8bd401df6979e6df65f3fd841e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a24adc63d2e5dfd848f22ddd490525"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ad2a24adc63d2e5dfd848f22ddd490525">~AuraEffect</a> ()</td></tr>
<tr class="separator:ad2a24adc63d2e5dfd848f22ddd490525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7778b120e414f28e95e71ce96660149e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a7778b120e414f28e95e71ce96660149e">AuraEffect</a> (<a class="el" href="../../df/d4a/a10794.html">Aura</a> *base, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effIndex, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *baseAmount, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster)</td></tr>
<tr class="separator:a7778b120e414f28e95e71ce96660149e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43dd810a38d13af5ffee45dc4f7d5aac"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a43dd810a38d13af5ffee45dc4f7d5aac">CalcPeriodicCritChance</a> (<a class="el" href="../../db/df9/a08518.html">Unit</a> const *caster, <a class="el" href="../../db/df9/a08518.html">Unit</a> const *target) const</td></tr>
<tr class="separator:a43dd810a38d13af5ffee45dc4f7d5aac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aff934af743b5031d558ffc9a4b55d6de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d4a/a10794.html">Aura</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aff934af743b5031d558ffc9a4b55d6de">m_base</a></td></tr>
<tr class="separator:aff934af743b5031d558ffc9a4b55d6de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4df84854746b8de74f64e2abfec76c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db6/a10898.html">SpellInfo</a> const  *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a></td></tr>
<tr class="separator:ac4df84854746b8de74f64e2abfec76c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba194c9071a1b0551768b397abc9ebeb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aba194c9071a1b0551768b397abc9ebeb">m_baseAmount</a></td></tr>
<tr class="separator:aba194c9071a1b0551768b397abc9ebeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea3300db680ab47876dbc7ae45c08d18"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#aea3300db680ab47876dbc7ae45c08d18">m_dieSides</a></td></tr>
<tr class="separator:aea3300db680ab47876dbc7ae45c08d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4745b52e662a6dd92ec3b566ef7ca297"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a4745b52e662a6dd92ec3b566ef7ca297">m_applyResilience</a></td></tr>
<tr class="separator:a4745b52e662a6dd92ec3b566ef7ca297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f9c2c6496be1ffad249825f86074def"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a3f9c2c6496be1ffad249825f86074def">m_casterLevel</a></td></tr>
<tr class="separator:a3f9c2c6496be1ffad249825f86074def"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f01908f09b465b6770f18c13e459f17"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a></td></tr>
<tr class="separator:a7f01908f09b465b6770f18c13e459f17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7eff5d08a22189f99f66695367ae250"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#af7eff5d08a22189f99f66695367ae250">m_critChance</a></td></tr>
<tr class="separator:af7eff5d08a22189f99f66695367ae250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e00da47192a4d1c9139b037d07d565b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a8e00da47192a4d1c9139b037d07d565b">m_pctMods</a></td></tr>
<tr class="separator:a8e00da47192a4d1c9139b037d07d565b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada78fc2515cb55583bf83667e475c7fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ada78fc2515cb55583bf83667e475c7fe">m_auraGroup</a></td></tr>
<tr class="separator:ada78fc2515cb55583bf83667e475c7fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fa9f61c77274c75e6f3d8222142ab4e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a5fa9f61c77274c75e6f3d8222142ab4e">m_oldAmount</a></td></tr>
<tr class="separator:a5fa9f61c77274c75e6f3d8222142ab4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acec00491f0ec7f7c68d6a25d85b5b53f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#acec00491f0ec7f7c68d6a25d85b5b53f">m_isAuraEnabled</a></td></tr>
<tr class="separator:acec00491f0ec7f7c68d6a25d85b5b53f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256fe55e1c441e5dcc7c33abb4222e69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d67/a10822.html">ChannelTargetData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a></td></tr>
<tr class="separator:a256fe55e1c441e5dcc7c33abb4222e69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25ce25c5ff12969bd62d0547c48b5753"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/da7/a08290.html">SpellModifier</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a></td></tr>
<tr class="separator:a25ce25c5ff12969bd62d0547c48b5753"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d9b475cbf04d8597953802e1accc938"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a></td></tr>
<tr class="separator:a2d9b475cbf04d8597953802e1accc938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b7657d41ca8a463e12dca94fffdddbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a></td></tr>
<tr class="separator:a9b7657d41ca8a463e12dca94fffdddbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c7fb50eac3482a162cbbacd64f1625"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a></td></tr>
<tr class="separator:ab8c7fb50eac3482a162cbbacd64f1625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a355d61580194626ea54b22ff9a3ac96a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a></td></tr>
<tr class="separator:a355d61580194626ea54b22ff9a3ac96a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a334378fa304471045fd273f4d845c8dd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a></td></tr>
<tr class="separator:a334378fa304471045fd273f4d845c8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6931b2764b92bc6c2a20b092c011f0a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a></td></tr>
<tr class="separator:ad6931b2764b92bc6c2a20b092c011f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a80ab74fb057cffbba01f0b5bd038ccf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a80ab74fb057cffbba01f0b5bd038ccf2">Aura::_InitEffects</a> (<a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effMask, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *baseAmount)</td></tr>
<tr class="separator:a80ab74fb057cffbba01f0b5bd038ccf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a851e18dcd4b806db1cd3843a7814d15a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d4a/a10794.html">Aura</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2f/a10782.html#a851e18dcd4b806db1cd3843a7814d15a">Unit::_TryStackingOrRefreshingExistingAura</a> (<a class="el" href="../../d2/db6/a10898.html">SpellInfo</a> const *newAura, <a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> effMask, <a class="el" href="../../db/df9/a08518.html">Unit</a> *caster, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *baseAmount, <a class="el" href="../../db/d24/a08098.html">Item</a> *castItem, <a class="el" href="../../db/d40/a08190.html">ObjectGuid</a> casterGUID, bool noPeriodicReset)</td></tr>
<tr class="separator:a851e18dcd4b806db1cd3843a7814d15a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aea6f4b8bd401df6979e6df65f3fd841e" name="aea6f4b8bd401df6979e6df65f3fd841e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea6f4b8bd401df6979e6df65f3fd841e">&#9670;&#160;</a></span>Aura::~Aura()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AuraEffect::Aura::~Aura </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad2a24adc63d2e5dfd848f22ddd490525" name="ad2a24adc63d2e5dfd848f22ddd490525"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a24adc63d2e5dfd848f22ddd490525">&#9670;&#160;</a></span>~AuraEffect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AuraEffect::~AuraEffect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  406</span>{</div>
<div class="line"><span class="lineno">  407</span>    <span class="keyword">delete</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>;</div>
<div class="line"><span class="lineno">  408</span>    <span class="keyword">delete</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>;</div>
<div class="line"><span class="lineno">  409</span>}</div>
<div class="ttc" id="aa10782_html_a256fe55e1c441e5dcc7c33abb4222e69"><div class="ttname"><a href="../../d6/d2f/a10782.html#a256fe55e1c441e5dcc7c33abb4222e69">AuraEffect::m_channelData</a></div><div class="ttdeci">ChannelTargetData * m_channelData</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:138</div></div>
<div class="ttc" id="aa10782_html_a25ce25c5ff12969bd62d0547c48b5753"><div class="ttname"><a href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">AuraEffect::m_spellmod</a></div><div class="ttdeci">SpellModifier * m_spellmod</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:140</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00138">m_channelData</a>, and <a class="el" href="../../#l00140">m_spellmod</a>.</p>

</div>
</div>
<a id="a7778b120e414f28e95e71ce96660149e" name="a7778b120e414f28e95e71ce96660149e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7778b120e414f28e95e71ce96660149e">&#9670;&#160;</a></span>AuraEffect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AuraEffect::AuraEffect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d4a/a10794.html">Aura</a> *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>effIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>baseAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  383</span>                                                                                 :</div>
<div class="line"><span class="lineno">  384</span>    <a class="code hl_variable" href="../../d6/d2f/a10782.html#aff934af743b5031d558ffc9a4b55d6de">m_base</a>(base), <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>(base-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()),</div>
<div class="line"><span class="lineno">  385</span>    <a class="code hl_variable" href="../../d6/d2f/a10782.html#aba194c9071a1b0551768b397abc9ebeb">m_baseAmount</a>(baseAmount ? * baseAmount : <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[effIndex].BasePoints), <a class="code hl_variable" href="../../d6/d2f/a10782.html#aea3300db680ab47876dbc7ae45c08d18">m_dieSides</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[effIndex].DieSides),</div>
<div class="line"><span class="lineno">  386</span>    <a class="code hl_variable" href="../../d6/d2f/a10782.html#af7eff5d08a22189f99f66695367ae250">m_critChance</a>(0), <a class="code hl_variable" href="../../d6/d2f/a10782.html#a5fa9f61c77274c75e6f3d8222142ab4e">m_oldAmount</a>(0), <a class="code hl_variable" href="../../d6/d2f/a10782.html#acec00491f0ec7f7c68d6a25d85b5b53f">m_isAuraEnabled</a>(<span class="keyword">true</span>), <a class="code hl_variable" href="../../d6/d2f/a10782.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>(<span class="keyword">nullptr</span>), <a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>(<span class="keyword">nullptr</span>), <a class="code hl_variable" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a>(0), <a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a>(0), <a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>(effIndex),</div>
<div class="line"><span class="lineno">  387</span>    <a class="code hl_variable" href="../../d6/d2f/a10782.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a>(<span class="keyword">true</span>), <a class="code hl_variable" href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a>(<span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  388</span>{</div>
<div class="line"><span class="lineno">  389</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#a5b0a6694f62bf72c41a1f461f9894581">CalculatePeriodic</a>(caster, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  390</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#ab0b3261b6c7f5ae45348d0113d24f1ed">CalculatePeriodicData</a>();</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>    <a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a> = <a class="code hl_function" href="../../d6/d2f/a10782.html#a66f8fd3fa296b59cee26c35c433e52f2">CalculateAmount</a>(caster);</div>
<div class="line"><span class="lineno">  393</span>    <a class="code hl_variable" href="../../d6/d2f/a10782.html#a3f9c2c6496be1ffad249825f86074def">m_casterLevel</a> = caster ? caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af4767dc4f1480f7c0527db4efe2643d9">GetLevel</a>() : 0;</div>
<div class="line"><span class="lineno">  394</span>    <a class="code hl_variable" href="../../d6/d2f/a10782.html#a4745b52e662a6dd92ec3b566ef7ca297">m_applyResilience</a> = caster &amp;&amp; caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5eee2a0798394bc03d983d112a5d59d0">CanApplyResilience</a>();</div>
<div class="line"><span class="lineno">  395</span>    <a class="code hl_variable" href="../../d6/d2f/a10782.html#ada78fc2515cb55583bf83667e475c7fe">m_auraGroup</a> = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellGroup(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#a5d248ef37c73049cf4df98b6fc1008fe">CalculateSpellMod</a>();</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <span class="comment">// Xinef: channel data structure</span></div>
<div class="line"><span class="lineno">  400</span>    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno">  401</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d3/dcf/a10834.html">Spell</a>* spell = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#affc5148f2c60051706b4e85a29eb4d45">GetCurrentSpell</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1fa960a792eef11d7eca70b058265e3cca6">CURRENT_CHANNELED_SPELL</a>))</div>
<div class="line"><span class="lineno">  402</span>            <a class="code hl_variable" href="../../d6/d2f/a10782.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a> = <span class="keyword">new</span> <a class="code hl_struct" href="../../db/d67/a10822.html">ChannelTargetData</a>(caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#af7b6a5afebd7c3297e369213be44e059">GetGuidValue</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a2ade5a94dc5b622bd2dfdad5eddaf273">UNIT_FIELD_CHANNEL_OBJECT</a>), spell-&gt;m_targets.HasDst() ? spell-&gt;m_targets.GetDst() : <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  403</span>}</div>
<div class="ttc" id="aa03110_html_aa21e14d8e1145507b746a69b5487109d"><div class="ttname"><a href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a></div><div class="ttdeci">#define sSpellMgr</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:825</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a2ade5a94dc5b622bd2dfdad5eddaf273"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a2ade5a94dc5b622bd2dfdad5eddaf273">UNIT_FIELD_CHANNEL_OBJECT</a></div><div class="ttdeci">@ UNIT_FIELD_CHANNEL_OBJECT</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:93</div></div>
<div class="ttc" id="aa03515_html_ab791040bd6d685b1fd2cfd12c96d0a1fa960a792eef11d7eca70b058265e3cca6"><div class="ttname"><a href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1fa960a792eef11d7eca70b058265e3cca6">CURRENT_CHANNELED_SPELL</a></div><div class="ttdeci">@ CURRENT_CHANNELED_SPELL</div><div class="ttdef"><b>Definition:</b> Unit.h:539</div></div>
<div class="ttc" id="aa08142_html_af7b6a5afebd7c3297e369213be44e059"><div class="ttname"><a href="../../df/d2d/a08142.html#af7b6a5afebd7c3297e369213be44e059">Object::GetGuidValue</a></div><div class="ttdeci">ObjectGuid GetGuidValue(uint16 index) const</div><div class="ttdef"><b>Definition:</b> Object.cpp:337</div></div>
<div class="ttc" id="aa08518_html_a5eee2a0798394bc03d983d112a5d59d0"><div class="ttname"><a href="../../db/df9/a08518.html#a5eee2a0798394bc03d983d112a5d59d0">Unit::CanApplyResilience</a></div><div class="ttdeci">bool CanApplyResilience() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1093</div></div>
<div class="ttc" id="aa08518_html_af4767dc4f1480f7c0527db4efe2643d9"><div class="ttname"><a href="../../db/df9/a08518.html#af4767dc4f1480f7c0527db4efe2643d9">Unit::GetLevel</a></div><div class="ttdeci">uint8 GetLevel() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1024</div></div>
<div class="ttc" id="aa08518_html_affc5148f2c60051706b4e85a29eb4d45"><div class="ttname"><a href="../../db/df9/a08518.html#affc5148f2c60051706b4e85a29eb4d45">Unit::GetCurrentSpell</a></div><div class="ttdeci">Spell * GetCurrentSpell(CurrentSpellTypes spellType) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1449</div></div>
<div class="ttc" id="aa10782_html_a2d9b475cbf04d8597953802e1accc938"><div class="ttname"><a href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">AuraEffect::m_periodicTimer</a></div><div class="ttdeci">int32 m_periodicTimer</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:142</div></div>
<div class="ttc" id="aa10782_html_a334378fa304471045fd273f4d845c8dd"><div class="ttname"><a href="../../d6/d2f/a10782.html#a334378fa304471045fd273f4d845c8dd">AuraEffect::m_canBeRecalculated</a></div><div class="ttdeci">bool m_canBeRecalculated</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:147</div></div>
<div class="ttc" id="aa10782_html_a355d61580194626ea54b22ff9a3ac96a"><div class="ttname"><a href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">AuraEffect::m_effIndex</a></div><div class="ttdeci">uint8 const m_effIndex</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:146</div></div>
<div class="ttc" id="aa10782_html_a3f9c2c6496be1ffad249825f86074def"><div class="ttname"><a href="../../d6/d2f/a10782.html#a3f9c2c6496be1ffad249825f86074def">AuraEffect::m_casterLevel</a></div><div class="ttdeci">uint8 m_casterLevel</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:128</div></div>
<div class="ttc" id="aa10782_html_a4745b52e662a6dd92ec3b566ef7ca297"><div class="ttname"><a href="../../d6/d2f/a10782.html#a4745b52e662a6dd92ec3b566ef7ca297">AuraEffect::m_applyResilience</a></div><div class="ttdeci">bool m_applyResilience</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:127</div></div>
<div class="ttc" id="aa10782_html_a5b0a6694f62bf72c41a1f461f9894581"><div class="ttname"><a href="../../d6/d2f/a10782.html#a5b0a6694f62bf72c41a1f461f9894581">AuraEffect::CalculatePeriodic</a></div><div class="ttdeci">void CalculatePeriodic(Unit *caster, bool create=false, bool load=false)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:593</div></div>
<div class="ttc" id="aa10782_html_a5d248ef37c73049cf4df98b6fc1008fe"><div class="ttname"><a href="../../d6/d2f/a10782.html#a5d248ef37c73049cf4df98b6fc1008fe">AuraEffect::CalculateSpellMod</a></div><div class="ttdeci">void CalculateSpellMod()</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:684</div></div>
<div class="ttc" id="aa10782_html_a5fa9f61c77274c75e6f3d8222142ab4e"><div class="ttname"><a href="../../d6/d2f/a10782.html#a5fa9f61c77274c75e6f3d8222142ab4e">AuraEffect::m_oldAmount</a></div><div class="ttdeci">int32 m_oldAmount</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:135</div></div>
<div class="ttc" id="aa10782_html_a63863fb01a8cf08251c0b4482be6a20f"><div class="ttname"><a href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">AuraEffect::GetId</a></div><div class="ttdeci">uint32 GetId() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:432</div></div>
<div class="ttc" id="aa10782_html_a66f8fd3fa296b59cee26c35c433e52f2"><div class="ttname"><a href="../../d6/d2f/a10782.html#a66f8fd3fa296b59cee26c35c433e52f2">AuraEffect::CalculateAmount</a></div><div class="ttdeci">int32 CalculateAmount(Unit *caster)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:452</div></div>
<div class="ttc" id="aa10782_html_a7f01908f09b465b6770f18c13e459f17"><div class="ttname"><a href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">AuraEffect::m_amount</a></div><div class="ttdeci">int32 m_amount</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:129</div></div>
<div class="ttc" id="aa10782_html_ab0b3261b6c7f5ae45348d0113d24f1ed"><div class="ttname"><a href="../../d6/d2f/a10782.html#ab0b3261b6c7f5ae45348d0113d24f1ed">AuraEffect::CalculatePeriodicData</a></div><div class="ttdeci">void CalculatePeriodicData()</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:578</div></div>
<div class="ttc" id="aa10782_html_ab8c7fb50eac3482a162cbbacd64f1625"><div class="ttname"><a href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">AuraEffect::m_tickNumber</a></div><div class="ttdeci">uint32 m_tickNumber</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:144</div></div>
<div class="ttc" id="aa10782_html_aba194c9071a1b0551768b397abc9ebeb"><div class="ttname"><a href="../../d6/d2f/a10782.html#aba194c9071a1b0551768b397abc9ebeb">AuraEffect::m_baseAmount</a></div><div class="ttdeci">int32 const m_baseAmount</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:124</div></div>
<div class="ttc" id="aa10782_html_ac4df84854746b8de74f64e2abfec76c1"><div class="ttname"><a href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">AuraEffect::m_spellInfo</a></div><div class="ttdeci">SpellInfo const  *const m_spellInfo</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:123</div></div>
<div class="ttc" id="aa10782_html_acec00491f0ec7f7c68d6a25d85b5b53f"><div class="ttname"><a href="../../d6/d2f/a10782.html#acec00491f0ec7f7c68d6a25d85b5b53f">AuraEffect::m_isAuraEnabled</a></div><div class="ttdeci">bool m_isAuraEnabled</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:136</div></div>
<div class="ttc" id="aa10782_html_ad6931b2764b92bc6c2a20b092c011f0a"><div class="ttname"><a href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">AuraEffect::m_isPeriodic</a></div><div class="ttdeci">bool m_isPeriodic</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:148</div></div>
<div class="ttc" id="aa10782_html_ada78fc2515cb55583bf83667e475c7fe"><div class="ttname"><a href="../../d6/d2f/a10782.html#ada78fc2515cb55583bf83667e475c7fe">AuraEffect::m_auraGroup</a></div><div class="ttdeci">uint32 m_auraGroup</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:134</div></div>
<div class="ttc" id="aa10782_html_aea3300db680ab47876dbc7ae45c08d18"><div class="ttname"><a href="../../d6/d2f/a10782.html#aea3300db680ab47876dbc7ae45c08d18">AuraEffect::m_dieSides</a></div><div class="ttdeci">int32 const m_dieSides</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:125</div></div>
<div class="ttc" id="aa10782_html_af7eff5d08a22189f99f66695367ae250"><div class="ttname"><a href="../../d6/d2f/a10782.html#af7eff5d08a22189f99f66695367ae250">AuraEffect::m_critChance</a></div><div class="ttdeci">float m_critChance</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:130</div></div>
<div class="ttc" id="aa10782_html_aff934af743b5031d558ffc9a4b55d6de"><div class="ttname"><a href="../../d6/d2f/a10782.html#aff934af743b5031d558ffc9a4b55d6de">AuraEffect::m_base</a></div><div class="ttdeci">Aura *const m_base</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:121</div></div>
<div class="ttc" id="aa10794_html_ab4abe60bbc09777bab95a0a0ec66af25"><div class="ttname"><a href="../../df/d4a/a10794.html#ab4abe60bbc09777bab95a0a0ec66af25">Aura::GetSpellInfo</a></div><div class="ttdeci">SpellInfo const * GetSpellInfo() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:100</div></div>
<div class="ttc" id="aa10822_html"><div class="ttname"><a href="../../db/d67/a10822.html">ChannelTargetData</a></div><div class="ttdef"><b>Definition:</b> Spell.h:243</div></div>
<div class="ttc" id="aa10834_html"><div class="ttname"><a href="../../d3/dcf/a10834.html">Spell</a></div><div class="ttdef"><b>Definition:</b> Spell.h:286</div></div>
<div class="ttc" id="aa10898_html_aa5bb0d7d6df03526d011d9cbfa3734e0"><div class="ttname"><a href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">SpellInfo::Effects</a></div><div class="ttdeci">std::array&lt; SpellEffectInfo, MAX_SPELL_EFFECTS &gt; Effects</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:393</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00593">CalculatePeriodic()</a>, <a class="el" href="../../#l00578">CalculatePeriodicData()</a>, <a class="el" href="../../#l00684">CalculateSpellMod()</a>, <a class="el" href="../../#l01093">Unit::CanApplyResilience()</a>, <a class="el" href="../../#l00539">CURRENT_CHANNELED_SPELL</a>, <a class="el" href="../../#l01449">Unit::GetCurrentSpell()</a>, <a class="el" href="../../#l00337">Object::GetGuidValue()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l01024">Unit::GetLevel()</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l00127">m_applyResilience</a>, <a class="el" href="../../#l00134">m_auraGroup</a>, <a class="el" href="../../#l00128">m_casterLevel</a>, <a class="el" href="../../#l00138">m_channelData</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, and <a class="el" href="../../#l00093">UNIT_FIELD_CHANNEL_OBJECT</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2a7bd5fd001ae6fb2ac680b1d25ef378" name="a2a7bd5fd001ae6fb2ac680b1d25ef378"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a7bd5fd001ae6fb2ac680b1d25ef378">&#9670;&#160;</a></span>ApplySpellMod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::ApplySpellMod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  800</span>{</div>
<div class="line"><span class="lineno">  801</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a> || !target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno">  802</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#adcd87d71d084fdc71bc92448f45cf726">AddSpellMod</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>, apply);</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>    <span class="comment">// Auras with charges do not mod amount of passive auras</span></div>
<div class="line"><span class="lineno">  807</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;IsUsingCharges())</div>
<div class="line"><span class="lineno">  808</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  809</span>    <span class="comment">// reapply some passive spells after add/remove related spellmods</span></div>
<div class="line"><span class="lineno">  810</span>    <span class="comment">// Warning: it is a dead loop if 2 auras each other amount-shouldn&#39;t happen</span></div>
<div class="line"><span class="lineno">  811</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>())</div>
<div class="line"><span class="lineno">  812</span>    {</div>
<div class="line"><span class="lineno">  813</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a2afcbd3a0f99f3410cd2790a28a336ec">SPELLMOD_ALL_EFFECTS</a>:</div>
<div class="line"><span class="lineno">  814</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351ab97b462651ee3567f2c518bd09e74e9e">SPELLMOD_EFFECT1</a>:</div>
<div class="line"><span class="lineno">  815</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a0424ff84a813354eb36d6f6774bbacce">SPELLMOD_EFFECT2</a>:</div>
<div class="line"><span class="lineno">  816</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a707c5251dd2bb2719dd4d3abe90fdbae">SPELLMOD_EFFECT3</a>:</div>
<div class="line"><span class="lineno">  817</span>            {</div>
<div class="line"><span class="lineno">  818</span>                <a class="code hl_class" href="../../db/d40/a08190.html">ObjectGuid</a> guid = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>();</div>
<div class="line"><span class="lineno">  819</span>                <a class="code hl_typedef" href="../../db/df9/a08518.html#a32f102f941cf4a53fe17e7f7e957150a">Unit::AuraApplicationMap</a>&amp; auras = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#adc7150ef9ed6fc45dc84ac504fd75141">GetAppliedAuras</a>();</div>
<div class="line"><span class="lineno">  820</span>                <span class="keywordflow">for</span> (Unit::AuraApplicationMap::iterator iter = auras.begin(); iter != auras.end(); ++iter)</div>
<div class="line"><span class="lineno">  821</span>                {</div>
<div class="line"><span class="lineno">  822</span>                    <a class="code hl_class" href="../../df/d4a/a10794.html">Aura</a>* aura = iter-&gt;second-&gt;GetBase();</div>
<div class="line"><span class="lineno">  823</span>                    <span class="comment">// only passive and permament auras-active auras should have amount set on spellcast and not be affected</span></div>
<div class="line"><span class="lineno">  824</span>                    <span class="comment">// if aura is casted by others, it will not be affected</span></div>
<div class="line"><span class="lineno">  825</span>                    <span class="keywordflow">if</span> ((aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>() || aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#af70f37c9e40b7038cf952c2969ae9ab2">IsPermanent</a>()) &amp;&amp; aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>() == guid &amp;&amp; aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a75e80fd4e12d1c445584627bb4bf9c84">IsAffectedBySpellMod</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>))</div>
<div class="line"><span class="lineno">  826</span>                    {</div>
<div class="line"><span class="lineno">  827</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a2afcbd3a0f99f3410cd2790a28a336ec">SPELLMOD_ALL_EFFECTS</a>)</div>
<div class="line"><span class="lineno">  828</span>                        {</div>
<div class="line"><span class="lineno">  829</span>                            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno">  830</span>                            {</div>
<div class="line"><span class="lineno">  831</span>                                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(i))</div>
<div class="line"><span class="lineno">  832</span>                                    aurEff-&gt;RecalculateAmount();</div>
<div class="line"><span class="lineno">  833</span>                            }</div>
<div class="line"><span class="lineno">  834</span>                        }</div>
<div class="line"><span class="lineno">  835</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351ab97b462651ee3567f2c518bd09e74e9e">SPELLMOD_EFFECT1</a>)</div>
<div class="line"><span class="lineno">  836</span>                        {</div>
<div class="line"><span class="lineno">  837</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0))</div>
<div class="line"><span class="lineno">  838</span>                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><span class="lineno">  839</span>                        }</div>
<div class="line"><span class="lineno">  840</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a0424ff84a813354eb36d6f6774bbacce">SPELLMOD_EFFECT2</a>)</div>
<div class="line"><span class="lineno">  841</span>                        {</div>
<div class="line"><span class="lineno">  842</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(1))</div>
<div class="line"><span class="lineno">  843</span>                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><span class="lineno">  844</span>                        }</div>
<div class="line"><span class="lineno">  845</span>                        <span class="keywordflow">else</span> <span class="comment">//if (modOp == SPELLMOD_EFFECT3)</span></div>
<div class="line"><span class="lineno">  846</span>                        {</div>
<div class="line"><span class="lineno">  847</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(2))</div>
<div class="line"><span class="lineno">  848</span>                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><span class="lineno">  849</span>                        }</div>
<div class="line"><span class="lineno">  850</span>                    }</div>
<div class="line"><span class="lineno">  851</span>                }</div>
<div class="line"><span class="lineno">  852</span> </div>
<div class="line"><span class="lineno">  853</span>                <a class="code hl_class" href="../../d0/d0b/a08254.html">Pet</a>* pet = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a5eef7fef24e4a9269d1ee834bc2bd501">GetPet</a>();</div>
<div class="line"><span class="lineno">  854</span>                <span class="keywordflow">if</span> (!pet)</div>
<div class="line"><span class="lineno">  855</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  856</span> </div>
<div class="line"><span class="lineno">  857</span>                <a class="code hl_class" href="../../db/d40/a08190.html">ObjectGuid</a> petguid = pet-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>();</div>
<div class="line"><span class="lineno">  858</span>                <a class="code hl_typedef" href="../../db/df9/a08518.html#a32f102f941cf4a53fe17e7f7e957150a">Unit::AuraApplicationMap</a>&amp; petauras = pet-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#adc7150ef9ed6fc45dc84ac504fd75141">GetAppliedAuras</a>();</div>
<div class="line"><span class="lineno">  859</span>                <span class="keywordflow">for</span> (Unit::AuraApplicationMap::iterator iter = petauras.begin(); iter != petauras.end(); ++iter)</div>
<div class="line"><span class="lineno">  860</span>                {</div>
<div class="line"><span class="lineno">  861</span>                    <a class="code hl_class" href="../../df/d4a/a10794.html">Aura</a>* aura = iter-&gt;second-&gt;GetBase();</div>
<div class="line"><span class="lineno">  862</span>                    <span class="comment">// only passive auras-active auras should have amount set on spellcast and not be affected</span></div>
<div class="line"><span class="lineno">  863</span>                    <span class="comment">// if aura is casted by others, it will not be affected</span></div>
<div class="line"><span class="lineno">  864</span>                    <span class="keywordflow">if</span> ((aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>() || aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#af70f37c9e40b7038cf952c2969ae9ab2">IsPermanent</a>()) &amp;&amp; aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>() == petguid &amp;&amp; aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a75e80fd4e12d1c445584627bb4bf9c84">IsAffectedBySpellMod</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>))</div>
<div class="line"><span class="lineno">  865</span>                    {</div>
<div class="line"><span class="lineno">  866</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a2afcbd3a0f99f3410cd2790a28a336ec">SPELLMOD_ALL_EFFECTS</a>)</div>
<div class="line"><span class="lineno">  867</span>                        {</div>
<div class="line"><span class="lineno">  868</span>                            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno">  869</span>                            {</div>
<div class="line"><span class="lineno">  870</span>                                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(i))</div>
<div class="line"><span class="lineno">  871</span>                                    aurEff-&gt;RecalculateAmount();</div>
<div class="line"><span class="lineno">  872</span>                            }</div>
<div class="line"><span class="lineno">  873</span>                        }</div>
<div class="line"><span class="lineno">  874</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351ab97b462651ee3567f2c518bd09e74e9e">SPELLMOD_EFFECT1</a>)</div>
<div class="line"><span class="lineno">  875</span>                        {</div>
<div class="line"><span class="lineno">  876</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(0))</div>
<div class="line"><span class="lineno">  877</span>                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><span class="lineno">  878</span>                        }</div>
<div class="line"><span class="lineno">  879</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a0424ff84a813354eb36d6f6774bbacce">SPELLMOD_EFFECT2</a>)</div>
<div class="line"><span class="lineno">  880</span>                        {</div>
<div class="line"><span class="lineno">  881</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(1))</div>
<div class="line"><span class="lineno">  882</span>                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><span class="lineno">  883</span>                        }</div>
<div class="line"><span class="lineno">  884</span>                        <span class="keywordflow">else</span> <span class="comment">//if (modOp == SPELLMOD_EFFECT3)</span></div>
<div class="line"><span class="lineno">  885</span>                        {</div>
<div class="line"><span class="lineno">  886</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a6ee04786fcd54da7e3e2b7a0277adeb8">GetEffect</a>(2))</div>
<div class="line"><span class="lineno">  887</span>                                aurEff-&gt;RecalculateAmount();</div>
<div class="line"><span class="lineno">  888</span>                        }</div>
<div class="line"><span class="lineno">  889</span>                    }</div>
<div class="line"><span class="lineno">  890</span>                }</div>
<div class="line"><span class="lineno">  891</span>            }</div>
<div class="line"><span class="lineno">  892</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  893</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  894</span>    }</div>
<div class="line"><span class="lineno">  895</span>}</div>
<div class="ttc" id="aa00497_html_a15a8d014fadf85c99a2268d8cbd00767"><div class="ttname"><a href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a></div><div class="ttdeci">std::uint8_t uint8</div><div class="ttdef"><b>Definition:</b> Define.h:109</div></div>
<div class="ttc" id="aa02750_html_ac5733f5b58bf8a23a1919a005b5ec895"><div class="ttname"><a href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a></div><div class="ttdeci">#define MAX_SPELL_EFFECTS</div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1636</div></div>
<div class="ttc" id="aa03080_html_a39b60e1f12cca9b6873cb817e7717351a0424ff84a813354eb36d6f6774bbacce"><div class="ttname"><a href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a0424ff84a813354eb36d6f6774bbacce">SPELLMOD_EFFECT2</a></div><div class="ttdeci">@ SPELLMOD_EFFECT2</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:88</div></div>
<div class="ttc" id="aa03080_html_a39b60e1f12cca9b6873cb817e7717351a2afcbd3a0f99f3410cd2790a28a336ec"><div class="ttname"><a href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a2afcbd3a0f99f3410cd2790a28a336ec">SPELLMOD_ALL_EFFECTS</a></div><div class="ttdeci">@ SPELLMOD_ALL_EFFECTS</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:84</div></div>
<div class="ttc" id="aa03080_html_a39b60e1f12cca9b6873cb817e7717351a707c5251dd2bb2719dd4d3abe90fdbae"><div class="ttname"><a href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351a707c5251dd2bb2719dd4d3abe90fdbae">SPELLMOD_EFFECT3</a></div><div class="ttdeci">@ SPELLMOD_EFFECT3</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:99</div></div>
<div class="ttc" id="aa03080_html_a39b60e1f12cca9b6873cb817e7717351ab97b462651ee3567f2c518bd09e74e9e"><div class="ttname"><a href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351ab97b462651ee3567f2c518bd09e74e9e">SPELLMOD_EFFECT1</a></div><div class="ttdeci">@ SPELLMOD_EFFECT1</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:79</div></div>
<div class="ttc" id="aa08142_html_a1b9ed00e8d7ac5fed698ef6431905296"><div class="ttname"><a href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">Object::IsPlayer</a></div><div class="ttdeci">bool IsPlayer() const</div><div class="ttdef"><b>Definition:</b> Object.h:197</div></div>
<div class="ttc" id="aa08142_html_a328d5f752cc33ed398b3d9861ef6929d"><div class="ttname"><a href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">Object::ToPlayer</a></div><div class="ttdeci">Player * ToPlayer()</div><div class="ttdef"><b>Definition:</b> Object.h:198</div></div>
<div class="ttc" id="aa08142_html_ad23b997e2442fa6a6228ba73a7ecc138"><div class="ttname"><a href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">Object::GetGUID</a></div><div class="ttdeci">static ObjectGuid GetGUID(Object const *o)</div><div class="ttdef"><b>Definition:</b> Object.h:109</div></div>
<div class="ttc" id="aa08190_html"><div class="ttname"><a href="../../db/d40/a08190.html">ObjectGuid</a></div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:118</div></div>
<div class="ttc" id="aa08254_html"><div class="ttname"><a href="../../d0/d0b/a08254.html">Pet</a></div><div class="ttdef"><b>Definition:</b> Pet.h:41</div></div>
<div class="ttc" id="aa08386_html_a5eef7fef24e4a9269d1ee834bc2bd501"><div class="ttname"><a href="../../d0/dc6/a08386.html#a5eef7fef24e4a9269d1ee834bc2bd501">Player::GetPet</a></div><div class="ttdeci">Pet * GetPet() const</div><div class="ttdef"><b>Definition:</b> Player.cpp:8916</div></div>
<div class="ttc" id="aa08386_html_adcd87d71d084fdc71bc92448f45cf726"><div class="ttname"><a href="../../d0/dc6/a08386.html#adcd87d71d084fdc71bc92448f45cf726">Player::AddSpellMod</a></div><div class="ttdeci">void AddSpellMod(SpellModifier *mod, bool apply)</div><div class="ttdef"><b>Definition:</b> Player.cpp:9897</div></div>
<div class="ttc" id="aa08518_html_a32f102f941cf4a53fe17e7f7e957150a"><div class="ttname"><a href="../../db/df9/a08518.html#a32f102f941cf4a53fe17e7f7e957150a">Unit::AuraApplicationMap</a></div><div class="ttdeci">std::multimap&lt; uint32, AuraApplication * &gt; AuraApplicationMap</div><div class="ttdef"><b>Definition:</b> Unit.h:639</div></div>
<div class="ttc" id="aa08518_html_adc7150ef9ed6fc45dc84ac504fd75141"><div class="ttname"><a href="../../db/df9/a08518.html#adc7150ef9ed6fc45dc84ac504fd75141">Unit::GetAppliedAuras</a></div><div class="ttdeci">AuraApplicationMap &amp; GetAppliedAuras()</div><div class="ttdef"><b>Definition:</b> Unit.h:1304</div></div>
<div class="ttc" id="aa10782_html"><div class="ttname"><a href="../../d6/d2f/a10782.html">AuraEffect</a></div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:39</div></div>
<div class="ttc" id="aa10782_html_aa183791665930afb43bbac2163b1d8d4"><div class="ttname"><a href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">AuraEffect::GetMiscValue</a></div><div class="ttdeci">int32 GetMiscValue() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:442</div></div>
<div class="ttc" id="aa10782_html_ab288b290ebc452f0b03c7d79be1efc52"><div class="ttname"><a href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">AuraEffect::GetBase</a></div><div class="ttdeci">Aura * GetBase() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:49</div></div>
<div class="ttc" id="aa10794_html"><div class="ttname"><a href="../../df/d4a/a10794.html">Aura</a></div><div class="ttdef"><b>Definition:</b> SpellAuras.h:87</div></div>
<div class="ttc" id="aa10794_html_a3c4dfe75dad16fbf2afaf23ce77e4262"><div class="ttname"><a href="../../df/d4a/a10794.html#a3c4dfe75dad16fbf2afaf23ce77e4262">Aura::GetCasterGUID</a></div><div class="ttdeci">ObjectGuid GetCasterGUID() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:105</div></div>
<div class="ttc" id="aa10794_html_a6ee04786fcd54da7e3e2b7a0277adeb8"><div class="ttname"><a href="../../df/d4a/a10794.html#a6ee04786fcd54da7e3e2b7a0277adeb8">Aura::GetEffect</a></div><div class="ttdeci">AuraEffect * GetEffect(uint8 effIndex) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:175</div></div>
<div class="ttc" id="aa10794_html_ae24c050668e78ef9d8728e6b5bd77c12"><div class="ttname"><a href="../../df/d4a/a10794.html#ae24c050668e78ef9d8728e6b5bd77c12">Aura::IsPassive</a></div><div class="ttdeci">bool IsPassive() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:1082</div></div>
<div class="ttc" id="aa10794_html_af70f37c9e40b7038cf952c2969ae9ab2"><div class="ttname"><a href="../../df/d4a/a10794.html#af70f37c9e40b7038cf952c2969ae9ab2">Aura::IsPermanent</a></div><div class="ttdeci">bool IsPermanent() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:139</div></div>
<div class="ttc" id="aa10898_html_a75e80fd4e12d1c445584627bb4bf9c84"><div class="ttname"><a href="../../d2/db6/a10898.html#a75e80fd4e12d1c445584627bb4bf9c84">SpellInfo::IsAffectedBySpellMod</a></div><div class="ttdeci">bool IsAffectedBySpellMod(SpellModifier const *mod) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1293</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l09897">Player::AddSpellMod()</a>, <a class="el" href="../../#l01304">Unit::GetAppliedAuras()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00105">Aura::GetCasterGUID()</a>, <a class="el" href="../../#l00175">Aura::GetEffect()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l08916">Player::GetPet()</a>, <a class="el" href="../../#l00100">Aura::GetSpellInfo()</a>, <a class="el" href="../../#l01293">SpellInfo::IsAffectedBySpellMod()</a>, <a class="el" href="../../#l01082">Aura::IsPassive()</a>, <a class="el" href="../../#l00139">Aura::IsPermanent()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00140">m_spellmod</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l00084">SPELLMOD_ALL_EFFECTS</a>, <a class="el" href="../../#l00079">SPELLMOD_EFFECT1</a>, <a class="el" href="../../#l00088">SPELLMOD_EFFECT2</a>, <a class="el" href="../../#l00099">SPELLMOD_EFFECT3</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00741">HandleEffect()</a>.</p>

</div>
</div>
<a id="a43dd810a38d13af5ffee45dc4f7d5aac" name="a43dd810a38d13af5ffee45dc4f7d5aac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43dd810a38d13af5ffee45dc4f7d5aac">&#9670;&#160;</a></span>CalcPeriodicCritChance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float AuraEffect::CalcPeriodicCritChance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> const *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> const *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1045</span>{</div>
<div class="line"><span class="lineno"> 1046</span>    <span class="keywordtype">float</span> critChance = 0.0f;</div>
<div class="line"><span class="lineno"> 1047</span>    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 1048</span>    {</div>
<div class="line"><span class="lineno"> 1049</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* modOwner = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a2e6a98844f96c211f47b911a2766ada8">GetSpellModOwner</a>())</div>
<div class="line"><span class="lineno"> 1050</span>        {</div>
<div class="line"><span class="lineno"> 1051</span>            <a class="code hl_typedef" href="../../db/df9/a08518.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; mPeriodicCritAuras = modOwner-&gt;GetAuraEffectsByType(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a7758d81a4b1d1914bbc46b904e67c1f6">SPELL_AURA_ABILITY_PERIODIC_CRIT</a>);</div>
<div class="line"><span class="lineno"> 1052</span>            <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator itr = mPeriodicCritAuras.begin(); itr != mPeriodicCritAuras.end(); ++itr)</div>
<div class="line"><span class="lineno"> 1053</span>            {</div>
<div class="line"><span class="lineno"> 1054</span>                <span class="keywordflow">if</span> ((*itr)-&gt;IsAffectedOnSpell(<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()))</div>
<div class="line"><span class="lineno"> 1055</span>                {</div>
<div class="line"><span class="lineno"> 1056</span>                    critChance = modOwner-&gt;SpellDoneCritChance(<span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;DmgClass == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a7443b708d5bd7312fc0a420679ae10a4a26638bd2ee5365a4b278420b7dc66956">SPELL_DAMAGE_CLASS_RANGED</a> ? <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352aa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a> : <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1057</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1058</span>                }</div>
<div class="line"><span class="lineno"> 1059</span>            }</div>
<div class="line"><span class="lineno"> 1060</span> </div>
<div class="line"><span class="lineno"> 1061</span>            <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyName)</div>
<div class="line"><span class="lineno"> 1062</span>            {</div>
<div class="line"><span class="lineno"> 1063</span>                <span class="comment">// Rupture - since 3.3.3 can crit</span></div>
<div class="line"><span class="lineno"> 1064</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1">SPELLFAMILY_ROGUE</a>:</div>
<div class="line"><span class="lineno"> 1065</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x100000)</div>
<div class="line"><span class="lineno"> 1066</span>                        critChance = modOwner-&gt;SpellDoneCritChance(<span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1067</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1068</span>            }</div>
<div class="line"><span class="lineno"> 1069</span>        }</div>
<div class="line"><span class="lineno"> 1070</span>    }</div>
<div class="line"><span class="lineno"> 1071</span>    <span class="keywordflow">if</span> (target &amp;&amp; critChance &gt; 0.0f)</div>
<div class="line"><span class="lineno"> 1072</span>        critChance = target-&gt;SpellTakenCritChance(caster, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), critChance, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1073</span> </div>
<div class="line"><span class="lineno"> 1074</span>    <span class="keywordflow">return</span> std::max(0.0f, critChance);</div>
<div class="line"><span class="lineno"> 1075</span>}</div>
<div class="ttc" id="aa02771_html_a7443b708d5bd7312fc0a420679ae10a4a26638bd2ee5365a4b278420b7dc66956"><div class="ttname"><a href="../../d0/dbd/a02771.html#a7443b708d5bd7312fc0a420679ae10a4a26638bd2ee5365a4b278420b7dc66956">SPELL_DAMAGE_CLASS_RANGED</a></div><div class="ttdeci">@ SPELL_DAMAGE_CLASS_RANGED</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1548</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1">SPELLFAMILY_ROGUE</a></div><div class="ttdeci">@ SPELLFAMILY_ROGUE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3536</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a7758d81a4b1d1914bbc46b904e67c1f6"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a7758d81a4b1d1914bbc46b904e67c1f6">SPELL_AURA_ABILITY_PERIODIC_CRIT</a></div><div class="ttdeci">@ SPELL_AURA_ABILITY_PERIODIC_CRIT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:349</div></div>
<div class="ttc" id="aa03515_html_a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae"><div class="ttname"><a href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a></div><div class="ttdeci">@ BASE_ATTACK</div><div class="ttdef"><b>Definition:</b> Unit.h:209</div></div>
<div class="ttc" id="aa03515_html_a85524ab4e1fb005ed500bd190f79c352aa2557af152c5f2b27bbf59915cbd1670"><div class="ttname"><a href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352aa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a></div><div class="ttdeci">@ RANGED_ATTACK</div><div class="ttdef"><b>Definition:</b> Unit.h:211</div></div>
<div class="ttc" id="aa08386_html"><div class="ttname"><a href="../../d0/dc6/a08386.html">Player</a></div><div class="ttdef"><b>Definition:</b> Player.h:1064</div></div>
<div class="ttc" id="aa08518_html_a2e6a98844f96c211f47b911a2766ada8"><div class="ttname"><a href="../../db/df9/a08518.html#a2e6a98844f96c211f47b911a2766ada8">Unit::GetSpellModOwner</a></div><div class="ttdeci">Player * GetSpellModOwner() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:16573</div></div>
<div class="ttc" id="aa08518_html_adcdd87d0c137619dfc869536c1315dd7"><div class="ttname"><a href="../../db/df9/a08518.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a></div><div class="ttdeci">std::list&lt; AuraEffect * &gt; AuraEffectList</div><div class="ttdef"><b>Definition:</b> Unit.h:646</div></div>
<div class="ttc" id="aa10782_html_a1004d58d71df9a9b603d217ebca51321"><div class="ttname"><a href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">AuraEffect::GetSpellInfo</a></div><div class="ttdeci">SpellInfo const * GetSpellInfo() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:54</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l16573">Unit::GetSpellModOwner()</a>, <a class="el" href="../../#l00211">RANGED_ATTACK</a>, <a class="el" href="../../#l00349">SPELL_AURA_ABILITY_PERIODIC_CRIT</a>, <a class="el" href="../../#l01548">SPELL_DAMAGE_CLASS_RANGED</a>, <a class="el" href="../../#l03536">SPELLFAMILY_ROGUE</a>, and <a class="el" href="../../#l12064">Unit::SpellTakenCritChance()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00578">CalculatePeriodicData()</a>.</p>

</div>
</div>
<a id="a66f8fd3fa296b59cee26c35c433e52f2" name="a66f8fd3fa296b59cee26c35c433e52f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66f8fd3fa296b59cee26c35c433e52f2">&#9670;&#160;</a></span>CalculateAmount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::CalculateAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  453</span>{</div>
<div class="line"><span class="lineno">  454</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount;</div>
<div class="line"><span class="lineno">  455</span>    <span class="comment">// default amount calculation</span></div>
<div class="line"><span class="lineno">  456</span>    amount = <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].CalcValue(caster, &amp;<a class="code hl_variable" href="../../d6/d2f/a10782.html#aba194c9071a1b0551768b397abc9ebeb">m_baseAmount</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>    <span class="comment">// check item enchant aura cast</span></div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">if</span> (!amount &amp;&amp; caster)</div>
<div class="line"><span class="lineno">  460</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d40/a08190.html">ObjectGuid</a> itemGUID = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetCastItemGUID())</div>
<div class="line"><span class="lineno">  461</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* playerCaster = caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno">  462</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d24/a08098.html">Item</a>* castItem = playerCaster-&gt;GetItemByGuid(itemGUID))</div>
<div class="line"><span class="lineno">  463</span>                    <span class="keywordflow">if</span> (castItem-&gt;GetItemSuffixFactor())</div>
<div class="line"><span class="lineno">  464</span>                    {</div>
<div class="line"><span class="lineno">  465</span>                        <a class="code hl_struct" href="../../d9/db5/a27834.html">ItemRandomSuffixEntry</a> <span class="keyword">const</span>* item_rand_suffix = <a class="code hl_variable" href="../../d7/da2/a03704.html#a8f24671edcebdacd8a25038525cfde6b">sItemRandomSuffixStore</a>.LookupEntry(std::abs(castItem-&gt;GetItemRandomPropertyId()));</div>
<div class="line"><span class="lineno">  466</span>                        <span class="keywordflow">if</span> (item_rand_suffix)</div>
<div class="line"><span class="lineno">  467</span>                        {</div>
<div class="line"><span class="lineno">  468</span>                            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> k = 0; k &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#af0d8d6c7748de71fbd87ae5d02985404">MAX_ITEM_ENCHANTMENT_EFFECTS</a>; k++)</div>
<div class="line"><span class="lineno">  469</span>                            {</div>
<div class="line"><span class="lineno">  470</span>                                <a class="code hl_struct" href="../../d3/d91/a27978.html">SpellItemEnchantmentEntry</a> <span class="keyword">const</span>* pEnchant = <a class="code hl_variable" href="../../d7/da2/a03704.html#a056a6a649116138e9e8c21d35a78476b">sSpellItemEnchantmentStore</a>.LookupEntry(item_rand_suffix-&gt;<a class="code hl_variable" href="../../d9/db5/a27834.html#a45e694082c1dbdeef5229561f617d584">Enchantment</a>[k]);</div>
<div class="line"><span class="lineno">  471</span>                                <span class="keywordflow">if</span> (pEnchant)</div>
<div class="line"><span class="lineno">  472</span>                                {</div>
<div class="line"><span class="lineno">  473</span>                                    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> t = 0; t &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ab66cd5828c451f68f55f1b054c29a8fc">MAX_SPELL_ITEM_ENCHANTMENT_EFFECTS</a>; t++)</div>
<div class="line"><span class="lineno">  474</span>                                        <span class="keywordflow">if</span> (pEnchant-&gt;<a class="code hl_variable" href="../../d3/d91/a27978.html#a694edc79cf8ba571338bff2a3aad512d">spellid</a>[t] == <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>)</div>
<div class="line"><span class="lineno">  475</span>                                        {</div>
<div class="line"><span class="lineno">  476</span>                                            amount = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>((item_rand_suffix-&gt;<a class="code hl_variable" href="../../d9/db5/a27834.html#a45d752dfd00a75f69d919a88573ba4fc">AllocationPct</a>[k] * castItem-&gt;GetItemSuffixFactor()) / 10000);</div>
<div class="line"><span class="lineno">  477</span>                                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  478</span>                                        }</div>
<div class="line"><span class="lineno">  479</span>                                }</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>                                <span class="keywordflow">if</span> (amount)</div>
<div class="line"><span class="lineno">  482</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  483</span>                            }</div>
<div class="line"><span class="lineno">  484</span>                        }</div>
<div class="line"><span class="lineno">  485</span>                    }</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>    <span class="comment">// custom amount calculations go here</span></div>
<div class="line"><span class="lineno">  488</span>    <span class="comment">// xinef: normal auras</span></div>
<div class="line"><span class="lineno">  489</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><span class="lineno">  490</span>    {</div>
<div class="line"><span class="lineno">  491</span>        <span class="comment">// crowd control auras</span></div>
<div class="line"><span class="lineno">  492</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>:</div>
<div class="line"><span class="lineno">  493</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>:</div>
<div class="line"><span class="lineno">  494</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>:</div>
<div class="line"><span class="lineno">  495</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>:</div>
<div class="line"><span class="lineno">  496</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab4e25ba6068fba0c5d7c5ac8adbbf8fa">SPELL_AURA_TRANSFORM</a>:</div>
<div class="line"><span class="lineno">  497</span>            <a class="code hl_variable" href="../../d6/d2f/a10782.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  498</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a7909fc70161065f6107211ee8ed3c6bf">ProcFlags</a> || <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#aefe1e81c5922419ada55844bdb30e269">HasAura</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b">SPELL_AURA_PROC_TRIGGER_SPELL</a>)) <span class="comment">// xinef: skip auras with proctriggerspell, they must have procflags...</span></div>
<div class="line"><span class="lineno">  499</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  500</span>            amount = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetUnitOwner()-&gt;CountPctFromMaxHealth(10));</div>
<div class="line"><span class="lineno">  501</span>            <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno">  502</span>            {</div>
<div class="line"><span class="lineno">  503</span>                <span class="comment">// Glyphs increasing damage cap</span></div>
<div class="line"><span class="lineno">  504</span>                <a class="code hl_typedef" href="../../db/df9/a08518.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; overrideClassScripts = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee9829857fab1a5438db7a7fdf8806fa">SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</a>);</div>
<div class="line"><span class="lineno">  505</span>                <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator itr = overrideClassScripts.begin(); itr != overrideClassScripts.end(); ++itr)</div>
<div class="line"><span class="lineno">  506</span>                {</div>
<div class="line"><span class="lineno">  507</span>                    <span class="keywordflow">if</span> ((*itr)-&gt;IsAffectedOnSpell(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>))</div>
<div class="line"><span class="lineno">  508</span>                    {</div>
<div class="line"><span class="lineno">  509</span>                        <span class="comment">// Glyph of Fear, Glyph of Frost nova and similar auras</span></div>
<div class="line"><span class="lineno">  510</span>                        <span class="keywordflow">if</span> ((*itr)-&gt;GetMiscValue() == 7801)</div>
<div class="line"><span class="lineno">  511</span>                        {</div>
<div class="line"><span class="lineno">  512</span>                            <a class="code hl_function" href="../../d4/d13/a00377.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(amount, (*itr)-&gt;GetAmount());</div>
<div class="line"><span class="lineno">  513</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  514</span>                        }</div>
<div class="line"><span class="lineno">  515</span>                    }</div>
<div class="line"><span class="lineno">  516</span>                }</div>
<div class="line"><span class="lineno">  517</span>            }</div>
<div class="line"><span class="lineno">  518</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  519</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab7b51e8dff5aaafa4617c9fdde043b08">SPELL_AURA_SCHOOL_ABSORB</a>:</div>
<div class="line"><span class="lineno">  520</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a034172ccdcc57a664eff33cfbe475f55">SPELL_AURA_MANA_SHIELD</a>:</div>
<div class="line"><span class="lineno">  521</span>            <a class="code hl_variable" href="../../d6/d2f/a10782.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  522</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  523</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a79fed7b57d432e3ad0df6492f387c8b4">SPELL_AURA_MOD_DAMAGE_PERCENT_DONE</a>:</div>
<div class="line"><span class="lineno">  524</span>            <span class="comment">// Titan&#39;s Grip</span></div>
<div class="line"><span class="lineno">  525</span>            <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno">  526</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  527</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 49152 &amp;&amp; caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno">  528</span>            {</div>
<div class="line"><span class="lineno">  529</span>                <a class="code hl_class" href="../../db/d24/a08098.html">Item</a>* item1 = caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ac8e55e9ca3aec15337a7a952aa8efac8">GetWeaponForAttack</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>);</div>
<div class="line"><span class="lineno">  530</span>                <a class="code hl_class" href="../../db/d24/a08098.html">Item</a>* item2 = caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ac8e55e9ca3aec15337a7a952aa8efac8">GetWeaponForAttack</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>);</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>                <span class="keywordflow">if</span> (!item2)</div>
<div class="line"><span class="lineno">  533</span>                    item2 = caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a8e8e1ee36b5428f86f167102dc998ccb">GetShield</a>();</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>                <span class="keywordflow">if</span> (item1 &amp;&amp; item2</div>
<div class="line"><span class="lineno">  536</span>                    &amp;&amp; (item1-&gt;<a class="code hl_function" href="../../db/d24/a08098.html#a55223032f2942a6f46b10053afe8c73c">GetTemplate</a>()-&gt;<a class="code hl_variable" href="../../d8/dc8/a08122.html#ac47429e999906b62258c7ade930efcbf">InventoryType</a> == <a class="code hl_enumvalue" href="../../da/dfd/a03401.html#a2793ea198e8b328078cf49008fa1d5b1aa6021d97341d71ee92c4bdd366c1491d">INVTYPE_2HWEAPON</a> || item2-&gt;<a class="code hl_function" href="../../db/d24/a08098.html#a55223032f2942a6f46b10053afe8c73c">GetTemplate</a>()-&gt;<a class="code hl_variable" href="../../d8/dc8/a08122.html#ac47429e999906b62258c7ade930efcbf">InventoryType</a> == <a class="code hl_enumvalue" href="../../da/dfd/a03401.html#a2793ea198e8b328078cf49008fa1d5b1aa6021d97341d71ee92c4bdd366c1491d">INVTYPE_2HWEAPON</a>))</div>
<div class="line"><span class="lineno">  537</span>                {</div>
<div class="line"><span class="lineno">  538</span>                    amount = -10;</div>
<div class="line"><span class="lineno">  539</span>                }</div>
<div class="line"><span class="lineno">  540</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  541</span>                    amount = 0;</div>
<div class="line"><span class="lineno">  542</span>            }</div>
<div class="line"><span class="lineno">  543</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  544</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  545</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  546</span>    }</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>    <span class="comment">// xinef: save base amount, before calculating sp etc. Used for Unit::CastDelayedSpellWithPeriodicAmount</span></div>
<div class="line"><span class="lineno">  549</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#a04d3cc9ebda15ebf8f10650864d0724a">SetOldAmount</a>(amount * <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetStackAmount());</div>
<div class="line"><span class="lineno">  550</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a38c31b87dea32024c55f15d37faa93da">CallScriptEffectCalcAmountHandlers</a>(<span class="keyword">this</span>, amount, <a class="code hl_variable" href="../../d6/d2f/a10782.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a>);</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>    <span class="comment">// Xinef: Periodic auras</span></div>
<div class="line"><span class="lineno">  553</span>    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno">  554</span>        <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><span class="lineno">  555</span>        {</div>
<div class="line"><span class="lineno">  556</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>:</div>
<div class="line"><span class="lineno">  557</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a>:</div>
<div class="line"><span class="lineno">  558</span>                <span class="comment">// xinef: save caster depending auras, always pass 1 as stack amount, effect will be multiplicated at the end of the function by correct value!</span></div>
<div class="line"><span class="lineno">  559</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetType() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a>)</div>
<div class="line"><span class="lineno">  560</span>                    amount = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aeee2a716058141444b84649bc9c86d70">SpellDamageBonusDone</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetUnitOwner(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), amount, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a81665a31d5e4a49027abd82be607a736">GetPctMods</a>(), 1);</div>
<div class="line"><span class="lineno">  561</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  562</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a>:</div>
<div class="line"><span class="lineno">  563</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetType() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a>)</div>
<div class="line"><span class="lineno">  564</span>                    amount = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a511ec62a25ddf784aeb00787a0629b9d">SpellHealingBonusDone</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetUnitOwner(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), amount, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a81665a31d5e4a49027abd82be607a736">GetPctMods</a>(), 1);</div>
<div class="line"><span class="lineno">  565</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  566</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a221e08dbedc5adf62f8ab5549bff2c77">SPELL_AURA_DAMAGE_SHIELD</a>:</div>
<div class="line"><span class="lineno">  567</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetType() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a>)</div>
<div class="line"><span class="lineno">  568</span>                    amount = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aeee2a716058141444b84649bc9c86d70">SpellDamageBonusDone</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetUnitOwner(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), amount, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a9308d3cdd6446af40814a12302809f54">SPELL_DIRECT_DAMAGE</a>, 0.0f, 1);</div>
<div class="line"><span class="lineno">  569</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  570</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  571</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  572</span>        }</div>
<div class="line"><span class="lineno">  573</span> </div>
<div class="line"><span class="lineno">  574</span>    amount *= <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>();</div>
<div class="line"><span class="lineno">  575</span>    <span class="keywordflow">return</span> amount;</div>
<div class="line"><span class="lineno">  576</span>}</div>
<div class="ttc" id="aa00377_html_a53176b459b4462b058b2a1be47ef82ee"><div class="ttname"><a href="../../d4/d13/a00377.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a></div><div class="ttdeci">T AddPct(T &amp;base, U pct)</div><div class="ttdef"><b>Definition:</b> Util.h:67</div></div>
<div class="ttc" id="aa00497_html_a0bf9964a3ce962c07ad3d8b5432bbbcd"><div class="ttname"><a href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a></div><div class="ttdeci">std::int32_t int32</div><div class="ttdef"><b>Definition:</b> Define.h:103</div></div>
<div class="ttc" id="aa00497_html_a22f78cc9780bf32aff91ae17c3101c8d"><div class="ttname"><a href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a></div><div class="ttdeci">std::uint32_t uint32</div><div class="ttdef"><b>Definition:</b> Define.h:107</div></div>
<div class="ttc" id="aa02750_html_ab66cd5828c451f68f55f1b054c29a8fc"><div class="ttname"><a href="../../d7/d14/a02750.html#ab66cd5828c451f68f55f1b054c29a8fc">MAX_SPELL_ITEM_ENCHANTMENT_EFFECTS</a></div><div class="ttdeci">#define MAX_SPELL_ITEM_ENCHANTMENT_EFFECTS</div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1837</div></div>
<div class="ttc" id="aa02750_html_af0d8d6c7748de71fbd87ae5d02985404"><div class="ttname"><a href="../../d7/d14/a02750.html#af0d8d6c7748de71fbd87ae5d02985404">MAX_ITEM_ENCHANTMENT_EFFECTS</a></div><div class="ttdeci">#define MAX_ITEM_ENCHANTMENT_EFFECTS</div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1203</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a034172ccdcc57a664eff33cfbe475f55"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a034172ccdcc57a664eff33cfbe475f55">SPELL_AURA_MANA_SHIELD</a></div><div class="ttdeci">@ SPELL_AURA_MANA_SHIELD</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:160</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_DAMAGE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:66</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a221e08dbedc5adf62f8ab5549bff2c77"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a221e08dbedc5adf62f8ab5549bff2c77">SPELL_AURA_DAMAGE_SHIELD</a></div><div class="ttdeci">@ SPELL_AURA_DAMAGE_SHIELD</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:78</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b">SPELL_AURA_PROC_TRIGGER_SPELL</a></div><div class="ttdeci">@ SPELL_AURA_PROC_TRIGGER_SPELL</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:105</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a></div><div class="ttdeci">@ SPELL_AURA_MOD_FEAR</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:70</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_HEAL</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:71</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a79fed7b57d432e3ad0df6492f387c8b4"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a79fed7b57d432e3ad0df6492f387c8b4">SPELL_AURA_MOD_DAMAGE_PERCENT_DONE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_DAMAGE_PERCENT_DONE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:142</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_ROOT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:89</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ab4e25ba6068fba0c5d7c5ac8adbbf8fa"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab4e25ba6068fba0c5d7c5ac8adbbf8fa">SPELL_AURA_TRANSFORM</a></div><div class="ttdeci">@ SPELL_AURA_TRANSFORM</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:119</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ab7b51e8dff5aaafa4617c9fdde043b08"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab7b51e8dff5aaafa4617c9fdde043b08">SPELL_AURA_SCHOOL_ABSORB</a></div><div class="ttdeci">@ SPELL_AURA_SCHOOL_ABSORB</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:132</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_LEECH</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:116</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_CONFUSE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:68</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799aee9829857fab1a5438db7a7fdf8806fa"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee9829857fab1a5438db7a7fdf8806fa">SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</a></div><div class="ttdeci">@ SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:175</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a></div><div class="ttdeci">@ SPELL_AURA_MOD_STUN</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:75</div></div>
<div class="ttc" id="aa03092_html_ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379"><div class="ttname"><a href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a></div><div class="ttdeci">@ UNIT_AURA_TYPE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:385</div></div>
<div class="ttc" id="aa03401_html_a2793ea198e8b328078cf49008fa1d5b1aa6021d97341d71ee92c4bdd366c1491d"><div class="ttname"><a href="../../da/dfd/a03401.html#a2793ea198e8b328078cf49008fa1d5b1aa6021d97341d71ee92c4bdd366c1491d">INVTYPE_2HWEAPON</a></div><div class="ttdeci">@ INVTYPE_2HWEAPON</div><div class="ttdef"><b>Definition:</b> ItemTemplate.h:273</div></div>
<div class="ttc" id="aa03515_html_a85524ab4e1fb005ed500bd190f79c352a052681ec165e5b5e3edcf2089607ae67"><div class="ttname"><a href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a></div><div class="ttdeci">@ OFF_ATTACK</div><div class="ttdef"><b>Definition:</b> Unit.h:210</div></div>
<div class="ttc" id="aa03515_html_ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f"><div class="ttname"><a href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a></div><div class="ttdeci">@ DOT</div><div class="ttdef"><b>Definition:</b> Unit.h:250</div></div>
<div class="ttc" id="aa03515_html_ab0b8a9de485ea928c497ac0b5f9040b1a9308d3cdd6446af40814a12302809f54"><div class="ttname"><a href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a9308d3cdd6446af40814a12302809f54">SPELL_DIRECT_DAMAGE</a></div><div class="ttdeci">@ SPELL_DIRECT_DAMAGE</div><div class="ttdef"><b>Definition:</b> Unit.h:249</div></div>
<div class="ttc" id="aa03704_html_a056a6a649116138e9e8c21d35a78476b"><div class="ttname"><a href="../../d7/da2/a03704.html#a056a6a649116138e9e8c21d35a78476b">sSpellItemEnchantmentStore</a></div><div class="ttdeci">DBCStorage&lt; SpellItemEnchantmentEntry &gt; sSpellItemEnchantmentStore(SpellItemEnchantmentfmt)</div></div>
<div class="ttc" id="aa03704_html_a8f24671edcebdacd8a25038525cfde6b"><div class="ttname"><a href="../../d7/da2/a03704.html#a8f24671edcebdacd8a25038525cfde6b">sItemRandomSuffixStore</a></div><div class="ttdeci">DBCStorage&lt; ItemRandomSuffixEntry &gt; sItemRandomSuffixStore(ItemRandomSuffixfmt)</div></div>
<div class="ttc" id="aa08098_html"><div class="ttname"><a href="../../db/d24/a08098.html">Item</a></div><div class="ttdef"><b>Definition:</b> Item.h:220</div></div>
<div class="ttc" id="aa08098_html_a55223032f2942a6f46b10053afe8c73c"><div class="ttname"><a href="../../db/d24/a08098.html#a55223032f2942a6f46b10053afe8c73c">Item::GetTemplate</a></div><div class="ttdeci">ItemTemplate const * GetTemplate() const</div><div class="ttdef"><b>Definition:</b> Item.cpp:544</div></div>
<div class="ttc" id="aa08122_html_ac47429e999906b62258c7ade930efcbf"><div class="ttname"><a href="../../d8/dc8/a08122.html#ac47429e999906b62258c7ade930efcbf">ItemTemplate::InventoryType</a></div><div class="ttdeci">uint32 InventoryType</div><div class="ttdef"><b>Definition:</b> ItemTemplate.h:632</div></div>
<div class="ttc" id="aa08386_html_a8e8e1ee36b5428f86f167102dc998ccb"><div class="ttname"><a href="../../d0/dc6/a08386.html#a8e8e1ee36b5428f86f167102dc998ccb">Player::GetShield</a></div><div class="ttdeci">Item * GetShield(bool useable=false) const</div><div class="ttdef"><b>Definition:</b> PlayerStorage.cpp:523</div></div>
<div class="ttc" id="aa08386_html_ac8e55e9ca3aec15337a7a952aa8efac8"><div class="ttname"><a href="../../d0/dc6/a08386.html#ac8e55e9ca3aec15337a7a952aa8efac8">Player::GetWeaponForAttack</a></div><div class="ttdeci">Item * GetWeaponForAttack(WeaponAttackType attackType, bool useable=false) const</div><div class="ttdef"><b>Definition:</b> PlayerStorage.cpp:488</div></div>
<div class="ttc" id="aa08518_html_a0b6417e1489c3f2e1ced1e0384d48ff8"><div class="ttname"><a href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">Unit::GetAuraEffectsByType</a></div><div class="ttdeci">AuraEffectList const &amp; GetAuraEffectsByType(AuraType type) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1349</div></div>
<div class="ttc" id="aa08518_html_a511ec62a25ddf784aeb00787a0629b9d"><div class="ttname"><a href="../../db/df9/a08518.html#a511ec62a25ddf784aeb00787a0629b9d">Unit::SpellHealingBonusDone</a></div><div class="ttdeci">uint32 SpellHealingBonusDone(Unit *victim, SpellInfo const *spellProto, uint32 healamount, DamageEffectType damagetype, uint8 effIndex, float TotalMod=0.0f, uint32 stack=1)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:12447</div></div>
<div class="ttc" id="aa08518_html_aeee2a716058141444b84649bc9c86d70"><div class="ttname"><a href="../../db/df9/a08518.html#aeee2a716058141444b84649bc9c86d70">Unit::SpellDamageBonusDone</a></div><div class="ttdeci">uint32 SpellDamageBonusDone(Unit *victim, SpellInfo const *spellProto, uint32 pdamage, DamageEffectType damagetype, uint8 effIndex, float TotalMod=0.0f, uint32 stack=1)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:11610</div></div>
<div class="ttc" id="aa10782_html_a04d3cc9ebda15ebf8f10650864d0724a"><div class="ttname"><a href="../../d6/d2f/a10782.html#a04d3cc9ebda15ebf8f10650864d0724a">AuraEffect::SetOldAmount</a></div><div class="ttdeci">void SetOldAmount(int32 amount)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:117</div></div>
<div class="ttc" id="aa10782_html_a120cf8a45a3c816e4ef588733fa812e5"><div class="ttname"><a href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">AuraEffect::GetAuraType</a></div><div class="ttdeci">AuraType GetAuraType() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:447</div></div>
<div class="ttc" id="aa10782_html_a81665a31d5e4a49027abd82be607a736"><div class="ttname"><a href="../../d6/d2f/a10782.html#a81665a31d5e4a49027abd82be607a736">AuraEffect::GetPctMods</a></div><div class="ttdeci">float GetPctMods() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:112</div></div>
<div class="ttc" id="aa10782_html_ab8c4811ced24cbd9b4afff1c22fbb1b0"><div class="ttname"><a href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">AuraEffect::GetEffIndex</a></div><div class="ttdeci">uint32 GetEffIndex() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:56</div></div>
<div class="ttc" id="aa10794_html_a38c31b87dea32024c55f15d37faa93da"><div class="ttname"><a href="../../df/d4a/a10794.html#a38c31b87dea32024c55f15d37faa93da">Aura::CallScriptEffectCalcAmountHandlers</a></div><div class="ttdeci">void CallScriptEffectCalcAmountHandlers(AuraEffect const *aurEff, int32 &amp;amount, bool &amp;canBeRecalculated)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2517</div></div>
<div class="ttc" id="aa10794_html_aae0b7e0da61a681e67a19b6d23c2cee6"><div class="ttname"><a href="../../df/d4a/a10794.html#aae0b7e0da61a681e67a19b6d23c2cee6">Aura::GetStackAmount</a></div><div class="ttdeci">uint8 GetStackAmount() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:148</div></div>
<div class="ttc" id="aa10898_html_a49bc14059c2bd3785231c52e0d54d382"><div class="ttname"><a href="../../d2/db6/a10898.html#a49bc14059c2bd3785231c52e0d54d382">SpellInfo::Id</a></div><div class="ttdeci">uint32 Id</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:320</div></div>
<div class="ttc" id="aa10898_html_a7909fc70161065f6107211ee8ed3c6bf"><div class="ttname"><a href="../../d2/db6/a10898.html#a7909fc70161065f6107211ee8ed3c6bf">SpellInfo::ProcFlags</a></div><div class="ttdeci">uint32 ProcFlags</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:355</div></div>
<div class="ttc" id="aa10898_html_aefe1e81c5922419ada55844bdb30e269"><div class="ttname"><a href="../../d2/db6/a10898.html#aefe1e81c5922419ada55844bdb30e269">SpellInfo::HasAura</a></div><div class="ttdeci">bool HasAura(AuraType aura) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:893</div></div>
<div class="ttc" id="aa27834_html"><div class="ttname"><a href="../../d9/db5/a27834.html">ItemRandomSuffixEntry</a></div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1216</div></div>
<div class="ttc" id="aa27834_html_a45d752dfd00a75f69d919a88573ba4fc"><div class="ttname"><a href="../../d9/db5/a27834.html#a45d752dfd00a75f69d919a88573ba4fc">ItemRandomSuffixEntry::AllocationPct</a></div><div class="ttdeci">std::array&lt; uint32, MAX_ITEM_ENCHANTMENT_EFFECTS &gt; AllocationPct</div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1223</div></div>
<div class="ttc" id="aa27834_html_a45e694082c1dbdeef5229561f617d584"><div class="ttname"><a href="../../d9/db5/a27834.html#a45e694082c1dbdeef5229561f617d584">ItemRandomSuffixEntry::Enchantment</a></div><div class="ttdeci">std::array&lt; uint32, MAX_ITEM_ENCHANTMENT_EFFECTS &gt; Enchantment</div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1221</div></div>
<div class="ttc" id="aa27978_html"><div class="ttname"><a href="../../d3/d91/a27978.html">SpellItemEnchantmentEntry</a></div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1840</div></div>
<div class="ttc" id="aa27978_html_a694edc79cf8ba571338bff2a3aad512d"><div class="ttname"><a href="../../d3/d91/a27978.html#a694edc79cf8ba571338bff2a3aad512d">SpellItemEnchantmentEntry::spellid</a></div><div class="ttdeci">uint32 spellid[MAX_SPELL_ITEM_ENCHANTMENT_EFFECTS]</div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1846</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00067">AddPct()</a>, <a class="el" href="../../#l01223">ItemRandomSuffixEntry::AllocationPct</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l02517">Aura::CallScriptEffectCalcAmountHandlers()</a>, <a class="el" href="../../#l00250">DOT</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l01221">ItemRandomSuffixEntry::Enchantment</a>, <a class="el" href="../../#l01349">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00112">GetPctMods()</a>, <a class="el" href="../../#l00523">Player::GetShield()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00148">Aura::GetStackAmount()</a>, <a class="el" href="../../#l00544">Item::GetTemplate()</a>, <a class="el" href="../../#l00488">Player::GetWeaponForAttack()</a>, <a class="el" href="../../#l00893">SpellInfo::HasAura()</a>, <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l00632">ItemTemplate::InventoryType</a>, <a class="el" href="../../#l00273">INVTYPE_2HWEAPON</a>, <a class="el" href="../../#l00124">m_baseAmount</a>, <a class="el" href="../../#l00147">m_canBeRecalculated</a>, <a class="el" href="../../#l00146">m_effIndex</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l01203">MAX_ITEM_ENCHANTMENT_EFFECTS</a>, <a class="el" href="../../#l01837">MAX_SPELL_ITEM_ENCHANTMENT_EFFECTS</a>, <a class="el" href="../../#l00210">OFF_ATTACK</a>, <a class="el" href="../../#l00355">SpellInfo::ProcFlags</a>, <a class="el" href="../../#l00117">SetOldAmount()</a>, <a class="el" href="../../d7/da2/a03704.html#a8f24671edcebdacd8a25038525cfde6b">sItemRandomSuffixStore</a>, <a class="el" href="../../#l00078">SPELL_AURA_DAMAGE_SHIELD</a>, <a class="el" href="../../#l00160">SPELL_AURA_MANA_SHIELD</a>, <a class="el" href="../../#l00068">SPELL_AURA_MOD_CONFUSE</a>, <a class="el" href="../../#l00142">SPELL_AURA_MOD_DAMAGE_PERCENT_DONE</a>, <a class="el" href="../../#l00070">SPELL_AURA_MOD_FEAR</a>, <a class="el" href="../../#l00089">SPELL_AURA_MOD_ROOT</a>, <a class="el" href="../../#l00075">SPELL_AURA_MOD_STUN</a>, <a class="el" href="../../#l00175">SPELL_AURA_OVERRIDE_CLASS_SCRIPTS</a>, <a class="el" href="../../#l00066">SPELL_AURA_PERIODIC_DAMAGE</a>, <a class="el" href="../../#l00071">SPELL_AURA_PERIODIC_HEAL</a>, <a class="el" href="../../#l00116">SPELL_AURA_PERIODIC_LEECH</a>, <a class="el" href="../../#l00105">SPELL_AURA_PROC_TRIGGER_SPELL</a>, <a class="el" href="../../#l00132">SPELL_AURA_SCHOOL_ABSORB</a>, <a class="el" href="../../#l00119">SPELL_AURA_TRANSFORM</a>, <a class="el" href="../../#l00249">SPELL_DIRECT_DAMAGE</a>, <a class="el" href="../../#l11610">Unit::SpellDamageBonusDone()</a>, <a class="el" href="../../#l12447">Unit::SpellHealingBonusDone()</a>, <a class="el" href="../../#l01846">SpellItemEnchantmentEntry::spellid</a>, <a class="el" href="../../d7/da2/a03704.html#a056a6a649116138e9e8c21d35a78476b">sSpellItemEnchantmentStore</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00385">UNIT_AURA_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00383">AuraEffect()</a>, <a class="el" href="../../#l00823">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00245">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00296">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00238">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00353">spell_warl_generic_scaling::HandlePeriodic()</a>, and <a class="el" href="../../#l00076">RecalculateAmount()</a>.</p>

</div>
</div>
<a id="a5b0a6694f62bf72c41a1f461f9894581" name="a5b0a6694f62bf72c41a1f461f9894581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b0a6694f62bf72c41a1f461f9894581">&#9670;&#160;</a></span>CalculatePeriodic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::CalculatePeriodic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>create</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>load</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000111">Todo:</a></b></dt><dd>: Not sure whether the fallthrough was a mistake (forgetting a break) or intended. This should be double-checked. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  594</span>{</div>
<div class="line"><span class="lineno">  595</span>    <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> = <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].Amplitude;</div>
<div class="line"><span class="lineno">  596</span> </div>
<div class="line"><span class="lineno">  597</span>    <span class="comment">// prepare periodics</span></div>
<div class="line"><span class="lineno">  598</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><span class="lineno">  599</span>    {</div>
<div class="line"><span class="lineno">  600</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a4f1feb3950d2776a74c938c366adbbdf">SPELL_AURA_OBS_MOD_POWER</a>:</div>
<div class="line"><span class="lineno">  601</span>            <span class="comment">// 3 spells have no amplitude set</span></div>
<div class="line"><span class="lineno">  602</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>)</div>
<div class="line"><span class="lineno">  603</span>                <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> = 1 * <a class="code hl_variable" href="../../d4/d51/a00017.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a>;</div>
<div class="line"><span class="lineno">  604</span>            [[fallthrough]]; </div>
<div class="line"><span class="lineno">  605</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>:</div>
<div class="line"><span class="lineno">  606</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a>:</div>
<div class="line"><span class="lineno">  607</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a>:</div>
<div class="line"><span class="lineno">  608</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>:</div>
<div class="line"><span class="lineno">  609</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ae054658138830d9b34867a15c8bb9f5c">SPELL_AURA_PERIODIC_TRIGGER_SPELL_FROM_CLIENT</a>:</div>
<div class="line"><span class="lineno">  610</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab9f377f6e107ad1633d32a22da2ec7d2">SPELL_AURA_PERIODIC_ENERGIZE</a>:</div>
<div class="line"><span class="lineno">  611</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a>:</div>
<div class="line"><span class="lineno">  612</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2b064a34862eb2f85ec873398d787012">SPELL_AURA_PERIODIC_HEALTH_FUNNEL</a>:</div>
<div class="line"><span class="lineno">  613</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2eb3f6e6a49bc0b70fa9726b1fa12bb3">SPELL_AURA_PERIODIC_MANA_LEECH</a>:</div>
<div class="line"><span class="lineno">  614</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a65c8ec2c8667d6c49c278491c113a374">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>:</div>
<div class="line"><span class="lineno">  615</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ad06611922c0cf903c24b220140daacab">SPELL_AURA_POWER_BURN</a>:</div>
<div class="line"><span class="lineno">  616</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56">SPELL_AURA_PERIODIC_DUMMY</a>:</div>
<div class="line"><span class="lineno">  617</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab6c4d806c60e94fec189c27a7a205576">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a>:</div>
<div class="line"><span class="lineno">  618</span>            <a class="code hl_variable" href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  619</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  620</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  621</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  622</span>    }</div>
<div class="line"><span class="lineno">  623</span> </div>
<div class="line"><span class="lineno">  624</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#abd4f379de7ed0890f28df1209aad70c7">CallScriptEffectCalcPeriodicHandlers</a>(<span class="keyword">this</span>, <a class="code hl_variable" href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a>, <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>);</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a>)</div>
<div class="line"><span class="lineno">  627</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  628</span> </div>
<div class="line"><span class="lineno">  629</span>    <span class="comment">// Xinef: fix broken data in dbc</span></div>
<div class="line"><span class="lineno">  630</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> &lt;= 0)</div>
<div class="line"><span class="lineno">  631</span>        <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> = 1000;</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>    <a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* modOwner = caster ? caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a2e6a98844f96c211f47b911a2766ada8">GetSpellModOwner</a>() : <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  634</span> </div>
<div class="line"><span class="lineno">  635</span>    <span class="comment">// Apply casting time mods</span></div>
<div class="line"><span class="lineno">  636</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>)</div>
<div class="line"><span class="lineno">  637</span>    {</div>
<div class="line"><span class="lineno">  638</span>        <span class="comment">// Apply periodic time mod</span></div>
<div class="line"><span class="lineno">  639</span>        <span class="keywordflow">if</span> (modOwner)</div>
<div class="line"><span class="lineno">  640</span>            modOwner-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ac49430e1a68d78207f5e3a932a9306ce">ApplySpellMod</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351ab3f74709d60168df2a2cc72b62da55cb">SPELLMOD_ACTIVATION_TIME</a>, <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>);</div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span>        <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno">  643</span>        {</div>
<div class="line"><span class="lineno">  644</span>            <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a000570a88dd253d3746e6ff5ac1c918b">HasAuraTypeWithAffectMask</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1191ab2524c100b0d91f8d63cee8e781">SPELL_AURA_PERIODIC_HASTE</a>, <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>) || <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a376aa62261a98289589839b821786adaa884cc9555b9162ae33956c5ded8cb1d7">SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</a>))</div>
<div class="line"><span class="lineno">  645</span>                <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> * caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a8797257c31223076c1b76b4b1a6f8007">GetFloatValue</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235">UNIT_MOD_CAST_SPEED</a>));</div>
<div class="line"><span class="lineno">  646</span>        }</div>
<div class="line"><span class="lineno">  647</span>    }</div>
<div class="line"><span class="lineno">  648</span> </div>
<div class="line"><span class="lineno">  649</span>    <span class="keywordflow">if</span> (load) <span class="comment">// aura loaded from db</span></div>
<div class="line"><span class="lineno">  650</span>    {</div>
<div class="line"><span class="lineno">  651</span>        <a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> = <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> ? <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">GetDuration</a>() / <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> : 0;</div>
<div class="line"><span class="lineno">  652</span>        <a class="code hl_variable" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> = <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> ? <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">GetDuration</a>() % <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a> : 0;</div>
<div class="line"><span class="lineno">  653</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a376aa62261a98289589839b821786adaa1e5646f92d527da8a1a98bb0f14f3b86">SPELL_ATTR5_EXTRA_INITIAL_PERIOD</a>))</div>
<div class="line"><span class="lineno">  654</span>            ++<a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a>;</div>
<div class="line"><span class="lineno">  655</span>    }</div>
<div class="line"><span class="lineno">  656</span>    <span class="keywordflow">else</span> <span class="comment">// aura just created or reapplied</span></div>
<div class="line"><span class="lineno">  657</span>    {</div>
<div class="line"><span class="lineno">  658</span>        <a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> = 0;</div>
<div class="line"><span class="lineno">  659</span>        <span class="comment">// reset periodic timer on aura create or on reapply when aura isn&#39;t dot</span></div>
<div class="line"><span class="lineno">  660</span>        <span class="comment">// possibly we should not reset periodic timers only when aura is triggered by proc</span></div>
<div class="line"><span class="lineno">  661</span>        <span class="comment">// or maybe there&#39;s a spell attribute somewhere</span></div>
<div class="line"><span class="lineno">  662</span>        <span class="keywordtype">bool</span> resetPeriodicTimer = create</div>
<div class="line"><span class="lineno">  663</span>                                  || ((<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>) &amp;&amp; (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a65c8ec2c8667d6c49c278491c113a374">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>));</div>
<div class="line"><span class="lineno">  664</span> </div>
<div class="line"><span class="lineno">  665</span>        <span class="keywordflow">if</span> (resetPeriodicTimer)</div>
<div class="line"><span class="lineno">  666</span>        {</div>
<div class="line"><span class="lineno">  667</span>            <a class="code hl_variable" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> = 0;</div>
<div class="line"><span class="lineno">  668</span>            <span class="comment">// Start periodic on next tick or at aura apply</span></div>
<div class="line"><span class="lineno">  669</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>)</div>
<div class="line"><span class="lineno">  670</span>            {</div>
<div class="line"><span class="lineno">  671</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a376aa62261a98289589839b821786adaa1e5646f92d527da8a1a98bb0f14f3b86">SPELL_ATTR5_EXTRA_INITIAL_PERIOD</a>))</div>
<div class="line"><span class="lineno">  672</span>                    <a class="code hl_variable" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> += <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>;</div>
<div class="line"><span class="lineno">  673</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (caster &amp;&amp; caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae1ce57b02474672763481af5c4e7ef6f">IsTotem</a>()) <span class="comment">// for totems only ;d</span></div>
<div class="line"><span class="lineno">  674</span>                {</div>
<div class="line"><span class="lineno">  675</span>                    <a class="code hl_variable" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> = 100; <span class="comment">// make it ALMOST instant</span></div>
<div class="line"><span class="lineno">  676</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ae24c050668e78ef9d8728e6b5bd77c12">IsPassive</a>())</div>
<div class="line"><span class="lineno">  677</span>                        <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a99930c42ad9f6e002ffe6de5e5fbe59b">SetDuration</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">GetDuration</a>() + 100);</div>
<div class="line"><span class="lineno">  678</span>                }</div>
<div class="line"><span class="lineno">  679</span>            }</div>
<div class="line"><span class="lineno">  680</span>        }</div>
<div class="line"><span class="lineno">  681</span>    }</div>
<div class="line"><span class="lineno">  682</span>}</div>
<div class="ttc" id="aa00017_html_a84190f79c8167211609f67284e066c58"><div class="ttname"><a href="../../d4/d51/a00017.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a></div><div class="ttdeci">constexpr auto IN_MILLISECONDS</div><div class="ttdef"><b>Definition:</b> Common.h:53</div></div>
<div class="ttc" id="aa02771_html_a376aa62261a98289589839b821786adaa1e5646f92d527da8a1a98bb0f14f3b86"><div class="ttname"><a href="../../d0/dbd/a02771.html#a376aa62261a98289589839b821786adaa1e5646f92d527da8a1a98bb0f14f3b86">SPELL_ATTR5_EXTRA_INITIAL_PERIOD</a></div><div class="ttdeci">@ SPELL_ATTR5_EXTRA_INITIAL_PERIOD</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:576</div></div>
<div class="ttc" id="aa02771_html_a376aa62261a98289589839b821786adaa884cc9555b9162ae33956c5ded8cb1d7"><div class="ttname"><a href="../../d0/dbd/a02771.html#a376aa62261a98289589839b821786adaa884cc9555b9162ae33956c5ded8cb1d7">SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</a></div><div class="ttdeci">@ SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:580</div></div>
<div class="ttc" id="aa03080_html_a39b60e1f12cca9b6873cb817e7717351ab3f74709d60168df2a2cc72b62da55cb"><div class="ttname"><a href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351ab3f74709d60168df2a2cc72b62da55cb">SPELLMOD_ACTIVATION_TIME</a></div><div class="ttdeci">@ SPELLMOD_ACTIVATION_TIME</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:95</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a1191ab2524c100b0d91f8d63cee8e781"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1191ab2524c100b0d91f8d63cee8e781">SPELL_AURA_PERIODIC_HASTE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_HASTE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:379</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a></div><div class="ttdeci">@ SPELL_AURA_OBS_MOD_HEALTH</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:83</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a2b064a34862eb2f85ec873398d787012"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2b064a34862eb2f85ec873398d787012">SPELL_AURA_PERIODIC_HEALTH_FUNNEL</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_HEALTH_FUNNEL</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:125</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a2eb3f6e6a49bc0b70fa9726b1fa12bb3"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2eb3f6e6a49bc0b70fa9726b1fa12bb3">SPELL_AURA_PERIODIC_MANA_LEECH</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_MANA_LEECH</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:127</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a4f1feb3950d2776a74c938c366adbbdf"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a4f1feb3950d2776a74c938c366adbbdf">SPELL_AURA_OBS_MOD_POWER</a></div><div class="ttdeci">@ SPELL_AURA_OBS_MOD_POWER</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:84</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a65c8ec2c8667d6c49c278491c113a374"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a65c8ec2c8667d6c49c278491c113a374">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_DAMAGE_PERCENT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:152</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ab6c4d806c60e94fec189c27a7a205576"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab6c4d806c60e94fec189c27a7a205576">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:290</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ab9f377f6e107ad1633d32a22da2ec7d2"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab9f377f6e107ad1633d32a22da2ec7d2">SPELL_AURA_PERIODIC_ENERGIZE</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_ENERGIZE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:87</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ad06611922c0cf903c24b220140daacab"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ad06611922c0cf903c24b220140daacab">SPELL_AURA_POWER_BURN</a></div><div class="ttdeci">@ SPELL_AURA_POWER_BURN</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:225</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56">SPELL_AURA_PERIODIC_DUMMY</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_DUMMY</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:289</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ae054658138830d9b34867a15c8bb9f5c"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ae054658138830d9b34867a15c8bb9f5c">SPELL_AURA_PERIODIC_TRIGGER_SPELL_FROM_CLIENT</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_TRIGGER_SPELL_FROM_CLIENT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:111</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a></div><div class="ttdeci">@ SPELL_AURA_PERIODIC_TRIGGER_SPELL</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:86</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a5662db4f743b497fc17de3f73e4e9235">UNIT_MOD_CAST_SPEED</a></div><div class="ttdeci">@ UNIT_MOD_CAST_SPEED</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:137</div></div>
<div class="ttc" id="aa08142_html_a8797257c31223076c1b76b4b1a6f8007"><div class="ttname"><a href="../../df/d2d/a08142.html#a8797257c31223076c1b76b4b1a6f8007">Object::GetFloatValue</a></div><div class="ttdeci">float GetFloatValue(uint16 index) const</div><div class="ttdef"><b>Definition:</b> Object.cpp:317</div></div>
<div class="ttc" id="aa08386_html_ac49430e1a68d78207f5e3a932a9306ce"><div class="ttname"><a href="../../d0/dc6/a08386.html#ac49430e1a68d78207f5e3a932a9306ce">Player::ApplySpellMod</a></div><div class="ttdeci">void ApplySpellMod(uint32 spellId, SpellModOp op, T &amp;basevalue, Spell *spell=nullptr, bool temporaryPet=false)</div><div class="ttdef"><b>Definition:</b> Player.cpp:9739</div></div>
<div class="ttc" id="aa08518_html_a000570a88dd253d3746e6ff5ac1c918b"><div class="ttname"><a href="../../db/df9/a08518.html#a000570a88dd253d3746e6ff5ac1c918b">Unit::HasAuraTypeWithAffectMask</a></div><div class="ttdeci">bool HasAuraTypeWithAffectMask(AuraType auratype, SpellInfo const *affectedSpell) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5738</div></div>
<div class="ttc" id="aa08518_html_ae1ce57b02474672763481af5c4e7ef6f"><div class="ttname"><a href="../../db/df9/a08518.html#ae1ce57b02474672763481af5c4e7ef6f">Unit::IsTotem</a></div><div class="ttdeci">bool IsTotem() const</div><div class="ttdef"><b>Definition:</b> Unit.h:756</div></div>
<div class="ttc" id="aa10782_html_a9b7657d41ca8a463e12dca94fffdddbc"><div class="ttname"><a href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">AuraEffect::m_amplitude</a></div><div class="ttdeci">int32 m_amplitude</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:143</div></div>
<div class="ttc" id="aa10794_html_a5e79eaa33b5f9ae5aaa44a62d096d6fe"><div class="ttname"><a href="../../df/d4a/a10794.html#a5e79eaa33b5f9ae5aaa44a62d096d6fe">Aura::GetDuration</a></div><div class="ttdeci">int32 GetDuration() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:133</div></div>
<div class="ttc" id="aa10794_html_a99930c42ad9f6e002ffe6de5e5fbe59b"><div class="ttname"><a href="../../df/d4a/a10794.html#a99930c42ad9f6e002ffe6de5e5fbe59b">Aura::SetDuration</a></div><div class="ttdeci">void SetDuration(int32 duration, bool withMods=false)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:868</div></div>
<div class="ttc" id="aa10794_html_abd4f379de7ed0890f28df1209aad70c7"><div class="ttname"><a href="../../df/d4a/a10794.html#abd4f379de7ed0890f28df1209aad70c7">Aura::CallScriptEffectCalcPeriodicHandlers</a></div><div class="ttdeci">void CallScriptEffectCalcPeriodicHandlers(AuraEffect const *aurEff, bool &amp;isPeriodic, int32 &amp;amplitude)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2531</div></div>
<div class="ttc" id="aa10898_html_a975746d6b737abb063ea037327abfc5a"><div class="ttname"><a href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">SpellInfo::HasAttribute</a></div><div class="ttdeci">bool HasAttribute(SpellAttr0 attribute) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:415</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l09739">Player::ApplySpellMod()</a>, <a class="el" href="../../#l02531">Aura::CallScriptEffectCalcPeriodicHandlers()</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00133">Aura::GetDuration()</a>, <a class="el" href="../../#l00317">Object::GetFloatValue()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l16573">Unit::GetSpellModOwner()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l05738">Unit::HasAuraTypeWithAffectMask()</a>, <a class="el" href="../../#l00053">IN_MILLISECONDS</a>, <a class="el" href="../../#l01082">Aura::IsPassive()</a>, <a class="el" href="../../#l00756">Unit::IsTotem()</a>, <a class="el" href="../../#l00143">m_amplitude</a>, <a class="el" href="../../#l00146">m_effIndex</a>, <a class="el" href="../../#l00148">m_isPeriodic</a>, <a class="el" href="../../#l00142">m_periodicTimer</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l00144">m_tickNumber</a>, <a class="el" href="../../#l00868">Aura::SetDuration()</a>, <a class="el" href="../../#l00576">SPELL_ATTR5_EXTRA_INITIAL_PERIOD</a>, <a class="el" href="../../#l00580">SPELL_ATTR5_SPELL_HASTE_AFFECTS_PERIODIC</a>, <a class="el" href="../../#l00083">SPELL_AURA_OBS_MOD_HEALTH</a>, <a class="el" href="../../#l00084">SPELL_AURA_OBS_MOD_POWER</a>, <a class="el" href="../../#l00066">SPELL_AURA_PERIODIC_DAMAGE</a>, <a class="el" href="../../#l00152">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>, <a class="el" href="../../#l00289">SPELL_AURA_PERIODIC_DUMMY</a>, <a class="el" href="../../#l00087">SPELL_AURA_PERIODIC_ENERGIZE</a>, <a class="el" href="../../#l00379">SPELL_AURA_PERIODIC_HASTE</a>, <a class="el" href="../../#l00071">SPELL_AURA_PERIODIC_HEAL</a>, <a class="el" href="../../#l00125">SPELL_AURA_PERIODIC_HEALTH_FUNNEL</a>, <a class="el" href="../../#l00116">SPELL_AURA_PERIODIC_LEECH</a>, <a class="el" href="../../#l00127">SPELL_AURA_PERIODIC_MANA_LEECH</a>, <a class="el" href="../../#l00086">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>, <a class="el" href="../../#l00111">SPELL_AURA_PERIODIC_TRIGGER_SPELL_FROM_CLIENT</a>, <a class="el" href="../../#l00290">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a>, <a class="el" href="../../#l00225">SPELL_AURA_POWER_BURN</a>, <a class="el" href="../../#l00095">SPELLMOD_ACTIVATION_TIME</a>, and <a class="el" href="../../#l00137">UNIT_MOD_CAST_SPEED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00383">AuraEffect()</a>, <a class="el" href="../../#l00155">spell_shadowfang_keep_haunting_spirits_aura::HandleUpdatePeriodic()</a>, and <a class="el" href="../../#l01203">Aura::SetLoadedState()</a>.</p>

</div>
</div>
<a id="ab0b3261b6c7f5ae45348d0113d24f1ed" name="ab0b3261b6c7f5ae45348d0113d24f1ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0b3261b6c7f5ae45348d0113d24f1ed">&#9670;&#160;</a></span>CalculatePeriodicData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::CalculatePeriodicData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  579</span>{</div>
<div class="line"><span class="lineno">  580</span>    <span class="comment">// xinef: save caster depending auras with pct mods</span></div>
<div class="line"><span class="lineno">  581</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetType() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a> &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>())</div>
<div class="line"><span class="lineno">  582</span>    {</div>
<div class="line"><span class="lineno">  583</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#aefe1e81c5922419ada55844bdb30e269">HasAura</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a>))</div>
<div class="line"><span class="lineno">  584</span>            <a class="code hl_variable" href="../../d6/d2f/a10782.html#a8e00da47192a4d1c9139b037d07d565b">m_pctMods</a> = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>()-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab2bce497cf360520a4c41d4949969f9c">SpellPctHealingModsDone</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetUnitOwner(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>);</div>
<div class="line"><span class="lineno">  585</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#aefe1e81c5922419ada55844bdb30e269">HasAura</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>) || <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#aefe1e81c5922419ada55844bdb30e269">HasAura</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a>))</div>
<div class="line"><span class="lineno">  586</span>            <a class="code hl_variable" href="../../d6/d2f/a10782.html#a8e00da47192a4d1c9139b037d07d565b">m_pctMods</a> = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>()-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab8fb7aa2acf87e3b95ac9a8daf5dbaee">SpellPctDamageModsDone</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetUnitOwner(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>);</div>
<div class="line"><span class="lineno">  587</span>    }</div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>())</div>
<div class="line"><span class="lineno">  590</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#aa5fa45a022f85bfea33ae5faf843cd69">SetCritChance</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a43dd810a38d13af5ffee45dc4f7d5aac">CalcPeriodicCritChance</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>(), (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetType() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a9db32fb1dd13d77afd835d5bb6f5d379">UNIT_AURA_TYPE</a> ? <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetUnitOwner() : <span class="keyword">nullptr</span>)));</div>
<div class="line"><span class="lineno">  591</span>}</div>
<div class="ttc" id="aa08518_html_ab2bce497cf360520a4c41d4949969f9c"><div class="ttname"><a href="../../db/df9/a08518.html#ab2bce497cf360520a4c41d4949969f9c">Unit::SpellPctHealingModsDone</a></div><div class="ttdeci">float SpellPctHealingModsDone(Unit *victim, SpellInfo const *spellProto, DamageEffectType damagetype)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:12355</div></div>
<div class="ttc" id="aa08518_html_ab8fb7aa2acf87e3b95ac9a8daf5dbaee"><div class="ttname"><a href="../../db/df9/a08518.html#ab8fb7aa2acf87e3b95ac9a8daf5dbaee">Unit::SpellPctDamageModsDone</a></div><div class="ttdeci">float SpellPctDamageModsDone(Unit *victim, SpellInfo const *spellProto, DamageEffectType damagetype)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:11279</div></div>
<div class="ttc" id="aa10782_html_a43dd810a38d13af5ffee45dc4f7d5aac"><div class="ttname"><a href="../../d6/d2f/a10782.html#a43dd810a38d13af5ffee45dc4f7d5aac">AuraEffect::CalcPeriodicCritChance</a></div><div class="ttdeci">float CalcPeriodicCritChance(Unit const *caster, Unit const *target) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:1044</div></div>
<div class="ttc" id="aa10782_html_a8e00da47192a4d1c9139b037d07d565b"><div class="ttname"><a href="../../d6/d2f/a10782.html#a8e00da47192a4d1c9139b037d07d565b">AuraEffect::m_pctMods</a></div><div class="ttdeci">float m_pctMods</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:131</div></div>
<div class="ttc" id="aa10782_html_a9ca1c0fbc142af46a5926b2d87520ee3"><div class="ttname"><a href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">AuraEffect::GetCaster</a></div><div class="ttdeci">Unit * GetCaster() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:47</div></div>
<div class="ttc" id="aa10782_html_aa5fa45a022f85bfea33ae5faf843cd69"><div class="ttname"><a href="../../d6/d2f/a10782.html#aa5fa45a022f85bfea33ae5faf843cd69">AuraEffect::SetCritChance</a></div><div class="ttdeci">void SetCritChance(float crit)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:109</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01044">CalcPeriodicCritChance()</a>, <a class="el" href="../../#l00250">DOT</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00893">SpellInfo::HasAura()</a>, <a class="el" href="../../#l00131">m_pctMods</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l00109">SetCritChance()</a>, <a class="el" href="../../#l00066">SPELL_AURA_PERIODIC_DAMAGE</a>, <a class="el" href="../../#l00071">SPELL_AURA_PERIODIC_HEAL</a>, <a class="el" href="../../#l00116">SPELL_AURA_PERIODIC_LEECH</a>, <a class="el" href="../../#l11279">Unit::SpellPctDamageModsDone()</a>, <a class="el" href="../../#l12355">Unit::SpellPctHealingModsDone()</a>, and <a class="el" href="../../#l00385">UNIT_AURA_TYPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00383">AuraEffect()</a>.</p>

</div>
</div>
<a id="a5d248ef37c73049cf4df98b6fc1008fe" name="a5d248ef37c73049cf4df98b6fc1008fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d248ef37c73049cf4df98b6fc1008fe">&#9670;&#160;</a></span>CalculateSpellMod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::CalculateSpellMod </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  685</span>{</div>
<div class="line"><span class="lineno">  686</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><span class="lineno">  687</span>    {</div>
<div class="line"><span class="lineno">  688</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a50563ee6555455f041b81ce199ad1a4f">SPELL_AURA_ADD_FLAT_MODIFIER</a>:</div>
<div class="line"><span class="lineno">  689</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2c530c4b7d2f3b77f65f62395bda9c4a">SPELL_AURA_ADD_PCT_MODIFIER</a>:</div>
<div class="line"><span class="lineno">  690</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>)</div>
<div class="line"><span class="lineno">  691</span>            {</div>
<div class="line"><span class="lineno">  692</span>                <a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a> = <span class="keyword">new</span> <a class="code hl_struct" href="../../da/da7/a08290.html">SpellModifier</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>());</div>
<div class="line"><span class="lineno">  693</span>                <a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code hl_variable" href="../../da/da7/a08290.html#a21d017f0c8d3108a0eb5f48798103356">op</a> = <a class="code hl_enumeration" href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351">SpellModOp</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno">  694</span> </div>
<div class="line"><span class="lineno">  695</span>                <a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code hl_variable" href="../../da/da7/a08290.html#a22f64b9c021f5a87f30f01ef117ebb0b">type</a> = <a class="code hl_enumeration" href="../../d7/d13/a03365.html#a946f1b98541e5df18b4b45f6fb144ce8">SpellModType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()); <span class="comment">// SpellModType value == spell aura types</span></div>
<div class="line"><span class="lineno">  696</span>                <a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code hl_variable" href="../../da/da7/a08290.html#a465803efab27b2ba0a49c6571b65b908">spellId</a> = <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>();</div>
<div class="line"><span class="lineno">  697</span>                <a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code hl_variable" href="../../da/da7/a08290.html#aba1b01bf3486d61cc1876b03078a35ee">mask</a> = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].SpellClassMask;</div>
<div class="line"><span class="lineno">  698</span>                <a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code hl_variable" href="../../da/da7/a08290.html#a1aaf71299c2dd27b58a049d252efdee8">charges</a> = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ab07705be94c0c10fce558c80d7208e0b">GetCharges</a>();</div>
<div class="line"><span class="lineno">  699</span>            }</div>
<div class="line"><span class="lineno">  700</span>            <a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>-&gt;<a class="code hl_variable" href="../../da/da7/a08290.html#a31742662ba8112c9e9b972897a928e57">value</a> = <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><span class="lineno">  701</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  702</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  703</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  704</span>    }</div>
<div class="line"><span class="lineno">  705</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a205938814ca394a9a229f4b4e80e54a6">CallScriptEffectCalcSpellModHandlers</a>(<span class="keyword">this</span>, <a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>);</div>
<div class="line"><span class="lineno">  706</span>}</div>
<div class="ttc" id="aa03080_html_a39b60e1f12cca9b6873cb817e7717351"><div class="ttname"><a href="../../d1/d7a/a03080.html#a39b60e1f12cca9b6873cb817e7717351">SpellModOp</a></div><div class="ttdeci">SpellModOp</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:75</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a2c530c4b7d2f3b77f65f62395bda9c4a"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2c530c4b7d2f3b77f65f62395bda9c4a">SPELL_AURA_ADD_PCT_MODIFIER</a></div><div class="ttdeci">@ SPELL_AURA_ADD_PCT_MODIFIER</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:171</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a50563ee6555455f041b81ce199ad1a4f"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a50563ee6555455f041b81ce199ad1a4f">SPELL_AURA_ADD_FLAT_MODIFIER</a></div><div class="ttdeci">@ SPELL_AURA_ADD_FLAT_MODIFIER</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:170</div></div>
<div class="ttc" id="aa03365_html_a946f1b98541e5df18b4b45f6fb144ce8"><div class="ttname"><a href="../../d7/d13/a03365.html#a946f1b98541e5df18b4b45f6fb144ce8">SpellModType</a></div><div class="ttdeci">SpellModType</div><div class="ttdef"><b>Definition:</b> Player.h:92</div></div>
<div class="ttc" id="aa08290_html"><div class="ttname"><a href="../../da/da7/a08290.html">SpellModifier</a></div><div class="ttdef"><b>Definition:</b> Player.h:181</div></div>
<div class="ttc" id="aa08290_html_a1aaf71299c2dd27b58a049d252efdee8"><div class="ttname"><a href="../../da/da7/a08290.html#a1aaf71299c2dd27b58a049d252efdee8">SpellModifier::charges</a></div><div class="ttdeci">int16 charges</div><div class="ttdef"><b>Definition:</b> Player.h:185</div></div>
<div class="ttc" id="aa08290_html_a21d017f0c8d3108a0eb5f48798103356"><div class="ttname"><a href="../../da/da7/a08290.html#a21d017f0c8d3108a0eb5f48798103356">SpellModifier::op</a></div><div class="ttdeci">SpellModOp op</div><div class="ttdef"><b>Definition:</b> Player.h:183</div></div>
<div class="ttc" id="aa08290_html_a22f64b9c021f5a87f30f01ef117ebb0b"><div class="ttname"><a href="../../da/da7/a08290.html#a22f64b9c021f5a87f30f01ef117ebb0b">SpellModifier::type</a></div><div class="ttdeci">SpellModType type</div><div class="ttdef"><b>Definition:</b> Player.h:184</div></div>
<div class="ttc" id="aa08290_html_a31742662ba8112c9e9b972897a928e57"><div class="ttname"><a href="../../da/da7/a08290.html#a31742662ba8112c9e9b972897a928e57">SpellModifier::value</a></div><div class="ttdeci">int32 value</div><div class="ttdef"><b>Definition:</b> Player.h:186</div></div>
<div class="ttc" id="aa08290_html_a465803efab27b2ba0a49c6571b65b908"><div class="ttname"><a href="../../da/da7/a08290.html#a465803efab27b2ba0a49c6571b65b908">SpellModifier::spellId</a></div><div class="ttdeci">uint32 spellId</div><div class="ttdef"><b>Definition:</b> Player.h:188</div></div>
<div class="ttc" id="aa08290_html_aba1b01bf3486d61cc1876b03078a35ee"><div class="ttname"><a href="../../da/da7/a08290.html#aba1b01bf3486d61cc1876b03078a35ee">SpellModifier::mask</a></div><div class="ttdeci">flag96 mask</div><div class="ttdef"><b>Definition:</b> Player.h:187</div></div>
<div class="ttc" id="aa10782_html_afcf272bebf373ad3aebc03cce644cbee"><div class="ttname"><a href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">AuraEffect::GetAmount</a></div><div class="ttdeci">int32 GetAmount() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:64</div></div>
<div class="ttc" id="aa10794_html_a205938814ca394a9a229f4b4e80e54a6"><div class="ttname"><a href="../../df/d4a/a10794.html#a205938814ca394a9a229f4b4e80e54a6">Aura::CallScriptEffectCalcSpellModHandlers</a></div><div class="ttdeci">void CallScriptEffectCalcSpellModHandlers(AuraEffect const *aurEff, SpellModifier *&amp;spellMod)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2545</div></div>
<div class="ttc" id="aa10794_html_ab07705be94c0c10fce558c80d7208e0b"><div class="ttname"><a href="../../df/d4a/a10794.html#ab07705be94c0c10fce558c80d7208e0b">Aura::GetCharges</a></div><div class="ttdeci">uint8 GetCharges() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:141</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02545">Aura::CallScriptEffectCalcSpellModHandlers()</a>, <a class="el" href="../../#l00185">SpellModifier::charges</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00141">Aura::GetCharges()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00140">m_spellmod</a>, <a class="el" href="../../#l00187">SpellModifier::mask</a>, <a class="el" href="../../#l00183">SpellModifier::op</a>, <a class="el" href="../../#l00170">SPELL_AURA_ADD_FLAT_MODIFIER</a>, <a class="el" href="../../#l00171">SPELL_AURA_ADD_PCT_MODIFIER</a>, <a class="el" href="../../#l00188">SpellModifier::spellId</a>, <a class="el" href="../../#l00184">SpellModifier::type</a>, and <a class="el" href="../../#l00186">SpellModifier::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00383">AuraEffect()</a>, <a class="el" href="../../#l00708">ChangeAmount()</a>, and <a class="el" href="../../#l01203">Aura::SetLoadedState()</a>.</p>

</div>
</div>
<a id="a1360fcb79edcab37b0a7b362bb6e7b2a" name="a1360fcb79edcab37b0a7b362bb6e7b2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1360fcb79edcab37b0a7b362bb6e7b2a">&#9670;&#160;</a></span>CanApplyResilience()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AuraEffect::CanApplyResilience </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  111</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a4745b52e662a6dd92ec3b566ef7ca297">m_applyResilience</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00127">m_applyResilience</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, and <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>.</p>

</div>
</div>
<a id="a2322ac1aaf1bdfe21733d082603c503c" name="a2322ac1aaf1bdfe21733d082603c503c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2322ac1aaf1bdfe21733d082603c503c">&#9670;&#160;</a></span>CanBeRecalculated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AuraEffect::CanBeRecalculated </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   78</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00147">m_canBeRecalculated</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01693">Pet::_SaveAuras()</a>, <a class="el" href="../../#l00076">RecalculateAmount()</a>, and <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>.</p>

</div>
</div>
<a id="a07673908af178ffaee01353a6d11a703" name="a07673908af178ffaee01353a6d11a703"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07673908af178ffaee01353a6d11a703">&#9670;&#160;</a></span>ChangeAmount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::ChangeAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>newAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>mark</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>onStackOrReapply</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  709</span>{</div>
<div class="line"><span class="lineno">  710</span>    <span class="comment">// Reapply if amount change</span></div>
<div class="line"><span class="lineno">  711</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> handleMask = 0;</div>
<div class="line"><span class="lineno">  712</span>    <span class="keywordflow">if</span> (newAmount != <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><span class="lineno">  713</span>        handleMask |= <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a>;</div>
<div class="line"><span class="lineno">  714</span>    <span class="keywordflow">if</span> (onStackOrReapply)</div>
<div class="line"><span class="lineno">  715</span>        handleMask |= <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a>;</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>    <span class="keywordflow">if</span> (!handleMask)</div>
<div class="line"><span class="lineno">  718</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span>    std::list&lt;AuraApplication*&gt; effectApplications;</div>
<div class="line"><span class="lineno">  721</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#a3ea63ccc256382991e0802842f69e44f">GetApplicationList</a>(effectApplications);</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span>    <span class="keywordflow">for</span> (std::list&lt;AuraApplication*&gt;::const_iterator apptItr = effectApplications.begin(); apptItr != effectApplications.end(); ++apptItr)</div>
<div class="line"><span class="lineno">  724</span>        <span class="keywordflow">if</span> ((*apptItr)-&gt;HasEffect(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno">  725</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a7710e32fe9dc267292c3b15333521560">HandleEffect</a>(*apptItr, handleMask, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  726</span> </div>
<div class="line"><span class="lineno">  727</span>    <span class="keywordflow">if</span> (handleMask &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a>)</div>
<div class="line"><span class="lineno">  728</span>    {</div>
<div class="line"><span class="lineno">  729</span>        <span class="keywordflow">if</span> (!mark)</div>
<div class="line"><span class="lineno">  730</span>            <a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a> = newAmount;</div>
<div class="line"><span class="lineno">  731</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  732</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a9790b9f33c52c6d3b830dc6f56f08bf0">SetAmount</a>(newAmount);</div>
<div class="line"><span class="lineno">  733</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#a5d248ef37c73049cf4df98b6fc1008fe">CalculateSpellMod</a>();</div>
<div class="line"><span class="lineno">  734</span>    }</div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>    <span class="keywordflow">for</span> (std::list&lt;AuraApplication*&gt;::const_iterator apptItr = effectApplications.begin(); apptItr != effectApplications.end(); ++apptItr)</div>
<div class="line"><span class="lineno">  737</span>        <span class="keywordflow">if</span> ((*apptItr)-&gt;HasEffect(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno">  738</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a7710e32fe9dc267292c3b15333521560">HandleEffect</a>(*apptItr, handleMask, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  739</span>}</div>
<div class="ttc" id="aa03092_html_a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae"><div class="ttname"><a href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_CHANGE_AMOUNT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:44</div></div>
<div class="ttc" id="aa03092_html_a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b"><div class="ttname"><a href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_REAPPLY</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:45</div></div>
<div class="ttc" id="aa10782_html_a3ea63ccc256382991e0802842f69e44f"><div class="ttname"><a href="../../d6/d2f/a10782.html#a3ea63ccc256382991e0802842f69e44f">AuraEffect::GetApplicationList</a></div><div class="ttdeci">void GetApplicationList(std::list&lt; AuraApplication * &gt; &amp;applicationList) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:422</div></div>
<div class="ttc" id="aa10782_html_a7710e32fe9dc267292c3b15333521560"><div class="ttname"><a href="../../d6/d2f/a10782.html#a7710e32fe9dc267292c3b15333521560">AuraEffect::HandleEffect</a></div><div class="ttdeci">void HandleEffect(AuraApplication *aurApp, uint8 mode, bool apply)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:741</div></div>
<div class="ttc" id="aa10782_html_a9790b9f33c52c6d3b830dc6f56f08bf0"><div class="ttname"><a href="../../d6/d2f/a10782.html#a9790b9f33c52c6d3b830dc6f56f08bf0">AuraEffect::SetAmount</a></div><div class="ttdeci">void SetAmount(int32 amount)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:66</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00044">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a>, <a class="el" href="../../#l00045">AURA_EFFECT_HANDLE_REAPPLY</a>, <a class="el" href="../../#l00684">CalculateSpellMod()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00422">GetApplicationList()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00741">HandleEffect()</a>, <a class="el" href="../../#l00129">m_amount</a>, and <a class="el" href="../../#l00066">SetAmount()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00823">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00245">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00296">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00238">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00353">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00076">RecalculateAmount()</a>, and <a class="el" href="../../#l00995">Aura::SetStackAmount()</a>.</p>

</div>
</div>
<a id="ac313992b1527bbeddf09365da0d28ebc" name="ac313992b1527bbeddf09365da0d28ebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac313992b1527bbeddf09365da0d28ebc">&#9670;&#160;</a></span>CleanupTriggeredSpells()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::CleanupTriggeredSpells </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000112">Todo:</a></b></dt><dd>: is there a spell flag, which can solve this in a more sophisticated way? </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 1200</span>{</div>
<div class="line"><span class="lineno"> 1201</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> tSpellId = <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].TriggerSpell;</div>
<div class="line"><span class="lineno"> 1202</span>    <span class="keywordflow">if</span> (!tSpellId)</div>
<div class="line"><span class="lineno"> 1203</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1204</span> </div>
<div class="line"><span class="lineno"> 1205</span>    <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* tProto = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(tSpellId);</div>
<div class="line"><span class="lineno"> 1206</span>    <span class="keywordflow">if</span> (!tProto)</div>
<div class="line"><span class="lineno"> 1207</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1208</span> </div>
<div class="line"><span class="lineno"> 1209</span>    <span class="keywordflow">if</span> (tProto-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#aa8de3a55617f9dbe8313e4d66907a0b7">GetDuration</a>() != -1)</div>
<div class="line"><span class="lineno"> 1210</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1211</span> </div>
<div class="line"><span class="lineno"> 1212</span>    <span class="comment">// needed for spell 43680, maybe others</span></div>
<div class="line"><span class="lineno"> 1214</span><span class="comment"></span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].ApplyAuraName == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 1215</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#aa8de3a55617f9dbe8313e4d66907a0b7">GetDuration</a>()) == <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].Amplitude)</div>
<div class="line"><span class="lineno"> 1216</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1217</span> </div>
<div class="line"><span class="lineno"> 1218</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(tSpellId, <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno"> 1219</span>}</div>
<div class="ttc" id="aa08518_html_aac612f06e84142d92dcfc432b5feb4ac"><div class="ttname"><a href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">Unit::RemoveAurasDueToSpell</a></div><div class="ttdeci">void RemoveAurasDueToSpell(uint32 spellId, ObjectGuid casterGUID=ObjectGuid::Empty, uint8 reqEffMask=0, AuraRemoveMode removeMode=AURA_REMOVE_BY_DEFAULT)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4909</div></div>
<div class="ttc" id="aa10782_html_ad507745acb9935a3a3cb2c6f35788ef6"><div class="ttname"><a href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">AuraEffect::GetCasterGUID</a></div><div class="ttdeci">ObjectGuid GetCasterGUID() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:48</div></div>
<div class="ttc" id="aa10898_html"><div class="ttname"><a href="../../d2/db6/a10898.html">SpellInfo</a></div><div class="ttdef"><b>Definition:</b> SpellInfo.h:316</div></div>
<div class="ttc" id="aa10898_html_aa8de3a55617f9dbe8313e4d66907a0b7"><div class="ttname"><a href="../../d2/db6/a10898.html#aa8de3a55617f9dbe8313e4d66907a0b7">SpellInfo::GetDuration</a></div><div class="ttdeci">int32 GetDuration() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:2338</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l02338">SpellInfo::GetDuration()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../#l00086">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>, and <a class="el" href="../../#l00825">sSpellMgr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>.</p>

</div>
</div>
<a id="afcf272bebf373ad3aebc03cce644cbee" name="afcf272bebf373ad3aebc03cce644cbee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcf272bebf373ad3aebc03cce644cbee">&#9670;&#160;</a></span>GetAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetAmount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   64</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#acec00491f0ec7f7c68d6a25d85b5b53f">m_isAuraEnabled</a> ? <a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a> : 0; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00129">m_amount</a>, and <a class="el" href="../../#l00136">m_isAuraEnabled</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l07017">Player::_ApplyWeaponDependentAuraCritMod()</a>, <a class="el" href="../../#l07050">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../#l01693">Pet::_SaveAuras()</a>, <a class="el" href="../../#l00982">spell_dru_survival_instincts_aura::AfterApply()</a>, <a class="el" href="../../#l02016">spell_the_lich_king_necrotic_plague_jump_aura::AfterDispel()</a>, <a class="el" href="../../#l00582">spell_dru_lifebloom::AfterRemove()</a>, <a class="el" href="../../#l00737">spell_mage_living_bomb::AfterRemove()</a>, <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../#l02502">Unit::CalcHealAbsorb()</a>, <a class="el" href="../../#l00529">spell_sha_earth_shield::CalculateAmount()</a>, <a class="el" href="../../#l00684">CalculateSpellMod()</a>, <a class="el" href="../../#l00708">ChangeAmount()</a>, <a class="el" href="../../#l01472">Spell::EffectHeal()</a>, <a class="el" href="../../#l00323">Spell::EffectSchoolDMG()</a>, <a class="el" href="../../#l00323">spell_nether_portal_perseverence::HandleApply()</a>, <a class="el" href="../../#l01376">spell_warl_glyph_of_felguard::HandleApply()</a>, <a class="el" href="../../#l01415">spell_warl_glyph_of_voidwalker::HandleApply()</a>, <a class="el" href="../../#l00793">spell_pri_renew::HandleApplyEffect()</a>, <a class="el" href="../../#l05409">HandleAuraDummy()</a>, <a class="el" href="../../#l04797">HandleAuraIncreaseBaseHealthPercent()</a>, <a class="el" href="../../#l06053">HandleAuraLinked()</a>, <a class="el" href="../../#l05099">HandleAuraModAttackPower()</a>, <a class="el" href="../../#l05122">HandleAuraModAttackPowerPercent()</a>, <a class="el" href="../../#l04355">HandleAuraModBaseResistancePCT()</a>, <a class="el" href="../../#l04948">HandleAuraModCritPct()</a>, <a class="el" href="../../#l06107">HandleAuraModFakeInebriation()</a>, <a class="el" href="../../#l04730">HandleAuraModIncreaseEnergy()</a>, <a class="el" href="../../#l04750">HandleAuraModIncreaseEnergyPercent()</a>, <a class="el" href="../../#l04685">HandleAuraModIncreaseHealth()</a>, <a class="el" href="../../#l04780">HandleAuraModIncreaseHealthPercent()</a>, <a class="el" href="../../#l04707">HandleAuraModIncreaseMaxHealth()</a>, <a class="el" href="../../#l05109">HandleAuraModRangedAttackPower()</a>, <a class="el" href="../../#l05133">HandleAuraModRangedAttackPowerPercent()</a>, <a class="el" href="../../#l05037">HandleAuraModRangedHaste()</a>, <a class="el" href="../../#l04337">HandleAuraModResistance()</a>, <a class="el" href="../../#l04314">HandleAuraModResistanceExclusive()</a>, <a class="el" href="../../#l03217">HandleAuraModSkill()</a>, <a class="el" href="../../#l04428">HandleAuraModStat()</a>, <a class="el" href="../../#l03440">HandleAuraModTotalThreat()</a>, <a class="el" href="../../#l04858">HandleAuraModWeaponCritPercent()</a>, <a class="el" href="../../#l17558">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../#l05389">HandleAuraRetainComboPoints()</a>, <a class="el" href="../../#l01265">Aura::HandleAuraSpecificMods()</a>, <a class="el" href="../../#l05853">HandleChannelDeathItem()</a>, <a class="el" href="../../#l00161">spell_dk_raise_ally::HandleDummy()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l00150">spell_shadowfang_keep_haunting_spirits_aura::HandleDummyTick()</a>, <a class="el" href="../../#l01618">spell_dk_improved_blood_presence::HandleEffectApply()</a>, <a class="el" href="../../#l01655">spell_dk_improved_frost_presence::HandleEffectApply()</a>, <a class="el" href="../../#l01693">spell_dk_improved_unholy_presence::HandleEffectApply()</a>, <a class="el" href="../../#l00534">spell_dru_idol_lifebloom::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l00623">spell_pal_exorcism_and_holy_wrath_damage::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l00191">spell_warl_improved_demonic_tactics::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l00813">spell_warr_glyph_of_sunder_armor::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l00880">spell_gen_leeching_swarm_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l02371">spell_icc_yh_volley_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00319">spell_hallows_end_base_fire::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../#l01324">spell_gen_burn_brutallus::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../#l00934">spell_sha_item_t10_elemental_2p_bonus::HandleEffectProc()</a>, <a class="el" href="../../#l00253">spell_serpentshrine_cavern_infection::HandleEffectRemove()</a>, <a class="el" href="../../#l05015">HandleModAttackSpeed()</a>, <a class="el" href="../../#l04391">HandleModBaseResistance()</a>, <a class="el" href="../../#l04973">HandleModCastingSpeed()</a>, <a class="el" href="../../#l05002">HandleModCombatSpeedPct()</a>, <a class="el" href="../../#l05178">HandleModDamageDone()</a>, <a class="el" href="../../#l05263">HandleModDamagePercentDone()</a>, <a class="el" href="../../#l04888">HandleModHitChance()</a>, <a class="el" href="../../#l01549">HandleModInvisibility()</a>, <a class="el" href="../../#l01524">HandleModInvisibilityDetect()</a>, <a class="el" href="../../#l04990">HandleModMeleeRangedSpeedPct()</a>, <a class="el" href="../../#l05026">HandleModMeleeSpeedPct()</a>, <a class="el" href="../../#l05297">HandleModOffhandDamagePercent()</a>, <a class="el" href="../../#l05339">HandleModPowerCost()</a>, <a class="el" href="../../#l05326">HandleModPowerCostPCT()</a>, <a class="el" href="../../#l05064">HandleModRating()</a>, <a class="el" href="../../#l04370">HandleModResistancePercent()</a>, <a class="el" href="../../#l04920">HandleModSpellCritChance()</a>, <a class="el" href="../../#l04907">HandleModSpellHitChance()</a>, <a class="el" href="../../#l03808">HandleModStateImmunityMask()</a>, <a class="el" href="../../#l01641">HandleModStealth()</a>, <a class="el" href="../../#l01616">HandleModStealthDetect()</a>, <a class="el" href="../../#l01690">HandleModStealthLevel()</a>, <a class="el" href="../../#l04406">HandleModTargetResistance()</a>, <a class="el" href="../../#l03429">HandleModThreat()</a>, <a class="el" href="../../#l04552">HandleModTotalPercentStat()</a>, <a class="el" href="../../#l09861">Unit::HandleOverrideClassScriptAuraProc()</a>, <a class="el" href="../../#l00407">spell_dk_chains_of_ice_aura::HandlePeriodic()</a>, <a class="el" href="../../#l00203">spell_ragin_flames_inferno::HandlePeriodic()</a>, <a class="el" href="../../#l00338">spell_dk_death_and_decay_aura::HandlePeriodic()</a>, <a class="el" href="../../#l00823">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00245">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00739">spell_hun_sniper_training::HandlePeriodic()</a>, <a class="el" href="../../#l00296">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00238">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00353">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l06849">HandlePeriodicHealthFunnelAuraTick()</a>, <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../#l06287">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../#l06555">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../#l00674">spell_dru_living_seed_proc::HandleProc()</a>, <a class="el" href="../../#l00559">spell_sha_earth_shield::HandleProc()</a>, <a class="el" href="../../#l00624">spell_oculus_temporal_rift_aura::HandleProc()</a>, <a class="el" href="../../#l00493">spell_dk_wandering_plague_aura::HandleProc()</a>, <a class="el" href="../../#l00120">spell_dru_t10_balance_4p_bonus::HandleProc()</a>, <a class="el" href="../../#l00645">spell_dru_living_seed::HandleProc()</a>, <a class="el" href="../../#l01085">spell_hun_glyph_of_arcane_shot::HandleProc()</a>, <a class="el" href="../../#l01955">spell_item_necrotic_touch::HandleProc()</a>, <a class="el" href="../../#l00194">spell_mage_burnout::HandleProc()</a>, <a class="el" href="../../#l00832">spell_mage_master_of_elements::HandleProc()</a>, <a class="el" href="../../#l00242">spell_pal_sacred_shield_base::HandleProc()</a>, <a class="el" href="../../#l00197">spell_pri_divine_aegis::HandleProc()</a>, <a class="el" href="../../#l00253">spell_pri_glyph_of_prayer_of_healing::HandleProc()</a>, <a class="el" href="../../#l00122">spell_sha_t10_restoration_4p_bonus::HandleProc()</a>, <a class="el" href="../../#l01118">spell_sha_t8_electrified::HandleProc()</a>, <a class="el" href="../../#l00744">spell_warl_seed_of_corruption_aura::HandleProc()</a>, <a class="el" href="../../#l00803">spell_warl_seed_of_corruption_generic_aura::HandleProc()</a>, <a class="el" href="../../#l01220">spell_hun_lock_and_load::HandleProcs()</a>, <a class="el" href="../../#l07252">HandleProcTriggerDamageAuraProc()</a>, <a class="el" href="../../#l08934">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../#l07231">HandleProcTriggerSpellWithValueAuraProc()</a>, <a class="el" href="../../#l07320">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../#l05047">HandleRangedAmmoHaste()</a>, <a class="el" href="../../#l01095">spell_warl_haunt_aura::HandleRemove()</a>, <a class="el" href="../../#l01390">spell_warl_glyph_of_felguard::HandleRemove()</a>, <a class="el" href="../../#l01429">spell_warl_glyph_of_voidwalker::HandleRemove()</a>, <a class="el" href="../../#l05307">HandleShieldBlockValue()</a>, <a class="el" href="../../#l00760">spell_hun_sniper_training::HandleUpdatePeriodic()</a>, <a class="el" href="../../#l01992">Aura::IsAuraStronger()</a>, <a class="el" href="../../#l01599">spell_valanar_kinetic_bomb_absorb_aura::OnAbsorb()</a>, <a class="el" href="../../#l02011">spell_the_lich_king_necrotic_plague_jump_aura::OnDispel()</a>, <a class="el" href="../../#l00523">spell_kalecgos_curse_of_boundless_agony_aura::OnPeriodic()</a>, <a class="el" href="../../#l00925">spell_xt002_gravity_bomb_aura::OnPeriodic()</a>, <a class="el" href="../../#l00289">spell_lurker_below_spout::OnPeriodic()</a>, <a class="el" href="../../#l00768">spell_blood_queen_essence_of_the_blood_queen_aura::OnProc()</a>, <a class="el" href="../../#l00653">spell_pal_eye_for_an_eye::OnProc()</a>, <a class="el" href="../../#l00877">spell_warl_siphon_life::OnProc()</a>, <a class="el" href="../../#l01053">spell_warl_fel_synergy::OnProc()</a>, <a class="el" href="../../#l00160">spell_warr_improved_spell_reflection::OnProc()</a>, <a class="el" href="../../#l00362">spell_warr_damage_shield::OnProc()</a>, <a class="el" href="../../#l00914">spell_sindragosa_instability_aura::OnRemove()</a>, <a class="el" href="../../#l01992">spell_the_lich_king_necrotic_plague_jump_aura::OnRemove()</a>, <a class="el" href="../../#l00856">spell_shield_of_runes_aura::OnRemove()</a>, <a class="el" href="../../#l00913">spell_xt002_gravity_bomb_aura::OnRemove()</a>, <a class="el" href="../../#l00990">spell_xt002_searing_light_spawn_life_spark_aura::OnRemove()</a>, <a class="el" href="../../#l00760">spell_ulduar_stone_grip_aura::OnRemoveStun()</a>, <a class="el" href="../../#l01857">spell_the_lich_king_infest_aura::OnUpdate()</a>, <a class="el" href="../../#l00569">spell_karazhan_overload_aura::PeriodicTick()</a>, <a class="el" href="../../#l16050">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>, <a class="el" href="../../#l00282">ArenaSpectator::ShouldSendAura()</a>, <a class="el" href="../../#l00353">spell_black_temple_shadow_inferno_aura::Update()</a>, <a class="el" href="../../#l00381">spell_black_temple_spell_absorption_aura::Update()</a>, <a class="el" href="../../#l00330">Player::UpdateAttackPowerAndDamage()</a>, <a class="el" href="../../#l00927">UpdatePeriodic()</a>, and <a class="el" href="../../#l01737">SpellInfo::ValidateAttribute6SpellDamageMods()</a>.</p>

</div>
</div>
<a id="a458f465c0150d16e555d1997d7b09fc2" name="a458f465c0150d16e555d1997d7b09fc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a458f465c0150d16e555d1997d7b09fc2">&#9670;&#160;</a></span>GetAmplitude()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetAmplitude </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   59</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00143">m_amplitude</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01998">spell_igb_rocket_pack_aura::HandleRemove()</a>.</p>

</div>
</div>
<a id="a3ea63ccc256382991e0802842f69e44f" name="a3ea63ccc256382991e0802842f69e44f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ea63ccc256382991e0802842f69e44f">&#9670;&#160;</a></span>GetApplicationList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::GetApplicationList </td>
          <td>(</td>
          <td class="paramtype">std::list&lt; <a class="el" href="../../de/d50/a10790.html">AuraApplication</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>applicationList</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  423</span>{</div>
<div class="line"><span class="lineno">  424</span>    <a class="code hl_typedef" href="../../df/d4a/a10794.html#af94996c697b3f790489314b6175ab311">Aura::ApplicationMap</a> <span class="keyword">const</span>&amp; targetMap = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a1f5268b496e4212bc6e5f887034d04b0">GetApplicationMap</a>();</div>
<div class="line"><span class="lineno">  425</span>    <span class="keywordflow">for</span> (Aura::ApplicationMap::const_iterator appIter = targetMap.begin(); appIter != targetMap.end(); ++appIter)</div>
<div class="line"><span class="lineno">  426</span>    {</div>
<div class="line"><span class="lineno">  427</span>        <span class="keywordflow">if</span> (appIter-&gt;second-&gt;HasEffect(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno">  428</span>            applicationList.push_back(appIter-&gt;second);</div>
<div class="line"><span class="lineno">  429</span>    }</div>
<div class="line"><span class="lineno">  430</span>}</div>
<div class="ttc" id="aa10794_html_a1f5268b496e4212bc6e5f887034d04b0"><div class="ttname"><a href="../../df/d4a/a10794.html#a1f5268b496e4212bc6e5f887034d04b0">Aura::GetApplicationMap</a></div><div class="ttdeci">ApplicationMap const &amp; GetApplicationMap()</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:181</div></div>
<div class="ttc" id="aa10794_html_af94996c697b3f790489314b6175ab311"><div class="ttname"><a href="../../df/d4a/a10794.html#af94996c697b3f790489314b6175ab311">Aura::ApplicationMap</a></div><div class="ttdeci">std::map&lt; ObjectGuid, AuraApplication * &gt; ApplicationMap</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:90</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00181">Aura::GetApplicationMap()</a>, <a class="el" href="../../#l00049">GetBase()</a>, and <a class="el" href="../../#l00056">GetEffIndex()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00708">ChangeAmount()</a>, and <a class="el" href="../../#l00897">Update()</a>.</p>

</div>
</div>
<a id="a36e4e8b964658519a723d668b7ad0bba" name="a36e4e8b964658519a723d668b7ad0bba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36e4e8b964658519a723d668b7ad0bba">&#9670;&#160;</a></span>GetAuraGroup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::GetAuraGroup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  115</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#ada78fc2515cb55583bf83667e475c7fe">m_auraGroup</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00134">m_auraGroup</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>.</p>

</div>
</div>
<a id="a120cf8a45a3c816e4ef588733fa812e5" name="a120cf8a45a3c816e4ef588733fa812e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a120cf8a45a3c816e4ef588733fa812e5">&#9670;&#160;</a></span>GetAuraType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799">AuraType</a> AuraEffect::GetAuraType </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  448</span>{</div>
<div class="line"><span class="lineno">  449</span>    <span class="keywordflow">return</span> (<a class="code hl_enumeration" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799">AuraType</a>)<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].ApplyAuraName;</div>
<div class="line"><span class="lineno">  450</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799">AuraType</a></div><div class="ttdeci">AuraType</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:62</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00146">m_effIndex</a>, and <a class="el" href="../../#l00123">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l07050">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../#l04696">Unit::_RegisterAuraEffect()</a>, <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00593">CalculatePeriodic()</a>, <a class="el" href="../../#l00684">CalculateSpellMod()</a>, <a class="el" href="../../#l05351">HandleArenaPreparation()</a>, <a class="el" href="../../#l03305">HandleAuraAllowFlight()</a>, <a class="el" href="../../#l05962">HandleAuraEmpathy()</a>, <a class="el" href="../../#l03347">HandleAuraFeatherFall()</a>, <a class="el" href="../../#l03373">HandleAuraHover()</a>, <a class="el" href="../../#l02950">HandleAuraModDisarm()</a>, <a class="el" href="../../#l03711">HandleAuraModIncreaseFlightSpeed()</a>, <a class="el" href="../../#l04227">HandleAuraModSchoolImmunity()</a>, <a class="el" href="../../#l03217">HandleAuraModSkill()</a>, <a class="el" href="../../#l03159">HandleAuraModStalked()</a>, <a class="el" href="../../#l03140">HandleAuraTrackStealthed()</a>, <a class="el" href="../../#l03180">HandleAuraUntrackable()</a>, <a class="el" href="../../#l03325">HandleAuraWaterWalk()</a>, <a class="el" href="../../#l06001">HandleComprehendLanguage()</a>, <a class="el" href="../../#l00741">HandleEffect()</a>, <a class="el" href="../../#l00796">spell_dk_pet_scaling::HandleEffectApply()</a>, <a class="el" href="../../#l00363">spell_dru_treant_scaling::HandleEffectApply()</a>, <a class="el" href="../../#l00481">spell_pet_hit_expertise_scalling::HandleEffectApply()</a>, <a class="el" href="../../#l00275">spell_mage_pet_scaling::HandleEffectApply()</a>, <a class="el" href="../../#l00126">spell_pri_shadowfiend_scaling::HandleEffectApply()</a>, <a class="el" href="../../#l00223">spell_sha_feral_spirit_scaling::HandleEffectApply()</a>, <a class="el" href="../../#l00332">spell_sha_fire_elemental_scaling::HandleEffectApply()</a>, <a class="el" href="../../#l00458">spell_warl_infernal_scaling::HandleEffectApply()</a>, <a class="el" href="../../#l03407">HandleForceMoveForward()</a>, <a class="el" href="../../#l00823">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00245">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00296">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00238">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00353">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l01169">HandleProc()</a>, <a class="el" href="../../#l08934">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../#l05307">HandleShieldBlockValue()</a>, <a class="el" href="../../#l01992">Aura::IsAuraStronger()</a>, <a class="el" href="../../#l01102">PeriodicTick()</a>, <a class="el" href="../../#l16050">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../#l13408">Player::RestoreBaseRune()</a>, <a class="el" href="../../#l06389">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../#l00282">ArenaSpectator::ShouldSendAura()</a>, and <a class="el" href="../../#l00927">UpdatePeriodic()</a>.</p>

</div>
</div>
<a id="ab288b290ebc452f0b03c7d79be1efc52" name="ab288b290ebc452f0b03c7d79be1efc52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab288b290ebc452f0b03c7d79be1efc52">&#9670;&#160;</a></span>GetBase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/d4a/a10794.html">Aura</a> * AuraEffect::GetBase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   49</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#aff934af743b5031d558ffc9a4b55d6de">m_base</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00121">m_base</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../#l00799">ApplySpellMod()</a>, <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../#l02502">Unit::CalcHealAbsorb()</a>, <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00593">CalculatePeriodic()</a>, <a class="el" href="../../#l00578">CalculatePeriodicData()</a>, <a class="el" href="../../#l00684">CalculateSpellMod()</a>, <a class="el" href="../../#l01472">Spell::EffectHeal()</a>, <a class="el" href="../../#l00323">Spell::EffectSchoolDMG()</a>, <a class="el" href="../../#l00331">spell_festergut_blighted_spores_aura::ExtraEffect()</a>, <a class="el" href="../../#l00422">GetApplicationList()</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00411">GetTargetList()</a>, <a class="el" href="../../#l07365">GetTotalTicks()</a>, <a class="el" href="../../#l05409">HandleAuraDummy()</a>, <a class="el" href="../../#l06053">HandleAuraLinked()</a>, <a class="el" href="../../#l01862">HandleAuraModShapeshift()</a>, <a class="el" href="../../#l04214">HandleAuraModStateImmunity()</a>, <a class="el" href="../../#l03238">HandleAuraMounted()</a>, <a class="el" href="../../#l17647">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../#l17558">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../#l05389">HandleAuraRetainComboPoints()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l00741">HandleEffect()</a>, <a class="el" href="../../#l00623">spell_pal_exorcism_and_holy_wrath_damage::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l00191">spell_warl_improved_demonic_tactics::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l00813">spell_warr_glyph_of_sunder_armor::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l00838">spell_brewfest_main_ram_buff::HandleEffectPeriodic()</a>, <a class="el" href="../../#l01445">spell_pos_glacial_strike_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l07099">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../#l09861">Unit::HandleOverrideClassScriptAuraProc()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l07133">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../#l07026">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../#l06287">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../#l01169">HandleProc()</a>, <a class="el" href="../../#l08934">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../#l07272">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../#l07320">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../#l00189">spell_hor_shared_suffering_aura::OnRemove()</a>, <a class="el" href="../../#l01102">PeriodicTick()</a>, <a class="el" href="../../#l03476">Spell::prepare()</a>, <a class="el" href="../../#l16050">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../#l13408">Player::RestoreBaseRune()</a>, <a class="el" href="../../#l00897">Update()</a>, <a class="el" href="../../#l00927">UpdatePeriodic()</a>, and <a class="el" href="../../#l01737">SpellInfo::ValidateAttribute6SpellDamageMods()</a>.</p>

</div>
</div>
<a id="aced766d86694ac0980a6e4f3cae77b5b" name="aced766d86694ac0980a6e4f3cae77b5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aced766d86694ac0980a6e4f3cae77b5b">&#9670;&#160;</a></span>GetBaseAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetBaseAmount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   57</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#aba194c9071a1b0551768b397abc9ebeb">m_baseAmount</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00124">m_baseAmount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01693">Pet::_SaveAuras()</a>, <a class="el" href="../../#l00259">spell_warl_demonic_knowledge::CalculateAmount()</a>, <a class="el" href="../../#l00760">spell_hun_sniper_training::HandleUpdatePeriodic()</a>, <a class="el" href="../../#l00161">spell_mark_of_kazrogal_aura::OnPeriodic()</a>, and <a class="el" href="../../#l05006">Unit::RemoveAurasDueToSpellBySteal()</a>.</p>

</div>
</div>
<a id="a9ca1c0fbc142af46a5926b2d87520ee3" name="a9ca1c0fbc142af46a5926b2d87520ee3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ca1c0fbc142af46a5926b2d87520ee3">&#9670;&#160;</a></span>GetCaster()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/df9/a08518.html">Unit</a> * AuraEffect::GetCaster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   47</span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>(); }</div>
<div class="ttc" id="aa10794_html_a6fc52109b7711606f15d9880fda8f815"><div class="ttname"><a href="../../df/d4a/a10794.html#a6fc52109b7711606f15d9880fda8f815">Aura::GetCaster</a></div><div class="ttdeci">Unit * GetCaster() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:471</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">GetBase()</a>, and <a class="el" href="../../#l00471">Aura::GetCaster()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../#l00578">CalculatePeriodicData()</a>, <a class="el" href="../../#l01472">Spell::EffectHeal()</a>, <a class="el" href="../../#l02779">HandleAuraCloneCaster()</a>, <a class="el" href="../../#l03649">HandleAuraControlVehicle()</a>, <a class="el" href="../../#l05409">HandleAuraDummy()</a>, <a class="el" href="../../#l06053">HandleAuraLinked()</a>, <a class="el" href="../../#l03440">HandleAuraModTotalThreat()</a>, <a class="el" href="../../#l03238">HandleAuraMounted()</a>, <a class="el" href="../../#l17647">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../#l17558">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../#l02161">HandleAuraTransform()</a>, <a class="el" href="../../#l05898">HandleBindSight()</a>, <a class="el" href="../../#l05853">HandleChannelDeathItem()</a>, <a class="el" href="../../#l03630">HandleCharmConvert()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l05913">HandleFarSight()</a>, <a class="el" href="../../#l03615">HandleModCharm()</a>, <a class="el" href="../../#l03492">HandleModFear()</a>, <a class="el" href="../../#l03540">HandleModPossess()</a>, <a class="el" href="../../#l03562">HandleModPossessPet()</a>, <a class="el" href="../../#l03455">HandleModTaunt()</a>, <a class="el" href="../../#l00242">spell_pal_sacred_shield_base::HandleProc()</a>, <a class="el" href="../../#l07272">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../#l07320">HandleRaidProcFromChargeWithValueAuraProc()</a>, and <a class="el" href="../../#l00076">RecalculateAmount()</a>.</p>

</div>
</div>
<a id="ad507745acb9935a3a3cb2c6f35788ef6" name="ad507745acb9935a3a3cb2c6f35788ef6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad507745acb9935a3a3cb2c6f35788ef6">&#9670;&#160;</a></span>GetCasterGUID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d40/a08190.html">ObjectGuid</a> AuraEffect::GetCasterGUID </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   48</span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a3c4dfe75dad16fbf2afaf23ce77e4262">GetCasterGUID</a>(); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">GetBase()</a>, and <a class="el" href="../../#l00105">Aura::GetCasterGUID()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l20302">Unit::CastDelayedSpellWithPeriodicAmount()</a>, <a class="el" href="../../#l01167">Unit::CastSpell()</a>, <a class="el" href="../../#l01199">CleanupTriggeredSpells()</a>, <a class="el" href="../../#l01472">Spell::EffectHeal()</a>, <a class="el" href="../../#l05409">HandleAuraDummy()</a>, <a class="el" href="../../#l06053">HandleAuraLinked()</a>, <a class="el" href="../../#l17647">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../#l17558">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../#l02161">HandleAuraTransform()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l02807">HandleFeignDeath()</a>, <a class="el" href="../../#l07099">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l07133">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../#l07026">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../#l07272">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../#l07320">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../#l16050">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../#l06389">Unit::SendPeriodicAuraLog()</a>, and <a class="el" href="../../#l01737">SpellInfo::ValidateAttribute6SpellDamageMods()</a>.</p>

</div>
</div>
<a id="a7595664aebf24652d3ce95d6bdc18ebe" name="a7595664aebf24652d3ce95d6bdc18ebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7595664aebf24652d3ce95d6bdc18ebe">&#9670;&#160;</a></span>GetCasterLevel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> AuraEffect::GetCasterLevel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  110</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a3f9c2c6496be1ffad249825f86074def">m_casterLevel</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00128">m_casterLevel</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, and <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>.</p>

</div>
</div>
<a id="a374ccc25c81de041d10e1ed2b52a238c" name="a374ccc25c81de041d10e1ed2b52a238c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a374ccc25c81de041d10e1ed2b52a238c">&#9670;&#160;</a></span>GetCritChance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float AuraEffect::GetCritChance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  108</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#af7eff5d08a22189f99f66695367ae250">m_critChance</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00130">m_critChance</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, and <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>.</p>

</div>
</div>
<a id="ac14e9e6906344f04904ed7ee866f4475" name="ac14e9e6906344f04904ed7ee866f4475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac14e9e6906344f04904ed7ee866f4475">&#9670;&#160;</a></span>GetDieSides()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetDieSides </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   58</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#aea3300db680ab47876dbc7ae45c08d18">m_dieSides</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00125">m_dieSides</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00259">spell_warl_demonic_knowledge::CalculateAmount()</a>.</p>

</div>
</div>
<a id="ab8c4811ced24cbd9b4afff1c22fbb1b0" name="ab8c4811ced24cbd9b4afff1c22fbb1b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8c4811ced24cbd9b4afff1c22fbb1b0">&#9670;&#160;</a></span>GetEffIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::GetEffIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   56</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00146">m_effIndex</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../#l00582">spell_dru_lifebloom::AfterRemove()</a>, <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../#l00211">spell_pal_sacred_shield_base::CalculateAmount()</a>, <a class="el" href="../../#l00529">spell_sha_earth_shield::CalculateAmount()</a>, <a class="el" href="../../#l00183">spell_warl_improved_demonic_tactics::CalculateAmount()</a>, <a class="el" href="../../#l00726">spell_warl_seed_of_corruption_aura::CalculateAmount()</a>, <a class="el" href="../../#l00562">spell_warr_rend::CalculateAmount()</a>, <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00314">spell_dru_treant_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00161">spell_hun_generic_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00235">spell_mage_pet_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00081">spell_pri_shadowfiend_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00172">spell_sha_feral_spirit_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00287">spell_sha_fire_elemental_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00292">spell_warl_generic_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00403">spell_warl_infernal_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00595">spell_mage_ice_barrier_aura::CalculateSpellAmount()</a>, <a class="el" href="../../#l00631">spell_mage_ice_barrier::CalculateSpellAmount()</a>, <a class="el" href="../../#l00621">CalculateSpellAmount()</a>, <a class="el" href="../../#l00684">CalculateSpellMod()</a>, <a class="el" href="../../#l00733">spell_dk_pet_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00325">spell_dru_treant_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00176">spell_hun_generic_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00246">spell_mage_pet_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00092">spell_pri_shadowfiend_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00183">spell_sha_feral_spirit_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00298">spell_sha_fire_elemental_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00308">spell_warl_generic_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00419">spell_warl_infernal_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l02455">Aura::CallScriptAfterEffectApplyHandlers()</a>, <a class="el" href="../../#l02733">Aura::CallScriptAfterEffectProcHandlers()</a>, <a class="el" href="../../#l02469">Aura::CallScriptAfterEffectRemoveHandlers()</a>, <a class="el" href="../../#l02559">Aura::CallScriptEffectAbsorbHandlers()</a>, <a class="el" href="../../#l02577">Aura::CallScriptEffectAfterAbsorbHandlers()</a>, <a class="el" href="../../#l02605">Aura::CallScriptEffectAfterManaShieldHandlers()</a>, <a class="el" href="../../#l02416">Aura::CallScriptEffectApplyHandlers()</a>, <a class="el" href="../../#l02517">Aura::CallScriptEffectCalcAmountHandlers()</a>, <a class="el" href="../../#l02531">Aura::CallScriptEffectCalcPeriodicHandlers()</a>, <a class="el" href="../../#l02545">Aura::CallScriptEffectCalcSpellModHandlers()</a>, <a class="el" href="../../#l02591">Aura::CallScriptEffectManaShieldHandlers()</a>, <a class="el" href="../../#l02483">Aura::CallScriptEffectPeriodicHandlers()</a>, <a class="el" href="../../#l02714">Aura::CallScriptEffectProcHandlers()</a>, <a class="el" href="../../#l02436">Aura::CallScriptEffectRemoveHandlers()</a>, <a class="el" href="../../#l02619">Aura::CallScriptEffectSplitHandlers()</a>, <a class="el" href="../../#l02503">Aura::CallScriptEffectUpdatePeriodicHandlers()</a>, <a class="el" href="../../#l20302">Unit::CastDelayedSpellWithPeriodicAmount()</a>, <a class="el" href="../../#l00708">ChangeAmount()</a>, <a class="el" href="../../#l01199">CleanupTriggeredSpells()</a>, <a class="el" href="../../#l00422">GetApplicationList()</a>, <a class="el" href="../../#l00411">GetTargetList()</a>, <a class="el" href="../../#l00221">spell_muru_summon_blood_elves_periodic_aura::HandleApply()</a>, <a class="el" href="../../#l00789">spell_gen_baby_murloc_passive::HandleApply()</a>, <a class="el" href="../../#l06053">HandleAuraLinked()</a>, <a class="el" href="../../#l04428">HandleAuraModStat()</a>, <a class="el" href="../../#l17647">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../#l17558">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l00741">HandleEffect()</a>, <a class="el" href="../../#l00534">spell_dru_idol_lifebloom::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l00813">spell_warr_glyph_of_sunder_armor::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l02234">spell_q12619_emblazon_runeblade::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00818">spell_oculus_rider_aura::HandleOnEffectApply()</a>, <a class="el" href="../../#l01846">spell_transitus_shield_beam_aura::HandleOnEffectApply()</a>, <a class="el" href="../../#l00913">spell_kiljaeden_shadow_spike_aura::HandlePeriodic()</a>, <a class="el" href="../../#l01081">spell_kiljaeden_armageddon_periodic_aura::HandlePeriodic()</a>, <a class="el" href="../../#l01168">spell_halion_twilight_cutter_periodic_aura::HandlePeriodic()</a>, <a class="el" href="../../#l00711">spell_oculus_ride_ruby_emerald_amber_drake_que_aura::HandlePeriodic()</a>, <a class="el" href="../../#l00823">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00495">spell_pet_hit_expertise_scalling::HandlePeriodic()</a>, <a class="el" href="../../#l00245">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00296">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00238">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00205">spell_warl_improved_demonic_tactics::HandlePeriodic()</a>, <a class="el" href="../../#l00274">spell_warl_demonic_knowledge::HandlePeriodic()</a>, <a class="el" href="../../#l00353">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l06849">HandlePeriodicHealthFunnelAuraTick()</a>, <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../#l07026">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../#l07167">HandlePeriodicPowerBurnAuraTick()</a>, <a class="el" href="../../#l06287">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../#l06555">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../#l00595">spell_karazhan_temptation::HandleProc()</a>, <a class="el" href="../../#l00761">spell_gen_proc_not_self::HandleProc()</a>, <a class="el" href="../../#l02315">spell_item_unsated_craving::HandleProc()</a>, <a class="el" href="../../#l00242">spell_pal_sacred_shield_base::HandleProc()</a>, <a class="el" href="../../#l07252">HandleProcTriggerDamageAuraProc()</a>, <a class="el" href="../../#l08934">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../#l07214">HandleProcTriggerSpellAuraProc()</a>, <a class="el" href="../../#l07272">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../#l07320">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../#l01128">spell_putricide_mutated_plague_aura::HandleTriggerSpell()</a>, <a class="el" href="../../#l00760">spell_hun_sniper_training::HandleUpdatePeriodic()</a>, <a class="el" href="../../#l08925">TriggeredByAuraSpellData::Init()</a>, <a class="el" href="../../#l00354">spell_hadronox_summon_periodic_aura::OnApply()</a>, <a class="el" href="../../#l00235">spell_gruul_ground_slam_trigger::OnApply()</a>, <a class="el" href="../../#l00523">spell_kalecgos_curse_of_boundless_agony_aura::OnPeriodic()</a>, <a class="el" href="../../#l02794">spell_the_lich_king_vile_spirits_aura::OnPeriodic()</a>, <a class="el" href="../../#l01717">spell_tar_blaze_aura::OnPeriodic()</a>, <a class="el" href="../../#l01736">spell_thorim_lightning_pillar_P2_aura::OnPeriodic()</a>, <a class="el" href="../../#l00584">spell_karathress_power_of_tidalvess::OnPeriodic()</a>, <a class="el" href="../../#l00600">spell_karathress_power_of_caribdis::OnPeriodic()</a>, <a class="el" href="../../#l00421">spell_leotheras_demon_link::OnPeriodic()</a>, <a class="el" href="../../#l00890">spell_gen_periodic_knock_away::OnPeriodic()</a>, <a class="el" href="../../#l00131">spell_broggok_poison_cloud::PeriodicTick()</a>, <a class="el" href="../../#l00767">spell_illidari_council_deadly_strike_aura::Update()</a>, <a class="el" href="../../#l00164">spell_mother_shahraz_beam_periodic_aura::Update()</a>, <a class="el" href="../../#l00186">spell_mother_shahraz_saber_lash_aura::Update()</a>, <a class="el" href="../../#l00331">spell_black_temple_charge_rage_aura::Update()</a>, <a class="el" href="../../#l00353">spell_black_temple_shadow_inferno_aura::Update()</a>, <a class="el" href="../../#l00381">spell_black_temple_spell_absorption_aura::Update()</a>, <a class="el" href="../../#l00897">Update()</a>, and <a class="el" href="../../#l00330">Player::UpdateAttackPowerAndDamage()</a>.</p>

</div>
</div>
<a id="a6ea46b2ccefe8e6a25eef466847503aa" name="a6ea46b2ccefe8e6a25eef466847503aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ea46b2ccefe8e6a25eef466847503aa">&#9670;&#160;</a></span>GetForcedAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetForcedAmount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   65</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00129">m_amount</a>.</p>

</div>
</div>
<a id="a63863fb01a8cf08251c0b4482be6a20f" name="a63863fb01a8cf08251c0b4482be6a20f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63863fb01a8cf08251c0b4482be6a20f">&#9670;&#160;</a></span>GetId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::GetId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  433</span>{</div>
<div class="line"><span class="lineno">  434</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>;</div>
<div class="line"><span class="lineno">  435</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00320">SpellInfo::Id</a>, and <a class="el" href="../../#l00123">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00383">AuraEffect()</a>, <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00593">CalculatePeriodic()</a>, <a class="el" href="../../#l00684">CalculateSpellMod()</a>, <a class="el" href="../../#l20302">Unit::CastDelayedSpellWithPeriodicAmount()</a>, <a class="el" href="../../#l01472">Spell::EffectHeal()</a>, <a class="el" href="../../#l00323">Spell::EffectSchoolDMG()</a>, <a class="el" href="../../#l03649">HandleAuraControlVehicle()</a>, <a class="el" href="../../#l05409">HandleAuraDummy()</a>, <a class="el" href="../../#l04286">HandleAuraModDmgImmunity()</a>, <a class="el" href="../../#l04191">HandleAuraModEffectImmunity()</a>, <a class="el" href="../../#l03711">HandleAuraModIncreaseFlightSpeed()</a>, <a class="el" href="../../#l04227">HandleAuraModSchoolImmunity()</a>, <a class="el" href="../../#l01862">HandleAuraModShapeshift()</a>, <a class="el" href="../../#l04428">HandleAuraModStat()</a>, <a class="el" href="../../#l04214">HandleAuraModStateImmunity()</a>, <a class="el" href="../../#l01265">Aura::HandleAuraSpecificMods()</a>, <a class="el" href="../../#l02161">HandleAuraTransform()</a>, <a class="el" href="../../#l00437">spell_ignis_scorch_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00219">spell_ulduar_energy_sap_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l04122">HandleModMechanicImmunity()</a>, <a class="el" href="../../#l03808">HandleModStateImmunityMask()</a>, <a class="el" href="../../#l04552">HandleModTotalPercentStat()</a>, <a class="el" href="../../#l07099">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l06196">HandlePeriodicDummyAuraTick()</a>, <a class="el" href="../../#l07133">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../#l07026">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../#l06287">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../#l06555">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../#l01465">spell_warl_demonic_pact_aura::HandleProc()</a>, <a class="el" href="../../#l07252">HandleProcTriggerDamageAuraProc()</a>, <a class="el" href="../../#l08934">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../#l07214">HandleProcTriggerSpellAuraProc()</a>, <a class="el" href="../../#l07231">HandleProcTriggerSpellWithValueAuraProc()</a>, <a class="el" href="../../#l07272">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../#l07320">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../#l00962">spell_brewfest_ram_fatigue::PrepareAuraScript()</a>, <a class="el" href="../../#l16050">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../#l06389">Unit::SendPeriodicAuraLog()</a>, and <a class="el" href="../../#l00927">UpdatePeriodic()</a>.</p>

</div>
</div>
<a id="aa183791665930afb43bbac2163b1d8d4" name="aa183791665930afb43bbac2163b1d8d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa183791665930afb43bbac2163b1d8d4">&#9670;&#160;</a></span>GetMiscValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetMiscValue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  443</span>{</div>
<div class="line"><span class="lineno">  444</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].MiscValue;</div>
<div class="line"><span class="lineno">  445</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00146">m_effIndex</a>, and <a class="el" href="../../#l00123">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l07050">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../#l00799">ApplySpellMod()</a>, <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../#l00684">CalculateSpellMod()</a>, <a class="el" href="../../#l05986">Unit::GetMaxPositiveAuraModifierByMiscMask()</a>, <a class="el" href="../../#l06019">HandleAuraConvertRune()</a>, <a class="el" href="../../#l05409">HandleAuraDummy()</a>, <a class="el" href="../../#l04355">HandleAuraModBaseResistancePCT()</a>, <a class="el" href="../../#l04296">HandleAuraModDispelImmunity()</a>, <a class="el" href="../../#l04286">HandleAuraModDmgImmunity()</a>, <a class="el" href="../../#l04191">HandleAuraModEffectImmunity()</a>, <a class="el" href="../../#l05980">HandleAuraModFaction()</a>, <a class="el" href="../../#l04730">HandleAuraModIncreaseEnergy()</a>, <a class="el" href="../../#l04750">HandleAuraModIncreaseEnergyPercent()</a>, <a class="el" href="../../#l04337">HandleAuraModResistance()</a>, <a class="el" href="../../#l04314">HandleAuraModResistanceExclusive()</a>, <a class="el" href="../../#l04609">HandleAuraModResistenceOfStatPercent()</a>, <a class="el" href="../../#l04227">HandleAuraModSchoolImmunity()</a>, <a class="el" href="../../#l01862">HandleAuraModShapeshift()</a>, <a class="el" href="../../#l03217">HandleAuraModSkill()</a>, <a class="el" href="../../#l04428">HandleAuraModStat()</a>, <a class="el" href="../../#l04214">HandleAuraModStateImmunity()</a>, <a class="el" href="../../#l03238">HandleAuraMounted()</a>, <a class="el" href="../../#l06120">HandleAuraOverrideSpells()</a>, <a class="el" href="../../#l06150">HandleAuraSetVehicle()</a>, <a class="el" href="../../#l03108">HandleAuraTrackCreatures()</a>, <a class="el" href="../../#l03124">HandleAuraTrackResources()</a>, <a class="el" href="../../#l02161">HandleAuraTransform()</a>, <a class="el" href="../../#l01707">HandleDetectAmore()</a>, <a class="el" href="../../#l00191">spell_warl_improved_demonic_tactics::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l00813">spell_warr_glyph_of_sunder_armor::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l05939">HandleForceReaction()</a>, <a class="el" href="../../#l04391">HandleModBaseResistance()</a>, <a class="el" href="../../#l05178">HandleModDamageDone()</a>, <a class="el" href="../../#l05263">HandleModDamagePercentDone()</a>, <a class="el" href="../../#l01549">HandleModInvisibility()</a>, <a class="el" href="../../#l01524">HandleModInvisibilityDetect()</a>, <a class="el" href="../../#l04122">HandleModMechanicImmunity()</a>, <a class="el" href="../../#l04454">HandleModPercentStat()</a>, <a class="el" href="../../#l05339">HandleModPowerCost()</a>, <a class="el" href="../../#l05326">HandleModPowerCostPCT()</a>, <a class="el" href="../../#l04648">HandleModPowerRegen()</a>, <a class="el" href="../../#l05064">HandleModRating()</a>, <a class="el" href="../../#l05079">HandleModRatingFromStat()</a>, <a class="el" href="../../#l04370">HandleModResistancePercent()</a>, <a class="el" href="../../#l04933">HandleModSpellCritChanceShool()</a>, <a class="el" href="../../#l03808">HandleModStateImmunityMask()</a>, <a class="el" href="../../#l01641">HandleModStealth()</a>, <a class="el" href="../../#l01616">HandleModStealthDetect()</a>, <a class="el" href="../../#l01690">HandleModStealthLevel()</a>, <a class="el" href="../../#l04406">HandleModTargetResistance()</a>, <a class="el" href="../../#l03429">HandleModThreat()</a>, <a class="el" href="../../#l04552">HandleModTotalPercentStat()</a>, <a class="el" href="../../#l07099">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../#l01538">spell_illidan_shadow_prison_aura::HandleOnEffectApply()</a>, <a class="el" href="../../#l01543">spell_illidan_shadow_prison_aura::HandleOnEffectRemove()</a>, <a class="el" href="../../#l09861">Unit::HandleOverrideClassScriptAuraProc()</a>, <a class="el" href="../../#l00823">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00245">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00296">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00238">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00353">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l07133">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../#l07026">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../#l07167">HandlePeriodicPowerBurnAuraTick()</a>, <a class="el" href="../../#l01221">HandleShapeshiftBoosts()</a>, <a class="el" href="../../#l01992">Aura::IsAuraStronger()</a>, <a class="el" href="../../#l16050">Unit::ProcDamageAndSpellFor()</a>, and <a class="el" href="../../#l06389">Unit::SendPeriodicAuraLog()</a>.</p>

</div>
</div>
<a id="a88fa5605246883e095cd82ebd5d75bef" name="a88fa5605246883e095cd82ebd5d75bef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88fa5605246883e095cd82ebd5d75bef">&#9670;&#160;</a></span>GetMiscValueB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetMiscValueB </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  438</span>{</div>
<div class="line"><span class="lineno">  439</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].MiscValueB;</div>
<div class="line"><span class="lineno">  440</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00146">m_effIndex</a>, and <a class="el" href="../../#l00123">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l06019">HandleAuraConvertRune()</a>, and <a class="el" href="../../#l04648">HandleModPowerRegen()</a>.</p>

</div>
</div>
<a id="a306e4d031a37294a17fb999303b71efe" name="a306e4d031a37294a17fb999303b71efe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a306e4d031a37294a17fb999303b71efe">&#9670;&#160;</a></span>GetOldAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetOldAmount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  116</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a5fa9f61c77274c75e6f3d8222142ab4e">m_oldAmount</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00135">m_oldAmount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l20302">Unit::CastDelayedSpellWithPeriodicAmount()</a>.</p>

</div>
</div>
<a id="a81665a31d5e4a49027abd82be607a736" name="a81665a31d5e4a49027abd82be607a736"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81665a31d5e4a49027abd82be607a736">&#9670;&#160;</a></span>GetPctMods()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float AuraEffect::GetPctMods </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  112</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a8e00da47192a4d1c9139b037d07d565b">m_pctMods</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00131">m_pctMods</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00726">spell_warl_seed_of_corruption_aura::CalculateAmount()</a>, and <a class="el" href="../../#l00452">CalculateAmount()</a>.</p>

</div>
</div>
<a id="a6f11a0855c476d2f991995a449bcf6ae" name="a6f11a0855c476d2f991995a449bcf6ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f11a0855c476d2f991995a449bcf6ae">&#9670;&#160;</a></span>GetPeriodicTimer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetPeriodicTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   68</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00142">m_periodicTimer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01243">spell_dreamwalker_decay_periodic_timer_aura::DecayPeriodicTimer()</a>.</p>

</div>
</div>
<a id="a1004d58d71df9a9b603d217ebca51321" name="a1004d58d71df9a9b603d217ebca51321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1004d58d71df9a9b603d217ebca51321">&#9670;&#160;</a></span>GetSpellInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db6/a10898.html">SpellInfo</a> const  * AuraEffect::GetSpellInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   54</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00123">m_spellInfo</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l07017">Player::_ApplyWeaponDependentAuraCritMod()</a>, <a class="el" href="../../#l07050">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../#l02224">spell_dragonblight_corrosive_spit::AfterApply()</a>, <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../#l01044">CalcPeriodicCritChance()</a>, <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00593">CalculatePeriodic()</a>, <a class="el" href="../../#l00578">CalculatePeriodicData()</a>, <a class="el" href="../../#l00314">spell_dru_treant_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00161">spell_hun_generic_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00235">spell_mage_pet_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00081">spell_pri_shadowfiend_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00172">spell_sha_feral_spirit_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00287">spell_sha_fire_elemental_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00292">spell_warl_generic_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00403">spell_warl_infernal_scaling::CalculateResistanceAmount()</a>, <a class="el" href="../../#l00684">CalculateSpellMod()</a>, <a class="el" href="../../#l00733">spell_dk_pet_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00325">spell_dru_treant_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00176">spell_hun_generic_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00246">spell_mage_pet_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00092">spell_pri_shadowfiend_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00183">spell_sha_feral_spirit_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00298">spell_sha_fire_elemental_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00308">spell_warl_generic_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l00419">spell_warl_infernal_scaling::CalculateStatAmount()</a>, <a class="el" href="../../#l01472">Spell::EffectHeal()</a>, <a class="el" href="../../#l00323">Spell::EffectSchoolDMG()</a>, <a class="el" href="../../#l05409">HandleAuraDummy()</a>, <a class="el" href="../../#l04191">HandleAuraModEffectImmunity()</a>, <a class="el" href="../../#l04227">HandleAuraModSchoolImmunity()</a>, <a class="el" href="../../#l01862">HandleAuraModShapeshift()</a>, <a class="el" href="../../#l04214">HandleAuraModStateImmunity()</a>, <a class="el" href="../../#l04858">HandleAuraModWeaponCritPercent()</a>, <a class="el" href="../../#l03238">HandleAuraMounted()</a>, <a class="el" href="../../#l17647">Unit::HandleAuraRaidProcFromCharge()</a>, <a class="el" href="../../#l17558">Unit::HandleAuraRaidProcFromChargeWithValue()</a>, <a class="el" href="../../#l02161">HandleAuraTransform()</a>, <a class="el" href="../../#l05853">HandleChannelDeathItem()</a>, <a class="el" href="../../#l00161">spell_dk_raise_ally::HandleDummy()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l00534">spell_dru_idol_lifebloom::HandleEffectCalcSpellMod()</a>, <a class="el" href="../../#l00139">spell_optic_link_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l05178">HandleModDamageDone()</a>, <a class="el" href="../../#l05263">HandleModDamagePercentDone()</a>, <a class="el" href="../../#l04122">HandleModMechanicImmunity()</a>, <a class="el" href="../../#l03808">HandleModStateImmunityMask()</a>, <a class="el" href="../../#l07099">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../#l01231">spell_putricide_unbound_plague_dmg_aura::HandlePeriodic()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l06196">HandlePeriodicDummyAuraTick()</a>, <a class="el" href="../../#l07133">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l06849">HandlePeriodicHealthFunnelAuraTick()</a>, <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../#l07026">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../#l07167">HandlePeriodicPowerBurnAuraTick()</a>, <a class="el" href="../../#l06287">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../#l06555">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../#l00573">spell_dk_blood_caked_blade::HandleProc()</a>, <a class="el" href="../../#l00761">spell_gen_proc_not_self::HandleProc()</a>, <a class="el" href="../../#l00128">spell_pal_seal_of_command_aura::HandleProc()</a>, <a class="el" href="../../#l07252">HandleProcTriggerDamageAuraProc()</a>, <a class="el" href="../../#l08934">Unit::HandleProcTriggerSpell()</a>, <a class="el" href="../../#l07214">HandleProcTriggerSpellAuraProc()</a>, <a class="el" href="../../#l07231">HandleProcTriggerSpellWithValueAuraProc()</a>, <a class="el" href="../../#l07272">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../#l07320">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../#l08925">TriggeredByAuraSpellData::Init()</a>, <a class="el" href="../../#l05193">spell_gen_sober_up::OnRemove()</a>, <a class="el" href="../../#l00352">Acore::AbsorbAuraOrderPred::operator()()</a>, <a class="el" href="../../#l00334">spell_entropius_negative_energy_periodic::PeriodicTick()</a>, <a class="el" href="../../#l02230">spell_dragonblight_corrosive_spit::PeriodicTick()</a>, <a class="el" href="../../#l16050">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../#l13408">Player::RestoreBaseRune()</a>, <a class="el" href="../../#l06389">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../#l00330">Player::UpdateAttackPowerAndDamage()</a>, <a class="el" href="../../#l00927">UpdatePeriodic()</a>, and <a class="el" href="../../#l01737">SpellInfo::ValidateAttribute6SpellDamageMods()</a>.</p>

</div>
</div>
<a id="af8500c42594d040d396c20997cbffc69" name="af8500c42594d040d396c20997cbffc69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8500c42594d040d396c20997cbffc69">&#9670;&#160;</a></span>GetSpellModifier()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/da7/a08290.html">SpellModifier</a> * AuraEffect::GetSpellModifier </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   52</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#a25ce25c5ff12969bd62d0547c48b5753">m_spellmod</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00140">m_spellmod</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l16050">Unit::ProcDamageAndSpellFor()</a>.</p>

</div>
</div>
<a id="a05df315be4f02b28353b070bfb2c2fde" name="a05df315be4f02b28353b070bfb2c2fde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05df315be4f02b28353b070bfb2c2fde">&#9670;&#160;</a></span>GetTargetList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::GetTargetList </td>
          <td>(</td>
          <td class="paramtype">std::list&lt; <a class="el" href="../../db/df9/a08518.html">Unit</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>targetList</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  412</span>{</div>
<div class="line"><span class="lineno">  413</span>    <a class="code hl_typedef" href="../../df/d4a/a10794.html#af94996c697b3f790489314b6175ab311">Aura::ApplicationMap</a> <span class="keyword">const</span>&amp; targetMap = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a1f5268b496e4212bc6e5f887034d04b0">GetApplicationMap</a>();</div>
<div class="line"><span class="lineno">  414</span>    <span class="comment">// remove all targets which were not added to new list - they no longer deserve area aura</span></div>
<div class="line"><span class="lineno">  415</span>    <span class="keywordflow">for</span> (Aura::ApplicationMap::const_iterator appIter = targetMap.begin(); appIter != targetMap.end(); ++appIter)</div>
<div class="line"><span class="lineno">  416</span>    {</div>
<div class="line"><span class="lineno">  417</span>        <span class="keywordflow">if</span> (appIter-&gt;second-&gt;HasEffect(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno">  418</span>            targetList.push_back(appIter-&gt;second-&gt;GetTarget());</div>
<div class="line"><span class="lineno">  419</span>    }</div>
<div class="line"><span class="lineno">  420</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00181">Aura::GetApplicationMap()</a>, <a class="el" href="../../#l00049">GetBase()</a>, and <a class="el" href="../../#l00056">GetEffIndex()</a>.</p>

</div>
</div>
<a id="a0c28e995bc0e15c692c24154bab9df4d" name="a0c28e995bc0e15c692c24154bab9df4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c28e995bc0e15c692c24154bab9df4d">&#9670;&#160;</a></span>GetTickNumber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::GetTickNumber </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   87</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00144">m_tickNumber</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l20302">Unit::CastDelayedSpellWithPeriodicAmount()</a>, <a class="el" href="../../#l01428">spell_pos_blight_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l02371">spell_icc_yh_volley_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l01210">spell_hodir_biting_cold_main_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l01351">spell_hodir_flash_freeze_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00437">spell_ignis_scorch_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l02122">spell_mimiron_rapid_burst_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00355">spell_frost_tomb_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00139">spell_optic_link_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00585">spell_quest_test_flight_charging::HandleEffectPeriodicPlatform()</a>, <a class="el" href="../../#l00573">spell_quest_test_flight_charging::HandleEffectPeriodicSelf()</a>, <a class="el" href="../../#l00319">spell_hallows_end_base_fire::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../#l01324">spell_gen_burn_brutallus::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../#l01231">spell_putricide_unbound_plague_dmg_aura::HandlePeriodic()</a>, <a class="el" href="../../#l00791">spell_shadow_bolt_whirl::HandlePeriodic()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l00302">spell_bronjahm_soulstorm_channel_ooc_aura::HandlePeriodicTick()</a>, <a class="el" href="../../#l00323">spell_bronjahm_soulstorm_visual_aura::HandlePeriodicTick()</a>, <a class="el" href="../../#l00328">spell_wailing_souls_periodic_aura::HandlePeriodicTick()</a>, <a class="el" href="../../#l00498">spell_exploding_orb_auto_grow_aura::HandlePeriodicTick()</a>, <a class="el" href="../../#l01192">spell_item_direbrew_remote_aura::HandlePeriodicTick()</a>, <a class="el" href="../../#l06287">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../#l01998">spell_igb_rocket_pack_aura::HandleRemove()</a>, <a class="el" href="../../#l08925">TriggeredByAuraSpellData::Init()</a>, <a class="el" href="../../#l00523">spell_kalecgos_curse_of_boundless_agony_aura::OnPeriodic()</a>, <a class="el" href="../../#l00253">spell_muru_darkness_aura::OnPeriodic()</a>, <a class="el" href="../../#l02794">spell_the_lich_king_vile_spirits_aura::OnPeriodic()</a>, <a class="el" href="../../#l03358">spell_the_lich_king_soul_rip_aura::OnPeriodic()</a>, <a class="el" href="../../#l00367">spell_web_wrap_damage::OnPeriodic()</a>, <a class="el" href="../../#l00895">spell_assembly_rune_of_summoning_aura::OnPeriodic()</a>, <a class="el" href="../../#l01597">spell_illidan_demon_transform2_aura::OnPeriodic()</a>, <a class="el" href="../../#l01857">spell_the_lich_king_infest_aura::OnUpdate()</a>, <a class="el" href="../../#l00569">spell_karazhan_overload_aura::PeriodicTick()</a>, <a class="el" href="../../#l00157">spell_geddon_inferno_aura::PeriodicTick()</a>, <a class="el" href="../../#l00334">spell_entropius_negative_energy_periodic::PeriodicTick()</a>, <a class="el" href="../../#l00485">spell_doomfire::PeriodicTick()</a>, <a class="el" href="../../#l00207">spell_trollgore_corpse_explode_aura::PeriodicTick()</a>, <a class="el" href="../../#l00600">spell_blood_queen_pact_of_the_darkfallen_dmg_aura::PeriodicTick()</a>, <a class="el" href="../../#l02155">spell_igb_explosion_main_aura::PeriodicTick()</a>, <a class="el" href="../../#l01218">spell_dreamwalker_mana_void_aura::PeriodicTick()</a>, <a class="el" href="../../#l00708">spell_summoning_rhyme_aura::PeriodicTick()</a>, <a class="el" href="../../#l00131">spell_broggok_poison_cloud::PeriodicTick()</a>, <a class="el" href="../../#l04567">spell_gen_holiday_buff_food::TriggerFoodBuff()</a>, and <a class="el" href="../../#l00147">spell_mother_shahraz_random_periodic_aura::Update()</a>.</p>

</div>
</div>
<a id="a67ca18798f448847e77665752fa4a32c" name="a67ca18798f448847e77665752fa4a32c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67ca18798f448847e77665752fa4a32c">&#9670;&#160;</a></span>GetTotalTicks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::GetTotalTicks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7366</span>{</div>
<div class="line"><span class="lineno"> 7367</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> totalTicks = 1;</div>
<div class="line"><span class="lineno"> 7368</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>)</div>
<div class="line"><span class="lineno"> 7369</span>    {</div>
<div class="line"><span class="lineno"> 7370</span>        totalTicks = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a14457cfa6d589b8024bbeeb1d4aa03d3">GetMaxDuration</a>() / <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>;</div>
<div class="line"><span class="lineno"> 7371</span> </div>
<div class="line"><span class="lineno"> 7372</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a376aa62261a98289589839b821786adaa1e5646f92d527da8a1a98bb0f14f3b86">SPELL_ATTR5_EXTRA_INITIAL_PERIOD</a>))</div>
<div class="line"><span class="lineno"> 7373</span>        {</div>
<div class="line"><span class="lineno"> 7374</span>            ++totalTicks;</div>
<div class="line"><span class="lineno"> 7375</span>        }</div>
<div class="line"><span class="lineno"> 7376</span>    }</div>
<div class="line"><span class="lineno"> 7377</span> </div>
<div class="line"><span class="lineno"> 7378</span>    <span class="keywordflow">return</span> totalTicks;</div>
<div class="line"><span class="lineno"> 7379</span>}</div>
<div class="ttc" id="aa10794_html_a14457cfa6d589b8024bbeeb1d4aa03d3"><div class="ttname"><a href="../../df/d4a/a10794.html#a14457cfa6d589b8024bbeeb1d4aa03d3">Aura::GetMaxDuration</a></div><div class="ttdeci">int32 GetMaxDuration() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:129</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00129">Aura::GetMaxDuration()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l00143">m_amplitude</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, and <a class="el" href="../../#l00576">SPELL_ATTR5_EXTRA_INITIAL_PERIOD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00558">spell_dru_innervate::CalculateAmount()</a>, <a class="el" href="../../#l02415">spell_gen_lifeblood::CalculateAmount()</a>, <a class="el" href="../../#l04207">spell_gen_gift_of_naaru::CalculateAmount()</a>, <a class="el" href="../../#l20302">Unit::CastDelayedSpellWithPeriodicAmount()</a>, <a class="el" href="../../#l00793">spell_pri_renew::HandleApplyEffect()</a>, <a class="el" href="../../#l01265">Aura::HandleAuraSpecificMods()</a>, <a class="el" href="../../#l01428">spell_pos_blight_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l01351">spell_hodir_flash_freeze_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00437">spell_ignis_scorch_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l00442">spell_hun_chimera_shot::HandleScriptEffect()</a>, <a class="el" href="../../#l00485">spell_doomfire::PeriodicTick()</a>, <a class="el" href="../../#l00131">spell_broggok_poison_cloud::PeriodicTick()</a>, and <a class="el" href="../../#l00897">Update()</a>.</p>

</div>
</div>
<a id="a45af9668ac3271c2f5a924872d0f1614" name="a45af9668ac3271c2f5a924872d0f1614"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45af9668ac3271c2f5a924872d0f1614">&#9670;&#160;</a></span>HandleArenaPreparation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleArenaPreparation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5352</span>{</div>
<div class="line"><span class="lineno"> 5353</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 5354</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5355</span> </div>
<div class="line"><span class="lineno"> 5356</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5357</span> </div>
<div class="line"><span class="lineno"> 5358</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 5359</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad9f2d48b20f62e17abf5c1892cebe296">SetUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a41af335bbeaec4b3a181af2366a6a9ba">UNIT_FLAG_PREPARATION</a>);</div>
<div class="line"><span class="lineno"> 5360</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5361</span>    {</div>
<div class="line"><span class="lineno"> 5362</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 5363</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><span class="lineno"> 5364</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5365</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af9a5a43c2d7940c38f8b101409666a0d">RemoveUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a41af335bbeaec4b3a181af2366a6a9ba">UNIT_FLAG_PREPARATION</a>);</div>
<div class="line"><span class="lineno"> 5366</span>    }</div>
<div class="line"><span class="lineno"> 5367</span>}</div>
<div class="ttc" id="aa03092_html_a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b"><div class="ttname"><a href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_REAL</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:42</div></div>
<div class="ttc" id="aa03521_html_affdd0d554c8bcaaa85a879f5a9d60934a41af335bbeaec4b3a181af2366a6a9ba"><div class="ttname"><a href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a41af335bbeaec4b3a181af2366a6a9ba">UNIT_FLAG_PREPARATION</a></div><div class="ttdeci">@ UNIT_FLAG_PREPARATION</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:234</div></div>
<div class="ttc" id="aa08518_html"><div class="ttname"><a href="../../db/df9/a08518.html">Unit</a></div><div class="ttdef"><b>Definition:</b> Unit.h:630</div></div>
<div class="ttc" id="aa08518_html_a9cd076c7f1e10e71af51ffc1ea1f9136"><div class="ttname"><a href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">Unit::HasAuraType</a></div><div class="ttdeci">bool HasAuraType(AuraType auraType) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5705</div></div>
<div class="ttc" id="aa08518_html_ad9f2d48b20f62e17abf5c1892cebe296"><div class="ttname"><a href="../../db/df9/a08518.html#ad9f2d48b20f62e17abf5c1892cebe296">Unit::SetUnitFlag</a></div><div class="ttdeci">void SetUnitFlag(UnitFlags flags)</div><div class="ttdoc">UnitFlags available in UnitDefines.h.</div><div class="ttdef"><b>Definition:</b> Unit.h:713</div></div>
<div class="ttc" id="aa08518_html_af387d5e18806e37f65ebc3408c0b8712"><div class="ttname"><a href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">Unit::GetTarget</a></div><div class="ttdeci">ObjectGuid GetTarget() const</div><div class="ttdef"><b>Definition:</b> Unit.h:818</div></div>
<div class="ttc" id="aa08518_html_af9a5a43c2d7940c38f8b101409666a0d"><div class="ttname"><a href="../../db/df9/a08518.html#af9a5a43c2d7940c38f8b101409666a0d">Unit::RemoveUnitFlag</a></div><div class="ttdeci">void RemoveUnitFlag(UnitFlags flags)</div><div class="ttdoc">UnitFlags available in UnitDefines.h.</div><div class="ttdef"><b>Definition:</b> Unit.h:714</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00714">Unit::RemoveUnitFlag()</a>, <a class="el" href="../../#l00713">Unit::SetUnitFlag()</a>, and <a class="el" href="../../#l00234">UNIT_FLAG_PREPARATION</a>.</p>

</div>
</div>
<a id="a696f3f2b219427697a36c4d3dd7990a5" name="a696f3f2b219427697a36c4d3dd7990a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a696f3f2b219427697a36c4d3dd7990a5">&#9670;&#160;</a></span>HandleAuraAllowFlight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraAllowFlight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3306</span>{</div>
<div class="line"><span class="lineno"> 3307</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3308</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3309</span> </div>
<div class="line"><span class="lineno"> 3310</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3311</span> </div>
<div class="line"><span class="lineno"> 3312</span>    <span class="keywordflow">if</span> (!apply)</div>
<div class="line"><span class="lineno"> 3313</span>    {</div>
<div class="line"><span class="lineno"> 3314</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3315</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()) || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>))</div>
<div class="line"><span class="lineno"> 3316</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3317</span>    }</div>
<div class="line"><span class="lineno"> 3318</span> </div>
<div class="line"><span class="lineno"> 3319</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8589825a8a8fd6e20c48af3605297bd4">SetCanFly</a>(apply);</div>
<div class="line"><span class="lineno"> 3320</span> </div>
<div class="line"><span class="lineno"> 3321</span>    <span class="keywordflow">if</span> (!apply &amp;&amp; target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aacc8ee332f66effdc0d77c126dae1961">IsCreature</a>() &amp;&amp; !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a55b787bbffa61290e6b6a247f2927c90">IsLevitating</a>())</div>
<div class="line"><span class="lineno"> 3322</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../d8/db5/a09662.html#ae37d25ba49a3887faa07bc194f3447fd">MoveFall</a>();</div>
<div class="line"><span class="lineno"> 3323</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a></div><div class="ttdeci">@ SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:270</div></div>
<div class="ttc" id="aa03092_html_a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2"><div class="ttname"><a href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:48</div></div>
<div class="ttc" id="aa08142_html_aacc8ee332f66effdc0d77c126dae1961"><div class="ttname"><a href="../../df/d2d/a08142.html#aacc8ee332f66effdc0d77c126dae1961">Object::IsCreature</a></div><div class="ttdeci">bool IsCreature() const</div><div class="ttdef"><b>Definition:</b> Object.h:201</div></div>
<div class="ttc" id="aa08518_html_a4a04a3f22c3b0d6f4933993ac0cc7aa4"><div class="ttname"><a href="../../db/df9/a08518.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">Unit::GetMotionMaster</a></div><div class="ttdeci">MotionMaster * GetMotionMaster()</div><div class="ttdef"><b>Definition:</b> Unit.h:1622</div></div>
<div class="ttc" id="aa08518_html_a55b787bbffa61290e6b6a247f2927c90"><div class="ttname"><a href="../../db/df9/a08518.html#a55b787bbffa61290e6b6a247f2927c90">Unit::IsLevitating</a></div><div class="ttdeci">bool IsLevitating() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1575</div></div>
<div class="ttc" id="aa08518_html_a8589825a8a8fd6e20c48af3605297bd4"><div class="ttname"><a href="../../db/df9/a08518.html#a8589825a8a8fd6e20c48af3605297bd4">Unit::SetCanFly</a></div><div class="ttdeci">virtual bool SetCanFly(bool enable, bool packetOnly=false)</div><div class="ttdoc">Add the movement flag: MOVEMENTFLAGCAN_FLY. Generaly only use by players, allowing them to fly by pre...</div><div class="ttdef"><b>Definition:</b> Unit.cpp:20603</div></div>
<div class="ttc" id="aa09662_html_ae37d25ba49a3887faa07bc194f3447fd"><div class="ttname"><a href="../../d8/db5/a09662.html#ae37d25ba49a3887faa07bc194f3447fd">MotionMaster::MoveFall</a></div><div class="ttdeci">void MoveFall(uint32 id=0, bool addFlagForNPC=false)</div><div class="ttdoc">The unit will fall. Used when in the air. Doesn't work with UNIT_FLAG_DISABLE_MOVE.</div><div class="ttdef"><b>Definition:</b> MotionMaster.cpp:627</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l01622">Unit::GetMotionMaster()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00201">Object::IsCreature()</a>, <a class="el" href="../../#l01575">Unit::IsLevitating()</a>, <a class="el" href="../../#l00627">MotionMaster::MoveFall()</a>, <a class="el" href="../../#l20603">Unit::SetCanFly()</a>, and <a class="el" href="../../#l00270">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>.</p>

</div>
</div>
<a id="a8229a29c8125b2558b1a875ae3deace8" name="a8229a29c8125b2558b1a875ae3deace8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8229a29c8125b2558b1a875ae3deace8">&#9670;&#160;</a></span>HandleAuraAllowOnlyAbility()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraAllowOnlyAbility </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3084</span>{</div>
<div class="line"><span class="lineno"> 3085</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3086</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3087</span> </div>
<div class="line"><span class="lineno"> 3088</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3089</span> </div>
<div class="line"><span class="lineno"> 3090</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 3091</span>    {</div>
<div class="line"><span class="lineno"> 3092</span>        <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3093</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a190ebc08c3d5bc837ea312c7901db505">SetPlayerFlag</a>(<a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a3ff501fa2c348b8887c3e9eac3ab7dcda0d4e89dc06c8c0976de45352f9800b9b">PLAYER_ALLOW_ONLY_ABILITY</a>);</div>
<div class="line"><span class="lineno"> 3094</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3095</span>        {</div>
<div class="line"><span class="lineno"> 3096</span>            <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3097</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a914df68f2d9f91943ee1c79f30eb81c2">SPELL_AURA_ALLOW_ONLY_ABILITY</a>))</div>
<div class="line"><span class="lineno"> 3098</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3099</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a202d37a0e6e6a63a82e71e53dec65059">RemovePlayerFlag</a>(<a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a3ff501fa2c348b8887c3e9eac3ab7dcda0d4e89dc06c8c0976de45352f9800b9b">PLAYER_ALLOW_ONLY_ABILITY</a>);</div>
<div class="line"><span class="lineno"> 3100</span>        }</div>
<div class="line"><span class="lineno"> 3101</span>    }</div>
<div class="line"><span class="lineno"> 3102</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a914df68f2d9f91943ee1c79f30eb81c2"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a914df68f2d9f91943ee1c79f30eb81c2">SPELL_AURA_ALLOW_ONLY_ABILITY</a></div><div class="ttdeci">@ SPELL_AURA_ALLOW_ONLY_ABILITY</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:326</div></div>
<div class="ttc" id="aa03365_html_a3ff501fa2c348b8887c3e9eac3ab7dcda0d4e89dc06c8c0976de45352f9800b9b"><div class="ttname"><a href="../../d7/d13/a03365.html#a3ff501fa2c348b8887c3e9eac3ab7dcda0d4e89dc06c8c0976de45352f9800b9b">PLAYER_ALLOW_ONLY_ABILITY</a></div><div class="ttdeci">@ PLAYER_ALLOW_ONLY_ABILITY</div><div class="ttdef"><b>Definition:</b> Player.h:497</div></div>
<div class="ttc" id="aa08386_html_a190ebc08c3d5bc837ea312c7901db505"><div class="ttname"><a href="../../d0/dc6/a08386.html#a190ebc08c3d5bc837ea312c7901db505">Player::SetPlayerFlag</a></div><div class="ttdeci">void SetPlayerFlag(PlayerFlags flags)</div><div class="ttdef"><b>Definition:</b> Player.h:1109</div></div>
<div class="ttc" id="aa08386_html_a202d37a0e6e6a63a82e71e53dec65059"><div class="ttname"><a href="../../d0/dc6/a08386.html#a202d37a0e6e6a63a82e71e53dec65059">Player::RemovePlayerFlag</a></div><div class="ttdeci">void RemovePlayerFlag(PlayerFlags flags)</div><div class="ttdef"><b>Definition:</b> Player.h:1110</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00497">PLAYER_ALLOW_ONLY_ABILITY</a>, <a class="el" href="../../#l01110">Player::RemovePlayerFlag()</a>, <a class="el" href="../../#l01109">Player::SetPlayerFlag()</a>, <a class="el" href="../../#l00326">SPELL_AURA_ALLOW_ONLY_ABILITY</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a1d873a20f6269d508fee14b54f8190cb" name="a1d873a20f6269d508fee14b54f8190cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d873a20f6269d508fee14b54f8190cb">&#9670;&#160;</a></span>HandleAuraCloneCaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraCloneCaster </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2780</span>{</div>
<div class="line"><span class="lineno"> 2781</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 2782</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2783</span> </div>
<div class="line"><span class="lineno"> 2784</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 2785</span> </div>
<div class="line"><span class="lineno"> 2786</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 2787</span>    {</div>
<div class="line"><span class="lineno"> 2788</span>        <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 2789</span>        <span class="keywordflow">if</span> (!caster || caster == target)</div>
<div class="line"><span class="lineno"> 2790</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2791</span> </div>
<div class="line"><span class="lineno"> 2792</span>        <span class="comment">// What must be cloned? at least display and scale</span></div>
<div class="line"><span class="lineno"> 2793</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a86b4d9e6cfa52d722608466a285cac0c">GetDisplayId</a>());</div>
<div class="line"><span class="lineno"> 2794</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a585c0587bf93911ef964892c82b82172">SetUnitFlag2</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a1355d2f1caddf5ed3ecc942b37f16e27">UNIT_FLAG2_MIRROR_IMAGE</a>);</div>
<div class="line"><span class="lineno"> 2795</span>    }</div>
<div class="line"><span class="lineno"> 2796</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2797</span>    {</div>
<div class="line"><span class="lineno"> 2798</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8ac9fa13ad31b42e5d1372694d22a799">GetNativeDisplayId</a>());</div>
<div class="line"><span class="lineno"> 2799</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a999bdc0f7dfd67915713460cf0e451bd">RemoveUnitFlag2</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a1355d2f1caddf5ed3ecc942b37f16e27">UNIT_FLAG2_MIRROR_IMAGE</a>);</div>
<div class="line"><span class="lineno"> 2800</span>    }</div>
<div class="line"><span class="lineno"> 2801</span>}</div>
<div class="ttc" id="aa03521_html_a3320fdc05dc07c396f8943de4018e682a1355d2f1caddf5ed3ecc942b37f16e27"><div class="ttname"><a href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a1355d2f1caddf5ed3ecc942b37f16e27">UNIT_FLAG2_MIRROR_IMAGE</a></div><div class="ttdeci">@ UNIT_FLAG2_MIRROR_IMAGE</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:272</div></div>
<div class="ttc" id="aa08518_html_a45cc249e2d3dc3f60bd61b143c8a8a7d"><div class="ttname"><a href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">Unit::SetDisplayId</a></div><div class="ttdeci">virtual void SetDisplayId(uint32 modelId, float displayScale=1.f)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:16758</div></div>
<div class="ttc" id="aa08518_html_a585c0587bf93911ef964892c82b82172"><div class="ttname"><a href="../../db/df9/a08518.html#a585c0587bf93911ef964892c82b82172">Unit::SetUnitFlag2</a></div><div class="ttdeci">void SetUnitFlag2(UnitFlags2 flags)</div><div class="ttdef"><b>Definition:</b> Unit.h:719</div></div>
<div class="ttc" id="aa08518_html_a86b4d9e6cfa52d722608466a285cac0c"><div class="ttname"><a href="../../db/df9/a08518.html#a86b4d9e6cfa52d722608466a285cac0c">Unit::GetDisplayId</a></div><div class="ttdeci">uint32 GetDisplayId() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1791</div></div>
<div class="ttc" id="aa08518_html_a8ac9fa13ad31b42e5d1372694d22a799"><div class="ttname"><a href="../../db/df9/a08518.html#a8ac9fa13ad31b42e5d1372694d22a799">Unit::GetNativeDisplayId</a></div><div class="ttdeci">uint32 GetNativeDisplayId() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1793</div></div>
<div class="ttc" id="aa08518_html_a999bdc0f7dfd67915713460cf0e451bd"><div class="ttname"><a href="../../db/df9/a08518.html#a999bdc0f7dfd67915713460cf0e451bd">Unit::RemoveUnitFlag2</a></div><div class="ttdeci">void RemoveUnitFlag2(UnitFlags2 flags)</div><div class="ttdef"><b>Definition:</b> Unit.h:720</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l01791">Unit::GetDisplayId()</a>, <a class="el" href="../../#l01793">Unit::GetNativeDisplayId()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00720">Unit::RemoveUnitFlag2()</a>, <a class="el" href="../../#l16758">Unit::SetDisplayId()</a>, <a class="el" href="../../#l00719">Unit::SetUnitFlag2()</a>, and <a class="el" href="../../#l00272">UNIT_FLAG2_MIRROR_IMAGE</a>.</p>

</div>
</div>
<a id="a65d82e7ba5aecd7018f082a7580fc491" name="a65d82e7ba5aecd7018f082a7580fc491"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65d82e7ba5aecd7018f082a7580fc491">&#9670;&#160;</a></span>HandleAuraControlVehicle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraControlVehicle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Such auras are applied from a caster(=player) to a vehicle. This has been verified using spell #49256 </p>
<div class="fragment"><div class="line"><span class="lineno"> 3650</span>{</div>
<div class="line"><span class="lineno"> 3651</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3652</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3653</span> </div>
<div class="line"><span class="lineno"> 3654</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3655</span> </div>
<div class="line"><span class="lineno"> 3656</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0414b693087d7f3acc4a13eadb619660">IsVehicle</a>())</div>
<div class="line"><span class="lineno"> 3657</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3658</span> </div>
<div class="line"><span class="lineno"> 3659</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 3660</span> </div>
<div class="line"><span class="lineno"> 3661</span>    <span class="keywordflow">if</span> (!caster || caster == target)</div>
<div class="line"><span class="lineno"> 3662</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3663</span> </div>
<div class="line"><span class="lineno"> 3664</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3665</span>    {</div>
<div class="line"><span class="lineno"> 3666</span>        <span class="comment">// Currently spells that have base points  0 and DieSides 0 = &quot;0/0&quot; exception are pushed to -1,</span></div>
<div class="line"><span class="lineno"> 3667</span>        <span class="comment">// however the idea of 0/0 is to ingore flag VEHICLE_SEAT_FLAG_CAN_ENTER_OR_EXIT and -1 checks for it,</span></div>
<div class="line"><span class="lineno"> 3668</span>        <span class="comment">// so this break such spells or most of them.</span></div>
<div class="line"><span class="lineno"> 3669</span>        <span class="comment">// Current formula about m_amount: effect base points + dieside - 1</span></div>
<div class="line"><span class="lineno"> 3670</span>        <span class="comment">// TO DO: Reasearch more about 0/0 and fix it.</span></div>
<div class="line"><span class="lineno"> 3671</span>        caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac6fc712b61598c0a93e40a5fb33e7157">_EnterVehicle</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae54fce65a1c084c982043777288895ec">GetVehicleKit</a>(), <a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a> - 1, aurApp);</div>
<div class="line"><span class="lineno"> 3672</span>    }</div>
<div class="line"><span class="lineno"> 3673</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3674</span>    {</div>
<div class="line"><span class="lineno"> 3675</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 53111) <span class="comment">// Devour Humanoid</span></div>
<div class="line"><span class="lineno"> 3676</span>        {</div>
<div class="line"><span class="lineno"> 3677</span>            <a class="code hl_function" href="../../db/df9/a08518.html#a413f3a85a1e57ce8c13b8870347830f5">Unit::Kill</a>(target, caster);</div>
<div class="line"><span class="lineno"> 3678</span>            <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aacc8ee332f66effdc0d77c126dae1961">IsCreature</a>())</div>
<div class="line"><span class="lineno"> 3679</span>                caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>()-&gt;<a class="code hl_function" href="../../d1/d66/a07770.html#a6f6a5dc263a9c68e7712b01da2065dd9">RemoveCorpse</a>();</div>
<div class="line"><span class="lineno"> 3680</span>        }</div>
<div class="line"><span class="lineno"> 3681</span> </div>
<div class="line"><span class="lineno"> 3682</span>        caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a63db938dab963f70662b18baf84237c5">_ExitVehicle</a>();</div>
<div class="line"><span class="lineno"> 3683</span>        <span class="comment">// some SPELL_AURA_CONTROL_VEHICLE auras have a dummy effect on the player - remove them</span></div>
<div class="line"><span class="lineno"> 3684</span>        caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 3685</span>    }</div>
<div class="line"><span class="lineno"> 3686</span>}</div>
<div class="ttc" id="aa03092_html_a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97"><div class="ttname"><a href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:49</div></div>
<div class="ttc" id="aa07770_html_a6f6a5dc263a9c68e7712b01da2065dd9"><div class="ttname"><a href="../../d1/d66/a07770.html#a6f6a5dc263a9c68e7712b01da2065dd9">Creature::RemoveCorpse</a></div><div class="ttdeci">void RemoveCorpse(bool setSpawnTime=true, bool skipVisibility=false)</div><div class="ttdef"><b>Definition:</b> Creature.cpp:400</div></div>
<div class="ttc" id="aa08142_html_ab0e2ef1ac1daa91476f749e0ec6ad3c6"><div class="ttname"><a href="../../df/d2d/a08142.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">Object::ToCreature</a></div><div class="ttdeci">Creature * ToCreature()</div><div class="ttdef"><b>Definition:</b> Object.h:202</div></div>
<div class="ttc" id="aa08518_html_a0414b693087d7f3acc4a13eadb619660"><div class="ttname"><a href="../../db/df9/a08518.html#a0414b693087d7f3acc4a13eadb619660">Unit::IsVehicle</a></div><div class="ttdeci">bool IsVehicle() const</div><div class="ttdef"><b>Definition:</b> Unit.h:757</div></div>
<div class="ttc" id="aa08518_html_a413f3a85a1e57ce8c13b8870347830f5"><div class="ttname"><a href="../../db/df9/a08518.html#a413f3a85a1e57ce8c13b8870347830f5">Unit::Kill</a></div><div class="ttdeci">static void Kill(Unit *killer, Unit *victim, bool durabilityLoss=true, WeaponAttackType attackType=BASE_ATTACK, SpellInfo const *spellProto=nullptr, Spell const *spell=nullptr)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:17698</div></div>
<div class="ttc" id="aa08518_html_a63db938dab963f70662b18baf84237c5"><div class="ttname"><a href="../../db/df9/a08518.html#a63db938dab963f70662b18baf84237c5">Unit::_ExitVehicle</a></div><div class="ttdeci">void _ExitVehicle(Position const *exitPosition=nullptr)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:19768</div></div>
<div class="ttc" id="aa08518_html_ac6fc712b61598c0a93e40a5fb33e7157"><div class="ttname"><a href="../../db/df9/a08518.html#ac6fc712b61598c0a93e40a5fb33e7157">Unit::_EnterVehicle</a></div><div class="ttdeci">void _EnterVehicle(Vehicle *vehicle, int8 seatId, AuraApplication const *aurApp=nullptr)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:19650</div></div>
<div class="ttc" id="aa08518_html_ae54fce65a1c084c982043777288895ec"><div class="ttname"><a href="../../db/df9/a08518.html#ae54fce65a1c084c982043777288895ec">Unit::GetVehicleKit</a></div><div class="ttdeci">Vehicle * GetVehicleKit() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1739</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l19650">Unit::_EnterVehicle()</a>, <a class="el" href="../../#l19768">Unit::_ExitVehicle()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01739">Unit::GetVehicleKit()</a>, <a class="el" href="../../#l00201">Object::IsCreature()</a>, <a class="el" href="../../#l00757">Unit::IsVehicle()</a>, <a class="el" href="../../#l17698">Unit::Kill()</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../#l00400">Creature::RemoveCorpse()</a>, and <a class="el" href="../../#l00202">Object::ToCreature()</a>.</p>

</div>
</div>
<a id="aaf478059af657f8126f4979f94b60159" name="aaf478059af657f8126f4979f94b60159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf478059af657f8126f4979f94b60159">&#9670;&#160;</a></span>HandleAuraConvertRune()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraConvertRune </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6020</span>{</div>
<div class="line"><span class="lineno"> 6021</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 6022</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6023</span> </div>
<div class="line"><span class="lineno"> 6024</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 6025</span> </div>
<div class="line"><span class="lineno"> 6026</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 6027</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6028</span> </div>
<div class="line"><span class="lineno"> 6029</span>    <a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* player = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>();</div>
<div class="line"><span class="lineno"> 6030</span> </div>
<div class="line"><span class="lineno"> 6031</span>    <span class="keywordflow">if</span> (!player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a966607859ce9c9537038b9ca21b9e827">IsClass</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a86e4e3df7a5142175aa5df522d3346cfa7f7b30426fd386c181799196c1739058">CLASS_DEATH_KNIGHT</a>, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a2a9983288cb2a06108c1d1a94c96c046a14fe87d018c5ff3c07e81b54fb10ae90">CLASS_CONTEXT_ABILITY</a>))</div>
<div class="line"><span class="lineno"> 6032</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6033</span> </div>
<div class="line"><span class="lineno"> 6034</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> runes = <a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>;</div>
<div class="line"><span class="lineno"> 6035</span>    <span class="comment">// convert number of runes specified in aura amount of rune type in miscvalue to runetype in miscvalueb</span></div>
<div class="line"><span class="lineno"> 6036</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 6037</span>    {</div>
<div class="line"><span class="lineno"> 6038</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d13/a03365.html#a2a50815668e7443f20a14ff3fa353db4">MAX_RUNES</a> &amp;&amp; runes; ++i)</div>
<div class="line"><span class="lineno"> 6039</span>        {</div>
<div class="line"><span class="lineno"> 6040</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() != player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a9df30430ce60344703a33ae012e92531">GetCurrentRune</a>(i))</div>
<div class="line"><span class="lineno"> 6041</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6042</span>            <span class="keywordflow">if</span> (!player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a85b9ddea0d0cc793e51e579aaa196d70">GetRuneCooldown</a>(i))</div>
<div class="line"><span class="lineno"> 6043</span>            {</div>
<div class="line"><span class="lineno"> 6044</span>                player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a941506d862d404409aa0888e5244fb98">AddRuneByAuraEffect</a>(i, <a class="code hl_enumeration" href="../../d7/d13/a03365.html#a2377260993cd4a14aaab6f5771385e11">RuneType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a88fa5605246883e095cd82ebd5d75bef">GetMiscValueB</a>()), <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6045</span>                --runes;</div>
<div class="line"><span class="lineno"> 6046</span>            }</div>
<div class="line"><span class="lineno"> 6047</span>        }</div>
<div class="line"><span class="lineno"> 6048</span>    }</div>
<div class="line"><span class="lineno"> 6049</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 6050</span>        player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a0d99907a41953dfe2e4589a785503fc1">RemoveRunesByAuraEffect</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6051</span>}</div>
<div class="ttc" id="aa02771_html_a86e4e3df7a5142175aa5df522d3346cfa7f7b30426fd386c181799196c1739058"><div class="ttname"><a href="../../d0/dbd/a02771.html#a86e4e3df7a5142175aa5df522d3346cfa7f7b30426fd386c181799196c1739058">CLASS_DEATH_KNIGHT</a></div><div class="ttdeci">@ CLASS_DEATH_KNIGHT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:146</div></div>
<div class="ttc" id="aa03365_html_a2377260993cd4a14aaab6f5771385e11"><div class="ttname"><a href="../../d7/d13/a03365.html#a2377260993cd4a14aaab6f5771385e11">RuneType</a></div><div class="ttdeci">RuneType</div><div class="ttdef"><b>Definition:</b> Player.h:408</div></div>
<div class="ttc" id="aa03365_html_a2a50815668e7443f20a14ff3fa353db4"><div class="ttname"><a href="../../d7/d13/a03365.html#a2a50815668e7443f20a14ff3fa353db4">MAX_RUNES</a></div><div class="ttdeci">#define MAX_RUNES</div><div class="ttdef"><b>Definition:</b> Player.h:398</div></div>
<div class="ttc" id="aa03521_html_a2a9983288cb2a06108c1d1a94c96c046a14fe87d018c5ff3c07e81b54fb10ae90"><div class="ttname"><a href="../../d8/dbe/a03521.html#a2a9983288cb2a06108c1d1a94c96c046a14fe87d018c5ff3c07e81b54fb10ae90">CLASS_CONTEXT_ABILITY</a></div><div class="ttdeci">@ CLASS_CONTEXT_ABILITY</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:213</div></div>
<div class="ttc" id="aa08386_html_a0d99907a41953dfe2e4589a785503fc1"><div class="ttname"><a href="../../d0/dc6/a08386.html#a0d99907a41953dfe2e4589a785503fc1">Player::RemoveRunesByAuraEffect</a></div><div class="ttdeci">void RemoveRunesByAuraEffect(AuraEffect const *aura)</div><div class="ttdef"><b>Definition:</b> Player.cpp:13396</div></div>
<div class="ttc" id="aa08386_html_a85b9ddea0d0cc793e51e579aaa196d70"><div class="ttname"><a href="../../d0/dc6/a08386.html#a85b9ddea0d0cc793e51e579aaa196d70">Player::GetRuneCooldown</a></div><div class="ttdeci">uint32 GetRuneCooldown(uint8 index) const</div><div class="ttdef"><b>Definition:</b> Player.h:2491</div></div>
<div class="ttc" id="aa08386_html_a941506d862d404409aa0888e5244fb98"><div class="ttname"><a href="../../d0/dc6/a08386.html#a941506d862d404409aa0888e5244fb98">Player::AddRuneByAuraEffect</a></div><div class="ttdeci">void AddRuneByAuraEffect(uint8 index, RuneType newType, AuraEffect const *aura)</div><div class="ttdef"><b>Definition:</b> Player.h:2502</div></div>
<div class="ttc" id="aa08386_html_a966607859ce9c9537038b9ca21b9e827"><div class="ttname"><a href="../../d0/dc6/a08386.html#a966607859ce9c9537038b9ca21b9e827">Player::IsClass</a></div><div class="ttdeci">bool IsClass(Classes playerClass, ClassContext context=CLASS_CONTEXT_NONE) const override</div><div class="ttdef"><b>Definition:</b> Player.cpp:1281</div></div>
<div class="ttc" id="aa08386_html_a9df30430ce60344703a33ae012e92531"><div class="ttname"><a href="../../d0/dc6/a08386.html#a9df30430ce60344703a33ae012e92531">Player::GetCurrentRune</a></div><div class="ttdeci">RuneType GetCurrentRune(uint8 index) const</div><div class="ttdef"><b>Definition:</b> Player.h:2490</div></div>
<div class="ttc" id="aa10782_html_a88fa5605246883e095cd82ebd5d75bef"><div class="ttname"><a href="../../d6/d2f/a10782.html#a88fa5605246883e095cd82ebd5d75bef">AuraEffect::GetMiscValueB</a></div><div class="ttdeci">int32 GetMiscValueB() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:437</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02502">Player::AddRuneByAuraEffect()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00213">CLASS_CONTEXT_ABILITY</a>, <a class="el" href="../../#l00146">CLASS_DEATH_KNIGHT</a>, <a class="el" href="../../#l02490">Player::GetCurrentRune()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00437">GetMiscValueB()</a>, <a class="el" href="../../#l02491">Player::GetRuneCooldown()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01281">Player::IsClass()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l00398">MAX_RUNES</a>, <a class="el" href="../../#l13396">Player::RemoveRunesByAuraEffect()</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="ab48ade74cc824d2ae0e326948c867ece" name="ab48ade74cc824d2ae0e326948c867ece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab48ade74cc824d2ae0e326948c867ece">&#9670;&#160;</a></span>HandleAuraDummy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraDummy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5410</span>{</div>
<div class="line"><span class="lineno"> 5411</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a>)))</div>
<div class="line"><span class="lineno"> 5412</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5413</span> </div>
<div class="line"><span class="lineno"> 5414</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5415</span> </div>
<div class="line"><span class="lineno"> 5416</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 5417</span> </div>
<div class="line"><span class="lineno"> 5418</span>    <span class="keywordflow">if</span> (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>)</div>
<div class="line"><span class="lineno"> 5419</span>    {</div>
<div class="line"><span class="lineno"> 5420</span>        <span class="comment">// pet auras</span></div>
<div class="line"><span class="lineno"> 5421</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d4/df1/a10930.html">PetAura</a> <span class="keyword">const</span>* petSpell = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetPetAura(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>))</div>
<div class="line"><span class="lineno"> 5422</span>        {</div>
<div class="line"><span class="lineno"> 5423</span>            <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 5424</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a2c30ee763635ea710cc1101ee3c94607">AddPetAura</a>(petSpell);</div>
<div class="line"><span class="lineno"> 5425</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5426</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1350682846c1ddb65567ec85e75e2df3">RemovePetAura</a>(petSpell);</div>
<div class="line"><span class="lineno"> 5427</span>        }</div>
<div class="line"><span class="lineno"> 5428</span>    }</div>
<div class="line"><span class="lineno"> 5429</span> </div>
<div class="line"><span class="lineno"> 5430</span>    <span class="keywordflow">if</span> (mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a>))</div>
<div class="line"><span class="lineno"> 5431</span>    {</div>
<div class="line"><span class="lineno"> 5432</span>        <span class="comment">// AT APPLY</span></div>
<div class="line"><span class="lineno"> 5433</span>        <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 5434</span>        {</div>
<div class="line"><span class="lineno"> 5435</span>            <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno"> 5436</span>            {</div>
<div class="line"><span class="lineno"> 5437</span>                <span class="keywordflow">case</span> 1515:                                      <span class="comment">// Tame beast</span></div>
<div class="line"><span class="lineno"> 5438</span>                    <span class="comment">// FIX_ME: this is 2.0.12 threat effect replaced in 2.1.x by dummy aura, must be checked for correctness</span></div>
<div class="line"><span class="lineno"> 5439</span>                    <span class="keywordflow">if</span> (caster &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae0a72f8fa312caf442a6039bf9758ef6">CanHaveThreatList</a>())</div>
<div class="line"><span class="lineno"> 5440</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a3b4dad985e3b5dde28d89afc956999e4">AddThreat</a>(caster, 10.0f);</div>
<div class="line"><span class="lineno"> 5441</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5442</span>                <span class="keywordflow">case</span> 34026:   <span class="comment">// kill command</span></div>
<div class="line"><span class="lineno"> 5443</span>                    {</div>
<div class="line"><span class="lineno"> 5444</span>                        <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* pet = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae78759acca81e2a89a82f79a4ef6e70c">GetGuardianPet</a>();</div>
<div class="line"><span class="lineno"> 5445</span>                        <span class="keywordflow">if</span> (!pet)</div>
<div class="line"><span class="lineno"> 5446</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5447</span> </div>
<div class="line"><span class="lineno"> 5448</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 34027, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 5449</span> </div>
<div class="line"><span class="lineno"> 5450</span>                        <span class="comment">// set 3 stacks and 3 charges (to make all auras not disappear at once)</span></div>
<div class="line"><span class="lineno"> 5451</span>                        <a class="code hl_class" href="../../df/d4a/a10794.html">Aura</a>* owner_aura = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a135e4d345c338da83450a60528f71222">GetAura</a>(34027, <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno"> 5452</span>                        <a class="code hl_class" href="../../df/d4a/a10794.html">Aura</a>* pet_aura  = pet-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a135e4d345c338da83450a60528f71222">GetAura</a>(58914, <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno"> 5453</span>                        <span class="keywordflow">if</span> (owner_aura)</div>
<div class="line"><span class="lineno"> 5454</span>                        {</div>
<div class="line"><span class="lineno"> 5455</span>                            owner_aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a7f7d613279717173c13708425f3a8083">SetCharges</a>(0);</div>
<div class="line"><span class="lineno"> 5456</span>                            owner_aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a1f6c2606d7dc499c1fc1ba0cee1f255b">SetStackAmount</a>(owner_aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>);</div>
<div class="line"><span class="lineno"> 5457</span>                            <span class="keywordflow">if</span> (pet_aura)</div>
<div class="line"><span class="lineno"> 5458</span>                            {</div>
<div class="line"><span class="lineno"> 5459</span>                                pet_aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a7f7d613279717173c13708425f3a8083">SetCharges</a>(0);</div>
<div class="line"><span class="lineno"> 5460</span>                                pet_aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a1f6c2606d7dc499c1fc1ba0cee1f255b">SetStackAmount</a>(owner_aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>);</div>
<div class="line"><span class="lineno"> 5461</span>                            }</div>
<div class="line"><span class="lineno"> 5462</span>                        }</div>
<div class="line"><span class="lineno"> 5463</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5464</span>                    }</div>
<div class="line"><span class="lineno"> 5465</span>                <span class="keywordflow">case</span> 37096:                                     <span class="comment">// Blood Elf Illusion</span></div>
<div class="line"><span class="lineno"> 5466</span>                    {</div>
<div class="line"><span class="lineno"> 5467</span>                        <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 5468</span>                        {</div>
<div class="line"><span class="lineno"> 5469</span>                            <span class="keywordflow">switch</span> (caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>())</div>
<div class="line"><span class="lineno"> 5470</span>                            {</div>
<div class="line"><span class="lineno"> 5471</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324faf3da8f6e862fb5230f0bbb8613684463">GENDER_FEMALE</a>:</div>
<div class="line"><span class="lineno"> 5472</span>                                    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 37095, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>); <span class="comment">// Blood Elf Disguise</span></div>
<div class="line"><span class="lineno"> 5473</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5474</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a>:</div>
<div class="line"><span class="lineno"> 5475</span>                                    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 37093, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 5476</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5477</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 5478</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5479</span>                            }</div>
<div class="line"><span class="lineno"> 5480</span>                        }</div>
<div class="line"><span class="lineno"> 5481</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5482</span>                    }</div>
<div class="line"><span class="lineno"> 5483</span>                <span class="keywordflow">case</span> 55198:   <span class="comment">// Tidal Force</span></div>
<div class="line"><span class="lineno"> 5484</span>                    {</div>
<div class="line"><span class="lineno"> 5485</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 55166, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 5486</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../df/d4a/a10794.html">Aura</a>* owner_aura = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a135e4d345c338da83450a60528f71222">GetAura</a>(55166))</div>
<div class="line"><span class="lineno"> 5487</span>                            owner_aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a1f6c2606d7dc499c1fc1ba0cee1f255b">SetStackAmount</a>(owner_aura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ab4abe60bbc09777bab95a0a0ec66af25">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>);</div>
<div class="line"><span class="lineno"> 5488</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5489</span>                    }</div>
<div class="line"><span class="lineno"> 5490</span>                <span class="keywordflow">case</span> 39850:                                     <span class="comment">// Rocket Blast</span></div>
<div class="line"><span class="lineno"> 5491</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/dc9/a00389.html#a50320d4edff86db31b25138ae72161ad">roll_chance_i</a>(20))                       <span class="comment">// backfire stun</span></div>
<div class="line"><span class="lineno"> 5492</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 51581, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 5493</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5494</span>                <span class="keywordflow">case</span> 43873:                                     <span class="comment">// Headless Horseman Laugh</span></div>
<div class="line"><span class="lineno"> 5495</span>                    target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#aaf763bad217ff546f44a04b8c977d694">PlayDistanceSound</a>(11965);</div>
<div class="line"><span class="lineno"> 5496</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5497</span>                <span class="keywordflow">case</span> 46354:                                     <span class="comment">// Blood Elf Illusion</span></div>
<div class="line"><span class="lineno"> 5498</span>                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 5499</span>                    {</div>
<div class="line"><span class="lineno"> 5500</span>                        <span class="keywordflow">switch</span> (caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>())</div>
<div class="line"><span class="lineno"> 5501</span>                        {</div>
<div class="line"><span class="lineno"> 5502</span>                            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324faf3da8f6e862fb5230f0bbb8613684463">GENDER_FEMALE</a>:</div>
<div class="line"><span class="lineno"> 5503</span>                                caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 46356, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 5504</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5505</span>                            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a>:</div>
<div class="line"><span class="lineno"> 5506</span>                                caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 46355, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 5507</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5508</span>                        }</div>
<div class="line"><span class="lineno"> 5509</span>                    }</div>
<div class="line"><span class="lineno"> 5510</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5511</span>                <span class="keywordflow">case</span> 46361:                                     <span class="comment">// Reinforced Net</span></div>
<div class="line"><span class="lineno"> 5512</span>                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 5513</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../d8/db5/a09662.html#ae37d25ba49a3887faa07bc194f3447fd">MoveFall</a>();</div>
<div class="line"><span class="lineno"> 5514</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5515</span>                <span class="keywordflow">case</span> 46699:                                     <span class="comment">// Requires No Ammo</span></div>
<div class="line"><span class="lineno"> 5516</span>                    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5517</span>                        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a64d7fc1d009a80de3b86e7ad66f5ad3c">RemoveAmmo</a>();      <span class="comment">// not use ammo and not allow use</span></div>
<div class="line"><span class="lineno"> 5518</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5519</span>                <span class="keywordflow">case</span> 71563:</div>
<div class="line"><span class="lineno"> 5520</span>                    {</div>
<div class="line"><span class="lineno"> 5521</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../df/d4a/a10794.html">Aura</a>* newAura = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51d433dde350cd94d7c3c43e30ca997f">AddAura</a>(71564, target))</div>
<div class="line"><span class="lineno"> 5522</span>                            newAura-&gt;SetStackAmount(newAura-&gt;GetSpellInfo()-&gt;StackAmount);</div>
<div class="line"><span class="lineno"> 5523</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5524</span>                    }</div>
<div class="line"><span class="lineno"> 5525</span>            }</div>
<div class="line"><span class="lineno"> 5526</span>        }</div>
<div class="line"><span class="lineno"> 5527</span>        <span class="comment">// AT REMOVE</span></div>
<div class="line"><span class="lineno"> 5528</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5529</span>        {</div>
<div class="line"><span class="lineno"> 5530</span>            <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;IsQuestTame()) &amp;&amp; caster &amp;&amp; caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() &amp;&amp; aurApp-&gt;GetRemoveMode() != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea132c6993498600b4a3cfda2b1639c166">AURA_REMOVE_BY_CANCEL</a>)</div>
<div class="line"><span class="lineno"> 5531</span>            {</div>
<div class="line"><span class="lineno"> 5532</span>                <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> finalSpelId = 0;</div>
<div class="line"><span class="lineno"> 5533</span>                <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno"> 5534</span>                {</div>
<div class="line"><span class="lineno"> 5535</span>                    <span class="keywordflow">case</span> 19548:</div>
<div class="line"><span class="lineno"> 5536</span>                        finalSpelId = 19597;</div>
<div class="line"><span class="lineno"> 5537</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5538</span>                    <span class="keywordflow">case</span> 19674:</div>
<div class="line"><span class="lineno"> 5539</span>                        finalSpelId = 19677;</div>
<div class="line"><span class="lineno"> 5540</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5541</span>                    <span class="keywordflow">case</span> 19687:</div>
<div class="line"><span class="lineno"> 5542</span>                        finalSpelId = 19676;</div>
<div class="line"><span class="lineno"> 5543</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5544</span>                    <span class="keywordflow">case</span> 19688:</div>
<div class="line"><span class="lineno"> 5545</span>                        finalSpelId = 19678;</div>
<div class="line"><span class="lineno"> 5546</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5547</span>                    <span class="keywordflow">case</span> 19689:</div>
<div class="line"><span class="lineno"> 5548</span>                        finalSpelId = 19679;</div>
<div class="line"><span class="lineno"> 5549</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5550</span>                    <span class="keywordflow">case</span> 19692:</div>
<div class="line"><span class="lineno"> 5551</span>                        finalSpelId = 19680;</div>
<div class="line"><span class="lineno"> 5552</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5553</span>                    <span class="keywordflow">case</span> 19693:</div>
<div class="line"><span class="lineno"> 5554</span>                        finalSpelId = 19684;</div>
<div class="line"><span class="lineno"> 5555</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5556</span>                    <span class="keywordflow">case</span> 19694:</div>
<div class="line"><span class="lineno"> 5557</span>                        finalSpelId = 19681;</div>
<div class="line"><span class="lineno"> 5558</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5559</span>                    <span class="keywordflow">case</span> 19696:</div>
<div class="line"><span class="lineno"> 5560</span>                        finalSpelId = 19682;</div>
<div class="line"><span class="lineno"> 5561</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5562</span>                    <span class="keywordflow">case</span> 19697:</div>
<div class="line"><span class="lineno"> 5563</span>                        finalSpelId = 19683;</div>
<div class="line"><span class="lineno"> 5564</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5565</span>                    <span class="keywordflow">case</span> 19699:</div>
<div class="line"><span class="lineno"> 5566</span>                        finalSpelId = 19685;</div>
<div class="line"><span class="lineno"> 5567</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5568</span>                    <span class="keywordflow">case</span> 19700:</div>
<div class="line"><span class="lineno"> 5569</span>                        finalSpelId = 19686;</div>
<div class="line"><span class="lineno"> 5570</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5571</span>                    <span class="keywordflow">case</span> 30646:</div>
<div class="line"><span class="lineno"> 5572</span>                        finalSpelId = 30647;</div>
<div class="line"><span class="lineno"> 5573</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5574</span>                    <span class="keywordflow">case</span> 30653:</div>
<div class="line"><span class="lineno"> 5575</span>                        finalSpelId = 30648;</div>
<div class="line"><span class="lineno"> 5576</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5577</span>                    <span class="keywordflow">case</span> 30654:</div>
<div class="line"><span class="lineno"> 5578</span>                        finalSpelId = 30652;</div>
<div class="line"><span class="lineno"> 5579</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5580</span>                    <span class="keywordflow">case</span> 30099:</div>
<div class="line"><span class="lineno"> 5581</span>                        finalSpelId = 30100;</div>
<div class="line"><span class="lineno"> 5582</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5583</span>                    <span class="keywordflow">case</span> 30102:</div>
<div class="line"><span class="lineno"> 5584</span>                        finalSpelId = 30103;</div>
<div class="line"><span class="lineno"> 5585</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5586</span>                    <span class="keywordflow">case</span> 30105:</div>
<div class="line"><span class="lineno"> 5587</span>                        finalSpelId = 30104;</div>
<div class="line"><span class="lineno"> 5588</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5589</span>                }</div>
<div class="line"><span class="lineno"> 5590</span> </div>
<div class="line"><span class="lineno"> 5591</span>                <span class="keywordflow">if</span> (finalSpelId)</div>
<div class="line"><span class="lineno"> 5592</span>                    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, finalSpelId, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 5593</span>            }</div>
<div class="line"><span class="lineno"> 5594</span> </div>
<div class="line"><span class="lineno"> 5595</span>            <span class="keywordflow">switch</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a>)</div>
<div class="line"><span class="lineno"> 5596</span>            {</div>
<div class="line"><span class="lineno"> 5597</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>:</div>
<div class="line"><span class="lineno"> 5598</span>                    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno"> 5599</span>                    {</div>
<div class="line"><span class="lineno"> 5600</span>                        <span class="keywordflow">case</span> 2584: <span class="comment">// Waiting to Resurrect</span></div>
<div class="line"><span class="lineno"> 5601</span>                            <span class="comment">// Waiting to resurrect spell cancel, we must remove player from resurrect queue</span></div>
<div class="line"><span class="lineno"> 5602</span>                            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5603</span>                            {</div>
<div class="line"><span class="lineno"> 5604</span>                                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d5/d31/a07074.html">Battleground</a>* bg = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a5f17db78f9356bf239b7631ebc38fa2d">GetBattleground</a>())</div>
<div class="line"><span class="lineno"> 5605</span>                                    bg-&gt;RemovePlayerFromResurrectQueue(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>());</div>
<div class="line"><span class="lineno"> 5606</span>                                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../dd/dd7/a06974.html">Battlefield</a>* bf = <a class="code hl_define" href="../../df/de4/a02780.html#a4545b2a440043037e8dad52c0f644f48">sBattlefieldMgr</a>-&gt;GetBattlefieldToZoneId(target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#ad498d690fbe69bb99a8a2ffdcb2f5169">GetZoneId</a>()))</div>
<div class="line"><span class="lineno"> 5607</span>                                    bf-&gt;RemovePlayerFromResurrectQueue(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 5608</span>                            }</div>
<div class="line"><span class="lineno"> 5609</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5610</span>                        <span class="keywordflow">case</span> 43681: <span class="comment">// Inactive</span></div>
<div class="line"><span class="lineno"> 5611</span>                            {</div>
<div class="line"><span class="lineno"> 5612</span>                                <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || aurApp-&gt;GetRemoveMode() != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a>)</div>
<div class="line"><span class="lineno"> 5613</span>                                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5614</span> </div>
<div class="line"><span class="lineno"> 5615</span>                                <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a1013c27be4347a1b1a4a986a07456deb">GetMap</a>()-&gt;<a class="code hl_function" href="../../d7/dc0/a09538.html#a4fa855d03b7d1fa1957453767ff52429">IsBattleground</a>())</div>
<div class="line"><span class="lineno"> 5616</span>                                    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ac2c25dd9c3d9a6c3fe3901f25b0bdedf">LeaveBattleground</a>();</div>
<div class="line"><span class="lineno"> 5617</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5618</span>                            }</div>
<div class="line"><span class="lineno"> 5619</span>                        <span class="keywordflow">case</span> 52172:  <span class="comment">// Coyote Spirit Despawn Aura</span></div>
<div class="line"><span class="lineno"> 5620</span>                        <span class="keywordflow">case</span> 60244:  <span class="comment">// Blood Parrot Despawn Aura</span></div>
<div class="line"><span class="lineno"> 5621</span>                            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>((<a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>*)<span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 5622</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5623</span>                        <span class="comment">// Halls of Lightning, Arc Lightning</span></div>
<div class="line"><span class="lineno"> 5624</span>                        <span class="keywordflow">case</span> 52921:</div>
<div class="line"><span class="lineno"> 5625</span>                            {</div>
<div class="line"><span class="lineno"> 5626</span>                                <span class="keywordflow">if</span> (aurApp-&gt;GetRemoveMode() != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a> )</div>
<div class="line"><span class="lineno"> 5627</span>                                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5628</span> </div>
<div class="line"><span class="lineno"> 5629</span>                                <a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* player = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 5630</span>                                <a class="code hl_class" href="../../da/d80/a09102.html">Acore::AnyPlayerInObjectRangeCheck</a> checker(target, 10.0f);</div>
<div class="line"><span class="lineno"> 5631</span>                                <a class="code hl_struct" href="../../dc/d5e/a08954.html">Acore::PlayerSearcher&lt;Acore::AnyPlayerInObjectRangeCheck&gt;</a> searcher(target, player, checker);</div>
<div class="line"><span class="lineno"> 5632</span>                                <a class="code hl_function" href="../../d9/db0/a08822.html#a952f2c6008bbbc3b9ee1652ea5f9188a">Cell::VisitWorldObjects</a>(target, searcher, 10.0f);</div>
<div class="line"><span class="lineno"> 5633</span> </div>
<div class="line"><span class="lineno"> 5634</span>                                <span class="keywordflow">if</span> (player &amp;&amp; player-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>() != target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>())</div>
<div class="line"><span class="lineno"> 5635</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(player, 52921, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 5636</span> </div>
<div class="line"><span class="lineno"> 5637</span>                                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5638</span>                            }</div>
<div class="line"><span class="lineno"> 5639</span>                        <span class="keywordflow">case</span> 58600: <span class="comment">// Restricted Flight Area</span></div>
<div class="line"><span class="lineno"> 5640</span>                        <span class="keywordflow">case</span> 58730: <span class="comment">// Restricted Flight Area</span></div>
<div class="line"><span class="lineno"> 5641</span>                            <span class="keywordflow">if</span> (aurApp-&gt;GetRemoveMode() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a>)</div>
<div class="line"><span class="lineno"> 5642</span>                                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 58601, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 5643</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5644</span>                        <span class="keywordflow">case</span> 46374: <span class="comment">// quest The Power of the Elements (11893)</span></div>
<div class="line"><span class="lineno"> 5645</span>                            {</div>
<div class="line"><span class="lineno"> 5646</span>                                <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#afd7aa5f7719cba4d967bb7f009582d2f">isDead</a>() &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>() &amp;&amp; target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aacc8ee332f66effdc0d77c126dae1961">IsCreature</a>() &amp;&amp; target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>() == 24601)</div>
<div class="line"><span class="lineno"> 5647</span>                                {</div>
<div class="line"><span class="lineno"> 5648</span>                                    <span class="keyword">auto</span> caster2 = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a6fc52109b7711606f15d9880fda8f815">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 5649</span>                                    <span class="keywordflow">if</span> (caster2 &amp;&amp; caster2-&gt;IsPlayer())</div>
<div class="line"><span class="lineno"> 5650</span>                                    {</div>
<div class="line"><span class="lineno"> 5651</span>                                        caster2-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a05924f5e9df8d5f06ba422e159a4fd8a">KilledMonsterCredit</a>(25987);</div>
<div class="line"><span class="lineno"> 5652</span>                                    }</div>
<div class="line"><span class="lineno"> 5653</span>                                }</div>
<div class="line"><span class="lineno"> 5654</span>                                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5655</span>                            }</div>
<div class="line"><span class="lineno"> 5656</span>                    }</div>
<div class="line"><span class="lineno"> 5657</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5658</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 5659</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5660</span>            }</div>
<div class="line"><span class="lineno"> 5661</span>        }</div>
<div class="line"><span class="lineno"> 5662</span>    }</div>
<div class="line"><span class="lineno"> 5663</span> </div>
<div class="line"><span class="lineno"> 5664</span>    <span class="comment">// AT APPLY &amp; REMOVE</span></div>
<div class="line"><span class="lineno"> 5665</span> </div>
<div class="line"><span class="lineno"> 5666</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a>)</div>
<div class="line"><span class="lineno"> 5667</span>    {</div>
<div class="line"><span class="lineno"> 5668</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>:</div>
<div class="line"><span class="lineno"> 5669</span>            {</div>
<div class="line"><span class="lineno"> 5670</span>                <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 5671</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5672</span>                <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno"> 5673</span>                {</div>
<div class="line"><span class="lineno"> 5674</span>                    <span class="comment">// Recently Bandaged</span></div>
<div class="line"><span class="lineno"> 5675</span>                    <span class="keywordflow">case</span> 11196:</div>
<div class="line"><span class="lineno"> 5676</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), apply);</div>
<div class="line"><span class="lineno"> 5677</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5678</span>                    <span class="comment">// Unstable Power</span></div>
<div class="line"><span class="lineno"> 5679</span>                    <span class="keywordflow">case</span> 24658:</div>
<div class="line"><span class="lineno"> 5680</span>                        {</div>
<div class="line"><span class="lineno"> 5681</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = 24659;</div>
<div class="line"><span class="lineno"> 5682</span>                            <span class="keywordflow">if</span> (apply &amp;&amp; caster)</div>
<div class="line"><span class="lineno"> 5683</span>                            {</div>
<div class="line"><span class="lineno"> 5684</span>                                <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* spell = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;AssertSpellInfo(spellId);</div>
<div class="line"><span class="lineno"> 5685</span> </div>
<div class="line"><span class="lineno"> 5686</span>                                <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; spell-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>; ++i)</div>
<div class="line"><span class="lineno"> 5687</span>                                    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spell-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno"> 5688</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5689</span>                            }</div>
<div class="line"><span class="lineno"> 5690</span>                            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(spellId);</div>
<div class="line"><span class="lineno"> 5691</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5692</span>                        }</div>
<div class="line"><span class="lineno"> 5693</span>                    <span class="comment">// Restless Strength</span></div>
<div class="line"><span class="lineno"> 5694</span>                    <span class="keywordflow">case</span> 24661:</div>
<div class="line"><span class="lineno"> 5695</span>                        {</div>
<div class="line"><span class="lineno"> 5696</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = 24662;</div>
<div class="line"><span class="lineno"> 5697</span>                            <span class="keywordflow">if</span> (apply &amp;&amp; caster)</div>
<div class="line"><span class="lineno"> 5698</span>                            {</div>
<div class="line"><span class="lineno"> 5699</span>                                <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* spell = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;AssertSpellInfo(spellId);</div>
<div class="line"><span class="lineno"> 5700</span>                                <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; spell-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a46f51f384b1455b03000e98a08d11790">StackAmount</a>; ++i)</div>
<div class="line"><span class="lineno"> 5701</span>                                    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spell-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno"> 5702</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5703</span>                            }</div>
<div class="line"><span class="lineno"> 5704</span>                            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(spellId);</div>
<div class="line"><span class="lineno"> 5705</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5706</span>                        }</div>
<div class="line"><span class="lineno"> 5707</span>                    <span class="comment">// Tag Murloc</span></div>
<div class="line"><span class="lineno"> 5708</span>                    <span class="keywordflow">case</span> 30877:</div>
<div class="line"><span class="lineno"> 5709</span>                        {</div>
<div class="line"><span class="lineno"> 5710</span>                            <span class="comment">// Tag/untag Blacksilt Scout</span></div>
<div class="line"><span class="lineno"> 5711</span>                            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad5ba4799de88341246bc5ff7dd4b2d36">SetEntry</a>(apply ? 17654 : 17326);</div>
<div class="line"><span class="lineno"> 5712</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5713</span>                        }</div>
<div class="line"><span class="lineno"> 5714</span>                    <span class="keywordflow">case</span> 57819: <span class="comment">// Argent Champion</span></div>
<div class="line"><span class="lineno"> 5715</span>                    <span class="keywordflow">case</span> 57820: <span class="comment">// Ebon Champion</span></div>
<div class="line"><span class="lineno"> 5716</span>                    <span class="keywordflow">case</span> 57821: <span class="comment">// Champion of the Kirin Tor</span></div>
<div class="line"><span class="lineno"> 5717</span>                    <span class="keywordflow">case</span> 57822: <span class="comment">// Wyrmrest Champion</span></div>
<div class="line"><span class="lineno"> 5718</span>                        {</div>
<div class="line"><span class="lineno"> 5719</span>                            <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5720</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5721</span> </div>
<div class="line"><span class="lineno"> 5722</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> FactionID = 0;</div>
<div class="line"><span class="lineno"> 5723</span> </div>
<div class="line"><span class="lineno"> 5724</span>                            <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 5725</span>                            {</div>
<div class="line"><span class="lineno"> 5726</span>                                <span class="keywordflow">switch</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>)</div>
<div class="line"><span class="lineno"> 5727</span>                                {</div>
<div class="line"><span class="lineno"> 5728</span>                                    <span class="keywordflow">case</span> 57819:</div>
<div class="line"><span class="lineno"> 5729</span>                                        FactionID = 1106;</div>
<div class="line"><span class="lineno"> 5730</span>                                        <span class="keywordflow">break</span>; <span class="comment">// Argent Crusade</span></div>
<div class="line"><span class="lineno"> 5731</span>                                    <span class="keywordflow">case</span> 57820:</div>
<div class="line"><span class="lineno"> 5732</span>                                        FactionID = 1098;</div>
<div class="line"><span class="lineno"> 5733</span>                                        <span class="keywordflow">break</span>; <span class="comment">// Knights of the Ebon Blade</span></div>
<div class="line"><span class="lineno"> 5734</span>                                    <span class="keywordflow">case</span> 57821:</div>
<div class="line"><span class="lineno"> 5735</span>                                        FactionID = 1090;</div>
<div class="line"><span class="lineno"> 5736</span>                                        <span class="keywordflow">break</span>; <span class="comment">// Kirin Tor</span></div>
<div class="line"><span class="lineno"> 5737</span>                                    <span class="keywordflow">case</span> 57822:</div>
<div class="line"><span class="lineno"> 5738</span>                                        FactionID = 1091;</div>
<div class="line"><span class="lineno"> 5739</span>                                        <span class="keywordflow">break</span>; <span class="comment">// The Wyrmrest Accord</span></div>
<div class="line"><span class="lineno"> 5740</span>                                }</div>
<div class="line"><span class="lineno"> 5741</span>                            }</div>
<div class="line"><span class="lineno"> 5742</span>                            caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a9c5a4099279837c4c18fc871232bf86e">SetChampioningFaction</a>(FactionID);</div>
<div class="line"><span class="lineno"> 5743</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5744</span>                        }</div>
<div class="line"><span class="lineno"> 5745</span>                    <span class="comment">// LK Intro VO (1)</span></div>
<div class="line"><span class="lineno"> 5746</span>                    <span class="keywordflow">case</span> 58204:</div>
<div class="line"><span class="lineno"> 5747</span>                        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5748</span>                        {</div>
<div class="line"><span class="lineno"> 5749</span>                            <span class="comment">// Play part 1</span></div>
<div class="line"><span class="lineno"> 5750</span>                            <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 5751</span>                                target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a40f0974be3005abb7313b4688e4cdfe3">PlayDirectSound</a>(14970, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>());</div>
<div class="line"><span class="lineno"> 5752</span>                            <span class="comment">// continue in 58205</span></div>
<div class="line"><span class="lineno"> 5753</span>                            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5754</span>                                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 58205, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 5755</span>                        }</div>
<div class="line"><span class="lineno"> 5756</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5757</span>                    <span class="comment">// LK Intro VO (2)</span></div>
<div class="line"><span class="lineno"> 5758</span>                    <span class="keywordflow">case</span> 58205:</div>
<div class="line"><span class="lineno"> 5759</span>                        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5760</span>                        {</div>
<div class="line"><span class="lineno"> 5761</span>                            <span class="comment">// Play part 2</span></div>
<div class="line"><span class="lineno"> 5762</span>                            <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 5763</span>                                target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a40f0974be3005abb7313b4688e4cdfe3">PlayDirectSound</a>(14971, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>());</div>
<div class="line"><span class="lineno"> 5764</span>                            <span class="comment">// Play part 3</span></div>
<div class="line"><span class="lineno"> 5765</span>                            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5766</span>                                target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a40f0974be3005abb7313b4688e4cdfe3">PlayDirectSound</a>(14972, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>());</div>
<div class="line"><span class="lineno"> 5767</span>                        }</div>
<div class="line"><span class="lineno"> 5768</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5769</span>                    <span class="keywordflow">case</span> 62061: <span class="comment">// Festive Holiday Mount</span></div>
<div class="line"><span class="lineno"> 5770</span>                        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>))</div>
<div class="line"><span class="lineno"> 5771</span>                        {</div>
<div class="line"><span class="lineno"> 5772</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> creatureEntry = 0;</div>
<div class="line"><span class="lineno"> 5773</span>                            <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 5774</span>                            {</div>
<div class="line"><span class="lineno"> 5775</span>                                <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>))</div>
<div class="line"><span class="lineno"> 5776</span>                                    creatureEntry = 24906;</div>
<div class="line"><span class="lineno"> 5777</span>                                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5778</span>                                    creatureEntry = 15665;</div>
<div class="line"><span class="lineno"> 5779</span>                            }</div>
<div class="line"><span class="lineno"> 5780</span>                            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5781</span>                                creatureEntry = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>).front()-&gt;GetMiscValue();</div>
<div class="line"><span class="lineno"> 5782</span> </div>
<div class="line"><span class="lineno"> 5783</span>                            <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../d3/d43/a07798.html">CreatureTemplate</a> <span class="keyword">const</span>* creatureInfo = <a class="code hl_define" href="../../d0/d45/a02843.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureTemplate(creatureEntry))</div>
<div class="line"><span class="lineno"> 5784</span>                            {</div>
<div class="line"><span class="lineno"> 5785</span>                                <a class="code hl_struct" href="../../d0/d6e/a07794.html">CreatureModel</a> model = *<a class="code hl_function" href="../../d0/dd0/a08810.html#a891716d1527f5e7aa64f8566672173e4">ObjectMgr::ChooseDisplayId</a>(creatureInfo);</div>
<div class="line"><span class="lineno"> 5786</span>                                <a class="code hl_define" href="../../d0/d45/a02843.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureModelRandomGender(&amp;model, creatureInfo);</div>
<div class="line"><span class="lineno"> 5787</span> </div>
<div class="line"><span class="lineno"> 5788</span>                                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac2bd94b573bcf5e80cba886a8e2f540f">SetUInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031">UNIT_FIELD_MOUNTDISPLAYID</a>, model.<a class="code hl_variable" href="../../d0/d6e/a07794.html#a0f48fde2c8438ecf411d7f80d3bca1a9">CreatureDisplayID</a>);</div>
<div class="line"><span class="lineno"> 5789</span>                            }</div>
<div class="line"><span class="lineno"> 5790</span>                        }</div>
<div class="line"><span class="lineno"> 5791</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5792</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/d2b/a03095.html#a4ee83f582e4ebba3a5aea9ab1a5c9354a62ef26e3a60fddc8cbadbd349cb054bf">FRESH_BREWFEST_HOPS</a>: <span class="comment">// Festive Brewfest Mount</span></div>
<div class="line"><span class="lineno"> 5793</span>                        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>) &amp;&amp; !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>))</div>
<div class="line"><span class="lineno"> 5794</span>                        {</div>
<div class="line"><span class="lineno"> 5795</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> creatureEntry = 0;</div>
<div class="line"><span class="lineno"> 5796</span> </div>
<div class="line"><span class="lineno"> 5797</span>                            <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 5798</span>                            {</div>
<div class="line"><span class="lineno"> 5799</span>                                <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aab66f0084b10c4a2a45f064567cf1118">GetSpeedRate</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de">MOVE_RUN</a>) &gt;= 2.0f)</div>
<div class="line"><span class="lineno"> 5800</span>                                {</div>
<div class="line"><span class="lineno"> 5801</span>                                    creatureEntry = <a class="code hl_enumvalue" href="../../d0/d2b/a03095.html#a4ee83f582e4ebba3a5aea9ab1a5c9354a9e68ffb636426417370cc6b94b7b46aa">GREAT_BREWFEST_KODO</a>;</div>
<div class="line"><span class="lineno"> 5802</span>                                }</div>
<div class="line"><span class="lineno"> 5803</span>                                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5804</span>                                {</div>
<div class="line"><span class="lineno"> 5805</span>                                    creatureEntry = <a class="code hl_enumvalue" href="../../d0/d2b/a03095.html#a4ee83f582e4ebba3a5aea9ab1a5c9354acbc7617ce19ea8d214518ab0335275c5">BREWFEST_KODO</a>;</div>
<div class="line"><span class="lineno"> 5806</span>                                }</div>
<div class="line"><span class="lineno"> 5807</span>                            }</div>
<div class="line"><span class="lineno"> 5808</span>                            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5809</span>                            {</div>
<div class="line"><span class="lineno"> 5810</span>                                creatureEntry = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>).front()-&gt;GetMiscValue();</div>
<div class="line"><span class="lineno"> 5811</span>                            }</div>
<div class="line"><span class="lineno"> 5812</span> </div>
<div class="line"><span class="lineno"> 5813</span>                            <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../d3/d43/a07798.html">CreatureTemplate</a> <span class="keyword">const</span>* creatureInfo = <a class="code hl_define" href="../../d0/d45/a02843.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureTemplate(creatureEntry))</div>
<div class="line"><span class="lineno"> 5814</span>                            {</div>
<div class="line"><span class="lineno"> 5815</span>                                <a class="code hl_struct" href="../../d0/d6e/a07794.html">CreatureModel</a> model = *<a class="code hl_function" href="../../d0/dd0/a08810.html#a891716d1527f5e7aa64f8566672173e4">ObjectMgr::ChooseDisplayId</a>(creatureInfo);</div>
<div class="line"><span class="lineno"> 5816</span>                                <a class="code hl_define" href="../../d0/d45/a02843.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureModelRandomGender(&amp;model, creatureInfo);</div>
<div class="line"><span class="lineno"> 5817</span> </div>
<div class="line"><span class="lineno"> 5818</span>                                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac2bd94b573bcf5e80cba886a8e2f540f">SetUInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031">UNIT_FIELD_MOUNTDISPLAYID</a>, model.<a class="code hl_variable" href="../../d0/d6e/a07794.html#a0f48fde2c8438ecf411d7f80d3bca1a9">CreatureDisplayID</a>);</div>
<div class="line"><span class="lineno"> 5819</span>                            }</div>
<div class="line"><span class="lineno"> 5820</span>                        }</div>
<div class="line"><span class="lineno"> 5821</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5822</span>                }</div>
<div class="line"><span class="lineno"> 5823</span> </div>
<div class="line"><span class="lineno"> 5824</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5825</span>            }</div>
<div class="line"><span class="lineno"> 5826</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a>:</div>
<div class="line"><span class="lineno"> 5827</span>            {</div>
<div class="line"><span class="lineno"> 5828</span>                <span class="comment">//if (!(mode &amp; AURA_EFFECT_HANDLE_REAL))</span></div>
<div class="line"><span class="lineno"> 5829</span>                <span class="comment">//break;</span></div>
<div class="line"><span class="lineno"> 5830</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5831</span>            }</div>
<div class="line"><span class="lineno"> 5832</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207">SPELLFAMILY_PRIEST</a>:</div>
<div class="line"><span class="lineno"> 5833</span>            {</div>
<div class="line"><span class="lineno"> 5834</span>                <span class="comment">//if (!(mode &amp; AURA_EFFECT_HANDLE_REAL))</span></div>
<div class="line"><span class="lineno"> 5835</span>                <span class="comment">//break;</span></div>
<div class="line"><span class="lineno"> 5836</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5837</span>            }</div>
<div class="line"><span class="lineno"> 5838</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>:</div>
<div class="line"><span class="lineno"> 5839</span>            {</div>
<div class="line"><span class="lineno"> 5840</span>                <span class="comment">//if (!(mode &amp; AURA_EFFECT_HANDLE_REAL))</span></div>
<div class="line"><span class="lineno"> 5841</span>                <span class="comment">//    break;</span></div>
<div class="line"><span class="lineno"> 5842</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5843</span>            }</div>
<div class="line"><span class="lineno"> 5844</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a>:</div>
<div class="line"><span class="lineno"> 5845</span>            {</div>
<div class="line"><span class="lineno"> 5846</span>                <span class="comment">//if (!(mode &amp; AURA_EFFECT_HANDLE_REAL))</span></div>
<div class="line"><span class="lineno"> 5847</span>                <span class="comment">//    break;</span></div>
<div class="line"><span class="lineno"> 5848</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 5849</span>            }</div>
<div class="line"><span class="lineno"> 5850</span>    }</div>
<div class="line"><span class="lineno"> 5851</span>}</div>
<div class="ttc" id="aa00389_html_a50320d4edff86db31b25138ae72161ad"><div class="ttname"><a href="../../dc/dc9/a00389.html#a50320d4edff86db31b25138ae72161ad">roll_chance_i</a></div><div class="ttdeci">bool roll_chance_i(int chance)</div><div class="ttdef"><b>Definition:</b> Random.h:59</div></div>
<div class="ttc" id="aa02771_html_a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3"><div class="ttname"><a href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a></div><div class="ttdeci">@ GENDER_MALE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:61</div></div>
<div class="ttc" id="aa02771_html_a3667e3c5ec056737c8789615a989324faf3da8f6e862fb5230f0bbb8613684463"><div class="ttname"><a href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324faf3da8f6e862fb5230f0bbb8613684463">GENDER_FEMALE</a></div><div class="ttdeci">@ GENDER_FEMALE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:62</div></div>
<div class="ttc" id="aa02771_html_a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3"><div class="ttname"><a href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a></div><div class="ttdeci">@ IMMUNITY_MECHANIC</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1399</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207">SPELLFAMILY_PRIEST</a></div><div class="ttdeci">@ SPELLFAMILY_PRIEST</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3534</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a></div><div class="ttdeci">@ SPELLFAMILY_MAGE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3531</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a></div><div class="ttdeci">@ SPELLFAMILY_GENERIC</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3528</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a></div><div class="ttdeci">@ SPELLFAMILY_SHAMAN</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3539</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a></div><div class="ttdeci">@ SPELLFAMILY_DRUID</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3535</div></div>
<div class="ttc" id="aa02780_html_a4545b2a440043037e8dad52c0f644f48"><div class="ttname"><a href="../../df/de4/a02780.html#a4545b2a440043037e8dad52c0f644f48">sBattlefieldMgr</a></div><div class="ttdeci">#define sBattlefieldMgr</div><div class="ttdef"><b>Definition:</b> BattlefieldMgr.h:77</div></div>
<div class="ttc" id="aa02843_html_a736e30da2b5261060ac6cdbb5de3b787"><div class="ttname"><a href="../../d0/d45/a02843.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a></div><div class="ttdeci">#define sObjectMgr</div><div class="ttdef"><b>Definition:</b> ObjectMgr.h:1634</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a></div><div class="ttdeci">@ SPELL_AURA_MOUNTED</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:141</div></div>
<div class="ttc" id="aa03092_html_a56f7dd5627e22afd9eb73530b767115ea132c6993498600b4a3cfda2b1639c166"><div class="ttname"><a href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea132c6993498600b4a3cfda2b1639c166">AURA_REMOVE_BY_CANCEL</a></div><div class="ttdeci">@ AURA_REMOVE_BY_CANCEL</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:393</div></div>
<div class="ttc" id="aa03092_html_a56f7dd5627e22afd9eb73530b767115ea9ca05b22853d12d44ac7e80a9e864a10"><div class="ttname"><a href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea9ca05b22853d12d44ac7e80a9e864a10">AURA_REMOVE_BY_EXPIRE</a></div><div class="ttdeci">@ AURA_REMOVE_BY_EXPIRE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:395</div></div>
<div class="ttc" id="aa03095_html_a4ee83f582e4ebba3a5aea9ab1a5c9354a62ef26e3a60fddc8cbadbd349cb054bf"><div class="ttname"><a href="../../d0/d2b/a03095.html#a4ee83f582e4ebba3a5aea9ab1a5c9354a62ef26e3a60fddc8cbadbd349cb054bf">FRESH_BREWFEST_HOPS</a></div><div class="ttdeci">@ FRESH_BREWFEST_HOPS</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:35</div></div>
<div class="ttc" id="aa03095_html_a4ee83f582e4ebba3a5aea9ab1a5c9354a9e68ffb636426417370cc6b94b7b46aa"><div class="ttname"><a href="../../d0/d2b/a03095.html#a4ee83f582e4ebba3a5aea9ab1a5c9354a9e68ffb636426417370cc6b94b7b46aa">GREAT_BREWFEST_KODO</a></div><div class="ttdeci">@ GREAT_BREWFEST_KODO</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:34</div></div>
<div class="ttc" id="aa03095_html_a4ee83f582e4ebba3a5aea9ab1a5c9354acbc7617ce19ea8d214518ab0335275c5"><div class="ttname"><a href="../../d0/d2b/a03095.html#a4ee83f582e4ebba3a5aea9ab1a5c9354acbc7617ce19ea8d214518ab0335275c5">BREWFEST_KODO</a></div><div class="ttdeci">@ BREWFEST_KODO</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:33</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031">UNIT_FIELD_MOUNTDISPLAYID</a></div><div class="ttdeci">@ UNIT_FIELD_MOUNTDISPLAYID</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:126</div></div>
<div class="ttc" id="aa03521_html_af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de"><div class="ttname"><a href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de">MOVE_RUN</a></div><div class="ttdeci">@ MOVE_RUN</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:329</div></div>
<div class="ttc" id="aa06974_html"><div class="ttname"><a href="../../dd/dd7/a06974.html">Battlefield</a></div><div class="ttdef"><b>Definition:</b> Battlefield.h:204</div></div>
<div class="ttc" id="aa07074_html"><div class="ttname"><a href="../../d5/d31/a07074.html">Battleground</a></div><div class="ttdef"><b>Definition:</b> Battleground.h:303</div></div>
<div class="ttc" id="aa07794_html"><div class="ttname"><a href="../../d0/d6e/a07794.html">CreatureModel</a></div><div class="ttdef"><b>Definition:</b> CreatureData.h:169</div></div>
<div class="ttc" id="aa07794_html_a0f48fde2c8438ecf411d7f80d3bca1a9"><div class="ttname"><a href="../../d0/d6e/a07794.html#a0f48fde2c8438ecf411d7f80d3bca1a9">CreatureModel::CreatureDisplayID</a></div><div class="ttdeci">uint32 CreatureDisplayID</div><div class="ttdef"><b>Definition:</b> CreatureData.h:179</div></div>
<div class="ttc" id="aa07798_html"><div class="ttname"><a href="../../d3/d43/a07798.html">CreatureTemplate</a></div><div class="ttdef"><b>Definition:</b> CreatureData.h:186</div></div>
<div class="ttc" id="aa08142_html_aa627fe2967ed0e0ed1d8aeeb4365a961"><div class="ttname"><a href="../../df/d2d/a08142.html#aa627fe2967ed0e0ed1d8aeeb4365a961">Object::GetEntry</a></div><div class="ttdeci">uint32 GetEntry() const</div><div class="ttdef"><b>Definition:</b> Object.h:112</div></div>
<div class="ttc" id="aa08142_html_ad5ba4799de88341246bc5ff7dd4b2d36"><div class="ttname"><a href="../../df/d2d/a08142.html#ad5ba4799de88341246bc5ff7dd4b2d36">Object::SetEntry</a></div><div class="ttdeci">void SetEntry(uint32 entry)</div><div class="ttdef"><b>Definition:</b> Object.h:113</div></div>
<div class="ttc" id="aa08174_html_a1013c27be4347a1b1a4a986a07456deb"><div class="ttname"><a href="../../d3/d4c/a08174.html#a1013c27be4347a1b1a4a986a07456deb">WorldObject::GetMap</a></div><div class="ttdeci">Map * GetMap() const</div><div class="ttdef"><b>Definition:</b> Object.h:531</div></div>
<div class="ttc" id="aa08174_html_a40f0974be3005abb7313b4688e4cdfe3"><div class="ttname"><a href="../../d3/d4c/a08174.html#a40f0974be3005abb7313b4688e4cdfe3">WorldObject::PlayDirectSound</a></div><div class="ttdeci">void PlayDirectSound(uint32 sound_id, Player *target=nullptr)</div><div class="ttdef"><b>Definition:</b> Object.cpp:2892</div></div>
<div class="ttc" id="aa08174_html_aaf763bad217ff546f44a04b8c977d694"><div class="ttname"><a href="../../d3/d4c/a08174.html#aaf763bad217ff546f44a04b8c977d694">WorldObject::PlayDistanceSound</a></div><div class="ttdeci">void PlayDistanceSound(uint32 sound_id, Player *target=nullptr)</div><div class="ttdef"><b>Definition:</b> Object.cpp:2884</div></div>
<div class="ttc" id="aa08174_html_ad498d690fbe69bb99a8a2ffdcb2f5169"><div class="ttname"><a href="../../d3/d4c/a08174.html#ad498d690fbe69bb99a8a2ffdcb2f5169">WorldObject::GetZoneId</a></div><div class="ttdeci">uint32 GetZoneId() const</div><div class="ttdef"><b>Definition:</b> Object.cpp:3146</div></div>
<div class="ttc" id="aa08386_html_a05924f5e9df8d5f06ba422e159a4fd8a"><div class="ttname"><a href="../../d0/dc6/a08386.html#a05924f5e9df8d5f06ba422e159a4fd8a">Player::KilledMonsterCredit</a></div><div class="ttdeci">void KilledMonsterCredit(uint32 entry, ObjectGuid guid=ObjectGuid::Empty)</div><div class="ttdef"><b>Definition:</b> PlayerQuest.cpp:1926</div></div>
<div class="ttc" id="aa08386_html_a5f17db78f9356bf239b7631ebc38fa2d"><div class="ttname"><a href="../../d0/dc6/a08386.html#a5f17db78f9356bf239b7631ebc38fa2d">Player::GetBattleground</a></div><div class="ttdeci">Battleground * GetBattleground(bool create=false) const</div><div class="ttdef"><b>Definition:</b> Player.cpp:12203</div></div>
<div class="ttc" id="aa08386_html_a64d7fc1d009a80de3b86e7ad66f5ad3c"><div class="ttname"><a href="../../d0/dc6/a08386.html#a64d7fc1d009a80de3b86e7ad66f5ad3c">Player::RemoveAmmo</a></div><div class="ttdeci">void RemoveAmmo()</div><div class="ttdef"><b>Definition:</b> PlayerStorage.cpp:2514</div></div>
<div class="ttc" id="aa08386_html_a9c5a4099279837c4c18fc871232bf86e"><div class="ttname"><a href="../../d0/dc6/a08386.html#a9c5a4099279837c4c18fc871232bf86e">Player::SetChampioningFaction</a></div><div class="ttdeci">void SetChampioningFaction(uint32 faction)</div><div class="ttdef"><b>Definition:</b> Player.h:2534</div></div>
<div class="ttc" id="aa08386_html_ac2c25dd9c3d9a6c3fe3901f25b0bdedf"><div class="ttname"><a href="../../d0/dc6/a08386.html#ac2c25dd9c3d9a6c3fe3901f25b0bdedf">Player::LeaveBattleground</a></div><div class="ttdeci">void LeaveBattleground(Battleground *bg=nullptr)</div><div class="ttdef"><b>Definition:</b> Player.cpp:11328</div></div>
<div class="ttc" id="aa08518_html_a0d13935c40d0392f7f7b5a34540461b2"><div class="ttname"><a href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">Unit::getGender</a></div><div class="ttdeci">uint8 getGender() const</div><div class="ttdef"><b>Definition:</b> Unit.h:805</div></div>
<div class="ttc" id="aa08518_html_a1350682846c1ddb65567ec85e75e2df3"><div class="ttname"><a href="../../db/df9/a08518.html#a1350682846c1ddb65567ec85e75e2df3">Unit::RemovePetAura</a></div><div class="ttdeci">void RemovePetAura(PetAura const *petSpell)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:17305</div></div>
<div class="ttc" id="aa08518_html_a135e4d345c338da83450a60528f71222"><div class="ttname"><a href="../../db/df9/a08518.html#a135e4d345c338da83450a60528f71222">Unit::GetAura</a></div><div class="ttdeci">Aura * GetAura(uint32 spellId, ObjectGuid casterGUID=ObjectGuid::Empty, ObjectGuid itemCasterGUID=ObjectGuid::Empty, uint8 reqEffMask=0) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5581</div></div>
<div class="ttc" id="aa08518_html_a1afc1e413f12c5bd7bc00c926fa05833"><div class="ttname"><a href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">Unit::ApplySpellImmune</a></div><div class="ttdeci">void ApplySpellImmune(uint32 spellId, uint32 op, uint32 type, bool apply, SpellImmuneBlockType blockType=SPELL_BLOCK_TYPE_ALL)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:13384</div></div>
<div class="ttc" id="aa08518_html_a2c30ee763635ea710cc1101ee3c94607"><div class="ttname"><a href="../../db/df9/a08518.html#a2c30ee763635ea710cc1101ee3c94607">Unit::AddPetAura</a></div><div class="ttdeci">void AddPetAura(PetAura const *petSpell)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:17293</div></div>
<div class="ttc" id="aa08518_html_a3b4dad985e3b5dde28d89afc956999e4"><div class="ttname"><a href="../../db/df9/a08518.html#a3b4dad985e3b5dde28d89afc956999e4">Unit::AddThreat</a></div><div class="ttdeci">void AddThreat(Unit *victim, float fThreat, SpellSchoolMask schoolMask=SPELL_SCHOOL_MASK_NORMAL, SpellInfo const *threatSpell=nullptr)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14648</div></div>
<div class="ttc" id="aa08518_html_a51d433dde350cd94d7c3c43e30ca997f"><div class="ttname"><a href="../../db/df9/a08518.html#a51d433dde350cd94d7c3c43e30ca997f">Unit::AddAura</a></div><div class="ttdeci">Aura * AddAura(uint32 spellId, Unit *target)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:18859</div></div>
<div class="ttc" id="aa08518_html_a5ea3f54af571493f7889220724667189"><div class="ttname"><a href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">Unit::IsAlive</a></div><div class="ttdeci">bool IsAlive() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1658</div></div>
<div class="ttc" id="aa08518_html_aa3ca95f7a14041f562ed69c3994afdfc"><div class="ttname"><a href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">Unit::CastSpell</a></div><div class="ttdeci">SpellCastResult CastSpell(SpellCastTargets const &amp;targets, SpellInfo const *spellInfo, CustomSpellValues const *value, TriggerCastFlags triggerFlags=TRIGGERED_NONE, Item *castItem=nullptr, AuraEffect const *triggeredByAura=nullptr, ObjectGuid originalCaster=ObjectGuid::Empty)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:1167</div></div>
<div class="ttc" id="aa08518_html_aab66f0084b10c4a2a45f064567cf1118"><div class="ttname"><a href="../../db/df9/a08518.html#aab66f0084b10c4a2a45f064567cf1118">Unit::GetSpeedRate</a></div><div class="ttdeci">float GetSpeedRate(UnitMoveType mtype) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1603</div></div>
<div class="ttc" id="aa08518_html_ac2bd94b573bcf5e80cba886a8e2f540f"><div class="ttname"><a href="../../db/df9/a08518.html#ac2bd94b573bcf5e80cba886a8e2f540f">Unit::SetUInt32Value</a></div><div class="ttdeci">void SetUInt32Value(uint16 index, uint32 value)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:21312</div></div>
<div class="ttc" id="aa08518_html_ae0a72f8fa312caf442a6039bf9758ef6"><div class="ttname"><a href="../../db/df9/a08518.html#ae0a72f8fa312caf442a6039bf9758ef6">Unit::CanHaveThreatList</a></div><div class="ttdeci">bool CanHaveThreatList(bool skipAliveCheck=false) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14609</div></div>
<div class="ttc" id="aa08518_html_ae78759acca81e2a89a82f79a4ef6e70c"><div class="ttname"><a href="../../db/df9/a08518.html#ae78759acca81e2a89a82f79a4ef6e70c">Unit::GetGuardianPet</a></div><div class="ttdeci">Guardian * GetGuardianPet() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10651</div></div>
<div class="ttc" id="aa08518_html_afd7aa5f7719cba4d967bb7f009582d2f"><div class="ttname"><a href="../../db/df9/a08518.html#afd7aa5f7719cba4d967bb7f009582d2f">Unit::isDead</a></div><div class="ttdeci">bool isDead() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1660</div></div>
<div class="ttc" id="aa08810_html_a891716d1527f5e7aa64f8566672173e4"><div class="ttname"><a href="../../d0/dd0/a08810.html#a891716d1527f5e7aa64f8566672173e4">ObjectMgr::ChooseDisplayId</a></div><div class="ttdeci">static CreatureModel const * ChooseDisplayId(CreatureTemplate const *cinfo, CreatureData const *data=nullptr)</div><div class="ttdef"><b>Definition:</b> ObjectMgr.cpp:1647</div></div>
<div class="ttc" id="aa08822_html_a952f2c6008bbbc3b9ee1652ea5f9188a"><div class="ttname"><a href="../../d9/db0/a08822.html#a952f2c6008bbbc3b9ee1652ea5f9188a">Cell::VisitWorldObjects</a></div><div class="ttdeci">static void VisitWorldObjects(WorldObject const *obj, T &amp;visitor, float radius, bool dont_load=true)</div><div class="ttdef"><b>Definition:</b> CellImpl.h:192</div></div>
<div class="ttc" id="aa08954_html"><div class="ttname"><a href="../../dc/d5e/a08954.html">Acore::PlayerSearcher</a></div><div class="ttdef"><b>Definition:</b> GridNotifiers.h:510</div></div>
<div class="ttc" id="aa09102_html"><div class="ttname"><a href="../../da/d80/a09102.html">Acore::AnyPlayerInObjectRangeCheck</a></div><div class="ttdef"><b>Definition:</b> GridNotifiers.h:1354</div></div>
<div class="ttc" id="aa09538_html_a4fa855d03b7d1fa1957453767ff52429"><div class="ttname"><a href="../../d7/dc0/a09538.html#a4fa855d03b7d1fa1957453767ff52429">Map::IsBattleground</a></div><div class="ttdeci">bool IsBattleground() const</div><div class="ttdef"><b>Definition:</b> Map.h:452</div></div>
<div class="ttc" id="aa10794_html_a1f6c2606d7dc499c1fc1ba0cee1f255b"><div class="ttname"><a href="../../df/d4a/a10794.html#a1f6c2606d7dc499c1fc1ba0cee1f255b">Aura::SetStackAmount</a></div><div class="ttdeci">void SetStackAmount(uint8 num)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:995</div></div>
<div class="ttc" id="aa10794_html_a7f7d613279717173c13708425f3a8083"><div class="ttname"><a href="../../df/d4a/a10794.html#a7f7d613279717173c13708425f3a8083">Aura::SetCharges</a></div><div class="ttdeci">void SetCharges(uint8 charges)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:952</div></div>
<div class="ttc" id="aa10898_html_a46f51f384b1455b03000e98a08d11790"><div class="ttname"><a href="../../d2/db6/a10898.html#a46f51f384b1455b03000e98a08d11790">SpellInfo::StackAmount</a></div><div class="ttdeci">uint32 StackAmount</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:371</div></div>
<div class="ttc" id="aa10898_html_af6ec577353f7d3cc59badd7d332153b0"><div class="ttname"><a href="../../d2/db6/a10898.html#af6ec577353f7d3cc59badd7d332153b0">SpellInfo::SpellFamilyName</a></div><div class="ttdeci">uint32 SpellFamilyName</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:387</div></div>
<div class="ttc" id="aa10930_html"><div class="ttname"><a href="../../d4/df1/a10930.html">PetAura</a></div><div class="ttdef"><b>Definition:</b> SpellMgr.h:470</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l18859">Unit::AddAura()</a>, <a class="el" href="../../#l17293">Unit::AddPetAura()</a>, <a class="el" href="../../#l14648">Unit::AddThreat()</a>, <a class="el" href="../../#l13384">Unit::ApplySpellImmune()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00045">AURA_EFFECT_HANDLE_REAPPLY</a>, <a class="el" href="../../#l00393">AURA_REMOVE_BY_CANCEL</a>, <a class="el" href="../../#l00395">AURA_REMOVE_BY_EXPIRE</a>, <a class="el" href="../../#l00033">BREWFEST_KODO</a>, <a class="el" href="../../#l14609">Unit::CanHaveThreatList()</a>, <a class="el" href="../../#l01167">Unit::CastSpell()</a>, <a class="el" href="../../#l01647">ObjectMgr::ChooseDisplayId()</a>, <a class="el" href="../../#l00179">CreatureModel::CreatureDisplayID</a>, <a class="el" href="../../#l00035">FRESH_BREWFEST_HOPS</a>, <a class="el" href="../../#l00062">GENDER_FEMALE</a>, <a class="el" href="../../#l00061">GENDER_MALE</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l05581">Unit::GetAura()</a>, <a class="el" href="../../#l01349">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l12203">Player::GetBattleground()</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00471">Aura::GetCaster()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00112">Object::GetEntry()</a>, <a class="el" href="../../#l00805">Unit::getGender()</a>, <a class="el" href="../../#l10651">Unit::GetGuardianPet()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00531">WorldObject::GetMap()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l01622">Unit::GetMotionMaster()</a>, <a class="el" href="../../#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../#l01603">Unit::GetSpeedRate()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00100">Aura::GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l03146">WorldObject::GetZoneId()</a>, <a class="el" href="../../#l00034">GREAT_BREWFEST_KODO</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l01399">IMMUNITY_MECHANIC</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l00452">Map::IsBattleground()</a>, <a class="el" href="../../#l00201">Object::IsCreature()</a>, <a class="el" href="../../#l01660">Unit::isDead()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l01926">Player::KilledMonsterCredit()</a>, <a class="el" href="../../#l11328">Player::LeaveBattleground()</a>, <a class="el" href="../../#l00146">m_effIndex</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l00329">MOVE_RUN</a>, <a class="el" href="../../#l00627">MotionMaster::MoveFall()</a>, <a class="el" href="../../#l02892">WorldObject::PlayDirectSound()</a>, <a class="el" href="../../#l02884">WorldObject::PlayDistanceSound()</a>, <a class="el" href="../../#l02514">Player::RemoveAmmo()</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../#l17305">Unit::RemovePetAura()</a>, <a class="el" href="../../#l00059">roll_chance_i()</a>, <a class="el" href="../../#l00077">sBattlefieldMgr</a>, <a class="el" href="../../#l02534">Player::SetChampioningFaction()</a>, <a class="el" href="../../#l00952">Aura::SetCharges()</a>, <a class="el" href="../../#l00113">Object::SetEntry()</a>, <a class="el" href="../../#l00995">Aura::SetStackAmount()</a>, <a class="el" href="../../#l21312">Unit::SetUInt32Value()</a>, <a class="el" href="../../#l01634">sObjectMgr</a>, <a class="el" href="../../#l00270">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>, <a class="el" href="../../#l00141">SPELL_AURA_MOUNTED</a>, <a class="el" href="../../#l03535">SPELLFAMILY_DRUID</a>, <a class="el" href="../../#l03528">SPELLFAMILY_GENERIC</a>, <a class="el" href="../../#l03531">SPELLFAMILY_MAGE</a>, <a class="el" href="../../#l03534">SPELLFAMILY_PRIEST</a>, <a class="el" href="../../#l03539">SPELLFAMILY_SHAMAN</a>, <a class="el" href="../../#l00387">SpellInfo::SpellFamilyName</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, <a class="el" href="../../#l00371">SpellInfo::StackAmount</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00126">UNIT_FIELD_MOUNTDISPLAYID</a>, and <a class="el" href="../../#l00192">Cell::VisitWorldObjects()</a>.</p>

</div>
</div>
<a id="a1cfa8fba22df7460cb11c768e8e6e3ba" name="a1cfa8fba22df7460cb11c768e8e6e3ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cfa8fba22df7460cb11c768e8e6e3ba">&#9670;&#160;</a></span>HandleAuraEmpathy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraEmpathy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5963</span>{</div>
<div class="line"><span class="lineno"> 5964</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 5965</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5966</span> </div>
<div class="line"><span class="lineno"> 5967</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5968</span> </div>
<div class="line"><span class="lineno"> 5969</span>    <span class="keywordflow">if</span> (!apply)</div>
<div class="line"><span class="lineno"> 5970</span>    {</div>
<div class="line"><span class="lineno"> 5971</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 5972</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><span class="lineno"> 5973</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5974</span>    }</div>
<div class="line"><span class="lineno"> 5975</span> </div>
<div class="line"><span class="lineno"> 5976</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a80140b04cc4277697de8f853e7da90e8">GetCreatureType</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a5bc40f1116d89138cda8ebd1a04694dfad8554d39e48b328aeef08647900c1927">CREATURE_TYPE_BEAST</a>)</div>
<div class="line"><span class="lineno"> 5977</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a830bd94d6366efff27b887ec963c1dab">ApplyModUInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d">UNIT_DYNAMIC_FLAGS</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a6d2f7a5452237dadf8fd3aed70f44039a078ce2ed96955f66628c22f925dc16c0">UNIT_DYNFLAG_SPECIALINFO</a>, apply);</div>
<div class="line"><span class="lineno"> 5978</span>}</div>
<div class="ttc" id="aa02771_html_a5bc40f1116d89138cda8ebd1a04694dfad8554d39e48b328aeef08647900c1927"><div class="ttname"><a href="../../d0/dbd/a02771.html#a5bc40f1116d89138cda8ebd1a04694dfad8554d39e48b328aeef08647900c1927">CREATURE_TYPE_BEAST</a></div><div class="ttdeci">@ CREATURE_TYPE_BEAST</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:2628</div></div>
<div class="ttc" id="aa02771_html_a6d2f7a5452237dadf8fd3aed70f44039a078ce2ed96955f66628c22f925dc16c0"><div class="ttname"><a href="../../d0/dbd/a02771.html#a6d2f7a5452237dadf8fd3aed70f44039a078ce2ed96955f66628c22f925dc16c0">UNIT_DYNFLAG_SPECIALINFO</a></div><div class="ttdeci">@ UNIT_DYNFLAG_SPECIALINFO</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3125</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881affa05042cc4016a32cf1a66d4157d03d">UNIT_DYNAMIC_FLAGS</a></div><div class="ttdeci">@ UNIT_DYNAMIC_FLAGS</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:136</div></div>
<div class="ttc" id="aa08142_html_a830bd94d6366efff27b887ec963c1dab"><div class="ttname"><a href="../../df/d2d/a08142.html#a830bd94d6366efff27b887ec963c1dab">Object::ApplyModUInt32Value</a></div><div class="ttdeci">void ApplyModUInt32Value(uint16 index, int32 val, bool apply)</div><div class="ttdef"><b>Definition:</b> Object.cpp:806</div></div>
<div class="ttc" id="aa08518_html_a80140b04cc4277697de8f853e7da90e8"><div class="ttname"><a href="../../db/df9/a08518.html#a80140b04cc4277697de8f853e7da90e8">Unit::GetCreatureType</a></div><div class="ttdeci">uint32 GetCreatureType() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:15177</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00806">Object::ApplyModUInt32Value()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l02628">CREATURE_TYPE_BEAST</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l15177">Unit::GetCreatureType()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00136">UNIT_DYNAMIC_FLAGS</a>, and <a class="el" href="../../#l03125">UNIT_DYNFLAG_SPECIALINFO</a>.</p>

</div>
</div>
<a id="a1fee7fad1f1f304000184269e5b94c5c" name="a1fee7fad1f1f304000184269e5b94c5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fee7fad1f1f304000184269e5b94c5c">&#9670;&#160;</a></span>HandleAuraFeatherFall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraFeatherFall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3348</span>{</div>
<div class="line"><span class="lineno"> 3349</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3350</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3351</span> </div>
<div class="line"><span class="lineno"> 3352</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3353</span> </div>
<div class="line"><span class="lineno"> 3354</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* targetPlayer = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno"> 3355</span>    {</div>
<div class="line"><span class="lineno"> 3356</span>        <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><span class="lineno"> 3357</span>    }</div>
<div class="line"><span class="lineno"> 3358</span> </div>
<div class="line"><span class="lineno"> 3359</span>    <span class="keywordflow">if</span> (!apply)</div>
<div class="line"><span class="lineno"> 3360</span>    {</div>
<div class="line"><span class="lineno"> 3361</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3362</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><span class="lineno"> 3363</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3364</span>    }</div>
<div class="line"><span class="lineno"> 3365</span> </div>
<div class="line"><span class="lineno"> 3366</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9a61b648113fb3d98bceb9a7b4338641">SetFeatherFall</a>(apply);</div>
<div class="line"><span class="lineno"> 3367</span> </div>
<div class="line"><span class="lineno"> 3368</span>    <span class="comment">// start fall from current height</span></div>
<div class="line"><span class="lineno"> 3369</span>    <span class="keywordflow">if</span> (!apply &amp;&amp; target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 3370</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a5314dca58905e9e6504d140a32a60599">SetFallInformation</a>(<a class="code hl_function" href="../../de/df1/a04758.html#adbe1785d1327dedf2ac403b7cc8e99c2">GameTime::GetGameTime</a>().count(), target-&gt;<a class="code hl_function" href="../../de/d68/a08218.html#a4e813a59345a6275e8b87b96be03e60b">GetPositionZ</a>());</div>
<div class="line"><span class="lineno"> 3371</span>}</div>
<div class="ttc" id="aa04202_html_ae8161e629869974bc49b1cbfc73c1087"><div class="ttname"><a href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a></div><div class="ttdeci">#define sScriptMgr</div><div class="ttdef"><b>Definition:</b> ScriptMgr.h:709</div></div>
<div class="ttc" id="aa04758_html_adbe1785d1327dedf2ac403b7cc8e99c2"><div class="ttname"><a href="../../de/df1/a04758.html#adbe1785d1327dedf2ac403b7cc8e99c2">GameTime::GetGameTime</a></div><div class="ttdeci">Seconds GetGameTime()</div><div class="ttdef"><b>Definition:</b> GameTime.cpp:38</div></div>
<div class="ttc" id="aa08218_html_a4e813a59345a6275e8b87b96be03e60b"><div class="ttname"><a href="../../de/d68/a08218.html#a4e813a59345a6275e8b87b96be03e60b">Position::GetPositionZ</a></div><div class="ttdeci">float GetPositionZ() const</div><div class="ttdef"><b>Definition:</b> Position.h:118</div></div>
<div class="ttc" id="aa08386_html_a5314dca58905e9e6504d140a32a60599"><div class="ttname"><a href="../../d0/dc6/a08386.html#a5314dca58905e9e6504d140a32a60599">Player::SetFallInformation</a></div><div class="ttdeci">void SetFallInformation(uint32 time, float z)</div><div class="ttdef"><b>Definition:</b> Player.h:2319</div></div>
<div class="ttc" id="aa08518_html_a9a61b648113fb3d98bceb9a7b4338641"><div class="ttname"><a href="../../db/df9/a08518.html#a9a61b648113fb3d98bceb9a7b4338641">Unit::SetFeatherFall</a></div><div class="ttdeci">virtual bool SetFeatherFall(bool enable, bool packetOnly=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:20647</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00038">GameTime::GetGameTime()</a>, <a class="el" href="../../#l00118">Position::GetPositionZ()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l02319">Player::SetFallInformation()</a>, <a class="el" href="../../#l20647">Unit::SetFeatherFall()</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a81f9974032b40d56489fabe89641f81d" name="a81f9974032b40d56489fabe89641f81d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81f9974032b40d56489fabe89641f81d">&#9670;&#160;</a></span>HandleAuraGhost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraGhost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1776</span>{</div>
<div class="line"><span class="lineno"> 1777</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 1778</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1779</span> </div>
<div class="line"><span class="lineno"> 1780</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1781</span> </div>
<div class="line"><span class="lineno"> 1782</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 1783</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1784</span> </div>
<div class="line"><span class="lineno"> 1785</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1786</span>    {</div>
<div class="line"><span class="lineno"> 1787</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a190ebc08c3d5bc837ea312c7901db505">SetPlayerFlag</a>(<a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a3ff501fa2c348b8887c3e9eac3ab7dcda8972cf61a8fe94379d50f9b737894863">PLAYER_FLAGS_GHOST</a>);</div>
<div class="line"><span class="lineno"> 1788</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#add2aa23e80725c3efde05b8c25cfd62e">m_serverSideVisibility</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#ad0d385589befe52103f077723fa2463c">SetValue</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b">SERVERSIDE_VISIBILITY_GHOST</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ab45f8901baa25b1e80ee28da43b17269ab1259865309e9253030249f694c8cb1c">GHOST_VISIBILITY_GHOST</a>);</div>
<div class="line"><span class="lineno"> 1789</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#ac34d2a601caf37ebe5764c4cd7191023">m_serverSideVisibilityDetect</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#ad0d385589befe52103f077723fa2463c">SetValue</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b">SERVERSIDE_VISIBILITY_GHOST</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ab45f8901baa25b1e80ee28da43b17269ab1259865309e9253030249f694c8cb1c">GHOST_VISIBILITY_GHOST</a>);</div>
<div class="line"><span class="lineno"> 1790</span>    }</div>
<div class="line"><span class="lineno"> 1791</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1792</span>    {</div>
<div class="line"><span class="lineno"> 1793</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a7b48a8e2e90779303af620c79bf8bfec">SPELL_AURA_GHOST</a>))</div>
<div class="line"><span class="lineno"> 1794</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1795</span> </div>
<div class="line"><span class="lineno"> 1796</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a202d37a0e6e6a63a82e71e53dec65059">RemovePlayerFlag</a>(<a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a3ff501fa2c348b8887c3e9eac3ab7dcda8972cf61a8fe94379d50f9b737894863">PLAYER_FLAGS_GHOST</a>);</div>
<div class="line"><span class="lineno"> 1797</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#add2aa23e80725c3efde05b8c25cfd62e">m_serverSideVisibility</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#ad0d385589befe52103f077723fa2463c">SetValue</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b">SERVERSIDE_VISIBILITY_GHOST</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ab45f8901baa25b1e80ee28da43b17269a26388c39650c9232d9cc7b9bc88268f1">GHOST_VISIBILITY_ALIVE</a>);</div>
<div class="line"><span class="lineno"> 1798</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#ac34d2a601caf37ebe5764c4cd7191023">m_serverSideVisibilityDetect</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#ad0d385589befe52103f077723fa2463c">SetValue</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b">SERVERSIDE_VISIBILITY_GHOST</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ab45f8901baa25b1e80ee28da43b17269a26388c39650c9232d9cc7b9bc88268f1">GHOST_VISIBILITY_ALIVE</a>);</div>
<div class="line"><span class="lineno"> 1799</span>    }</div>
<div class="line"><span class="lineno"> 1800</span>}</div>
<div class="ttc" id="aa02771_html_a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b"><div class="ttname"><a href="../../d0/dbd/a02771.html#a0105c40ec0c20daef3cbd8dfc5f473fda5b9831b2635d5fb4ec0596ec40a6487b">SERVERSIDE_VISIBILITY_GHOST</a></div><div class="ttdeci">@ SERVERSIDE_VISIBILITY_GHOST</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1274</div></div>
<div class="ttc" id="aa02771_html_ab45f8901baa25b1e80ee28da43b17269a26388c39650c9232d9cc7b9bc88268f1"><div class="ttname"><a href="../../d0/dbd/a02771.html#ab45f8901baa25b1e80ee28da43b17269a26388c39650c9232d9cc7b9bc88268f1">GHOST_VISIBILITY_ALIVE</a></div><div class="ttdeci">@ GHOST_VISIBILITY_ALIVE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1281</div></div>
<div class="ttc" id="aa02771_html_ab45f8901baa25b1e80ee28da43b17269ab1259865309e9253030249f694c8cb1c"><div class="ttname"><a href="../../d0/dbd/a02771.html#ab45f8901baa25b1e80ee28da43b17269ab1259865309e9253030249f694c8cb1c">GHOST_VISIBILITY_GHOST</a></div><div class="ttdeci">@ GHOST_VISIBILITY_GHOST</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1282</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a7b48a8e2e90779303af620c79bf8bfec"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a7b48a8e2e90779303af620c79bf8bfec">SPELL_AURA_GHOST</a></div><div class="ttdeci">@ SPELL_AURA_GHOST</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:158</div></div>
<div class="ttc" id="aa03365_html_a3ff501fa2c348b8887c3e9eac3ab7dcda8972cf61a8fe94379d50f9b737894863"><div class="ttname"><a href="../../d7/d13/a03365.html#a3ff501fa2c348b8887c3e9eac3ab7dcda8972cf61a8fe94379d50f9b737894863">PLAYER_FLAGS_GHOST</a></div><div class="ttdeci">@ PLAYER_FLAGS_GHOST</div><div class="ttdef"><b>Definition:</b> Player.h:478</div></div>
<div class="ttc" id="aa08166_html_ad0d385589befe52103f077723fa2463c"><div class="ttname"><a href="../../dc/d06/a08166.html#ad0d385589befe52103f077723fa2463c">FlaggedValuesArray32::SetValue</a></div><div class="ttdeci">void SetValue(FLAG_TYPE flag, T_VALUES value)</div><div class="ttdef"><b>Definition:</b> Object.h:372</div></div>
<div class="ttc" id="aa08174_html_ac34d2a601caf37ebe5764c4cd7191023"><div class="ttname"><a href="../../d3/d4c/a08174.html#ac34d2a601caf37ebe5764c4cd7191023">WorldObject::m_serverSideVisibilityDetect</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, ServerSideVisibilityType, TOTAL_SERVERSIDE_VISIBILITY_TYPES &gt; m_serverSideVisibilityDetect</div><div class="ttdef"><b>Definition:</b> Object.h:524</div></div>
<div class="ttc" id="aa08174_html_add2aa23e80725c3efde05b8c25cfd62e"><div class="ttname"><a href="../../d3/d4c/a08174.html#add2aa23e80725c3efde05b8c25cfd62e">WorldObject::m_serverSideVisibility</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, ServerSideVisibilityType, TOTAL_SERVERSIDE_VISIBILITY_TYPES &gt; m_serverSideVisibility</div><div class="ttdef"><b>Definition:</b> Object.h:523</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01281">GHOST_VISIBILITY_ALIVE</a>, <a class="el" href="../../#l01282">GHOST_VISIBILITY_GHOST</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00523">WorldObject::m_serverSideVisibility</a>, <a class="el" href="../../#l00524">WorldObject::m_serverSideVisibilityDetect</a>, <a class="el" href="../../#l00478">PLAYER_FLAGS_GHOST</a>, <a class="el" href="../../#l01110">Player::RemovePlayerFlag()</a>, <a class="el" href="../../#l01274">SERVERSIDE_VISIBILITY_GHOST</a>, <a class="el" href="../../#l01109">Player::SetPlayerFlag()</a>, <a class="el" href="../../#l00372">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::SetValue()</a>, <a class="el" href="../../#l00158">SPELL_AURA_GHOST</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="ae7c56dc7da49ce169af1d32d111b2a57" name="ae7c56dc7da49ce169af1d32d111b2a57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7c56dc7da49ce169af1d32d111b2a57">&#9670;&#160;</a></span>HandleAuraHover()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraHover </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Sets movementflags</p>
<div class="fragment"><div class="line"><span class="lineno"> 3374</span>{</div>
<div class="line"><span class="lineno"> 3375</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3376</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3377</span> </div>
<div class="line"><span class="lineno"> 3378</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3379</span> </div>
<div class="line"><span class="lineno"> 3380</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* targetPlayer = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno"> 3381</span>    {</div>
<div class="line"><span class="lineno"> 3382</span>        <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><span class="lineno"> 3383</span>    }</div>
<div class="line"><span class="lineno"> 3384</span> </div>
<div class="line"><span class="lineno"> 3385</span>    <span class="keywordflow">if</span> (!apply)</div>
<div class="line"><span class="lineno"> 3386</span>    {</div>
<div class="line"><span class="lineno"> 3387</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3388</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><span class="lineno"> 3389</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3390</span>    }</div>
<div class="line"><span class="lineno"> 3391</span> </div>
<div class="line"><span class="lineno"> 3392</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa28fe76d6a8403dbf82670d2d76c3f0b">SetHover</a>(apply);    </div>
<div class="line"><span class="lineno"> 3393</span>}</div>
<div class="ttc" id="aa08518_html_aa28fe76d6a8403dbf82670d2d76c3f0b"><div class="ttname"><a href="../../db/df9/a08518.html#aa28fe76d6a8403dbf82670d2d76c3f0b">Unit::SetHover</a></div><div class="ttdeci">virtual bool SetHover(bool enable, bool packetOnly=false, bool updateAnimationTier=true)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:20669</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l20669">Unit::SetHover()</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a58e57c5d8044c555227fffca09a1c1c5" name="a58e57c5d8044c555227fffca09a1c1c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58e57c5d8044c555227fffca09a1c1c5">&#9670;&#160;</a></span>HandleAuraIncreaseBaseHealthPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraIncreaseBaseHealthPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4798</span>{</div>
<div class="line"><span class="lineno"> 4799</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4800</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4801</span> </div>
<div class="line"><span class="lineno"> 4802</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4803</span> </div>
<div class="line"><span class="lineno"> 4804</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeabb35437d15ab9bfc3b7dbf7bac7c0dee">BASE_PCT</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4805</span>}</div>
<div class="ttc" id="aa03092_html_a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f"><div class="ttname"><a href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_STAT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:46</div></div>
<div class="ttc" id="aa03515_html_a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d"><div class="ttname"><a href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a></div><div class="ttdeci">@ UNIT_MOD_HEALTH</div><div class="ttdef"><b>Definition:</b> Unit.h:148</div></div>
<div class="ttc" id="aa03515_html_aa21edecdaa2e077b2b87bbe5f2b2e7eeabb35437d15ab9bfc3b7dbf7bac7c0dee"><div class="ttname"><a href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeabb35437d15ab9bfc3b7dbf7bac7c0dee">BASE_PCT</a></div><div class="ttdeci">@ BASE_PCT</div><div class="ttdef"><b>Definition:</b> Unit.h:127</div></div>
<div class="ttc" id="aa08518_html_a814f9f4408cbea1438a89d09e980c5fc"><div class="ttname"><a href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">Unit::HandleStatModifier</a></div><div class="ttdeci">bool HandleStatModifier(UnitMods unitMod, UnitModifierType modifierType, float amount, bool apply)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:15198</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00127">BASE_PCT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, and <a class="el" href="../../#l00148">UNIT_MOD_HEALTH</a>.</p>

</div>
</div>
<a id="af91c6e2c16b5038cadfed381022dad10" name="af91c6e2c16b5038cadfed381022dad10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af91c6e2c16b5038cadfed381022dad10">&#9670;&#160;</a></span>HandleAuraLinked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraLinked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6054</span>{</div>
<div class="line"><span class="lineno"> 6055</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 6056</span> </div>
<div class="line"><span class="lineno"> 6057</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggeredSpellId = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellIdForDifficulty(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].TriggerSpell, target);</div>
<div class="line"><span class="lineno"> 6058</span>    <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* triggeredSpellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggeredSpellId);</div>
<div class="line"><span class="lineno"> 6059</span>    <span class="keywordflow">if</span> (!triggeredSpellInfo)</div>
<div class="line"><span class="lineno"> 6060</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6061</span> </div>
<div class="line"><span class="lineno"> 6062</span>    <span class="keywordflow">if</span> (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>)</div>
<div class="line"><span class="lineno"> 6063</span>    {</div>
<div class="line"><span class="lineno"> 6064</span>        <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 6065</span>        {</div>
<div class="line"><span class="lineno"> 6066</span>            <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = triggeredSpellInfo-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a4c7c234798883a938f264f5ef9825e0a">NeedsToBeTriggeredByCaster</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()) ? <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>() : target;</div>
<div class="line"><span class="lineno"> 6067</span> </div>
<div class="line"><span class="lineno"> 6068</span>            <span class="keywordflow">if</span> (!caster)</div>
<div class="line"><span class="lineno"> 6069</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6070</span>            <span class="comment">// If amount avalible cast with basepoints (Crypt Fever for example)</span></div>
<div class="line"><span class="lineno"> 6071</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><span class="lineno"> 6072</span>                caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, triggeredSpellId, &amp;<a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6073</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 6074</span>                caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, triggeredSpellId, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6075</span>        }</div>
<div class="line"><span class="lineno"> 6076</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 6077</span>        {</div>
<div class="line"><span class="lineno"> 6078</span>            <a class="code hl_class" href="../../db/d40/a08190.html">ObjectGuid</a> casterGUID = triggeredSpellInfo-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a4c7c234798883a938f264f5ef9825e0a">NeedsToBeTriggeredByCaster</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()) ? <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>() : target-&gt;GetGUID();</div>
<div class="line"><span class="lineno"> 6079</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(triggeredSpellId, casterGUID, 0, aurApp-&gt;GetRemoveMode());</div>
<div class="line"><span class="lineno"> 6080</span>        }</div>
<div class="line"><span class="lineno"> 6081</span>    }</div>
<div class="line"><span class="lineno"> 6082</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a> &amp;&amp; apply)</div>
<div class="line"><span class="lineno"> 6083</span>    {</div>
<div class="line"><span class="lineno"> 6084</span>        <a class="code hl_class" href="../../db/d40/a08190.html">ObjectGuid</a> casterGUID = triggeredSpellInfo-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a4c7c234798883a938f264f5ef9825e0a">NeedsToBeTriggeredByCaster</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()) ? <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>() : target-&gt;GetGUID();</div>
<div class="line"><span class="lineno"> 6085</span>        <span class="comment">// change the stack amount to be equal to stack amount of our aura</span></div>
<div class="line"><span class="lineno"> 6086</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../df/d4a/a10794.html">Aura</a>* triggeredAura = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a135e4d345c338da83450a60528f71222">GetAura</a>(triggeredSpellId, casterGUID))</div>
<div class="line"><span class="lineno"> 6087</span>            triggeredAura-&gt;ModStackAmount(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetStackAmount() - triggeredAura-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>());</div>
<div class="line"><span class="lineno"> 6088</span>    }</div>
<div class="line"><span class="lineno"> 6089</span>}</div>
<div class="ttc" id="aa08518_html_a1be09c524dfdd2c3538f2ae977c58399"><div class="ttname"><a href="../../db/df9/a08518.html#a1be09c524dfdd2c3538f2ae977c58399">Unit::RemoveAura</a></div><div class="ttdeci">void RemoveAura(AuraApplicationMap::iterator &amp;i, AuraRemoveMode mode=AURA_REMOVE_BY_DEFAULT)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4776</div></div>
<div class="ttc" id="aa08518_html_a51ec81e114bf82a2485ba9f66200afd2"><div class="ttname"><a href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">Unit::CastCustomSpell</a></div><div class="ttdeci">SpellCastResult CastCustomSpell(Unit *victim, uint32 spellId, int32 const *bp0, int32 const *bp1, int32 const *bp2, bool triggered, Item *castItem=nullptr, AuraEffect const *triggeredByAura=nullptr, ObjectGuid originalCaster=ObjectGuid::Empty)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:1224</div></div>
<div class="ttc" id="aa10898_html_a4c7c234798883a938f264f5ef9825e0a"><div class="ttname"><a href="../../d2/db6/a10898.html#a4c7c234798883a938f264f5ef9825e0a">SpellInfo::NeedsToBeTriggeredByCaster</a></div><div class="ttdeci">bool NeedsToBeTriggeredByCaster(SpellInfo const *triggeringSpell, uint8 effIndex=MAX_SPELL_EFFECTS) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1038</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00045">AURA_EFFECT_HANDLE_REAPPLY</a>, <a class="el" href="../../#l01224">Unit::CastCustomSpell()</a>, <a class="el" href="../../#l01167">Unit::CastSpell()</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l05581">Unit::GetAura()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../#l00148">Aura::GetStackAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l00146">m_effIndex</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l01038">SpellInfo::NeedsToBeTriggeredByCaster()</a>, <a class="el" href="../../#l04776">Unit::RemoveAura()</a>, and <a class="el" href="../../#l00825">sSpellMgr</a>.</p>

</div>
</div>
<a id="ac585c3cd6f893f888463d8de7fbc4b2f" name="ac585c3cd6f893f888463d8de7fbc4b2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac585c3cd6f893f888463d8de7fbc4b2f">&#9670;&#160;</a></span>HandleAuraModAttackPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModAttackPower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5100</span>{</div>
<div class="line"><span class="lineno"> 5101</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5102</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5103</span> </div>
<div class="line"><span class="lineno"> 5104</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5105</span> </div>
<div class="line"><span class="lineno"> 5106</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2520001e4fe2a621d4b6b232413b5a73">UNIT_MOD_ATTACK_POWER</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5107</span>}</div>
<div class="ttc" id="aa03515_html_a4c5336cd4be5f0162bd4874b0a1e5bdea2520001e4fe2a621d4b6b232413b5a73"><div class="ttname"><a href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2520001e4fe2a621d4b6b232413b5a73">UNIT_MOD_ATTACK_POWER</a></div><div class="ttdeci">@ UNIT_MOD_ATTACK_POWER</div><div class="ttdef"><b>Definition:</b> Unit.h:163</div></div>
<div class="ttc" id="aa03515_html_aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c"><div class="ttname"><a href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a></div><div class="ttdeci">@ TOTAL_VALUE</div><div class="ttdef"><b>Definition:</b> Unit.h:128</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00128">TOTAL_VALUE</a>, and <a class="el" href="../../#l00163">UNIT_MOD_ATTACK_POWER</a>.</p>

</div>
</div>
<a id="aab17b1ef9a6932ad13b43b0ed377e044" name="aab17b1ef9a6932ad13b43b0ed377e044"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab17b1ef9a6932ad13b43b0ed377e044">&#9670;&#160;</a></span>HandleAuraModAttackPowerOfArmor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModAttackPowerOfArmor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5165</span>{</div>
<div class="line"><span class="lineno"> 5166</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5167</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5168</span> </div>
<div class="line"><span class="lineno"> 5169</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5170</span> </div>
<div class="line"><span class="lineno"> 5171</span>    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><span class="lineno"> 5172</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5173</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af38c592a982085b6385131f9c691eca7">UpdateAttackPowerAndDamage</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 5174</span>}</div>
<div class="ttc" id="aa08386_html_af38c592a982085b6385131f9c691eca7"><div class="ttname"><a href="../../d0/dc6/a08386.html#af38c592a982085b6385131f9c691eca7">Player::UpdateAttackPowerAndDamage</a></div><div class="ttdeci">void UpdateAttackPowerAndDamage(bool ranged=false) override</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:330</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00330">Player::UpdateAttackPowerAndDamage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l05159">HandleAuraModAttackPowerOfStatPercent()</a>.</p>

</div>
</div>
<a id="ad2a3d61e37b7ed3cee1fd37d41d6ba59" name="ad2a3d61e37b7ed3cee1fd37d41d6ba59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a3d61e37b7ed3cee1fd37d41d6ba59">&#9670;&#160;</a></span>HandleAuraModAttackPowerOfStatPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModAttackPowerOfStatPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5160</span>{</div>
<div class="line"><span class="lineno"> 5161</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#aab17b1ef9a6932ad13b43b0ed377e044">HandleAuraModAttackPowerOfArmor</a>(aurApp, mode, apply);</div>
<div class="line"><span class="lineno"> 5162</span>}</div>
<div class="ttc" id="aa10782_html_aab17b1ef9a6932ad13b43b0ed377e044"><div class="ttname"><a href="../../d6/d2f/a10782.html#aab17b1ef9a6932ad13b43b0ed377e044">AuraEffect::HandleAuraModAttackPowerOfArmor</a></div><div class="ttdeci">void HandleAuraModAttackPowerOfArmor(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:5164</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l05164">HandleAuraModAttackPowerOfArmor()</a>.</p>

</div>
</div>
<a id="a40615fe10569d7caed175b71339ae1cf" name="a40615fe10569d7caed175b71339ae1cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40615fe10569d7caed175b71339ae1cf">&#9670;&#160;</a></span>HandleAuraModAttackPowerPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModAttackPowerPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5123</span>{</div>
<div class="line"><span class="lineno"> 5124</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5125</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5126</span> </div>
<div class="line"><span class="lineno"> 5127</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5128</span> </div>
<div class="line"><span class="lineno"> 5129</span>    <span class="comment">//UNIT_FIELD_ATTACK_POWER_MULTIPLIER = multiplier - 1</span></div>
<div class="line"><span class="lineno"> 5130</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2520001e4fe2a621d4b6b232413b5a73">UNIT_MOD_ATTACK_POWER</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5131</span>}</div>
<div class="ttc" id="aa03515_html_aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d"><div class="ttname"><a href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a></div><div class="ttdeci">@ TOTAL_PCT</div><div class="ttdef"><b>Definition:</b> Unit.h:129</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00129">TOTAL_PCT</a>, and <a class="el" href="../../#l00163">UNIT_MOD_ATTACK_POWER</a>.</p>

</div>
</div>
<a id="acedcf3811fd678ac5192d68fd34aa176" name="acedcf3811fd678ac5192d68fd34aa176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acedcf3811fd678ac5192d68fd34aa176">&#9670;&#160;</a></span>HandleAuraModBaseResistancePCT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModBaseResistancePCT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4356</span>{</div>
<div class="line"><span class="lineno"> 4357</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4358</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4359</span> </div>
<div class="line"><span class="lineno"> 4360</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4361</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a3bb8a71f4ae9af551f71e9eb2c9c3325">int8</a> x = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; x &lt; <a class="code hl_variable" href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; x++)</div>
<div class="line"><span class="lineno"> 4362</span>    {</div>
<div class="line"><span class="lineno"> 4363</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(1 &lt;&lt; x))</div>
<div class="line"><span class="lineno"> 4364</span>        {</div>
<div class="line"><span class="lineno"> 4365</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a> + x), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeabb35437d15ab9bfc3b7dbf7bac7c0dee">BASE_PCT</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4366</span>        }</div>
<div class="line"><span class="lineno"> 4367</span>    }</div>
<div class="line"><span class="lineno"> 4368</span>}</div>
<div class="ttc" id="aa00497_html_a3bb8a71f4ae9af551f71e9eb2c9c3325"><div class="ttname"><a href="../../d4/d1e/a00497.html#a3bb8a71f4ae9af551f71e9eb2c9c3325">int8</a></div><div class="ttdeci">std::int8_t int8</div><div class="ttdef"><b>Definition:</b> Define.h:105</div></div>
<div class="ttc" id="aa02771_html_a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af"><div class="ttname"><a href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a></div><div class="ttdeci">@ SPELL_SCHOOL_NORMAL</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:283</div></div>
<div class="ttc" id="aa02771_html_a3d2e33bfddb1e3c28157eb6d136bfd28"><div class="ttname"><a href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a></div><div class="ttdeci">constexpr auto MAX_SPELL_SCHOOL</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:292</div></div>
<div class="ttc" id="aa03515_html_a4c5336cd4be5f0162bd4874b0a1e5bde"><div class="ttname"><a href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a></div><div class="ttdeci">UnitMods</div><div class="ttdef"><b>Definition:</b> Unit.h:142</div></div>
<div class="ttc" id="aa03515_html_a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2"><div class="ttname"><a href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a></div><div class="ttdeci">@ UNIT_MOD_RESISTANCE_START</div><div class="ttdef"><b>Definition:</b> Unit.h:172</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00127">BASE_PCT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00292">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../#l00283">SPELL_SCHOOL_NORMAL</a>, and <a class="el" href="../../#l00172">UNIT_MOD_RESISTANCE_START</a>.</p>

</div>
</div>
<a id="a037803186b7a5a458d1b7d451fc57d2b" name="a037803186b7a5a458d1b7d451fc57d2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a037803186b7a5a458d1b7d451fc57d2b">&#9670;&#160;</a></span>HandleAuraModBlockPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModBlockPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4841</span>{</div>
<div class="line"><span class="lineno"> 4842</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4843</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4844</span> </div>
<div class="line"><span class="lineno"> 4845</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4846</span> </div>
<div class="line"><span class="lineno"> 4847</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4848</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4849</span> </div>
<div class="line"><span class="lineno"> 4850</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a4020949ee431d0e1c3674a320412bc00">UpdateBlockPercentage</a>();</div>
<div class="line"><span class="lineno"> 4851</span>}</div>
<div class="ttc" id="aa08386_html_a4020949ee431d0e1c3674a320412bc00"><div class="ttname"><a href="../../d0/dc6/a08386.html#a4020949ee431d0e1c3674a320412bc00">Player::UpdateBlockPercentage</a></div><div class="ttdeci">void UpdateBlockPercentage()</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:616</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00616">Player::UpdateBlockPercentage()</a>.</p>

</div>
</div>
<a id="af7d61f76c6791e1a34f20b87efb425bc" name="af7d61f76c6791e1a34f20b87efb425bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7d61f76c6791e1a34f20b87efb425bc">&#9670;&#160;</a></span>HandleAuraModCritPct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModCritPct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4949</span>{</div>
<div class="line"><span class="lineno"> 4950</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4951</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4952</span> </div>
<div class="line"><span class="lineno"> 4953</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4954</span> </div>
<div class="line"><span class="lineno"> 4955</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4956</span>    {</div>
<div class="line"><span class="lineno"> 4957</span>        target-&gt;<a class="code hl_variable" href="../../db/df9/a08518.html#a92418193751a8dc7679b00f1d9d07d35">m_baseSpellCritChance</a> += (<a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() : -<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><span class="lineno"> 4958</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4959</span>    }</div>
<div class="line"><span class="lineno"> 4960</span> </div>
<div class="line"><span class="lineno"> 4961</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a938646605f1e70b8f1613bf9bdb78b4fa75a0f4d4487127ec7c34e7f0f547efb4">CRIT_PERCENTAGE</a>,         <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4962</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a938646605f1e70b8f1613bf9bdb78b4fa379fa05fe54b3ef17e6e9e2f159b9a8f">OFFHAND_CRIT_PERCENTAGE</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4963</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a938646605f1e70b8f1613bf9bdb78b4faa6c2bba993427bbcd1ee001e9730c59d">RANGED_CRIT_PERCENTAGE</a>,  <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4964</span> </div>
<div class="line"><span class="lineno"> 4965</span>    <span class="comment">// included in Player::UpdateSpellCritChance calculation</span></div>
<div class="line"><span class="lineno"> 4966</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a06380d627aa5fee572465587fbdd53e4">UpdateAllSpellCritChances</a>();</div>
<div class="line"><span class="lineno"> 4967</span>}</div>
<div class="ttc" id="aa03515_html_a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177"><div class="ttname"><a href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a></div><div class="ttdeci">@ FLAT_MOD</div><div class="ttdef"><b>Definition:</b> Unit.h:189</div></div>
<div class="ttc" id="aa03515_html_a938646605f1e70b8f1613bf9bdb78b4fa379fa05fe54b3ef17e6e9e2f159b9a8f"><div class="ttname"><a href="../../de/d3d/a03515.html#a938646605f1e70b8f1613bf9bdb78b4fa379fa05fe54b3ef17e6e9e2f159b9a8f">OFFHAND_CRIT_PERCENTAGE</a></div><div class="ttdeci">@ OFFHAND_CRIT_PERCENTAGE</div><div class="ttdef"><b>Definition:</b> Unit.h:182</div></div>
<div class="ttc" id="aa03515_html_a938646605f1e70b8f1613bf9bdb78b4fa75a0f4d4487127ec7c34e7f0f547efb4"><div class="ttname"><a href="../../de/d3d/a03515.html#a938646605f1e70b8f1613bf9bdb78b4fa75a0f4d4487127ec7c34e7f0f547efb4">CRIT_PERCENTAGE</a></div><div class="ttdeci">@ CRIT_PERCENTAGE</div><div class="ttdef"><b>Definition:</b> Unit.h:180</div></div>
<div class="ttc" id="aa03515_html_a938646605f1e70b8f1613bf9bdb78b4faa6c2bba993427bbcd1ee001e9730c59d"><div class="ttname"><a href="../../de/d3d/a03515.html#a938646605f1e70b8f1613bf9bdb78b4faa6c2bba993427bbcd1ee001e9730c59d">RANGED_CRIT_PERCENTAGE</a></div><div class="ttdeci">@ RANGED_CRIT_PERCENTAGE</div><div class="ttdef"><b>Definition:</b> Unit.h:181</div></div>
<div class="ttc" id="aa04704_html_a6177d7ac84a4ea6819c57a124345540e"><div class="ttname"><a href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">ByteConverter::apply</a></div><div class="ttdeci">void apply(T *val)</div><div class="ttdef"><b>Definition:</b> ByteConverter.h:40</div></div>
<div class="ttc" id="aa08386_html_a06380d627aa5fee572465587fbdd53e4"><div class="ttname"><a href="../../d0/dc6/a08386.html#a06380d627aa5fee572465587fbdd53e4">Player::UpdateAllSpellCritChances</a></div><div class="ttdeci">void UpdateAllSpellCritChances()</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:871</div></div>
<div class="ttc" id="aa08386_html_af85e4f061186ef03c3561aaf1a99a72d"><div class="ttname"><a href="../../d0/dc6/a08386.html#af85e4f061186ef03c3561aaf1a99a72d">Player::HandleBaseModValue</a></div><div class="ttdeci">void HandleBaseModValue(BaseModGroup modGroup, BaseModType modType, float amount, bool apply)</div><div class="ttdef"><b>Definition:</b> Player.cpp:5013</div></div>
<div class="ttc" id="aa08518_html_a92418193751a8dc7679b00f1d9d07d35"><div class="ttname"><a href="../../db/df9/a08518.html#a92418193751a8dc7679b00f1d9d07d35">Unit::m_baseSpellCritChance</a></div><div class="ttdeci">int32 m_baseSpellCritChance</div><div class="ttdef"><b>Definition:</b> Unit.h:1904</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00180">CRIT_PERCENTAGE</a>, <a class="el" href="../../#l00189">FLAT_MOD</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05013">Player::HandleBaseModValue()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l01904">Unit::m_baseSpellCritChance</a>, <a class="el" href="../../#l00182">OFFHAND_CRIT_PERCENTAGE</a>, <a class="el" href="../../#l00181">RANGED_CRIT_PERCENTAGE</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00871">Player::UpdateAllSpellCritChances()</a>.</p>

</div>
</div>
<a id="a00cc9725cd708174a15de260fef84bda" name="a00cc9725cd708174a15de260fef84bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00cc9725cd708174a15de260fef84bda">&#9670;&#160;</a></span>HandleAuraModDecreaseSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModDecreaseSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3767</span>{</div>
<div class="line"><span class="lineno"> 3768</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3769</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3770</span> </div>
<div class="line"><span class="lineno"> 3771</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3772</span> </div>
<div class="line"><span class="lineno"> 3773</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4af13a74f1c064b7481beaace4e25531f1">MOVE_WALK</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3774</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de">MOVE_RUN</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3775</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4a611a24e7db53ef46584dcfb70d8343e5">MOVE_SWIM</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3776</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4a2461b4a7be489c54989eff2c87ae1961">MOVE_FLIGHT</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3777</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4ae5032445bbfb822102cc813971fbb6e2">MOVE_RUN_BACK</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3778</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4ac2a44df3d73187f2e899d731f1e84908">MOVE_SWIM_BACK</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3779</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4aace23680916adc6b61fe44054c841e57">MOVE_FLIGHT_BACK</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3780</span> </div>
<div class="line"><span class="lineno"> 3781</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* targetPlayer = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno"> 3782</span>    {</div>
<div class="line"><span class="lineno"> 3783</span>        <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><span class="lineno"> 3784</span>    }</div>
<div class="line"><span class="lineno"> 3785</span>}</div>
<div class="ttc" id="aa03521_html_af91f7580a89722b7dc45a018bb46fce4a2461b4a7be489c54989eff2c87ae1961"><div class="ttname"><a href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4a2461b4a7be489c54989eff2c87ae1961">MOVE_FLIGHT</a></div><div class="ttdeci">@ MOVE_FLIGHT</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:334</div></div>
<div class="ttc" id="aa03521_html_af91f7580a89722b7dc45a018bb46fce4a611a24e7db53ef46584dcfb70d8343e5"><div class="ttname"><a href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4a611a24e7db53ef46584dcfb70d8343e5">MOVE_SWIM</a></div><div class="ttdeci">@ MOVE_SWIM</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:331</div></div>
<div class="ttc" id="aa03521_html_af91f7580a89722b7dc45a018bb46fce4aace23680916adc6b61fe44054c841e57"><div class="ttname"><a href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4aace23680916adc6b61fe44054c841e57">MOVE_FLIGHT_BACK</a></div><div class="ttdeci">@ MOVE_FLIGHT_BACK</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:335</div></div>
<div class="ttc" id="aa03521_html_af91f7580a89722b7dc45a018bb46fce4ac2a44df3d73187f2e899d731f1e84908"><div class="ttname"><a href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4ac2a44df3d73187f2e899d731f1e84908">MOVE_SWIM_BACK</a></div><div class="ttdeci">@ MOVE_SWIM_BACK</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:332</div></div>
<div class="ttc" id="aa03521_html_af91f7580a89722b7dc45a018bb46fce4ae5032445bbfb822102cc813971fbb6e2"><div class="ttname"><a href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4ae5032445bbfb822102cc813971fbb6e2">MOVE_RUN_BACK</a></div><div class="ttdeci">@ MOVE_RUN_BACK</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:330</div></div>
<div class="ttc" id="aa03521_html_af91f7580a89722b7dc45a018bb46fce4af13a74f1c064b7481beaace4e25531f1"><div class="ttname"><a href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4af13a74f1c064b7481beaace4e25531f1">MOVE_WALK</a></div><div class="ttdeci">@ MOVE_WALK</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:328</div></div>
<div class="ttc" id="aa08518_html_ac85eb152580735addb4e7022ae2b3d4c"><div class="ttname"><a href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">Unit::UpdateSpeed</a></div><div class="ttdeci">void UpdateSpeed(UnitMoveType mtype, bool forced)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14245</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00334">MOVE_FLIGHT</a>, <a class="el" href="../../#l00335">MOVE_FLIGHT_BACK</a>, <a class="el" href="../../#l00329">MOVE_RUN</a>, <a class="el" href="../../#l00330">MOVE_RUN_BACK</a>, <a class="el" href="../../#l00331">MOVE_SWIM</a>, <a class="el" href="../../#l00332">MOVE_SWIM_BACK</a>, <a class="el" href="../../#l00328">MOVE_WALK</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l14245">Unit::UpdateSpeed()</a>.</p>

</div>
</div>
<a id="a8c25ece7266e707b626dbad6de6be66e" name="a8c25ece7266e707b626dbad6de6be66e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c25ece7266e707b626dbad6de6be66e">&#9670;&#160;</a></span>HandleAuraModDisarm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModDisarm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2951</span>{</div>
<div class="line"><span class="lineno"> 2952</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 2953</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2954</span> </div>
<div class="line"><span class="lineno"> 2955</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 2956</span> </div>
<div class="line"><span class="lineno"> 2957</span>    <a class="code hl_enumeration" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799">AuraType</a> type = <a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>();</div>
<div class="line"><span class="lineno"> 2958</span> </div>
<div class="line"><span class="lineno"> 2959</span>    <span class="comment">//Prevent handling aura twice</span></div>
<div class="line"><span class="lineno"> 2960</span>    <span class="keywordflow">if</span> ((apply) ? target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(type).size() &gt; 1 : target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(type))</div>
<div class="line"><span class="lineno"> 2961</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2962</span> </div>
<div class="line"><span class="lineno"> 2963</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> field, flag, slot;</div>
<div class="line"><span class="lineno"> 2964</span>    <a class="code hl_enumeration" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352">WeaponAttackType</a> attType;</div>
<div class="line"><span class="lineno"> 2965</span>    <span class="keywordflow">switch</span> (type)</div>
<div class="line"><span class="lineno"> 2966</span>    {</div>
<div class="line"><span class="lineno"> 2967</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1e7e5c8d0e92113d05321ff57d81578b">SPELL_AURA_MOD_DISARM</a>:</div>
<div class="line"><span class="lineno"> 2968</span>            field = <a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>;</div>
<div class="line"><span class="lineno"> 2969</span>            flag = <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a692ab9362c9a13074521ceebca70e94b">UNIT_FLAG_DISARMED</a>;</div>
<div class="line"><span class="lineno"> 2970</span>            slot = <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd">EQUIPMENT_SLOT_MAINHAND</a>;</div>
<div class="line"><span class="lineno"> 2971</span>            attType = <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>;</div>
<div class="line"><span class="lineno"> 2972</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2973</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6f4650df4228c83bc7c1bdcb059fcf81">SPELL_AURA_MOD_DISARM_OFFHAND</a>:</div>
<div class="line"><span class="lineno"> 2974</span>            field = <a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>;</div>
<div class="line"><span class="lineno"> 2975</span>            flag = <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682ae65e45a8c442707dc45fed1c9f456daa">UNIT_FLAG2_DISARM_OFFHAND</a>;</div>
<div class="line"><span class="lineno"> 2976</span>            slot = <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afab44cb19f2d7a24d14ef74748716cd731">EQUIPMENT_SLOT_OFFHAND</a>;</div>
<div class="line"><span class="lineno"> 2977</span>            attType = <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>;</div>
<div class="line"><span class="lineno"> 2978</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2979</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a0ead1d21561a1d51aa165ba0fbbf03f0">SPELL_AURA_MOD_DISARM_RANGED</a>:</div>
<div class="line"><span class="lineno"> 2980</span>            field = <a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a>;</div>
<div class="line"><span class="lineno"> 2981</span>            flag = <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682af67a9a68cd8ef74a5993e9a64fcd07cd">UNIT_FLAG2_DISARM_RANGED</a>;</div>
<div class="line"><span class="lineno"> 2982</span>            slot = <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afafc73f33a54a6e48f474648a2ad5bd72a">EQUIPMENT_SLOT_RANGED</a>;</div>
<div class="line"><span class="lineno"> 2983</span>            attType = <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352aa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>;</div>
<div class="line"><span class="lineno"> 2984</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2985</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2986</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2987</span>    }</div>
<div class="line"><span class="lineno"> 2988</span> </div>
<div class="line"><span class="lineno"> 2989</span>    <span class="comment">// if disarm aura is to be removed, remove the flag first to reapply damage/aura mods</span></div>
<div class="line"><span class="lineno"> 2990</span>    <span class="keywordflow">if</span> (!apply)</div>
<div class="line"><span class="lineno"> 2991</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(field, flag);</div>
<div class="line"><span class="lineno"> 2992</span> </div>
<div class="line"><span class="lineno"> 2993</span>    <span class="comment">// Handle damage modification, shapeshifted druids are not affected</span></div>
<div class="line"><span class="lineno"> 2994</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#abbc1994b31e8c2706a99c0d35269b89c">IsInFeralForm</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a373a25c8d6ff3ca2f5653267c1269ad4">GetShapeshiftForm</a>() == <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cab77bbfbe52ce8a4876d6c762735cfbc9">FORM_GHOSTWOLF</a>))</div>
<div class="line"><span class="lineno"> 2995</span>    {</div>
<div class="line"><span class="lineno"> 2996</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d24/a08098.html">Item</a>* pItem = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6e31042962f16c90a443ff772363d22f">GetItemByPos</a>(<a class="code hl_define" href="../../d7/d13/a03365.html#ad3dd8ed856e16139eaa67147d40cf24e">INVENTORY_SLOT_BAG_0</a>, slot))</div>
<div class="line"><span class="lineno"> 2997</span>        {</div>
<div class="line"><span class="lineno"> 2998</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> attacktype = <a class="code hl_function" href="../../d0/dc6/a08386.html#aa8ac03d330ab1472d35f520e60454022">Player::GetAttackBySlot</a>(slot);</div>
<div class="line"><span class="lineno"> 2999</span> </div>
<div class="line"><span class="lineno"> 3000</span>            <span class="keywordflow">if</span> (attacktype &lt; <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a0f966a2f1219b75a945c686c3cad21e4">MAX_ATTACK</a>)</div>
<div class="line"><span class="lineno"> 3001</span>            {</div>
<div class="line"><span class="lineno"> 3002</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6d26b6e2d8c1f5d9532a739010594c68">_ApplyWeaponDamage</a>(slot, pItem-&gt;GetTemplate(), <span class="keyword">nullptr</span>, !apply);</div>
<div class="line"><span class="lineno"> 3003</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aa5330c83cf8abe59375e5aeac758362f">_ApplyWeaponDependentAuraMods</a>(pItem, <a class="code hl_enumeration" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352">WeaponAttackType</a>(attacktype), !apply);</div>
<div class="line"><span class="lineno"> 3004</span>            }</div>
<div class="line"><span class="lineno"> 3005</span>        }</div>
<div class="line"><span class="lineno"> 3006</span>    }</div>
<div class="line"><span class="lineno"> 3007</span> </div>
<div class="line"><span class="lineno"> 3008</span>    <span class="comment">// if disarm effects should be applied, wait to set flag until damage mods are unapplied</span></div>
<div class="line"><span class="lineno"> 3009</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3010</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(field, flag);</div>
<div class="line"><span class="lineno"> 3011</span> </div>
<div class="line"><span class="lineno"> 3012</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aacc8ee332f66effdc0d77c126dae1961">IsCreature</a>() &amp;&amp; target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>()-&gt;<a class="code hl_function" href="../../d1/d66/a07770.html#a1e4f1ed588789ac22b0833dceb1be880">GetCurrentEquipmentId</a>())</div>
<div class="line"><span class="lineno"> 3013</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a7df3efe1a18d2562a04ca1f91d03532e">UpdateDamagePhysical</a>(attType);</div>
<div class="line"><span class="lineno"> 3014</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a0ead1d21561a1d51aa165ba0fbbf03f0"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a0ead1d21561a1d51aa165ba0fbbf03f0">SPELL_AURA_MOD_DISARM_RANGED</a></div><div class="ttdeci">@ SPELL_AURA_MOD_DISARM_RANGED</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:341</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a1e7e5c8d0e92113d05321ff57d81578b"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1e7e5c8d0e92113d05321ff57d81578b">SPELL_AURA_MOD_DISARM</a></div><div class="ttdeci">@ SPELL_AURA_MOD_DISARM</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:130</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a6f4650df4228c83bc7c1bdcb059fcf81"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6f4650df4228c83bc7c1bdcb059fcf81">SPELL_AURA_MOD_DISARM_OFFHAND</a></div><div class="ttdeci">@ SPELL_AURA_MOD_DISARM_OFFHAND</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:317</div></div>
<div class="ttc" id="aa03365_html_a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd"><div class="ttname"><a href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd">EQUIPMENT_SLOT_MAINHAND</a></div><div class="ttdeci">@ EQUIPMENT_SLOT_MAINHAND</div><div class="ttdef"><b>Definition:</b> Player.h:690</div></div>
<div class="ttc" id="aa03365_html_a93b8041f948d575ef2d23746324a37afab44cb19f2d7a24d14ef74748716cd731"><div class="ttname"><a href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afab44cb19f2d7a24d14ef74748716cd731">EQUIPMENT_SLOT_OFFHAND</a></div><div class="ttdeci">@ EQUIPMENT_SLOT_OFFHAND</div><div class="ttdef"><b>Definition:</b> Player.h:691</div></div>
<div class="ttc" id="aa03365_html_a93b8041f948d575ef2d23746324a37afafc73f33a54a6e48f474648a2ad5bd72a"><div class="ttname"><a href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afafc73f33a54a6e48f474648a2ad5bd72a">EQUIPMENT_SLOT_RANGED</a></div><div class="ttdeci">@ EQUIPMENT_SLOT_RANGED</div><div class="ttdef"><b>Definition:</b> Player.h:692</div></div>
<div class="ttc" id="aa03365_html_ad3dd8ed856e16139eaa67147d40cf24e"><div class="ttname"><a href="../../d7/d13/a03365.html#ad3dd8ed856e16139eaa67147d40cf24e">INVENTORY_SLOT_BAG_0</a></div><div class="ttdeci">#define INVENTORY_SLOT_BAG_0</div><div class="ttdef"><b>Definition:</b> Player.h:670</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6b03ad8147a368bbf29c0b92b12b0679">UNIT_FIELD_FLAGS_2</a></div><div class="ttdeci">@ UNIT_FIELD_FLAGS_2</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:118</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a></div><div class="ttdeci">@ UNIT_FIELD_FLAGS</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:117</div></div>
<div class="ttc" id="aa03515_html_a85524ab4e1fb005ed500bd190f79c352"><div class="ttname"><a href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352">WeaponAttackType</a></div><div class="ttdeci">WeaponAttackType</div><div class="ttdef"><b>Definition:</b> Unit.h:208</div></div>
<div class="ttc" id="aa03515_html_a85524ab4e1fb005ed500bd190f79c352a0f966a2f1219b75a945c686c3cad21e4"><div class="ttname"><a href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a0f966a2f1219b75a945c686c3cad21e4">MAX_ATTACK</a></div><div class="ttdeci">@ MAX_ATTACK</div><div class="ttdef"><b>Definition:</b> Unit.h:212</div></div>
<div class="ttc" id="aa03521_html_a3320fdc05dc07c396f8943de4018e682ae65e45a8c442707dc45fed1c9f456daa"><div class="ttname"><a href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682ae65e45a8c442707dc45fed1c9f456daa">UNIT_FLAG2_DISARM_OFFHAND</a></div><div class="ttdeci">@ UNIT_FLAG2_DISARM_OFFHAND</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:275</div></div>
<div class="ttc" id="aa03521_html_a3320fdc05dc07c396f8943de4018e682af67a9a68cd8ef74a5993e9a64fcd07cd"><div class="ttname"><a href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682af67a9a68cd8ef74a5993e9a64fcd07cd">UNIT_FLAG2_DISARM_RANGED</a></div><div class="ttdeci">@ UNIT_FLAG2_DISARM_RANGED</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:277</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547cab77bbfbe52ce8a4876d6c762735cfbc9"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cab77bbfbe52ce8a4876d6c762735cfbc9">FORM_GHOSTWOLF</a></div><div class="ttdeci">@ FORM_GHOSTWOLF</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:85</div></div>
<div class="ttc" id="aa03521_html_affdd0d554c8bcaaa85a879f5a9d60934a692ab9362c9a13074521ceebca70e94b"><div class="ttname"><a href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a692ab9362c9a13074521ceebca70e94b">UNIT_FLAG_DISARMED</a></div><div class="ttdeci">@ UNIT_FLAG_DISARMED</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:250</div></div>
<div class="ttc" id="aa07770_html_a1e4f1ed588789ac22b0833dceb1be880"><div class="ttname"><a href="../../d1/d66/a07770.html#a1e4f1ed588789ac22b0833dceb1be880">Creature::GetCurrentEquipmentId</a></div><div class="ttdeci">uint8 GetCurrentEquipmentId()</div><div class="ttdef"><b>Definition:</b> Creature.h:194</div></div>
<div class="ttc" id="aa08142_html_a79a7a80acdec46961b4d8aaead4ae631"><div class="ttname"><a href="../../df/d2d/a08142.html#a79a7a80acdec46961b4d8aaead4ae631">Object::SetFlag</a></div><div class="ttdeci">void SetFlag(uint16 index, uint32 newFlag)</div><div class="ttdef"><b>Definition:</b> Object.cpp:845</div></div>
<div class="ttc" id="aa08142_html_a7e764fbd4b7eca84f80e36e900bca7d3"><div class="ttname"><a href="../../df/d2d/a08142.html#a7e764fbd4b7eca84f80e36e900bca7d3">Object::RemoveFlag</a></div><div class="ttdeci">void RemoveFlag(uint16 index, uint32 oldFlag)</div><div class="ttdef"><b>Definition:</b> Object.cpp:860</div></div>
<div class="ttc" id="aa08386_html_a6d26b6e2d8c1f5d9532a739010594c68"><div class="ttname"><a href="../../d0/dc6/a08386.html#a6d26b6e2d8c1f5d9532a739010594c68">Player::_ApplyWeaponDamage</a></div><div class="ttdeci">void _ApplyWeaponDamage(uint8 slot, ItemTemplate const *proto, ScalingStatValuesEntry const *ssv, bool apply)</div><div class="ttdef"><b>Definition:</b> Player.cpp:6895</div></div>
<div class="ttc" id="aa08386_html_a6e31042962f16c90a443ff772363d22f"><div class="ttname"><a href="../../d0/dc6/a08386.html#a6e31042962f16c90a443ff772363d22f">Player::GetItemByPos</a></div><div class="ttdeci">Item * GetItemByPos(uint16 pos) const</div><div class="ttdef"><b>Definition:</b> PlayerStorage.cpp:441</div></div>
<div class="ttc" id="aa08386_html_aa5330c83cf8abe59375e5aeac758362f"><div class="ttname"><a href="../../d0/dc6/a08386.html#aa5330c83cf8abe59375e5aeac758362f">Player::_ApplyWeaponDependentAuraMods</a></div><div class="ttdeci">void _ApplyWeaponDependentAuraMods(Item *item, WeaponAttackType attackType, bool apply)</div><div class="ttdef"><b>Definition:</b> Player.cpp:7002</div></div>
<div class="ttc" id="aa08386_html_aa8ac03d330ab1472d35f520e60454022"><div class="ttname"><a href="../../d0/dc6/a08386.html#aa8ac03d330ab1472d35f520e60454022">Player::GetAttackBySlot</a></div><div class="ttdeci">static uint8 GetAttackBySlot(uint8 slot)</div><div class="ttdef"><b>Definition:</b> PlayerStorage.cpp:542</div></div>
<div class="ttc" id="aa08518_html_a373a25c8d6ff3ca2f5653267c1269ad4"><div class="ttname"><a href="../../db/df9/a08518.html#a373a25c8d6ff3ca2f5653267c1269ad4">Unit::GetShapeshiftForm</a></div><div class="ttdeci">ShapeshiftForm GetShapeshiftForm() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1771</div></div>
<div class="ttc" id="aa08518_html_a7df3efe1a18d2562a04ca1f91d03532e"><div class="ttname"><a href="../../db/df9/a08518.html#a7df3efe1a18d2562a04ca1f91d03532e">Unit::UpdateDamagePhysical</a></div><div class="ttdeci">virtual void UpdateDamagePhysical(WeaponAttackType attType)</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:60</div></div>
<div class="ttc" id="aa08518_html_abbc1994b31e8c2706a99c0d35269b89c"><div class="ttname"><a href="../../db/df9/a08518.html#abbc1994b31e8c2706a99c0d35269b89c">Unit::IsInFeralForm</a></div><div class="ttdeci">bool IsInFeralForm() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1777</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l06895">Player::_ApplyWeaponDamage()</a>, <a class="el" href="../../#l07002">Player::_ApplyWeaponDependentAuraMods()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l00690">EQUIPMENT_SLOT_MAINHAND</a>, <a class="el" href="../../#l00691">EQUIPMENT_SLOT_OFFHAND</a>, <a class="el" href="../../#l00692">EQUIPMENT_SLOT_RANGED</a>, <a class="el" href="../../#l00085">FORM_GHOSTWOLF</a>, <a class="el" href="../../#l00542">Player::GetAttackBySlot()</a>, <a class="el" href="../../#l01349">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00194">Creature::GetCurrentEquipmentId()</a>, <a class="el" href="../../#l00441">Player::GetItemByPos()</a>, <a class="el" href="../../#l01771">Unit::GetShapeshiftForm()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00670">INVENTORY_SLOT_BAG_0</a>, <a class="el" href="../../#l00201">Object::IsCreature()</a>, <a class="el" href="../../#l01777">Unit::IsInFeralForm()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00212">MAX_ATTACK</a>, <a class="el" href="../../#l00210">OFF_ATTACK</a>, <a class="el" href="../../#l00211">RANGED_ATTACK</a>, <a class="el" href="../../#l00860">Object::RemoveFlag()</a>, <a class="el" href="../../#l00845">Object::SetFlag()</a>, <a class="el" href="../../#l00130">SPELL_AURA_MOD_DISARM</a>, <a class="el" href="../../#l00317">SPELL_AURA_MOD_DISARM_OFFHAND</a>, <a class="el" href="../../#l00341">SPELL_AURA_MOD_DISARM_RANGED</a>, <a class="el" href="../../#l00202">Object::ToCreature()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00117">UNIT_FIELD_FLAGS</a>, <a class="el" href="../../#l00118">UNIT_FIELD_FLAGS_2</a>, <a class="el" href="../../#l00275">UNIT_FLAG2_DISARM_OFFHAND</a>, <a class="el" href="../../#l00277">UNIT_FLAG2_DISARM_RANGED</a>, <a class="el" href="../../#l00250">UNIT_FLAG_DISARMED</a>, and <a class="el" href="../../#l00060">Unit::UpdateDamagePhysical()</a>.</p>

</div>
</div>
<a id="a0c107b074aa0e5e8cfe63d6c73c14803" name="a0c107b074aa0e5e8cfe63d6c73c14803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c107b074aa0e5e8cfe63d6c73c14803">&#9670;&#160;</a></span>HandleAuraModDispelImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModDispelImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4297</span>{</div>
<div class="line"><span class="lineno"> 4298</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 4299</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4300</span> </div>
<div class="line"><span class="lineno"> 4301</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4302</span> </div>
<div class="line"><span class="lineno"> 4303</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#abbcdc4f159d42046acb738e09dee3dd0">ApplySpellDispelImmunity</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#ada2b5e66b650d7a63f70c06a746070d1">DispelType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>()), (apply));</div>
<div class="line"><span class="lineno"> 4304</span>}</div>
<div class="ttc" id="aa02771_html_ada2b5e66b650d7a63f70c06a746070d1"><div class="ttname"><a href="../../d0/dbd/a02771.html#ada2b5e66b650d7a63f70c06a746070d1">DispelType</a></div><div class="ttdeci">DispelType</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1371</div></div>
<div class="ttc" id="aa08518_html_abbcdc4f159d42046acb738e09dee3dd0"><div class="ttname"><a href="../../db/df9/a08518.html#abbcdc4f159d42046acb738e09dee3dd0">Unit::ApplySpellDispelImmunity</a></div><div class="ttdeci">void ApplySpellDispelImmunity(SpellInfo const *spellProto, DispelType type, bool apply)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:13411</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l13411">Unit::ApplySpellDispelImmunity()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../#l00123">m_spellInfo</a>.</p>

</div>
</div>
<a id="a3dd65a07ecb6f2cfdecbed6a15c8ef08" name="a3dd65a07ecb6f2cfdecbed6a15c8ef08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dd65a07ecb6f2cfdecbed6a15c8ef08">&#9670;&#160;</a></span>HandleAuraModDmgImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModDmgImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4287</span>{</div>
<div class="line"><span class="lineno"> 4288</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 4289</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4290</span> </div>
<div class="line"><span class="lineno"> 4291</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4292</span> </div>
<div class="line"><span class="lineno"> 4293</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9aafc08853a1561d6bb484698c33d2e5ce">IMMUNITY_DAMAGE</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), apply);</div>
<div class="line"><span class="lineno"> 4294</span>}</div>
<div class="ttc" id="aa02771_html_a91d505a1e789c6ea6a338f3a3c85b6b9aafc08853a1561d6bb484698c33d2e5ce"><div class="ttname"><a href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9aafc08853a1561d6bb484698c33d2e5ce">IMMUNITY_DAMAGE</a></div><div class="ttdeci">@ IMMUNITY_DAMAGE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1397</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l13384">Unit::ApplySpellImmune()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../#l01397">IMMUNITY_DAMAGE</a>.</p>

</div>
</div>
<a id="a3b46362827d3489a5f34a9d34efa489f" name="a3b46362827d3489a5f34a9d34efa489f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b46362827d3489a5f34a9d34efa489f">&#9670;&#160;</a></span>HandleAuraModDodgePercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModDodgePercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4828</span>{</div>
<div class="line"><span class="lineno"> 4829</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4830</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4831</span> </div>
<div class="line"><span class="lineno"> 4832</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4833</span> </div>
<div class="line"><span class="lineno"> 4834</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4835</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4836</span> </div>
<div class="line"><span class="lineno"> 4837</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a1b8e999c74e225616c6a7bc69c441cdf">UpdateDodgePercentage</a>();</div>
<div class="line"><span class="lineno"> 4838</span>}</div>
<div class="ttc" id="aa08386_html_a1b8e999c74e225616c6a7bc69c441cdf"><div class="ttname"><a href="../../d0/dc6/a08386.html#a1b8e999c74e225616c6a7bc69c441cdf">Player::UpdateDodgePercentage</a></div><div class="ttdeci">void UpdateDodgePercentage()</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:781</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00781">Player::UpdateDodgePercentage()</a>.</p>

</div>
</div>
<a id="a179b35bc601d9b36bc8be2961c0af054" name="a179b35bc601d9b36bc8be2961c0af054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a179b35bc601d9b36bc8be2961c0af054">&#9670;&#160;</a></span>HandleAuraModEffectImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModEffectImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4192</span>{</div>
<div class="line"><span class="lineno"> 4193</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 4194</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4195</span> </div>
<div class="line"><span class="lineno"> 4196</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4197</span> </div>
<div class="line"><span class="lineno"> 4198</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), apply);</div>
<div class="line"><span class="lineno"> 4199</span> </div>
<div class="line"><span class="lineno"> 4200</span>    <span class="comment">// when removing flag aura, handle flag drop</span></div>
<div class="line"><span class="lineno"> 4201</span>    <a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* player = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>();</div>
<div class="line"><span class="lineno"> 4202</span>    <span class="keywordflow">if</span> (!apply &amp;&amp; player &amp;&amp; (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;AuraInterruptFlags &amp; <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>))</div>
<div class="line"><span class="lineno"> 4203</span>    {</div>
<div class="line"><span class="lineno"> 4204</span>        <span class="keywordflow">if</span> (player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a467189aea8a8fb26ef8482254e6f2b34">InBattleground</a>())</div>
<div class="line"><span class="lineno"> 4205</span>        {</div>
<div class="line"><span class="lineno"> 4206</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d5/d31/a07074.html">Battleground</a>* bg = player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a5f17db78f9356bf239b7631ebc38fa2d">GetBattleground</a>())</div>
<div class="line"><span class="lineno"> 4207</span>                bg-&gt;EventPlayerDroppedFlag(player);</div>
<div class="line"><span class="lineno"> 4208</span>        }</div>
<div class="line"><span class="lineno"> 4209</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4210</span>            <a class="code hl_define" href="../../dd/d8c/a04508.html#a7f16e829e6dd717c8a6a20fd1aa783cc">sOutdoorPvPMgr</a>-&gt;HandleDropFlag(player, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Id);</div>
<div class="line"><span class="lineno"> 4211</span>    }</div>
<div class="line"><span class="lineno"> 4212</span>}</div>
<div class="ttc" id="aa02771_html_a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2"><div class="ttname"><a href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a></div><div class="ttdeci">@ IMMUNITY_EFFECT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1394</div></div>
<div class="ttc" id="aa03080_html_a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a"><div class="ttname"><a href="../../d1/d7a/a03080.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a></div><div class="ttdeci">@ AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:63</div></div>
<div class="ttc" id="aa04508_html_a7f16e829e6dd717c8a6a20fd1aa783cc"><div class="ttname"><a href="../../dd/d8c/a04508.html#a7f16e829e6dd717c8a6a20fd1aa783cc">sOutdoorPvPMgr</a></div><div class="ttdeci">#define sOutdoorPvPMgr</div><div class="ttdef"><b>Definition:</b> OutdoorPvPMgr.h:102</div></div>
<div class="ttc" id="aa08386_html_a467189aea8a8fb26ef8482254e6f2b34"><div class="ttname"><a href="../../d0/dc6/a08386.html#a467189aea8a8fb26ef8482254e6f2b34">Player::InBattleground</a></div><div class="ttdeci">bool InBattleground() const</div><div class="ttdef"><b>Definition:</b> Player.h:2235</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l13384">Unit::ApplySpellImmune()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00063">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../#l12203">Player::GetBattleground()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01394">IMMUNITY_EFFECT</a>, <a class="el" href="../../#l02235">Player::InBattleground()</a>, <a class="el" href="../../#l00102">sOutdoorPvPMgr</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a88fe5e60d633f96c842170fcaed8c7cf" name="a88fe5e60d633f96c842170fcaed8c7cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88fe5e60d633f96c842170fcaed8c7cf">&#9670;&#160;</a></span>HandleAuraModExpertise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModExpertise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4632</span>{</div>
<div class="line"><span class="lineno"> 4633</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4634</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4635</span> </div>
<div class="line"><span class="lineno"> 4636</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4637</span> </div>
<div class="line"><span class="lineno"> 4638</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4639</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4640</span> </div>
<div class="line"><span class="lineno"> 4641</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6efacc1a5cdce1d2466dba3fc39cdf17">UpdateExpertise</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>);</div>
<div class="line"><span class="lineno"> 4642</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6efacc1a5cdce1d2466dba3fc39cdf17">UpdateExpertise</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>);</div>
<div class="line"><span class="lineno"> 4643</span>}</div>
<div class="ttc" id="aa08386_html_a6efacc1a5cdce1d2466dba3fc39cdf17"><div class="ttname"><a href="../../d0/dc6/a08386.html#a6efacc1a5cdce1d2466dba3fc39cdf17">Player::UpdateExpertise</a></div><div class="ttdeci">void UpdateExpertise(WeaponAttackType attType)</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:877</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00210">OFF_ATTACK</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00877">Player::UpdateExpertise()</a>.</p>

</div>
</div>
<a id="a26906e499e64074d01966137f9608093" name="a26906e499e64074d01966137f9608093"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26906e499e64074d01966137f9608093">&#9670;&#160;</a></span>HandleAuraModFaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModFaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5981</span>{</div>
<div class="line"><span class="lineno"> 5982</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 5983</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5984</span> </div>
<div class="line"><span class="lineno"> 5985</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5986</span> </div>
<div class="line"><span class="lineno"> 5987</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 5988</span>    {</div>
<div class="line"><span class="lineno"> 5989</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a2579e2b71959daec99048b4bcf7f6bf3">SetFaction</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 5990</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5991</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af9a5a43c2d7940c38f8b101409666a0d">RemoveUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934ac75aa2eacc0e809ae582c85d245c1e4c">UNIT_FLAG_PLAYER_CONTROLLED</a>);</div>
<div class="line"><span class="lineno"> 5992</span>    }</div>
<div class="line"><span class="lineno"> 5993</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5994</span>    {</div>
<div class="line"><span class="lineno"> 5995</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a25e4ba3fa47df09bb0492dd70c17c841">RestoreFaction</a>();</div>
<div class="line"><span class="lineno"> 5996</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5997</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad9f2d48b20f62e17abf5c1892cebe296">SetUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934ac75aa2eacc0e809ae582c85d245c1e4c">UNIT_FLAG_PLAYER_CONTROLLED</a>);</div>
<div class="line"><span class="lineno"> 5998</span>    }</div>
<div class="line"><span class="lineno"> 5999</span>}</div>
<div class="ttc" id="aa03521_html_affdd0d554c8bcaaa85a879f5a9d60934ac75aa2eacc0e809ae582c85d245c1e4c"><div class="ttname"><a href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934ac75aa2eacc0e809ae582c85d245c1e4c">UNIT_FLAG_PLAYER_CONTROLLED</a></div><div class="ttdeci">@ UNIT_FLAG_PLAYER_CONTROLLED</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:232</div></div>
<div class="ttc" id="aa08518_html_a2579e2b71959daec99048b4bcf7f6bf3"><div class="ttname"><a href="../../db/df9/a08518.html#a2579e2b71959daec99048b4bcf7f6bf3">Unit::SetFaction</a></div><div class="ttdeci">void SetFaction(uint32 faction)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10056</div></div>
<div class="ttc" id="aa08518_html_a25e4ba3fa47df09bb0492dd70c17c841"><div class="ttname"><a href="../../db/df9/a08518.html#a25e4ba3fa47df09bb0492dd70c17c841">Unit::RestoreFaction</a></div><div class="ttdeci">void RestoreFaction()</div><div class="ttdef"><b>Definition:</b> Unit.cpp:18691</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00714">Unit::RemoveUnitFlag()</a>, <a class="el" href="../../#l18691">Unit::RestoreFaction()</a>, <a class="el" href="../../#l10056">Unit::SetFaction()</a>, <a class="el" href="../../#l00713">Unit::SetUnitFlag()</a>, and <a class="el" href="../../#l00232">UNIT_FLAG_PLAYER_CONTROLLED</a>.</p>

</div>
</div>
<a id="a6a83116c26a189ee818608f1c1be2a9d" name="a6a83116c26a189ee818608f1c1be2a9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a83116c26a189ee818608f1c1be2a9d">&#9670;&#160;</a></span>HandleAuraModFakeInebriation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModFakeInebriation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6108</span>{</div>
<div class="line"><span class="lineno"> 6109</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 6110</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6111</span> </div>
<div class="line"><span class="lineno"> 6112</span>    <a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>()-&gt;ToPlayer();</div>
<div class="line"><span class="lineno"> 6113</span>    <span class="keywordflow">if</span> (!target)</div>
<div class="line"><span class="lineno"> 6114</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6115</span> </div>
<div class="line"><span class="lineno"> 6116</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a12aec05556dba9548e48851cc0dcf48d">PLAYER_FAKE_INEBRIATION</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 6117</span>    target-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#adaafbc5cd4fc1af9ce59f9f5848d2603">UpdateInvisibilityDrunkDetect</a>();</div>
<div class="line"><span class="lineno"> 6118</span>}</div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a12aec05556dba9548e48851cc0dcf48d"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a12aec05556dba9548e48851cc0dcf48d">PLAYER_FAKE_INEBRIATION</a></div><div class="ttdeci">@ PLAYER_FAKE_INEBRIATION</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:325</div></div>
<div class="ttc" id="aa08142_html_a494b539a938499639eab3f8d9a0c3364"><div class="ttname"><a href="../../df/d2d/a08142.html#a494b539a938499639eab3f8d9a0c3364">Object::ApplyModInt32Value</a></div><div class="ttdeci">void ApplyModInt32Value(uint16 index, int32 val, bool apply)</div><div class="ttdef"><b>Definition:</b> Object.cpp:815</div></div>
<div class="ttc" id="aa08386_html_adaafbc5cd4fc1af9ce59f9f5848d2603"><div class="ttname"><a href="../../d0/dc6/a08386.html#adaafbc5cd4fc1af9ce59f9f5848d2603">Player::UpdateInvisibilityDrunkDetect</a></div><div class="ttdeci">void UpdateInvisibilityDrunkDetect()</div><div class="ttdef"><b>Definition:</b> Player.cpp:997</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00815">Object::ApplyModInt32Value()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00325">PLAYER_FAKE_INEBRIATION</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00997">Player::UpdateInvisibilityDrunkDetect()</a>.</p>

</div>
</div>
<a id="ab17ae5878087d1047e5163db7e95564b" name="ab17ae5878087d1047e5163db7e95564b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab17ae5878087d1047e5163db7e95564b">&#9670;&#160;</a></span>HandleAuraModIncreaseEnergy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseEnergy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4731</span>{</div>
<div class="line"><span class="lineno"> 4732</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4733</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4734</span> </div>
<div class="line"><span class="lineno"> 4735</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4736</span> </div>
<div class="line"><span class="lineno"> 4737</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 4738</span>    <span class="comment">// do not check power type, we can always modify the maximum</span></div>
<div class="line"><span class="lineno"> 4739</span>    <span class="comment">// as the client will not see any difference</span></div>
<div class="line"><span class="lineno"> 4740</span>    <span class="comment">// also, placing conditions that may change during the aura duration</span></div>
<div class="line"><span class="lineno"> 4741</span>    <span class="comment">// inside effect handlers is not a good idea</span></div>
<div class="line"><span class="lineno"> 4742</span>    <span class="comment">//if (int32(PowerType) != GetMiscValue())</span></div>
<div class="line"><span class="lineno"> 4743</span>    <span class="comment">//    return;</span></div>
<div class="line"><span class="lineno"> 4744</span> </div>
<div class="line"><span class="lineno"> 4745</span>    <a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a> unitMod = <a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="../../d4/d1e/a00497.html#ad9c79638db63f1dfe2b085743b5cbf7b">uint16</a><span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea5aad5ea92b88fa48fb05a367e6d70bb8">UNIT_MOD_POWER_START</a>) + <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>);</div>
<div class="line"><span class="lineno"> 4746</span> </div>
<div class="line"><span class="lineno"> 4747</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(unitMod, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4748</span>}</div>
<div class="ttc" id="aa00497_html_ad9c79638db63f1dfe2b085743b5cbf7b"><div class="ttname"><a href="../../d4/d1e/a00497.html#ad9c79638db63f1dfe2b085743b5cbf7b">uint16</a></div><div class="ttdeci">std::uint16_t uint16</div><div class="ttdef"><b>Definition:</b> Define.h:108</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a></div><div class="ttdeci">Powers</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:268</div></div>
<div class="ttc" id="aa03425_html_a0d0e3226055ad5266e487b58fd01cebd"><div class="ttname"><a href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a></div><div class="ttdeci">PowerType</div><div class="ttdef"><b>Definition:</b> VehicleDefines.h:29</div></div>
<div class="ttc" id="aa03515_html_a4c5336cd4be5f0162bd4874b0a1e5bdea5aad5ea92b88fa48fb05a367e6d70bb8"><div class="ttname"><a href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea5aad5ea92b88fa48fb05a367e6d70bb8">UNIT_MOD_POWER_START</a></div><div class="ttdeci">@ UNIT_MOD_POWER_START</div><div class="ttdef"><b>Definition:</b> Unit.h:174</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00128">TOTAL_VALUE</a>, and <a class="el" href="../../#l00174">UNIT_MOD_POWER_START</a>.</p>

</div>
</div>
<a id="afbc68f3158a932f36315f4348dba5914" name="afbc68f3158a932f36315f4348dba5914"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbc68f3158a932f36315f4348dba5914">&#9670;&#160;</a></span>HandleAuraModIncreaseEnergyPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseEnergyPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4751</span>{</div>
<div class="line"><span class="lineno"> 4752</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4753</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4754</span> </div>
<div class="line"><span class="lineno"> 4755</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4756</span> </div>
<div class="line"><span class="lineno"> 4757</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 4758</span>    <span class="comment">// do not check power type, we can always modify the maximum</span></div>
<div class="line"><span class="lineno"> 4759</span>    <span class="comment">// as the client will not see any difference</span></div>
<div class="line"><span class="lineno"> 4760</span>    <span class="comment">// also, placing conditions that may change during the aura duration</span></div>
<div class="line"><span class="lineno"> 4761</span>    <span class="comment">// inside effect handlers is not a good idea</span></div>
<div class="line"><span class="lineno"> 4762</span>    <span class="comment">//if (int32(PowerType) != GetMiscValue())</span></div>
<div class="line"><span class="lineno"> 4763</span>    <span class="comment">//    return;</span></div>
<div class="line"><span class="lineno"> 4764</span> </div>
<div class="line"><span class="lineno"> 4765</span>    <a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a> unitMod = <a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="../../d4/d1e/a00497.html#ad9c79638db63f1dfe2b085743b5cbf7b">uint16</a><span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea5aad5ea92b88fa48fb05a367e6d70bb8">UNIT_MOD_POWER_START</a>) + <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>);</div>
<div class="line"><span class="lineno"> 4766</span>    <span class="keywordtype">float</span> amount = float(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 4767</span> </div>
<div class="line"><span class="lineno"> 4768</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 4769</span>    {</div>
<div class="line"><span class="lineno"> 4770</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(unitMod, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, amount, apply);</div>
<div class="line"><span class="lineno"> 4771</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa9753a6e5734593a4b14e6f0f198c538">ModifyPowerPct</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, amount, apply);</div>
<div class="line"><span class="lineno"> 4772</span>    }</div>
<div class="line"><span class="lineno"> 4773</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4774</span>    {</div>
<div class="line"><span class="lineno"> 4775</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa9753a6e5734593a4b14e6f0f198c538">ModifyPowerPct</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, amount, apply);</div>
<div class="line"><span class="lineno"> 4776</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(unitMod, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, amount, apply);</div>
<div class="line"><span class="lineno"> 4777</span>    }</div>
<div class="line"><span class="lineno"> 4778</span>}</div>
<div class="ttc" id="aa08518_html_aa9753a6e5734593a4b14e6f0f198c538"><div class="ttname"><a href="../../db/df9/a08518.html#aa9753a6e5734593a4b14e6f0f198c538">Unit::ModifyPowerPct</a></div><div class="ttdeci">int32 ModifyPowerPct(Powers power, float pct, bool apply=true)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14182</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l14182">Unit::ModifyPowerPct()</a>, <a class="el" href="../../#l00129">TOTAL_PCT</a>, and <a class="el" href="../../#l00174">UNIT_MOD_POWER_START</a>.</p>

</div>
</div>
<a id="af27fe9a06b1ec4e7feb0249926d69dba" name="af27fe9a06b1ec4e7feb0249926d69dba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af27fe9a06b1ec4e7feb0249926d69dba">&#9670;&#160;</a></span>HandleAuraModIncreaseFlightSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseFlightSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Update ability to fly</p>
<p >Someone should clean up these hacks and remove it from this function. It doesn't even belong here.</p>
<div class="fragment"><div class="line"><span class="lineno"> 3712</span>{</div>
<div class="line"><span class="lineno"> 3713</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3714</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3715</span> </div>
<div class="line"><span class="lineno"> 3716</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3717</span>    <span class="keywordflow">if</span> (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>)</div>
<div class="line"><span class="lineno"> 3718</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4a2461b4a7be489c54989eff2c87ae1961">MOVE_FLIGHT</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3719</span> </div>
<div class="line"><span class="lineno"> 3721</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>)</div>
<div class="line"><span class="lineno"> 3722</span>    {</div>
<div class="line"><span class="lineno"> 3723</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3724</span>        <span class="keywordflow">if</span> (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a> &amp;&amp; (apply || (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>) &amp;&amp; !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6b0ccd5195567a4744da1763b92159e3">SPELL_AURA_FLY</a>))))</div>
<div class="line"><span class="lineno"> 3725</span>        {</div>
<div class="line"><span class="lineno"> 3726</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8589825a8a8fd6e20c48af3605297bd4">SetCanFly</a>(apply);</div>
<div class="line"><span class="lineno"> 3727</span> </div>
<div class="line"><span class="lineno"> 3728</span>            <span class="keywordflow">if</span> (!apply &amp;&amp; target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aacc8ee332f66effdc0d77c126dae1961">IsCreature</a>() &amp;&amp; !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a55b787bbffa61290e6b6a247f2927c90">IsLevitating</a>())</div>
<div class="line"><span class="lineno"> 3729</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../d8/db5/a09662.html#ae37d25ba49a3887faa07bc194f3447fd">MoveFall</a>();</div>
<div class="line"><span class="lineno"> 3730</span>        }</div>
<div class="line"><span class="lineno"> 3731</span> </div>
<div class="line"><span class="lineno"> 3733</span>        <span class="keywordflow">if</span> (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>)</div>
<div class="line"><span class="lineno"> 3734</span>        {</div>
<div class="line"><span class="lineno"> 3735</span>            <span class="comment">//Players on flying mounts must be immune to polymorph</span></div>
<div class="line"><span class="lineno"> 3736</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 3737</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, apply);</div>
<div class="line"><span class="lineno"> 3738</span> </div>
<div class="line"><span class="lineno"> 3739</span>            <span class="comment">// Dragonmaw Illusion (overwrite mount model, mounted aura already applied)</span></div>
<div class="line"><span class="lineno"> 3740</span>            <span class="keywordflow">if</span> (apply &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8fd18d697ea7e2c7fbbf4a2d1a93bfef">HasAuraEffect</a>(42016, 0) &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#abefb328ba7a52fc7c5a16c60855b4d6a">GetMountID</a>())</div>
<div class="line"><span class="lineno"> 3741</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac2bd94b573bcf5e80cba886a8e2f540f">SetUInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031">UNIT_FIELD_MOUNTDISPLAYID</a>, 16314);</div>
<div class="line"><span class="lineno"> 3742</span>        }</div>
<div class="line"><span class="lineno"> 3743</span>    }</div>
<div class="line"><span class="lineno"> 3744</span> </div>
<div class="line"><span class="lineno"> 3745</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* targetPlayer = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno"> 3746</span>    {</div>
<div class="line"><span class="lineno"> 3747</span>        <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><span class="lineno"> 3748</span>    }</div>
<div class="line"><span class="lineno"> 3749</span>}</div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a></div><div class="ttdeci">@ MECHANIC_POLYMORPH</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1342</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a6b0ccd5195567a4744da1763b92159e3"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6b0ccd5195567a4744da1763b92159e3">SPELL_AURA_FLY</a></div><div class="ttdeci">@ SPELL_AURA_FLY</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:264</div></div>
<div class="ttc" id="aa03092_html_a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b"><div class="ttname"><a href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:50</div></div>
<div class="ttc" id="aa08518_html_a8fd18d697ea7e2c7fbbf4a2d1a93bfef"><div class="ttname"><a href="../../db/df9/a08518.html#a8fd18d697ea7e2c7fbbf4a2d1a93bfef">Unit::HasAuraEffect</a></div><div class="ttdeci">bool HasAuraEffect(uint32 spellId, uint8 effIndex, ObjectGuid caster=ObjectGuid::Empty) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5668</div></div>
<div class="ttc" id="aa08518_html_abefb328ba7a52fc7c5a16c60855b4d6a"><div class="ttname"><a href="../../db/df9/a08518.html#abefb328ba7a52fc7c5a16c60855b4d6a">Unit::GetMountID</a></div><div class="ttdeci">uint32 GetMountID() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1703</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l13384">Unit::ApplySpellImmune()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00050">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l01622">Unit::GetMotionMaster()</a>, <a class="el" href="../../#l01703">Unit::GetMountID()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05668">Unit::HasAuraEffect()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l01399">IMMUNITY_MECHANIC</a>, <a class="el" href="../../#l00201">Object::IsCreature()</a>, <a class="el" href="../../#l01575">Unit::IsLevitating()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l01342">MECHANIC_POLYMORPH</a>, <a class="el" href="../../#l00334">MOVE_FLIGHT</a>, <a class="el" href="../../#l00627">MotionMaster::MoveFall()</a>, <a class="el" href="../../#l20603">Unit::SetCanFly()</a>, <a class="el" href="../../#l21312">Unit::SetUInt32Value()</a>, <a class="el" href="../../#l00264">SPELL_AURA_FLY</a>, <a class="el" href="../../#l00270">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00126">UNIT_FIELD_MOUNTDISPLAYID</a>, and <a class="el" href="../../#l14245">Unit::UpdateSpeed()</a>.</p>

</div>
</div>
<a id="a43b0158e5c699baf571fa2a064bf70c9" name="a43b0158e5c699baf571fa2a064bf70c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43b0158e5c699baf571fa2a064bf70c9">&#9670;&#160;</a></span>HandleAuraModIncreaseHealth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseHealth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4686</span>{</div>
<div class="line"><span class="lineno"> 4687</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4688</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4689</span> </div>
<div class="line"><span class="lineno"> 4690</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4691</span> </div>
<div class="line"><span class="lineno"> 4692</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 4693</span>    {</div>
<div class="line"><span class="lineno"> 4694</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4695</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a009a87eeb9cc40ed7017610cbb914b9b">ModifyHealth</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 4696</span>    }</div>
<div class="line"><span class="lineno"> 4697</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4698</span>    {</div>
<div class="line"><span class="lineno"> 4699</span>        <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>()) &gt; <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><span class="lineno"> 4700</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a009a87eeb9cc40ed7017610cbb914b9b">ModifyHealth</a>(-<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 4701</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4702</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(1);</div>
<div class="line"><span class="lineno"> 4703</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4704</span>    }</div>
<div class="line"><span class="lineno"> 4705</span>}</div>
<div class="ttc" id="aa08518_html_a009a87eeb9cc40ed7017610cbb914b9b"><div class="ttname"><a href="../../db/df9/a08518.html#a009a87eeb9cc40ed7017610cbb914b9b">Unit::ModifyHealth</a></div><div class="ttdeci">int32 ModifyHealth(int32 val)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14086</div></div>
<div class="ttc" id="aa08518_html_a6548d4bfff73fad6df63a0bd0d806e2e"><div class="ttname"><a href="../../db/df9/a08518.html#a6548d4bfff73fad6df63a0bd0d806e2e">Unit::SetHealth</a></div><div class="ttdeci">void SetHealth(uint32 val)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:15473</div></div>
<div class="ttc" id="aa08518_html_a958172d6051b106e3b3c776e4f9f3952"><div class="ttname"><a href="../../db/df9/a08518.html#a958172d6051b106e3b3c776e4f9f3952">Unit::GetHealth</a></div><div class="ttdeci">uint32 GetHealth() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1029</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l01029">Unit::GetHealth()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l14086">Unit::ModifyHealth()</a>, <a class="el" href="../../#l15473">Unit::SetHealth()</a>, <a class="el" href="../../#l00128">TOTAL_VALUE</a>, and <a class="el" href="../../#l00148">UNIT_MOD_HEALTH</a>.</p>

</div>
</div>
<a id="a3286f89b5415bd21a4831285dab7362f" name="a3286f89b5415bd21a4831285dab7362f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3286f89b5415bd21a4831285dab7362f">&#9670;&#160;</a></span>HandleAuraModIncreaseHealthPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseHealthPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4781</span>{</div>
<div class="line"><span class="lineno"> 4782</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4783</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4784</span> </div>
<div class="line"><span class="lineno"> 4785</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4786</span> </div>
<div class="line"><span class="lineno"> 4787</span>    <span class="comment">// Unit will keep hp% after MaxHealth being modified if unit is alive.</span></div>
<div class="line"><span class="lineno"> 4788</span>    <span class="keywordtype">float</span> percent = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0cb842af542d302eb67b743078e1ac01">GetHealthPct</a>();</div>
<div class="line"><span class="lineno"> 4789</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4790</span> </div>
<div class="line"><span class="lineno"> 4791</span>    <span class="comment">// Xinef: pct was rounded down and could &quot;kill&quot; creature by setting its health to 0 making npc zombie</span></div>
<div class="line"><span class="lineno"> 4792</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno"> 4793</span>        <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> healthAmount = <a class="code hl_function" href="../../d4/d13/a00377.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>(), percent))</div>
<div class="line"><span class="lineno"> 4794</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(healthAmount);</div>
<div class="line"><span class="lineno"> 4795</span>}</div>
<div class="ttc" id="aa00377_html_ae00607f8188c59ffcea5a3997c0120b0"><div class="ttname"><a href="../../d4/d13/a00377.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a></div><div class="ttdeci">T CalculatePct(T base, U pct)</div><div class="ttdef"><b>Definition:</b> Util.h:61</div></div>
<div class="ttc" id="aa08518_html_a0cb842af542d302eb67b743078e1ac01"><div class="ttname"><a href="../../db/df9/a08518.html#a0cb842af542d302eb67b743078e1ac01">Unit::GetHealthPct</a></div><div class="ttdeci">float GetHealthPct() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1031</div></div>
<div class="ttc" id="aa08518_html_a5173c1774b09b42c409bf31280c37d36"><div class="ttname"><a href="../../db/df9/a08518.html#a5173c1774b09b42c409bf31280c37d36">Unit::GetMaxHealth</a></div><div class="ttdeci">uint32 GetMaxHealth() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1030</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00061">CalculatePct()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l01031">Unit::GetHealthPct()</a>, <a class="el" href="../../#l01030">Unit::GetMaxHealth()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l15473">Unit::SetHealth()</a>, <a class="el" href="../../#l00129">TOTAL_PCT</a>, and <a class="el" href="../../#l00148">UNIT_MOD_HEALTH</a>.</p>

</div>
</div>
<a id="a9bea1efab99a42212d85ea5c39921950" name="a9bea1efab99a42212d85ea5c39921950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bea1efab99a42212d85ea5c39921950">&#9670;&#160;</a></span>HandleAuraModIncreaseMaxHealth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseMaxHealth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4708</span>{</div>
<div class="line"><span class="lineno"> 4709</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4710</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4711</span> </div>
<div class="line"><span class="lineno"> 4712</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4713</span> </div>
<div class="line"><span class="lineno"> 4714</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> oldhealth = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>();</div>
<div class="line"><span class="lineno"> 4715</span>    <span class="keywordtype">double</span> healthPercentage = (double)oldhealth / (<span class="keywordtype">double</span>)target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>();</div>
<div class="line"><span class="lineno"> 4716</span> </div>
<div class="line"><span class="lineno"> 4717</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea45d2a58d49ab909fd6a6e78467f7ca0d">UNIT_MOD_HEALTH</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4718</span> </div>
<div class="line"><span class="lineno"> 4719</span>    <span class="comment">// refresh percentage</span></div>
<div class="line"><span class="lineno"> 4720</span>    <span class="keywordflow">if</span> (oldhealth &gt; 0)</div>
<div class="line"><span class="lineno"> 4721</span>    {</div>
<div class="line"><span class="lineno"> 4722</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> newhealth = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(std::ceil((<span class="keywordtype">double</span>)target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() * healthPercentage));</div>
<div class="line"><span class="lineno"> 4723</span>        <span class="keywordflow">if</span> (newhealth == 0)</div>
<div class="line"><span class="lineno"> 4724</span>            newhealth = 1;</div>
<div class="line"><span class="lineno"> 4725</span> </div>
<div class="line"><span class="lineno"> 4726</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(newhealth);</div>
<div class="line"><span class="lineno"> 4727</span>    }</div>
<div class="line"><span class="lineno"> 4728</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l01029">Unit::GetHealth()</a>, <a class="el" href="../../#l01030">Unit::GetMaxHealth()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l15473">Unit::SetHealth()</a>, <a class="el" href="../../#l00128">TOTAL_VALUE</a>, and <a class="el" href="../../#l00148">UNIT_MOD_HEALTH</a>.</p>

</div>
</div>
<a id="a4390a014a9aa70f4d90303c335a61b7c" name="a4390a014a9aa70f4d90303c335a61b7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4390a014a9aa70f4d90303c335a61b7c">&#9670;&#160;</a></span>HandleAuraModIncreaseMountedSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseMountedSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3707</span>{</div>
<div class="line"><span class="lineno"> 3708</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#aaea11ca24fdbdb92e653f59bfd181ff0">HandleAuraModIncreaseSpeed</a>(aurApp, mode, apply);</div>
<div class="line"><span class="lineno"> 3709</span>}</div>
<div class="ttc" id="aa10782_html_aaea11ca24fdbdb92e653f59bfd181ff0"><div class="ttname"><a href="../../d6/d2f/a10782.html#aaea11ca24fdbdb92e653f59bfd181ff0">AuraEffect::HandleAuraModIncreaseSpeed</a></div><div class="ttdeci">void HandleAuraModIncreaseSpeed(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:3691</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l03691">HandleAuraModIncreaseSpeed()</a>.</p>

</div>
</div>
<a id="aaea11ca24fdbdb92e653f59bfd181ff0" name="aaea11ca24fdbdb92e653f59bfd181ff0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea11ca24fdbdb92e653f59bfd181ff0">&#9670;&#160;</a></span>HandleAuraModIncreaseSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3692</span>{</div>
<div class="line"><span class="lineno"> 3693</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3694</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3695</span> </div>
<div class="line"><span class="lineno"> 3696</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3697</span> </div>
<div class="line"><span class="lineno"> 3698</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de">MOVE_RUN</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3699</span> </div>
<div class="line"><span class="lineno"> 3700</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* targetPlayer = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno"> 3701</span>    {</div>
<div class="line"><span class="lineno"> 3702</span>        <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><span class="lineno"> 3703</span>    }</div>
<div class="line"><span class="lineno"> 3704</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00329">MOVE_RUN</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l14245">Unit::UpdateSpeed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03706">HandleAuraModIncreaseMountedSpeed()</a>.</p>

</div>
</div>
<a id="a9b5fb8fd52b54a9fc55491d48a62df4f" name="a9b5fb8fd52b54a9fc55491d48a62df4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b5fb8fd52b54a9fc55491d48a62df4f">&#9670;&#160;</a></span>HandleAuraModIncreaseSwimSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModIncreaseSwimSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3752</span>{</div>
<div class="line"><span class="lineno"> 3753</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3754</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3755</span> </div>
<div class="line"><span class="lineno"> 3756</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3757</span> </div>
<div class="line"><span class="lineno"> 3758</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4a611a24e7db53ef46584dcfb70d8343e5">MOVE_SWIM</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3759</span> </div>
<div class="line"><span class="lineno"> 3760</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* targetPlayer = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno"> 3761</span>    {</div>
<div class="line"><span class="lineno"> 3762</span>        <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><span class="lineno"> 3763</span>    }</div>
<div class="line"><span class="lineno"> 3764</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00331">MOVE_SWIM</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l14245">Unit::UpdateSpeed()</a>.</p>

</div>
</div>
<a id="af48521ad2be2b43241c6bc8ca6274bd6" name="af48521ad2be2b43241c6bc8ca6274bd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af48521ad2be2b43241c6bc8ca6274bd6">&#9670;&#160;</a></span>HandleAuraModPacify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModPacify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3046</span>{</div>
<div class="line"><span class="lineno"> 3047</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3048</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3049</span> </div>
<div class="line"><span class="lineno"> 3050</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3051</span> </div>
<div class="line"><span class="lineno"> 3052</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3053</span>    {</div>
<div class="line"><span class="lineno"> 3054</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad9f2d48b20f62e17abf5c1892cebe296">SetUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a6fe41521d08dba6583ba7bb9d45cef82">UNIT_FLAG_PACIFIED</a>);</div>
<div class="line"><span class="lineno"> 3055</span>        <span class="comment">//target-&gt;AttackStop(); // pussywizard: why having this flag prevents from being in combat? it should just prevent melee attack</span></div>
<div class="line"><span class="lineno"> 3056</span>    }</div>
<div class="line"><span class="lineno"> 3057</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3058</span>    {</div>
<div class="line"><span class="lineno"> 3059</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3060</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6c38d7d76b8741d45023a0ccc3c0f9b3">SPELL_AURA_MOD_PACIFY</a>) || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aab7e99142d3a87d93f8586e2a9cd81c8">SPELL_AURA_MOD_PACIFY_SILENCE</a>))</div>
<div class="line"><span class="lineno"> 3061</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3062</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af9a5a43c2d7940c38f8b101409666a0d">RemoveUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a6fe41521d08dba6583ba7bb9d45cef82">UNIT_FLAG_PACIFIED</a>);</div>
<div class="line"><span class="lineno"> 3063</span>    }</div>
<div class="line"><span class="lineno"> 3064</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a6c38d7d76b8741d45023a0ccc3c0f9b3"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6c38d7d76b8741d45023a0ccc3c0f9b3">SPELL_AURA_MOD_PACIFY</a></div><div class="ttdeci">@ SPELL_AURA_MOD_PACIFY</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:88</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799aab7e99142d3a87d93f8586e2a9cd81c8"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aab7e99142d3a87d93f8586e2a9cd81c8">SPELL_AURA_MOD_PACIFY_SILENCE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_PACIFY_SILENCE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:123</div></div>
<div class="ttc" id="aa03521_html_affdd0d554c8bcaaa85a879f5a9d60934a6fe41521d08dba6583ba7bb9d45cef82"><div class="ttname"><a href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a6fe41521d08dba6583ba7bb9d45cef82">UNIT_FLAG_PACIFIED</a></div><div class="ttdeci">@ UNIT_FLAG_PACIFIED</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:246</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00714">Unit::RemoveUnitFlag()</a>, <a class="el" href="../../#l00713">Unit::SetUnitFlag()</a>, <a class="el" href="../../#l00088">SPELL_AURA_MOD_PACIFY</a>, <a class="el" href="../../#l00123">SPELL_AURA_MOD_PACIFY_SILENCE</a>, and <a class="el" href="../../#l00246">UNIT_FLAG_PACIFIED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03066">HandleAuraModPacifyAndSilence()</a>.</p>

</div>
</div>
<a id="ae3645d469d5dfd1240fb9f9af3a83920" name="ae3645d469d5dfd1240fb9f9af3a83920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3645d469d5dfd1240fb9f9af3a83920">&#9670;&#160;</a></span>HandleAuraModPacifyAndSilence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModPacifyAndSilence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3067</span>{</div>
<div class="line"><span class="lineno"> 3068</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3069</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3070</span> </div>
<div class="line"><span class="lineno"> 3071</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3072</span> </div>
<div class="line"><span class="lineno"> 3073</span>    <span class="keywordflow">if</span> (!(apply))</div>
<div class="line"><span class="lineno"> 3074</span>    {</div>
<div class="line"><span class="lineno"> 3075</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3076</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aab7e99142d3a87d93f8586e2a9cd81c8">SPELL_AURA_MOD_PACIFY_SILENCE</a>))</div>
<div class="line"><span class="lineno"> 3077</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3078</span>    }</div>
<div class="line"><span class="lineno"> 3079</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#af48521ad2be2b43241c6bc8ca6274bd6">HandleAuraModPacify</a>(aurApp, mode, apply);</div>
<div class="line"><span class="lineno"> 3080</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#aca9f7031c1091b23080c4c8d827fa0e3">HandleAuraModSilence</a>(aurApp, mode, apply);</div>
<div class="line"><span class="lineno"> 3081</span>}</div>
<div class="ttc" id="aa10782_html_aca9f7031c1091b23080c4c8d827fa0e3"><div class="ttname"><a href="../../d6/d2f/a10782.html#aca9f7031c1091b23080c4c8d827fa0e3">AuraEffect::HandleAuraModSilence</a></div><div class="ttdeci">void HandleAuraModSilence(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:3016</div></div>
<div class="ttc" id="aa10782_html_af48521ad2be2b43241c6bc8ca6274bd6"><div class="ttname"><a href="../../d6/d2f/a10782.html#af48521ad2be2b43241c6bc8ca6274bd6">AuraEffect::HandleAuraModPacify</a></div><div class="ttdeci">void HandleAuraModPacify(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:3045</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l03045">HandleAuraModPacify()</a>, <a class="el" href="../../#l03016">HandleAuraModSilence()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, and <a class="el" href="../../#l00123">SPELL_AURA_MOD_PACIFY_SILENCE</a>.</p>

</div>
</div>
<a id="abd6a595444acecc12c84820cc3f86865" name="abd6a595444acecc12c84820cc3f86865"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd6a595444acecc12c84820cc3f86865">&#9670;&#160;</a></span>HandleAuraModParryPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModParryPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4812</span>{</div>
<div class="line"><span class="lineno"> 4813</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4814</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4815</span> </div>
<div class="line"><span class="lineno"> 4816</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4817</span> </div>
<div class="line"><span class="lineno"> 4818</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4819</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4820</span> </div>
<div class="line"><span class="lineno"> 4821</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a25aedfffc34135ef7ac02f943a191f11">CanParry</a>())</div>
<div class="line"><span class="lineno"> 4822</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a356b43d7f7437f6fdf6169aee700b94e">SetCanParry</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 4823</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4824</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a0239b9a936e4e891a79b514f06d2b21c">UpdateParryPercentage</a>();</div>
<div class="line"><span class="lineno"> 4825</span>}</div>
<div class="ttc" id="aa08386_html_a0239b9a936e4e891a79b514f06d2b21c"><div class="ttname"><a href="../../d0/dc6/a08386.html#a0239b9a936e4e891a79b514f06d2b21c">Player::UpdateParryPercentage</a></div><div class="ttdeci">void UpdateParryPercentage()</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:735</div></div>
<div class="ttc" id="aa08386_html_a25aedfffc34135ef7ac02f943a191f11"><div class="ttname"><a href="../../d0/dc6/a08386.html#a25aedfffc34135ef7ac02f943a191f11">Player::CanParry</a></div><div class="ttdeci">bool CanParry() const</div><div class="ttdef"><b>Definition:</b> Player.h:2166</div></div>
<div class="ttc" id="aa08386_html_a356b43d7f7437f6fdf6169aee700b94e"><div class="ttname"><a href="../../d0/dc6/a08386.html#a356b43d7f7437f6fdf6169aee700b94e">Player::SetCanParry</a></div><div class="ttdeci">void SetCanParry(bool value)</div><div class="ttdef"><b>Definition:</b> Player.cpp:13135</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l02166">Player::CanParry()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l13135">Player::SetCanParry()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00735">Player::UpdateParryPercentage()</a>.</p>

</div>
</div>
<a id="a3e9174d203a34abc924e9a58efb2473c" name="a3e9174d203a34abc924e9a58efb2473c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e9174d203a34abc924e9a58efb2473c">&#9670;&#160;</a></span>HandleAuraModPetTalentsPoints()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModPetTalentsPoints </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3203</span>{</div>
<div class="line"><span class="lineno"> 3204</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3205</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3206</span> </div>
<div class="line"><span class="lineno"> 3207</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3208</span> </div>
<div class="line"><span class="lineno"> 3209</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 3210</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3211</span> </div>
<div class="line"><span class="lineno"> 3212</span>    <span class="comment">// Recalculate pet talent points</span></div>
<div class="line"><span class="lineno"> 3213</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/d0b/a08254.html">Pet</a>* pet = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a5eef7fef24e4a9269d1ee834bc2bd501">GetPet</a>())</div>
<div class="line"><span class="lineno"> 3214</span>        pet-&gt;InitTalentForLevel();</div>
<div class="line"><span class="lineno"> 3215</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l08916">Player::GetPet()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a3911ef5ef63aafac04aaae3a389fb3c9" name="a3911ef5ef63aafac04aaae3a389fb3c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3911ef5ef63aafac04aaae3a389fb3c9">&#9670;&#160;</a></span>HandleAuraModRangedAttackPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRangedAttackPower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5110</span>{</div>
<div class="line"><span class="lineno"> 5111</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5112</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5113</span> </div>
<div class="line"><span class="lineno"> 5114</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5115</span> </div>
<div class="line"><span class="lineno"> 5116</span>    <span class="keywordflow">if</span> ((target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#abbbd9cc147469bc7f35075539bdf55a0">getClassMask</a>() &amp; <a class="code hl_define" href="../../d0/dbd/a02771.html#a3002b6959a1e2bc149144b9ae9a9728c">CLASSMASK_WAND_USERS</a>) != 0)</div>
<div class="line"><span class="lineno"> 5117</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5118</span> </div>
<div class="line"><span class="lineno"> 5119</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdeafac2a3c286aff376e7cbb8ed2124534c">UNIT_MOD_ATTACK_POWER_RANGED</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5120</span>}</div>
<div class="ttc" id="aa02771_html_a3002b6959a1e2bc149144b9ae9a9728c"><div class="ttname"><a href="../../d0/dbd/a02771.html#a3002b6959a1e2bc149144b9ae9a9728c">CLASSMASK_WAND_USERS</a></div><div class="ttdeci">#define CLASSMASK_WAND_USERS</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:174</div></div>
<div class="ttc" id="aa03515_html_a4c5336cd4be5f0162bd4874b0a1e5bdeafac2a3c286aff376e7cbb8ed2124534c"><div class="ttname"><a href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdeafac2a3c286aff376e7cbb8ed2124534c">UNIT_MOD_ATTACK_POWER_RANGED</a></div><div class="ttdeci">@ UNIT_MOD_ATTACK_POWER_RANGED</div><div class="ttdef"><b>Definition:</b> Unit.h:164</div></div>
<div class="ttc" id="aa08518_html_abbbd9cc147469bc7f35075539bdf55a0"><div class="ttname"><a href="../../db/df9/a08518.html#abbbd9cc147469bc7f35075539bdf55a0">Unit::getClassMask</a></div><div class="ttdeci">uint32 getClassMask() const</div><div class="ttdef"><b>Definition:</b> Unit.h:802</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00174">CLASSMASK_WAND_USERS</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00802">Unit::getClassMask()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00128">TOTAL_VALUE</a>, and <a class="el" href="../../#l00164">UNIT_MOD_ATTACK_POWER_RANGED</a>.</p>

</div>
</div>
<a id="a1a3ec4c7f1ca6b978189280b4f2424a7" name="a1a3ec4c7f1ca6b978189280b4f2424a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a3ec4c7f1ca6b978189280b4f2424a7">&#9670;&#160;</a></span>HandleAuraModRangedAttackPowerOfStatPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRangedAttackPowerOfStatPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5148</span>{</div>
<div class="line"><span class="lineno"> 5149</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5150</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5151</span> </div>
<div class="line"><span class="lineno"> 5152</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5153</span> </div>
<div class="line"><span class="lineno"> 5154</span>    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><span class="lineno"> 5155</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; !(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#abbbd9cc147469bc7f35075539bdf55a0">getClassMask</a>() &amp; <a class="code hl_define" href="../../d0/dbd/a02771.html#a3002b6959a1e2bc149144b9ae9a9728c">CLASSMASK_WAND_USERS</a>))</div>
<div class="line"><span class="lineno"> 5156</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af38c592a982085b6385131f9c691eca7">UpdateAttackPowerAndDamage</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 5157</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00174">CLASSMASK_WAND_USERS</a>, <a class="el" href="../../#l00802">Unit::getClassMask()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00330">Player::UpdateAttackPowerAndDamage()</a>.</p>

</div>
</div>
<a id="a280de8cb7a520bb9b216b9735a2dca32" name="a280de8cb7a520bb9b216b9735a2dca32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a280de8cb7a520bb9b216b9735a2dca32">&#9670;&#160;</a></span>HandleAuraModRangedAttackPowerPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRangedAttackPowerPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5134</span>{</div>
<div class="line"><span class="lineno"> 5135</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5136</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5137</span> </div>
<div class="line"><span class="lineno"> 5138</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5139</span> </div>
<div class="line"><span class="lineno"> 5140</span>    <span class="keywordflow">if</span> ((target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#abbbd9cc147469bc7f35075539bdf55a0">getClassMask</a>() &amp; <a class="code hl_define" href="../../d0/dbd/a02771.html#a3002b6959a1e2bc149144b9ae9a9728c">CLASSMASK_WAND_USERS</a>) != 0)</div>
<div class="line"><span class="lineno"> 5141</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5142</span> </div>
<div class="line"><span class="lineno"> 5143</span>    <span class="comment">//UNIT_FIELD_RANGED_ATTACK_POWER_MULTIPLIER = multiplier - 1</span></div>
<div class="line"><span class="lineno"> 5144</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdeafac2a3c286aff376e7cbb8ed2124534c">UNIT_MOD_ATTACK_POWER_RANGED</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5145</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00174">CLASSMASK_WAND_USERS</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00802">Unit::getClassMask()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00129">TOTAL_PCT</a>, and <a class="el" href="../../#l00164">UNIT_MOD_ATTACK_POWER_RANGED</a>.</p>

</div>
</div>
<a id="a63f78f6483abbd00e0f55ef8ea938bbe" name="a63f78f6483abbd00e0f55ef8ea938bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f78f6483abbd00e0f55ef8ea938bbe">&#9670;&#160;</a></span>HandleAuraModRangedHaste()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRangedHaste </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5038</span>{</div>
<div class="line"><span class="lineno"> 5039</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5040</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5041</span> </div>
<div class="line"><span class="lineno"> 5042</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5043</span> </div>
<div class="line"><span class="lineno"> 5044</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352aa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>, (<span class="keywordtype">float</span>)<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 5045</span>}</div>
<div class="ttc" id="aa08518_html_a60d7ad5197284d3caaed380dfc740ff0"><div class="ttname"><a href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">Unit::ApplyAttackTimePercentMod</a></div><div class="ttdeci">void ApplyAttackTimePercentMod(WeaponAttackType att, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:17050</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l17050">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../#l00211">RANGED_ATTACK</a>.</p>

</div>
</div>
<a id="adbf214d5d4e3a9926d7809234f979ca4" name="adbf214d5d4e3a9926d7809234f979ca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbf214d5d4e3a9926d7809234f979ca4">&#9670;&#160;</a></span>HandleAuraModRegenInterrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRegenInterrupt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4854</span>{</div>
<div class="line"><span class="lineno"> 4855</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#accc046bd1b9adb7c8b60be792f70e814">HandleModManaRegen</a>(aurApp, mode, apply);</div>
<div class="line"><span class="lineno"> 4856</span>}</div>
<div class="ttc" id="aa10782_html_accc046bd1b9adb7c8b60be792f70e814"><div class="ttname"><a href="../../d6/d2f/a10782.html#accc046bd1b9adb7c8b60be792f70e814">AuraEffect::HandleModManaRegen</a></div><div class="ttdeci">void HandleModManaRegen(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:4671</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l04671">HandleModManaRegen()</a>.</p>

</div>
</div>
<a id="adf85e6ba3ad0ec021f53683452002782" name="adf85e6ba3ad0ec021f53683452002782"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf85e6ba3ad0ec021f53683452002782">&#9670;&#160;</a></span>HandleAuraModResistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModResistance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4338</span>{</div>
<div class="line"><span class="lineno"> 4339</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4340</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4341</span> </div>
<div class="line"><span class="lineno"> 4342</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4343</span> </div>
<div class="line"><span class="lineno"> 4344</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a3bb8a71f4ae9af551f71e9eb2c9c3325">int8</a> x = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; x &lt; <a class="code hl_variable" href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; x++)</div>
<div class="line"><span class="lineno"> 4345</span>    {</div>
<div class="line"><span class="lineno"> 4346</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(1 &lt;&lt; x))</div>
<div class="line"><span class="lineno"> 4347</span>        {</div>
<div class="line"><span class="lineno"> 4348</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a> + x), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4349</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>())</div>
<div class="line"><span class="lineno"> 4350</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af2f5b6a3bb1be04e3b09e8a96e744d34">ApplyResistanceBuffModsMod</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a>(x), <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() &gt; 0, (<span class="keywordtype">float</span>)<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 4351</span>        }</div>
<div class="line"><span class="lineno"> 4352</span>    }</div>
<div class="line"><span class="lineno"> 4353</span>}</div>
<div class="ttc" id="aa02771_html_a25263e3e283b54e5280d5af1fd16da4c"><div class="ttname"><a href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a></div><div class="ttdeci">SpellSchools</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:282</div></div>
<div class="ttc" id="aa08518_html_a4ad2fdcc45e2c3c85ad59ff49268b58c"><div class="ttname"><a href="../../db/df9/a08518.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">Unit::IsPet</a></div><div class="ttdeci">bool IsPet() const</div><div class="ttdef"><b>Definition:</b> Unit.h:754</div></div>
<div class="ttc" id="aa08518_html_af2f5b6a3bb1be04e3b09e8a96e744d34"><div class="ttname"><a href="../../db/df9/a08518.html#af2f5b6a3bb1be04e3b09e8a96e744d34">Unit::ApplyResistanceBuffModsMod</a></div><div class="ttdeci">void ApplyResistanceBuffModsMod(SpellSchools school, bool positive, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> Unit.h:1126</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01126">Unit::ApplyResistanceBuffModsMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00754">Unit::IsPet()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00292">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../#l00283">SPELL_SCHOOL_NORMAL</a>, <a class="el" href="../../#l00128">TOTAL_VALUE</a>, and <a class="el" href="../../#l00172">UNIT_MOD_RESISTANCE_START</a>.</p>

</div>
</div>
<a id="a3412eb30c1a4bd66b8cca040fc9ef6d1" name="a3412eb30c1a4bd66b8cca040fc9ef6d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3412eb30c1a4bd66b8cca040fc9ef6d1">&#9670;&#160;</a></span>HandleAuraModResistanceExclusive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModResistanceExclusive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4315</span>{</div>
<div class="line"><span class="lineno"> 4316</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4317</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4318</span> </div>
<div class="line"><span class="lineno"> 4319</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4320</span> </div>
<div class="line"><span class="lineno"> 4321</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a3bb8a71f4ae9af551f71e9eb2c9c3325">int8</a> x = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; x &lt; <a class="code hl_variable" href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; x++)</div>
<div class="line"><span class="lineno"> 4322</span>    {</div>
<div class="line"><span class="lineno"> 4323</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(1 &lt;&lt; x))</div>
<div class="line"><span class="lineno"> 4324</span>        {</div>
<div class="line"><span class="lineno"> 4325</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b11b9c93b383ee00d362c72e4ba7e8e">GetMaxPositiveAuraModifierByMiscMask</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a5d113c39c499d21187268b3f0200371c">SPELL_AURA_MOD_RESISTANCE_EXCLUSIVE</a>, 1 &lt;&lt; x, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 4326</span>            <span class="keywordflow">if</span> (amount &lt; <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><span class="lineno"> 4327</span>            {</div>
<div class="line"><span class="lineno"> 4328</span>                <span class="keywordtype">float</span> value = float(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() - amount);</div>
<div class="line"><span class="lineno"> 4329</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a> + x), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea6e506f81d8257be9b031ecaf9d9922d1">BASE_VALUE</a>, value, apply);</div>
<div class="line"><span class="lineno"> 4330</span>                <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4331</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af2f5b6a3bb1be04e3b09e8a96e744d34">ApplyResistanceBuffModsMod</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a>(x), aurApp-&gt;IsPositive(), value, apply);</div>
<div class="line"><span class="lineno"> 4332</span>            }</div>
<div class="line"><span class="lineno"> 4333</span>        }</div>
<div class="line"><span class="lineno"> 4334</span>    }</div>
<div class="line"><span class="lineno"> 4335</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a5d113c39c499d21187268b3f0200371c"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a5d113c39c499d21187268b3f0200371c">SPELL_AURA_MOD_RESISTANCE_EXCLUSIVE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_RESISTANCE_EXCLUSIVE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:206</div></div>
<div class="ttc" id="aa03515_html_aa21edecdaa2e077b2b87bbe5f2b2e7eea6e506f81d8257be9b031ecaf9d9922d1"><div class="ttname"><a href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea6e506f81d8257be9b031ecaf9d9922d1">BASE_VALUE</a></div><div class="ttdeci">@ BASE_VALUE</div><div class="ttdef"><b>Definition:</b> Unit.h:126</div></div>
<div class="ttc" id="aa08518_html_a0b11b9c93b383ee00d362c72e4ba7e8e"><div class="ttname"><a href="../../db/df9/a08518.html#a0b11b9c93b383ee00d362c72e4ba7e8e">Unit::GetMaxPositiveAuraModifierByMiscMask</a></div><div class="ttdeci">int32 GetMaxPositiveAuraModifierByMiscMask(AuraType auratype, uint32 misc_mask, const AuraEffect *except=nullptr) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5986</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01126">Unit::ApplyResistanceBuffModsMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00126">BASE_VALUE</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l05986">Unit::GetMaxPositiveAuraModifierByMiscMask()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00068">AuraApplication::IsPositive()</a>, <a class="el" href="../../#l00292">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../#l00206">SPELL_AURA_MOD_RESISTANCE_EXCLUSIVE</a>, <a class="el" href="../../#l00283">SPELL_SCHOOL_NORMAL</a>, and <a class="el" href="../../#l00172">UNIT_MOD_RESISTANCE_START</a>.</p>

</div>
</div>
<a id="a501803cfbe4e5b568eb98e32b2c26186" name="a501803cfbe4e5b568eb98e32b2c26186"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a501803cfbe4e5b568eb98e32b2c26186">&#9670;&#160;</a></span>HandleAuraModResistenceOfStatPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModResistenceOfStatPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4610</span>{</div>
<div class="line"><span class="lineno"> 4611</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4612</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4613</span> </div>
<div class="line"><span class="lineno"> 4614</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4615</span> </div>
<div class="line"><span class="lineno"> 4616</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4617</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4618</span> </div>
<div class="line"><span class="lineno"> 4619</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() != <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>)</div>
<div class="line"><span class="lineno"> 4620</span>    {</div>
<div class="line"><span class="lineno"> 4621</span>        <span class="comment">// support required adding replace UpdateArmor by loop by UpdateResistence at intellect update</span></div>
<div class="line"><span class="lineno"> 4622</span>        <span class="comment">// and include in UpdateResistence same code as in UpdateArmor for aura mod apply.</span></div>
<div class="line"><span class="lineno"> 4623</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;Aura SPELL_AURA_MOD_RESISTANCE_OF_STAT_PERCENT(182) does not work for non-armor type resistances!&quot;</span>);</div>
<div class="line"><span class="lineno"> 4624</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4625</span>    }</div>
<div class="line"><span class="lineno"> 4626</span> </div>
<div class="line"><span class="lineno"> 4627</span>    <span class="comment">// Recalculate Armor</span></div>
<div class="line"><span class="lineno"> 4628</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8bce30ad2c60dd476b6b48e5a33d2157">UpdateArmor</a>();</div>
<div class="line"><span class="lineno"> 4629</span>}</div>
<div class="ttc" id="aa00035_html_a43832e3fa8508deb4ce43e520005fcd9"><div class="ttname"><a href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR(filterType__,...)</div><div class="ttdef"><b>Definition:</b> Log.h:157</div></div>
<div class="ttc" id="aa02771_html_aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42"><div class="ttname"><a href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a></div><div class="ttdeci">@ SPELL_SCHOOL_MASK_NORMAL</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:297</div></div>
<div class="ttc" id="aa08518_html_a8bce30ad2c60dd476b6b48e5a33d2157"><div class="ttname"><a href="../../db/df9/a08518.html#a8bce30ad2c60dd476b6b48e5a33d2157">Unit::UpdateArmor</a></div><div class="ttdeci">virtual void UpdateArmor()=0</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00157">LOG_ERROR</a>, <a class="el" href="../../#l00297">SPELL_SCHOOL_MASK_NORMAL</a>, and <a class="el" href="../../db/df9/a08518.html#a8bce30ad2c60dd476b6b48e5a33d2157">Unit::UpdateArmor()</a>.</p>

</div>
</div>
<a id="ab21864f1999f7797e2287c722c6f0f83" name="ab21864f1999f7797e2287c722c6f0f83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab21864f1999f7797e2287c722c6f0f83">&#9670;&#160;</a></span>HandleAuraModRoot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModRoot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3513</span>{</div>
<div class="line"><span class="lineno"> 3514</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3515</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3516</span> </div>
<div class="line"><span class="lineno"> 3517</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3518</span> </div>
<div class="line"><span class="lineno"> 3519</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a828f4fc42209162a104a10d1f70838d4">SetControlled</a>(apply, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a50d4f70d273dc4674d4f56fcab462a14">UNIT_STATE_ROOT</a>);</div>
<div class="line"><span class="lineno"> 3520</span>}</div>
<div class="ttc" id="aa03521_html_ae51d2ecb71f7a5cb3882982a622c9544a50d4f70d273dc4674d4f56fcab462a14"><div class="ttname"><a href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a50d4f70d273dc4674d4f56fcab462a14">UNIT_STATE_ROOT</a></div><div class="ttdeci">@ UNIT_STATE_ROOT</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:159</div></div>
<div class="ttc" id="aa08518_html_a828f4fc42209162a104a10d1f70838d4"><div class="ttname"><a href="../../db/df9/a08518.html#a828f4fc42209162a104a10d1f70838d4">Unit::SetControlled</a></div><div class="ttdeci">void SetControlled(bool apply, UnitState state, Unit *source=nullptr, bool isFear=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:18030</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l18030">Unit::SetControlled()</a>, and <a class="el" href="../../#l00159">UNIT_STATE_ROOT</a>.</p>

</div>
</div>
<a id="aad290467c397f70ff3ca4c24961a05fb" name="aad290467c397f70ff3ca4c24961a05fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad290467c397f70ff3ca4c24961a05fb">&#9670;&#160;</a></span>HandleAuraModScale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModScale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2772</span>{</div>
<div class="line"><span class="lineno"> 2773</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 2774</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2775</span> </div>
<div class="line"><span class="lineno"> 2776</span>    aurApp-&gt;GetTarget()-&gt;RecalculateObjectScale();</div>
<div class="line"><span class="lineno"> 2777</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00050">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../#l16750">Unit::RecalculateObjectScale()</a>.</p>

</div>
</div>
<a id="a45ef0e9663bb6e5c2fe8d1d90ac670a1" name="a45ef0e9663bb6e5c2fe8d1d90ac670a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45ef0e9663bb6e5c2fe8d1d90ac670a1">&#9670;&#160;</a></span>HandleAuraModSchoolImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModSchoolImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000114">Todo:</a></b></dt><dd>: optimalize this cycle - use RemoveAurasWithInterruptFlags call or something else </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 4228</span>{</div>
<div class="line"><span class="lineno"> 4229</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 4230</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4231</span> </div>
<div class="line"><span class="lineno"> 4232</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4233</span> </div>
<div class="line"><span class="lineno"> 4234</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ac7e02328e2b7e12ee79becbf777f8b3e">IMMUNITY_SCHOOL</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), (apply));</div>
<div class="line"><span class="lineno"> 4235</span> </div>
<div class="line"><span class="lineno"> 4236</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Mechanic == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a>)</div>
<div class="line"><span class="lineno"> 4237</span>    {</div>
<div class="line"><span class="lineno"> 4238</span>        <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 4239</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a752f5f516257bfdf139098c29a55c466">AddUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>);</div>
<div class="line"><span class="lineno"> 4240</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4241</span>        {</div>
<div class="line"><span class="lineno"> 4242</span>            <span class="keywordtype">bool</span> banishFound = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 4243</span>            <a class="code hl_typedef" href="../../db/df9/a08518.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; banishAuras = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>());</div>
<div class="line"><span class="lineno"> 4244</span>            <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator i = banishAuras.begin(); i != banishAuras.end(); ++i)</div>
<div class="line"><span class="lineno"> 4245</span>                <span class="keywordflow">if</span> ((*i)-&gt;GetSpellInfo()-&gt;Mechanic == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a>)</div>
<div class="line"><span class="lineno"> 4246</span>                {</div>
<div class="line"><span class="lineno"> 4247</span>                    banishFound = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 4248</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4249</span>                }</div>
<div class="line"><span class="lineno"> 4250</span>            <span class="keywordflow">if</span> (!banishFound)</div>
<div class="line"><span class="lineno"> 4251</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0234fee1df2999bda3ca22449164f7b5">ClearUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>);</div>
<div class="line"><span class="lineno"> 4252</span>        }</div>
<div class="line"><span class="lineno"> 4253</span>    }</div>
<div class="line"><span class="lineno"> 4254</span> </div>
<div class="line"><span class="lineno"> 4255</span>    <span class="keywordflow">if</span> (apply &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>)</div>
<div class="line"><span class="lineno"> 4256</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aee3106d8223e3a574ea629423fea1b91">RemoveAurasWithInterruptFlags</a>(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><span class="lineno"> 4257</span> </div>
<div class="line"><span class="lineno"> 4258</span>    <span class="comment">// remove all flag auras (they are positive, but they must be removed when you are immune)</span></div>
<div class="line"><span class="lineno"> 4259</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>)</div>
<div class="line"><span class="lineno"> 4260</span>            &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a583cc1b9a8909370e4d51a890d897668aeaca30d371d54c1aabf98fc58134ee62">SPELL_ATTR2_FAIL_ON_ALL_TARGETS_IMMUNE</a>))</div>
<div class="line"><span class="lineno"> 4261</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aee3106d8223e3a574ea629423fea1b91">RemoveAurasWithInterruptFlags</a>(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><span class="lineno"> 4262</span> </div>
<div class="line"><span class="lineno"> 4264</span>    <span class="keywordflow">if</span> ((apply)</div>
<div class="line"><span class="lineno"> 4265</span>            &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>)</div>
<div class="line"><span class="lineno"> 4266</span>            &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;IsPositive())                       <span class="comment">//Only positive immunity removes auras</span></div>
<div class="line"><span class="lineno"> 4267</span>    {</div>
<div class="line"><span class="lineno"> 4268</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> school_mask = <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><span class="lineno"> 4269</span>        <a class="code hl_typedef" href="../../db/df9/a08518.html#a32f102f941cf4a53fe17e7f7e957150a">Unit::AuraApplicationMap</a>&amp; Auras = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#adc7150ef9ed6fc45dc84ac504fd75141">GetAppliedAuras</a>();</div>
<div class="line"><span class="lineno"> 4270</span>        <span class="keywordflow">for</span> (Unit::AuraApplicationMap::iterator iter = Auras.begin(); iter != Auras.end();)</div>
<div class="line"><span class="lineno"> 4271</span>        {</div>
<div class="line"><span class="lineno"> 4272</span>            <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* spell = iter-&gt;second-&gt;GetBase()-&gt;GetSpellInfo();</div>
<div class="line"><span class="lineno"> 4273</span>            <span class="keywordflow">if</span> ((spell-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a8dc618d81b8658f72b686f8ac9e90829">GetSchoolMask</a>() &amp; school_mask)<span class="comment">//Check for school mask</span></div>
<div class="line"><span class="lineno"> 4274</span>                    &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;CanDispelAura(spell)</div>
<div class="line"><span class="lineno"> 4275</span>                    &amp;&amp; !iter-&gt;second-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#adef74790281b92d72ac2c2118a665096">IsPositive</a>()          <span class="comment">//Don&#39;t remove positive spells</span></div>
<div class="line"><span class="lineno"> 4276</span>                    &amp;&amp; spell-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a49bc14059c2bd3785231c52e0d54d382">Id</a> != <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())               <span class="comment">//Don&#39;t remove self</span></div>
<div class="line"><span class="lineno"> 4277</span>            {</div>
<div class="line"><span class="lineno"> 4278</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(iter);</div>
<div class="line"><span class="lineno"> 4279</span>            }</div>
<div class="line"><span class="lineno"> 4280</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4281</span>                ++iter;</div>
<div class="line"><span class="lineno"> 4282</span>        }</div>
<div class="line"><span class="lineno"> 4283</span>    }</div>
<div class="line"><span class="lineno"> 4284</span>}</div>
<div class="ttc" id="aa02771_html_a583cc1b9a8909370e4d51a890d897668aeaca30d371d54c1aabf98fc58134ee62"><div class="ttname"><a href="../../d0/dbd/a02771.html#a583cc1b9a8909370e4d51a890d897668aeaca30d371d54c1aabf98fc58134ee62">SPELL_ATTR2_FAIL_ON_ALL_TARGETS_IMMUNE</a></div><div class="ttdeci">@ SPELL_ATTR2_FAIL_ON_ALL_TARGETS_IMMUNE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:477</div></div>
<div class="ttc" id="aa02771_html_a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be"><div class="ttname"><a href="../../d0/dbd/a02771.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a></div><div class="ttdeci">@ SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:434</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a></div><div class="ttdeci">@ MECHANIC_BANISH</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1343</div></div>
<div class="ttc" id="aa02771_html_a91d505a1e789c6ea6a338f3a3c85b6b9ac7e02328e2b7e12ee79becbf777f8b3e"><div class="ttname"><a href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ac7e02328e2b7e12ee79becbf777f8b3e">IMMUNITY_SCHOOL</a></div><div class="ttdeci">@ IMMUNITY_SCHOOL</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1396</div></div>
<div class="ttc" id="aa03521_html_ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505"><div class="ttname"><a href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a></div><div class="ttdeci">@ UNIT_STATE_ISOLATED</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:162</div></div>
<div class="ttc" id="aa08518_html_a0234fee1df2999bda3ca22449164f7b5"><div class="ttname"><a href="../../db/df9/a08518.html#a0234fee1df2999bda3ca22449164f7b5">Unit::ClearUnitState</a></div><div class="ttdeci">void ClearUnitState(uint32 f)</div><div class="ttdef"><b>Definition:</b> Unit.h:702</div></div>
<div class="ttc" id="aa08518_html_a752f5f516257bfdf139098c29a55c466"><div class="ttname"><a href="../../db/df9/a08518.html#a752f5f516257bfdf139098c29a55c466">Unit::AddUnitState</a></div><div class="ttdeci">void AddUnitState(uint32 f)</div><div class="ttdef"><b>Definition:</b> Unit.h:700</div></div>
<div class="ttc" id="aa08518_html_aee3106d8223e3a574ea629423fea1b91"><div class="ttname"><a href="../../db/df9/a08518.html#aee3106d8223e3a574ea629423fea1b91">Unit::RemoveAurasWithInterruptFlags</a></div><div class="ttdeci">void RemoveAurasWithInterruptFlags(uint32 flag, uint32 except=0, bool isAutoshot=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5181</div></div>
<div class="ttc" id="aa10898_html_a8dc618d81b8658f72b686f8ac9e90829"><div class="ttname"><a href="../../d2/db6/a10898.html#a8dc618d81b8658f72b686f8ac9e90829">SpellInfo::GetSchoolMask</a></div><div class="ttdeci">SpellSchoolMask GetSchoolMask() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1987</div></div>
<div class="ttc" id="aa10898_html_adef74790281b92d72ac2c2118a665096"><div class="ttname"><a href="../../d2/db6/a10898.html#adef74790281b92d72ac2c2118a665096">SpellInfo::IsPositive</a></div><div class="ttdeci">bool IsPositive() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1237</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00700">Unit::AddUnitState()</a>, <a class="el" href="../../#l13384">Unit::ApplySpellImmune()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00063">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../#l00702">Unit::ClearUnitState()</a>, <a class="el" href="../../#l01304">Unit::GetAppliedAuras()</a>, <a class="el" href="../../#l01349">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l01987">SpellInfo::GetSchoolMask()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l01396">IMMUNITY_SCHOOL</a>, <a class="el" href="../../#l01237">SpellInfo::IsPositive()</a>, <a class="el" href="../../#l01343">MECHANIC_BANISH</a>, <a class="el" href="../../#l04776">Unit::RemoveAura()</a>, <a class="el" href="../../#l05181">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../#l00434">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>, <a class="el" href="../../#l00477">SPELL_ATTR2_FAIL_ON_ALL_TARGETS_IMMUNE</a>, <a class="el" href="../../#l00297">SPELL_SCHOOL_MASK_NORMAL</a>, and <a class="el" href="../../#l00162">UNIT_STATE_ISOLATED</a>.</p>

</div>
</div>
<a id="a05a18e948bfca43240aa65cb7872c909" name="a05a18e948bfca43240aa65cb7872c909"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05a18e948bfca43240aa65cb7872c909">&#9670;&#160;</a></span>HandleAuraModShapeshift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModShapeshift </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1863</span>{</div>
<div class="line"><span class="lineno"> 1864</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a4ba94c36d138e079c354b69fe20d3d91">AURA_EFFECT_HANDLE_REAL_OR_REAPPLY_MASK</a>))</div>
<div class="line"><span class="lineno"> 1865</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1866</span> </div>
<div class="line"><span class="lineno"> 1867</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1868</span> </div>
<div class="line"><span class="lineno"> 1869</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> modelid = 0;</div>
<div class="line"><span class="lineno"> 1870</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>;</div>
<div class="line"><span class="lineno"> 1871</span>    <a class="code hl_enumeration" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547c">ShapeshiftForm</a> form = <a class="code hl_enumeration" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547c">ShapeshiftForm</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 1872</span> </div>
<div class="line"><span class="lineno"> 1873</span>    <span class="keywordflow">switch</span> (form)</div>
<div class="line"><span class="lineno"> 1874</span>    {</div>
<div class="line"><span class="lineno"> 1875</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:                                      <span class="comment">// 0x01</span></div>
<div class="line"><span class="lineno"> 1876</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cadcc1e9eb63ae2e0530c35f95767cfa5a">FORM_GHOUL</a>:                                    <span class="comment">// 0x07</span></div>
<div class="line"><span class="lineno"> 1877</span>            <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a>;</div>
<div class="line"><span class="lineno"> 1878</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1879</span> </div>
<div class="line"><span class="lineno"> 1880</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:                                     <span class="comment">// 0x05</span></div>
<div class="line"><span class="lineno"> 1881</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:                                 <span class="comment">// 0x08</span></div>
<div class="line"><span class="lineno"> 1882</span> </div>
<div class="line"><span class="lineno"> 1883</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac6f4bdb76e70e28c403bbd02bf4a969d">FORM_BATTLESTANCE</a>:                             <span class="comment">// 0x11</span></div>
<div class="line"><span class="lineno"> 1884</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f">FORM_DEFENSIVESTANCE</a>:                          <span class="comment">// 0x12</span></div>
<div class="line"><span class="lineno"> 1885</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca6a2bb66552732011772c2d2ac6dc21b0">FORM_BERSERKERSTANCE</a>:                          <span class="comment">// 0x13</span></div>
<div class="line"><span class="lineno"> 1886</span>            <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>;</div>
<div class="line"><span class="lineno"> 1887</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1888</span> </div>
<div class="line"><span class="lineno"> 1889</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca">FORM_TREE</a>:                                     <span class="comment">// 0x02</span></div>
<div class="line"><span class="lineno"> 1890</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230">FORM_TRAVEL</a>:                                   <span class="comment">// 0x03</span></div>
<div class="line"><span class="lineno"> 1891</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac2743246d577352cdae533578e3c8c1b">FORM_AQUA</a>:                                     <span class="comment">// 0x04</span></div>
<div class="line"><span class="lineno"> 1892</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac0d940f97165e877e8c3ec0fed5074c6">FORM_AMBIENT</a>:                                  <span class="comment">// 0x06</span></div>
<div class="line"><span class="lineno"> 1893</span> </div>
<div class="line"><span class="lineno"> 1894</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca8658562aed63e25b6812ea6a2ac66516">FORM_STEVES_GHOUL</a>:                             <span class="comment">// 0x09</span></div>
<div class="line"><span class="lineno"> 1895</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca82ca071a35cb5b21619529313156be1c">FORM_THARONJA_SKELETON</a>:                        <span class="comment">// 0x0A</span></div>
<div class="line"><span class="lineno"> 1896</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cae52ec1864a96665f18b681a021b40d1e">FORM_TEST_OF_STRENGTH</a>:                         <span class="comment">// 0x0B</span></div>
<div class="line"><span class="lineno"> 1897</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cad1fdce3b8651f9cc379452c672b19245">FORM_BLB_PLAYER</a>:                               <span class="comment">// 0x0C</span></div>
<div class="line"><span class="lineno"> 1898</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca54c306ce24ba265a5a6b047242d3a5a7">FORM_SHADOW_DANCE</a>:                             <span class="comment">// 0x0D</span></div>
<div class="line"><span class="lineno"> 1899</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca42d6a809df54cb1ee4efeeeed671aece">FORM_CREATUREBEAR</a>:                             <span class="comment">// 0x0E</span></div>
<div class="line"><span class="lineno"> 1900</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa1fa851e463bf75f379d7b6a668c0cff">FORM_CREATURECAT</a>:                              <span class="comment">// 0x0F</span></div>
<div class="line"><span class="lineno"> 1901</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cab77bbfbe52ce8a4876d6c762735cfbc9">FORM_GHOSTWOLF</a>:                                <span class="comment">// 0x10</span></div>
<div class="line"><span class="lineno"> 1902</span> </div>
<div class="line"><span class="lineno"> 1903</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca28e5c8f9dbe323d4b96def6b2ffaeabc">FORM_TEST</a>:                                     <span class="comment">// 0x14</span></div>
<div class="line"><span class="lineno"> 1904</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa9b049ea762f29c2dfb7de1ec17fb4ec">FORM_ZOMBIE</a>:                                   <span class="comment">// 0x15</span></div>
<div class="line"><span class="lineno"> 1905</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cadc094fb8dc4c8a87fffe3eac62b84ad4">FORM_METAMORPHOSIS</a>:                            <span class="comment">// 0x16</span></div>
<div class="line"><span class="lineno"> 1906</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca1eb0a56ef3fbef183e32a6dc1a8a5f73">FORM_UNDEAD</a>:                                   <span class="comment">// 0x19</span></div>
<div class="line"><span class="lineno"> 1907</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca6ef7260c45de9cf172c2fa5cc768a181">FORM_MASTER_ANGLER</a>:                            <span class="comment">// 0x1A</span></div>
<div class="line"><span class="lineno"> 1908</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca84efb6dc7feed91df401b04c5d4f9353">FORM_FLIGHT_EPIC</a>:                              <span class="comment">// 0x1B</span></div>
<div class="line"><span class="lineno"> 1909</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca45e034d920948e0ba5085eb103660161">FORM_SHADOW</a>:                                   <span class="comment">// 0x1C</span></div>
<div class="line"><span class="lineno"> 1910</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa2a3be49d483fe70fcffab38a9787557">FORM_FLIGHT</a>:                                   <span class="comment">// 0x1D</span></div>
<div class="line"><span class="lineno"> 1911</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac5b4b27f0234cd99d2a201732a392b85">FORM_STEALTH</a>:                                  <span class="comment">// 0x1E</span></div>
<div class="line"><span class="lineno"> 1912</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a>:                                  <span class="comment">// 0x1F</span></div>
<div class="line"><span class="lineno"> 1913</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca6580b40dee982ab6f82c1c59d34988de">FORM_SPIRITOFREDEMPTION</a>:                       <span class="comment">// 0x20</span></div>
<div class="line"><span class="lineno"> 1914</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1915</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1916</span>            <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;Auras: Unknown Shapeshift Type: {}&quot;</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 1917</span>    }</div>
<div class="line"><span class="lineno"> 1918</span> </div>
<div class="line"><span class="lineno"> 1919</span>    modelid = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af9746f07fe538ca5db7a6206e53637f9">GetModelForForm</a>(form, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 1920</span> </div>
<div class="line"><span class="lineno"> 1921</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1922</span>    {</div>
<div class="line"><span class="lineno"> 1923</span>        <span class="comment">// remove polymorph before changing display id to keep new display id</span></div>
<div class="line"><span class="lineno"> 1924</span>        <span class="keywordflow">switch</span> (form)</div>
<div class="line"><span class="lineno"> 1925</span>        {</div>
<div class="line"><span class="lineno"> 1926</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><span class="lineno"> 1927</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca">FORM_TREE</a>:</div>
<div class="line"><span class="lineno"> 1928</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230">FORM_TRAVEL</a>:</div>
<div class="line"><span class="lineno"> 1929</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac2743246d577352cdae533578e3c8c1b">FORM_AQUA</a>:</div>
<div class="line"><span class="lineno"> 1930</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><span class="lineno"> 1931</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><span class="lineno"> 1932</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca84efb6dc7feed91df401b04c5d4f9353">FORM_FLIGHT_EPIC</a>:</div>
<div class="line"><span class="lineno"> 1933</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa2a3be49d483fe70fcffab38a9787557">FORM_FLIGHT</a>:</div>
<div class="line"><span class="lineno"> 1934</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a>:</div>
<div class="line"><span class="lineno"> 1935</span>                {</div>
<div class="line"><span class="lineno"> 1936</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* player = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno"> 1937</span>                    {</div>
<div class="line"><span class="lineno"> 1938</span>                        player-&gt;SetCanTeleport(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1939</span>                    }</div>
<div class="line"><span class="lineno"> 1940</span>                    <span class="comment">// remove movement affects</span></div>
<div class="line"><span class="lineno"> 1941</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a18139a1595cccec72363ebd1de943d63">RemoveAurasByShapeShift</a>();</div>
<div class="line"><span class="lineno"> 1942</span> </div>
<div class="line"><span class="lineno"> 1943</span>                    <span class="comment">// and polymorphic affects</span></div>
<div class="line"><span class="lineno"> 1944</span>                    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a356d82b82f6fbae78cb55ecb7bb67c0e">IsPolymorphed</a>())</div>
<div class="line"><span class="lineno"> 1945</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad0d777d08ff539fa2e7be49e948025da">getTransForm</a>());</div>
<div class="line"><span class="lineno"> 1946</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1947</span>                }</div>
<div class="line"><span class="lineno"> 1948</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1949</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1950</span>        }</div>
<div class="line"><span class="lineno"> 1951</span> </div>
<div class="line"><span class="lineno"> 1952</span>        <span class="comment">// remove other shapeshift before applying a new one</span></div>
<div class="line"><span class="lineno"> 1953</span>        <span class="comment">// xinef: rogue shouldnt be wrapped by this check (shadow dance vs stealth)</span></div>
<div class="line"><span class="lineno"> 1954</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyName != <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9160b2e3a87a908af25c9a594295c0c1">SPELLFAMILY_ROGUE</a>)</div>
<div class="line"><span class="lineno"> 1955</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1c3516bb8442ba5d970c928ffc976689">SPELL_AURA_MOD_SHAPESHIFT</a>, <a class="code hl_variable" href="../../db/d40/a08190.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>());</div>
<div class="line"><span class="lineno"> 1956</span> </div>
<div class="line"><span class="lineno"> 1957</span>        <span class="comment">// stop handling the effect if it was removed by linked event</span></div>
<div class="line"><span class="lineno"> 1958</span>        <span class="keywordflow">if</span> (aurApp-&gt;GetRemoveMode())</div>
<div class="line"><span class="lineno"> 1959</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1960</span> </div>
<div class="line"><span class="lineno"> 1961</span>        <span class="keywordflow">if</span> (<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> != <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>)</div>
<div class="line"><span class="lineno"> 1962</span>        {</div>
<div class="line"><span class="lineno"> 1963</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> oldPower = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>);</div>
<div class="line"><span class="lineno"> 1964</span>            <span class="comment">// reset power to default values only at power change</span></div>
<div class="line"><span class="lineno"> 1965</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad44d31430fab9282a79e8682822ccd9c">getPowerType</a>() != <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>)</div>
<div class="line"><span class="lineno"> 1966</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae3f55fb49c678fcf64976fa0ce77d0c1">setPowerType</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>);</div>
<div class="line"><span class="lineno"> 1967</span> </div>
<div class="line"><span class="lineno"> 1968</span>            <span class="keywordflow">switch</span> (form)</div>
<div class="line"><span class="lineno"> 1969</span>            {</div>
<div class="line"><span class="lineno"> 1970</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><span class="lineno"> 1971</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><span class="lineno"> 1972</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><span class="lineno"> 1973</span>                    {</div>
<div class="line"><span class="lineno"> 1974</span>                        <span class="comment">// get furor proc chance</span></div>
<div class="line"><span class="lineno"> 1975</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> FurorChance = 0;</div>
<div class="line"><span class="lineno"> 1976</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a> <span class="keyword">const</span>* dummy = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad0d63bc686dc3c20de0ace8d4da4fc28">GetDummyAuraEffect</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>, 238, 0))</div>
<div class="line"><span class="lineno"> 1977</span>                            FurorChance = std::max(dummy-&gt;GetAmount(), 0);</div>
<div class="line"><span class="lineno"> 1978</span> </div>
<div class="line"><span class="lineno"> 1979</span>                        <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>())</div>
<div class="line"><span class="lineno"> 1980</span>                        {</div>
<div class="line"><span class="lineno"> 1981</span>                            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><span class="lineno"> 1982</span>                                {</div>
<div class="line"><span class="lineno"> 1983</span>                                    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> basePoints = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(std::min(oldPower, FurorChance));</div>
<div class="line"><span class="lineno"> 1984</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a41781ed2f15641ad0aa30b2767ab2b66">SetPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a>, 0);</div>
<div class="line"><span class="lineno"> 1985</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 17099, &amp;basePoints, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1986</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1987</span>                                }</div>
<div class="line"><span class="lineno"> 1988</span>                            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><span class="lineno"> 1989</span>                            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><span class="lineno"> 1990</span>                                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 99) &lt; FurorChance)</div>
<div class="line"><span class="lineno"> 1991</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 17057, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1992</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1993</span>                            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1994</span>                                {</div>
<div class="line"><span class="lineno"> 1995</span>                                    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> newEnergy = std::min(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a>), FurorChance);</div>
<div class="line"><span class="lineno"> 1996</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a41781ed2f15641ad0aa30b2767ab2b66">SetPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a>, newEnergy);</div>
<div class="line"><span class="lineno"> 1997</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1998</span>                                }</div>
<div class="line"><span class="lineno"> 1999</span>                        }</div>
<div class="line"><span class="lineno"> 2000</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2001</span>                    }</div>
<div class="line"><span class="lineno"> 2002</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2003</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2004</span>            }</div>
<div class="line"><span class="lineno"> 2005</span>        }</div>
<div class="line"><span class="lineno"> 2006</span>        <span class="comment">// stop handling the effect if it was removed by linked event</span></div>
<div class="line"><span class="lineno"> 2007</span>        <span class="keywordflow">if</span> (aurApp-&gt;GetRemoveMode())</div>
<div class="line"><span class="lineno"> 2008</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2009</span> </div>
<div class="line"><span class="lineno"> 2010</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aef7ea224b5f42ee3de39782345dfe931">SetShapeshiftForm</a>(form);</div>
<div class="line"><span class="lineno"> 2011</span>        <span class="comment">// xinef: allow shapeshift to override model id if forced transform aura is not present!</span></div>
<div class="line"><span class="lineno"> 2012</span>        <span class="keywordflow">if</span> (modelid &gt; 0)</div>
<div class="line"><span class="lineno"> 2013</span>        {</div>
<div class="line"><span class="lineno"> 2014</span>            <span class="keywordtype">bool</span> allow = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2015</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad0d777d08ff539fa2e7be49e948025da">getTransForm</a>() &amp;&amp; !(target-&gt;<a class="code hl_function" href="../../d5/da9/a08234.html#a2682e56ae4f0ce4b517a8ba3cd2798b1">GetMapId</a>() == 560 <span class="comment">/*The Escape From Durnholde*/</span>))</div>
<div class="line"><span class="lineno"> 2016</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* transformSpellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad0d777d08ff539fa2e7be49e948025da">getTransForm</a>()))</div>
<div class="line"><span class="lineno"> 2017</span>                    <span class="keywordflow">if</span> (transformSpellInfo-&gt;HasAttribute(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada6a12b14654225a9ccea65799ce6fc780">SPELL_ATTR0_NO_IMMUNITIES</a>) || !transformSpellInfo-&gt;IsPositive())</div>
<div class="line"><span class="lineno"> 2018</span>                        allow = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2019</span> </div>
<div class="line"><span class="lineno"> 2020</span>            <span class="keywordflow">if</span> (allow)</div>
<div class="line"><span class="lineno"> 2021</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(modelid);</div>
<div class="line"><span class="lineno"> 2022</span>        }</div>
<div class="line"><span class="lineno"> 2023</span>    }</div>
<div class="line"><span class="lineno"> 2024</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2025</span>    {</div>
<div class="line"><span class="lineno"> 2026</span>        <span class="comment">// reset model id if no other auras present</span></div>
<div class="line"><span class="lineno"> 2027</span>        <span class="comment">// may happen when aura is applied on linked event on aura removal</span></div>
<div class="line"><span class="lineno"> 2028</span>        <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1c3516bb8442ba5d970c928ffc976689">SPELL_AURA_MOD_SHAPESHIFT</a>))</div>
<div class="line"><span class="lineno"> 2029</span>        {</div>
<div class="line"><span class="lineno"> 2030</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aef7ea224b5f42ee3de39782345dfe931">SetShapeshiftForm</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa094ef89cc14332f71872d1864ec2543">FORM_NONE</a>);</div>
<div class="line"><span class="lineno"> 2031</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a59bc8d45ae762a93ec02ba32e7adde56">IsClass</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a86e4e3df7a5142175aa5df522d3346cfa312316ea844ad336fad9eb5a00348636">CLASS_DRUID</a>, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a2a9983288cb2a06108c1d1a94c96c046a14fe87d018c5ff3c07e81b54fb10ae90">CLASS_CONTEXT_ABILITY</a>))</div>
<div class="line"><span class="lineno"> 2032</span>            {</div>
<div class="line"><span class="lineno"> 2033</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae3f55fb49c678fcf64976fa0ce77d0c1">setPowerType</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>);</div>
<div class="line"><span class="lineno"> 2034</span>                <span class="comment">// Remove movement impairing effects also when shifting out</span></div>
<div class="line"><span class="lineno"> 2035</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a18139a1595cccec72363ebd1de943d63">RemoveAurasByShapeShift</a>();</div>
<div class="line"><span class="lineno"> 2036</span>            }</div>
<div class="line"><span class="lineno"> 2037</span>        }</div>
<div class="line"><span class="lineno"> 2038</span> </div>
<div class="line"><span class="lineno"> 2039</span>        <span class="keywordflow">if</span> (modelid &gt; 0)</div>
<div class="line"><span class="lineno"> 2040</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#acb800095887418d08fdfa8ade11f0074">RestoreDisplayId</a>();</div>
<div class="line"><span class="lineno"> 2041</span> </div>
<div class="line"><span class="lineno"> 2042</span>        <span class="keywordflow">switch</span> (form)</div>
<div class="line"><span class="lineno"> 2043</span>        {</div>
<div class="line"><span class="lineno"> 2044</span>            <span class="comment">// Nordrassil Harness - bonus</span></div>
<div class="line"><span class="lineno"> 2045</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><span class="lineno"> 2046</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><span class="lineno"> 2047</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><span class="lineno"> 2048</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* dummy = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(37315, 0))</div>
<div class="line"><span class="lineno"> 2049</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 37316, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, dummy);</div>
<div class="line"><span class="lineno"> 2050</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2051</span>            <span class="comment">// Nordrassil Regalia - bonus</span></div>
<div class="line"><span class="lineno"> 2052</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a>:</div>
<div class="line"><span class="lineno"> 2053</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* dummy = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(37324, 0))</div>
<div class="line"><span class="lineno"> 2054</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 37325, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, dummy);</div>
<div class="line"><span class="lineno"> 2055</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2056</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac6f4bdb76e70e28c403bbd02bf4a969d">FORM_BATTLESTANCE</a>:</div>
<div class="line"><span class="lineno"> 2057</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f">FORM_DEFENSIVESTANCE</a>:</div>
<div class="line"><span class="lineno"> 2058</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca6a2bb66552732011772c2d2ac6dc21b0">FORM_BERSERKERSTANCE</a>:</div>
<div class="line"><span class="lineno"> 2059</span>                {</div>
<div class="line"><span class="lineno"> 2060</span>                    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> Rage_val = 0;</div>
<div class="line"><span class="lineno"> 2061</span>                    <span class="comment">// Defensive Tactics</span></div>
<div class="line"><span class="lineno"> 2062</span>                    <span class="keywordflow">if</span> (form == <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f">FORM_DEFENSIVESTANCE</a>)</div>
<div class="line"><span class="lineno"> 2063</span>                    {</div>
<div class="line"><span class="lineno"> 2064</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5f074967d76067c52aaebbf8edd580f4">IsScriptOverriden</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, 831))</div>
<div class="line"><span class="lineno"> 2065</span>                            Rage_val += aurEff-&gt;GetAmount() * 10;</div>
<div class="line"><span class="lineno"> 2066</span>                    }</div>
<div class="line"><span class="lineno"> 2067</span>                    <span class="comment">// Stance mastery + Tactical mastery (both passive, and last have aura only in defense stance, but need apply at any stance switch)</span></div>
<div class="line"><span class="lineno"> 2068</span>                    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 2069</span>                    {</div>
<div class="line"><span class="lineno"> 2070</span>                        <span class="comment">// Stance mastery - trainer spell</span></div>
<div class="line"><span class="lineno"> 2071</span>                        <a class="code hl_typedef" href="../../d7/d13/a03365.html#a6829a36dad31b0ac277fae810007c700">PlayerSpellMap</a> <span class="keyword">const</span>&amp; sp_list = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a7c8a4e8ee95bbb01af854b79479d9247">GetSpellMap</a>();</div>
<div class="line"><span class="lineno"> 2072</span>                        <span class="keywordflow">for</span> (PlayerSpellMap::const_iterator itr = sp_list.begin(); itr != sp_list.end(); ++itr)</div>
<div class="line"><span class="lineno"> 2073</span>                        {</div>
<div class="line"><span class="lineno"> 2074</span>                            <span class="keywordflow">if</span> (itr-&gt;second-&gt;State == <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50">PLAYERSPELL_REMOVED</a> || !itr-&gt;second-&gt;IsInSpec(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><span class="lineno"> 2075</span>                                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2076</span> </div>
<div class="line"><span class="lineno"> 2077</span>                            <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(itr-&gt;first);</div>
<div class="line"><span class="lineno"> 2078</span>                            <span class="keywordflow">if</span> (spellInfo &amp;&amp; spellInfo-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a> == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba52acbcf14a96b5ed01b8a43052a26a11">SPELLFAMILY_WARRIOR</a> &amp;&amp; spellInfo-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#ac1a82f9330481616b4b87ed9eff0f785">SpellIconID</a> == 139)</div>
<div class="line"><span class="lineno"> 2079</span>                                Rage_val += target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a31bb114ec4c1defc9e19d29840c6a6d0">CalculateSpellDamage</a>(target, spellInfo, 0) * 10;</div>
<div class="line"><span class="lineno"> 2080</span>                        }</div>
<div class="line"><span class="lineno"> 2081</span> </div>
<div class="line"><span class="lineno"> 2082</span>                        <span class="comment">// Tactical Mastery - talent</span></div>
<div class="line"><span class="lineno"> 2083</span>                        <a class="code hl_typedef" href="../../d7/d13/a03365.html#a58b30b88955cb12b1f6441e41eed03b5">PlayerTalentMap</a> <span class="keyword">const</span>&amp; tp_list = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a518d9522da9ab4fcb1597f04fef45ae4">GetTalentMap</a>();</div>
<div class="line"><span class="lineno"> 2084</span>                        <span class="keywordflow">for</span> (PlayerTalentMap::const_iterator itr = tp_list.begin(); itr != tp_list.end(); ++itr)</div>
<div class="line"><span class="lineno"> 2085</span>                        {</div>
<div class="line"><span class="lineno"> 2086</span>                            <span class="keywordflow">if</span> (itr-&gt;second-&gt;State == <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50">PLAYERSPELL_REMOVED</a> || !itr-&gt;second-&gt;IsInSpec(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><span class="lineno"> 2087</span>                                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2088</span> </div>
<div class="line"><span class="lineno"> 2089</span>                            <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(itr-&gt;first);</div>
<div class="line"><span class="lineno"> 2090</span>                            <span class="keywordflow">if</span> (spellInfo &amp;&amp; spellInfo-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a> == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba52acbcf14a96b5ed01b8a43052a26a11">SPELLFAMILY_WARRIOR</a> &amp;&amp; spellInfo-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#ac1a82f9330481616b4b87ed9eff0f785">SpellIconID</a> == 139)</div>
<div class="line"><span class="lineno"> 2091</span>                                Rage_val += target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a31bb114ec4c1defc9e19d29840c6a6d0">CalculateSpellDamage</a>(target, spellInfo, 0) * 10;</div>
<div class="line"><span class="lineno"> 2092</span>                        }</div>
<div class="line"><span class="lineno"> 2093</span>                    }</div>
<div class="line"><span class="lineno"> 2094</span>                    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>) &gt; Rage_val)</div>
<div class="line"><span class="lineno"> 2095</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a41781ed2f15641ad0aa30b2767ab2b66">SetPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>, Rage_val);</div>
<div class="line"><span class="lineno"> 2096</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2097</span>                }</div>
<div class="line"><span class="lineno"> 2098</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2099</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2100</span>        }</div>
<div class="line"><span class="lineno"> 2101</span>    }</div>
<div class="line"><span class="lineno"> 2102</span> </div>
<div class="line"><span class="lineno"> 2103</span>    <span class="comment">// adding/removing linked auras</span></div>
<div class="line"><span class="lineno"> 2104</span>    <span class="comment">// add/remove the shapeshift aura&#39;s boosts</span></div>
<div class="line"><span class="lineno"> 2105</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#a66eb63a01dca27eaa327c72f03710c53">HandleShapeshiftBoosts</a>(target, apply);</div>
<div class="line"><span class="lineno"> 2106</span> </div>
<div class="line"><span class="lineno"> 2107</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 2108</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a8192d0e595c3efd54b18add812bf6be7">InitDataForForm</a>();</div>
<div class="line"><span class="lineno"> 2109</span> </div>
<div class="line"><span class="lineno"> 2110</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a59bc8d45ae762a93ec02ba32e7adde56">IsClass</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a86e4e3df7a5142175aa5df522d3346cfa312316ea844ad336fad9eb5a00348636">CLASS_DRUID</a>, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a2a9983288cb2a06108c1d1a94c96c046a14fe87d018c5ff3c07e81b54fb10ae90">CLASS_CONTEXT_ABILITY</a>))</div>
<div class="line"><span class="lineno"> 2111</span>    {</div>
<div class="line"><span class="lineno"> 2112</span>        <span class="comment">// Dash</span></div>
<div class="line"><span class="lineno"> 2113</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a30e12137ab8f3aa72ef04ef6092ffb9b">SPELL_AURA_MOD_INCREASE_SPEED</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>, 0, 0, 0x8))</div>
<div class="line"><span class="lineno"> 2114</span>            aurEff-&gt;RecalculateAmount();</div>
<div class="line"><span class="lineno"> 2115</span> </div>
<div class="line"><span class="lineno"> 2116</span>        <span class="comment">// Disarm handling</span></div>
<div class="line"><span class="lineno"> 2117</span>        <span class="comment">// If druid shifts while being disarmed we need to deal with that since forms aren&#39;t affected by disarm</span></div>
<div class="line"><span class="lineno"> 2118</span>        <span class="comment">// and also HandleAuraModDisarm is not triggered</span></div>
<div class="line"><span class="lineno"> 2119</span>        <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a2b2c033c2df168977ab5b72644e75daf">CanUseAttackType</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>))</div>
<div class="line"><span class="lineno"> 2120</span>        {</div>
<div class="line"><span class="lineno"> 2121</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d24/a08098.html">Item</a>* pItem = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6e31042962f16c90a443ff772363d22f">GetItemByPos</a>(<a class="code hl_define" href="../../d7/d13/a03365.html#ad3dd8ed856e16139eaa67147d40cf24e">INVENTORY_SLOT_BAG_0</a>, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd">EQUIPMENT_SLOT_MAINHAND</a>))</div>
<div class="line"><span class="lineno"> 2122</span>            {</div>
<div class="line"><span class="lineno"> 2123</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6d26b6e2d8c1f5d9532a739010594c68">_ApplyWeaponDamage</a>(<a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a93b8041f948d575ef2d23746324a37afa559e9d51b0cff8ac6448c07e005a13bd">EQUIPMENT_SLOT_MAINHAND</a>, pItem-&gt;GetTemplate(), <span class="keyword">nullptr</span>, apply);</div>
<div class="line"><span class="lineno"> 2124</span>            }</div>
<div class="line"><span class="lineno"> 2125</span>        }</div>
<div class="line"><span class="lineno"> 2126</span> </div>
<div class="line"><span class="lineno"> 2127</span>        <span class="comment">// Update crit chance for feral forms</span></div>
<div class="line"><span class="lineno"> 2128</span>        <span class="keywordflow">switch</span> (form)</div>
<div class="line"><span class="lineno"> 2129</span>        {</div>
<div class="line"><span class="lineno"> 2130</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><span class="lineno"> 2131</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><span class="lineno"> 2132</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><span class="lineno"> 2133</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cab77bbfbe52ce8a4876d6c762735cfbc9">FORM_GHOSTWOLF</a>:</div>
<div class="line"><span class="lineno"> 2134</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ab8087f17924c1131b42f05293686545c">UpdateAllCritPercentages</a>();</div>
<div class="line"><span class="lineno"> 2135</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2136</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2137</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2138</span>        }</div>
<div class="line"><span class="lineno"> 2139</span>    }</div>
<div class="line"><span class="lineno"> 2140</span> </div>
<div class="line"><span class="lineno"> 2141</span>    <span class="comment">// stop handling the effect if it was removed by linked event</span></div>
<div class="line"><span class="lineno"> 2142</span>    <span class="keywordflow">if</span> (apply &amp;&amp; aurApp-&gt;GetRemoveMode())</div>
<div class="line"><span class="lineno"> 2143</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2144</span> </div>
<div class="line"><span class="lineno"> 2145</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 2146</span>    {</div>
<div class="line"><span class="lineno"> 2147</span>        <a class="code hl_struct" href="../../db/d61/a27970.html">SpellShapeshiftFormEntry</a> <span class="keyword">const</span>* shapeInfo = <a class="code hl_variable" href="../../d7/da2/a03704.html#a9ba67e5170b776dea42f38ce97577946">sSpellShapeshiftFormStore</a>.LookupEntry(form);</div>
<div class="line"><span class="lineno"> 2148</span>        <span class="comment">// Learn spells for shapeshift form - no need to send action bars or add spells to spellbook</span></div>
<div class="line"><span class="lineno"> 2149</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#a8c0b93bba896da1bb3ecaac8d847ee2d">MAX_SHAPESHIFT_SPELLS</a>; ++i)</div>
<div class="line"><span class="lineno"> 2150</span>        {</div>
<div class="line"><span class="lineno"> 2151</span>            <span class="keywordflow">if</span> (!shapeInfo-&gt;<a class="code hl_variable" href="../../db/d61/a27970.html#a08f54b905e905fb5a59e449f8c613c08">stanceSpell</a>[i])</div>
<div class="line"><span class="lineno"> 2152</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2153</span>            <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 2154</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a107e0be6e83289162958bd63740896d0">_addSpell</a>(shapeInfo-&gt;<a class="code hl_variable" href="../../db/d61/a27970.html#a08f54b905e905fb5a59e449f8c613c08">stanceSpell</a>[i], <a class="code hl_define" href="../../d7/d13/a03365.html#a6a6dfeb0ddba76f8c51abbe98ea08609">SPEC_MASK_ALL</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2155</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2156</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a14874da88b7bd1006282e8250b3908ea">removeSpell</a>(shapeInfo-&gt;<a class="code hl_variable" href="../../db/d61/a27970.html#a08f54b905e905fb5a59e449f8c613c08">stanceSpell</a>[i], <a class="code hl_define" href="../../d7/d13/a03365.html#a6a6dfeb0ddba76f8c51abbe98ea08609">SPEC_MASK_ALL</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2157</span>        }</div>
<div class="line"><span class="lineno"> 2158</span>    }</div>
<div class="line"><span class="lineno"> 2159</span>}</div>
<div class="ttc" id="aa00359_html_ab17def34ccbbd868dc87a16bf35acdbd"><div class="ttname"><a href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a></div><div class="ttdeci">uint32 urand(uint32 min, uint32 max)</div><div class="ttdef"><b>Definition:</b> Random.cpp:44</div></div>
<div class="ttc" id="aa02750_html_a8c0b93bba896da1bb3ecaac8d847ee2d"><div class="ttname"><a href="../../d7/d14/a02750.html#a8c0b93bba896da1bb3ecaac8d847ee2d">MAX_SHAPESHIFT_SPELLS</a></div><div class="ttdeci">#define MAX_SHAPESHIFT_SPELLS</div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1813</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a></div><div class="ttdeci">@ POWER_RAGE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:270</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a></div><div class="ttdeci">@ POWER_ENERGY</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:272</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a></div><div class="ttdeci">@ POWER_MANA</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:269</div></div>
<div class="ttc" id="aa02771_html_a86e4e3df7a5142175aa5df522d3346cfa312316ea844ad336fad9eb5a00348636"><div class="ttname"><a href="../../d0/dbd/a02771.html#a86e4e3df7a5142175aa5df522d3346cfa312316ea844ad336fad9eb5a00348636">CLASS_DRUID</a></div><div class="ttdeci">@ CLASS_DRUID</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:151</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba52acbcf14a96b5ed01b8a43052a26a11"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba52acbcf14a96b5ed01b8a43052a26a11">SPELLFAMILY_WARRIOR</a></div><div class="ttdeci">@ SPELLFAMILY_WARRIOR</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3532</div></div>
<div class="ttc" id="aa02771_html_a9dcd0ba8d94905ba214797c12e7c44ada6a12b14654225a9ccea65799ce6fc780"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada6a12b14654225a9ccea65799ce6fc780">SPELL_ATTR0_NO_IMMUNITIES</a></div><div class="ttdeci">@ SPELL_ATTR0_NO_IMMUNITIES</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:411</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a1c3516bb8442ba5d970c928ffc976689"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1c3516bb8442ba5d970c928ffc976689">SPELL_AURA_MOD_SHAPESHIFT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_SHAPESHIFT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:99</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a30e12137ab8f3aa72ef04ef6092ffb9b"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a30e12137ab8f3aa72ef04ef6092ffb9b">SPELL_AURA_MOD_INCREASE_SPEED</a></div><div class="ttdeci">@ SPELL_AURA_MOD_INCREASE_SPEED</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:94</div></div>
<div class="ttc" id="aa03092_html_a82ebee9e3cf7eaf2ab892a6eb7796288a4ba94c36d138e079c354b69fe20d3d91"><div class="ttname"><a href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a4ba94c36d138e079c354b69fe20d3d91">AURA_EFFECT_HANDLE_REAL_OR_REAPPLY_MASK</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_REAL_OR_REAPPLY_MASK</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:51</div></div>
<div class="ttc" id="aa03365_html_a58b30b88955cb12b1f6441e41eed03b5"><div class="ttname"><a href="../../d7/d13/a03365.html#a58b30b88955cb12b1f6441e41eed03b5">PlayerTalentMap</a></div><div class="ttdeci">std::unordered_map&lt; uint32, PlayerTalent * &gt; PlayerTalentMap</div><div class="ttdef"><b>Definition:</b> Player.h:192</div></div>
<div class="ttc" id="aa03365_html_a6829a36dad31b0ac277fae810007c700"><div class="ttname"><a href="../../d7/d13/a03365.html#a6829a36dad31b0ac277fae810007c700">PlayerSpellMap</a></div><div class="ttdeci">std::unordered_map&lt; uint32, PlayerSpell * &gt; PlayerSpellMap</div><div class="ttdef"><b>Definition:</b> Player.h:193</div></div>
<div class="ttc" id="aa03365_html_a6a6dfeb0ddba76f8c51abbe98ea08609"><div class="ttname"><a href="../../d7/d13/a03365.html#a6a6dfeb0ddba76f8c51abbe98ea08609">SPEC_MASK_ALL</a></div><div class="ttdeci">#define SPEC_MASK_ALL</div><div class="ttdef"><b>Definition:</b> Player.h:177</div></div>
<div class="ttc" id="aa03365_html_aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50"><div class="ttname"><a href="../../d7/d13/a03365.html#aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50">PLAYERSPELL_REMOVED</a></div><div class="ttdeci">@ PLAYERSPELL_REMOVED</div><div class="ttdef"><b>Definition:</b> Player.h:122</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547c"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547c">ShapeshiftForm</a></div><div class="ttdeci">ShapeshiftForm</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:68</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a></div><div class="ttdeci">@ FORM_DIREBEAR</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:77</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca1eb0a56ef3fbef183e32a6dc1a8a5f73"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca1eb0a56ef3fbef183e32a6dc1a8a5f73">FORM_UNDEAD</a></div><div class="ttdeci">@ FORM_UNDEAD</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:92</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca28e5c8f9dbe323d4b96def6b2ffaeabc"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca28e5c8f9dbe323d4b96def6b2ffaeabc">FORM_TEST</a></div><div class="ttdeci">@ FORM_TEST</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:89</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230">FORM_TRAVEL</a></div><div class="ttdeci">@ FORM_TRAVEL</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:72</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca42d6a809df54cb1ee4efeeeed671aece"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca42d6a809df54cb1ee4efeeeed671aece">FORM_CREATUREBEAR</a></div><div class="ttdeci">@ FORM_CREATUREBEAR</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:83</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca45e034d920948e0ba5085eb103660161"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca45e034d920948e0ba5085eb103660161">FORM_SHADOW</a></div><div class="ttdeci">@ FORM_SHADOW</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:95</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca54c306ce24ba265a5a6b047242d3a5a7"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca54c306ce24ba265a5a6b047242d3a5a7">FORM_SHADOW_DANCE</a></div><div class="ttdeci">@ FORM_SHADOW_DANCE</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:82</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca6580b40dee982ab6f82c1c59d34988de"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca6580b40dee982ab6f82c1c59d34988de">FORM_SPIRITOFREDEMPTION</a></div><div class="ttdeci">@ FORM_SPIRITOFREDEMPTION</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:99</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca6a2bb66552732011772c2d2ac6dc21b0"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca6a2bb66552732011772c2d2ac6dc21b0">FORM_BERSERKERSTANCE</a></div><div class="ttdeci">@ FORM_BERSERKERSTANCE</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:88</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca6ef7260c45de9cf172c2fa5cc768a181"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca6ef7260c45de9cf172c2fa5cc768a181">FORM_MASTER_ANGLER</a></div><div class="ttdeci">@ FORM_MASTER_ANGLER</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:93</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f">FORM_DEFENSIVESTANCE</a></div><div class="ttdeci">@ FORM_DEFENSIVESTANCE</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:87</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca82ca071a35cb5b21619529313156be1c"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca82ca071a35cb5b21619529313156be1c">FORM_THARONJA_SKELETON</a></div><div class="ttdeci">@ FORM_THARONJA_SKELETON</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:79</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca84efb6dc7feed91df401b04c5d4f9353"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca84efb6dc7feed91df401b04c5d4f9353">FORM_FLIGHT_EPIC</a></div><div class="ttdeci">@ FORM_FLIGHT_EPIC</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:94</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca8658562aed63e25b6812ea6a2ac66516"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca8658562aed63e25b6812ea6a2ac66516">FORM_STEVES_GHOUL</a></div><div class="ttdeci">@ FORM_STEVES_GHOUL</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:78</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a></div><div class="ttdeci">@ FORM_MOONKIN</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:98</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547caa094ef89cc14332f71872d1864ec2543"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa094ef89cc14332f71872d1864ec2543">FORM_NONE</a></div><div class="ttdeci">@ FORM_NONE</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:69</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547caa1fa851e463bf75f379d7b6a668c0cff"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa1fa851e463bf75f379d7b6a668c0cff">FORM_CREATURECAT</a></div><div class="ttdeci">@ FORM_CREATURECAT</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:84</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a></div><div class="ttdeci">@ FORM_CAT</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:70</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547caa2a3be49d483fe70fcffab38a9787557"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa2a3be49d483fe70fcffab38a9787557">FORM_FLIGHT</a></div><div class="ttdeci">@ FORM_FLIGHT</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:96</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547caa9b049ea762f29c2dfb7de1ec17fb4ec"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa9b049ea762f29c2dfb7de1ec17fb4ec">FORM_ZOMBIE</a></div><div class="ttdeci">@ FORM_ZOMBIE</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:90</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547cac0d940f97165e877e8c3ec0fed5074c6"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac0d940f97165e877e8c3ec0fed5074c6">FORM_AMBIENT</a></div><div class="ttdeci">@ FORM_AMBIENT</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:75</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547cac2743246d577352cdae533578e3c8c1b"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac2743246d577352cdae533578e3c8c1b">FORM_AQUA</a></div><div class="ttdeci">@ FORM_AQUA</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:73</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547cac5b4b27f0234cd99d2a201732a392b85"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac5b4b27f0234cd99d2a201732a392b85">FORM_STEALTH</a></div><div class="ttdeci">@ FORM_STEALTH</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:97</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547cac6f4bdb76e70e28c403bbd02bf4a969d"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac6f4bdb76e70e28c403bbd02bf4a969d">FORM_BATTLESTANCE</a></div><div class="ttdeci">@ FORM_BATTLESTANCE</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:86</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547cad1fdce3b8651f9cc379452c672b19245"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cad1fdce3b8651f9cc379452c672b19245">FORM_BLB_PLAYER</a></div><div class="ttdeci">@ FORM_BLB_PLAYER</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:81</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547cadc094fb8dc4c8a87fffe3eac62b84ad4"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cadc094fb8dc4c8a87fffe3eac62b84ad4">FORM_METAMORPHOSIS</a></div><div class="ttdeci">@ FORM_METAMORPHOSIS</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:91</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547cadcc1e9eb63ae2e0530c35f95767cfa5a"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cadcc1e9eb63ae2e0530c35f95767cfa5a">FORM_GHOUL</a></div><div class="ttdeci">@ FORM_GHOUL</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:76</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca">FORM_TREE</a></div><div class="ttdeci">@ FORM_TREE</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:71</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547cae52ec1864a96665f18b681a021b40d1e"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cae52ec1864a96665f18b681a021b40d1e">FORM_TEST_OF_STRENGTH</a></div><div class="ttdeci">@ FORM_TEST_OF_STRENGTH</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:80</div></div>
<div class="ttc" id="aa03521_html_ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75"><div class="ttname"><a href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a></div><div class="ttdeci">@ FORM_BEAR</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:74</div></div>
<div class="ttc" id="aa03704_html_a9ba67e5170b776dea42f38ce97577946"><div class="ttname"><a href="../../d7/da2/a03704.html#a9ba67e5170b776dea42f38ce97577946">sSpellShapeshiftFormStore</a></div><div class="ttdeci">DBCStorage&lt; SpellShapeshiftFormEntry &gt; sSpellShapeshiftFormStore(SpellShapeshiftFormEntryfmt)</div></div>
<div class="ttc" id="aa08190_html_a14039d3f3df79203693f713495503165"><div class="ttname"><a href="../../db/d40/a08190.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a></div><div class="ttdeci">static ObjectGuid const Empty</div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:120</div></div>
<div class="ttc" id="aa08234_html_a2682e56ae4f0ce4b517a8ba3cd2798b1"><div class="ttname"><a href="../../d5/da9/a08234.html#a2682e56ae4f0ce4b517a8ba3cd2798b1">WorldLocation::GetMapId</a></div><div class="ttdeci">uint32 GetMapId() const</div><div class="ttdef"><b>Definition:</b> Position.h:275</div></div>
<div class="ttc" id="aa08386_html_a107e0be6e83289162958bd63740896d0"><div class="ttname"><a href="../../d0/dc6/a08386.html#a107e0be6e83289162958bd63740896d0">Player::_addSpell</a></div><div class="ttdeci">bool _addSpell(uint32 spellId, uint8 addSpecMask, bool temporary, bool learnFromSkill=false)</div><div class="ttdef"><b>Definition:</b> Player.cpp:3091</div></div>
<div class="ttc" id="aa08386_html_a14874da88b7bd1006282e8250b3908ea"><div class="ttname"><a href="../../d0/dc6/a08386.html#a14874da88b7bd1006282e8250b3908ea">Player::removeSpell</a></div><div class="ttdeci">void removeSpell(uint32 spellId, uint8 removeSpecMask, bool onlyTemporary)</div><div class="ttdef"><b>Definition:</b> Player.cpp:3320</div></div>
<div class="ttc" id="aa08386_html_a518d9522da9ab4fcb1597f04fef45ae4"><div class="ttname"><a href="../../d0/dc6/a08386.html#a518d9522da9ab4fcb1597f04fef45ae4">Player::GetTalentMap</a></div><div class="ttdeci">const PlayerTalentMap &amp; GetTalentMap() const</div><div class="ttdef"><b>Definition:</b> Player.h:2593</div></div>
<div class="ttc" id="aa08386_html_a7c8a4e8ee95bbb01af854b79479d9247"><div class="ttname"><a href="../../d0/dc6/a08386.html#a7c8a4e8ee95bbb01af854b79479d9247">Player::GetSpellMap</a></div><div class="ttdeci">PlayerSpellMap const &amp; GetSpellMap() const</div><div class="ttdef"><b>Definition:</b> Player.h:1759</div></div>
<div class="ttc" id="aa08386_html_a8192d0e595c3efd54b18add812bf6be7"><div class="ttname"><a href="../../d0/dc6/a08386.html#a8192d0e595c3efd54b18add812bf6be7">Player::InitDataForForm</a></div><div class="ttdeci">void InitDataForForm(bool reapplyMods=false)</div><div class="ttdef"><b>Definition:</b> Player.cpp:10579</div></div>
<div class="ttc" id="aa08386_html_aadce3b13b7dcab72e227e1b404ab87ab"><div class="ttname"><a href="../../d0/dc6/a08386.html#aadce3b13b7dcab72e227e1b404ab87ab">Player::GetActiveSpec</a></div><div class="ttdeci">uint8 GetActiveSpec() const</div><div class="ttdef"><b>Definition:</b> Player.h:1727</div></div>
<div class="ttc" id="aa08386_html_ab8087f17924c1131b42f05293686545c"><div class="ttname"><a href="../../d0/dc6/a08386.html#ab8087f17924c1131b42f05293686545c">Player::UpdateAllCritPercentages</a></div><div class="ttdeci">void UpdateAllCritPercentages()</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:680</div></div>
<div class="ttc" id="aa08518_html_a18139a1595cccec72363ebd1de943d63"><div class="ttname"><a href="../../db/df9/a08518.html#a18139a1595cccec72363ebd1de943d63">Unit::RemoveAurasByShapeShift</a></div><div class="ttdeci">void RemoveAurasByShapeShift()</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5270</div></div>
<div class="ttc" id="aa08518_html_a2b2c033c2df168977ab5b72644e75daf"><div class="ttname"><a href="../../db/df9/a08518.html#a2b2c033c2df168977ab5b72644e75daf">Unit::CanUseAttackType</a></div><div class="ttdeci">bool CanUseAttackType(uint8 attacktype) const</div><div class="ttdef"><b>Definition:</b> Unit.h:936</div></div>
<div class="ttc" id="aa08518_html_a31bb114ec4c1defc9e19d29840c6a6d0"><div class="ttname"><a href="../../db/df9/a08518.html#a31bb114ec4c1defc9e19d29840c6a6d0">Unit::CalculateSpellDamage</a></div><div class="ttdeci">int32 CalculateSpellDamage(Unit const *target, SpellInfo const *spellProto, uint8 effect_index, int32 const *basePoints=nullptr) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14846</div></div>
<div class="ttc" id="aa08518_html_a356d82b82f6fbae78cb55ecb7bb67c0e"><div class="ttname"><a href="../../db/df9/a08518.html#a356d82b82f6fbae78cb55ecb7bb67c0e">Unit::IsPolymorphed</a></div><div class="ttdeci">bool IsPolymorphed() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:16737</div></div>
<div class="ttc" id="aa08518_html_a41781ed2f15641ad0aa30b2767ab2b66"><div class="ttname"><a href="../../db/df9/a08518.html#a41781ed2f15641ad0aa30b2767ab2b66">Unit::SetPower</a></div><div class="ttdeci">void SetPower(Powers power, uint32 val, bool withPowerUpdate=true, bool fromRegenerate=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:15561</div></div>
<div class="ttc" id="aa08518_html_a520e229dc1a93ea4a53d0ba81e586d11"><div class="ttname"><a href="../../db/df9/a08518.html#a520e229dc1a93ea4a53d0ba81e586d11">Unit::GetAuraEffect</a></div><div class="ttdeci">AuraEffect * GetAuraEffect(uint32 spellId, uint8 effIndex, ObjectGuid casterGUID=ObjectGuid::Empty) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5494</div></div>
<div class="ttc" id="aa08518_html_a59bc8d45ae762a93ec02ba32e7adde56"><div class="ttname"><a href="../../db/df9/a08518.html#a59bc8d45ae762a93ec02ba32e7adde56">Unit::IsClass</a></div><div class="ttdeci">virtual bool IsClass(Classes unitClass, ClassContext context=CLASS_CONTEXT_NONE) const</div><div class="ttdef"><b>Definition:</b> Unit.h:801</div></div>
<div class="ttc" id="aa08518_html_a5f074967d76067c52aaebbf8edd580f4"><div class="ttname"><a href="../../db/df9/a08518.html#a5f074967d76067c52aaebbf8edd580f4">Unit::IsScriptOverriden</a></div><div class="ttdeci">AuraEffect * IsScriptOverriden(SpellInfo const *spell, int32 script) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5809</div></div>
<div class="ttc" id="aa08518_html_acb800095887418d08fdfa8ade11f0074"><div class="ttname"><a href="../../db/df9/a08518.html#acb800095887418d08fdfa8ade11f0074">Unit::RestoreDisplayId</a></div><div class="ttdeci">void RestoreDisplayId()</div><div class="ttdef"><b>Definition:</b> Unit.cpp:16771</div></div>
<div class="ttc" id="aa08518_html_ad0d63bc686dc3c20de0ace8d4da4fc28"><div class="ttname"><a href="../../db/df9/a08518.html#ad0d63bc686dc3c20de0ace8d4da4fc28">Unit::GetDummyAuraEffect</a></div><div class="ttdeci">AuraEffect * GetDummyAuraEffect(SpellFamilyNames name, uint32 iconId, uint8 effIndex) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1358</div></div>
<div class="ttc" id="aa08518_html_ad0d777d08ff539fa2e7be49e948025da"><div class="ttname"><a href="../../db/df9/a08518.html#ad0d777d08ff539fa2e7be49e948025da">Unit::getTransForm</a></div><div class="ttdeci">uint32 getTransForm() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1785</div></div>
<div class="ttc" id="aa08518_html_ad44d31430fab9282a79e8682822ccd9c"><div class="ttname"><a href="../../db/df9/a08518.html#ad44d31430fab9282a79e8682822ccd9c">Unit::getPowerType</a></div><div class="ttdeci">Powers getPowerType() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1052</div></div>
<div class="ttc" id="aa08518_html_ad6df47a81f5f5f147e68211ee935b398"><div class="ttname"><a href="../../db/df9/a08518.html#ad6df47a81f5f5f147e68211ee935b398">Unit::RemoveAurasByType</a></div><div class="ttdeci">void RemoveAurasByType(AuraType auraType, ObjectGuid casterGUID=ObjectGuid::Empty, Aura *except=nullptr, bool negative=true, bool positive=true)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5110</div></div>
<div class="ttc" id="aa08518_html_ad7e475d80b9af430cc076d7c01f967e9"><div class="ttname"><a href="../../db/df9/a08518.html#ad7e475d80b9af430cc076d7c01f967e9">Unit::GetPower</a></div><div class="ttdeci">uint32 GetPower(Powers power) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1056</div></div>
<div class="ttc" id="aa08518_html_ae3f55fb49c678fcf64976fa0ce77d0c1"><div class="ttname"><a href="../../db/df9/a08518.html#ae3f55fb49c678fcf64976fa0ce77d0c1">Unit::setPowerType</a></div><div class="ttdeci">void setPowerType(Powers power)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:9979</div></div>
<div class="ttc" id="aa08518_html_aef7ea224b5f42ee3de39782345dfe931"><div class="ttname"><a href="../../db/df9/a08518.html#aef7ea224b5f42ee3de39782345dfe931">Unit::SetShapeshiftForm</a></div><div class="ttdeci">void SetShapeshiftForm(ShapeshiftForm form)</div><div class="ttdef"><b>Definition:</b> Unit.h:1772</div></div>
<div class="ttc" id="aa08518_html_af9746f07fe538ca5db7a6206e53637f9"><div class="ttname"><a href="../../db/df9/a08518.html#af9746f07fe538ca5db7a6206e53637f9">Unit::GetModelForForm</a></div><div class="ttdeci">uint32 GetModelForForm(ShapeshiftForm form, uint32 spellId) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:19196</div></div>
<div class="ttc" id="aa10782_html_a66eb63a01dca27eaa327c72f03710c53"><div class="ttname"><a href="../../d6/d2f/a10782.html#a66eb63a01dca27eaa327c72f03710c53">AuraEffect::HandleShapeshiftBoosts</a></div><div class="ttdeci">void HandleShapeshiftBoosts(Unit *target, bool apply) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:1221</div></div>
<div class="ttc" id="aa10898_html_ac1a82f9330481616b4b87ed9eff0f785"><div class="ttname"><a href="../../d2/db6/a10898.html#ac1a82f9330481616b4b87ed9eff0f785">SpellInfo::SpellIconID</a></div><div class="ttdeci">uint32 SpellIconID</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:380</div></div>
<div class="ttc" id="aa27970_html"><div class="ttname"><a href="../../db/d61/a27970.html">SpellShapeshiftFormEntry</a></div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1816</div></div>
<div class="ttc" id="aa27970_html_a08f54b905e905fb5a59e449f8c613c08"><div class="ttname"><a href="../../db/d61/a27970.html#a08f54b905e905fb5a59e449f8c613c08">SpellShapeshiftFormEntry::stanceSpell</a></div><div class="ttdeci">uint32 stanceSpell[MAX_SHAPESHIFT_SPELLS]</div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1828</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l03091">Player::_addSpell()</a>, <a class="el" href="../../#l06895">Player::_ApplyWeaponDamage()</a>, <a class="el" href="../../#l00051">AURA_EFFECT_HANDLE_REAL_OR_REAPPLY_MASK</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l14846">Unit::CalculateSpellDamage()</a>, <a class="el" href="../../#l00936">Unit::CanUseAttackType()</a>, <a class="el" href="../../#l01224">Unit::CastCustomSpell()</a>, <a class="el" href="../../#l01167">Unit::CastSpell()</a>, <a class="el" href="../../#l00213">CLASS_CONTEXT_ABILITY</a>, <a class="el" href="../../#l00151">CLASS_DRUID</a>, <a class="el" href="../../#l00120">ObjectGuid::Empty</a>, <a class="el" href="../../#l00690">EQUIPMENT_SLOT_MAINHAND</a>, <a class="el" href="../../#l00075">FORM_AMBIENT</a>, <a class="el" href="../../#l00073">FORM_AQUA</a>, <a class="el" href="../../#l00086">FORM_BATTLESTANCE</a>, <a class="el" href="../../#l00074">FORM_BEAR</a>, <a class="el" href="../../#l00088">FORM_BERSERKERSTANCE</a>, <a class="el" href="../../#l00081">FORM_BLB_PLAYER</a>, <a class="el" href="../../#l00070">FORM_CAT</a>, <a class="el" href="../../#l00083">FORM_CREATUREBEAR</a>, <a class="el" href="../../#l00084">FORM_CREATURECAT</a>, <a class="el" href="../../#l00087">FORM_DEFENSIVESTANCE</a>, <a class="el" href="../../#l00077">FORM_DIREBEAR</a>, <a class="el" href="../../#l00096">FORM_FLIGHT</a>, <a class="el" href="../../#l00094">FORM_FLIGHT_EPIC</a>, <a class="el" href="../../#l00085">FORM_GHOSTWOLF</a>, <a class="el" href="../../#l00076">FORM_GHOUL</a>, <a class="el" href="../../#l00093">FORM_MASTER_ANGLER</a>, <a class="el" href="../../#l00091">FORM_METAMORPHOSIS</a>, <a class="el" href="../../#l00098">FORM_MOONKIN</a>, <a class="el" href="../../#l00069">FORM_NONE</a>, <a class="el" href="../../#l00095">FORM_SHADOW</a>, <a class="el" href="../../#l00082">FORM_SHADOW_DANCE</a>, <a class="el" href="../../#l00099">FORM_SPIRITOFREDEMPTION</a>, <a class="el" href="../../#l00097">FORM_STEALTH</a>, <a class="el" href="../../#l00078">FORM_STEVES_GHOUL</a>, <a class="el" href="../../#l00089">FORM_TEST</a>, <a class="el" href="../../#l00080">FORM_TEST_OF_STRENGTH</a>, <a class="el" href="../../#l00079">FORM_THARONJA_SKELETON</a>, <a class="el" href="../../#l00072">FORM_TRAVEL</a>, <a class="el" href="../../#l00071">FORM_TREE</a>, <a class="el" href="../../#l00092">FORM_UNDEAD</a>, <a class="el" href="../../#l00090">FORM_ZOMBIE</a>, <a class="el" href="../../#l01727">Player::GetActiveSpec()</a>, <a class="el" href="../../#l05494">Unit::GetAuraEffect()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l01358">Unit::GetDummyAuraEffect()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00441">Player::GetItemByPos()</a>, <a class="el" href="../../#l00275">WorldLocation::GetMapId()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l19196">Unit::GetModelForForm()</a>, <a class="el" href="../../#l01056">Unit::GetPower()</a>, <a class="el" href="../../#l01052">Unit::getPowerType()</a>, <a class="el" href="../../#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l01759">Player::GetSpellMap()</a>, <a class="el" href="../../#l02593">Player::GetTalentMap()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01785">Unit::getTransForm()</a>, <a class="el" href="../../#l01221">HandleShapeshiftBoosts()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l10579">Player::InitDataForForm()</a>, <a class="el" href="../../#l00670">INVENTORY_SLOT_BAG_0</a>, <a class="el" href="../../#l00801">Unit::IsClass()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l16737">Unit::IsPolymorphed()</a>, <a class="el" href="../../#l05809">Unit::IsScriptOverriden()</a>, <a class="el" href="../../#l00157">LOG_ERROR</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l01813">MAX_SHAPESHIFT_SPELLS</a>, <a class="el" href="../../#l00122">PLAYERSPELL_REMOVED</a>, <a class="el" href="../../#l00272">POWER_ENERGY</a>, <a class="el" href="../../#l00269">POWER_MANA</a>, <a class="el" href="../../#l00270">POWER_RAGE</a>, <a class="el" href="../../#l05270">Unit::RemoveAurasByShapeShift()</a>, <a class="el" href="../../#l05110">Unit::RemoveAurasByType()</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../#l03320">Player::removeSpell()</a>, <a class="el" href="../../#l16771">Unit::RestoreDisplayId()</a>, <a class="el" href="../../#l16758">Unit::SetDisplayId()</a>, <a class="el" href="../../#l15561">Unit::SetPower()</a>, <a class="el" href="../../#l09979">Unit::setPowerType()</a>, <a class="el" href="../../#l01772">Unit::SetShapeshiftForm()</a>, <a class="el" href="../../#l00177">SPEC_MASK_ALL</a>, <a class="el" href="../../#l00411">SPELL_ATTR0_NO_IMMUNITIES</a>, <a class="el" href="../../#l00094">SPELL_AURA_MOD_INCREASE_SPEED</a>, <a class="el" href="../../#l00099">SPELL_AURA_MOD_SHAPESHIFT</a>, <a class="el" href="../../#l03535">SPELLFAMILY_DRUID</a>, <a class="el" href="../../#l03536">SPELLFAMILY_ROGUE</a>, <a class="el" href="../../#l03532">SPELLFAMILY_WARRIOR</a>, <a class="el" href="../../#l00387">SpellInfo::SpellFamilyName</a>, <a class="el" href="../../#l00380">SpellInfo::SpellIconID</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, <a class="el" href="../../d7/da2/a03704.html#a9ba67e5170b776dea42f38ce97577946">sSpellShapeshiftFormStore</a>, <a class="el" href="../../#l01828">SpellShapeshiftFormEntry::stanceSpell</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00680">Player::UpdateAllCritPercentages()</a>, and <a class="el" href="../../#l00044">urand()</a>.</p>

</div>
</div>
<a id="aca9f7031c1091b23080c4c8d827fa0e3" name="aca9f7031c1091b23080c4c8d827fa0e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca9f7031c1091b23080c4c8d827fa0e3">&#9670;&#160;</a></span>HandleAuraModSilence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModSilence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3017</span>{</div>
<div class="line"><span class="lineno"> 3018</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3019</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3020</span> </div>
<div class="line"><span class="lineno"> 3021</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3022</span> </div>
<div class="line"><span class="lineno"> 3023</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3024</span>    {</div>
<div class="line"><span class="lineno"> 3025</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad9f2d48b20f62e17abf5c1892cebe296">SetUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934ac5e049a6b427ad34206151958117403e">UNIT_FLAG_SILENCED</a>);</div>
<div class="line"><span class="lineno"> 3026</span> </div>
<div class="line"><span class="lineno"> 3027</span>        <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><span class="lineno"> 3028</span>        <span class="comment">// Stop cast only spells vs PreventionType == SPELL_PREVENTION_TYPE_SILENCE</span></div>
<div class="line"><span class="lineno"> 3029</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1fabf840fee2a2e133105c6a92a7b43a272">CURRENT_MELEE_SPELL</a>; i &lt; <a class="code hl_define" href="../../de/d3d/a03515.html#aa55ee1b0aa8f9779fbe5f0c4eeaf6bed">CURRENT_MAX_SPELL</a>; ++i)</div>
<div class="line"><span class="lineno"> 3030</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d3/dcf/a10834.html">Spell</a>* spell = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#affc5148f2c60051706b4e85a29eb4d45">GetCurrentSpell</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1f">CurrentSpellTypes</a>(i)))</div>
<div class="line"><span class="lineno"> 3031</span>                <span class="keywordflow">if</span> (spell-&gt;m_spellInfo-&gt;PreventionType == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3194644c6ed7acd85ec8eb1b98821b8ea03702a6fae99a6fc1b0ebf339a86865e">SPELL_PREVENTION_TYPE_SILENCE</a>)</div>
<div class="line"><span class="lineno"> 3032</span>                    <span class="comment">// Stop spells on prepare or casting state</span></div>
<div class="line"><span class="lineno"> 3033</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a080cb9749e810cdb61c36430b179c26f">InterruptSpell</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1f">CurrentSpellTypes</a>(i), <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 3034</span>    }</div>
<div class="line"><span class="lineno"> 3035</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3036</span>    {</div>
<div class="line"><span class="lineno"> 3037</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3038</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6c684b941fc93d5488ff49a976973596">SPELL_AURA_MOD_SILENCE</a>) || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aab7e99142d3a87d93f8586e2a9cd81c8">SPELL_AURA_MOD_PACIFY_SILENCE</a>))</div>
<div class="line"><span class="lineno"> 3039</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3040</span> </div>
<div class="line"><span class="lineno"> 3041</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af9a5a43c2d7940c38f8b101409666a0d">RemoveUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934ac5e049a6b427ad34206151958117403e">UNIT_FLAG_SILENCED</a>);</div>
<div class="line"><span class="lineno"> 3042</span>    }</div>
<div class="line"><span class="lineno"> 3043</span>}</div>
<div class="ttc" id="aa02771_html_a3194644c6ed7acd85ec8eb1b98821b8ea03702a6fae99a6fc1b0ebf339a86865e"><div class="ttname"><a href="../../d0/dbd/a02771.html#a3194644c6ed7acd85ec8eb1b98821b8ea03702a6fae99a6fc1b0ebf339a86865e">SPELL_PREVENTION_TYPE_SILENCE</a></div><div class="ttdeci">@ SPELL_PREVENTION_TYPE_SILENCE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1554</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a6c684b941fc93d5488ff49a976973596"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6c684b941fc93d5488ff49a976973596">SPELL_AURA_MOD_SILENCE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_SILENCE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:90</div></div>
<div class="ttc" id="aa03515_html_aa55ee1b0aa8f9779fbe5f0c4eeaf6bed"><div class="ttname"><a href="../../de/d3d/a03515.html#aa55ee1b0aa8f9779fbe5f0c4eeaf6bed">CURRENT_MAX_SPELL</a></div><div class="ttdeci">#define CURRENT_MAX_SPELL</div><div class="ttdef"><b>Definition:</b> Unit.h:544</div></div>
<div class="ttc" id="aa03515_html_ab791040bd6d685b1fd2cfd12c96d0a1f"><div class="ttname"><a href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1f">CurrentSpellTypes</a></div><div class="ttdeci">CurrentSpellTypes</div><div class="ttdef"><b>Definition:</b> Unit.h:536</div></div>
<div class="ttc" id="aa03515_html_ab791040bd6d685b1fd2cfd12c96d0a1fabf840fee2a2e133105c6a92a7b43a272"><div class="ttname"><a href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1fabf840fee2a2e133105c6a92a7b43a272">CURRENT_MELEE_SPELL</a></div><div class="ttdeci">@ CURRENT_MELEE_SPELL</div><div class="ttdef"><b>Definition:</b> Unit.h:537</div></div>
<div class="ttc" id="aa03521_html_affdd0d554c8bcaaa85a879f5a9d60934ac5e049a6b427ad34206151958117403e"><div class="ttname"><a href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934ac5e049a6b427ad34206151958117403e">UNIT_FLAG_SILENCED</a></div><div class="ttdeci">@ UNIT_FLAG_SILENCED</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:242</div></div>
<div class="ttc" id="aa08518_html_a080cb9749e810cdb61c36430b179c26f"><div class="ttname"><a href="../../db/df9/a08518.html#a080cb9749e810cdb61c36430b179c26f">Unit::InterruptSpell</a></div><div class="ttdeci">void InterruptSpell(CurrentSpellTypes spellType, bool withDelayed=true, bool withInstant=true, bool bySelf=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4060</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00544">CURRENT_MAX_SPELL</a>, <a class="el" href="../../#l00537">CURRENT_MELEE_SPELL</a>, <a class="el" href="../../#l01449">Unit::GetCurrentSpell()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l04060">Unit::InterruptSpell()</a>, <a class="el" href="../../#l00714">Unit::RemoveUnitFlag()</a>, <a class="el" href="../../#l00713">Unit::SetUnitFlag()</a>, <a class="el" href="../../#l00123">SPELL_AURA_MOD_PACIFY_SILENCE</a>, <a class="el" href="../../#l00090">SPELL_AURA_MOD_SILENCE</a>, <a class="el" href="../../#l01554">SPELL_PREVENTION_TYPE_SILENCE</a>, and <a class="el" href="../../#l00242">UNIT_FLAG_SILENCED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03066">HandleAuraModPacifyAndSilence()</a>.</p>

</div>
</div>
<a id="a6a0bdae4c5cae40a812b7cf5b00f4233" name="a6a0bdae4c5cae40a812b7cf5b00f4233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a0bdae4c5cae40a812b7cf5b00f4233">&#9670;&#160;</a></span>HandleAuraModSkill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModSkill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3218</span>{</div>
<div class="line"><span class="lineno"> 3219</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288aaf4c81ebe8cba51f1c5d7b5001d41600">AURA_EFFECT_HANDLE_SKILL</a>)))</div>
<div class="line"><span class="lineno"> 3220</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3221</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3222</span> </div>
<div class="line"><span class="lineno"> 3223</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 3224</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3225</span> </div>
<div class="line"><span class="lineno"> 3226</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> prot = <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><span class="lineno"> 3227</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> points = <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><span class="lineno"> 3228</span> </div>
<div class="line"><span class="lineno"> 3229</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aa54c231ef84c1e324f81c67fa1f55ac2">ModifySkillBonus</a>(prot, ((apply) ? points : -points), <a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799af738b7ff53fd0abfed65bad7827a482b">SPELL_AURA_MOD_SKILL_TALENT</a>);</div>
<div class="line"><span class="lineno"> 3230</span>    <span class="keywordflow">if</span> (prot == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#af4541d30ebbff76b1f9f689519789234a1c73e94578e3650948e1848854274649">SKILL_DEFENSE</a>)</div>
<div class="line"><span class="lineno"> 3231</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#adb3b88c4fe2061e13c6653cf3bd8967e">UpdateDefenseBonusesMod</a>();</div>
<div class="line"><span class="lineno"> 3232</span>}</div>
<div class="ttc" id="aa02771_html_af4541d30ebbff76b1f9f689519789234a1c73e94578e3650948e1848854274649"><div class="ttname"><a href="../../d0/dbd/a02771.html#af4541d30ebbff76b1f9f689519789234a1c73e94578e3650948e1848854274649">SKILL_DEFENSE</a></div><div class="ttdeci">@ SKILL_DEFENSE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:2881</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799af738b7ff53fd0abfed65bad7827a482b"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799af738b7ff53fd0abfed65bad7827a482b">SPELL_AURA_MOD_SKILL_TALENT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_SKILL_TALENT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:161</div></div>
<div class="ttc" id="aa03092_html_a82ebee9e3cf7eaf2ab892a6eb7796288aaf4c81ebe8cba51f1c5d7b5001d41600"><div class="ttname"><a href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288aaf4c81ebe8cba51f1c5d7b5001d41600">AURA_EFFECT_HANDLE_SKILL</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_SKILL</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:47</div></div>
<div class="ttc" id="aa08386_html_aa54c231ef84c1e324f81c67fa1f55ac2"><div class="ttname"><a href="../../d0/dc6/a08386.html#aa54c231ef84c1e324f81c67fa1f55ac2">Player::ModifySkillBonus</a></div><div class="ttdeci">void ModifySkillBonus(uint32 skillid, int32 val, bool talent)</div><div class="ttdef"><b>Definition:</b> Player.cpp:5304</div></div>
<div class="ttc" id="aa08386_html_adb3b88c4fe2061e13c6653cf3bd8967e"><div class="ttname"><a href="../../d0/dc6/a08386.html#adb3b88c4fe2061e13c6653cf3bd8967e">Player::UpdateDefenseBonusesMod</a></div><div class="ttdeci">void UpdateDefenseBonusesMod()</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:609</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00047">AURA_EFFECT_HANDLE_SKILL</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l05304">Player::ModifySkillBonus()</a>, <a class="el" href="../../#l02881">SKILL_DEFENSE</a>, <a class="el" href="../../#l00161">SPELL_AURA_MOD_SKILL_TALENT</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00609">Player::UpdateDefenseBonusesMod()</a>.</p>

</div>
</div>
<a id="ab3f2b2299c080928ff7211a98a6237b5" name="ab3f2b2299c080928ff7211a98a6237b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3f2b2299c080928ff7211a98a6237b5">&#9670;&#160;</a></span>HandleAuraModStalked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModStalked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3160</span>{</div>
<div class="line"><span class="lineno"> 3161</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3162</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3163</span> </div>
<div class="line"><span class="lineno"> 3164</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3165</span> </div>
<div class="line"><span class="lineno"> 3166</span>    <span class="comment">// used by spells: Hunter&#39;s Mark, Mind Vision, Syndicate Tracker (MURP) DND</span></div>
<div class="line"><span class="lineno"> 3167</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3168</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a8626753766b8e3ee11889f096d6fca6f">SetDynamicFlag</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a6d2f7a5452237dadf8fd3aed70f44039a55f87e0bbcb3a94aec5a9e2c7a771790">UNIT_DYNFLAG_TRACK_UNIT</a>);</div>
<div class="line"><span class="lineno"> 3169</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3170</span>    {</div>
<div class="line"><span class="lineno"> 3171</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3172</span>        <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><span class="lineno"> 3173</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a096f5f52e6dad97fbe373004e9213f01">RemoveDynamicFlag</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a6d2f7a5452237dadf8fd3aed70f44039a55f87e0bbcb3a94aec5a9e2c7a771790">UNIT_DYNFLAG_TRACK_UNIT</a>);</div>
<div class="line"><span class="lineno"> 3174</span>    }</div>
<div class="line"><span class="lineno"> 3175</span> </div>
<div class="line"><span class="lineno"> 3176</span>    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><span class="lineno"> 3177</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>());</div>
<div class="line"><span class="lineno"> 3178</span>}</div>
<div class="ttc" id="aa02771_html_a6d2f7a5452237dadf8fd3aed70f44039a55f87e0bbcb3a94aec5a9e2c7a771790"><div class="ttname"><a href="../../d0/dbd/a02771.html#a6d2f7a5452237dadf8fd3aed70f44039a55f87e0bbcb3a94aec5a9e2c7a771790">UNIT_DYNFLAG_TRACK_UNIT</a></div><div class="ttdeci">@ UNIT_DYNFLAG_TRACK_UNIT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3122</div></div>
<div class="ttc" id="aa08142_html_a096f5f52e6dad97fbe373004e9213f01"><div class="ttname"><a href="../../df/d2d/a08142.html#a096f5f52e6dad97fbe373004e9213f01">Object::RemoveDynamicFlag</a></div><div class="ttdeci">virtual void RemoveDynamicFlag(uint32 flag)</div><div class="ttdef"><b>Definition:</b> Object.h:121</div></div>
<div class="ttc" id="aa08142_html_a8626753766b8e3ee11889f096d6fca6f"><div class="ttname"><a href="../../df/d2d/a08142.html#a8626753766b8e3ee11889f096d6fca6f">Object::SetDynamicFlag</a></div><div class="ttdeci">virtual void SetDynamicFlag(uint32 flag)</div><div class="ttdef"><b>Definition:</b> Object.h:120</div></div>
<div class="ttc" id="aa08518_html_a5b2b731101a2c33063cef5c59e595249"><div class="ttname"><a href="../../db/df9/a08518.html#a5b2b731101a2c33063cef5c59e595249">Unit::UpdateObjectVisibility</a></div><div class="ttdeci">void UpdateObjectVisibility(bool forced=true, bool fromUpdate=false) override</div><div class="ttdef"><b>Definition:</b> Unit.cpp:19126</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00121">Object::RemoveDynamicFlag()</a>, <a class="el" href="../../#l00120">Object::SetDynamicFlag()</a>, <a class="el" href="../../#l03122">UNIT_DYNFLAG_TRACK_UNIT</a>, and <a class="el" href="../../#l19126">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="ad7e8903a35da1f0660f5ccf53eb1e182" name="ad7e8903a35da1f0660f5ccf53eb1e182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7e8903a35da1f0660f5ccf53eb1e182">&#9670;&#160;</a></span>HandleAuraModStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4429</span>{</div>
<div class="line"><span class="lineno"> 4430</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4431</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4432</span> </div>
<div class="line"><span class="lineno"> 4433</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4434</span> </div>
<div class="line"><span class="lineno"> 4435</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &lt; -2 || <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &gt; 4)</div>
<div class="line"><span class="lineno"> 4436</span>    {</div>
<div class="line"><span class="lineno"> 4437</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;WARNING: Spell {} effect {} has an unsupported misc value ({}) for SPELL_AURA_MOD_STAT &quot;</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 4438</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4439</span>    }</div>
<div class="line"><span class="lineno"> 4440</span> </div>
<div class="line"><span class="lineno"> 4441</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> i = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code hl_define" href="../../d0/dbd/a02771.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; i++)</div>
<div class="line"><span class="lineno"> 4442</span>    {</div>
<div class="line"><span class="lineno"> 4443</span>        <span class="comment">// -1 or -2 is all stats (misc &lt; -2 checked in function beginning)</span></div>
<div class="line"><span class="lineno"> 4444</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &lt; 0 || <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == i)</div>
<div class="line"><span class="lineno"> 4445</span>        {</div>
<div class="line"><span class="lineno"> 4446</span>            <span class="comment">//target-&gt;ApplyStatMod(Stats(i), m_amount, apply);</span></div>
<div class="line"><span class="lineno"> 4447</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0">UNIT_MOD_STAT_START</a> + i), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4448</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>())</div>
<div class="line"><span class="lineno"> 4449</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a332bb1d1368d49a5d0fd54eaaf5f4e9a">ApplyStatBuffMod</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), (<span class="keywordtype">float</span>)<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 4450</span>        }</div>
<div class="line"><span class="lineno"> 4451</span>    }</div>
<div class="line"><span class="lineno"> 4452</span>}</div>
<div class="ttc" id="aa02771_html_a0f8923f02eb7dfba43a426b8320354da"><div class="ttname"><a href="../../d0/dbd/a02771.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a></div><div class="ttdeci">#define MAX_STATS</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:265</div></div>
<div class="ttc" id="aa02771_html_ad28c24e82986133459dee232a5360bc4"><div class="ttname"><a href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4">Stats</a></div><div class="ttdeci">Stats</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:257</div></div>
<div class="ttc" id="aa02771_html_ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778"><div class="ttname"><a href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a></div><div class="ttdeci">@ STAT_STRENGTH</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:258</div></div>
<div class="ttc" id="aa03515_html_a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0"><div class="ttname"><a href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0">UNIT_MOD_STAT_START</a></div><div class="ttdeci">@ UNIT_MOD_STAT_START</div><div class="ttdef"><b>Definition:</b> Unit.h:170</div></div>
<div class="ttc" id="aa08518_html_a332bb1d1368d49a5d0fd54eaaf5f4e9a"><div class="ttname"><a href="../../db/df9/a08518.html#a332bb1d1368d49a5d0fd54eaaf5f4e9a">Unit::ApplyStatBuffMod</a></div><div class="ttdeci">void ApplyStatBuffMod(Stats stat, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> Unit.h:1020</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01020">Unit::ApplyStatBuffMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00754">Unit::IsPet()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00157">LOG_ERROR</a>, <a class="el" href="../../#l00265">MAX_STATS</a>, <a class="el" href="../../#l00258">STAT_STRENGTH</a>, <a class="el" href="../../#l00128">TOTAL_VALUE</a>, and <a class="el" href="../../#l00170">UNIT_MOD_STAT_START</a>.</p>

</div>
</div>
<a id="a8896bc940fa9cfe2a0cdea0cc27465bc" name="a8896bc940fa9cfe2a0cdea0cc27465bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8896bc940fa9cfe2a0cdea0cc27465bc">&#9670;&#160;</a></span>HandleAuraModStateImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModStateImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4215</span>{</div>
<div class="line"><span class="lineno"> 4216</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 4217</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4218</span> </div>
<div class="line"><span class="lineno"> 4219</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4220</span> </div>
<div class="line"><span class="lineno"> 4221</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a1c2e514db062426deb4673fb86e3459e">IMMUNITY_STATE</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), apply);</div>
<div class="line"><span class="lineno"> 4222</span> </div>
<div class="line"><span class="lineno"> 4223</span>    <span class="keywordflow">if</span> (apply &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>))</div>
<div class="line"><span class="lineno"> 4224</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code hl_enumeration" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799">AuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>()), <a class="code hl_variable" href="../../db/d40/a08190.html#a14039d3f3df79203693f713495503165">ObjectGuid::Empty</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>());</div>
<div class="line"><span class="lineno"> 4225</span>}</div>
<div class="ttc" id="aa02771_html_a91d505a1e789c6ea6a338f3a3c85b6b9a1c2e514db062426deb4673fb86e3459e"><div class="ttname"><a href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a1c2e514db062426deb4673fb86e3459e">IMMUNITY_STATE</a></div><div class="ttdeci">@ IMMUNITY_STATE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1395</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l13384">Unit::ApplySpellImmune()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00120">ObjectGuid::Empty</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01395">IMMUNITY_STATE</a>, <a class="el" href="../../#l05110">Unit::RemoveAurasByType()</a>, and <a class="el" href="../../#l00434">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>.</p>

</div>
</div>
<a id="a09506ef85197dd61fba8127fa65d8925" name="a09506ef85197dd61fba8127fa65d8925"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09506ef85197dd61fba8127fa65d8925">&#9670;&#160;</a></span>HandleAuraModStun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModStun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3503</span>{</div>
<div class="line"><span class="lineno"> 3504</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3505</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3506</span> </div>
<div class="line"><span class="lineno"> 3507</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3508</span> </div>
<div class="line"><span class="lineno"> 3509</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a828f4fc42209162a104a10d1f70838d4">SetControlled</a>(apply, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544aefe799c73ede1e5d5ffed28f69074106">UNIT_STATE_STUNNED</a>);</div>
<div class="line"><span class="lineno"> 3510</span>}</div>
<div class="ttc" id="aa03521_html_ae51d2ecb71f7a5cb3882982a622c9544aefe799c73ede1e5d5ffed28f69074106"><div class="ttname"><a href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544aefe799c73ede1e5d5ffed28f69074106">UNIT_STATE_STUNNED</a></div><div class="ttdeci">@ UNIT_STATE_STUNNED</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:152</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l18030">Unit::SetControlled()</a>, and <a class="el" href="../../#l00152">UNIT_STATE_STUNNED</a>.</p>

</div>
</div>
<a id="a56f6eebde660cfadaeaccaf8ebc4b6b9" name="a56f6eebde660cfadaeaccaf8ebc4b6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56f6eebde660cfadaeaccaf8ebc4b6b9">&#9670;&#160;</a></span>HandleAuraModTotalThreat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModTotalThreat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3441</span>{</div>
<div class="line"><span class="lineno"> 3442</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3443</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3444</span> </div>
<div class="line"><span class="lineno"> 3445</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3446</span> </div>
<div class="line"><span class="lineno"> 3447</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 3448</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3449</span> </div>
<div class="line"><span class="lineno"> 3450</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 3451</span>    <span class="keywordflow">if</span> (caster &amp;&amp; caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno"> 3452</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a83fe30829a1470536e408efbf56dd5f5">getHostileRefMgr</a>().<a class="code hl_function" href="../../d9/da8/a07598.html#a2c74a35806e10917a5d619dcf785f5a5">addTempThreat</a>((<span class="keywordtype">float</span>)<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 3453</span>}</div>
<div class="ttc" id="aa07598_html_a2c74a35806e10917a5d619dcf785f5a5"><div class="ttname"><a href="../../d9/da8/a07598.html#a2c74a35806e10917a5d619dcf785f5a5">HostileRefMgr::addTempThreat</a></div><div class="ttdeci">void addTempThreat(float threat, bool apply)</div><div class="ttdef"><b>Definition:</b> HostileRefMgr.cpp:65</div></div>
<div class="ttc" id="aa08518_html_a83fe30829a1470536e408efbf56dd5f5"><div class="ttname"><a href="../../db/df9/a08518.html#a83fe30829a1470536e408efbf56dd5f5">Unit::getHostileRefMgr</a></div><div class="ttdeci">HostileRefMgr &amp; getHostileRefMgr()</div><div class="ttdef"><b>Definition:</b> Unit.h:907</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00065">HostileRefMgr::addTempThreat()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00907">Unit::getHostileRefMgr()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, and <a class="el" href="../../#l00197">Object::IsPlayer()</a>.</p>

</div>
</div>
<a id="ae1672988a44e4d7f5d73c561892a9c72" name="ae1672988a44e4d7f5d73c561892a9c72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1672988a44e4d7f5d73c561892a9c72">&#9670;&#160;</a></span>HandleAuraModUseNormalSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModUseNormalSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3788</span>{</div>
<div class="line"><span class="lineno"> 3789</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3790</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3791</span> </div>
<div class="line"><span class="lineno"> 3792</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3793</span> </div>
<div class="line"><span class="lineno"> 3794</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de">MOVE_RUN</a>,  <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3795</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4a611a24e7db53ef46584dcfb70d8343e5">MOVE_SWIM</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3796</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac85eb152580735addb4e7022ae2b3d4c">UpdateSpeed</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4a2461b4a7be489c54989eff2c87ae1961">MOVE_FLIGHT</a>,  <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3797</span> </div>
<div class="line"><span class="lineno"> 3798</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* targetPlayer = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno"> 3799</span>    {</div>
<div class="line"><span class="lineno"> 3800</span>        <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><span class="lineno"> 3801</span>    }</div>
<div class="line"><span class="lineno"> 3802</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00334">MOVE_FLIGHT</a>, <a class="el" href="../../#l00329">MOVE_RUN</a>, <a class="el" href="../../#l00331">MOVE_SWIM</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l14245">Unit::UpdateSpeed()</a>.</p>

</div>
</div>
<a id="a564bd992035746f2702e9cb284d789a6" name="a564bd992035746f2702e9cb284d789a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a564bd992035746f2702e9cb284d789a6">&#9670;&#160;</a></span>HandleAuraModWeaponCritPercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraModWeaponCritPercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4859</span>{</div>
<div class="line"><span class="lineno"> 4860</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4861</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4862</span> </div>
<div class="line"><span class="lineno"> 4863</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4864</span> </div>
<div class="line"><span class="lineno"> 4865</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4866</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4867</span> </div>
<div class="line"><span class="lineno"> 4868</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a0f966a2f1219b75a945c686c3cad21e4">MAX_ATTACK</a>; ++i)</div>
<div class="line"><span class="lineno"> 4869</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d24/a08098.html">Item</a>* pItem = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ac8e55e9ca3aec15337a7a952aa8efac8">GetWeaponForAttack</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352">WeaponAttackType</a>(i), <span class="keyword">true</span>))</div>
<div class="line"><span class="lineno"> 4870</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a78de8e7893c21b7d996b7a08371b0e37">_ApplyWeaponDependentAuraCritMod</a>(pItem, <a class="code hl_enumeration" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352">WeaponAttackType</a>(i), <span class="keyword">this</span>, apply);</div>
<div class="line"><span class="lineno"> 4871</span> </div>
<div class="line"><span class="lineno"> 4872</span>    <span class="comment">// mods must be applied base at equipped weapon class and subclass comparison</span></div>
<div class="line"><span class="lineno"> 4873</span>    <span class="comment">// with spell-&gt;EquippedItemClass and  EquippedItemSubClassMask and EquippedItemInventoryTypeMask</span></div>
<div class="line"><span class="lineno"> 4874</span>    <span class="comment">// GetMiscValue() comparison with item generated damage types</span></div>
<div class="line"><span class="lineno"> 4875</span> </div>
<div class="line"><span class="lineno"> 4876</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;EquippedItemClass == -1)</div>
<div class="line"><span class="lineno"> 4877</span>    {</div>
<div class="line"><span class="lineno"> 4878</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a938646605f1e70b8f1613bf9bdb78b4fa75a0f4d4487127ec7c34e7f0f547efb4">CRIT_PERCENTAGE</a>,         <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4879</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a938646605f1e70b8f1613bf9bdb78b4fa379fa05fe54b3ef17e6e9e2f159b9a8f">OFFHAND_CRIT_PERCENTAGE</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4880</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a938646605f1e70b8f1613bf9bdb78b4faa6c2bba993427bbcd1ee001e9730c59d">RANGED_CRIT_PERCENTAGE</a>,  <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>, <span class="keywordtype">float</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4881</span>    }</div>
<div class="line"><span class="lineno"> 4882</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4883</span>    {</div>
<div class="line"><span class="lineno"> 4884</span>        <span class="comment">// done in Player::_ApplyWeaponDependentAuraMods</span></div>
<div class="line"><span class="lineno"> 4885</span>    }</div>
<div class="line"><span class="lineno"> 4886</span>}</div>
<div class="ttc" id="aa08386_html_a78de8e7893c21b7d996b7a08371b0e37"><div class="ttname"><a href="../../d0/dc6/a08386.html#a78de8e7893c21b7d996b7a08371b0e37">Player::_ApplyWeaponDependentAuraCritMod</a></div><div class="ttdeci">void _ApplyWeaponDependentAuraCritMod(Item *item, WeaponAttackType attackType, AuraEffect const *aura, bool apply)</div><div class="ttdef"><b>Definition:</b> Player.cpp:7017</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l07017">Player::_ApplyWeaponDependentAuraCritMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00180">CRIT_PERCENTAGE</a>, <a class="el" href="../../#l00189">FLAT_MOD</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00488">Player::GetWeaponForAttack()</a>, <a class="el" href="../../#l05013">Player::HandleBaseModValue()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00212">MAX_ATTACK</a>, <a class="el" href="../../#l00182">OFFHAND_CRIT_PERCENTAGE</a>, <a class="el" href="../../#l00181">RANGED_CRIT_PERCENTAGE</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a5e6d66aa4247cf56b528a1fe2c2eae37" name="a5e6d66aa4247cf56b528a1fe2c2eae37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e6d66aa4247cf56b528a1fe2c2eae37">&#9670;&#160;</a></span>HandleAuraMounted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraMounted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3239</span>{</div>
<div class="line"><span class="lineno"> 3240</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3241</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3242</span> </div>
<div class="line"><span class="lineno"> 3243</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3244</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 3245</span> </div>
<div class="line"><span class="lineno"> 3246</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3247</span>    {</div>
<div class="line"><span class="lineno"> 3248</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> creatureEntry = <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><span class="lineno"> 3249</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> displayId = 0;</div>
<div class="line"><span class="lineno"> 3250</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> vehicleId = 0;</div>
<div class="line"><span class="lineno"> 3251</span> </div>
<div class="line"><span class="lineno"> 3252</span>        <span class="comment">// Festive Holiday Mount</span></div>
<div class="line"><span class="lineno"> 3253</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(62061))</div>
<div class="line"><span class="lineno"> 3254</span>        {</div>
<div class="line"><span class="lineno"> 3255</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;HasEffectType(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>))</div>
<div class="line"><span class="lineno"> 3256</span>                creatureEntry = 24906;</div>
<div class="line"><span class="lineno"> 3257</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3258</span>                creatureEntry = 15665;</div>
<div class="line"><span class="lineno"> 3259</span>        }</div>
<div class="line"><span class="lineno"> 3260</span> </div>
<div class="line"><span class="lineno"> 3261</span>        <span class="comment">// Festive Brewfest Mount</span></div>
<div class="line"><span class="lineno"> 3262</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;HasEffectType(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>) &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a69c5ac45b65cf0dede6e0ee837361f61">HasAura</a>(<a class="code hl_enumvalue" href="../../d0/d2b/a03095.html#a4ee83f582e4ebba3a5aea9ab1a5c9354a62ef26e3a60fddc8cbadbd349cb054bf">FRESH_BREWFEST_HOPS</a>))</div>
<div class="line"><span class="lineno"> 3263</span>        {</div>
<div class="line"><span class="lineno"> 3264</span>            <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aab66f0084b10c4a2a45f064567cf1118">GetSpeedRate</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#af91f7580a89722b7dc45a018bb46fce4ad231571a48b7742c2a432eb7a8a849de">MOVE_RUN</a>) &gt;= 2.0f)</div>
<div class="line"><span class="lineno"> 3265</span>            {</div>
<div class="line"><span class="lineno"> 3266</span>                creatureEntry = <a class="code hl_enumvalue" href="../../d0/d2b/a03095.html#a4ee83f582e4ebba3a5aea9ab1a5c9354a9e68ffb636426417370cc6b94b7b46aa">GREAT_BREWFEST_KODO</a>;</div>
<div class="line"><span class="lineno"> 3267</span>            }</div>
<div class="line"><span class="lineno"> 3268</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3269</span>            {</div>
<div class="line"><span class="lineno"> 3270</span>                creatureEntry = <a class="code hl_enumvalue" href="../../d0/d2b/a03095.html#a4ee83f582e4ebba3a5aea9ab1a5c9354acbc7617ce19ea8d214518ab0335275c5">BREWFEST_KODO</a>;</div>
<div class="line"><span class="lineno"> 3271</span>            }</div>
<div class="line"><span class="lineno"> 3272</span>        }</div>
<div class="line"><span class="lineno"> 3273</span> </div>
<div class="line"><span class="lineno"> 3274</span>        <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../d3/d43/a07798.html">CreatureTemplate</a> <span class="keyword">const</span>* creatureInfo = <a class="code hl_define" href="../../d0/d45/a02843.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureTemplate(creatureEntry))</div>
<div class="line"><span class="lineno"> 3275</span>        {</div>
<div class="line"><span class="lineno"> 3276</span>            <a class="code hl_struct" href="../../d0/d6e/a07794.html">CreatureModel</a> model = *<a class="code hl_function" href="../../d0/dd0/a08810.html#a891716d1527f5e7aa64f8566672173e4">ObjectMgr::ChooseDisplayId</a>(creatureInfo);</div>
<div class="line"><span class="lineno"> 3277</span>            <a class="code hl_define" href="../../d0/d45/a02843.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureModelRandomGender(&amp;model, creatureInfo);</div>
<div class="line"><span class="lineno"> 3278</span>            displayId = model.<a class="code hl_variable" href="../../d0/d6e/a07794.html#a0f48fde2c8438ecf411d7f80d3bca1a9">CreatureDisplayID</a>;</div>
<div class="line"><span class="lineno"> 3279</span> </div>
<div class="line"><span class="lineno"> 3280</span>            vehicleId = creatureInfo-&gt;VehicleId;</div>
<div class="line"><span class="lineno"> 3281</span> </div>
<div class="line"><span class="lineno"> 3282</span>            <span class="comment">//some spell has one aura of mount and one of vehicle</span></div>
<div class="line"><span class="lineno"> 3283</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++i)</div>
<div class="line"><span class="lineno"> 3284</span>            {</div>
<div class="line"><span class="lineno"> 3285</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Effects[i].Effect == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aa7be476935ce81144c2b383b7af7bf47">SPELL_EFFECT_SUMMON</a> &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Effects[i].MiscValue == <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>())</div>
<div class="line"><span class="lineno"> 3286</span>                {</div>
<div class="line"><span class="lineno"> 3287</span>                    displayId = 0;</div>
<div class="line"><span class="lineno"> 3288</span>                }</div>
<div class="line"><span class="lineno"> 3289</span>            }</div>
<div class="line"><span class="lineno"> 3290</span> </div>
<div class="line"><span class="lineno"> 3291</span>        }</div>
<div class="line"><span class="lineno"> 3292</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a76a05f1a743edc939472c8402674b5e0">Mount</a>(displayId, vehicleId, <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 3293</span>    }</div>
<div class="line"><span class="lineno"> 3294</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3295</span>    {</div>
<div class="line"><span class="lineno"> 3296</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4c786d459751c90df99fb7f1526e43e7">Dismount</a>();</div>
<div class="line"><span class="lineno"> 3297</span>        <span class="comment">//some mounts like Headless Horseman&#39;s Mount or broom stick are skill based spell</span></div>
<div class="line"><span class="lineno"> 3298</span>        <span class="comment">// need to remove ALL arura related to mounts, this will stop client crash with broom stick</span></div>
<div class="line"><span class="lineno"> 3299</span>        <span class="comment">// and never endless flying after using Headless Horseman&#39;s Mount</span></div>
<div class="line"><span class="lineno"> 3300</span>        <span class="keywordflow">if</span> (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>)</div>
<div class="line"><span class="lineno"> 3301</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>);</div>
<div class="line"><span class="lineno"> 3302</span>    }</div>
<div class="line"><span class="lineno"> 3303</span>}</div>
<div class="ttc" id="aa02771_html_a292c893150c454dd75628b719db1fe97aa7be476935ce81144c2b383b7af7bf47"><div class="ttname"><a href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aa7be476935ce81144c2b383b7af7bf47">SPELL_EFFECT_SUMMON</a></div><div class="ttdeci">@ SPELL_EFFECT_SUMMON</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:806</div></div>
<div class="ttc" id="aa08518_html_a4c786d459751c90df99fb7f1526e43e7"><div class="ttname"><a href="../../db/df9/a08518.html#a4c786d459751c90df99fb7f1526e43e7">Unit::Dismount</a></div><div class="ttdeci">void Dismount()</div><div class="ttdef"><b>Definition:</b> Unit.cpp:13519</div></div>
<div class="ttc" id="aa08518_html_a69c5ac45b65cf0dede6e0ee837361f61"><div class="ttname"><a href="../../db/df9/a08518.html#a69c5ac45b65cf0dede6e0ee837361f61">Unit::HasAura</a></div><div class="ttdeci">bool HasAura(uint32 spellId, ObjectGuid casterGUID=ObjectGuid::Empty, ObjectGuid itemCasterGUID=ObjectGuid::Empty, uint8 reqEffMask=0) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5698</div></div>
<div class="ttc" id="aa08518_html_a76a05f1a743edc939472c8402674b5e0"><div class="ttname"><a href="../../db/df9/a08518.html#a76a05f1a743edc939472c8402674b5e0">Unit::Mount</a></div><div class="ttdeci">void Mount(uint32 mount, uint32 vehicleId=0, uint32 creatureEntry=0)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:13460</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00033">BREWFEST_KODO</a>, <a class="el" href="../../#l01647">ObjectMgr::ChooseDisplayId()</a>, <a class="el" href="../../#l00179">CreatureModel::CreatureDisplayID</a>, <a class="el" href="../../#l13519">Unit::Dismount()</a>, <a class="el" href="../../#l00035">FRESH_BREWFEST_HOPS</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l01603">Unit::GetSpeedRate()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00034">GREAT_BREWFEST_KODO</a>, <a class="el" href="../../#l05698">Unit::HasAura()</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l13460">Unit::Mount()</a>, <a class="el" href="../../#l00329">MOVE_RUN</a>, <a class="el" href="../../#l05110">Unit::RemoveAurasByType()</a>, <a class="el" href="../../#l01634">sObjectMgr</a>, <a class="el" href="../../#l00270">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>, <a class="el" href="../../#l00141">SPELL_AURA_MOUNTED</a>, and <a class="el" href="../../#l00806">SPELL_EFFECT_SUMMON</a>.</p>

</div>
</div>
<a id="ae5ad5d0e3406e96a0f5e5f58d2c133ce" name="ae5ad5d0e3406e96a0f5e5f58d2c133ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5ad5d0e3406e96a0f5e5f58d2c133ce">&#9670;&#160;</a></span>HandleAuraOpenStable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraOpenStable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6092</span>{</div>
<div class="line"><span class="lineno"> 6093</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 6094</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6095</span> </div>
<div class="line"><span class="lineno"> 6096</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 6097</span> </div>
<div class="line"><span class="lineno"> 6098</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || !target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a3aeab7def818ba6c50249f197ad2f9ca">IsInWorld</a>())</div>
<div class="line"><span class="lineno"> 6099</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6100</span> </div>
<div class="line"><span class="lineno"> 6101</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 6102</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6ab11ca64cde7c5cde1f53998a6f7253">GetSession</a>()-&gt;<a class="code hl_function" href="../../d8/dc5/a10742.html#aeb9c5d11267618b090c926ac7709a3cf">SendStablePet</a>(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 6103</span> </div>
<div class="line"><span class="lineno"> 6104</span>    <span class="comment">// client auto close stable dialog at !apply aura</span></div>
<div class="line"><span class="lineno"> 6105</span>}</div>
<div class="ttc" id="aa08142_html_a3aeab7def818ba6c50249f197ad2f9ca"><div class="ttname"><a href="../../df/d2d/a08142.html#a3aeab7def818ba6c50249f197ad2f9ca">Object::IsInWorld</a></div><div class="ttdeci">bool IsInWorld() const</div><div class="ttdef"><b>Definition:</b> Object.h:104</div></div>
<div class="ttc" id="aa08386_html_a6ab11ca64cde7c5cde1f53998a6f7253"><div class="ttname"><a href="../../d0/dc6/a08386.html#a6ab11ca64cde7c5cde1f53998a6f7253">Player::GetSession</a></div><div class="ttdeci">WorldSession * GetSession() const</div><div class="ttdef"><b>Definition:</b> Player.h:1981</div></div>
<div class="ttc" id="aa10742_html_aeb9c5d11267618b090c926ac7709a3cf"><div class="ttname"><a href="../../d8/dc5/a10742.html#aeb9c5d11267618b090c926ac7709a3cf">WorldSession::SendStablePet</a></div><div class="ttdeci">void SendStablePet(ObjectGuid guid)</div><div class="ttdef"><b>Definition:</b> NPCHandler.cpp:480</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l01981">Player::GetSession()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00104">Object::IsInWorld()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00480">WorldSession::SendStablePet()</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="af572ebb2a04d65ef7f1544640b5b51ab" name="af572ebb2a04d65ef7f1544640b5b51ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af572ebb2a04d65ef7f1544640b5b51ab">&#9670;&#160;</a></span>HandleAuraOverrideSpells()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraOverrideSpells </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6121</span>{</div>
<div class="line"><span class="lineno"> 6122</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 6123</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6124</span> </div>
<div class="line"><span class="lineno"> 6125</span>    <a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>()-&gt;ToPlayer();</div>
<div class="line"><span class="lineno"> 6126</span> </div>
<div class="line"><span class="lineno"> 6127</span>    <span class="keywordflow">if</span> (!target || !target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a3aeab7def818ba6c50249f197ad2f9ca">IsInWorld</a>())</div>
<div class="line"><span class="lineno"> 6128</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6129</span> </div>
<div class="line"><span class="lineno"> 6130</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> overrideId = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 6131</span> </div>
<div class="line"><span class="lineno"> 6132</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 6133</span>    {</div>
<div class="line"><span class="lineno"> 6134</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a2c1b0dfb53bdedb46f13733dcde3d216">SetUInt16Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, <a class="code hl_define" href="../../d7/d13/a03365.html#a5762ddb9f9cc6b6a6f8fb2669f6398a3">PLAYER_BYTES_2_OVERRIDE_SPELLS_UINT16_OFFSET</a>, overrideId);</div>
<div class="line"><span class="lineno"> 6135</span>        <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../d2/d42/a27882.html">OverrideSpellDataEntry</a> <span class="keyword">const</span>* overrideSpells = <a class="code hl_variable" href="../../d7/da2/a03704.html#a702e3db9115321a1cce0c6d5929bd41a">sOverrideSpellDataStore</a>.LookupEntry(overrideId))</div>
<div class="line"><span class="lineno"> 6136</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#af5ab857719ce6437c52aee4b87c639f3">MAX_OVERRIDE_SPELL</a>; ++i)</div>
<div class="line"><span class="lineno"> 6137</span>                <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = overrideSpells-&gt;spellId[i])</div>
<div class="line"><span class="lineno"> 6138</span>                    target-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a107e0be6e83289162958bd63740896d0">_addSpell</a>(spellId, <a class="code hl_define" href="../../d7/d13/a03365.html#a6a6dfeb0ddba76f8c51abbe98ea08609">SPEC_MASK_ALL</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 6139</span>    }</div>
<div class="line"><span class="lineno"> 6140</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 6141</span>    {</div>
<div class="line"><span class="lineno"> 6142</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a2c1b0dfb53bdedb46f13733dcde3d216">SetUInt16Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, <a class="code hl_define" href="../../d7/d13/a03365.html#a5762ddb9f9cc6b6a6f8fb2669f6398a3">PLAYER_BYTES_2_OVERRIDE_SPELLS_UINT16_OFFSET</a>, 0);</div>
<div class="line"><span class="lineno"> 6143</span>        <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../d2/d42/a27882.html">OverrideSpellDataEntry</a> <span class="keyword">const</span>* overrideSpells = <a class="code hl_variable" href="../../d7/da2/a03704.html#a702e3db9115321a1cce0c6d5929bd41a">sOverrideSpellDataStore</a>.LookupEntry(overrideId))</div>
<div class="line"><span class="lineno"> 6144</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#af5ab857719ce6437c52aee4b87c639f3">MAX_OVERRIDE_SPELL</a>; ++i)</div>
<div class="line"><span class="lineno"> 6145</span>                <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = overrideSpells-&gt;spellId[i])</div>
<div class="line"><span class="lineno"> 6146</span>                    target-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a14874da88b7bd1006282e8250b3908ea">removeSpell</a>(spellId, <a class="code hl_define" href="../../d7/d13/a03365.html#a6a6dfeb0ddba76f8c51abbe98ea08609">SPEC_MASK_ALL</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 6147</span>    }</div>
<div class="line"><span class="lineno"> 6148</span>}</div>
<div class="ttc" id="aa02750_html_af5ab857719ce6437c52aee4b87c639f3"><div class="ttname"><a href="../../d7/d14/a02750.html#af5ab857719ce6437c52aee4b87c639f3">MAX_OVERRIDE_SPELL</a></div><div class="ttdeci">#define MAX_OVERRIDE_SPELL</div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1410</div></div>
<div class="ttc" id="aa03365_html_a5762ddb9f9cc6b6a6f8fb2669f6398a3"><div class="ttname"><a href="../../d7/d13/a03365.html#a5762ddb9f9cc6b6a6f8fb2669f6398a3">PLAYER_BYTES_2_OVERRIDE_SPELLS_UINT16_OFFSET</a></div><div class="ttdeci">#define PLAYER_BYTES_2_OVERRIDE_SPELLS_UINT16_OFFSET</div><div class="ttdef"><b>Definition:</b> Player.h:551</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTES2</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:378</div></div>
<div class="ttc" id="aa03704_html_a702e3db9115321a1cce0c6d5929bd41a"><div class="ttname"><a href="../../d7/da2/a03704.html#a702e3db9115321a1cce0c6d5929bd41a">sOverrideSpellDataStore</a></div><div class="ttdeci">DBCStorage&lt; OverrideSpellDataEntry &gt; sOverrideSpellDataStore(OverrideSpellDatafmt)</div></div>
<div class="ttc" id="aa08142_html_a2c1b0dfb53bdedb46f13733dcde3d216"><div class="ttname"><a href="../../df/d2d/a08142.html#a2c1b0dfb53bdedb46f13733dcde3d216">Object::SetUInt16Value</a></div><div class="ttdeci">void SetUInt16Value(uint16 index, uint8 offset, uint16 value)</div><div class="ttdef"><b>Definition:</b> Object.cpp:770</div></div>
<div class="ttc" id="aa27882_html"><div class="ttname"><a href="../../d2/d42/a27882.html">OverrideSpellDataEntry</a></div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1413</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l03091">Player::_addSpell()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00104">Object::IsInWorld()</a>, <a class="el" href="../../#l01410">MAX_OVERRIDE_SPELL</a>, <a class="el" href="../../#l00551">PLAYER_BYTES_2_OVERRIDE_SPELLS_UINT16_OFFSET</a>, <a class="el" href="../../#l00378">PLAYER_FIELD_BYTES2</a>, <a class="el" href="../../#l03320">Player::removeSpell()</a>, <a class="el" href="../../#l00770">Object::SetUInt16Value()</a>, <a class="el" href="../../d7/da2/a03704.html#a702e3db9115321a1cce0c6d5929bd41a">sOverrideSpellDataStore</a>, <a class="el" href="../../#l00177">SPEC_MASK_ALL</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a0ae0e56cbc82f9dde5927d069fad34e2" name="a0ae0e56cbc82f9dde5927d069fad34e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ae0e56cbc82f9dde5927d069fad34e2">&#9670;&#160;</a></span>HandleAuraRetainComboPoints()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraRetainComboPoints </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5390</span>{</div>
<div class="line"><span class="lineno"> 5391</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 5392</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5393</span> </div>
<div class="line"><span class="lineno"> 5394</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5395</span> </div>
<div class="line"><span class="lineno"> 5396</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5397</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5398</span> </div>
<div class="line"><span class="lineno"> 5399</span>    <span class="comment">// combo points was added in SPELL_EFFECT_ADD_COMBO_POINTS handler</span></div>
<div class="line"><span class="lineno"> 5400</span>    <span class="comment">// remove only if aura expire by time (in case combo points amount change aura removed without combo points lost)</span></div>
<div class="line"><span class="lineno"> 5401</span>    <span class="keywordflow">if</span> (!(apply) &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetDuration() == 0)</div>
<div class="line"><span class="lineno"> 5402</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab33ff8d0ef073208419bfd10f237765e">AddComboPoints</a>(-<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 5403</span>}</div>
<div class="ttc" id="aa08518_html_ab33ff8d0ef073208419bfd10f237765e"><div class="ttname"><a href="../../db/df9/a08518.html#ab33ff8d0ef073208419bfd10f237765e">Unit::AddComboPoints</a></div><div class="ttdeci">void AddComboPoints(Unit *target, int8 count)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:16834</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l16834">Unit::AddComboPoints()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../#l00197">Object::IsPlayer()</a>.</p>

</div>
</div>
<a id="a2d687bfbacc779c97d18c866a5544bfe" name="a2d687bfbacc779c97d18c866a5544bfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d687bfbacc779c97d18c866a5544bfe">&#9670;&#160;</a></span>HandleAuraSetVehicle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraSetVehicle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6151</span>{</div>
<div class="line"><span class="lineno"> 6152</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 6153</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6154</span> </div>
<div class="line"><span class="lineno"> 6155</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 6156</span> </div>
<div class="line"><span class="lineno"> 6157</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || !target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a3aeab7def818ba6c50249f197ad2f9ca">IsInWorld</a>())</div>
<div class="line"><span class="lineno"> 6158</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6159</span> </div>
<div class="line"><span class="lineno"> 6160</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> vehicleId = <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><span class="lineno"> 6161</span> </div>
<div class="line"><span class="lineno"> 6162</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 6163</span>    {</div>
<div class="line"><span class="lineno"> 6164</span>        <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa8ccfbea62971de629706f3800a09f52">CreateVehicleKit</a>(vehicleId, 0))</div>
<div class="line"><span class="lineno"> 6165</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6166</span>    }</div>
<div class="line"><span class="lineno"> 6167</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae54fce65a1c084c982043777288895ec">GetVehicleKit</a>())</div>
<div class="line"><span class="lineno"> 6168</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a65ee899ca8381fb07b31ad005abd2349">RemoveVehicleKit</a>();</div>
<div class="line"><span class="lineno"> 6169</span> </div>
<div class="line"><span class="lineno"> 6170</span>    <a class="code hl_class" href="../../d0/d90/a10698.html">WorldPacket</a> data(<a class="code hl_enumvalue" href="../../d5/dfd/a04680.html#gga1073b6abb3a749f18bf1633020879e9ba7069d40b50de402762dc3a592172d175">SMSG_PLAYER_VEHICLE_DATA</a>, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a27858daca373d521d26feea68d1906a8">GetPackGUID</a>().<a class="code hl_function" href="../../d7/d5b/a08194.html#a22ac06b7072951e84bbf69abcd7d58f6">size</a>() + 4);</div>
<div class="line"><span class="lineno"> 6171</span>    data &lt;&lt; target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a27858daca373d521d26feea68d1906a8">GetPackGUID</a>();</div>
<div class="line"><span class="lineno"> 6172</span>    data &lt;&lt; <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(apply ? vehicleId : 0);</div>
<div class="line"><span class="lineno"> 6173</span>    target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a0f8d05be503013c4e84dddae9adf150a">SendMessageToSet</a>(&amp;data, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 6174</span> </div>
<div class="line"><span class="lineno"> 6175</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 6176</span>    {</div>
<div class="line"><span class="lineno"> 6177</span>        data.Initialize(<a class="code hl_enumvalue" href="../../d5/dfd/a04680.html#gga1073b6abb3a749f18bf1633020879e9baf2f9d8055130765053678690390c111e">SMSG_ON_CANCEL_EXPECTED_RIDE_VEHICLE_AURA</a>, 0);</div>
<div class="line"><span class="lineno"> 6178</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6ab11ca64cde7c5cde1f53998a6f7253">GetSession</a>()-&gt;<a class="code hl_function" href="../../d8/dc5/a10742.html#a2c74b80ca9b81765049e315813b29269">SendPacket</a>(&amp;data);</div>
<div class="line"><span class="lineno"> 6179</span>    }</div>
<div class="line"><span class="lineno"> 6180</span>}</div>
<div class="ttc" id="aa04680_html_gga1073b6abb3a749f18bf1633020879e9ba7069d40b50de402762dc3a592172d175"><div class="ttname"><a href="../../d5/dfd/a04680.html#gga1073b6abb3a749f18bf1633020879e9ba7069d40b50de402762dc3a592172d175">SMSG_PLAYER_VEHICLE_DATA</a></div><div class="ttdeci">@ SMSG_PLAYER_VEHICLE_DATA</div><div class="ttdef"><b>Definition:</b> Opcodes.h:1221</div></div>
<div class="ttc" id="aa04680_html_gga1073b6abb3a749f18bf1633020879e9baf2f9d8055130765053678690390c111e"><div class="ttname"><a href="../../d5/dfd/a04680.html#gga1073b6abb3a749f18bf1633020879e9baf2f9d8055130765053678690390c111e">SMSG_ON_CANCEL_EXPECTED_RIDE_VEHICLE_AURA</a></div><div class="ttdeci">@ SMSG_ON_CANCEL_EXPECTED_RIDE_VEHICLE_AURA</div><div class="ttdef"><b>Definition:</b> Opcodes.h:1211</div></div>
<div class="ttc" id="aa08142_html_a27858daca373d521d26feea68d1906a8"><div class="ttname"><a href="../../df/d2d/a08142.html#a27858daca373d521d26feea68d1906a8">Object::GetPackGUID</a></div><div class="ttdeci">PackedGuid const &amp; GetPackGUID() const</div><div class="ttdef"><b>Definition:</b> Object.h:111</div></div>
<div class="ttc" id="aa08174_html_a0f8d05be503013c4e84dddae9adf150a"><div class="ttname"><a href="../../d3/d4c/a08174.html#a0f8d05be503013c4e84dddae9adf150a">WorldObject::SendMessageToSet</a></div><div class="ttdeci">virtual void SendMessageToSet(WorldPacket const *data, bool self) const</div><div class="ttdef"><b>Definition:</b> Object.cpp:2080</div></div>
<div class="ttc" id="aa08194_html_a22ac06b7072951e84bbf69abcd7d58f6"><div class="ttname"><a href="../../d7/d5b/a08194.html#a22ac06b7072951e84bbf69abcd7d58f6">PackedGuid::size</a></div><div class="ttdeci">std::size_t size() const</div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:274</div></div>
<div class="ttc" id="aa08518_html_a65ee899ca8381fb07b31ad005abd2349"><div class="ttname"><a href="../../db/df9/a08518.html#a65ee899ca8381fb07b31ad005abd2349">Unit::RemoveVehicleKit</a></div><div class="ttdeci">void RemoveVehicleKit()</div><div class="ttdef"><b>Definition:</b> Unit.cpp:18723</div></div>
<div class="ttc" id="aa08518_html_aa8ccfbea62971de629706f3800a09f52"><div class="ttname"><a href="../../db/df9/a08518.html#aa8ccfbea62971de629706f3800a09f52">Unit::CreateVehicleKit</a></div><div class="ttdeci">bool CreateVehicleKit(uint32 id, uint32 creatureEntry)</div><div class="ttdoc">Returns the transport this unit is on directly (if on vehicle and transport, return vehicle)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:18711</div></div>
<div class="ttc" id="aa10698_html"><div class="ttname"><a href="../../d0/d90/a10698.html">WorldPacket</a></div><div class="ttdef"><b>Definition:</b> WorldPacket.h:26</div></div>
<div class="ttc" id="aa10742_html_a2c74b80ca9b81765049e315813b29269"><div class="ttname"><a href="../../d8/dc5/a10742.html#a2c74b80ca9b81765049e315813b29269">WorldSession::SendPacket</a></div><div class="ttdeci">void SendPacket(WorldPacket const *packet)</div><div class="ttdoc">Send a packet to the client.</div><div class="ttdef"><b>Definition:</b> WorldSession.cpp:214</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l18711">Unit::CreateVehicleKit()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00111">Object::GetPackGUID()</a>, <a class="el" href="../../#l01981">Player::GetSession()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01739">Unit::GetVehicleKit()</a>, <a class="el" href="../../#l00068">WorldPacket::Initialize()</a>, <a class="el" href="../../#l00104">Object::IsInWorld()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l18723">Unit::RemoveVehicleKit()</a>, <a class="el" href="../../#l02080">WorldObject::SendMessageToSet()</a>, <a class="el" href="../../#l00214">WorldSession::SendPacket()</a>, <a class="el" href="../../#l00274">PackedGuid::size()</a>, <a class="el" href="../../#l01211">SMSG_ON_CANCEL_EXPECTED_RIDE_VEHICLE_AURA</a>, <a class="el" href="../../#l01221">SMSG_PLAYER_VEHICLE_DATA</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="af5eeb3fd5b51cc797c21c374150a7f41" name="af5eeb3fd5b51cc797c21c374150a7f41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5eeb3fd5b51cc797c21c374150a7f41">&#9670;&#160;</a></span>HandleAuraTrackCreatures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraTrackCreatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3109</span>{</div>
<div class="line"><span class="lineno"> 3110</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3111</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3112</span> </div>
<div class="line"><span class="lineno"> 3113</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3114</span> </div>
<div class="line"><span class="lineno"> 3115</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 3116</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3117</span> </div>
<div class="line"><span class="lineno"> 3118</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3119</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881abf147d97c80985ae38d40088bf1e8804">PLAYER_TRACK_CREATURES</a>, <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(1) &lt;&lt; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><span class="lineno"> 3120</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3121</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881abf147d97c80985ae38d40088bf1e8804">PLAYER_TRACK_CREATURES</a>, <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(1) &lt;&lt; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><span class="lineno"> 3122</span>}</div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881abf147d97c80985ae38d40088bf1e8804"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881abf147d97c80985ae38d40088bf1e8804">PLAYER_TRACK_CREATURES</a></div><div class="ttdeci">@ PLAYER_TRACK_CREATURES</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:344</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00344">PLAYER_TRACK_CREATURES</a>, <a class="el" href="../../#l00860">Object::RemoveFlag()</a>, and <a class="el" href="../../#l00845">Object::SetFlag()</a>.</p>

</div>
</div>
<a id="a1432141df83fc575b03313f9def132ad" name="a1432141df83fc575b03313f9def132ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1432141df83fc575b03313f9def132ad">&#9670;&#160;</a></span>HandleAuraTrackResources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraTrackResources </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3125</span>{</div>
<div class="line"><span class="lineno"> 3126</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3127</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3128</span> </div>
<div class="line"><span class="lineno"> 3129</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3130</span> </div>
<div class="line"><span class="lineno"> 3131</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 3132</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3133</span> </div>
<div class="line"><span class="lineno"> 3134</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3135</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a79a7a80acdec46961b4d8aaead4ae631">SetFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881adec70967051c839c7d205c14e21dfc14">PLAYER_TRACK_RESOURCES</a>, <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(1) &lt;&lt; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><span class="lineno"> 3136</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3137</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a7e764fbd4b7eca84f80e36e900bca7d3">RemoveFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881adec70967051c839c7d205c14e21dfc14">PLAYER_TRACK_RESOURCES</a>, <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(1) &lt;&lt; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><span class="lineno"> 3138</span>}</div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881adec70967051c839c7d205c14e21dfc14"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881adec70967051c839c7d205c14e21dfc14">PLAYER_TRACK_RESOURCES</a></div><div class="ttdeci">@ PLAYER_TRACK_RESOURCES</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:345</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00345">PLAYER_TRACK_RESOURCES</a>, <a class="el" href="../../#l00860">Object::RemoveFlag()</a>, and <a class="el" href="../../#l00845">Object::SetFlag()</a>.</p>

</div>
</div>
<a id="a901e04d2d5c6418bbfeb5e7820fdba30" name="a901e04d2d5c6418bbfeb5e7820fdba30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a901e04d2d5c6418bbfeb5e7820fdba30">&#9670;&#160;</a></span>HandleAuraTrackStealthed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraTrackStealthed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3141</span>{</div>
<div class="line"><span class="lineno"> 3142</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3143</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3144</span> </div>
<div class="line"><span class="lineno"> 3145</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3146</span> </div>
<div class="line"><span class="lineno"> 3147</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 3148</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3149</span> </div>
<div class="line"><span class="lineno"> 3150</span>    <span class="keywordflow">if</span> (!(apply))</div>
<div class="line"><span class="lineno"> 3151</span>    {</div>
<div class="line"><span class="lineno"> 3152</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3153</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><span class="lineno"> 3154</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3155</span>    }</div>
<div class="line"><span class="lineno"> 3156</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a882b48728ca660c0f6251bb595e8c67e">ApplyModFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881adec3c53fd2c3fb2d9849fb52e62f418c">PLAYER_FIELD_BYTES</a>, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a31ae2504a623eb1746ff5da8a1902333aaf1cbce95c600ce8b27067d9c8f47da8">PLAYER_FIELD_BYTE_TRACK_STEALTHED</a>, apply);</div>
<div class="line"><span class="lineno"> 3157</span>}</div>
<div class="ttc" id="aa03365_html_a31ae2504a623eb1746ff5da8a1902333aaf1cbce95c600ce8b27067d9c8f47da8"><div class="ttname"><a href="../../d7/d13/a03365.html#a31ae2504a623eb1746ff5da8a1902333aaf1cbce95c600ce8b27067d9c8f47da8">PLAYER_FIELD_BYTE_TRACK_STEALTHED</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTE_TRACK_STEALTHED</div><div class="ttdef"><b>Definition:</b> Player.h:559</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881adec3c53fd2c3fb2d9849fb52e62f418c"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881adec3c53fd2c3fb2d9849fb52e62f418c">PLAYER_FIELD_BYTES</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTES</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:368</div></div>
<div class="ttc" id="aa08142_html_a882b48728ca660c0f6251bb595e8c67e"><div class="ttname"><a href="../../df/d2d/a08142.html#a882b48728ca660c0f6251bb595e8c67e">Object::ApplyModFlag</a></div><div class="ttdeci">void ApplyModFlag(uint16 index, uint32 flag, bool apply)</div><div class="ttdef"><b>Definition:</b> Object.cpp:899</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00899">Object::ApplyModFlag()</a>, <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00559">PLAYER_FIELD_BYTE_TRACK_STEALTHED</a>, and <a class="el" href="../../#l00368">PLAYER_FIELD_BYTES</a>.</p>

</div>
</div>
<a id="a8aeb4f5c3a5130afb5df2d83667b1877" name="a8aeb4f5c3a5130afb5df2d83667b1877"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aeb4f5c3a5130afb5df2d83667b1877">&#9670;&#160;</a></span>HandleAuraTransform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraTransform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2162</span>{</div>
<div class="line"><span class="lineno"> 2163</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 2164</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2165</span> </div>
<div class="line"><span class="lineno"> 2166</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 2167</span> </div>
<div class="line"><span class="lineno"> 2168</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 2169</span>    {</div>
<div class="line"><span class="lineno"> 2170</span>        <span class="comment">// update active transform spell only when transform or shapeshift not set or not overwriting negative by positive case</span></div>
<div class="line"><span class="lineno"> 2171</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada6a12b14654225a9ccea65799ce6fc780">SPELL_ATTR0_NO_IMMUNITIES</a>) || !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af9746f07fe538ca5db7a6206e53637f9">GetModelForForm</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a373a25c8d6ff3ca2f5653267c1269ad4">GetShapeshiftForm</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>()) || !<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;IsPositive())</div>
<div class="line"><span class="lineno"> 2172</span>        {</div>
<div class="line"><span class="lineno"> 2173</span>            <span class="comment">// special case (spell specific functionality)</span></div>
<div class="line"><span class="lineno"> 2174</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == 0)</div>
<div class="line"><span class="lineno"> 2175</span>            {</div>
<div class="line"><span class="lineno"> 2176</span>                <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno"> 2177</span>                {</div>
<div class="line"><span class="lineno"> 2178</span>                    <span class="comment">// Orb of Deception</span></div>
<div class="line"><span class="lineno"> 2179</span>                    <span class="keywordflow">case</span> 16739:</div>
<div class="line"><span class="lineno"> 2180</span>                        {</div>
<div class="line"><span class="lineno"> 2181</span>                            <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 2182</span>                                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2183</span> </div>
<div class="line"><span class="lineno"> 2184</span>                            <span class="keywordflow">switch</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60368071d6d8e6a23977ea4b44249de1">getRace</a>())</div>
<div class="line"><span class="lineno"> 2185</span>                            {</div>
<div class="line"><span class="lineno"> 2186</span>                                <span class="comment">// Blood Elf</span></div>
<div class="line"><span class="lineno"> 2187</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80aa1357e803e964cc4737c2820e4ed1c7b">RACE_BLOODELF</a>:</div>
<div class="line"><span class="lineno"> 2188</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 17829 : 17830);</div>
<div class="line"><span class="lineno"> 2189</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2190</span>                                <span class="comment">// Orc</span></div>
<div class="line"><span class="lineno"> 2191</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a446767743ece0d95b9bbe498ef1476b5">RACE_ORC</a>:</div>
<div class="line"><span class="lineno"> 2192</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10139 : 10140);</div>
<div class="line"><span class="lineno"> 2193</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2194</span>                                <span class="comment">// Troll</span></div>
<div class="line"><span class="lineno"> 2195</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a101b985cb59bea5d2463ab04e339feaa">RACE_TROLL</a>:</div>
<div class="line"><span class="lineno"> 2196</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10135 : 10134);</div>
<div class="line"><span class="lineno"> 2197</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2198</span>                                <span class="comment">// Tauren</span></div>
<div class="line"><span class="lineno"> 2199</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80af53d3825f30ea6b3545ddc8f8d5e6938">RACE_TAUREN</a>:</div>
<div class="line"><span class="lineno"> 2200</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10136 : 10147);</div>
<div class="line"><span class="lineno"> 2201</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2202</span>                                <span class="comment">// Undead</span></div>
<div class="line"><span class="lineno"> 2203</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a2b9d8ca3a451a2bd60b29614cbc6b167">RACE_UNDEAD_PLAYER</a>:</div>
<div class="line"><span class="lineno"> 2204</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10146 : 10145);</div>
<div class="line"><span class="lineno"> 2205</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2206</span>                                <span class="comment">// Draenei</span></div>
<div class="line"><span class="lineno"> 2207</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a612f7cbe8f6ee425f6de12163d36f08d">RACE_DRAENEI</a>:</div>
<div class="line"><span class="lineno"> 2208</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 17827 : 17828);</div>
<div class="line"><span class="lineno"> 2209</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2210</span>                                <span class="comment">// Dwarf</span></div>
<div class="line"><span class="lineno"> 2211</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80aa205d146ad42dcf361e62da3e2b2afec">RACE_DWARF</a>:</div>
<div class="line"><span class="lineno"> 2212</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10141 : 10142);</div>
<div class="line"><span class="lineno"> 2213</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2214</span>                                <span class="comment">// Gnome</span></div>
<div class="line"><span class="lineno"> 2215</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80aa8a1dc88cc120a9a5b25d1f651d08538">RACE_GNOME</a>:</div>
<div class="line"><span class="lineno"> 2216</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10148 : 10149);</div>
<div class="line"><span class="lineno"> 2217</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2218</span>                                <span class="comment">// Human</span></div>
<div class="line"><span class="lineno"> 2219</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80ab70d874fe662deadb3bc53be59d896e7">RACE_HUMAN</a>:</div>
<div class="line"><span class="lineno"> 2220</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10137 : 10138);</div>
<div class="line"><span class="lineno"> 2221</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2222</span>                                <span class="comment">// Night Elf</span></div>
<div class="line"><span class="lineno"> 2223</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a9ef7a57e61b0f05d7d1e50b0de89820c">RACE_NIGHTELF</a>:</div>
<div class="line"><span class="lineno"> 2224</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 10143 : 10144);</div>
<div class="line"><span class="lineno"> 2225</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2226</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2227</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2228</span>                            }</div>
<div class="line"><span class="lineno"> 2229</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2230</span>                        }</div>
<div class="line"><span class="lineno"> 2231</span>                    <span class="comment">// Murloc costume</span></div>
<div class="line"><span class="lineno"> 2232</span>                    <span class="keywordflow">case</span> 42365:</div>
<div class="line"><span class="lineno"> 2233</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(21723);</div>
<div class="line"><span class="lineno"> 2234</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2235</span>                    <span class="comment">// Dread Corsair</span></div>
<div class="line"><span class="lineno"> 2236</span>                    <span class="keywordflow">case</span> 50517:</div>
<div class="line"><span class="lineno"> 2237</span>                    <span class="comment">// Corsair Costume</span></div>
<div class="line"><span class="lineno"> 2238</span>                    <span class="keywordflow">case</span> 51926:</div>
<div class="line"><span class="lineno"> 2239</span>                        {</div>
<div class="line"><span class="lineno"> 2240</span>                            <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 2241</span>                                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2242</span> </div>
<div class="line"><span class="lineno"> 2243</span>                            <span class="keywordflow">switch</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60368071d6d8e6a23977ea4b44249de1">getRace</a>())</div>
<div class="line"><span class="lineno"> 2244</span>                            {</div>
<div class="line"><span class="lineno"> 2245</span>                                <span class="comment">// Blood Elf</span></div>
<div class="line"><span class="lineno"> 2246</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80aa1357e803e964cc4737c2820e4ed1c7b">RACE_BLOODELF</a>:</div>
<div class="line"><span class="lineno"> 2247</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25032 : 25043);</div>
<div class="line"><span class="lineno"> 2248</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2249</span>                                <span class="comment">// Orc</span></div>
<div class="line"><span class="lineno"> 2250</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a446767743ece0d95b9bbe498ef1476b5">RACE_ORC</a>:</div>
<div class="line"><span class="lineno"> 2251</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25039 : 25050);</div>
<div class="line"><span class="lineno"> 2252</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2253</span>                                <span class="comment">// Troll</span></div>
<div class="line"><span class="lineno"> 2254</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a101b985cb59bea5d2463ab04e339feaa">RACE_TROLL</a>:</div>
<div class="line"><span class="lineno"> 2255</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25041 : 25052);</div>
<div class="line"><span class="lineno"> 2256</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2257</span>                                <span class="comment">// Tauren</span></div>
<div class="line"><span class="lineno"> 2258</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80af53d3825f30ea6b3545ddc8f8d5e6938">RACE_TAUREN</a>:</div>
<div class="line"><span class="lineno"> 2259</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25040 : 25051);</div>
<div class="line"><span class="lineno"> 2260</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2261</span>                                <span class="comment">// Undead</span></div>
<div class="line"><span class="lineno"> 2262</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a2b9d8ca3a451a2bd60b29614cbc6b167">RACE_UNDEAD_PLAYER</a>:</div>
<div class="line"><span class="lineno"> 2263</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25042 : 25053);</div>
<div class="line"><span class="lineno"> 2264</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2265</span>                                <span class="comment">// Draenei</span></div>
<div class="line"><span class="lineno"> 2266</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a612f7cbe8f6ee425f6de12163d36f08d">RACE_DRAENEI</a>:</div>
<div class="line"><span class="lineno"> 2267</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25033 : 25044);</div>
<div class="line"><span class="lineno"> 2268</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2269</span>                                <span class="comment">// Dwarf</span></div>
<div class="line"><span class="lineno"> 2270</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80aa205d146ad42dcf361e62da3e2b2afec">RACE_DWARF</a>:</div>
<div class="line"><span class="lineno"> 2271</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25034 : 25045);</div>
<div class="line"><span class="lineno"> 2272</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2273</span>                                <span class="comment">// Gnome</span></div>
<div class="line"><span class="lineno"> 2274</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80aa8a1dc88cc120a9a5b25d1f651d08538">RACE_GNOME</a>:</div>
<div class="line"><span class="lineno"> 2275</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25035 : 25046);</div>
<div class="line"><span class="lineno"> 2276</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2277</span>                                <span class="comment">// Human</span></div>
<div class="line"><span class="lineno"> 2278</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80ab70d874fe662deadb3bc53be59d896e7">RACE_HUMAN</a>:</div>
<div class="line"><span class="lineno"> 2279</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25037 : 25048);</div>
<div class="line"><span class="lineno"> 2280</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2281</span>                                <span class="comment">// Night Elf</span></div>
<div class="line"><span class="lineno"> 2282</span>                                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a9ef7a57e61b0f05d7d1e50b0de89820c">RACE_NIGHTELF</a>:</div>
<div class="line"><span class="lineno"> 2283</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25038 : 25049);</div>
<div class="line"><span class="lineno"> 2284</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2285</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2286</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2287</span>                            }</div>
<div class="line"><span class="lineno"> 2288</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2289</span>                        }</div>
<div class="line"><span class="lineno"> 2290</span>                    <span class="comment">// Pygmy Oil</span></div>
<div class="line"><span class="lineno"> 2291</span>                    <span class="keywordflow">case</span> 53806:</div>
<div class="line"><span class="lineno"> 2292</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(22512);</div>
<div class="line"><span class="lineno"> 2293</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2294</span>                    <span class="comment">// Honor the Dead</span></div>
<div class="line"><span class="lineno"> 2295</span>                    <span class="keywordflow">case</span> 65386:</div>
<div class="line"><span class="lineno"> 2296</span>                    <span class="keywordflow">case</span> 65495:</div>
<div class="line"><span class="lineno"> 2297</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 29203 : 29204);</div>
<div class="line"><span class="lineno"> 2298</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2299</span>                    <span class="comment">// Gossip NPC Appearance - Brewfest</span></div>
<div class="line"><span class="lineno"> 2300</span>                    <span class="keywordflow">case</span> 65511:</div>
<div class="line"><span class="lineno"> 2301</span>                        {</div>
<div class="line"><span class="lineno"> 2302</span>                            <span class="keywordflow">switch</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a90819519d80b0472f6a812afe1a763b8">GetDisplayRace</a>())</div>
<div class="line"><span class="lineno"> 2303</span>                            {</div>
<div class="line"><span class="lineno"> 2304</span>                                <span class="keywordflow">case</span> DisplayRace::BloodElf:</div>
<div class="line"><span class="lineno"> 2305</span>                                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1))</div>
<div class="line"><span class="lineno"> 2306</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21839 : 21838);</div>
<div class="line"><span class="lineno"> 2307</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2308</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21841 : 21840);</div>
<div class="line"><span class="lineno"> 2309</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2310</span>                                <span class="keywordflow">case</span> DisplayRace::Orc:</div>
<div class="line"><span class="lineno"> 2311</span>                                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1))</div>
<div class="line"><span class="lineno"> 2312</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21867 : 21866);</div>
<div class="line"><span class="lineno"> 2313</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2314</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21869 : 21868);</div>
<div class="line"><span class="lineno"> 2315</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2316</span>                                <span class="keywordflow">case</span> DisplayRace::Troll:</div>
<div class="line"><span class="lineno"> 2317</span>                                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1))</div>
<div class="line"><span class="lineno"> 2318</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21875 : 21874);</div>
<div class="line"><span class="lineno"> 2319</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2320</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21877 : 21876);</div>
<div class="line"><span class="lineno"> 2321</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2322</span>                                <span class="keywordflow">case</span> DisplayRace::Tauren:</div>
<div class="line"><span class="lineno"> 2323</span>                                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1))</div>
<div class="line"><span class="lineno"> 2324</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21869 : 21871);</div>
<div class="line"><span class="lineno"> 2325</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2326</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21872 : 21873);</div>
<div class="line"><span class="lineno"> 2327</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2328</span>                                <span class="keywordflow">case</span> DisplayRace::Undead:</div>
<div class="line"><span class="lineno"> 2329</span>                                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1))</div>
<div class="line"><span class="lineno"> 2330</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21879 : 21878);</div>
<div class="line"><span class="lineno"> 2331</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2332</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21881 : 21880);</div>
<div class="line"><span class="lineno"> 2333</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2334</span>                                <span class="keywordflow">case</span> DisplayRace::Draenei:</div>
<div class="line"><span class="lineno"> 2335</span>                                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1))</div>
<div class="line"><span class="lineno"> 2336</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21844 : 21842);</div>
<div class="line"><span class="lineno"> 2337</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2338</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21845 : 21843);</div>
<div class="line"><span class="lineno"> 2339</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2340</span>                                <span class="keywordflow">case</span> DisplayRace::Dwarf:</div>
<div class="line"><span class="lineno"> 2341</span>                                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1))</div>
<div class="line"><span class="lineno"> 2342</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21846 : 21848);</div>
<div class="line"><span class="lineno"> 2343</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2344</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21847 : 21849);</div>
<div class="line"><span class="lineno"> 2345</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2346</span>                                <span class="keywordflow">case</span> DisplayRace::Gnome:</div>
<div class="line"><span class="lineno"> 2347</span>                                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1))</div>
<div class="line"><span class="lineno"> 2348</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21851 : 21850);</div>
<div class="line"><span class="lineno"> 2349</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2350</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21853 : 21852);</div>
<div class="line"><span class="lineno"> 2351</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2352</span>                                <span class="keywordflow">case</span> DisplayRace::Human:</div>
<div class="line"><span class="lineno"> 2353</span>                                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1))</div>
<div class="line"><span class="lineno"> 2354</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21859 : 21858);</div>
<div class="line"><span class="lineno"> 2355</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2356</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21861 : 21860);</div>
<div class="line"><span class="lineno"> 2357</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2358</span>                                <span class="keywordflow">case</span> DisplayRace::NightElf:</div>
<div class="line"><span class="lineno"> 2359</span>                                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1))</div>
<div class="line"><span class="lineno"> 2360</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21863 : 21862);</div>
<div class="line"><span class="lineno"> 2361</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2362</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21865 : 21864);</div>
<div class="line"><span class="lineno"> 2363</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2364</span>                                <span class="keywordflow">case</span> DisplayRace::Goblin:</div>
<div class="line"><span class="lineno"> 2365</span>                                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 1))</div>
<div class="line"><span class="lineno"> 2366</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21854 : 21856);</div>
<div class="line"><span class="lineno"> 2367</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2368</span>                                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21855 : 21857);</div>
<div class="line"><span class="lineno"> 2369</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2370</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2371</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2372</span>                            }</div>
<div class="line"><span class="lineno"> 2373</span> </div>
<div class="line"><span class="lineno"> 2374</span>                            <span class="comment">// equip random brewfest mug</span></div>
<div class="line"><span class="lineno"> 2375</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> itemIds[5] = {</div>
<div class="line"><span class="lineno"> 2376</span>                                2703,  <span class="comment">// Monster - Item, Tankard Wooden</span></div>
<div class="line"><span class="lineno"> 2377</span>                                2704,  <span class="comment">// Monster - Item, Tankard Dirty</span></div>
<div class="line"><span class="lineno"> 2378</span>                                2705,  <span class="comment">// Monster - Item, Tankard Metal</span></div>
<div class="line"><span class="lineno"> 2379</span>                                13861, <span class="comment">// Monster - Item, Tankard Gold</span></div>
<div class="line"><span class="lineno"> 2380</span>                                33963  <span class="comment">// NPC Equip 33963</span></div>
<div class="line"><span class="lineno"> 2381</span>                            };</div>
<div class="line"><span class="lineno"> 2382</span>                            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>())</div>
<div class="line"><span class="lineno"> 2383</span>                                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac2bd94b573bcf5e80cba886a8e2f540f">SetUInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a89f1b8c28d6c8813b9ece7c17144995c">UNIT_VIRTUAL_ITEM_SLOT_ID</a> + 0, itemIds[<a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, 4)]);</div>
<div class="line"><span class="lineno"> 2384</span> </div>
<div class="line"><span class="lineno"> 2385</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2386</span>                        }</div>
<div class="line"><span class="lineno"> 2387</span>                    <span class="comment">// Gossip NPC Appearance - Winter Veil</span></div>
<div class="line"><span class="lineno"> 2388</span>                    <span class="keywordflow">case</span> 65522:</div>
<div class="line"><span class="lineno"> 2389</span>                        {</div>
<div class="line"><span class="lineno"> 2390</span>                            <span class="keywordflow">switch</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a90819519d80b0472f6a812afe1a763b8">GetDisplayRace</a>())</div>
<div class="line"><span class="lineno"> 2391</span>                            {</div>
<div class="line"><span class="lineno"> 2392</span>                                <span class="keywordflow">case</span> DisplayRace::BloodElf:</div>
<div class="line"><span class="lineno"> 2393</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18793 : 18785);</div>
<div class="line"><span class="lineno"> 2394</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2395</span>                                <span class="keywordflow">case</span> DisplayRace::Orc:</div>
<div class="line"><span class="lineno"> 2396</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18805 : 18804);</div>
<div class="line"><span class="lineno"> 2397</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2398</span>                                <span class="keywordflow">case</span> DisplayRace::Troll:</div>
<div class="line"><span class="lineno"> 2399</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18809 : 18808);</div>
<div class="line"><span class="lineno"> 2400</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2401</span>                                <span class="keywordflow">case</span> DisplayRace::Tauren:</div>
<div class="line"><span class="lineno"> 2402</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18807 : 18806);</div>
<div class="line"><span class="lineno"> 2403</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2404</span>                                <span class="keywordflow">case</span> DisplayRace::Undead:</div>
<div class="line"><span class="lineno"> 2405</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18811 : 18810);</div>
<div class="line"><span class="lineno"> 2406</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2407</span>                                <span class="keywordflow">case</span> DisplayRace::Draenei:</div>
<div class="line"><span class="lineno"> 2408</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18795 : 18794);</div>
<div class="line"><span class="lineno"> 2409</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2410</span>                                <span class="keywordflow">case</span> DisplayRace::Dwarf:</div>
<div class="line"><span class="lineno"> 2411</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18797 : 18796);</div>
<div class="line"><span class="lineno"> 2412</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2413</span>                                <span class="keywordflow">case</span> DisplayRace::Gnome:</div>
<div class="line"><span class="lineno"> 2414</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18799 : 18798);</div>
<div class="line"><span class="lineno"> 2415</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2416</span>                                <span class="keywordflow">case</span> DisplayRace::Human:</div>
<div class="line"><span class="lineno"> 2417</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18801 : 18800);</div>
<div class="line"><span class="lineno"> 2418</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2419</span>                                <span class="keywordflow">case</span> DisplayRace::NightElf:</div>
<div class="line"><span class="lineno"> 2420</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18803 : 18802);</div>
<div class="line"><span class="lineno"> 2421</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2422</span>                                <span class="keywordflow">case</span> DisplayRace::Goblin:</div>
<div class="line"><span class="lineno"> 2423</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19342 : 19339);</div>
<div class="line"><span class="lineno"> 2424</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2425</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2426</span>                            }</div>
<div class="line"><span class="lineno"> 2427</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2428</span>                        }</div>
<div class="line"><span class="lineno"> 2429</span>                    <span class="comment">// Gossip NPC Appearance - Default</span></div>
<div class="line"><span class="lineno"> 2430</span>                    <span class="keywordflow">case</span> 65523:</div>
<div class="line"><span class="lineno"> 2431</span>                        {</div>
<div class="line"><span class="lineno"> 2432</span>                            <span class="keywordflow">switch</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a90819519d80b0472f6a812afe1a763b8">GetDisplayRace</a>())</div>
<div class="line"><span class="lineno"> 2433</span>                            {</div>
<div class="line"><span class="lineno"> 2434</span>                                <span class="keywordflow">case</span> DisplayRace::BloodElf:</div>
<div class="line"><span class="lineno"> 2435</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19170 : 19169);</div>
<div class="line"><span class="lineno"> 2436</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2437</span>                                <span class="keywordflow">case</span> DisplayRace::Orc:</div>
<div class="line"><span class="lineno"> 2438</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19182 : 19181);</div>
<div class="line"><span class="lineno"> 2439</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2440</span>                                <span class="keywordflow">case</span> DisplayRace::Troll:</div>
<div class="line"><span class="lineno"> 2441</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19186 : 19185);</div>
<div class="line"><span class="lineno"> 2442</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2443</span>                                <span class="keywordflow">case</span> DisplayRace::Tauren:</div>
<div class="line"><span class="lineno"> 2444</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19184 : 19183);</div>
<div class="line"><span class="lineno"> 2445</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2446</span>                                <span class="keywordflow">case</span> DisplayRace::Undead:</div>
<div class="line"><span class="lineno"> 2447</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19188 : 19187);</div>
<div class="line"><span class="lineno"> 2448</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2449</span>                                <span class="keywordflow">case</span> DisplayRace::Draenei:</div>
<div class="line"><span class="lineno"> 2450</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19172 : 19171);</div>
<div class="line"><span class="lineno"> 2451</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2452</span>                                <span class="keywordflow">case</span> DisplayRace::Dwarf:</div>
<div class="line"><span class="lineno"> 2453</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19174 : 19173);</div>
<div class="line"><span class="lineno"> 2454</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2455</span>                                <span class="keywordflow">case</span> DisplayRace::Gnome:</div>
<div class="line"><span class="lineno"> 2456</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19176 : 19175);</div>
<div class="line"><span class="lineno"> 2457</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2458</span>                                <span class="keywordflow">case</span> DisplayRace::Human:</div>
<div class="line"><span class="lineno"> 2459</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19178 : 19177);</div>
<div class="line"><span class="lineno"> 2460</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2461</span>                                <span class="keywordflow">case</span> DisplayRace::NightElf:</div>
<div class="line"><span class="lineno"> 2462</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19180 : 19179);</div>
<div class="line"><span class="lineno"> 2463</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2464</span>                                <span class="keywordflow">case</span> DisplayRace::Goblin:</div>
<div class="line"><span class="lineno"> 2465</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 19343 : 19340);</div>
<div class="line"><span class="lineno"> 2466</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2467</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2468</span>                            }</div>
<div class="line"><span class="lineno"> 2469</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2470</span>                        }</div>
<div class="line"><span class="lineno"> 2471</span>                    <span class="comment">// Gossip NPC Appearance - Lunar Festival</span></div>
<div class="line"><span class="lineno"> 2472</span>                    <span class="keywordflow">case</span> 65524:</div>
<div class="line"><span class="lineno"> 2473</span>                        {</div>
<div class="line"><span class="lineno"> 2474</span>                            <span class="keywordflow">switch</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a90819519d80b0472f6a812afe1a763b8">GetDisplayRace</a>())</div>
<div class="line"><span class="lineno"> 2475</span>                            {</div>
<div class="line"><span class="lineno"> 2476</span>                                <span class="keywordflow">case</span> DisplayRace::BloodElf:</div>
<div class="line"><span class="lineno"> 2477</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18841 : 18840);</div>
<div class="line"><span class="lineno"> 2478</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2479</span>                                <span class="keywordflow">case</span> DisplayRace::Orc:</div>
<div class="line"><span class="lineno"> 2480</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18870 : 18869);</div>
<div class="line"><span class="lineno"> 2481</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2482</span>                                <span class="keywordflow">case</span> DisplayRace::Troll:</div>
<div class="line"><span class="lineno"> 2483</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18874 : 18873);</div>
<div class="line"><span class="lineno"> 2484</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2485</span>                                <span class="keywordflow">case</span> DisplayRace::Tauren:</div>
<div class="line"><span class="lineno"> 2486</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18872 : 18871);</div>
<div class="line"><span class="lineno"> 2487</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2488</span>                                <span class="keywordflow">case</span> DisplayRace::Undead:</div>
<div class="line"><span class="lineno"> 2489</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18876 : 18875);</div>
<div class="line"><span class="lineno"> 2490</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2491</span>                                <span class="keywordflow">case</span> DisplayRace::Draenei:</div>
<div class="line"><span class="lineno"> 2492</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18843 : 18842);</div>
<div class="line"><span class="lineno"> 2493</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2494</span>                                <span class="keywordflow">case</span> DisplayRace::Dwarf:</div>
<div class="line"><span class="lineno"> 2495</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18845 : 18844);</div>
<div class="line"><span class="lineno"> 2496</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2497</span>                                <span class="keywordflow">case</span> DisplayRace::Gnome:</div>
<div class="line"><span class="lineno"> 2498</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18847 : 18846);</div>
<div class="line"><span class="lineno"> 2499</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2500</span>                                <span class="keywordflow">case</span> DisplayRace::Human:</div>
<div class="line"><span class="lineno"> 2501</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18860 : 18858);</div>
<div class="line"><span class="lineno"> 2502</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2503</span>                                <span class="keywordflow">case</span> DisplayRace::NightElf:</div>
<div class="line"><span class="lineno"> 2504</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 18868 : 18867);</div>
<div class="line"><span class="lineno"> 2505</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2506</span>                                <span class="keywordflow">case</span> DisplayRace::Goblin:</div>
<div class="line"><span class="lineno"> 2507</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21067 : 19341);</div>
<div class="line"><span class="lineno"> 2508</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2509</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2510</span>                            }</div>
<div class="line"><span class="lineno"> 2511</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2512</span>                        }</div>
<div class="line"><span class="lineno"> 2513</span>                    <span class="comment">// Gossip NPC Appearance - Hallow&#39;s End</span></div>
<div class="line"><span class="lineno"> 2514</span>                    <span class="keywordflow">case</span> 65525:</div>
<div class="line"><span class="lineno"> 2515</span>                        {</div>
<div class="line"><span class="lineno"> 2516</span>                            <span class="keywordflow">switch</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a90819519d80b0472f6a812afe1a763b8">GetDisplayRace</a>())</div>
<div class="line"><span class="lineno"> 2517</span>                            {</div>
<div class="line"><span class="lineno"> 2518</span>                                <span class="keywordflow">case</span> DisplayRace::BloodElf:</div>
<div class="line"><span class="lineno"> 2519</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 22361 : 22360);</div>
<div class="line"><span class="lineno"> 2520</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2521</span>                                <span class="keywordflow">case</span> DisplayRace::Orc:</div>
<div class="line"><span class="lineno"> 2522</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 22375 : 22374);</div>
<div class="line"><span class="lineno"> 2523</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2524</span>                                <span class="keywordflow">case</span> DisplayRace::Troll:</div>
<div class="line"><span class="lineno"> 2525</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 22379 : 22378);</div>
<div class="line"><span class="lineno"> 2526</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2527</span>                                <span class="keywordflow">case</span> DisplayRace::Tauren:</div>
<div class="line"><span class="lineno"> 2528</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 22377 : 22376);</div>
<div class="line"><span class="lineno"> 2529</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2530</span>                                <span class="keywordflow">case</span> DisplayRace::Undead:</div>
<div class="line"><span class="lineno"> 2531</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 22381 : 22380);</div>
<div class="line"><span class="lineno"> 2532</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2533</span>                                <span class="keywordflow">case</span> DisplayRace::Draenei:</div>
<div class="line"><span class="lineno"> 2534</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 22363 : 22362);</div>
<div class="line"><span class="lineno"> 2535</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2536</span>                                <span class="keywordflow">case</span> DisplayRace::Dwarf:</div>
<div class="line"><span class="lineno"> 2537</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 22365 : 22364);</div>
<div class="line"><span class="lineno"> 2538</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2539</span>                                <span class="keywordflow">case</span> DisplayRace::Gnome:</div>
<div class="line"><span class="lineno"> 2540</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 22367 : 22366);</div>
<div class="line"><span class="lineno"> 2541</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2542</span>                                <span class="keywordflow">case</span> DisplayRace::Human:</div>
<div class="line"><span class="lineno"> 2543</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 22371 : 22370);</div>
<div class="line"><span class="lineno"> 2544</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2545</span>                                <span class="keywordflow">case</span> DisplayRace::NightElf:</div>
<div class="line"><span class="lineno"> 2546</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 22373 : 22372);</div>
<div class="line"><span class="lineno"> 2547</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2548</span>                                <span class="keywordflow">case</span> DisplayRace::Goblin:</div>
<div class="line"><span class="lineno"> 2549</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 22369 : 22368);</div>
<div class="line"><span class="lineno"> 2550</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2551</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2552</span>                            }</div>
<div class="line"><span class="lineno"> 2553</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2554</span>                        }</div>
<div class="line"><span class="lineno"> 2555</span>                    <span class="comment">// Gossip NPC Appearance - Midsummer</span></div>
<div class="line"><span class="lineno"> 2556</span>                    <span class="keywordflow">case</span> 65526:</div>
<div class="line"><span class="lineno"> 2557</span>                        {</div>
<div class="line"><span class="lineno"> 2558</span>                            <span class="keywordflow">switch</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a90819519d80b0472f6a812afe1a763b8">GetDisplayRace</a>())</div>
<div class="line"><span class="lineno"> 2559</span>                            {</div>
<div class="line"><span class="lineno"> 2560</span>                                <span class="keywordflow">case</span> DisplayRace::BloodElf:</div>
<div class="line"><span class="lineno"> 2561</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21086 : 21085);</div>
<div class="line"><span class="lineno"> 2562</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2563</span>                                <span class="keywordflow">case</span> DisplayRace::Orc:</div>
<div class="line"><span class="lineno"> 2564</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 16438 : 16436);</div>
<div class="line"><span class="lineno"> 2565</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2566</span>                                <span class="keywordflow">case</span> DisplayRace::Troll:</div>
<div class="line"><span class="lineno"> 2567</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 16446 : 16445);</div>
<div class="line"><span class="lineno"> 2568</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2569</span>                                <span class="keywordflow">case</span> DisplayRace::Tauren:</div>
<div class="line"><span class="lineno"> 2570</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 16432 : 16442);</div>
<div class="line"><span class="lineno"> 2571</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2572</span>                                <span class="keywordflow">case</span> DisplayRace::Undead:</div>
<div class="line"><span class="lineno"> 2573</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 16444 : 16443);</div>
<div class="line"><span class="lineno"> 2574</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2575</span>                                <span class="keywordflow">case</span> DisplayRace::Draenei:</div>
<div class="line"><span class="lineno"> 2576</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 21083 : 21084);</div>
<div class="line"><span class="lineno"> 2577</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2578</span>                                <span class="keywordflow">case</span> DisplayRace::Dwarf:</div>
<div class="line"><span class="lineno"> 2579</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 16413 : 16434);</div>
<div class="line"><span class="lineno"> 2580</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2581</span>                                <span class="keywordflow">case</span> DisplayRace::Gnome:</div>
<div class="line"><span class="lineno"> 2582</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 16448 : 16447);</div>
<div class="line"><span class="lineno"> 2583</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2584</span>                                <span class="keywordflow">case</span> DisplayRace::Human:</div>
<div class="line"><span class="lineno"> 2585</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 16433 : 16412);</div>
<div class="line"><span class="lineno"> 2586</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2587</span>                                <span class="keywordflow">case</span> DisplayRace::NightElf:</div>
<div class="line"><span class="lineno"> 2588</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 16435 : 16414);</div>
<div class="line"><span class="lineno"> 2589</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2590</span>                                <span class="keywordflow">case</span> DisplayRace::Goblin:</div>
<div class="line"><span class="lineno"> 2591</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 29243 : 16431);</div>
<div class="line"><span class="lineno"> 2592</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2593</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2594</span>                            }</div>
<div class="line"><span class="lineno"> 2595</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2596</span>                        }</div>
<div class="line"><span class="lineno"> 2597</span>                    <span class="comment">// Gossip NPC Appearance - Spirit of Competition</span></div>
<div class="line"><span class="lineno"> 2598</span>                    <span class="keywordflow">case</span> 65527:</div>
<div class="line"><span class="lineno"> 2599</span>                        {</div>
<div class="line"><span class="lineno"> 2600</span>                            <span class="keywordflow">switch</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a90819519d80b0472f6a812afe1a763b8">GetDisplayRace</a>())</div>
<div class="line"><span class="lineno"> 2601</span>                            {</div>
<div class="line"><span class="lineno"> 2602</span>                                <span class="keywordflow">case</span> DisplayRace::BloodElf:</div>
<div class="line"><span class="lineno"> 2603</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 24508 : 24519);</div>
<div class="line"><span class="lineno"> 2604</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2605</span>                                <span class="keywordflow">case</span> DisplayRace::Orc:</div>
<div class="line"><span class="lineno"> 2606</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 24515 : 24526);</div>
<div class="line"><span class="lineno"> 2607</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2608</span>                                <span class="keywordflow">case</span> DisplayRace::Troll:</div>
<div class="line"><span class="lineno"> 2609</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 24517 : 24528);</div>
<div class="line"><span class="lineno"> 2610</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2611</span>                                <span class="keywordflow">case</span> DisplayRace::Tauren:</div>
<div class="line"><span class="lineno"> 2612</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 24516 : 24527);</div>
<div class="line"><span class="lineno"> 2613</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2614</span>                                <span class="keywordflow">case</span> DisplayRace::Undead:</div>
<div class="line"><span class="lineno"> 2615</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 24518 : 24529);</div>
<div class="line"><span class="lineno"> 2616</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2617</span>                                <span class="keywordflow">case</span> DisplayRace::Draenei:</div>
<div class="line"><span class="lineno"> 2618</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 24509 : 24520);</div>
<div class="line"><span class="lineno"> 2619</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2620</span>                                <span class="keywordflow">case</span> DisplayRace::Dwarf:</div>
<div class="line"><span class="lineno"> 2621</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 24510 : 24521);</div>
<div class="line"><span class="lineno"> 2622</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2623</span>                                <span class="keywordflow">case</span> DisplayRace::Gnome:</div>
<div class="line"><span class="lineno"> 2624</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 24511 : 24522);</div>
<div class="line"><span class="lineno"> 2625</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2626</span>                                <span class="keywordflow">case</span> DisplayRace::Human:</div>
<div class="line"><span class="lineno"> 2627</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 24513 : 24524);</div>
<div class="line"><span class="lineno"> 2628</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2629</span>                                <span class="keywordflow">case</span> DisplayRace::NightElf:</div>
<div class="line"><span class="lineno"> 2630</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 24514 : 24525);</div>
<div class="line"><span class="lineno"> 2631</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2632</span>                                <span class="keywordflow">case</span> DisplayRace::Goblin:</div>
<div class="line"><span class="lineno"> 2633</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 24512 : 24523);</div>
<div class="line"><span class="lineno"> 2634</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2635</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2636</span>                            }</div>
<div class="line"><span class="lineno"> 2637</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2638</span>                        }</div>
<div class="line"><span class="lineno"> 2639</span>                    <span class="comment">// Gossip NPC Appearance - Pirates&#39; Day</span></div>
<div class="line"><span class="lineno"> 2640</span>                    <span class="keywordflow">case</span> 65528:</div>
<div class="line"><span class="lineno"> 2641</span>                        {</div>
<div class="line"><span class="lineno"> 2642</span>                            <span class="keywordflow">switch</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a90819519d80b0472f6a812afe1a763b8">GetDisplayRace</a>())</div>
<div class="line"><span class="lineno"> 2643</span>                            {</div>
<div class="line"><span class="lineno"> 2644</span>                                <span class="keywordflow">case</span> DisplayRace::BloodElf:</div>
<div class="line"><span class="lineno"> 2645</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25032 : 25043);</div>
<div class="line"><span class="lineno"> 2646</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2647</span>                                <span class="keywordflow">case</span> DisplayRace::Orc:</div>
<div class="line"><span class="lineno"> 2648</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25039 : 25050);</div>
<div class="line"><span class="lineno"> 2649</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2650</span>                                <span class="keywordflow">case</span> DisplayRace::Troll:</div>
<div class="line"><span class="lineno"> 2651</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25041 : 25052);</div>
<div class="line"><span class="lineno"> 2652</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2653</span>                                <span class="keywordflow">case</span> DisplayRace::Tauren:</div>
<div class="line"><span class="lineno"> 2654</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25040 : 25051);</div>
<div class="line"><span class="lineno"> 2655</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2656</span>                                <span class="keywordflow">case</span> DisplayRace::Undead:</div>
<div class="line"><span class="lineno"> 2657</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25042 : 25053);</div>
<div class="line"><span class="lineno"> 2658</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2659</span>                                <span class="keywordflow">case</span> DisplayRace::Draenei:</div>
<div class="line"><span class="lineno"> 2660</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25033 : 25044);</div>
<div class="line"><span class="lineno"> 2661</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2662</span>                                <span class="keywordflow">case</span> DisplayRace::Dwarf:</div>
<div class="line"><span class="lineno"> 2663</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25034 : 25045);</div>
<div class="line"><span class="lineno"> 2664</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2665</span>                                <span class="keywordflow">case</span> DisplayRace::Gnome:</div>
<div class="line"><span class="lineno"> 2666</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25035 : 25046);</div>
<div class="line"><span class="lineno"> 2667</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2668</span>                                <span class="keywordflow">case</span> DisplayRace::Human:</div>
<div class="line"><span class="lineno"> 2669</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25037 : 25048);</div>
<div class="line"><span class="lineno"> 2670</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2671</span>                                <span class="keywordflow">case</span> DisplayRace::NightElf:</div>
<div class="line"><span class="lineno"> 2672</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25038 : 25049);</div>
<div class="line"><span class="lineno"> 2673</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2674</span>                                <span class="keywordflow">case</span> DisplayRace::Goblin:</div>
<div class="line"><span class="lineno"> 2675</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 25036 : 25047);</div>
<div class="line"><span class="lineno"> 2676</span>                                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2677</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2678</span>                            }</div>
<div class="line"><span class="lineno"> 2679</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2680</span>                        }</div>
<div class="line"><span class="lineno"> 2681</span>                    <span class="comment">// Gossip NPC Appearance - Day of the Dead(DotD)</span></div>
<div class="line"><span class="lineno"> 2682</span>                    <span class="keywordflow">case</span> 65529:</div>
<div class="line"><span class="lineno"> 2683</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 29203 : 29204);</div>
<div class="line"><span class="lineno"> 2684</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2685</span>                    <span class="comment">// Darkspear Pride</span></div>
<div class="line"><span class="lineno"> 2686</span>                    <span class="keywordflow">case</span> 75532:</div>
<div class="line"><span class="lineno"> 2687</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 31737 : 31738);</div>
<div class="line"><span class="lineno"> 2688</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2689</span>                    <span class="comment">// Gnomeregan Pride</span></div>
<div class="line"><span class="lineno"> 2690</span>                    <span class="keywordflow">case</span> 75531:</div>
<div class="line"><span class="lineno"> 2691</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0d13935c40d0392f7f7b5a34540461b2">getGender</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a3667e3c5ec056737c8789615a989324fa8f9913149a2518b5548e5125495a01c3">GENDER_MALE</a> ? 31654 : 31655);</div>
<div class="line"><span class="lineno"> 2692</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2693</span>                    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 2694</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2695</span>                }</div>
<div class="line"><span class="lineno"> 2696</span>            }</div>
<div class="line"><span class="lineno"> 2697</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2698</span>            {</div>
<div class="line"><span class="lineno"> 2699</span>                <a class="code hl_struct" href="../../d3/d43/a07798.html">CreatureTemplate</a> <span class="keyword">const</span>* ci = <a class="code hl_define" href="../../d0/d45/a02843.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureTemplate(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 2700</span>                <span class="keywordflow">if</span> (!ci)</div>
<div class="line"><span class="lineno"> 2701</span>                {</div>
<div class="line"><span class="lineno"> 2702</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(16358);              <span class="comment">// pig pink ^_^</span></div>
<div class="line"><span class="lineno"> 2703</span>                    <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;Auras: unknown creature id = {} (only need its modelid) From Spell Aura Transform in Spell ID = {}&quot;</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 2704</span>                }</div>
<div class="line"><span class="lineno"> 2705</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2706</span>                {</div>
<div class="line"><span class="lineno"> 2707</span>                    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> model_id = 0;</div>
<div class="line"><span class="lineno"> 2708</span> </div>
<div class="line"><span class="lineno"> 2709</span>                    <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> modelid = <a class="code hl_function" href="../../d0/dd0/a08810.html#a891716d1527f5e7aa64f8566672173e4">ObjectMgr::ChooseDisplayId</a>(ci)-&gt;CreatureDisplayID)</div>
<div class="line"><span class="lineno"> 2710</span>                        model_id = modelid;                     <span class="comment">// Will use the default model here</span></div>
<div class="line"><span class="lineno"> 2711</span> </div>
<div class="line"><span class="lineno"> 2712</span>                    <span class="comment">// Polymorph (sheep)</span></div>
<div class="line"><span class="lineno"> 2713</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyName == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0e4b88db8be01ea5d62cc08d07b28aae">SPELLFAMILY_MAGE</a> &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellIconID == 82 &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellVisual[0] == 12978)</div>
<div class="line"><span class="lineno"> 2714</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>())</div>
<div class="line"><span class="lineno"> 2715</span>                            <span class="keywordflow">if</span> (caster-&gt;HasAura(52648))         <span class="comment">// Glyph of the Penguin</span></div>
<div class="line"><span class="lineno"> 2716</span>                                model_id = 26452;</div>
<div class="line"><span class="lineno"> 2717</span> </div>
<div class="line"><span class="lineno"> 2718</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a45cc249e2d3dc3f60bd61b143c8a8a7d">SetDisplayId</a>(model_id);</div>
<div class="line"><span class="lineno"> 2719</span> </div>
<div class="line"><span class="lineno"> 2720</span>                    <span class="comment">// Dragonmaw Illusion (set mount model also)</span></div>
<div class="line"><span class="lineno"> 2721</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 42016 &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#abefb328ba7a52fc7c5a16c60855b4d6a">GetMountID</a>() &amp;&amp; !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aee4933438da47b18e67ffeb26e91f20b">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>).empty())</div>
<div class="line"><span class="lineno"> 2722</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac2bd94b573bcf5e80cba886a8e2f540f">SetUInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031">UNIT_FIELD_MOUNTDISPLAYID</a>, 16314);</div>
<div class="line"><span class="lineno"> 2723</span>                }</div>
<div class="line"><span class="lineno"> 2724</span>            }</div>
<div class="line"><span class="lineno"> 2725</span>        }</div>
<div class="line"><span class="lineno"> 2726</span> </div>
<div class="line"><span class="lineno"> 2727</span>        <span class="comment">// update active transform spell only when transform or shapeshift not set or not overwriting negative by positive case</span></div>
<div class="line"><span class="lineno"> 2728</span>        <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* transformSpellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad0d777d08ff539fa2e7be49e948025da">getTransForm</a>());</div>
<div class="line"><span class="lineno"> 2729</span>        <span class="keywordflow">if</span> (!transformSpellInfo || <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada6a12b14654225a9ccea65799ce6fc780">SPELL_ATTR0_NO_IMMUNITIES</a>) || !<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;IsPositive() || transformSpellInfo-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#adef74790281b92d72ac2c2118a665096">IsPositive</a>())</div>
<div class="line"><span class="lineno"> 2730</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa49c923da2e4cbd86e2215c75a4acda1">setTransForm</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 2731</span> </div>
<div class="line"><span class="lineno"> 2732</span>        <span class="comment">// polymorph case</span></div>
<div class="line"><span class="lineno"> 2733</span>        <span class="keywordflow">if</span> ((mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>) &amp;&amp; target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a356d82b82f6fbae78cb55ecb7bb67c0e">IsPolymorphed</a>())</div>
<div class="line"><span class="lineno"> 2734</span>        {</div>
<div class="line"><span class="lineno"> 2735</span>            <span class="comment">// for players, start regeneration after 1s (in polymorph fast regeneration case)</span></div>
<div class="line"><span class="lineno"> 2736</span>            <span class="comment">// only if caster is Player (after patch 2.4.2)</span></div>
<div class="line"><span class="lineno"> 2737</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().IsPlayer())</div>
<div class="line"><span class="lineno"> 2738</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a54629b2ae206dce339b04d334b2c9ae2">setRegenTimerCount</a>(1 * <a class="code hl_variable" href="../../d4/d51/a00017.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a>);</div>
<div class="line"><span class="lineno"> 2739</span> </div>
<div class="line"><span class="lineno"> 2740</span>            <span class="comment">//dismount polymorphed target (after patch 2.4.2)</span></div>
<div class="line"><span class="lineno"> 2741</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa8ff700c8aec70f3ab1e1385262959b1">IsMounted</a>())</div>
<div class="line"><span class="lineno"> 2742</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>);</div>
<div class="line"><span class="lineno"> 2743</span>        }</div>
<div class="line"><span class="lineno"> 2744</span>    }</div>
<div class="line"><span class="lineno"> 2745</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2746</span>    {</div>
<div class="line"><span class="lineno"> 2747</span>        <span class="comment">// HandleEffect(this, AURA_EFFECT_HANDLE_SEND_FOR_CLIENT, true) will reapply it if need</span></div>
<div class="line"><span class="lineno"> 2748</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad0d777d08ff539fa2e7be49e948025da">getTransForm</a>() == <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno"> 2749</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa49c923da2e4cbd86e2215c75a4acda1">setTransForm</a>(0);</div>
<div class="line"><span class="lineno"> 2750</span> </div>
<div class="line"><span class="lineno"> 2751</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#acb800095887418d08fdfa8ade11f0074">RestoreDisplayId</a>();</div>
<div class="line"><span class="lineno"> 2752</span> </div>
<div class="line"><span class="lineno"> 2753</span>        <span class="comment">// Dragonmaw Illusion (restore mount model)</span></div>
<div class="line"><span class="lineno"> 2754</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 42016 &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#abefb328ba7a52fc7c5a16c60855b4d6a">GetMountID</a>() == 16314)</div>
<div class="line"><span class="lineno"> 2755</span>        {</div>
<div class="line"><span class="lineno"> 2756</span>            <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>).empty())</div>
<div class="line"><span class="lineno"> 2757</span>            {</div>
<div class="line"><span class="lineno"> 2758</span>                <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> cr_id = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a8cec8a45f78b8555b8f13b8b00995acf">SPELL_AURA_MOUNTED</a>).front()-&gt;GetMiscValue();</div>
<div class="line"><span class="lineno"> 2759</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../d3/d43/a07798.html">CreatureTemplate</a> <span class="keyword">const</span>* ci = <a class="code hl_define" href="../../d0/d45/a02843.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureTemplate(cr_id))</div>
<div class="line"><span class="lineno"> 2760</span>                {</div>
<div class="line"><span class="lineno"> 2761</span>                    <a class="code hl_struct" href="../../d0/d6e/a07794.html">CreatureModel</a> model = *<a class="code hl_function" href="../../d0/dd0/a08810.html#a891716d1527f5e7aa64f8566672173e4">ObjectMgr::ChooseDisplayId</a>(ci);</div>
<div class="line"><span class="lineno"> 2762</span>                    <a class="code hl_define" href="../../d0/d45/a02843.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureModelRandomGender(&amp;model, ci);</div>
<div class="line"><span class="lineno"> 2763</span> </div>
<div class="line"><span class="lineno"> 2764</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac2bd94b573bcf5e80cba886a8e2f540f">SetUInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6d4a274cf53b00cfcea24a3479588031">UNIT_FIELD_MOUNTDISPLAYID</a>, model.<a class="code hl_variable" href="../../d0/d6e/a07794.html#a0f48fde2c8438ecf411d7f80d3bca1a9">CreatureDisplayID</a>);</div>
<div class="line"><span class="lineno"> 2765</span>                }</div>
<div class="line"><span class="lineno"> 2766</span>            }</div>
<div class="line"><span class="lineno"> 2767</span>        }</div>
<div class="line"><span class="lineno"> 2768</span>    }</div>
<div class="line"><span class="lineno"> 2769</span>}</div>
<div class="ttc" id="aa02771_html_abece64758d84aa91fa2b6bb82123cc80a101b985cb59bea5d2463ab04e339feaa"><div class="ttname"><a href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a101b985cb59bea5d2463ab04e339feaa">RACE_TROLL</a></div><div class="ttdeci">@ RACE_TROLL</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:78</div></div>
<div class="ttc" id="aa02771_html_abece64758d84aa91fa2b6bb82123cc80a2b9d8ca3a451a2bd60b29614cbc6b167"><div class="ttname"><a href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a2b9d8ca3a451a2bd60b29614cbc6b167">RACE_UNDEAD_PLAYER</a></div><div class="ttdeci">@ RACE_UNDEAD_PLAYER</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:75</div></div>
<div class="ttc" id="aa02771_html_abece64758d84aa91fa2b6bb82123cc80a446767743ece0d95b9bbe498ef1476b5"><div class="ttname"><a href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a446767743ece0d95b9bbe498ef1476b5">RACE_ORC</a></div><div class="ttdeci">@ RACE_ORC</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:72</div></div>
<div class="ttc" id="aa02771_html_abece64758d84aa91fa2b6bb82123cc80a612f7cbe8f6ee425f6de12163d36f08d"><div class="ttname"><a href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a612f7cbe8f6ee425f6de12163d36f08d">RACE_DRAENEI</a></div><div class="ttdeci">@ RACE_DRAENEI</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:81</div></div>
<div class="ttc" id="aa02771_html_abece64758d84aa91fa2b6bb82123cc80a9ef7a57e61b0f05d7d1e50b0de89820c"><div class="ttname"><a href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80a9ef7a57e61b0f05d7d1e50b0de89820c">RACE_NIGHTELF</a></div><div class="ttdeci">@ RACE_NIGHTELF</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:74</div></div>
<div class="ttc" id="aa02771_html_abece64758d84aa91fa2b6bb82123cc80aa1357e803e964cc4737c2820e4ed1c7b"><div class="ttname"><a href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80aa1357e803e964cc4737c2820e4ed1c7b">RACE_BLOODELF</a></div><div class="ttdeci">@ RACE_BLOODELF</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:80</div></div>
<div class="ttc" id="aa02771_html_abece64758d84aa91fa2b6bb82123cc80aa205d146ad42dcf361e62da3e2b2afec"><div class="ttname"><a href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80aa205d146ad42dcf361e62da3e2b2afec">RACE_DWARF</a></div><div class="ttdeci">@ RACE_DWARF</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:73</div></div>
<div class="ttc" id="aa02771_html_abece64758d84aa91fa2b6bb82123cc80aa8a1dc88cc120a9a5b25d1f651d08538"><div class="ttname"><a href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80aa8a1dc88cc120a9a5b25d1f651d08538">RACE_GNOME</a></div><div class="ttdeci">@ RACE_GNOME</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:77</div></div>
<div class="ttc" id="aa02771_html_abece64758d84aa91fa2b6bb82123cc80ab70d874fe662deadb3bc53be59d896e7"><div class="ttname"><a href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80ab70d874fe662deadb3bc53be59d896e7">RACE_HUMAN</a></div><div class="ttdeci">@ RACE_HUMAN</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:71</div></div>
<div class="ttc" id="aa02771_html_abece64758d84aa91fa2b6bb82123cc80af53d3825f30ea6b3545ddc8f8d5e6938"><div class="ttname"><a href="../../d0/dbd/a02771.html#abece64758d84aa91fa2b6bb82123cc80af53d3825f30ea6b3545ddc8f8d5e6938">RACE_TAUREN</a></div><div class="ttdeci">@ RACE_TAUREN</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:76</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a89f1b8c28d6c8813b9ece7c17144995c"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a89f1b8c28d6c8813b9ece7c17144995c">UNIT_VIRTUAL_ITEM_SLOT_ID</a></div><div class="ttdeci">@ UNIT_VIRTUAL_ITEM_SLOT_ID</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:116</div></div>
<div class="ttc" id="aa08386_html_a54629b2ae206dce339b04d334b2c9ae2"><div class="ttname"><a href="../../d0/dc6/a08386.html#a54629b2ae206dce339b04d334b2c9ae2">Player::setRegenTimerCount</a></div><div class="ttdeci">void setRegenTimerCount(uint32 time)</div><div class="ttdef"><b>Definition:</b> Player.h:1596</div></div>
<div class="ttc" id="aa08518_html_a60368071d6d8e6a23977ea4b44249de1"><div class="ttname"><a href="../../db/df9/a08518.html#a60368071d6d8e6a23977ea4b44249de1">Unit::getRace</a></div><div class="ttdeci">uint8 getRace(bool original=false) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:21002</div></div>
<div class="ttc" id="aa08518_html_a90819519d80b0472f6a812afe1a763b8"><div class="ttname"><a href="../../db/df9/a08518.html#a90819519d80b0472f6a812afe1a763b8">Unit::GetDisplayRace</a></div><div class="ttdeci">DisplayRace GetDisplayRace() const</div><div class="ttdef"><b>Definition:</b> Unit.h:797</div></div>
<div class="ttc" id="aa08518_html_aa49c923da2e4cbd86e2215c75a4acda1"><div class="ttname"><a href="../../db/df9/a08518.html#aa49c923da2e4cbd86e2215c75a4acda1">Unit::setTransForm</a></div><div class="ttdeci">void setTransForm(uint32 spellid)</div><div class="ttdef"><b>Definition:</b> Unit.h:1784</div></div>
<div class="ttc" id="aa08518_html_aa8ff700c8aec70f3ab1e1385262959b1"><div class="ttname"><a href="../../db/df9/a08518.html#aa8ff700c8aec70f3ab1e1385262959b1">Unit::IsMounted</a></div><div class="ttdeci">bool IsMounted() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1702</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l01647">ObjectMgr::ChooseDisplayId()</a>, <a class="el" href="../../#l00179">CreatureModel::CreatureDisplayID</a>, <a class="el" href="../../#l00061">GENDER_MALE</a>, <a class="el" href="../../#l01349">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00797">Unit::GetDisplayRace()</a>, <a class="el" href="../../#l00805">Unit::getGender()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l19196">Unit::GetModelForForm()</a>, <a class="el" href="../../#l01703">Unit::GetMountID()</a>, <a class="el" href="../../#l21002">Unit::getRace()</a>, <a class="el" href="../../#l01771">Unit::GetShapeshiftForm()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01785">Unit::getTransForm()</a>, <a class="el" href="../../#l00053">IN_MILLISECONDS</a>, <a class="el" href="../../#l01702">Unit::IsMounted()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l16737">Unit::IsPolymorphed()</a>, <a class="el" href="../../#l01237">SpellInfo::IsPositive()</a>, <a class="el" href="../../#l00157">LOG_ERROR</a>, <a class="el" href="../../#l00080">RACE_BLOODELF</a>, <a class="el" href="../../#l00081">RACE_DRAENEI</a>, <a class="el" href="../../#l00073">RACE_DWARF</a>, <a class="el" href="../../#l00077">RACE_GNOME</a>, <a class="el" href="../../#l00071">RACE_HUMAN</a>, <a class="el" href="../../#l00074">RACE_NIGHTELF</a>, <a class="el" href="../../#l00072">RACE_ORC</a>, <a class="el" href="../../#l00076">RACE_TAUREN</a>, <a class="el" href="../../#l00078">RACE_TROLL</a>, <a class="el" href="../../#l00075">RACE_UNDEAD_PLAYER</a>, <a class="el" href="../../#l05110">Unit::RemoveAurasByType()</a>, <a class="el" href="../../#l16771">Unit::RestoreDisplayId()</a>, <a class="el" href="../../#l16758">Unit::SetDisplayId()</a>, <a class="el" href="../../#l01596">Player::setRegenTimerCount()</a>, <a class="el" href="../../#l01784">Unit::setTransForm()</a>, <a class="el" href="../../#l21312">Unit::SetUInt32Value()</a>, <a class="el" href="../../#l01634">sObjectMgr</a>, <a class="el" href="../../#l00411">SPELL_ATTR0_NO_IMMUNITIES</a>, <a class="el" href="../../#l00270">SPELL_AURA_MOD_INCREASE_MOUNTED_FLIGHT_SPEED</a>, <a class="el" href="../../#l00141">SPELL_AURA_MOUNTED</a>, <a class="el" href="../../#l03531">SPELLFAMILY_MAGE</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, <a class="el" href="../../#l00202">Object::ToCreature()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00126">UNIT_FIELD_MOUNTDISPLAYID</a>, <a class="el" href="../../#l00116">UNIT_VIRTUAL_ITEM_SLOT_ID</a>, and <a class="el" href="../../#l00044">urand()</a>.</p>

</div>
</div>
<a id="add3e6484132f5de2d6bfe76c0f2b21ae" name="add3e6484132f5de2d6bfe76c0f2b21ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add3e6484132f5de2d6bfe76c0f2b21ae">&#9670;&#160;</a></span>HandleAuraUntrackable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraUntrackable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3181</span>{</div>
<div class="line"><span class="lineno"> 3182</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3183</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3184</span> </div>
<div class="line"><span class="lineno"> 3185</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3186</span> </div>
<div class="line"><span class="lineno"> 3187</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3188</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#afe65b1ab32dbcd51890b754fb8b5e1b0">SetByteFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881ae16e28b92accfc3468e9dd713086e2ac">UNIT_FIELD_BYTES_1</a>, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#aaaff909c1b98b597799809a880a5a442afb9ad4eb10498c4a1e8cad3425d65d0f">UNIT_BYTES_1_OFFSET_VIS_FLAG</a>, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a88cad5664df249863d4ebed6162a2343af148583098f9670660b2d18ed8fa1ccd">UNIT_STAND_FLAGS_UNTRACKABLE</a>);</div>
<div class="line"><span class="lineno"> 3189</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3190</span>    {</div>
<div class="line"><span class="lineno"> 3191</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3192</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><span class="lineno"> 3193</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3194</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#acef75a7f84673fda790861bd1b0b68b7">RemoveByteFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881ae16e28b92accfc3468e9dd713086e2ac">UNIT_FIELD_BYTES_1</a>, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#aaaff909c1b98b597799809a880a5a442afb9ad4eb10498c4a1e8cad3425d65d0f">UNIT_BYTES_1_OFFSET_VIS_FLAG</a>, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a88cad5664df249863d4ebed6162a2343af148583098f9670660b2d18ed8fa1ccd">UNIT_STAND_FLAGS_UNTRACKABLE</a>);</div>
<div class="line"><span class="lineno"> 3195</span>    }</div>
<div class="line"><span class="lineno"> 3196</span>}</div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881ae16e28b92accfc3468e9dd713086e2ac"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881ae16e28b92accfc3468e9dd713086e2ac">UNIT_FIELD_BYTES_1</a></div><div class="ttdeci">@ UNIT_FIELD_BYTES_1</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:131</div></div>
<div class="ttc" id="aa03521_html_a88cad5664df249863d4ebed6162a2343af148583098f9670660b2d18ed8fa1ccd"><div class="ttname"><a href="../../d8/dbe/a03521.html#a88cad5664df249863d4ebed6162a2343af148583098f9670660b2d18ed8fa1ccd">UNIT_STAND_FLAGS_UNTRACKABLE</a></div><div class="ttdeci">@ UNIT_STAND_FLAGS_UNTRACKABLE</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:49</div></div>
<div class="ttc" id="aa03521_html_aaaff909c1b98b597799809a880a5a442afb9ad4eb10498c4a1e8cad3425d65d0f"><div class="ttname"><a href="../../d8/dbe/a03521.html#aaaff909c1b98b597799809a880a5a442afb9ad4eb10498c4a1e8cad3425d65d0f">UNIT_BYTES_1_OFFSET_VIS_FLAG</a></div><div class="ttdeci">@ UNIT_BYTES_1_OFFSET_VIS_FLAG</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:25</div></div>
<div class="ttc" id="aa08142_html_acef75a7f84673fda790861bd1b0b68b7"><div class="ttname"><a href="../../df/d2d/a08142.html#acef75a7f84673fda790861bd1b0b68b7">Object::RemoveByteFlag</a></div><div class="ttdeci">void RemoveByteFlag(uint16 index, uint8 offset, uint8 newFlag)</div><div class="ttdef"><b>Definition:</b> Object.cpp:930</div></div>
<div class="ttc" id="aa08142_html_afe65b1ab32dbcd51890b754fb8b5e1b0"><div class="ttname"><a href="../../df/d2d/a08142.html#afe65b1ab32dbcd51890b754fb8b5e1b0">Object::SetByteFlag</a></div><div class="ttdeci">void SetByteFlag(uint16 index, uint8 offset, uint8 newFlag)</div><div class="ttdef"><b>Definition:</b> Object.cpp:911</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00930">Object::RemoveByteFlag()</a>, <a class="el" href="../../#l00911">Object::SetByteFlag()</a>, <a class="el" href="../../#l00025">UNIT_BYTES_1_OFFSET_VIS_FLAG</a>, <a class="el" href="../../#l00131">UNIT_FIELD_BYTES_1</a>, and <a class="el" href="../../#l00049">UNIT_STAND_FLAGS_UNTRACKABLE</a>.</p>

</div>
</div>
<a id="af5a0845c419937a8d5450876dff3224c" name="af5a0845c419937a8d5450876dff3224c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5a0845c419937a8d5450876dff3224c">&#9670;&#160;</a></span>HandleAuraWaterWalk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleAuraWaterWalk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3326</span>{</div>
<div class="line"><span class="lineno"> 3327</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3328</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3329</span> </div>
<div class="line"><span class="lineno"> 3330</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3331</span> </div>
<div class="line"><span class="lineno"> 3332</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* targetPlayer = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno"> 3333</span>    {</div>
<div class="line"><span class="lineno"> 3334</span>        <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><span class="lineno"> 3335</span>    }</div>
<div class="line"><span class="lineno"> 3336</span> </div>
<div class="line"><span class="lineno"> 3337</span>    <span class="keywordflow">if</span> (!apply)</div>
<div class="line"><span class="lineno"> 3338</span>    {</div>
<div class="line"><span class="lineno"> 3339</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3340</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><span class="lineno"> 3341</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3342</span>    }</div>
<div class="line"><span class="lineno"> 3343</span> </div>
<div class="line"><span class="lineno"> 3344</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#afadef7f8d4b6ebc276131926f194e8d8">SetWaterWalking</a>(apply);</div>
<div class="line"><span class="lineno"> 3345</span>}</div>
<div class="ttc" id="aa08518_html_afadef7f8d4b6ebc276131926f194e8d8"><div class="ttname"><a href="../../db/df9/a08518.html#afadef7f8d4b6ebc276131926f194e8d8">Unit::SetWaterWalking</a></div><div class="ttdeci">virtual bool SetWaterWalking(bool enable, bool packetOnly=false)</div><div class="ttdoc">Allow to walk on water. Doesn't inform the client. Need to use SendMovementWaterWalking() if it's for...</div><div class="ttdef"><b>Definition:</b> Unit.cpp:20625</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l20625">Unit::SetWaterWalking()</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="aeeed00e5103faf76fec0eb8f88b8d071" name="aeeed00e5103faf76fec0eb8f88b8d071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeed00e5103faf76fec0eb8f88b8d071">&#9670;&#160;</a></span>HandleBindSight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleBindSight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5899</span>{</div>
<div class="line"><span class="lineno"> 5900</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 5901</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5902</span> </div>
<div class="line"><span class="lineno"> 5903</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5904</span> </div>
<div class="line"><span class="lineno"> 5905</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 5906</span> </div>
<div class="line"><span class="lineno"> 5907</span>    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5908</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5909</span> </div>
<div class="line"><span class="lineno"> 5910</span>    caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6fc53a958e4d3a3cc454aae855289983">SetViewpoint</a>(target, apply);</div>
<div class="line"><span class="lineno"> 5911</span>}</div>
<div class="ttc" id="aa08386_html_a6fc53a958e4d3a3cc454aae855289983"><div class="ttname"><a href="../../d0/dc6/a08386.html#a6fc53a958e4d3a3cc454aae855289983">Player::SetViewpoint</a></div><div class="ttdeci">void SetViewpoint(WorldObject *target, bool apply)</div><div class="ttdef"><b>Definition:</b> Player.cpp:13179</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l13179">Player::SetViewpoint()</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="ab144ae6a14c8fd95ff6b868b64cd7c12" name="ab144ae6a14c8fd95ff6b868b64cd7c12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab144ae6a14c8fd95ff6b868b64cd7c12">&#9670;&#160;</a></span>HandleChannelDeathItem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleChannelDeathItem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5854</span>{</div>
<div class="line"><span class="lineno"> 5855</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 5856</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5857</span> </div>
<div class="line"><span class="lineno"> 5858</span>    <span class="keywordflow">if</span> (apply || aurApp-&gt;GetRemoveMode() != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea8b8b753a1458a21a162528088acee913">AURA_REMOVE_BY_DEATH</a>)</div>
<div class="line"><span class="lineno"> 5859</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5860</span> </div>
<div class="line"><span class="lineno"> 5861</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 5862</span> </div>
<div class="line"><span class="lineno"> 5863</span>    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5864</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5865</span> </div>
<div class="line"><span class="lineno"> 5866</span>    <a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* plCaster = caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>();</div>
<div class="line"><span class="lineno"> 5867</span> </div>
<div class="line"><span class="lineno"> 5868</span>    <span class="comment">// Item amount</span></div>
<div class="line"><span class="lineno"> 5869</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() &lt;= 0)</div>
<div class="line"><span class="lineno"> 5870</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5871</span> </div>
<div class="line"><span class="lineno"> 5872</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Effects[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].ItemType == 0)</div>
<div class="line"><span class="lineno"> 5873</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5874</span> </div>
<div class="line"><span class="lineno"> 5875</span>    <span class="comment">//Adding items</span></div>
<div class="line"><span class="lineno"> 5876</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> noSpaceForCount = 0;</div>
<div class="line"><span class="lineno"> 5877</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> count = <a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>;</div>
<div class="line"><span class="lineno"> 5878</span> </div>
<div class="line"><span class="lineno"> 5879</span>    <a class="code hl_typedef" href="../../d7/d13/a03365.html#a06f492a0a20f5264c8395684220fec84">ItemPosCountVec</a> dest;</div>
<div class="line"><span class="lineno"> 5880</span>    <a class="code hl_enumeration" href="../../d6/d0e/a03395.html#a240a18445bd2335a1829e130126f20fa">InventoryResult</a> msg = plCaster-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af059a10625d50ca7674771ea1c1c4c4c">CanStoreNewItem</a>(<a class="code hl_enumvalue" href="../../d6/d0e/a03395.html#aadcc1e3338f8cbbe511ad060db42dfb5a843659af0a40139bfa505d7e7982477b">NULL_BAG</a>, <a class="code hl_enumvalue" href="../../d6/d0e/a03395.html#aadcc1e3338f8cbbe511ad060db42dfb5aeb5cbd7990d2f5e679ec4ecc65e83130">NULL_SLOT</a>, dest, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Effects[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].ItemType, count, &amp;noSpaceForCount);</div>
<div class="line"><span class="lineno"> 5881</span>    <span class="keywordflow">if</span> (msg != <a class="code hl_enumvalue" href="../../d6/d0e/a03395.html#a240a18445bd2335a1829e130126f20faa939b6661cd19d6c18274906abb28021c">EQUIP_ERR_OK</a>)</div>
<div class="line"><span class="lineno"> 5882</span>    {</div>
<div class="line"><span class="lineno"> 5883</span>        count -= noSpaceForCount;</div>
<div class="line"><span class="lineno"> 5884</span>        plCaster-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ade216a89981dfce501f02f38cec9ad3f">SendEquipError</a>(msg, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Effects[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].ItemType);</div>
<div class="line"><span class="lineno"> 5885</span>        <span class="keywordflow">if</span> (count == 0)</div>
<div class="line"><span class="lineno"> 5886</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5887</span>    }</div>
<div class="line"><span class="lineno"> 5888</span> </div>
<div class="line"><span class="lineno"> 5889</span>    <a class="code hl_class" href="../../db/d24/a08098.html">Item</a>* newitem = plCaster-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ac996a41fc3f89d8683de8695bb7db13c">StoreNewItem</a>(dest, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Effects[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].ItemType, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 5890</span>    <span class="keywordflow">if</span> (!newitem)</div>
<div class="line"><span class="lineno"> 5891</span>    {</div>
<div class="line"><span class="lineno"> 5892</span>        plCaster-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ade216a89981dfce501f02f38cec9ad3f">SendEquipError</a>(<a class="code hl_enumvalue" href="../../d6/d0e/a03395.html#a240a18445bd2335a1829e130126f20faa8b1b5966ea1ccbf5ee6d1d4a244b272e">EQUIP_ERR_ITEM_NOT_FOUND</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 5893</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5894</span>    }</div>
<div class="line"><span class="lineno"> 5895</span>    plCaster-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a9b1ad78b229913ff669912d2fb80c6e0">SendNewItem</a>(newitem, count, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 5896</span>}</div>
<div class="ttc" id="aa03092_html_a56f7dd5627e22afd9eb73530b767115ea8b8b753a1458a21a162528088acee913"><div class="ttname"><a href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea8b8b753a1458a21a162528088acee913">AURA_REMOVE_BY_DEATH</a></div><div class="ttdeci">@ AURA_REMOVE_BY_DEATH</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:396</div></div>
<div class="ttc" id="aa03365_html_a06f492a0a20f5264c8395684220fec84"><div class="ttname"><a href="../../d7/d13/a03365.html#a06f492a0a20f5264c8395684220fec84">ItemPosCountVec</a></div><div class="ttdeci">std::vector&lt; ItemPosCount &gt; ItemPosCountVec</div><div class="ttdef"><b>Definition:</b> Player.h:771</div></div>
<div class="ttc" id="aa03395_html_a240a18445bd2335a1829e130126f20fa"><div class="ttname"><a href="../../d6/d0e/a03395.html#a240a18445bd2335a1829e130126f20fa">InventoryResult</a></div><div class="ttdeci">InventoryResult</div><div class="ttdef"><b>Definition:</b> Item.h:46</div></div>
<div class="ttc" id="aa03395_html_a240a18445bd2335a1829e130126f20faa8b1b5966ea1ccbf5ee6d1d4a244b272e"><div class="ttname"><a href="../../d6/d0e/a03395.html#a240a18445bd2335a1829e130126f20faa8b1b5966ea1ccbf5ee6d1d4a244b272e">EQUIP_ERR_ITEM_NOT_FOUND</a></div><div class="ttdeci">@ EQUIP_ERR_ITEM_NOT_FOUND</div><div class="ttdef"><b>Definition:</b> Item.h:70</div></div>
<div class="ttc" id="aa03395_html_a240a18445bd2335a1829e130126f20faa939b6661cd19d6c18274906abb28021c"><div class="ttname"><a href="../../d6/d0e/a03395.html#a240a18445bd2335a1829e130126f20faa939b6661cd19d6c18274906abb28021c">EQUIP_ERR_OK</a></div><div class="ttdeci">@ EQUIP_ERR_OK</div><div class="ttdef"><b>Definition:</b> Item.h:47</div></div>
<div class="ttc" id="aa03395_html_aadcc1e3338f8cbbe511ad060db42dfb5a843659af0a40139bfa505d7e7982477b"><div class="ttname"><a href="../../d6/d0e/a03395.html#aadcc1e3338f8cbbe511ad060db42dfb5a843659af0a40139bfa505d7e7982477b">NULL_BAG</a></div><div class="ttdeci">@ NULL_BAG</div><div class="ttdef"><b>Definition:</b> Item.h:40</div></div>
<div class="ttc" id="aa03395_html_aadcc1e3338f8cbbe511ad060db42dfb5aeb5cbd7990d2f5e679ec4ecc65e83130"><div class="ttname"><a href="../../d6/d0e/a03395.html#aadcc1e3338f8cbbe511ad060db42dfb5aeb5cbd7990d2f5e679ec4ecc65e83130">NULL_SLOT</a></div><div class="ttdeci">@ NULL_SLOT</div><div class="ttdef"><b>Definition:</b> Item.h:41</div></div>
<div class="ttc" id="aa08386_html_a9b1ad78b229913ff669912d2fb80c6e0"><div class="ttname"><a href="../../d0/dc6/a08386.html#a9b1ad78b229913ff669912d2fb80c6e0">Player::SendNewItem</a></div><div class="ttdeci">void SendNewItem(Item *item, uint32 count, bool received, bool created, bool broadcast=false, bool sendChatMessage=true)</div><div class="ttdef"><b>Definition:</b> PlayerStorage.cpp:4750</div></div>
<div class="ttc" id="aa08386_html_ac996a41fc3f89d8683de8695bb7db13c"><div class="ttname"><a href="../../d0/dc6/a08386.html#ac996a41fc3f89d8683de8695bb7db13c">Player::StoreNewItem</a></div><div class="ttdeci">Item * StoreNewItem(ItemPosCountVec const &amp;pos, uint32 item, bool update, int32 randomPropertyId=0)</div><div class="ttdef"><b>Definition:</b> PlayerStorage.cpp:2524</div></div>
<div class="ttc" id="aa08386_html_ade216a89981dfce501f02f38cec9ad3f"><div class="ttname"><a href="../../d0/dc6/a08386.html#ade216a89981dfce501f02f38cec9ad3f">Player::SendEquipError</a></div><div class="ttdeci">void SendEquipError(InventoryResult msg, Item *pItem, Item *pItem2=nullptr, uint32 itemid=0)</div><div class="ttdef"><b>Definition:</b> PlayerStorage.cpp:4021</div></div>
<div class="ttc" id="aa08386_html_af059a10625d50ca7674771ea1c1c4c4c"><div class="ttname"><a href="../../d0/dc6/a08386.html#af059a10625d50ca7674771ea1c1c4c4c">Player::CanStoreNewItem</a></div><div class="ttdeci">InventoryResult CanStoreNewItem(uint8 bag, uint8 slot, ItemPosCountVec &amp;dest, uint32 item, uint32 count, uint32 *no_space_count=nullptr) const</div><div class="ttdef"><b>Definition:</b> Player.h:1274</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00396">AURA_REMOVE_BY_DEATH</a>, <a class="el" href="../../#l01274">Player::CanStoreNewItem()</a>, <a class="el" href="../../#l00070">EQUIP_ERR_ITEM_NOT_FOUND</a>, <a class="el" href="../../#l00047">EQUIP_ERR_OK</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l00146">m_effIndex</a>, <a class="el" href="../../#l00040">NULL_BAG</a>, <a class="el" href="../../#l00041">NULL_SLOT</a>, <a class="el" href="../../#l04021">Player::SendEquipError()</a>, <a class="el" href="../../#l04750">Player::SendNewItem()</a>, <a class="el" href="../../#l02524">Player::StoreNewItem()</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a9939adabdadcf853bbabb848afb5e8b4" name="a9939adabdadcf853bbabb848afb5e8b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9939adabdadcf853bbabb848afb5e8b4">&#9670;&#160;</a></span>HandleCharmConvert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleCharmConvert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3631</span>{</div>
<div class="line"><span class="lineno"> 3632</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3633</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3634</span> </div>
<div class="line"><span class="lineno"> 3635</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3636</span> </div>
<div class="line"><span class="lineno"> 3637</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 3638</span> </div>
<div class="line"><span class="lineno"> 3639</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3640</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad02c1207bd4ccb5df03df1d4eec80293">SetCharmedBy</a>(caster, <a class="code hl_enumvalue" href="../../dd/daf/a03503.html#a8a31720d588fad9fce4a74dabc39df8ba3086533ebf4fa00b6546f53176b512db">CHARM_TYPE_CONVERT</a>, aurApp);</div>
<div class="line"><span class="lineno"> 3641</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3642</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa897a679d63c8d6272d4bc85395a708f">RemoveCharmedBy</a>(caster);</div>
<div class="line"><span class="lineno"> 3643</span>}</div>
<div class="ttc" id="aa03503_html_a8a31720d588fad9fce4a74dabc39df8ba3086533ebf4fa00b6546f53176b512db"><div class="ttname"><a href="../../dd/daf/a03503.html#a8a31720d588fad9fce4a74dabc39df8ba3086533ebf4fa00b6546f53176b512db">CHARM_TYPE_CONVERT</a></div><div class="ttdeci">@ CHARM_TYPE_CONVERT</div><div class="ttdef"><b>Definition:</b> CharmInfo.h:48</div></div>
<div class="ttc" id="aa08518_html_aa897a679d63c8d6272d4bc85395a708f"><div class="ttname"><a href="../../db/df9/a08518.html#aa897a679d63c8d6272d4bc85395a708f">Unit::RemoveCharmedBy</a></div><div class="ttdeci">void RemoveCharmedBy(Unit *charmer)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:18548</div></div>
<div class="ttc" id="aa08518_html_ad02c1207bd4ccb5df03df1d4eec80293"><div class="ttname"><a href="../../db/df9/a08518.html#ad02c1207bd4ccb5df03df1d4eec80293">Unit::SetCharmedBy</a></div><div class="ttdeci">bool SetCharmedBy(Unit *charmer, CharmType type, AuraApplication const *aurApp=nullptr)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:18346</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00048">CHARM_TYPE_CONVERT</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l18548">Unit::RemoveCharmedBy()</a>, and <a class="el" href="../../#l18346">Unit::SetCharmedBy()</a>.</p>

</div>
</div>
<a id="a95b987b958ac0ce5653d44029a31ea59" name="a95b987b958ac0ce5653d44029a31ea59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95b987b958ac0ce5653d44029a31ea59">&#9670;&#160;</a></span>HandleComprehendLanguage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleComprehendLanguage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6002</span>{</div>
<div class="line"><span class="lineno"> 6003</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 6004</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6005</span> </div>
<div class="line"><span class="lineno"> 6006</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 6007</span> </div>
<div class="line"><span class="lineno"> 6008</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 6009</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a585c0587bf93911ef964892c82b82172">SetUnitFlag2</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a565914b319bc66d76b91e95970e13acd">UNIT_FLAG2_COMPREHEND_LANG</a>);</div>
<div class="line"><span class="lineno"> 6010</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 6011</span>    {</div>
<div class="line"><span class="lineno"> 6012</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><span class="lineno"> 6013</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6014</span> </div>
<div class="line"><span class="lineno"> 6015</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a999bdc0f7dfd67915713460cf0e451bd">RemoveUnitFlag2</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a565914b319bc66d76b91e95970e13acd">UNIT_FLAG2_COMPREHEND_LANG</a>);</div>
<div class="line"><span class="lineno"> 6016</span>    }</div>
<div class="line"><span class="lineno"> 6017</span>}</div>
<div class="ttc" id="aa03521_html_a3320fdc05dc07c396f8943de4018e682a565914b319bc66d76b91e95970e13acd"><div class="ttname"><a href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a565914b319bc66d76b91e95970e13acd">UNIT_FLAG2_COMPREHEND_LANG</a></div><div class="ttdeci">@ UNIT_FLAG2_COMPREHEND_LANG</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:271</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00720">Unit::RemoveUnitFlag2()</a>, <a class="el" href="../../#l00719">Unit::SetUnitFlag2()</a>, and <a class="el" href="../../#l00271">UNIT_FLAG2_COMPREHEND_LANG</a>.</p>

</div>
</div>
<a id="a34bf10f56f62833415339768d825a83f" name="a34bf10f56f62833415339768d825a83f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34bf10f56f62833415339768d825a83f">&#9670;&#160;</a></span>HandleDetectAmore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleDetectAmore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1708</span>{</div>
<div class="line"><span class="lineno"> 1709</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 1710</span>    {</div>
<div class="line"><span class="lineno"> 1711</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1712</span>    }</div>
<div class="line"><span class="lineno"> 1713</span> </div>
<div class="line"><span class="lineno"> 1714</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1715</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 1716</span>    {</div>
<div class="line"><span class="lineno"> 1717</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1718</span>    }</div>
<div class="line"><span class="lineno"> 1719</span> </div>
<div class="line"><span class="lineno"> 1720</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1721</span>    {</div>
<div class="line"><span class="lineno"> 1722</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#afe65b1ab32dbcd51890b754fb8b5e1b0">SetByteFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, 3, 1 &lt;&lt; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><span class="lineno"> 1723</span>    }</div>
<div class="line"><span class="lineno"> 1724</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1725</span>    {</div>
<div class="line"><span class="lineno"> 1726</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a832ce5d9dd4224e90b25c6aacef11e20">SPELL_AURA_DETECT_AMORE</a>))</div>
<div class="line"><span class="lineno"> 1727</span>        {</div>
<div class="line"><span class="lineno"> 1728</span>            <a class="code hl_typedef" href="../../db/df9/a08518.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; amoreAuras = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a832ce5d9dd4224e90b25c6aacef11e20">SPELL_AURA_DETECT_AMORE</a>);</div>
<div class="line"><span class="lineno"> 1729</span>            <span class="keywordflow">for</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a> <span class="keyword">const</span>* aurEff : amoreAuras)</div>
<div class="line"><span class="lineno"> 1730</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == aurEff-&gt;GetMiscValue())</div>
<div class="line"><span class="lineno"> 1731</span>                {</div>
<div class="line"><span class="lineno"> 1732</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1733</span>                }</div>
<div class="line"><span class="lineno"> 1734</span>        }</div>
<div class="line"><span class="lineno"> 1735</span> </div>
<div class="line"><span class="lineno"> 1736</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#acef75a7f84673fda790861bd1b0b68b7">RemoveByteFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, 3, 1 &lt;&lt; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1));</div>
<div class="line"><span class="lineno"> 1737</span>    }</div>
<div class="line"><span class="lineno"> 1738</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a832ce5d9dd4224e90b25c6aacef11e20"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a832ce5d9dd4224e90b25c6aacef11e20">SPELL_AURA_DETECT_AMORE</a></div><div class="ttdeci">@ SPELL_AURA_DETECT_AMORE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:233</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l01349">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00378">PLAYER_FIELD_BYTES2</a>, <a class="el" href="../../#l00930">Object::RemoveByteFlag()</a>, <a class="el" href="../../#l00911">Object::SetByteFlag()</a>, and <a class="el" href="../../#l00233">SPELL_AURA_DETECT_AMORE</a>.</p>

</div>
</div>
<a id="a7710e32fe9dc267292c3b15333521560" name="a7710e32fe9dc267292c3b15333521560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7710e32fe9dc267292c3b15333521560">&#9670;&#160;</a></span>HandleEffect() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleEffect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  742</span>{</div>
<div class="line"><span class="lineno">  743</span>    <span class="comment">// check if call is correct, we really don&#39;t want using bitmasks here (with 1 exception)</span></div>
<div class="line"><span class="lineno">  744</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(mode == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a></div>
<div class="line"><span class="lineno">  745</span>           || mode == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288adad3e656000301a0e16b5fa6f5d0fc8f">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT</a></div>
<div class="line"><span class="lineno">  746</span>           || mode == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a></div>
<div class="line"><span class="lineno">  747</span>           || mode == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a></div>
<div class="line"><span class="lineno">  748</span>           || mode == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288aaf4c81ebe8cba51f1c5d7b5001d41600">AURA_EFFECT_HANDLE_SKILL</a></div>
<div class="line"><span class="lineno">  749</span>           || mode == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a></div>
<div class="line"><span class="lineno">  750</span>           || mode == (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a2b4b8f92986980a3905f0c2d299beaae">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9aed024920a7d989c9b024d1c7b00f0b">AURA_EFFECT_HANDLE_REAPPLY</a>));</div>
<div class="line"><span class="lineno">  751</span> </div>
<div class="line"><span class="lineno">  752</span>    <span class="comment">// register/unregister effect in lists in case of real AuraEffect apply/remove</span></div>
<div class="line"><span class="lineno">  753</span>    <span class="comment">// registration/unregistration is done always before real effect handling (some effect handlers code is depending on this)</span></div>
<div class="line"><span class="lineno">  754</span>    <span class="keywordflow">if</span> (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>)</div>
<div class="line"><span class="lineno">  755</span>        aurApp-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a0447441f89446b170d751abbdda541b8">GetTarget</a>()-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac6b29511984119cf4c430697a505cb45">_RegisterAuraEffect</a>(<span class="keyword">this</span>, apply);</div>
<div class="line"><span class="lineno">  756</span> </div>
<div class="line"><span class="lineno">  757</span>    <span class="comment">// xinef: stacking system, force return if effect is disabled, prevents double apply / unapply</span></div>
<div class="line"><span class="lineno">  758</span>    <span class="comment">// xinef: placed here so above line can unregister effect from the list</span></div>
<div class="line"><span class="lineno">  759</span>    <span class="comment">// xinef: this condition works under assumption that effect handlers performs ALL necessery action with CHANGE_AMOUNT mode</span></div>
<div class="line"><span class="lineno">  760</span>    <span class="comment">// xinef: as far as i&#39;ve checked, all grouped spells meet this condition</span></div>
<div class="line"><span class="lineno">  761</span>    <span class="keywordflow">if</span> (!aurApp-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a051b0814a63b9398b523a6bfd23998d2">IsActive</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno">  762</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>    <span class="comment">// real aura apply/remove, handle modifier</span></div>
<div class="line"><span class="lineno">  765</span>    <span class="keywordflow">if</span> (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>)</div>
<div class="line"><span class="lineno">  766</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#a2a7bd5fd001ae6fb2ac680b1d25ef378">ApplySpellMod</a>(aurApp-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a0447441f89446b170d751abbdda541b8">GetTarget</a>(), apply);</div>
<div class="line"><span class="lineno">  767</span> </div>
<div class="line"><span class="lineno">  768</span>    <span class="comment">// call scripts helping/replacing effect handlers</span></div>
<div class="line"><span class="lineno">  769</span>    <span class="keywordtype">bool</span> prevented = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  770</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno">  771</span>        prevented = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a882f4ec3b0f104d3c18c718dc71ec668">CallScriptEffectApplyHandlers</a>(<span class="keyword">this</span>, <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="../../de/d50/a10790.html">AuraApplication</a> const*<span class="keyword">&gt;</span>(aurApp), (<a class="code hl_enumeration" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>)mode);</div>
<div class="line"><span class="lineno">  772</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  773</span>        prevented = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a37a192c8e0119a8bc304c1711b15376e">CallScriptEffectRemoveHandlers</a>(<span class="keyword">this</span>, <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="../../de/d50/a10790.html">AuraApplication</a> const*<span class="keyword">&gt;</span>(aurApp), (<a class="code hl_enumeration" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>)mode);</div>
<div class="line"><span class="lineno">  774</span> </div>
<div class="line"><span class="lineno">  775</span>    <span class="comment">// check if script events have removed the aura or if default effect prevention was requested</span></div>
<div class="line"><span class="lineno">  776</span>    <span class="keywordflow">if</span> ((apply &amp;&amp; aurApp-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#ae6b921446fc7901f8f053e19c3fb3f4c">GetRemoveMode</a>()) || prevented)</div>
<div class="line"><span class="lineno">  777</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  778</span> </div>
<div class="line"><span class="lineno">  779</span>    (*this.*<a class="code hl_variable" href="../../d5/d43/a03101.html#a2817e7c4c5917ae8deba00b38850e8db">AuraEffectHandler</a> [<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()])(aurApp, mode, apply);</div>
<div class="line"><span class="lineno">  780</span> </div>
<div class="line"><span class="lineno">  781</span>    <span class="comment">// check if script events have removed the aura or if default effect prevention was requested</span></div>
<div class="line"><span class="lineno">  782</span>    <span class="keywordflow">if</span> (apply &amp;&amp; aurApp-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#ae6b921446fc7901f8f053e19c3fb3f4c">GetRemoveMode</a>())</div>
<div class="line"><span class="lineno">  783</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>    <span class="comment">// call scripts triggering additional events after apply/remove</span></div>
<div class="line"><span class="lineno">  786</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno">  787</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a76282958056070ecbf58c7a864ea7494">CallScriptAfterEffectApplyHandlers</a>(<span class="keyword">this</span>, aurApp, (<a class="code hl_enumeration" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>)mode);</div>
<div class="line"><span class="lineno">  788</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  789</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a893e1bed86677e695a28d8eb4fab763d">CallScriptAfterEffectRemoveHandlers</a>(<span class="keyword">this</span>, aurApp, (<a class="code hl_enumeration" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a>)mode);</div>
<div class="line"><span class="lineno">  790</span>}</div>
<div class="ttc" id="aa00011_html_af343b20373ba49a92fce523e948f2ab3"><div class="ttname"><a href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a></div><div class="ttdeci">#define ASSERT</div><div class="ttdef"><b>Definition:</b> Errors.h:68</div></div>
<div class="ttc" id="aa03092_html_a82ebee9e3cf7eaf2ab892a6eb7796288"><div class="ttname"><a href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288">AuraEffectHandleModes</a></div><div class="ttdeci">AuraEffectHandleModes</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:40</div></div>
<div class="ttc" id="aa03092_html_a82ebee9e3cf7eaf2ab892a6eb7796288adad3e656000301a0e16b5fa6f5d0fc8f"><div class="ttname"><a href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288adad3e656000301a0e16b5fa6f5d0fc8f">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT</a></div><div class="ttdeci">@ AURA_EFFECT_HANDLE_SEND_FOR_CLIENT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:43</div></div>
<div class="ttc" id="aa03101_html_a2817e7c4c5917ae8deba00b38850e8db"><div class="ttname"><a href="../../d5/d43/a03101.html#a2817e7c4c5917ae8deba00b38850e8db">AuraEffectHandler</a></div><div class="ttdeci">pAuraEffectHandler AuraEffectHandler[TOTAL_AURAS]</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:62</div></div>
<div class="ttc" id="aa08518_html_ac6b29511984119cf4c430697a505cb45"><div class="ttname"><a href="../../db/df9/a08518.html#ac6b29511984119cf4c430697a505cb45">Unit::_RegisterAuraEffect</a></div><div class="ttdeci">void _RegisterAuraEffect(AuraEffect *aurEff, bool apply)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4696</div></div>
<div class="ttc" id="aa10782_html_a2a7bd5fd001ae6fb2ac680b1d25ef378"><div class="ttname"><a href="../../d6/d2f/a10782.html#a2a7bd5fd001ae6fb2ac680b1d25ef378">AuraEffect::ApplySpellMod</a></div><div class="ttdeci">void ApplySpellMod(Unit *target, bool apply)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:799</div></div>
<div class="ttc" id="aa10790_html"><div class="ttname"><a href="../../de/d50/a10790.html">AuraApplication</a></div><div class="ttdef"><b>Definition:</b> SpellAuras.h:37</div></div>
<div class="ttc" id="aa10790_html_a0447441f89446b170d751abbdda541b8"><div class="ttname"><a href="../../de/d50/a10790.html#a0447441f89446b170d751abbdda541b8">AuraApplication::GetTarget</a></div><div class="ttdeci">Unit * GetTarget() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:61</div></div>
<div class="ttc" id="aa10790_html_a051b0814a63b9398b523a6bfd23998d2"><div class="ttname"><a href="../../de/d50/a10790.html#a051b0814a63b9398b523a6bfd23998d2">AuraApplication::IsActive</a></div><div class="ttdeci">bool IsActive(uint8 effIdx)</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:81</div></div>
<div class="ttc" id="aa10790_html_ae6b921446fc7901f8f053e19c3fb3f4c"><div class="ttname"><a href="../../de/d50/a10790.html#ae6b921446fc7901f8f053e19c3fb3f4c">AuraApplication::GetRemoveMode</a></div><div class="ttdeci">AuraRemoveMode GetRemoveMode() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:73</div></div>
<div class="ttc" id="aa10794_html_a37a192c8e0119a8bc304c1711b15376e"><div class="ttname"><a href="../../df/d4a/a10794.html#a37a192c8e0119a8bc304c1711b15376e">Aura::CallScriptEffectRemoveHandlers</a></div><div class="ttdeci">bool CallScriptEffectRemoveHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, AuraEffectHandleModes mode)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2436</div></div>
<div class="ttc" id="aa10794_html_a76282958056070ecbf58c7a864ea7494"><div class="ttname"><a href="../../df/d4a/a10794.html#a76282958056070ecbf58c7a864ea7494">Aura::CallScriptAfterEffectApplyHandlers</a></div><div class="ttdeci">void CallScriptAfterEffectApplyHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, AuraEffectHandleModes mode)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2455</div></div>
<div class="ttc" id="aa10794_html_a882f4ec3b0f104d3c18c718dc71ec668"><div class="ttname"><a href="../../df/d4a/a10794.html#a882f4ec3b0f104d3c18c718dc71ec668">Aura::CallScriptEffectApplyHandlers</a></div><div class="ttdeci">bool CallScriptEffectApplyHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, AuraEffectHandleModes mode)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2416</div></div>
<div class="ttc" id="aa10794_html_a893e1bed86677e695a28d8eb4fab763d"><div class="ttname"><a href="../../df/d4a/a10794.html#a893e1bed86677e695a28d8eb4fab763d">Aura::CallScriptAfterEffectRemoveHandlers</a></div><div class="ttdeci">void CallScriptAfterEffectRemoveHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, AuraEffectHandleModes mode)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2469</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l04696">Unit::_RegisterAuraEffect()</a>, <a class="el" href="../../#l00799">ApplySpellMod()</a>, <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00044">AURA_EFFECT_HANDLE_CHANGE_AMOUNT</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00045">AURA_EFFECT_HANDLE_REAPPLY</a>, <a class="el" href="../../#l00043">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT</a>, <a class="el" href="../../#l00047">AURA_EFFECT_HANDLE_SKILL</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00062">AuraEffectHandler</a>, <a class="el" href="../../#l02455">Aura::CallScriptAfterEffectApplyHandlers()</a>, <a class="el" href="../../#l02469">Aura::CallScriptAfterEffectRemoveHandlers()</a>, <a class="el" href="../../#l02416">Aura::CallScriptEffectApplyHandlers()</a>, <a class="el" href="../../#l02436">Aura::CallScriptEffectRemoveHandlers()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../#l00081">AuraApplication::IsActive()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>, <a class="el" href="../../#l00708">ChangeAmount()</a>, <a class="el" href="../../#l01241">Aura::HandleAllEffects()</a>, <a class="el" href="../../#l00792">HandleEffect()</a>, and <a class="el" href="../../#l16771">Unit::RestoreDisplayId()</a>.</p>

</div>
</div>
<a id="aab9391e1ba5774b3df74dee4f65f707a" name="aab9391e1ba5774b3df74dee4f65f707a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab9391e1ba5774b3df74dee4f65f707a">&#9670;&#160;</a></span>HandleEffect() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleEffect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  793</span>{</div>
<div class="line"><span class="lineno">  794</span>    <a class="code hl_class" href="../../de/d50/a10790.html">AuraApplication</a>* aurApp = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#aa5e42f1c32857e82102fd95bb46ec013">GetApplicationOfTarget</a>(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno">  795</span>    <a class="code hl_define" href="../../da/d45/a00011.html#af343b20373ba49a92fce523e948f2ab3">ASSERT</a>(aurApp);</div>
<div class="line"><span class="lineno">  796</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#a7710e32fe9dc267292c3b15333521560">HandleEffect</a>(aurApp, mode, apply);</div>
<div class="line"><span class="lineno">  797</span>}</div>
<div class="ttc" id="aa10794_html_aa5e42f1c32857e82102fd95bb46ec013"><div class="ttname"><a href="../../df/d4a/a10794.html#aa5e42f1c32857e82102fd95bb46ec013">Aura::GetApplicationOfTarget</a></div><div class="ttdeci">const AuraApplication * GetApplicationOfTarget(ObjectGuid guid) const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:183</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00068">ASSERT</a>, <a class="el" href="../../#l00183">Aura::GetApplicationOfTarget()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, and <a class="el" href="../../#l00741">HandleEffect()</a>.</p>

</div>
</div>
<a id="a537d6b3b15ea0530f088c4ba8e1f4c57" name="a537d6b3b15ea0530f088c4ba8e1f4c57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a537d6b3b15ea0530f088c4ba8e1f4c57">&#9670;&#160;</a></span>HandleFarSight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleFarSight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5914</span>{</div>
<div class="line"><span class="lineno"> 5915</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 5916</span>    {</div>
<div class="line"><span class="lineno"> 5917</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5918</span>    }</div>
<div class="line"><span class="lineno"> 5919</span> </div>
<div class="line"><span class="lineno"> 5920</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 5921</span>    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5922</span>    {</div>
<div class="line"><span class="lineno"> 5923</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5924</span>    }</div>
<div class="line"><span class="lineno"> 5925</span> </div>
<div class="line"><span class="lineno"> 5926</span>    <a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* player = caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>();</div>
<div class="line"><span class="lineno"> 5927</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 5928</span>    {</div>
<div class="line"><span class="lineno"> 5929</span>        player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a203791fa6ecad8052ca3d3a6dd412cd6">SetFarSightDistance</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#ab2a598820f94464fba55f9706449ce25">GetMaxRange</a>());</div>
<div class="line"><span class="lineno"> 5930</span>    }</div>
<div class="line"><span class="lineno"> 5931</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5932</span>    {</div>
<div class="line"><span class="lineno"> 5933</span>        player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a74135dbbdf68a4ea1d5eb72bd6c89162">ResetFarSightDistance</a>();</div>
<div class="line"><span class="lineno"> 5934</span>    }</div>
<div class="line"><span class="lineno"> 5935</span> </div>
<div class="line"><span class="lineno"> 5936</span>    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(!apply);</div>
<div class="line"><span class="lineno"> 5937</span>}</div>
<div class="ttc" id="aa08386_html_a203791fa6ecad8052ca3d3a6dd412cd6"><div class="ttname"><a href="../../d0/dc6/a08386.html#a203791fa6ecad8052ca3d3a6dd412cd6">Player::SetFarSightDistance</a></div><div class="ttdeci">void SetFarSightDistance(float radius)</div><div class="ttdef"><b>Definition:</b> Player.cpp:16276</div></div>
<div class="ttc" id="aa08386_html_a74135dbbdf68a4ea1d5eb72bd6c89162"><div class="ttname"><a href="../../d0/dc6/a08386.html#a74135dbbdf68a4ea1d5eb72bd6c89162">Player::ResetFarSightDistance</a></div><div class="ttdeci">void ResetFarSightDistance()</div><div class="ttdef"><b>Definition:</b> Player.cpp:16281</div></div>
<div class="ttc" id="aa10898_html_ab2a598820f94464fba55f9706449ce25"><div class="ttname"><a href="../../d2/db6/a10898.html#ab2a598820f94464fba55f9706449ce25">SpellInfo::GetMaxRange</a></div><div class="ttdeci">float GetMaxRange(bool positive=false, Unit *caster=nullptr, Spell *spell=nullptr) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:2323</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l02323">SpellInfo::GetMaxRange()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l16281">Player::ResetFarSightDistance()</a>, <a class="el" href="../../#l16276">Player::SetFarSightDistance()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l19126">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="ab4c3dba7effbc5735869a7a49ca39005" name="ab4c3dba7effbc5735869a7a49ca39005"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4c3dba7effbc5735869a7a49ca39005">&#9670;&#160;</a></span>HandleFeignDeath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleFeignDeath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2808</span>{</div>
<div class="line"><span class="lineno"> 2809</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 2810</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2811</span> </div>
<div class="line"><span class="lineno"> 2812</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 2813</span> </div>
<div class="line"><span class="lineno"> 2814</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 2815</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2816</span> </div>
<div class="line"><span class="lineno"> 2817</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* targetPlayer = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno"> 2818</span>    {</div>
<div class="line"><span class="lineno"> 2819</span>        <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;AnticheatSetUnderACKmount(targetPlayer);</div>
<div class="line"><span class="lineno"> 2820</span>    }</div>
<div class="line"><span class="lineno"> 2821</span> </div>
<div class="line"><span class="lineno"> 2822</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 2823</span>    {</div>
<div class="line"><span class="lineno"> 2824</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 2825</span><span class="comment">        WorldPacket data(SMSG_FEIGN_DEATH_RESISTED, 9);</span></div>
<div class="line"><span class="lineno"> 2826</span><span class="comment">        data&lt;&lt;target-&gt;GetGUID();</span></div>
<div class="line"><span class="lineno"> 2827</span><span class="comment">        data&lt;&lt;uint8(0);</span></div>
<div class="line"><span class="lineno"> 2828</span><span class="comment">        target-&gt;SendMessageToSet(&amp;data, true);</span></div>
<div class="line"><span class="lineno"> 2829</span><span class="comment">        */</span></div>
<div class="line"><span class="lineno"> 2830</span> </div>
<div class="line"><span class="lineno"> 2831</span>        <a class="code hl_typedef" href="../../de/d3d/a03515.html#abbe331960980fa852a0be15ccebef947">UnitList</a> targets;</div>
<div class="line"><span class="lineno"> 2832</span>        <a class="code hl_class" href="../../d0/d0b/a09026.html">Acore::AnyUnfriendlyUnitInObjectRangeCheck</a> u_check(target, target, target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#abc340e4279a3a719bf5e14ed332b722f">GetVisibilityRange</a>()); <span class="comment">// no VISIBILITY_COMPENSATION, distance is enough</span></div>
<div class="line"><span class="lineno"> 2833</span>        <a class="code hl_struct" href="../../d6/d9a/a08934.html">Acore::UnitListSearcher&lt;Acore::AnyUnfriendlyUnitInObjectRangeCheck&gt;</a> searcher(target, targets, u_check);</div>
<div class="line"><span class="lineno"> 2834</span>        <a class="code hl_function" href="../../d9/db0/a08822.html#a15697efba7478b6e227b5f3c7aafc961">Cell::VisitAllObjects</a>(target, searcher, target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a1013c27be4347a1b1a4a986a07456deb">GetMap</a>()-&gt;<a class="code hl_function" href="../../d7/dc0/a09538.html#ac309ee57ae1a2058047c749d85d9bc95">GetVisibilityRange</a>());</div>
<div class="line"><span class="lineno"> 2835</span>        <span class="keywordflow">for</span> (UnitList::iterator iter = targets.begin(); iter != targets.end(); ++iter)</div>
<div class="line"><span class="lineno"> 2836</span>        {</div>
<div class="line"><span class="lineno"> 2837</span>            <span class="keywordflow">if</span> (!(*iter)-&gt;HasUnitState(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54">UNIT_STATE_CASTING</a>))</div>
<div class="line"><span class="lineno"> 2838</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2839</span> </div>
<div class="line"><span class="lineno"> 2840</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = <a class="code hl_define" href="../../de/d3d/a03515.html#a67df18abace700a63e433024dee15b90">CURRENT_FIRST_NON_MELEE_SPELL</a>; i &lt; <a class="code hl_define" href="../../de/d3d/a03515.html#aa55ee1b0aa8f9779fbe5f0c4eeaf6bed">CURRENT_MAX_SPELL</a>; i++)</div>
<div class="line"><span class="lineno"> 2841</span>            {</div>
<div class="line"><span class="lineno"> 2842</span>                <span class="keywordflow">if</span> ((*iter)-&gt;GetCurrentSpell(i) &amp;&amp; (*iter)-&gt;GetCurrentSpell(i)-&gt;m_targets.GetUnitTargetGUID() == target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>())</div>
<div class="line"><span class="lineno"> 2843</span>                {</div>
<div class="line"><span class="lineno"> 2844</span>                    <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* si = (*iter)-&gt;GetCurrentSpell(i)-&gt;GetSpellInfo();</div>
<div class="line"><span class="lineno"> 2845</span>                    <span class="keywordflow">if</span> (si-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#afc0226d0611e178e6edb4d2776e03094a78992c0cb395380959dea6189150d8bb">SPELL_ATTR6_IGNORE_PHASE_SHIFT</a>) &amp;&amp; (*iter)-&gt;IsCreature())</div>
<div class="line"><span class="lineno"> 2846</span>                    {</div>
<div class="line"><span class="lineno"> 2847</span>                        <a class="code hl_class" href="../../d1/d66/a07770.html">Creature</a>* c = (*iter)-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>();</div>
<div class="line"><span class="lineno"> 2848</span>                        <span class="keywordflow">if</span> ((!c-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>() &amp;&amp; c-&gt;<a class="code hl_function" href="../../d1/d66/a07770.html#a97fd2015b3956323ef777b5f9e23a1e8">GetCreatureTemplate</a>()-&gt;<a class="code hl_variable" href="../../d3/d43/a07798.html#a43898fb44b2cc1652a3beceefc8ab0dc">rank</a> == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8af71d86ca00a430958a42922ac6ceafab7aa8a6a53346999967dee75b6f87565">CREATURE_ELITE_WORLDBOSS</a>) || c-&gt;<a class="code hl_function" href="../../d1/d66/a07770.html#a1e8e9b7c41b24a7d0b8b11f1f44a192d">isWorldBoss</a>() || c-&gt;<a class="code hl_function" href="../../d1/d66/a07770.html#a1b7ac1396ab86ac6c07d466b3151ac56">IsDungeonBoss</a>())</div>
<div class="line"><span class="lineno"> 2849</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2850</span>                    }</div>
<div class="line"><span class="lineno"> 2851</span>                    <span class="keywordtype">bool</span> interrupt = <span class="keyword">false</span>; <span class="comment">// pussywizard: skip spells that don&#39;t target units, but casted on unit (eg. TARGET_DEST_TARGET_ENEMY)</span></div>
<div class="line"><span class="lineno"> 2852</span>                    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> j = 0; j &lt; <a class="code hl_define" href="../../d7/d14/a02750.html#ac5733f5b58bf8a23a1919a005b5ec895">MAX_SPELL_EFFECTS</a>; ++j)</div>
<div class="line"><span class="lineno"> 2853</span>                        <span class="keywordflow">if</span> (si-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[j].Effect &amp;&amp; (si-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[j].GetUsedTargetObjectType() == <a class="code hl_enumvalue" href="../../d4/d44/a03065.html#abd452c9e8451ab6d47620dbda77f087aa07a11fb9bb20374e8b0b52385ebdac6a">TARGET_OBJECT_TYPE_UNIT</a> || si-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[j].GetUsedTargetObjectType() == <a class="code hl_enumvalue" href="../../d4/d44/a03065.html#abd452c9e8451ab6d47620dbda77f087aa305e23c44d8e1b887ed9a4eee850b744">TARGET_OBJECT_TYPE_UNIT_AND_DEST</a>))</div>
<div class="line"><span class="lineno"> 2854</span>                        {</div>
<div class="line"><span class="lineno"> 2855</span>                            <span class="comment">// at least one effect truly targets an unit, interrupt the spell</span></div>
<div class="line"><span class="lineno"> 2856</span>                            interrupt = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2857</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2858</span>                        }</div>
<div class="line"><span class="lineno"> 2859</span>                    <span class="keywordflow">if</span> (interrupt)</div>
<div class="line"><span class="lineno"> 2860</span>                        (*iter)-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a080cb9749e810cdb61c36430b179c26f">InterruptSpell</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1f">CurrentSpellTypes</a>(i), <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 2861</span>                }</div>
<div class="line"><span class="lineno"> 2862</span>            }</div>
<div class="line"><span class="lineno"> 2863</span>        }</div>
<div class="line"><span class="lineno"> 2864</span> </div>
<div class="line"><span class="lineno"> 2865</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a29762f86d0726e4d229df51281b9d710">GetInstanceScript</a>() &amp;&amp; target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a29762f86d0726e4d229df51281b9d710">GetInstanceScript</a>()-&gt;<a class="code hl_function" href="../../de/d4e/a09362.html#a9753c3c71fef44fcbc33b89ff68350cd">IsEncounterInProgress</a>())</div>
<div class="line"><span class="lineno"> 2866</span>        {</div>
<div class="line"><span class="lineno"> 2867</span>            <span class="comment">// Xinef: replaced with CombatStop(false)</span></div>
<div class="line"><span class="lineno"> 2868</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aee07e22b70ed433a845b0673579d5fee">AttackStop</a>();</div>
<div class="line"><span class="lineno"> 2869</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac10ce49db853cbab9f0c56444c9ecd25">RemoveAllAttackers</a>();</div>
<div class="line"><span class="lineno"> 2870</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a83fe30829a1470536e408efbf56dd5f5">getHostileRefMgr</a>().<a class="code hl_function" href="../../d9/da8/a07598.html#af19a7681493ed53a3a8bafbed2c80f76">addThreatPercent</a>(-100);</div>
<div class="line"><span class="lineno"> 2871</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a0eaf8ade1fc32527b845a3213bb27703">SendAttackSwingCancelAttack</a>();     <span class="comment">// melee and ranged forced attack cancel</span></div>
<div class="line"><span class="lineno"> 2872</span>        }</div>
<div class="line"><span class="lineno"> 2873</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2874</span>        {</div>
<div class="line"><span class="lineno"> 2875</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a18f77484ed2acc7be7fa29d1df7a0c12">CombatStop</a>();</div>
<div class="line"><span class="lineno"> 2876</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a83fe30829a1470536e408efbf56dd5f5">getHostileRefMgr</a>().<a class="code hl_function" href="../../d9/da8/a07598.html#a0327a7238535a3d0961da1cca2102b0e">deleteReferences</a>();</div>
<div class="line"><span class="lineno"> 2877</span>        }</div>
<div class="line"><span class="lineno"> 2878</span> </div>
<div class="line"><span class="lineno"> 2879</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aee3106d8223e3a574ea629423fea1b91">RemoveAurasWithInterruptFlags</a>(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><span class="lineno"> 2880</span> </div>
<div class="line"><span class="lineno"> 2881</span>        <span class="comment">// prevent interrupt message</span></div>
<div class="line"><span class="lineno"> 2882</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>() == target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>())</div>
<div class="line"><span class="lineno"> 2883</span>        {</div>
<div class="line"><span class="lineno"> 2884</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#affc5148f2c60051706b4e85a29eb4d45">GetCurrentSpell</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1fa9cbac6c5133585dece51a40e9c1908b0">CURRENT_GENERIC_SPELL</a>))</div>
<div class="line"><span class="lineno"> 2885</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab9349116923cba29e3de802e86c3e2ec">FinishSpell</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1fa9cbac6c5133585dece51a40e9c1908b0">CURRENT_GENERIC_SPELL</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2886</span> </div>
<div class="line"><span class="lineno"> 2887</span>            <span class="comment">// interrupt autoshot</span></div>
<div class="line"><span class="lineno"> 2888</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#affc5148f2c60051706b4e85a29eb4d45">GetCurrentSpell</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1">CURRENT_AUTOREPEAT_SPELL</a>))</div>
<div class="line"><span class="lineno"> 2889</span>            {</div>
<div class="line"><span class="lineno"> 2890</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab9349116923cba29e3de802e86c3e2ec">FinishSpell</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1">CURRENT_AUTOREPEAT_SPELL</a>);</div>
<div class="line"><span class="lineno"> 2891</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a2f876e332a71e68aa8fd08863ad3623c">SendAutoRepeatCancel</a>(target);</div>
<div class="line"><span class="lineno"> 2892</span>            }</div>
<div class="line"><span class="lineno"> 2893</span>        }</div>
<div class="line"><span class="lineno"> 2894</span> </div>
<div class="line"><span class="lineno"> 2895</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a2bdfe38bdc28869a9002094e4341d56e">InterruptNonMeleeSpells</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2896</span> </div>
<div class="line"><span class="lineno"> 2897</span>        <span class="comment">// stop handling the effect if it was removed by linked event</span></div>
<div class="line"><span class="lineno"> 2898</span>        <span class="keywordflow">if</span> (aurApp-&gt;GetRemoveMode())</div>
<div class="line"><span class="lineno"> 2899</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2900</span>        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><span class="lineno"> 2901</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad9f2d48b20f62e17abf5c1892cebe296">SetUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a15cbbb6244dd6afc8afc84ccbed4c981">UNIT_FLAG_PREVENT_EMOTES_FROM_CHAT_TEXT</a>);</div>
<div class="line"><span class="lineno"> 2902</span>        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><span class="lineno"> 2903</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a585c0587bf93911ef964892c82b82172">SetUnitFlag2</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a79163df63e20fe477d0b2a6f5043a515">UNIT_FLAG2_FEIGN_DEATH</a>);</div>
<div class="line"><span class="lineno"> 2904</span>        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><span class="lineno"> 2905</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a8626753766b8e3ee11889f096d6fca6f">SetDynamicFlag</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a6d2f7a5452237dadf8fd3aed70f44039a0d49a1984bca491e07dc726a7b2b53fe">UNIT_DYNFLAG_DEAD</a>);</div>
<div class="line"><span class="lineno"> 2906</span> </div>
<div class="line"><span class="lineno"> 2907</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a752f5f516257bfdf139098c29a55c466">AddUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a1fba79641d6d2749fd2f2dc26e0e7fba">UNIT_STATE_DIED</a>);</div>
<div class="line"><span class="lineno"> 2908</span>    }</div>
<div class="line"><span class="lineno"> 2909</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2910</span>    {</div>
<div class="line"><span class="lineno"> 2911</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 2912</span><span class="comment">        WorldPacket data(SMSG_FEIGN_DEATH_RESISTED, 9);</span></div>
<div class="line"><span class="lineno"> 2913</span><span class="comment">        data&lt;&lt;target-&gt;GetGUID();</span></div>
<div class="line"><span class="lineno"> 2914</span><span class="comment">        data&lt;&lt;uint8(1);</span></div>
<div class="line"><span class="lineno"> 2915</span><span class="comment">        target-&gt;SendMessageToSet(&amp;data, true);</span></div>
<div class="line"><span class="lineno"> 2916</span><span class="comment">        */</span></div>
<div class="line"><span class="lineno"> 2917</span>        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><span class="lineno"> 2918</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af9a5a43c2d7940c38f8b101409666a0d">RemoveUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a15cbbb6244dd6afc8afc84ccbed4c981">UNIT_FLAG_PREVENT_EMOTES_FROM_CHAT_TEXT</a>);</div>
<div class="line"><span class="lineno"> 2919</span>        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><span class="lineno"> 2920</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a999bdc0f7dfd67915713460cf0e451bd">RemoveUnitFlag2</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a79163df63e20fe477d0b2a6f5043a515">UNIT_FLAG2_FEIGN_DEATH</a>);</div>
<div class="line"><span class="lineno"> 2921</span>        <span class="comment">// blizz like 2.0.x</span></div>
<div class="line"><span class="lineno"> 2922</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a096f5f52e6dad97fbe373004e9213f01">RemoveDynamicFlag</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a6d2f7a5452237dadf8fd3aed70f44039a0d49a1984bca491e07dc726a7b2b53fe">UNIT_DYNFLAG_DEAD</a>);</div>
<div class="line"><span class="lineno"> 2923</span> </div>
<div class="line"><span class="lineno"> 2924</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0234fee1df2999bda3ca22449164f7b5">ClearUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a1fba79641d6d2749fd2f2dc26e0e7fba">UNIT_STATE_DIED</a>);</div>
<div class="line"><span class="lineno"> 2925</span>    }</div>
<div class="line"><span class="lineno"> 2926</span>}</div>
<div class="ttc" id="aa02771_html_a6d2f7a5452237dadf8fd3aed70f44039a0d49a1984bca491e07dc726a7b2b53fe"><div class="ttname"><a href="../../d0/dbd/a02771.html#a6d2f7a5452237dadf8fd3aed70f44039a0d49a1984bca491e07dc726a7b2b53fe">UNIT_DYNFLAG_DEAD</a></div><div class="ttdeci">@ UNIT_DYNFLAG_DEAD</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3126</div></div>
<div class="ttc" id="aa02771_html_a8af71d86ca00a430958a42922ac6ceafab7aa8a6a53346999967dee75b6f87565"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8af71d86ca00a430958a42922ac6ceafab7aa8a6a53346999967dee75b6f87565">CREATURE_ELITE_WORLDBOSS</a></div><div class="ttdeci">@ CREATURE_ELITE_WORLDBOSS</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:2734</div></div>
<div class="ttc" id="aa02771_html_afc0226d0611e178e6edb4d2776e03094a78992c0cb395380959dea6189150d8bb"><div class="ttname"><a href="../../d0/dbd/a02771.html#afc0226d0611e178e6edb4d2776e03094a78992c0cb395380959dea6189150d8bb">SPELL_ATTR6_IGNORE_PHASE_SHIFT</a></div><div class="ttdeci">@ SPELL_ATTR6_IGNORE_PHASE_SHIFT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:617</div></div>
<div class="ttc" id="aa03065_html_abd452c9e8451ab6d47620dbda77f087aa07a11fb9bb20374e8b0b52385ebdac6a"><div class="ttname"><a href="../../d4/d44/a03065.html#abd452c9e8451ab6d47620dbda77f087aa07a11fb9bb20374e8b0b52385ebdac6a">TARGET_OBJECT_TYPE_UNIT</a></div><div class="ttdeci">@ TARGET_OBJECT_TYPE_UNIT</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:101</div></div>
<div class="ttc" id="aa03065_html_abd452c9e8451ab6d47620dbda77f087aa305e23c44d8e1b887ed9a4eee850b744"><div class="ttname"><a href="../../d4/d44/a03065.html#abd452c9e8451ab6d47620dbda77f087aa305e23c44d8e1b887ed9a4eee850b744">TARGET_OBJECT_TYPE_UNIT_AND_DEST</a></div><div class="ttdeci">@ TARGET_OBJECT_TYPE_UNIT_AND_DEST</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:102</div></div>
<div class="ttc" id="aa03515_html_a67df18abace700a63e433024dee15b90"><div class="ttname"><a href="../../de/d3d/a03515.html#a67df18abace700a63e433024dee15b90">CURRENT_FIRST_NON_MELEE_SPELL</a></div><div class="ttdeci">#define CURRENT_FIRST_NON_MELEE_SPELL</div><div class="ttdef"><b>Definition:</b> Unit.h:543</div></div>
<div class="ttc" id="aa03515_html_ab791040bd6d685b1fd2cfd12c96d0a1fa9cbac6c5133585dece51a40e9c1908b0"><div class="ttname"><a href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1fa9cbac6c5133585dece51a40e9c1908b0">CURRENT_GENERIC_SPELL</a></div><div class="ttdeci">@ CURRENT_GENERIC_SPELL</div><div class="ttdef"><b>Definition:</b> Unit.h:538</div></div>
<div class="ttc" id="aa03515_html_ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1"><div class="ttname"><a href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1">CURRENT_AUTOREPEAT_SPELL</a></div><div class="ttdeci">@ CURRENT_AUTOREPEAT_SPELL</div><div class="ttdef"><b>Definition:</b> Unit.h:540</div></div>
<div class="ttc" id="aa03515_html_abbe331960980fa852a0be15ccebef947"><div class="ttname"><a href="../../de/d3d/a03515.html#abbe331960980fa852a0be15ccebef947">UnitList</a></div><div class="ttdeci">std::list&lt; Unit * &gt; UnitList</div><div class="ttdef"><b>Definition:</b> Unit.h:76</div></div>
<div class="ttc" id="aa03521_html_a3320fdc05dc07c396f8943de4018e682a79163df63e20fe477d0b2a6f5043a515"><div class="ttname"><a href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a79163df63e20fe477d0b2a6f5043a515">UNIT_FLAG2_FEIGN_DEATH</a></div><div class="ttdeci">@ UNIT_FLAG2_FEIGN_DEATH</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:268</div></div>
<div class="ttc" id="aa03521_html_ae51d2ecb71f7a5cb3882982a622c9544a1fba79641d6d2749fd2f2dc26e0e7fba"><div class="ttname"><a href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a1fba79641d6d2749fd2f2dc26e0e7fba">UNIT_STATE_DIED</a></div><div class="ttdeci">@ UNIT_STATE_DIED</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:149</div></div>
<div class="ttc" id="aa03521_html_ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54"><div class="ttname"><a href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54">UNIT_STATE_CASTING</a></div><div class="ttdeci">@ UNIT_STATE_CASTING</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:164</div></div>
<div class="ttc" id="aa03521_html_affdd0d554c8bcaaa85a879f5a9d60934a15cbbb6244dd6afc8afc84ccbed4c981"><div class="ttname"><a href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a15cbbb6244dd6afc8afc84ccbed4c981">UNIT_FLAG_PREVENT_EMOTES_FROM_CHAT_TEXT</a></div><div class="ttdeci">@ UNIT_FLAG_PREVENT_EMOTES_FROM_CHAT_TEXT</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:258</div></div>
<div class="ttc" id="aa07598_html_a0327a7238535a3d0961da1cca2102b0e"><div class="ttname"><a href="../../d9/da8/a07598.html#a0327a7238535a3d0961da1cca2102b0e">HostileRefMgr::deleteReferences</a></div><div class="ttdeci">void deleteReferences(bool removeFromMap=false)</div><div class="ttdef"><b>Definition:</b> HostileRefMgr.cpp:125</div></div>
<div class="ttc" id="aa07598_html_af19a7681493ed53a3a8bafbed2c80f76"><div class="ttname"><a href="../../d9/da8/a07598.html#af19a7681493ed53a3a8bafbed2c80f76">HostileRefMgr::addThreatPercent</a></div><div class="ttdeci">void addThreatPercent(int32 percent)</div><div class="ttdef"><b>Definition:</b> HostileRefMgr.cpp:85</div></div>
<div class="ttc" id="aa07770_html"><div class="ttname"><a href="../../d1/d66/a07770.html">Creature</a></div><div class="ttdef"><b>Definition:</b> Creature.h:43</div></div>
<div class="ttc" id="aa07770_html_a1b7ac1396ab86ac6c07d466b3151ac56"><div class="ttname"><a href="../../d1/d66/a07770.html#a1b7ac1396ab86ac6c07d466b3151ac56">Creature::IsDungeonBoss</a></div><div class="ttdeci">bool IsDungeonBoss() const</div><div class="ttdef"><b>Definition:</b> Creature.cpp:3160</div></div>
<div class="ttc" id="aa07770_html_a1e8e9b7c41b24a7d0b8b11f1f44a192d"><div class="ttname"><a href="../../d1/d66/a07770.html#a1e8e9b7c41b24a7d0b8b11f1f44a192d">Creature::isWorldBoss</a></div><div class="ttdeci">bool isWorldBoss() const</div><div class="ttdef"><b>Definition:</b> Creature.h:120</div></div>
<div class="ttc" id="aa07770_html_a97fd2015b3956323ef777b5f9e23a1e8"><div class="ttname"><a href="../../d1/d66/a07770.html#a97fd2015b3956323ef777b5f9e23a1e8">Creature::GetCreatureTemplate</a></div><div class="ttdeci">CreatureTemplate const * GetCreatureTemplate() const</div><div class="ttdef"><b>Definition:</b> Creature.h:205</div></div>
<div class="ttc" id="aa07798_html_a43898fb44b2cc1652a3beceefc8ab0dc"><div class="ttname"><a href="../../d3/d43/a07798.html#a43898fb44b2cc1652a3beceefc8ab0dc">CreatureTemplate::rank</a></div><div class="ttdeci">uint32 rank</div><div class="ttdef"><b>Definition:</b> CreatureData.h:206</div></div>
<div class="ttc" id="aa08174_html_a29762f86d0726e4d229df51281b9d710"><div class="ttname"><a href="../../d3/d4c/a08174.html#a29762f86d0726e4d229df51281b9d710">WorldObject::GetInstanceScript</a></div><div class="ttdeci">InstanceScript * GetInstanceScript() const</div><div class="ttdef"><b>Definition:</b> Object.cpp:1192</div></div>
<div class="ttc" id="aa08174_html_abc340e4279a3a719bf5e14ed332b722f"><div class="ttname"><a href="../../d3/d4c/a08174.html#abc340e4279a3a719bf5e14ed332b722f">WorldObject::GetVisibilityRange</a></div><div class="ttdeci">float GetVisibilityRange() const</div><div class="ttdef"><b>Definition:</b> Object.cpp:1645</div></div>
<div class="ttc" id="aa08386_html_a0eaf8ade1fc32527b845a3213bb27703"><div class="ttname"><a href="../../d0/dc6/a08386.html#a0eaf8ade1fc32527b845a3213bb27703">Player::SendAttackSwingCancelAttack</a></div><div class="ttdeci">void SendAttackSwingCancelAttack()</div><div class="ttdef"><b>Definition:</b> PlayerMisc.cpp:140</div></div>
<div class="ttc" id="aa08386_html_a2f876e332a71e68aa8fd08863ad3623c"><div class="ttname"><a href="../../d0/dc6/a08386.html#a2f876e332a71e68aa8fd08863ad3623c">Player::SendAutoRepeatCancel</a></div><div class="ttdeci">void SendAutoRepeatCancel(Unit *target)</div><div class="ttdef"><b>Definition:</b> PlayerMisc.cpp:152</div></div>
<div class="ttc" id="aa08518_html_a18f77484ed2acc7be7fa29d1df7a0c12"><div class="ttname"><a href="../../db/df9/a08518.html#a18f77484ed2acc7be7fa29d1df7a0c12">Unit::CombatStop</a></div><div class="ttdeci">void CombatStop(bool includingCast=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10436</div></div>
<div class="ttc" id="aa08518_html_a2bdfe38bdc28869a9002094e4341d56e"><div class="ttname"><a href="../../db/df9/a08518.html#a2bdfe38bdc28869a9002094e4341d56e">Unit::InterruptNonMeleeSpells</a></div><div class="ttdeci">void InterruptNonMeleeSpells(bool withDelayed, uint32 spellid=0, bool withInstant=true, bool bySelf=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4129</div></div>
<div class="ttc" id="aa08518_html_ab9349116923cba29e3de802e86c3e2ec"><div class="ttname"><a href="../../db/df9/a08518.html#ab9349116923cba29e3de802e86c3e2ec">Unit::FinishSpell</a></div><div class="ttdeci">void FinishSpell(CurrentSpellTypes spellType, bool ok=true)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4087</div></div>
<div class="ttc" id="aa08518_html_ac10ce49db853cbab9f0c56444c9ecd25"><div class="ttname"><a href="../../db/df9/a08518.html#ac10ce49db853cbab9f0c56444c9ecd25">Unit::RemoveAllAttackers</a></div><div class="ttdeci">void RemoveAllAttackers()</div><div class="ttdoc">Remove all units in m_attackers list and send them AttackStop()</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10484</div></div>
<div class="ttc" id="aa08518_html_aee07e22b70ed433a845b0673579d5fee"><div class="ttname"><a href="../../db/df9/a08518.html#aee07e22b70ed433a845b0673579d5fee">Unit::AttackStop</a></div><div class="ttdeci">bool AttackStop()</div><div class="ttdoc">Force the unit to stop attacking. This will clear UNIT_STATE_MELEE_ATTACKING, Interrupt current spell...</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10403</div></div>
<div class="ttc" id="aa08822_html_a15697efba7478b6e227b5f3c7aafc961"><div class="ttname"><a href="../../d9/db0/a08822.html#a15697efba7478b6e227b5f3c7aafc961">Cell::VisitAllObjects</a></div><div class="ttdeci">static void VisitAllObjects(WorldObject const *obj, T &amp;visitor, float radius, bool dont_load=true)</div><div class="ttdef"><b>Definition:</b> CellImpl.h:206</div></div>
<div class="ttc" id="aa08934_html"><div class="ttname"><a href="../../d6/d9a/a08934.html">Acore::UnitListSearcher</a></div><div class="ttdef"><b>Definition:</b> GridNotifiers.h:423</div></div>
<div class="ttc" id="aa09026_html"><div class="ttname"><a href="../../d0/d0b/a09026.html">Acore::AnyUnfriendlyUnitInObjectRangeCheck</a></div><div class="ttdef"><b>Definition:</b> GridNotifiers.h:861</div></div>
<div class="ttc" id="aa09362_html_a9753c3c71fef44fcbc33b89ff68350cd"><div class="ttname"><a href="../../de/d4e/a09362.html#a9753c3c71fef44fcbc33b89ff68350cd">InstanceScript::IsEncounterInProgress</a></div><div class="ttdeci">virtual bool IsEncounterInProgress() const</div><div class="ttdef"><b>Definition:</b> InstanceScript.cpp:125</div></div>
<div class="ttc" id="aa09538_html_ac309ee57ae1a2058047c749d85d9bc95"><div class="ttname"><a href="../../d7/dc0/a09538.html#ac309ee57ae1a2058047c749d85d9bc95">Map::GetVisibilityRange</a></div><div class="ttdeci">float GetVisibilityRange() const</div><div class="ttdef"><b>Definition:</b> Map.h:349</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00085">HostileRefMgr::addThreatPercent()</a>, <a class="el" href="../../#l00700">Unit::AddUnitState()</a>, <a class="el" href="../../#l10403">Unit::AttackStop()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00063">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../#l00702">Unit::ClearUnitState()</a>, <a class="el" href="../../#l10436">Unit::CombatStop()</a>, <a class="el" href="../../#l02734">CREATURE_ELITE_WORLDBOSS</a>, <a class="el" href="../../#l00540">CURRENT_AUTOREPEAT_SPELL</a>, <a class="el" href="../../#l00543">CURRENT_FIRST_NON_MELEE_SPELL</a>, <a class="el" href="../../#l00538">CURRENT_GENERIC_SPELL</a>, <a class="el" href="../../#l00544">CURRENT_MAX_SPELL</a>, <a class="el" href="../../#l00125">HostileRefMgr::deleteReferences()</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l04087">Unit::FinishSpell()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00205">Creature::GetCreatureTemplate()</a>, <a class="el" href="../../#l01449">Unit::GetCurrentSpell()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00907">Unit::getHostileRefMgr()</a>, <a class="el" href="../../#l01192">WorldObject::GetInstanceScript()</a>, <a class="el" href="../../#l00531">WorldObject::GetMap()</a>, <a class="el" href="../../#l00073">AuraApplication::GetRemoveMode()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01645">WorldObject::GetVisibilityRange()</a>, <a class="el" href="../../#l00349">Map::GetVisibilityRange()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l04129">Unit::InterruptNonMeleeSpells()</a>, <a class="el" href="../../#l04060">Unit::InterruptSpell()</a>, <a class="el" href="../../#l03160">Creature::IsDungeonBoss()</a>, <a class="el" href="../../#l00125">InstanceScript::IsEncounterInProgress()</a>, <a class="el" href="../../#l00754">Unit::IsPet()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00120">Creature::isWorldBoss()</a>, <a class="el" href="../../#l01636">MAX_SPELL_EFFECTS</a>, <a class="el" href="../../#l00206">CreatureTemplate::rank</a>, <a class="el" href="../../#l10484">Unit::RemoveAllAttackers()</a>, <a class="el" href="../../#l05181">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../#l00121">Object::RemoveDynamicFlag()</a>, <a class="el" href="../../#l00714">Unit::RemoveUnitFlag()</a>, <a class="el" href="../../#l00720">Unit::RemoveUnitFlag2()</a>, <a class="el" href="../../#l00140">Player::SendAttackSwingCancelAttack()</a>, <a class="el" href="../../#l00152">Player::SendAutoRepeatCancel()</a>, <a class="el" href="../../#l00120">Object::SetDynamicFlag()</a>, <a class="el" href="../../#l00713">Unit::SetUnitFlag()</a>, <a class="el" href="../../#l00719">Unit::SetUnitFlag2()</a>, <a class="el" href="../../#l00617">SPELL_ATTR6_IGNORE_PHASE_SHIFT</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00101">TARGET_OBJECT_TYPE_UNIT</a>, <a class="el" href="../../#l00102">TARGET_OBJECT_TYPE_UNIT_AND_DEST</a>, <a class="el" href="../../#l00202">Object::ToCreature()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l03126">UNIT_DYNFLAG_DEAD</a>, <a class="el" href="../../#l00268">UNIT_FLAG2_FEIGN_DEATH</a>, <a class="el" href="../../#l00258">UNIT_FLAG_PREVENT_EMOTES_FROM_CHAT_TEXT</a>, <a class="el" href="../../#l00164">UNIT_STATE_CASTING</a>, <a class="el" href="../../#l00149">UNIT_STATE_DIED</a>, and <a class="el" href="../../#l00206">Cell::VisitAllObjects()</a>.</p>

</div>
</div>
<a id="ad9645e47c14c56ae888807b9027e9c34" name="ad9645e47c14c56ae888807b9027e9c34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9645e47c14c56ae888807b9027e9c34">&#9670;&#160;</a></span>HandleForceMoveForward()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleForceMoveForward </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3408</span>{</div>
<div class="line"><span class="lineno"> 3409</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3410</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3411</span> </div>
<div class="line"><span class="lineno"> 3412</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3413</span> </div>
<div class="line"><span class="lineno"> 3414</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3415</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a585c0587bf93911ef964892c82b82172">SetUnitFlag2</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a6b5e14f64219057e58c20f8345702ed0">UNIT_FLAG2_FORCE_MOVEMENT</a>);</div>
<div class="line"><span class="lineno"> 3416</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3417</span>    {</div>
<div class="line"><span class="lineno"> 3418</span>        <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 3419</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>()))</div>
<div class="line"><span class="lineno"> 3420</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3421</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a999bdc0f7dfd67915713460cf0e451bd">RemoveUnitFlag2</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a6b5e14f64219057e58c20f8345702ed0">UNIT_FLAG2_FORCE_MOVEMENT</a>);</div>
<div class="line"><span class="lineno"> 3422</span>    }</div>
<div class="line"><span class="lineno"> 3423</span>}</div>
<div class="ttc" id="aa03521_html_a3320fdc05dc07c396f8943de4018e682a6b5e14f64219057e58c20f8345702ed0"><div class="ttname"><a href="../../d8/dbe/a03521.html#a3320fdc05dc07c396f8943de4018e682a6b5e14f64219057e58c20f8345702ed0">UNIT_FLAG2_FORCE_MOVEMENT</a></div><div class="ttdeci">@ UNIT_FLAG2_FORCE_MOVEMENT</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:274</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00720">Unit::RemoveUnitFlag2()</a>, <a class="el" href="../../#l00719">Unit::SetUnitFlag2()</a>, and <a class="el" href="../../#l00274">UNIT_FLAG2_FORCE_MOVEMENT</a>.</p>

</div>
</div>
<a id="a3b1c8a621c824d3d9e5021c9503193f6" name="a3b1c8a621c824d3d9e5021c9503193f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b1c8a621c824d3d9e5021c9503193f6">&#9670;&#160;</a></span>HandleForceReaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleForceReaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5940</span>{</div>
<div class="line"><span class="lineno"> 5941</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 5942</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5943</span> </div>
<div class="line"><span class="lineno"> 5944</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5945</span> </div>
<div class="line"><span class="lineno"> 5946</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5947</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5948</span> </div>
<div class="line"><span class="lineno"> 5949</span>    <a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* player = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>();</div>
<div class="line"><span class="lineno"> 5950</span> </div>
<div class="line"><span class="lineno"> 5951</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> faction_id = <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><span class="lineno"> 5952</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#aa8feab79004a7795346184a5e6140f03">ReputationRank</a> faction_rank = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#aa8feab79004a7795346184a5e6140f03">ReputationRank</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>);</div>
<div class="line"><span class="lineno"> 5953</span> </div>
<div class="line"><span class="lineno"> 5954</span>    player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af5e271a82ad1ba3d3b081b9774b7a5e5">GetReputationMgr</a>().<a class="code hl_function" href="../../db/d15/a09926.html#a840258781abe2d2143525c7467c71258">ApplyForceReaction</a>(faction_id, faction_rank, apply);</div>
<div class="line"><span class="lineno"> 5955</span>    player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af5e271a82ad1ba3d3b081b9774b7a5e5">GetReputationMgr</a>().<a class="code hl_function" href="../../db/d15/a09926.html#ada7a924a1bb1eea6b8da692ec483c7c6">SendForceReactions</a>();</div>
<div class="line"><span class="lineno"> 5956</span> </div>
<div class="line"><span class="lineno"> 5957</span>    <span class="comment">// stop fighting if at apply forced rank friendly or at remove real rank friendly</span></div>
<div class="line"><span class="lineno"> 5958</span>    <span class="keywordflow">if</span> ((apply &amp;&amp; faction_rank &gt;= <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aa8feab79004a7795346184a5e6140f03acacb6fa3b41a9e3ebeea1ba226ca407f">REP_FRIENDLY</a>) || (!apply &amp;&amp; player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ac3ed608b721a2bea2b86a62995e7622a">GetReputationRank</a>(faction_id) &gt;= <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aa8feab79004a7795346184a5e6140f03acacb6fa3b41a9e3ebeea1ba226ca407f">REP_FRIENDLY</a>))</div>
<div class="line"><span class="lineno"> 5959</span>        player-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa655b9b66c027ff7a6e2f1775cc2dfd8">StopAttackFaction</a>(faction_id);</div>
<div class="line"><span class="lineno"> 5960</span>}</div>
<div class="ttc" id="aa02771_html_aa8feab79004a7795346184a5e6140f03"><div class="ttname"><a href="../../d0/dbd/a02771.html#aa8feab79004a7795346184a5e6140f03">ReputationRank</a></div><div class="ttdeci">ReputationRank</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:179</div></div>
<div class="ttc" id="aa02771_html_aa8feab79004a7795346184a5e6140f03acacb6fa3b41a9e3ebeea1ba226ca407f"><div class="ttname"><a href="../../d0/dbd/a02771.html#aa8feab79004a7795346184a5e6140f03acacb6fa3b41a9e3ebeea1ba226ca407f">REP_FRIENDLY</a></div><div class="ttdeci">@ REP_FRIENDLY</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:184</div></div>
<div class="ttc" id="aa08386_html_ac3ed608b721a2bea2b86a62995e7622a"><div class="ttname"><a href="../../d0/dc6/a08386.html#ac3ed608b721a2bea2b86a62995e7622a">Player::GetReputationRank</a></div><div class="ttdeci">ReputationRank GetReputationRank(uint32 faction_id) const</div><div class="ttdef"><b>Definition:</b> Player.cpp:5870</div></div>
<div class="ttc" id="aa08386_html_af5e271a82ad1ba3d3b081b9774b7a5e5"><div class="ttname"><a href="../../d0/dc6/a08386.html#af5e271a82ad1ba3d3b081b9774b7a5e5">Player::GetReputationMgr</a></div><div class="ttdeci">ReputationMgr &amp; GetReputationMgr()</div><div class="ttdef"><b>Definition:</b> Player.h:2108</div></div>
<div class="ttc" id="aa08518_html_aa655b9b66c027ff7a6e2f1775cc2dfd8"><div class="ttname"><a href="../../db/df9/a08518.html#aa655b9b66c027ff7a6e2f1775cc2dfd8">Unit::StopAttackFaction</a></div><div class="ttdeci">void StopAttackFaction(uint32 faction_id)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:20165</div></div>
<div class="ttc" id="aa09926_html_a840258781abe2d2143525c7467c71258"><div class="ttname"><a href="../../db/d15/a09926.html#a840258781abe2d2143525c7467c71258">ReputationMgr::ApplyForceReaction</a></div><div class="ttdeci">void ApplyForceReaction(uint32 faction_id, ReputationRank rank, bool apply)</div><div class="ttdef"><b>Definition:</b> ReputationMgr.cpp:137</div></div>
<div class="ttc" id="aa09926_html_ada7a924a1bb1eea6b8da692ec483c7c6"><div class="ttname"><a href="../../db/d15/a09926.html#ada7a924a1bb1eea6b8da692ec483c7c6">ReputationMgr::SendForceReactions</a></div><div class="ttdeci">void SendForceReactions()</div><div class="ttdef"><b>Definition:</b> ReputationMgr.cpp:165</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00137">ReputationMgr::ApplyForceReaction()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l02108">Player::GetReputationMgr()</a>, <a class="el" href="../../#l05870">Player::GetReputationRank()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l00184">REP_FRIENDLY</a>, <a class="el" href="../../#l00165">ReputationMgr::SendForceReactions()</a>, <a class="el" href="../../#l20165">Unit::StopAttackFaction()</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="af470ebc0cd402437abab85c0203d0396" name="af470ebc0cd402437abab85c0203d0396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af470ebc0cd402437abab85c0203d0396">&#9670;&#160;</a></span>HandleModAttackSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModAttackSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5016</span>{</div>
<div class="line"><span class="lineno"> 5017</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5018</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5019</span> </div>
<div class="line"><span class="lineno"> 5020</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5021</span> </div>
<div class="line"><span class="lineno"> 5022</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5023</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a7df3efe1a18d2562a04ca1f91d03532e">UpdateDamagePhysical</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>);</div>
<div class="line"><span class="lineno"> 5024</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l17050">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../#l00060">Unit::UpdateDamagePhysical()</a>.</p>

</div>
</div>
<a id="a6663b6902d2e2a6a46bf3e14a35871d8" name="a6663b6902d2e2a6a46bf3e14a35871d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6663b6902d2e2a6a46bf3e14a35871d8">&#9670;&#160;</a></span>HandleModBaseResistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModBaseResistance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4392</span>{</div>
<div class="line"><span class="lineno"> 4393</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4394</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4395</span> </div>
<div class="line"><span class="lineno"> 4396</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4397</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; i &lt; <a class="code hl_variable" href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; i++)</div>
<div class="line"><span class="lineno"> 4398</span>    {</div>
<div class="line"><span class="lineno"> 4399</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i))</div>
<div class="line"><span class="lineno"> 4400</span>        {</div>
<div class="line"><span class="lineno"> 4401</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a> + i), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4402</span>        }</div>
<div class="line"><span class="lineno"> 4403</span>    }</div>
<div class="line"><span class="lineno"> 4404</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00292">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../#l00283">SPELL_SCHOOL_NORMAL</a>, <a class="el" href="../../#l00128">TOTAL_VALUE</a>, and <a class="el" href="../../#l00172">UNIT_MOD_RESISTANCE_START</a>.</p>

</div>
</div>
<a id="a9bc0fe3e6f5ce7ec0c62d3f2e25ebfb9" name="a9bc0fe3e6f5ce7ec0c62d3f2e25ebfb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bc0fe3e6f5ce7ec0c62d3f2e25ebfb9">&#9670;&#160;</a></span>HandleModCastingSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModCastingSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4974</span>{</div>
<div class="line"><span class="lineno"> 4975</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4976</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4977</span> </div>
<div class="line"><span class="lineno"> 4978</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4979</span> </div>
<div class="line"><span class="lineno"> 4980</span>    <span class="comment">// Xinef: Do not apply such auras in normal way</span></div>
<div class="line"><span class="lineno"> 4981</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() &gt;= 1000)</div>
<div class="line"><span class="lineno"> 4982</span>    {</div>
<div class="line"><span class="lineno"> 4983</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8120b00fa748ab79370b47b529052345">SetInstantCast</a>(apply);</div>
<div class="line"><span class="lineno"> 4984</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4985</span>    }</div>
<div class="line"><span class="lineno"> 4986</span> </div>
<div class="line"><span class="lineno"> 4987</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab40be0231d6df4acb06fb3726b29aedc">ApplyCastTimePercentMod</a>((<span class="keywordtype">float</span>)<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 4988</span>}</div>
<div class="ttc" id="aa08518_html_a8120b00fa748ab79370b47b529052345"><div class="ttname"><a href="../../db/df9/a08518.html#a8120b00fa748ab79370b47b529052345">Unit::SetInstantCast</a></div><div class="ttdeci">void SetInstantCast(bool set)</div><div class="ttdef"><b>Definition:</b> Unit.h:1458</div></div>
<div class="ttc" id="aa08518_html_ab40be0231d6df4acb06fb3726b29aedc"><div class="ttname"><a href="../../db/df9/a08518.html#ab40be0231d6df4acb06fb3726b29aedc">Unit::ApplyCastTimePercentMod</a></div><div class="ttdeci">void ApplyCastTimePercentMod(float val, bool apply)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:17066</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l17066">Unit::ApplyCastTimePercentMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../#l01458">Unit::SetInstantCast()</a>.</p>

</div>
</div>
<a id="ac3da622f21fc4e175e6948db55b60511" name="ac3da622f21fc4e175e6948db55b60511"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3da622f21fc4e175e6948db55b60511">&#9670;&#160;</a></span>HandleModCharm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModCharm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3616</span>{</div>
<div class="line"><span class="lineno"> 3617</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3618</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3619</span> </div>
<div class="line"><span class="lineno"> 3620</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3621</span> </div>
<div class="line"><span class="lineno"> 3622</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 3623</span> </div>
<div class="line"><span class="lineno"> 3624</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3625</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad02c1207bd4ccb5df03df1d4eec80293">SetCharmedBy</a>(caster, <a class="code hl_enumvalue" href="../../dd/daf/a03503.html#a8a31720d588fad9fce4a74dabc39df8ba1a1eeed651d163cde9401370f9684249">CHARM_TYPE_CHARM</a>, aurApp);</div>
<div class="line"><span class="lineno"> 3626</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3627</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa897a679d63c8d6272d4bc85395a708f">RemoveCharmedBy</a>(caster);</div>
<div class="line"><span class="lineno"> 3628</span>}</div>
<div class="ttc" id="aa03503_html_a8a31720d588fad9fce4a74dabc39df8ba1a1eeed651d163cde9401370f9684249"><div class="ttname"><a href="../../dd/daf/a03503.html#a8a31720d588fad9fce4a74dabc39df8ba1a1eeed651d163cde9401370f9684249">CHARM_TYPE_CHARM</a></div><div class="ttdeci">@ CHARM_TYPE_CHARM</div><div class="ttdef"><b>Definition:</b> CharmInfo.h:45</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00045">CHARM_TYPE_CHARM</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l18548">Unit::RemoveCharmedBy()</a>, and <a class="el" href="../../#l18346">Unit::SetCharmedBy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l03540">HandleModPossess()</a>.</p>

</div>
</div>
<a id="a2578a0c8a91021e22ae67f2c0ff35331" name="a2578a0c8a91021e22ae67f2c0ff35331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2578a0c8a91021e22ae67f2c0ff35331">&#9670;&#160;</a></span>HandleModCombatSpeedPct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModCombatSpeedPct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5003</span>{</div>
<div class="line"><span class="lineno"> 5004</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5005</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5006</span> </div>
<div class="line"><span class="lineno"> 5007</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5008</span> </div>
<div class="line"><span class="lineno"> 5009</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab40be0231d6df4acb06fb3726b29aedc">ApplyCastTimePercentMod</a>(<span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5010</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5011</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5012</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352aa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5013</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l17050">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../#l17066">Unit::ApplyCastTimePercentMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00210">OFF_ATTACK</a>, and <a class="el" href="../../#l00211">RANGED_ATTACK</a>.</p>

</div>
</div>
<a id="aa5aba9aa102d0402b423ce57a616bb0c" name="aa5aba9aa102d0402b423ce57a616bb0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5aba9aa102d0402b423ce57a616bb0c">&#9670;&#160;</a></span>HandleModConfuse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModConfuse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3483</span>{</div>
<div class="line"><span class="lineno"> 3484</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3485</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3486</span> </div>
<div class="line"><span class="lineno"> 3487</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3488</span> </div>
<div class="line"><span class="lineno"> 3489</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a828f4fc42209162a104a10d1f70838d4">SetControlled</a>(apply, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a3d7431ccd5efc9f24766e69bf19845c0">UNIT_STATE_CONFUSED</a>);</div>
<div class="line"><span class="lineno"> 3490</span>}</div>
<div class="ttc" id="aa03521_html_ae51d2ecb71f7a5cb3882982a622c9544a3d7431ccd5efc9f24766e69bf19845c0"><div class="ttname"><a href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a3d7431ccd5efc9f24766e69bf19845c0">UNIT_STATE_CONFUSED</a></div><div class="ttdeci">@ UNIT_STATE_CONFUSED</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:160</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l18030">Unit::SetControlled()</a>, and <a class="el" href="../../#l00160">UNIT_STATE_CONFUSED</a>.</p>

</div>
</div>
<a id="a3ee0e71dbbb4e685b4e8db327e3b639b" name="a3ee0e71dbbb4e685b4e8db327e3b639b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee0e71dbbb4e685b4e8db327e3b639b">&#9670;&#160;</a></span>HandleModDamageDone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModDamageDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5179</span>{</div>
<div class="line"><span class="lineno"> 5180</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5181</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5182</span> </div>
<div class="line"><span class="lineno"> 5183</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5184</span> </div>
<div class="line"><span class="lineno"> 5185</span>    <span class="comment">// apply item specific bonuses for already equipped weapon</span></div>
<div class="line"><span class="lineno"> 5186</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5187</span>    {</div>
<div class="line"><span class="lineno"> 5188</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a0f966a2f1219b75a945c686c3cad21e4">MAX_ATTACK</a>; ++i)</div>
<div class="line"><span class="lineno"> 5189</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d24/a08098.html">Item</a>* pItem = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ac8e55e9ca3aec15337a7a952aa8efac8">GetWeaponForAttack</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352">WeaponAttackType</a>(i), <span class="keyword">true</span>))</div>
<div class="line"><span class="lineno"> 5190</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6712cd5410dae42bef9ffe46b05190bf">_ApplyWeaponDependentAuraDamageMod</a>(pItem, <a class="code hl_enumeration" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352">WeaponAttackType</a>(i), <span class="keyword">this</span>, apply);</div>
<div class="line"><span class="lineno"> 5191</span>    }</div>
<div class="line"><span class="lineno"> 5192</span> </div>
<div class="line"><span class="lineno"> 5193</span>    <span class="comment">// GetMiscValue() is bitmask of spell schools</span></div>
<div class="line"><span class="lineno"> 5194</span>    <span class="comment">// 1 (0-bit) - normal school damage (SPELL_SCHOOL_MASK_NORMAL)</span></div>
<div class="line"><span class="lineno"> 5195</span>    <span class="comment">// 126 - full bitmask all magic damages (SPELL_SCHOOL_MASK_MAGIC) including wands</span></div>
<div class="line"><span class="lineno"> 5196</span>    <span class="comment">// 127 - full bitmask any damages</span></div>
<div class="line"><span class="lineno"> 5197</span>    <span class="comment">//</span></div>
<div class="line"><span class="lineno"> 5198</span>    <span class="comment">// mods must be applied base at equipped weapon class and subclass comparison</span></div>
<div class="line"><span class="lineno"> 5199</span>    <span class="comment">// with spell-&gt;EquippedItemClass and  EquippedItemSubClassMask and EquippedItemInventoryTypeMask</span></div>
<div class="line"><span class="lineno"> 5200</span>    <span class="comment">// GetMiscValue() comparison with item generated damage types</span></div>
<div class="line"><span class="lineno"> 5201</span> </div>
<div class="line"><span class="lineno"> 5202</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>) != 0 &amp;&amp; <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;CanModAuraEffectDamageDone(<span class="keyword">this</span>, target, aurApp, mode, apply))</div>
<div class="line"><span class="lineno"> 5203</span>    {</div>
<div class="line"><span class="lineno"> 5204</span>        <span class="comment">// apply generic physical damage bonuses including wand case</span></div>
<div class="line"><span class="lineno"> 5205</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;EquippedItemClass == -1 || !target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5206</span>        {</div>
<div class="line"><span class="lineno"> 5207</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdeaccdf98ed89e64b2482699a13bc1fd28c">UNIT_MOD_DAMAGE_MAINHAND</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5208</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea036e8ca8fe78e5addf8e68a79732b742">UNIT_MOD_DAMAGE_OFFHAND</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5209</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea49e9d4df8d30a4fa19a5d422dbb2fb41">UNIT_MOD_DAMAGE_RANGED</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eea85637bc3b7127fbfc1d35d5e3ca4a95c">TOTAL_VALUE</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5210</span> </div>
<div class="line"><span class="lineno"> 5211</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5212</span>            {</div>
<div class="line"><span class="lineno"> 5213</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() &gt; 0)</div>
<div class="line"><span class="lineno"> 5214</span>                    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a051300eea16c88b14b85e24e8002188d">PLAYER_FIELD_MOD_DAMAGE_DONE_POS</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 5215</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5216</span>                    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881ae6173f0310815b32f65cbd7983309c6a">PLAYER_FIELD_MOD_DAMAGE_DONE_NEG</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 5217</span>            }</div>
<div class="line"><span class="lineno"> 5218</span>        }</div>
<div class="line"><span class="lineno"> 5219</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5220</span>        {</div>
<div class="line"><span class="lineno"> 5221</span>            <span class="comment">// done in Player::_ApplyWeaponDependentAuraMods</span></div>
<div class="line"><span class="lineno"> 5222</span>        }</div>
<div class="line"><span class="lineno"> 5223</span>    }</div>
<div class="line"><span class="lineno"> 5224</span> </div>
<div class="line"><span class="lineno"> 5225</span>    <span class="comment">// Skip non magic case for Speedup</span></div>
<div class="line"><span class="lineno"> 5226</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa53b7883ddb2ff484fe7e089afe2c85dc">SPELL_SCHOOL_MASK_MAGIC</a>) == 0)</div>
<div class="line"><span class="lineno"> 5227</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5228</span> </div>
<div class="line"><span class="lineno"> 5229</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;EquippedItemClass != -1 || <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;EquippedItemInventoryTypeMask != 0)</div>
<div class="line"><span class="lineno"> 5230</span>    {</div>
<div class="line"><span class="lineno"> 5231</span>        <span class="comment">// wand magic case (skip generic to all item spell bonuses)</span></div>
<div class="line"><span class="lineno"> 5232</span>        <span class="comment">// done in Player::_ApplyWeaponDependentAuraMods</span></div>
<div class="line"><span class="lineno"> 5233</span> </div>
<div class="line"><span class="lineno"> 5234</span>        <span class="comment">// Skip item specific requirements for not wand magic damage</span></div>
<div class="line"><span class="lineno"> 5235</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5236</span>    }</div>
<div class="line"><span class="lineno"> 5237</span> </div>
<div class="line"><span class="lineno"> 5238</span>    <span class="comment">// Magic damage modifiers implemented in Unit::SpellDamageBonus</span></div>
<div class="line"><span class="lineno"> 5239</span>    <span class="comment">// This information for client side use only</span></div>
<div class="line"><span class="lineno"> 5240</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5241</span>    {</div>
<div class="line"><span class="lineno"> 5242</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() &gt; 0)</div>
<div class="line"><span class="lineno"> 5243</span>        {</div>
<div class="line"><span class="lineno"> 5244</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4cad4192a372d6a664e2a3c50e186b2ed62">SPELL_SCHOOL_HOLY</a>; i &lt; <a class="code hl_variable" href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; i++)</div>
<div class="line"><span class="lineno"> 5245</span>            {</div>
<div class="line"><span class="lineno"> 5246</span>                <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i)) != 0)</div>
<div class="line"><span class="lineno"> 5247</span>                    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a051300eea16c88b14b85e24e8002188d">PLAYER_FIELD_MOD_DAMAGE_DONE_POS</a> + i, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 5248</span>            }</div>
<div class="line"><span class="lineno"> 5249</span>        }</div>
<div class="line"><span class="lineno"> 5250</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5251</span>        {</div>
<div class="line"><span class="lineno"> 5252</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4cad4192a372d6a664e2a3c50e186b2ed62">SPELL_SCHOOL_HOLY</a>; i &lt; <a class="code hl_variable" href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; i++)</div>
<div class="line"><span class="lineno"> 5253</span>            {</div>
<div class="line"><span class="lineno"> 5254</span>                <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i)) != 0)</div>
<div class="line"><span class="lineno"> 5255</span>                    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881ae6173f0310815b32f65cbd7983309c6a">PLAYER_FIELD_MOD_DAMAGE_DONE_NEG</a> + i, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 5256</span>            }</div>
<div class="line"><span class="lineno"> 5257</span>        }</div>
<div class="line"><span class="lineno"> 5258</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d5/d75/a07906.html">Guardian</a>* pet = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae78759acca81e2a89a82f79a4ef6e70c">GetGuardianPet</a>())</div>
<div class="line"><span class="lineno"> 5259</span>            pet-&gt;UpdateAttackPowerAndDamage();</div>
<div class="line"><span class="lineno"> 5260</span>    }</div>
<div class="line"><span class="lineno"> 5261</span>}</div>
<div class="ttc" id="aa02771_html_a25263e3e283b54e5280d5af1fd16da4cad4192a372d6a664e2a3c50e186b2ed62"><div class="ttname"><a href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4cad4192a372d6a664e2a3c50e186b2ed62">SPELL_SCHOOL_HOLY</a></div><div class="ttdeci">@ SPELL_SCHOOL_HOLY</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:284</div></div>
<div class="ttc" id="aa02771_html_aff6913cfd69489c107a071be9ec2ec8fa53b7883ddb2ff484fe7e089afe2c85dc"><div class="ttname"><a href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa53b7883ddb2ff484fe7e089afe2c85dc">SPELL_SCHOOL_MASK_MAGIC</a></div><div class="ttdeci">@ SPELL_SCHOOL_MASK_MAGIC</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:312</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a051300eea16c88b14b85e24e8002188d"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a051300eea16c88b14b85e24e8002188d">PLAYER_FIELD_MOD_DAMAGE_DONE_POS</a></div><div class="ttdeci">@ PLAYER_FIELD_MOD_DAMAGE_DONE_POS</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:360</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881ae6173f0310815b32f65cbd7983309c6a"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881ae6173f0310815b32f65cbd7983309c6a">PLAYER_FIELD_MOD_DAMAGE_DONE_NEG</a></div><div class="ttdeci">@ PLAYER_FIELD_MOD_DAMAGE_DONE_NEG</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:361</div></div>
<div class="ttc" id="aa03515_html_a4c5336cd4be5f0162bd4874b0a1e5bdea036e8ca8fe78e5addf8e68a79732b742"><div class="ttname"><a href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea036e8ca8fe78e5addf8e68a79732b742">UNIT_MOD_DAMAGE_OFFHAND</a></div><div class="ttdeci">@ UNIT_MOD_DAMAGE_OFFHAND</div><div class="ttdef"><b>Definition:</b> Unit.h:166</div></div>
<div class="ttc" id="aa03515_html_a4c5336cd4be5f0162bd4874b0a1e5bdea49e9d4df8d30a4fa19a5d422dbb2fb41"><div class="ttname"><a href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea49e9d4df8d30a4fa19a5d422dbb2fb41">UNIT_MOD_DAMAGE_RANGED</a></div><div class="ttdeci">@ UNIT_MOD_DAMAGE_RANGED</div><div class="ttdef"><b>Definition:</b> Unit.h:167</div></div>
<div class="ttc" id="aa03515_html_a4c5336cd4be5f0162bd4874b0a1e5bdeaccdf98ed89e64b2482699a13bc1fd28c"><div class="ttname"><a href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdeaccdf98ed89e64b2482699a13bc1fd28c">UNIT_MOD_DAMAGE_MAINHAND</a></div><div class="ttdeci">@ UNIT_MOD_DAMAGE_MAINHAND</div><div class="ttdef"><b>Definition:</b> Unit.h:165</div></div>
<div class="ttc" id="aa07906_html"><div class="ttname"><a href="../../d5/d75/a07906.html">Guardian</a></div><div class="ttdef"><b>Definition:</b> TemporarySummon.h:95</div></div>
<div class="ttc" id="aa08386_html_a6712cd5410dae42bef9ffe46b05190bf"><div class="ttname"><a href="../../d0/dc6/a08386.html#a6712cd5410dae42bef9ffe46b05190bf">Player::_ApplyWeaponDependentAuraDamageMod</a></div><div class="ttdeci">void _ApplyWeaponDependentAuraDamageMod(Item *item, WeaponAttackType attackType, AuraEffect const *aura, bool apply)</div><div class="ttdef"><b>Definition:</b> Player.cpp:7050</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l07050">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../#l00815">Object::ApplyModInt32Value()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l10651">Unit::GetGuardianPet()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00488">Player::GetWeaponForAttack()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00212">MAX_ATTACK</a>, <a class="el" href="../../#l00292">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../#l00361">PLAYER_FIELD_MOD_DAMAGE_DONE_NEG</a>, <a class="el" href="../../#l00360">PLAYER_FIELD_MOD_DAMAGE_DONE_POS</a>, <a class="el" href="../../#l00284">SPELL_SCHOOL_HOLY</a>, <a class="el" href="../../#l00312">SPELL_SCHOOL_MASK_MAGIC</a>, <a class="el" href="../../#l00297">SPELL_SCHOOL_MASK_NORMAL</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00128">TOTAL_VALUE</a>, <a class="el" href="../../#l00165">UNIT_MOD_DAMAGE_MAINHAND</a>, <a class="el" href="../../#l00166">UNIT_MOD_DAMAGE_OFFHAND</a>, and <a class="el" href="../../#l00167">UNIT_MOD_DAMAGE_RANGED</a>.</p>

</div>
</div>
<a id="a1681732afa7c5a767eb0ba2264f4958c" name="a1681732afa7c5a767eb0ba2264f4958c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1681732afa7c5a767eb0ba2264f4958c">&#9670;&#160;</a></span>HandleModDamagePercentDone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModDamagePercentDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5264</span>{</div>
<div class="line"><span class="lineno"> 5265</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5266</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5267</span> </div>
<div class="line"><span class="lineno"> 5268</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5269</span>    <span class="keywordflow">if</span> (!target)</div>
<div class="line"><span class="lineno"> 5270</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5271</span> </div>
<div class="line"><span class="lineno"> 5272</span>    <span class="keywordflow">if</span> (!<a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;CanModAuraEffectModDamagePercentDone(<span class="keyword">this</span>, target, aurApp, mode, apply))</div>
<div class="line"><span class="lineno"> 5273</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5274</span> </div>
<div class="line"><span class="lineno"> 5275</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5276</span>    {</div>
<div class="line"><span class="lineno"> 5277</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a0f966a2f1219b75a945c686c3cad21e4">MAX_ATTACK</a>; ++i)</div>
<div class="line"><span class="lineno"> 5278</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d24/a08098.html">Item</a>* item = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ac8e55e9ca3aec15337a7a952aa8efac8">GetWeaponForAttack</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352">WeaponAttackType</a>(i), <span class="keyword">false</span>))</div>
<div class="line"><span class="lineno"> 5279</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6712cd5410dae42bef9ffe46b05190bf">_ApplyWeaponDependentAuraDamageMod</a>(item, <a class="code hl_enumeration" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352">WeaponAttackType</a>(i), <span class="keyword">this</span>, apply);</div>
<div class="line"><span class="lineno"> 5280</span>    }</div>
<div class="line"><span class="lineno"> 5281</span> </div>
<div class="line"><span class="lineno"> 5282</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>) &amp;&amp; (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;EquippedItemClass == -1 || !target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>()))</div>
<div class="line"><span class="lineno"> 5283</span>    {</div>
<div class="line"><span class="lineno"> 5284</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdeaccdf98ed89e64b2482699a13bc1fd28c">UNIT_MOD_DAMAGE_MAINHAND</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5285</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea036e8ca8fe78e5addf8e68a79732b742">UNIT_MOD_DAMAGE_OFFHAND</a>,  <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5286</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea49e9d4df8d30a4fa19a5d422dbb2fb41">UNIT_MOD_DAMAGE_RANGED</a>,   <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5287</span> </div>
<div class="line"><span class="lineno"> 5288</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5289</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aeff5b9b739f39137cb0c5d83a1a50457">ApplyPercentModFloatValue</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881ada19763bd0e6188ecf508c748d74e8f3">PLAYER_FIELD_MOD_DAMAGE_DONE_PCT</a>, <span class="keywordtype">float</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5290</span>    }</div>
<div class="line"><span class="lineno"> 5291</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 5292</span>    {</div>
<div class="line"><span class="lineno"> 5293</span>        <span class="comment">// done in Player::_ApplyWeaponDependentAuraMods for SPELL_SCHOOL_MASK_NORMAL &amp;&amp; EquippedItemClass != -1 and also for wand case</span></div>
<div class="line"><span class="lineno"> 5294</span>    }</div>
<div class="line"><span class="lineno"> 5295</span>}</div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881ada19763bd0e6188ecf508c748d74e8f3"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881ada19763bd0e6188ecf508c748d74e8f3">PLAYER_FIELD_MOD_DAMAGE_DONE_PCT</a></div><div class="ttdeci">@ PLAYER_FIELD_MOD_DAMAGE_DONE_PCT</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:362</div></div>
<div class="ttc" id="aa08142_html_aeff5b9b739f39137cb0c5d83a1a50457"><div class="ttname"><a href="../../df/d2d/a08142.html#aeff5b9b739f39137cb0c5d83a1a50457">Object::ApplyPercentModFloatValue</a></div><div class="ttdeci">void ApplyPercentModFloatValue(uint16 index, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> Object.cpp:829</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l07050">Player::_ApplyWeaponDependentAuraDamageMod()</a>, <a class="el" href="../../#l00829">Object::ApplyPercentModFloatValue()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00488">Player::GetWeaponForAttack()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00212">MAX_ATTACK</a>, <a class="el" href="../../#l00362">PLAYER_FIELD_MOD_DAMAGE_DONE_PCT</a>, <a class="el" href="../../#l00297">SPELL_SCHOOL_MASK_NORMAL</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00129">TOTAL_PCT</a>, <a class="el" href="../../#l00165">UNIT_MOD_DAMAGE_MAINHAND</a>, <a class="el" href="../../#l00166">UNIT_MOD_DAMAGE_OFFHAND</a>, and <a class="el" href="../../#l00167">UNIT_MOD_DAMAGE_RANGED</a>.</p>

</div>
</div>
<a id="a26498e695742b5689c35f806af38ae8a" name="a26498e695742b5689c35f806af38ae8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26498e695742b5689c35f806af38ae8a">&#9670;&#160;</a></span>HandleModFear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModFear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3493</span>{</div>
<div class="line"><span class="lineno"> 3494</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3495</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3496</span> </div>
<div class="line"><span class="lineno"> 3497</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3498</span> </div>
<div class="line"><span class="lineno"> 3499</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a828f4fc42209162a104a10d1f70838d4">SetControlled</a>(apply, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544ab254220382db03ed44e6cea86ad4c87d">UNIT_STATE_FLEEING</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>(), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3500</span>}</div>
<div class="ttc" id="aa03521_html_ae51d2ecb71f7a5cb3882982a622c9544ab254220382db03ed44e6cea86ad4c87d"><div class="ttname"><a href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544ab254220382db03ed44e6cea86ad4c87d">UNIT_STATE_FLEEING</a></div><div class="ttdeci">@ UNIT_STATE_FLEEING</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:156</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l18030">Unit::SetControlled()</a>, and <a class="el" href="../../#l00156">UNIT_STATE_FLEEING</a>.</p>

</div>
</div>
<a id="a09dda5a0af27ab34292b312fd20203bb" name="a09dda5a0af27ab34292b312fd20203bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09dda5a0af27ab34292b312fd20203bb">&#9670;&#160;</a></span>HandleModHealingDone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModHealingDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4539</span>{</div>
<div class="line"><span class="lineno"> 4540</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4541</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4542</span> </div>
<div class="line"><span class="lineno"> 4543</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4544</span> </div>
<div class="line"><span class="lineno"> 4545</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4546</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4547</span>    <span class="comment">// implemented in Unit::SpellHealingBonus</span></div>
<div class="line"><span class="lineno"> 4548</span>    <span class="comment">// this information is for client side only</span></div>
<div class="line"><span class="lineno"> 4549</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a9c9c56019156a846d7437279bfcc31bf">UpdateSpellDamageAndHealingBonus</a>();</div>
<div class="line"><span class="lineno"> 4550</span>}</div>
<div class="ttc" id="aa08386_html_a9c9c56019156a846d7437279bfcc31bf"><div class="ttname"><a href="../../d0/dc6/a08386.html#a9c9c56019156a846d7437279bfcc31bf">Player::UpdateSpellDamageAndHealingBonus</a></div><div class="ttdeci">void UpdateSpellDamageAndHealingBonus()</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:177</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00177">Player::UpdateSpellDamageAndHealingBonus()</a>.</p>

</div>
</div>
<a id="afa9f84f40fa41ddee3d6fb22c8bd3ac4" name="afa9f84f40fa41ddee3d6fb22c8bd3ac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa9f84f40fa41ddee3d6fb22c8bd3ac4">&#9670;&#160;</a></span>HandleModHitChance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModHitChance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4889</span>{</div>
<div class="line"><span class="lineno"> 4890</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4891</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4892</span> </div>
<div class="line"><span class="lineno"> 4893</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4894</span> </div>
<div class="line"><span class="lineno"> 4895</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4896</span>    {</div>
<div class="line"><span class="lineno"> 4897</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aa0562ee67ebc6ef7730bba008f8e61f3">UpdateMeleeHitChances</a>();</div>
<div class="line"><span class="lineno"> 4898</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ab17aa17e78fda3217af0d7281e92b98b">UpdateRangedHitChances</a>();</div>
<div class="line"><span class="lineno"> 4899</span>    }</div>
<div class="line"><span class="lineno"> 4900</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4901</span>    {</div>
<div class="line"><span class="lineno"> 4902</span>        target-&gt;<a class="code hl_variable" href="../../db/df9/a08518.html#aa34f5a7c9aafd7aef3e34588a9b3601f">m_modMeleeHitChance</a> += (<a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() : (-<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 4903</span>        target-&gt;<a class="code hl_variable" href="../../db/df9/a08518.html#a5f745ec33a32bdf6c0934418c126101a">m_modRangedHitChance</a> += (<a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() : (-<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 4904</span>    }</div>
<div class="line"><span class="lineno"> 4905</span>}</div>
<div class="ttc" id="aa08386_html_aa0562ee67ebc6ef7730bba008f8e61f3"><div class="ttname"><a href="../../d0/dc6/a08386.html#aa0562ee67ebc6ef7730bba008f8e61f3">Player::UpdateMeleeHitChances</a></div><div class="ttdeci">void UpdateMeleeHitChances()</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:853</div></div>
<div class="ttc" id="aa08386_html_ab17aa17e78fda3217af0d7281e92b98b"><div class="ttname"><a href="../../d0/dc6/a08386.html#ab17aa17e78fda3217af0d7281e92b98b">Player::UpdateRangedHitChances</a></div><div class="ttdeci">void UpdateRangedHitChances()</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:859</div></div>
<div class="ttc" id="aa08518_html_a5f745ec33a32bdf6c0934418c126101a"><div class="ttname"><a href="../../db/df9/a08518.html#a5f745ec33a32bdf6c0934418c126101a">Unit::m_modRangedHitChance</a></div><div class="ttdeci">float m_modRangedHitChance</div><div class="ttdef"><b>Definition:</b> Unit.h:1902</div></div>
<div class="ttc" id="aa08518_html_aa34f5a7c9aafd7aef3e34588a9b3601f"><div class="ttname"><a href="../../db/df9/a08518.html#aa34f5a7c9aafd7aef3e34588a9b3601f">Unit::m_modMeleeHitChance</a></div><div class="ttdeci">float m_modMeleeHitChance</div><div class="ttdef"><b>Definition:</b> Unit.h:1901</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l01901">Unit::m_modMeleeHitChance</a>, <a class="el" href="../../#l01902">Unit::m_modRangedHitChance</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00853">Player::UpdateMeleeHitChances()</a>, and <a class="el" href="../../#l00859">Player::UpdateRangedHitChances()</a>.</p>

</div>
</div>
<a id="aff76927ae90362081a6ca6c8c77004f6" name="aff76927ae90362081a6ca6c8c77004f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff76927ae90362081a6ca6c8c77004f6">&#9670;&#160;</a></span>HandleModInvisibility()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModInvisibility </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1550</span>{</div>
<div class="line"><span class="lineno"> 1551</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 1552</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1553</span> </div>
<div class="line"><span class="lineno"> 1554</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1555</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a5f791d790b588bcbafa8a2f34be5c4a0">InvisibilityType</a> type = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a5f791d790b588bcbafa8a2f34be5c4a0">InvisibilityType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 1556</span> </div>
<div class="line"><span class="lineno"> 1557</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1558</span>    {</div>
<div class="line"><span class="lineno"> 1559</span>        <span class="comment">// apply glow vision</span></div>
<div class="line"><span class="lineno"> 1560</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; (type == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a5f791d790b588bcbafa8a2f34be5c4a0aecf03cb7f42dc44356b530f9b9dc2c9a">INVISIBILITY_GENERAL</a> || type == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a5f791d790b588bcbafa8a2f34be5c4a0a872da93a45611fb494332eb3631a8454">INVISIBILITY_UNK10</a>))</div>
<div class="line"><span class="lineno"> 1561</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#afe65b1ab32dbcd51890b754fb8b5e1b0">SetByteFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#ae0c57a2bb851b9d5a88e5d5fef69f939a9ad97828a3dd598a45dcbbcd3969879b">PLAYER_FIELD_BYTES_2_OFFSET_AURA_VISION</a>, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a29b0496d910c02e5cc98d349c4427474a512b317a67d45505043fcae61dcca393">PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</a>);</div>
<div class="line"><span class="lineno"> 1562</span> </div>
<div class="line"><span class="lineno"> 1563</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#a273ab3607b23881628eb0c5d6a4da288">AddFlag</a>(type);</div>
<div class="line"><span class="lineno"> 1564</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(type, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 1565</span>    }</div>
<div class="line"><span class="lineno"> 1566</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1567</span>    {</div>
<div class="line"><span class="lineno"> 1568</span>        <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a600ad2316202aec206facbfa746a136b">SPELL_AURA_MOD_INVISIBILITY</a>))</div>
<div class="line"><span class="lineno"> 1569</span>        {</div>
<div class="line"><span class="lineno"> 1570</span>            <span class="comment">// if not have different invisibility auras.</span></div>
<div class="line"><span class="lineno"> 1571</span>            <span class="comment">// always remove glow vision</span></div>
<div class="line"><span class="lineno"> 1572</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 1573</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#acef75a7f84673fda790861bd1b0b68b7">RemoveByteFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, 3, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a29b0496d910c02e5cc98d349c4427474a512b317a67d45505043fcae61dcca393">PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</a>);</div>
<div class="line"><span class="lineno"> 1574</span> </div>
<div class="line"><span class="lineno"> 1575</span>            target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#a3a674b2a7b8d5874f7210372b3e92123">DelFlag</a>(type);</div>
<div class="line"><span class="lineno"> 1576</span>        }</div>
<div class="line"><span class="lineno"> 1577</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1578</span>        {</div>
<div class="line"><span class="lineno"> 1579</span>            <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1580</span>            <a class="code hl_typedef" href="../../db/df9/a08518.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; invisAuras = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a600ad2316202aec206facbfa746a136b">SPELL_AURA_MOD_INVISIBILITY</a>);</div>
<div class="line"><span class="lineno"> 1581</span>            <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator i = invisAuras.begin(); i != invisAuras.end(); ++i)</div>
<div class="line"><span class="lineno"> 1582</span>            {</div>
<div class="line"><span class="lineno"> 1583</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == (*i)-&gt;GetMiscValue())</div>
<div class="line"><span class="lineno"> 1584</span>                {</div>
<div class="line"><span class="lineno"> 1585</span>                    found = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1586</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1587</span>                }</div>
<div class="line"><span class="lineno"> 1588</span>            }</div>
<div class="line"><span class="lineno"> 1589</span>            <span class="keywordflow">if</span> (!found)</div>
<div class="line"><span class="lineno"> 1590</span>            {</div>
<div class="line"><span class="lineno"> 1591</span>                target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#a3a674b2a7b8d5874f7210372b3e92123">DelFlag</a>(type);</div>
<div class="line"><span class="lineno"> 1592</span> </div>
<div class="line"><span class="lineno"> 1593</span>                <span class="comment">// if not have invisibility auras of type INVISIBILITY_GENERAL</span></div>
<div class="line"><span class="lineno"> 1594</span>                <span class="comment">// remove glow vision</span></div>
<div class="line"><span class="lineno"> 1595</span>                <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; !target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#a0ea5d977caef5152c71c515259a91f06">HasFlag</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a5f791d790b588bcbafa8a2f34be5c4a0aecf03cb7f42dc44356b530f9b9dc2c9a">INVISIBILITY_GENERAL</a>) &amp;&amp; !target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#a0ea5d977caef5152c71c515259a91f06">HasFlag</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a5f791d790b588bcbafa8a2f34be5c4a0a872da93a45611fb494332eb3631a8454">INVISIBILITY_UNK10</a>))</div>
<div class="line"><span class="lineno"> 1596</span>                {</div>
<div class="line"><span class="lineno"> 1597</span>                    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#acef75a7f84673fda790861bd1b0b68b7">RemoveByteFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#ae0c57a2bb851b9d5a88e5d5fef69f939a9ad97828a3dd598a45dcbbcd3969879b">PLAYER_FIELD_BYTES_2_OFFSET_AURA_VISION</a>, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a29b0496d910c02e5cc98d349c4427474a512b317a67d45505043fcae61dcca393">PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</a>);</div>
<div class="line"><span class="lineno"> 1598</span>                }</div>
<div class="line"><span class="lineno"> 1599</span>            }</div>
<div class="line"><span class="lineno"> 1600</span>        }</div>
<div class="line"><span class="lineno"> 1601</span> </div>
<div class="line"><span class="lineno"> 1602</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#a41d85385408958edcecb5883dd89c3d9">m_invisibility</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(type, -<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 1603</span>    }</div>
<div class="line"><span class="lineno"> 1604</span> </div>
<div class="line"><span class="lineno"> 1605</span>    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><span class="lineno"> 1606</span>    <span class="keywordflow">if</span> (apply &amp;&amp; (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 1607</span>    {</div>
<div class="line"><span class="lineno"> 1608</span>        <span class="comment">// drop flag at invisibiliy in bg</span></div>
<div class="line"><span class="lineno"> 1609</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aee3106d8223e3a574ea629423fea1b91">RemoveAurasWithInterruptFlags</a>(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><span class="lineno"> 1610</span>    }</div>
<div class="line"><span class="lineno"> 1611</span> </div>
<div class="line"><span class="lineno"> 1612</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>().<a class="code hl_function" href="../../db/d40/a08190.html#a676c61adb79a8be696a771a116253ee1">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a1013c27be4347a1b1a4a986a07456deb">GetMap</a>()-&gt;<a class="code hl_function" href="../../d7/dc0/a09538.html#aae3a929aefb05046ef304ffba10aae71">Instanceable</a>(), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1613</span>    target-&gt;<a class="code hl_variable" href="../../db/df9/a08518.html#a76e5156ec045582923f6d1541b66367b">bRequestForcedVisibilityUpdate</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1614</span>}</div>
<div class="ttc" id="aa02771_html_a5f791d790b588bcbafa8a2f34be5c4a0"><div class="ttname"><a href="../../d0/dbd/a02771.html#a5f791d790b588bcbafa8a2f34be5c4a0">InvisibilityType</a></div><div class="ttdeci">InvisibilityType</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1254</div></div>
<div class="ttc" id="aa02771_html_a5f791d790b588bcbafa8a2f34be5c4a0a872da93a45611fb494332eb3631a8454"><div class="ttname"><a href="../../d0/dbd/a02771.html#a5f791d790b588bcbafa8a2f34be5c4a0a872da93a45611fb494332eb3631a8454">INVISIBILITY_UNK10</a></div><div class="ttdeci">@ INVISIBILITY_UNK10</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1265</div></div>
<div class="ttc" id="aa02771_html_a5f791d790b588bcbafa8a2f34be5c4a0aecf03cb7f42dc44356b530f9b9dc2c9a"><div class="ttname"><a href="../../d0/dbd/a02771.html#a5f791d790b588bcbafa8a2f34be5c4a0aecf03cb7f42dc44356b530f9b9dc2c9a">INVISIBILITY_GENERAL</a></div><div class="ttdeci">@ INVISIBILITY_GENERAL</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1255</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a600ad2316202aec206facbfa746a136b"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a600ad2316202aec206facbfa746a136b">SPELL_AURA_MOD_INVISIBILITY</a></div><div class="ttdeci">@ SPELL_AURA_MOD_INVISIBILITY</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:81</div></div>
<div class="ttc" id="aa03365_html_a29b0496d910c02e5cc98d349c4427474a512b317a67d45505043fcae61dcca393"><div class="ttname"><a href="../../d7/d13/a03365.html#a29b0496d910c02e5cc98d349c4427474a512b317a67d45505043fcae61dcca393">PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</div><div class="ttdef"><b>Definition:</b> Player.h:569</div></div>
<div class="ttc" id="aa03365_html_ae0c57a2bb851b9d5a88e5d5fef69f939a9ad97828a3dd598a45dcbbcd3969879b"><div class="ttname"><a href="../../d7/d13/a03365.html#ae0c57a2bb851b9d5a88e5d5fef69f939a9ad97828a3dd598a45dcbbcd3969879b">PLAYER_FIELD_BYTES_2_OFFSET_AURA_VISION</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTES_2_OFFSET_AURA_VISION</div><div class="ttdef"><b>Definition:</b> Player.h:546</div></div>
<div class="ttc" id="aa08166_html_a0ea5d977caef5152c71c515259a91f06"><div class="ttname"><a href="../../dc/d06/a08166.html#a0ea5d977caef5152c71c515259a91f06">FlaggedValuesArray32::HasFlag</a></div><div class="ttdeci">bool HasFlag(FLAG_TYPE flag) const</div><div class="ttdef"><b>Definition:</b> Object.h:367</div></div>
<div class="ttc" id="aa08166_html_a273ab3607b23881628eb0c5d6a4da288"><div class="ttname"><a href="../../dc/d06/a08166.html#a273ab3607b23881628eb0c5d6a4da288">FlaggedValuesArray32::AddFlag</a></div><div class="ttdeci">void AddFlag(FLAG_TYPE flag)</div><div class="ttdef"><b>Definition:</b> Object.h:368</div></div>
<div class="ttc" id="aa08166_html_a3a674b2a7b8d5874f7210372b3e92123"><div class="ttname"><a href="../../dc/d06/a08166.html#a3a674b2a7b8d5874f7210372b3e92123">FlaggedValuesArray32::DelFlag</a></div><div class="ttdeci">void DelFlag(FLAG_TYPE flag)</div><div class="ttdef"><b>Definition:</b> Object.h:369</div></div>
<div class="ttc" id="aa08166_html_aacca1261b2a22525e5fd40e5f479aa06"><div class="ttname"><a href="../../dc/d06/a08166.html#aacca1261b2a22525e5fd40e5f479aa06">FlaggedValuesArray32::AddValue</a></div><div class="ttdeci">void AddValue(FLAG_TYPE flag, T_VALUES value)</div><div class="ttdef"><b>Definition:</b> Object.h:373</div></div>
<div class="ttc" id="aa08174_html_a41d85385408958edcecb5883dd89c3d9"><div class="ttname"><a href="../../d3/d4c/a08174.html#a41d85385408958edcecb5883dd89c3d9">WorldObject::m_invisibility</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, InvisibilityType, TOTAL_INVISIBILITY_TYPES &gt; m_invisibility</div><div class="ttdef"><b>Definition:</b> Object.h:520</div></div>
<div class="ttc" id="aa08190_html_a676c61adb79a8be696a771a116253ee1"><div class="ttname"><a href="../../db/d40/a08190.html#a676c61adb79a8be696a771a116253ee1">ObjectGuid::IsPlayer</a></div><div class="ttdeci">bool IsPlayer() const</div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:168</div></div>
<div class="ttc" id="aa08518_html_a76e5156ec045582923f6d1541b66367b"><div class="ttname"><a href="../../db/df9/a08518.html#a76e5156ec045582923f6d1541b66367b">Unit::bRequestForcedVisibilityUpdate</a></div><div class="ttdeci">bool bRequestForcedVisibilityUpdate</div><div class="ttdef"><b>Definition:</b> Unit.h:1933</div></div>
<div class="ttc" id="aa08518_html_ac0f51b4cac0b9ad35347a50a91826785"><div class="ttname"><a href="../../db/df9/a08518.html#ac0f51b4cac0b9ad35347a50a91826785">Unit::GetOwnerGUID</a></div><div class="ttdeci">ObjectGuid GetOwnerGUID() const</div><div class="ttdef"><b>Definition:</b> Unit.h:678</div></div>
<div class="ttc" id="aa09538_html_aae3a929aefb05046ef304ffba10aae71"><div class="ttname"><a href="../../d7/dc0/a09538.html#aae3a929aefb05046ef304ffba10aae71">Map::Instanceable</a></div><div class="ttdeci">bool Instanceable() const</div><div class="ttdef"><b>Definition:</b> Map.h:445</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00368">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddFlag()</a>, <a class="el" href="../../#l00373">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddValue()</a>, <a class="el" href="../../#l00050">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00063">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../#l01933">Unit::bRequestForcedVisibilityUpdate</a>, <a class="el" href="../../#l00369">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::DelFlag()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l01349">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../#l00531">WorldObject::GetMap()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00678">Unit::GetOwnerGUID()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00367">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::HasFlag()</a>, <a class="el" href="../../#l00445">Map::Instanceable()</a>, <a class="el" href="../../#l01255">INVISIBILITY_GENERAL</a>, <a class="el" href="../../#l01265">INVISIBILITY_UNK10</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00168">ObjectGuid::IsPlayer()</a>, <a class="el" href="../../#l00520">WorldObject::m_invisibility</a>, <a class="el" href="../../#l00569">PLAYER_FIELD_BYTE2_INVISIBILITY_GLOW</a>, <a class="el" href="../../#l00378">PLAYER_FIELD_BYTES2</a>, <a class="el" href="../../#l00546">PLAYER_FIELD_BYTES_2_OFFSET_AURA_VISION</a>, <a class="el" href="../../#l05181">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../#l00930">Object::RemoveByteFlag()</a>, <a class="el" href="../../#l00911">Object::SetByteFlag()</a>, <a class="el" href="../../#l00081">SPELL_AURA_MOD_INVISIBILITY</a>, and <a class="el" href="../../#l19126">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="a4fff389a772b3a1800829b007fd09ad7" name="a4fff389a772b3a1800829b007fd09ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fff389a772b3a1800829b007fd09ad7">&#9670;&#160;</a></span>HandleModInvisibilityDetect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModInvisibilityDetect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1525</span>{</div>
<div class="line"><span class="lineno"> 1526</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 1527</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1528</span> </div>
<div class="line"><span class="lineno"> 1529</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1530</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a5f791d790b588bcbafa8a2f34be5c4a0">InvisibilityType</a> type = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a5f791d790b588bcbafa8a2f34be5c4a0">InvisibilityType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 1531</span> </div>
<div class="line"><span class="lineno"> 1532</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1533</span>    {</div>
<div class="line"><span class="lineno"> 1534</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#a273ab3607b23881628eb0c5d6a4da288">AddFlag</a>(type);</div>
<div class="line"><span class="lineno"> 1535</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(type, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 1536</span>    }</div>
<div class="line"><span class="lineno"> 1537</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1538</span>    {</div>
<div class="line"><span class="lineno"> 1539</span>        <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ac0dfa842319d63f7923d74c30ef38dfb">SPELL_AURA_MOD_INVISIBILITY_DETECT</a>))</div>
<div class="line"><span class="lineno"> 1540</span>            target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#a3a674b2a7b8d5874f7210372b3e92123">DelFlag</a>(type);</div>
<div class="line"><span class="lineno"> 1541</span> </div>
<div class="line"><span class="lineno"> 1542</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#a535383de383eb9b9b20d988bdcbb3291">m_invisibilityDetect</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(type, -<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 1543</span>    }</div>
<div class="line"><span class="lineno"> 1544</span> </div>
<div class="line"><span class="lineno"> 1545</span>    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><span class="lineno"> 1546</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>().<a class="code hl_function" href="../../db/d40/a08190.html#a676c61adb79a8be696a771a116253ee1">IsPlayer</a>());</div>
<div class="line"><span class="lineno"> 1547</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ac0dfa842319d63f7923d74c30ef38dfb"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ac0dfa842319d63f7923d74c30ef38dfb">SPELL_AURA_MOD_INVISIBILITY_DETECT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_INVISIBILITY_DETECT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:82</div></div>
<div class="ttc" id="aa08174_html_a535383de383eb9b9b20d988bdcbb3291"><div class="ttname"><a href="../../d3/d4c/a08174.html#a535383de383eb9b9b20d988bdcbb3291">WorldObject::m_invisibilityDetect</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, InvisibilityType, TOTAL_INVISIBILITY_TYPES &gt; m_invisibilityDetect</div><div class="ttdef"><b>Definition:</b> Object.h:521</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00368">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddFlag()</a>, <a class="el" href="../../#l00373">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddValue()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00369">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::DelFlag()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00678">Unit::GetOwnerGUID()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00168">ObjectGuid::IsPlayer()</a>, <a class="el" href="../../#l00521">WorldObject::m_invisibilityDetect</a>, <a class="el" href="../../#l00082">SPELL_AURA_MOD_INVISIBILITY_DETECT</a>, and <a class="el" href="../../#l19126">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="accc046bd1b9adb7c8b60be792f70e814" name="accc046bd1b9adb7c8b60be792f70e814"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accc046bd1b9adb7c8b60be792f70e814">&#9670;&#160;</a></span>HandleModManaRegen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModManaRegen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4672</span>{</div>
<div class="line"><span class="lineno"> 4673</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4674</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4675</span> </div>
<div class="line"><span class="lineno"> 4676</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4677</span> </div>
<div class="line"><span class="lineno"> 4678</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4679</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4680</span> </div>
<div class="line"><span class="lineno"> 4681</span>    <span class="comment">//Note: an increase in regen does NOT cause threat.</span></div>
<div class="line"><span class="lineno"> 4682</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a54f5e92a4fbfcf953339440c2a827394">UpdateManaRegen</a>();</div>
<div class="line"><span class="lineno"> 4683</span>}</div>
<div class="ttc" id="aa08386_html_a54f5e92a4fbfcf953339440c2a827394"><div class="ttname"><a href="../../d0/dc6/a08386.html#a54f5e92a4fbfcf953339440c2a827394">Player::UpdateManaRegen</a></div><div class="ttdeci">void UpdateManaRegen()</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:924</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00924">Player::UpdateManaRegen()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04853">HandleAuraModRegenInterrupt()</a>.</p>

</div>
</div>
<a id="ae5aa79360f973fbe4026586ef2eeda03" name="ae5aa79360f973fbe4026586ef2eeda03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5aa79360f973fbe4026586ef2eeda03">&#9670;&#160;</a></span>HandleModMechanicImmunity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModMechanicImmunity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4123</span>{</div>
<div class="line"><span class="lineno"> 4124</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 4125</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4126</span> </div>
<div class="line"><span class="lineno"> 4127</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4128</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> mechanic = 0;</div>
<div class="line"><span class="lineno"> 4129</span> </div>
<div class="line"><span class="lineno"> 4130</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno"> 4131</span>    {</div>
<div class="line"><span class="lineno"> 4132</span>        <span class="keywordflow">case</span> 46924: <span class="comment">// BladeStorm</span></div>
<div class="line"><span class="lineno"> 4133</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, apply);</div>
<div class="line"><span class="lineno"> 4134</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4135</span>        <span class="keywordflow">case</span> 34471: <span class="comment">// The Beast Within</span></div>
<div class="line"><span class="lineno"> 4136</span>        <span class="keywordflow">case</span> 19574: <span class="comment">// Bestial Wrath</span></div>
<div class="line"><span class="lineno"> 4137</span>        <span class="keywordflow">case</span> 38484: <span class="comment">// Bestial Wrath</span></div>
<div class="line"><span class="lineno"> 4138</span>        <span class="keywordflow">case</span> 40081: <span class="comment">// Free friend (Black Temple)</span></div>
<div class="line"><span class="lineno"> 4139</span>            mechanic = <a class="code hl_define" href="../../d0/dbd/a02771.html#aad347546e73152f50df1695839e39ca1">IMMUNE_TO_MOVEMENT_IMPAIRMENT_AND_LOSS_CONTROL_MASK</a>;</div>
<div class="line"><span class="lineno"> 4140</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, apply);</div>
<div class="line"><span class="lineno"> 4141</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, apply);</div>
<div class="line"><span class="lineno"> 4142</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, apply);</div>
<div class="line"><span class="lineno"> 4143</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, apply);</div>
<div class="line"><span class="lineno"> 4144</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, apply);</div>
<div class="line"><span class="lineno"> 4145</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, apply);</div>
<div class="line"><span class="lineno"> 4146</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, apply);</div>
<div class="line"><span class="lineno"> 4147</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, apply);</div>
<div class="line"><span class="lineno"> 4148</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5bd5524686a4163521296cb159b22363">MECHANIC_KNOCKOUT</a>, apply);</div>
<div class="line"><span class="lineno"> 4149</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, apply);</div>
<div class="line"><span class="lineno"> 4150</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a>, apply);</div>
<div class="line"><span class="lineno"> 4151</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad1d6dcbfe100975b5e19ea7037126fb2">MECHANIC_SHACKLE</a>, apply);</div>
<div class="line"><span class="lineno"> 4152</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, apply);</div>
<div class="line"><span class="lineno"> 4153</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, apply);</div>
<div class="line"><span class="lineno"> 4154</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adab01f0d1cee33a302eff7530e77385ee2">MECHANIC_DAZE</a>, apply);</div>
<div class="line"><span class="lineno"> 4155</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, apply);</div>
<div class="line"><span class="lineno"> 4156</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4157</span>        <span class="keywordflow">case</span> 42292: <span class="comment">// PvP trinket</span></div>
<div class="line"><span class="lineno"> 4158</span>        <span class="keywordflow">case</span> 59752: <span class="comment">// Every Man for Himself</span></div>
<div class="line"><span class="lineno"> 4159</span>        <span class="keywordflow">case</span> 65547: <span class="comment">// PvP trinket for Faction Champions (ToC 25)</span></div>
<div class="line"><span class="lineno"> 4160</span>        <span class="keywordflow">case</span> 53490: <span class="comment">// Bullheaded</span></div>
<div class="line"><span class="lineno"> 4161</span>        <span class="keywordflow">case</span> 46227: <span class="comment">// Medalion of Immunity</span></div>
<div class="line"><span class="lineno"> 4162</span>            mechanic = <a class="code hl_define" href="../../d0/dbd/a02771.html#aad347546e73152f50df1695839e39ca1">IMMUNE_TO_MOVEMENT_IMPAIRMENT_AND_LOSS_CONTROL_MASK</a>;</div>
<div class="line"><span class="lineno"> 4163</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a4b2bdc3e98a82e8735a5d6b052e53029">SPELL_AURA_PREVENTS_FLEEING</a>); <span class="comment">// xinef: Patch 2.3.0 PvP Trinkets: Insignia of the Alliance, Insignia of the Horde, Medallion of the Alliance, and Medallion of the Horde now clear the debuff from Judgement of Justice.</span></div>
<div class="line"><span class="lineno"> 4164</span>            <span class="comment">// Actually we should apply immunities here, too, but the aura has only 100 ms duration, so there is practically no point</span></div>
<div class="line"><span class="lineno"> 4165</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4166</span>        <span class="keywordflow">case</span> 54508: <span class="comment">// Demonic Empowerment</span></div>
<div class="line"><span class="lineno"> 4167</span>            mechanic = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>);</div>
<div class="line"><span class="lineno"> 4168</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><span class="lineno"> 4169</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4170</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4171</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4172</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4173</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 4174</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &lt; 1)</div>
<div class="line"><span class="lineno"> 4175</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4176</span>            mechanic = 1 &lt;&lt; <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><span class="lineno"> 4177</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>(), apply);</div>
<div class="line"><span class="lineno"> 4178</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4179</span>    }</div>
<div class="line"><span class="lineno"> 4180</span> </div>
<div class="line"><span class="lineno"> 4181</span>    <span class="keywordflow">if</span> (apply &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>))</div>
<div class="line"><span class="lineno"> 4182</span>    {</div>
<div class="line"><span class="lineno"> 4183</span>        <span class="comment">// Xinef: exception for purely snare mechanic (eg. hands of freedom)!</span></div>
<div class="line"><span class="lineno"> 4184</span>        <span class="keywordflow">if</span> (mechanic == (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>))</div>
<div class="line"><span class="lineno"> 4185</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#add77c4101065571410ecb5c2867feff5">RemoveMovementImpairingAuras</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 4186</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4187</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1914cb06489a11617ad9f8c9e343876b">RemoveAurasWithMechanic</a>(mechanic, <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 4188</span>    }</div>
<div class="line"><span class="lineno"> 4189</span>}</div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a></div><div class="ttdeci">@ MECHANIC_FEAR</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1330</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a></div><div class="ttdeci">@ MECHANIC_DISORIENTED</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1327</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7ada5bd5524686a4163521296cb159b22363"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5bd5524686a4163521296cb159b22363">MECHANIC_KNOCKOUT</a></div><div class="ttdeci">@ MECHANIC_KNOCKOUT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1339</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a></div><div class="ttdeci">@ MECHANIC_CHARM</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1326</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a></div><div class="ttdeci">@ MECHANIC_TURN</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1348</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a></div><div class="ttdeci">@ MECHANIC_STUN</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1337</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a></div><div class="ttdeci">@ MECHANIC_FREEZE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1338</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a></div><div class="ttdeci">@ MECHANIC_ROOT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1332</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a></div><div class="ttdeci">@ MECHANIC_SLEEP</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1335</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7adab01f0d1cee33a302eff7530e77385ee2"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adab01f0d1cee33a302eff7530e77385ee2">MECHANIC_DAZE</a></div><div class="ttdeci">@ MECHANIC_DAZE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1352</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a></div><div class="ttdeci">@ MECHANIC_SNARE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1336</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7adad1d6dcbfe100975b5e19ea7037126fb2"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad1d6dcbfe100975b5e19ea7037126fb2">MECHANIC_SHACKLE</a></div><div class="ttdeci">@ MECHANIC_SHACKLE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1345</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a></div><div class="ttdeci">@ MECHANIC_SAPPED</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1355</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a></div><div class="ttdeci">@ MECHANIC_HORROR</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1349</div></div>
<div class="ttc" id="aa02771_html_aad347546e73152f50df1695839e39ca1"><div class="ttname"><a href="../../d0/dbd/a02771.html#aad347546e73152f50df1695839e39ca1">IMMUNE_TO_MOVEMENT_IMPAIRMENT_AND_LOSS_CONTROL_MASK</a></div><div class="ttdeci">#define IMMUNE_TO_MOVEMENT_IMPAIRMENT_AND_LOSS_CONTROL_MASK</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1361</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a4b2bdc3e98a82e8735a5d6b052e53029"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a4b2bdc3e98a82e8735a5d6b052e53029">SPELL_AURA_PREVENTS_FLEEING</a></div><div class="ttdeci">@ SPELL_AURA_PREVENTS_FLEEING</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:155</div></div>
<div class="ttc" id="aa03092_html_a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c"><div class="ttname"><a href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a></div><div class="ttdeci">@ AURA_REMOVE_BY_DEFAULT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:392</div></div>
<div class="ttc" id="aa08518_html_a1914cb06489a11617ad9f8c9e343876b"><div class="ttname"><a href="../../db/df9/a08518.html#a1914cb06489a11617ad9f8c9e343876b">Unit::RemoveAurasWithMechanic</a></div><div class="ttdeci">void RemoveAurasWithMechanic(uint32 mechanic_mask, AuraRemoveMode removemode=AURA_REMOVE_BY_DEFAULT, uint32 except=0)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5253</div></div>
<div class="ttc" id="aa08518_html_add77c4101065571410ecb5c2867feff5"><div class="ttname"><a href="../../db/df9/a08518.html#add77c4101065571410ecb5c2867feff5">Unit::RemoveMovementImpairingAuras</a></div><div class="ttdeci">void RemoveMovementImpairingAuras(bool withRoot)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5234</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l13384">Unit::ApplySpellImmune()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00392">AURA_REMOVE_BY_DEFAULT</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01361">IMMUNE_TO_MOVEMENT_IMPAIRMENT_AND_LOSS_CONTROL_MASK</a>, <a class="el" href="../../#l01399">IMMUNITY_MECHANIC</a>, <a class="el" href="../../#l01343">MECHANIC_BANISH</a>, <a class="el" href="../../#l01326">MECHANIC_CHARM</a>, <a class="el" href="../../#l01352">MECHANIC_DAZE</a>, <a class="el" href="../../#l01327">MECHANIC_DISORIENTED</a>, <a class="el" href="../../#l01330">MECHANIC_FEAR</a>, <a class="el" href="../../#l01338">MECHANIC_FREEZE</a>, <a class="el" href="../../#l01349">MECHANIC_HORROR</a>, <a class="el" href="../../#l01339">MECHANIC_KNOCKOUT</a>, <a class="el" href="../../#l01342">MECHANIC_POLYMORPH</a>, <a class="el" href="../../#l01332">MECHANIC_ROOT</a>, <a class="el" href="../../#l01355">MECHANIC_SAPPED</a>, <a class="el" href="../../#l01345">MECHANIC_SHACKLE</a>, <a class="el" href="../../#l01335">MECHANIC_SLEEP</a>, <a class="el" href="../../#l01336">MECHANIC_SNARE</a>, <a class="el" href="../../#l01337">MECHANIC_STUN</a>, <a class="el" href="../../#l01348">MECHANIC_TURN</a>, <a class="el" href="../../#l05110">Unit::RemoveAurasByType()</a>, <a class="el" href="../../#l05253">Unit::RemoveAurasWithMechanic()</a>, <a class="el" href="../../#l05234">Unit::RemoveMovementImpairingAuras()</a>, <a class="el" href="../../#l00434">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>, <a class="el" href="../../#l00075">SPELL_AURA_MOD_STUN</a>, and <a class="el" href="../../#l00155">SPELL_AURA_PREVENTS_FLEEING</a>.</p>

</div>
</div>
<a id="a90f9b0656c55d016c70c02936dd73c9b" name="a90f9b0656c55d016c70c02936dd73c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90f9b0656c55d016c70c02936dd73c9b">&#9670;&#160;</a></span>HandleModMeleeRangedSpeedPct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModMeleeRangedSpeedPct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4991</span>{</div>
<div class="line"><span class="lineno"> 4992</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4993</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4994</span> </div>
<div class="line"><span class="lineno"> 4995</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4996</span> </div>
<div class="line"><span class="lineno"> 4997</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, (<span class="keywordtype">float</span>)<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 4998</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>, (<span class="keywordtype">float</span>)<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 4999</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352aa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>, (<span class="keywordtype">float</span>)<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 5000</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l17050">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00210">OFF_ATTACK</a>, and <a class="el" href="../../#l00211">RANGED_ATTACK</a>.</p>

</div>
</div>
<a id="a45f86518a11aae0590304353a73b8d40" name="a45f86518a11aae0590304353a73b8d40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45f86518a11aae0590304353a73b8d40">&#9670;&#160;</a></span>HandleModMeleeSpeedPct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModMeleeSpeedPct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5027</span>{</div>
<div class="line"><span class="lineno"> 5028</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5029</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5030</span> </div>
<div class="line"><span class="lineno"> 5031</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5032</span> </div>
<div class="line"><span class="lineno"> 5033</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5034</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a052681ec165e5b5e3edcf2089607ae67">OFF_ATTACK</a>,  <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5035</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l17050">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, and <a class="el" href="../../#l00210">OFF_ATTACK</a>.</p>

</div>
</div>
<a id="a8d79983093faf3f9c63c9f1cc65b0155" name="a8d79983093faf3f9c63c9f1cc65b0155"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d79983093faf3f9c63c9f1cc65b0155">&#9670;&#160;</a></span>HandleModOffhandDamagePercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModOffhandDamagePercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5298</span>{</div>
<div class="line"><span class="lineno"> 5299</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5300</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5301</span> </div>
<div class="line"><span class="lineno"> 5302</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5303</span> </div>
<div class="line"><span class="lineno"> 5304</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea036e8ca8fe78e5addf8e68a79732b742">UNIT_MOD_DAMAGE_OFFHAND</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5305</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00129">TOTAL_PCT</a>, and <a class="el" href="../../#l00166">UNIT_MOD_DAMAGE_OFFHAND</a>.</p>

</div>
</div>
<a id="a844dcfe2b6e78cc40b8b9996672b4f07" name="a844dcfe2b6e78cc40b8b9996672b4f07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a844dcfe2b6e78cc40b8b9996672b4f07">&#9670;&#160;</a></span>HandleModPercentStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPercentStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4455</span>{</div>
<div class="line"><span class="lineno"> 4456</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4457</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4458</span> </div>
<div class="line"><span class="lineno"> 4459</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4460</span> </div>
<div class="line"><span class="lineno"> 4461</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &lt; -1 || <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &gt; 4)</div>
<div class="line"><span class="lineno"> 4462</span>    {</div>
<div class="line"><span class="lineno"> 4463</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;WARNING: Misc Value for SPELL_AURA_MOD_PERCENT_STAT not valid&quot;</span>);</div>
<div class="line"><span class="lineno"> 4464</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4465</span>    }</div>
<div class="line"><span class="lineno"> 4466</span> </div>
<div class="line"><span class="lineno"> 4467</span>    <span class="comment">// only players currently use base stats</span></div>
<div class="line"><span class="lineno"> 4468</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4469</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4470</span> </div>
<div class="line"><span class="lineno"> 4471</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> i = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code hl_define" href="../../d0/dbd/a02771.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; ++i)</div>
<div class="line"><span class="lineno"> 4472</span>    {</div>
<div class="line"><span class="lineno"> 4473</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == i || <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == -1)</div>
<div class="line"><span class="lineno"> 4474</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0">UNIT_MOD_STAT_START</a> + i), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeabb35437d15ab9bfc3b7dbf7bac7c0dee">BASE_PCT</a>, <span class="keywordtype">float</span>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>), apply);</div>
<div class="line"><span class="lineno"> 4475</span>    }</div>
<div class="line"><span class="lineno"> 4476</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00127">BASE_PCT</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00157">LOG_ERROR</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l00265">MAX_STATS</a>, <a class="el" href="../../#l00258">STAT_STRENGTH</a>, and <a class="el" href="../../#l00170">UNIT_MOD_STAT_START</a>.</p>

</div>
</div>
<a id="affc17fba71418fb11e2cffbb0b1710b6" name="affc17fba71418fb11e2cffbb0b1710b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affc17fba71418fb11e2cffbb0b1710b6">&#9670;&#160;</a></span>HandleModPossess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPossess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3541</span>{</div>
<div class="line"><span class="lineno"> 3542</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3543</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3544</span> </div>
<div class="line"><span class="lineno"> 3545</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3546</span> </div>
<div class="line"><span class="lineno"> 3547</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 3548</span> </div>
<div class="line"><span class="lineno"> 3549</span>    <span class="comment">// no support for posession AI yet</span></div>
<div class="line"><span class="lineno"> 3550</span>    <span class="keywordflow">if</span> (caster &amp;&amp; caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aacc8ee332f66effdc0d77c126dae1961">IsCreature</a>())</div>
<div class="line"><span class="lineno"> 3551</span>    {</div>
<div class="line"><span class="lineno"> 3552</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#ac3da622f21fc4e175e6948db55b60511">HandleModCharm</a>(aurApp, mode, apply);</div>
<div class="line"><span class="lineno"> 3553</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3554</span>    }</div>
<div class="line"><span class="lineno"> 3555</span> </div>
<div class="line"><span class="lineno"> 3556</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3557</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad02c1207bd4ccb5df03df1d4eec80293">SetCharmedBy</a>(caster, <a class="code hl_enumvalue" href="../../dd/daf/a03503.html#a8a31720d588fad9fce4a74dabc39df8ba2a5727b1c99073b12be5d2e5413cc9eb">CHARM_TYPE_POSSESS</a>, aurApp);</div>
<div class="line"><span class="lineno"> 3558</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3559</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa897a679d63c8d6272d4bc85395a708f">RemoveCharmedBy</a>(caster);</div>
<div class="line"><span class="lineno"> 3560</span>}</div>
<div class="ttc" id="aa03503_html_a8a31720d588fad9fce4a74dabc39df8ba2a5727b1c99073b12be5d2e5413cc9eb"><div class="ttname"><a href="../../dd/daf/a03503.html#a8a31720d588fad9fce4a74dabc39df8ba2a5727b1c99073b12be5d2e5413cc9eb">CHARM_TYPE_POSSESS</a></div><div class="ttdeci">@ CHARM_TYPE_POSSESS</div><div class="ttdef"><b>Definition:</b> CharmInfo.h:46</div></div>
<div class="ttc" id="aa10782_html_ac3da622f21fc4e175e6948db55b60511"><div class="ttname"><a href="../../d6/d2f/a10782.html#ac3da622f21fc4e175e6948db55b60511">AuraEffect::HandleModCharm</a></div><div class="ttdeci">void HandleModCharm(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:3615</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00046">CHARM_TYPE_POSSESS</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l03615">HandleModCharm()</a>, <a class="el" href="../../#l00201">Object::IsCreature()</a>, <a class="el" href="../../#l18548">Unit::RemoveCharmedBy()</a>, and <a class="el" href="../../#l18346">Unit::SetCharmedBy()</a>.</p>

</div>
</div>
<a id="a3ae2a8ce1a85f6a846a39a08566c7567" name="a3ae2a8ce1a85f6a846a39a08566c7567"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ae2a8ce1a85f6a846a39a08566c7567">&#9670;&#160;</a></span>HandleModPossessPet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPossessPet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3563</span>{</div>
<div class="line"><span class="lineno"> 3564</span>    <span class="comment">// Used by spell &quot;Eyes of the Beast&quot;</span></div>
<div class="line"><span class="lineno"> 3565</span> </div>
<div class="line"><span class="lineno"> 3566</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3567</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3568</span> </div>
<div class="line"><span class="lineno"> 3569</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 3570</span>    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 3571</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3572</span> </div>
<div class="line"><span class="lineno"> 3573</span>    <span class="comment">//seems it may happen that when removing it is no longer owner&#39;s pet</span></div>
<div class="line"><span class="lineno"> 3574</span>    <span class="comment">//if (caster-&gt;ToPlayer()-&gt;GetPet() != target)</span></div>
<div class="line"><span class="lineno"> 3575</span>    <span class="comment">//    return;</span></div>
<div class="line"><span class="lineno"> 3576</span> </div>
<div class="line"><span class="lineno"> 3577</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3578</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aacc8ee332f66effdc0d77c126dae1961">IsCreature</a>() || !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>())</div>
<div class="line"><span class="lineno"> 3579</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3580</span> </div>
<div class="line"><span class="lineno"> 3581</span>    <a class="code hl_class" href="../../d0/d0b/a08254.html">Pet</a>* pet = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a16c186b19f846fbce1252427943caefc">ToPet</a>();</div>
<div class="line"><span class="lineno"> 3582</span> </div>
<div class="line"><span class="lineno"> 3583</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3584</span>    {</div>
<div class="line"><span class="lineno"> 3585</span>        <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a5eef7fef24e4a9269d1ee834bc2bd501">GetPet</a>() != pet)</div>
<div class="line"><span class="lineno"> 3586</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3587</span> </div>
<div class="line"><span class="lineno"> 3588</span>        <span class="comment">// Must clear current motion or pet leashes back to owner after a few yards</span></div>
<div class="line"><span class="lineno"> 3589</span>        <span class="comment">//  when under spell &#39;Eyes of the Beast&#39;</span></div>
<div class="line"><span class="lineno"> 3590</span>        pet-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../d8/db5/a09662.html#afa6ffa9c5d6897f3aad3ac524c7bb35a">Clear</a>();</div>
<div class="line"><span class="lineno"> 3591</span>        pet-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad02c1207bd4ccb5df03df1d4eec80293">SetCharmedBy</a>(caster, <a class="code hl_enumvalue" href="../../dd/daf/a03503.html#a8a31720d588fad9fce4a74dabc39df8ba2a5727b1c99073b12be5d2e5413cc9eb">CHARM_TYPE_POSSESS</a>, aurApp);</div>
<div class="line"><span class="lineno"> 3592</span>    }</div>
<div class="line"><span class="lineno"> 3593</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3594</span>    {</div>
<div class="line"><span class="lineno"> 3595</span>        pet-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa897a679d63c8d6272d4bc85395a708f">RemoveCharmedBy</a>(caster);</div>
<div class="line"><span class="lineno"> 3596</span> </div>
<div class="line"><span class="lineno"> 3597</span>        <span class="keywordflow">if</span> (!pet-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#ab73407bcdf13a30519a953d24773ed02">IsWithinDistInMap</a>(caster, pet-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a1013c27be4347a1b1a4a986a07456deb">GetMap</a>()-&gt;<a class="code hl_function" href="../../d7/dc0/a09538.html#ac309ee57ae1a2058047c749d85d9bc95">GetVisibilityRange</a>()))</div>
<div class="line"><span class="lineno"> 3598</span>            pet-&gt;<a class="code hl_function" href="../../d0/d0b/a08254.html#aad26ada9ab82a5ec5a327976f4f51167">Remove</a>(<a class="code hl_enumvalue" href="../../d0/de9/a03530.html#a6950071a5ecec4c8754d5fbb9908bc31ae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 3599</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3600</span>        {</div>
<div class="line"><span class="lineno"> 3601</span>            <span class="comment">// Reinitialize the pet bar or it will appear greyed out</span></div>
<div class="line"><span class="lineno"> 3602</span>            caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a4f64d53f6bc67d1aeafbb575054fa35b">PetSpellInitialize</a>();</div>
<div class="line"><span class="lineno"> 3603</span> </div>
<div class="line"><span class="lineno"> 3604</span>            <span class="comment">// Follow owner only if not fighting or owner didn&#39;t click &quot;stay&quot; at new location</span></div>
<div class="line"><span class="lineno"> 3605</span>            <span class="comment">// This may be confusing because pet bar shows &quot;stay&quot; when under the spell but it retains</span></div>
<div class="line"><span class="lineno"> 3606</span>            <span class="comment">//  the &quot;follow&quot; flag. Player MUST click &quot;stay&quot; while under the spell.</span></div>
<div class="line"><span class="lineno"> 3607</span>            <span class="keywordflow">if</span> (!pet-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() &amp;&amp; !pet-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../df/dc7/a08450.html#ab817266875b889133f8297d31c0f911e">HasCommandState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#af147d8054b617fd731305de8a69bd257ab33055c9492afc567e3a602f88347ca5">COMMAND_STAY</a>))</div>
<div class="line"><span class="lineno"> 3608</span>            {</div>
<div class="line"><span class="lineno"> 3609</span>                pet-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../d8/db5/a09662.html#a46ca73c3acc43c9f0aaef6e847eb79fa">MoveFollow</a>(caster, <a class="code hl_define" href="../../d0/de9/a03530.html#a83e96c6d024ceb5d1189baac7b823d5d">PET_FOLLOW_DIST</a>, pet-&gt;<a class="code hl_function" href="../../d0/d9f/a07902.html#a6b4a4409bd7a8ff455bb13f8c4e5560a">GetFollowAngle</a>());</div>
<div class="line"><span class="lineno"> 3610</span>            }</div>
<div class="line"><span class="lineno"> 3611</span>        }</div>
<div class="line"><span class="lineno"> 3612</span>    }</div>
<div class="line"><span class="lineno"> 3613</span>}</div>
<div class="ttc" id="aa03515_html_af147d8054b617fd731305de8a69bd257ab33055c9492afc567e3a602f88347ca5"><div class="ttname"><a href="../../de/d3d/a03515.html#af147d8054b617fd731305de8a69bd257ab33055c9492afc567e3a602f88347ca5">COMMAND_STAY</a></div><div class="ttdeci">@ COMMAND_STAY</div><div class="ttdef"><b>Definition:</b> Unit.h:555</div></div>
<div class="ttc" id="aa03530_html_a6950071a5ecec4c8754d5fbb9908bc31ae55abbb64855962852c91fb8638ad6cd"><div class="ttname"><a href="../../d0/de9/a03530.html#a6950071a5ecec4c8754d5fbb9908bc31ae55abbb64855962852c91fb8638ad6cd">PET_SAVE_NOT_IN_SLOT</a></div><div class="ttdeci">@ PET_SAVE_NOT_IN_SLOT</div><div class="ttdef"><b>Definition:</b> PetDefines.h:45</div></div>
<div class="ttc" id="aa03530_html_a83e96c6d024ceb5d1189baac7b823d5d"><div class="ttname"><a href="../../d0/de9/a03530.html#a83e96c6d024ceb5d1189baac7b823d5d">PET_FOLLOW_DIST</a></div><div class="ttdeci">#define PET_FOLLOW_DIST</div><div class="ttdef"><b>Definition:</b> PetDefines.h:198</div></div>
<div class="ttc" id="aa07902_html_a6b4a4409bd7a8ff455bb13f8c4e5560a"><div class="ttname"><a href="../../d0/d9f/a07902.html#a6b4a4409bd7a8ff455bb13f8c4e5560a">Minion::GetFollowAngle</a></div><div class="ttdeci">float GetFollowAngle() const override</div><div class="ttdef"><b>Definition:</b> TemporarySummon.h:82</div></div>
<div class="ttc" id="aa08174_html_ab73407bcdf13a30519a953d24773ed02"><div class="ttname"><a href="../../d3/d4c/a08174.html#ab73407bcdf13a30519a953d24773ed02">WorldObject::IsWithinDistInMap</a></div><div class="ttdeci">bool IsWithinDistInMap(WorldObject const *obj, float dist2compare, bool is3D=true, bool useBoundingRadius=true) const</div><div class="ttdef"><b>Definition:</b> Object.cpp:1321</div></div>
<div class="ttc" id="aa08254_html_aad26ada9ab82a5ec5a327976f4f51167"><div class="ttname"><a href="../../d0/d0b/a08254.html#aad26ada9ab82a5ec5a327976f4f51167">Pet::Remove</a></div><div class="ttdeci">void Remove(PetSaveMode mode, bool returnreagent=false)</div><div class="ttdef"><b>Definition:</b> Pet.cpp:884</div></div>
<div class="ttc" id="aa08386_html_a4f64d53f6bc67d1aeafbb575054fa35b"><div class="ttname"><a href="../../d0/dc6/a08386.html#a4f64d53f6bc67d1aeafbb575054fa35b">Player::PetSpellInitialize</a></div><div class="ttdeci">void PetSpellInitialize()</div><div class="ttdef"><b>Definition:</b> Player.cpp:9478</div></div>
<div class="ttc" id="aa08450_html_ab817266875b889133f8297d31c0f911e"><div class="ttname"><a href="../../df/dc7/a08450.html#ab817266875b889133f8297d31c0f911e">CharmInfo::HasCommandState</a></div><div class="ttdeci">bool HasCommandState(CommandStates state) const</div><div class="ttdef"><b>Definition:</b> CharmInfo.h:136</div></div>
<div class="ttc" id="aa08518_html_a16c186b19f846fbce1252427943caefc"><div class="ttname"><a href="../../db/df9/a08518.html#a16c186b19f846fbce1252427943caefc">Unit::ToPet</a></div><div class="ttdeci">Pet * ToPet()</div><div class="ttdef"><b>Definition:</b> Unit.h:694</div></div>
<div class="ttc" id="aa08518_html_a66f99d0d7cdf9c7013788fe6265a5c3b"><div class="ttname"><a href="../../db/df9/a08518.html#a66f99d0d7cdf9c7013788fe6265a5c3b">Unit::GetCharmInfo</a></div><div class="ttdeci">CharmInfo * GetCharmInfo()</div><div class="ttdef"><b>Definition:</b> Unit.h:1206</div></div>
<div class="ttc" id="aa08518_html_aae09d03a474ea5517d671e64dc393739"><div class="ttname"><a href="../../db/df9/a08518.html#aae09d03a474ea5517d671e64dc393739">Unit::GetVictim</a></div><div class="ttdeci">Unit * GetVictim() const</div><div class="ttdef"><b>Definition:</b> Unit.h:853</div></div>
<div class="ttc" id="aa09662_html_a46ca73c3acc43c9f0aaef6e847eb79fa"><div class="ttname"><a href="../../d8/db5/a09662.html#a46ca73c3acc43c9f0aaef6e847eb79fa">MotionMaster::MoveFollow</a></div><div class="ttdeci">void MoveFollow(Unit *target, float dist, float angle, MovementSlot slot=MOTION_SLOT_ACTIVE, bool inheritWalkState=true)</div><div class="ttdoc">The unit will follow this target. Doesn't work with UNIT_FLAG_DISABLE_MOVE.</div><div class="ttdef"><b>Definition:</b> MotionMaster.cpp:409</div></div>
<div class="ttc" id="aa09662_html_afa6ffa9c5d6897f3aad3ac524c7bb35a"><div class="ttname"><a href="../../d8/db5/a09662.html#afa6ffa9c5d6897f3aad3ac524c7bb35a">MotionMaster::Clear</a></div><div class="ttdeci">void Clear(bool reset=true)</div><div class="ttdef"><b>Definition:</b> MotionMaster.h:167</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00046">CHARM_TYPE_POSSESS</a>, <a class="el" href="../../#l00167">MotionMaster::Clear()</a>, <a class="el" href="../../#l00555">COMMAND_STAY</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l01206">Unit::GetCharmInfo()</a>, <a class="el" href="../../#l00082">Minion::GetFollowAngle()</a>, <a class="el" href="../../#l00531">WorldObject::GetMap()</a>, <a class="el" href="../../#l01622">Unit::GetMotionMaster()</a>, <a class="el" href="../../#l08916">Player::GetPet()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00853">Unit::GetVictim()</a>, <a class="el" href="../../#l00349">Map::GetVisibilityRange()</a>, <a class="el" href="../../#l00136">CharmInfo::HasCommandState()</a>, <a class="el" href="../../#l00201">Object::IsCreature()</a>, <a class="el" href="../../#l00754">Unit::IsPet()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l01321">WorldObject::IsWithinDistInMap()</a>, <a class="el" href="../../#l00409">MotionMaster::MoveFollow()</a>, <a class="el" href="../../#l00198">PET_FOLLOW_DIST</a>, <a class="el" href="../../#l00045">PET_SAVE_NOT_IN_SLOT</a>, <a class="el" href="../../#l09478">Player::PetSpellInitialize()</a>, <a class="el" href="../../#l00884">Pet::Remove()</a>, <a class="el" href="../../#l18548">Unit::RemoveCharmedBy()</a>, <a class="el" href="../../#l18346">Unit::SetCharmedBy()</a>, <a class="el" href="../../#l00694">Unit::ToPet()</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a69e8e0ce986f2ada7ccaf38bef2ecf97" name="a69e8e0ce986f2ada7ccaf38bef2ecf97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69e8e0ce986f2ada7ccaf38bef2ecf97">&#9670;&#160;</a></span>HandleModPowerCost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPowerCost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5340</span>{</div>
<div class="line"><span class="lineno"> 5341</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 5342</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5343</span> </div>
<div class="line"><span class="lineno"> 5344</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5345</span> </div>
<div class="line"><span class="lineno"> 5346</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; ++i)</div>
<div class="line"><span class="lineno"> 5347</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i))</div>
<div class="line"><span class="lineno"> 5348</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a1f16c4385c6f555e384b123886377fa1">UNIT_FIELD_POWER_COST_MODIFIER</a> + i, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 5349</span>}</div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a1f16c4385c6f555e384b123886377fa1"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a1f16c4385c6f555e384b123886377fa1">UNIT_FIELD_POWER_COST_MODIFIER</a></div><div class="ttdeci">@ UNIT_FIELD_POWER_COST_MODIFIER</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:170</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00815">Object::ApplyModInt32Value()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00292">MAX_SPELL_SCHOOL</a>, and <a class="el" href="../../#l00170">UNIT_FIELD_POWER_COST_MODIFIER</a>.</p>

</div>
</div>
<a id="a1a030d85dec5fb20b11ef19206f6694c" name="a1a030d85dec5fb20b11ef19206f6694c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a030d85dec5fb20b11ef19206f6694c">&#9670;&#160;</a></span>HandleModPowerCostPCT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPowerCostPCT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5327</span>{</div>
<div class="line"><span class="lineno"> 5328</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 5329</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5330</span> </div>
<div class="line"><span class="lineno"> 5331</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5332</span> </div>
<div class="line"><span class="lineno"> 5333</span>    <span class="keywordtype">float</span> amount = <a class="code hl_function" href="../../d4/d13/a00377.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(1.0f, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 5334</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; ++i)</div>
<div class="line"><span class="lineno"> 5335</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i))</div>
<div class="line"><span class="lineno"> 5336</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a00340fbc92fd28dfaa5e945a7f5e5a77">ApplyModSignedFloatValue</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881ae2928aeed1af182ed918045f3823ac38">UNIT_FIELD_POWER_COST_MULTIPLIER</a> + i, amount, apply);</div>
<div class="line"><span class="lineno"> 5337</span>}</div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881ae2928aeed1af182ed918045f3823ac38"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881ae2928aeed1af182ed918045f3823ac38">UNIT_FIELD_POWER_COST_MULTIPLIER</a></div><div class="ttdeci">@ UNIT_FIELD_POWER_COST_MULTIPLIER</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:171</div></div>
<div class="ttc" id="aa08142_html_a00340fbc92fd28dfaa5e945a7f5e5a77"><div class="ttname"><a href="../../df/d2d/a08142.html#a00340fbc92fd28dfaa5e945a7f5e5a77">Object::ApplyModSignedFloatValue</a></div><div class="ttdeci">void ApplyModSignedFloatValue(uint16 index, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> Object.cpp:822</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00822">Object::ApplyModSignedFloatValue()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00061">CalculatePct()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00292">MAX_SPELL_SCHOOL</a>, and <a class="el" href="../../#l00171">UNIT_FIELD_POWER_COST_MULTIPLIER</a>.</p>

</div>
</div>
<a id="a4f39fbf45d91d07a1835fb9b9e43f710" name="a4f39fbf45d91d07a1835fb9b9e43f710"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f39fbf45d91d07a1835fb9b9e43f710">&#9670;&#160;</a></span>HandleModPowerRegen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPowerRegen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4649</span>{</div>
<div class="line"><span class="lineno"> 4650</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4651</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4652</span> </div>
<div class="line"><span class="lineno"> 4653</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4654</span> </div>
<div class="line"><span class="lineno"> 4655</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4656</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4657</span> </div>
<div class="line"><span class="lineno"> 4658</span>    <span class="comment">// Update manaregen value</span></div>
<div class="line"><span class="lineno"> 4659</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>)</div>
<div class="line"><span class="lineno"> 4660</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a54f5e92a4fbfcf953339440c2a827394">UpdateManaRegen</a>();</div>
<div class="line"><span class="lineno"> 4661</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ad2662f90ffd864b9483e8265c2cc08df">POWER_RUNE</a>)</div>
<div class="line"><span class="lineno"> 4662</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a0fa7c719535ba8b27b8b055878e80fb2">UpdateRuneRegen</a>(<a class="code hl_enumeration" href="../../d7/d13/a03365.html#a2377260993cd4a14aaab6f5771385e11">RuneType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a88fa5605246883e095cd82ebd5d75bef">GetMiscValueB</a>()));</div>
<div class="line"><span class="lineno"> 4663</span>    <span class="comment">// other powers are not immediate effects - implemented in Player::Regenerate, Creature::Regenerate</span></div>
<div class="line"><span class="lineno"> 4664</span>}</div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414ad2662f90ffd864b9483e8265c2cc08df"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ad2662f90ffd864b9483e8265c2cc08df">POWER_RUNE</a></div><div class="ttdeci">@ POWER_RUNE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:274</div></div>
<div class="ttc" id="aa08386_html_a0fa7c719535ba8b27b8b055878e80fb2"><div class="ttname"><a href="../../d0/dc6/a08386.html#a0fa7c719535ba8b27b8b055878e80fb2">Player::UpdateRuneRegen</a></div><div class="ttdeci">void UpdateRuneRegen(RuneType rune)</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:958</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00437">GetMiscValueB()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00269">POWER_MANA</a>, <a class="el" href="../../#l00274">POWER_RUNE</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00924">Player::UpdateManaRegen()</a>, and <a class="el" href="../../#l00958">Player::UpdateRuneRegen()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l04666">HandleModPowerRegenPCT()</a>.</p>

</div>
</div>
<a id="af38cb2bbca5005a77d57930e8a9fbb21" name="af38cb2bbca5005a77d57930e8a9fbb21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af38cb2bbca5005a77d57930e8a9fbb21">&#9670;&#160;</a></span>HandleModPowerRegenPCT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModPowerRegenPCT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4667</span>{</div>
<div class="line"><span class="lineno"> 4668</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#a4f39fbf45d91d07a1835fb9b9e43f710">HandleModPowerRegen</a>(aurApp, mode, apply);</div>
<div class="line"><span class="lineno"> 4669</span>}</div>
<div class="ttc" id="aa10782_html_a4f39fbf45d91d07a1835fb9b9e43f710"><div class="ttname"><a href="../../d6/d2f/a10782.html#a4f39fbf45d91d07a1835fb9b9e43f710">AuraEffect::HandleModPowerRegen</a></div><div class="ttdeci">void HandleModPowerRegen(AuraApplication const *aurApp, uint8 mode, bool apply) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:4648</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l04648">HandleModPowerRegen()</a>.</p>

</div>
</div>
<a id="a5818f07310f7386ca2e2ce8a5fbb594b" name="a5818f07310f7386ca2e2ce8a5fbb594b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5818f07310f7386ca2e2ce8a5fbb594b">&#9670;&#160;</a></span>HandleModRating()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModRating </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5065</span>{</div>
<div class="line"><span class="lineno"> 5066</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5067</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5068</span> </div>
<div class="line"><span class="lineno"> 5069</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5070</span> </div>
<div class="line"><span class="lineno"> 5071</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5072</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5073</span> </div>
<div class="line"><span class="lineno"> 5074</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> rating = 0; rating &lt; <a class="code hl_define" href="../../de/d3d/a03515.html#a89a822f82e3d3eafe03f7ae0d1310300">MAX_COMBAT_RATING</a>; ++rating)</div>
<div class="line"><span class="lineno"> 5075</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; rating))</div>
<div class="line"><span class="lineno"> 5076</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a2843d3ed237aba682ef70f8e32bd9576">ApplyRatingMod</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#aa60e4ef21982cf41b489e5242f01b64f">CombatRating</a>(rating), <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 5077</span>}</div>
<div class="ttc" id="aa03515_html_a89a822f82e3d3eafe03f7ae0d1310300"><div class="ttname"><a href="../../de/d3d/a03515.html#a89a822f82e3d3eafe03f7ae0d1310300">MAX_COMBAT_RATING</a></div><div class="ttdeci">#define MAX_COMBAT_RATING</div><div class="ttdef"><b>Definition:</b> Unit.h:244</div></div>
<div class="ttc" id="aa03515_html_aa60e4ef21982cf41b489e5242f01b64f"><div class="ttname"><a href="../../de/d3d/a03515.html#aa60e4ef21982cf41b489e5242f01b64f">CombatRating</a></div><div class="ttdeci">CombatRating</div><div class="ttdef"><b>Definition:</b> Unit.h:216</div></div>
<div class="ttc" id="aa08386_html_a2843d3ed237aba682ef70f8e32bd9576"><div class="ttname"><a href="../../d0/dc6/a08386.html#a2843d3ed237aba682ef70f8e32bd9576">Player::ApplyRatingMod</a></div><div class="ttdeci">void ApplyRatingMod(CombatRating cr, int32 value, bool apply)</div><div class="ttdef"><b>Definition:</b> Player.cpp:5254</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l05254">Player::ApplyRatingMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00244">MAX_COMBAT_RATING</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a0b0a7eb3419f1ef986ae136c9248e173" name="a0b0a7eb3419f1ef986ae136c9248e173"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b0a7eb3419f1ef986ae136c9248e173">&#9670;&#160;</a></span>HandleModRatingFromStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModRatingFromStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5080</span>{</div>
<div class="line"><span class="lineno"> 5081</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5082</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5083</span> </div>
<div class="line"><span class="lineno"> 5084</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5085</span> </div>
<div class="line"><span class="lineno"> 5086</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5087</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5088</span> </div>
<div class="line"><span class="lineno"> 5089</span>    <span class="comment">// Just recalculate ratings</span></div>
<div class="line"><span class="lineno"> 5090</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> rating = 0; rating &lt; <a class="code hl_define" href="../../de/d3d/a03515.html#a89a822f82e3d3eafe03f7ae0d1310300">MAX_COMBAT_RATING</a>; ++rating)</div>
<div class="line"><span class="lineno"> 5091</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; rating))</div>
<div class="line"><span class="lineno"> 5092</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a2843d3ed237aba682ef70f8e32bd9576">ApplyRatingMod</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#aa60e4ef21982cf41b489e5242f01b64f">CombatRating</a>(rating), 0, apply);</div>
<div class="line"><span class="lineno"> 5093</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l05254">Player::ApplyRatingMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00244">MAX_COMBAT_RATING</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="ae2accb6290e6f7ee84c9588d641898d4" name="ae2accb6290e6f7ee84c9588d641898d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2accb6290e6f7ee84c9588d641898d4">&#9670;&#160;</a></span>HandleModResistancePercent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModResistancePercent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4371</span>{</div>
<div class="line"><span class="lineno"> 4372</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4373</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4374</span> </div>
<div class="line"><span class="lineno"> 4375</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4376</span> </div>
<div class="line"><span class="lineno"> 4377</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a3bb8a71f4ae9af551f71e9eb2c9c3325">int8</a> i = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; i &lt; <a class="code hl_variable" href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; i++)</div>
<div class="line"><span class="lineno"> 4378</span>    {</div>
<div class="line"><span class="lineno"> 4379</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(1 &lt;&lt; i))</div>
<div class="line"><span class="lineno"> 4380</span>        {</div>
<div class="line"><span class="lineno"> 4381</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdea2ca084c2061b3ebd16a486bd8e64a0d2">UNIT_MOD_RESISTANCE_START</a> + i), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 4382</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>())</div>
<div class="line"><span class="lineno"> 4383</span>            {</div>
<div class="line"><span class="lineno"> 4384</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a10525f4529dc72c0d70dae637022250f">ApplyResistanceBuffModsPercentMod</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a>(i), <span class="keyword">true</span>, (<span class="keywordtype">float</span>)<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 4385</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a10525f4529dc72c0d70dae637022250f">ApplyResistanceBuffModsPercentMod</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4c">SpellSchools</a>(i), <span class="keyword">false</span>, (<span class="keywordtype">float</span>)<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 4386</span>            }</div>
<div class="line"><span class="lineno"> 4387</span>        }</div>
<div class="line"><span class="lineno"> 4388</span>    }</div>
<div class="line"><span class="lineno"> 4389</span>}</div>
<div class="ttc" id="aa08518_html_a10525f4529dc72c0d70dae637022250f"><div class="ttname"><a href="../../db/df9/a08518.html#a10525f4529dc72c0d70dae637022250f">Unit::ApplyResistanceBuffModsPercentMod</a></div><div class="ttdeci">void ApplyResistanceBuffModsPercentMod(SpellSchools school, bool positive, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> Unit.h:1127</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01127">Unit::ApplyResistanceBuffModsPercentMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00754">Unit::IsPet()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00292">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../#l00283">SPELL_SCHOOL_NORMAL</a>, <a class="el" href="../../#l00129">TOTAL_PCT</a>, and <a class="el" href="../../#l00172">UNIT_MOD_RESISTANCE_START</a>.</p>

</div>
</div>
<a id="aa978582e776583063a2a82af4c658c35" name="aa978582e776583063a2a82af4c658c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa978582e776583063a2a82af4c658c35">&#9670;&#160;</a></span>HandleModSpellCritChance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellCritChance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4921</span>{</div>
<div class="line"><span class="lineno"> 4922</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4923</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4924</span> </div>
<div class="line"><span class="lineno"> 4925</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4926</span> </div>
<div class="line"><span class="lineno"> 4927</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4928</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a06380d627aa5fee572465587fbdd53e4">UpdateAllSpellCritChances</a>();</div>
<div class="line"><span class="lineno"> 4929</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4930</span>        target-&gt;<a class="code hl_variable" href="../../db/df9/a08518.html#a92418193751a8dc7679b00f1d9d07d35">m_baseSpellCritChance</a> += (<a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() : -<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><span class="lineno"> 4931</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l01904">Unit::m_baseSpellCritChance</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00871">Player::UpdateAllSpellCritChances()</a>.</p>

</div>
</div>
<a id="a92d0072fcf334ace5a8a29d5a58616e0" name="a92d0072fcf334ace5a8a29d5a58616e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92d0072fcf334ace5a8a29d5a58616e0">&#9670;&#160;</a></span>HandleModSpellCritChanceShool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellCritChanceShool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4934</span>{</div>
<div class="line"><span class="lineno"> 4935</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4936</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4937</span> </div>
<div class="line"><span class="lineno"> 4938</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4939</span> </div>
<div class="line"><span class="lineno"> 4940</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4941</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4942</span> </div>
<div class="line"><span class="lineno"> 4943</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> school = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a25263e3e283b54e5280d5af1fd16da4ca0599bcfa52d292c58e15ac0f081bb5af">SPELL_SCHOOL_NORMAL</a>; school &lt; <a class="code hl_variable" href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; ++school)</div>
<div class="line"><span class="lineno"> 4944</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; school))</div>
<div class="line"><span class="lineno"> 4945</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af92906e643e5e1895fd2fb4205977568">UpdateSpellCritChance</a>(school);</div>
<div class="line"><span class="lineno"> 4946</span>}</div>
<div class="ttc" id="aa08386_html_af92906e643e5e1895fd2fb4205977568"><div class="ttname"><a href="../../d0/dc6/a08386.html#af92906e643e5e1895fd2fb4205977568">Player::UpdateSpellCritChance</a></div><div class="ttdeci">void UpdateSpellCritChance(uint32 school)</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:822</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00292">MAX_SPELL_SCHOOL</a>, <a class="el" href="../../#l00283">SPELL_SCHOOL_NORMAL</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00822">Player::UpdateSpellCritChance()</a>.</p>

</div>
</div>
<a id="ad281398afbdfcf17b271deccfda26b01" name="ad281398afbdfcf17b271deccfda26b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad281398afbdfcf17b271deccfda26b01">&#9670;&#160;</a></span>HandleModSpellDamagePercentFromAttackPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellDamagePercentFromAttackPower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4509</span>{</div>
<div class="line"><span class="lineno"> 4510</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4511</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4512</span> </div>
<div class="line"><span class="lineno"> 4513</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4514</span> </div>
<div class="line"><span class="lineno"> 4515</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4516</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4517</span> </div>
<div class="line"><span class="lineno"> 4518</span>    <span class="comment">// Magic damage modifiers implemented in Unit::SpellDamageBonus</span></div>
<div class="line"><span class="lineno"> 4519</span>    <span class="comment">// This information for client side use only</span></div>
<div class="line"><span class="lineno"> 4520</span>    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><span class="lineno"> 4521</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a9c9c56019156a846d7437279bfcc31bf">UpdateSpellDamageAndHealingBonus</a>();</div>
<div class="line"><span class="lineno"> 4522</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00177">Player::UpdateSpellDamageAndHealingBonus()</a>.</p>

</div>
</div>
<a id="abfe708f78779cd14750387b72c516b33" name="abfe708f78779cd14750387b72c516b33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfe708f78779cd14750387b72c516b33">&#9670;&#160;</a></span>HandleModSpellDamagePercentFromStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellDamagePercentFromStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4479</span>{</div>
<div class="line"><span class="lineno"> 4480</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4481</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4482</span> </div>
<div class="line"><span class="lineno"> 4483</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4484</span> </div>
<div class="line"><span class="lineno"> 4485</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4486</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4487</span> </div>
<div class="line"><span class="lineno"> 4488</span>    <span class="comment">// Magic damage modifiers implemented in Unit::SpellDamageBonus</span></div>
<div class="line"><span class="lineno"> 4489</span>    <span class="comment">// This information for client side use only</span></div>
<div class="line"><span class="lineno"> 4490</span>    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><span class="lineno"> 4491</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a9c9c56019156a846d7437279bfcc31bf">UpdateSpellDamageAndHealingBonus</a>();</div>
<div class="line"><span class="lineno"> 4492</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00177">Player::UpdateSpellDamageAndHealingBonus()</a>.</p>

</div>
</div>
<a id="ada88a03111d74054c088f900f619adf1" name="ada88a03111d74054c088f900f619adf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada88a03111d74054c088f900f619adf1">&#9670;&#160;</a></span>HandleModSpellHealingPercentFromAttackPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellHealingPercentFromAttackPower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4525</span>{</div>
<div class="line"><span class="lineno"> 4526</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4527</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4528</span> </div>
<div class="line"><span class="lineno"> 4529</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4530</span> </div>
<div class="line"><span class="lineno"> 4531</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4532</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4533</span> </div>
<div class="line"><span class="lineno"> 4534</span>    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><span class="lineno"> 4535</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a9c9c56019156a846d7437279bfcc31bf">UpdateSpellDamageAndHealingBonus</a>();</div>
<div class="line"><span class="lineno"> 4536</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00177">Player::UpdateSpellDamageAndHealingBonus()</a>.</p>

</div>
</div>
<a id="ad0ade8db29e053f3dd175102766ec745" name="ad0ade8db29e053f3dd175102766ec745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0ade8db29e053f3dd175102766ec745">&#9670;&#160;</a></span>HandleModSpellHealingPercentFromStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellHealingPercentFromStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4495</span>{</div>
<div class="line"><span class="lineno"> 4496</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4497</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4498</span> </div>
<div class="line"><span class="lineno"> 4499</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4500</span> </div>
<div class="line"><span class="lineno"> 4501</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4502</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4503</span> </div>
<div class="line"><span class="lineno"> 4504</span>    <span class="comment">// Recalculate bonus</span></div>
<div class="line"><span class="lineno"> 4505</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a9c9c56019156a846d7437279bfcc31bf">UpdateSpellDamageAndHealingBonus</a>();</div>
<div class="line"><span class="lineno"> 4506</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00177">Player::UpdateSpellDamageAndHealingBonus()</a>.</p>

</div>
</div>
<a id="ad16e337a78c3bd2df90a006745bb0ccb" name="ad16e337a78c3bd2df90a006745bb0ccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad16e337a78c3bd2df90a006745bb0ccb">&#9670;&#160;</a></span>HandleModSpellHitChance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModSpellHitChance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4908</span>{</div>
<div class="line"><span class="lineno"> 4909</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4910</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4911</span> </div>
<div class="line"><span class="lineno"> 4912</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4913</span> </div>
<div class="line"><span class="lineno"> 4914</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 4915</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6bc4b82c2c1255669483736f8509a508">UpdateSpellHitChances</a>();</div>
<div class="line"><span class="lineno"> 4916</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4917</span>        target-&gt;<a class="code hl_variable" href="../../db/df9/a08518.html#ae6fb11a9a0a02d10be57c2c713ec8e05">m_modSpellHitChance</a> += (<a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>) ? <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() : (-<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 4918</span>}</div>
<div class="ttc" id="aa08386_html_a6bc4b82c2c1255669483736f8509a508"><div class="ttname"><a href="../../d0/dc6/a08386.html#a6bc4b82c2c1255669483736f8509a508">Player::UpdateSpellHitChances</a></div><div class="ttdeci">void UpdateSpellHitChances()</div><div class="ttdef"><b>Definition:</b> StatSystem.cpp:865</div></div>
<div class="ttc" id="aa08518_html_ae6fb11a9a0a02d10be57c2c713ec8e05"><div class="ttname"><a href="../../db/df9/a08518.html#ae6fb11a9a0a02d10be57c2c713ec8e05">Unit::m_modSpellHitChance</a></div><div class="ttdeci">float m_modSpellHitChance</div><div class="ttdef"><b>Definition:</b> Unit.h:1903</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l01903">Unit::m_modSpellHitChance</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00865">Player::UpdateSpellHitChances()</a>.</p>

</div>
</div>
<a id="a7e98eced29d22a033eda88c17bc75ac5" name="a7e98eced29d22a033eda88c17bc75ac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e98eced29d22a033eda88c17bc75ac5">&#9670;&#160;</a></span>HandleModStateImmunityMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModStateImmunityMask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3809</span>{</div>
<div class="line"><span class="lineno"> 3810</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3811</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3812</span> </div>
<div class="line"><span class="lineno"> 3813</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3814</span>    std::list &lt;AuraType&gt; aura_immunity_list;</div>
<div class="line"><span class="lineno"> 3815</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> mechanic_immunity_list = 0;</div>
<div class="line"><span class="lineno"> 3816</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> miscVal = <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>();</div>
<div class="line"><span class="lineno"> 3817</span> </div>
<div class="line"><span class="lineno"> 3818</span>    <span class="keywordflow">switch</span> (miscVal)</div>
<div class="line"><span class="lineno"> 3819</span>    {</div>
<div class="line"><span class="lineno"> 3820</span>        <span class="keywordflow">case</span> 96:</div>
<div class="line"><span class="lineno"> 3821</span>        <span class="keywordflow">case</span> 1615:</div>
<div class="line"><span class="lineno"> 3822</span>            {</div>
<div class="line"><span class="lineno"> 3823</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><span class="lineno"> 3824</span>                {</div>
<div class="line"><span class="lineno"> 3825</span>                    mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>)</div>
<div class="line"><span class="lineno"> 3826</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><span class="lineno"> 3827</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>)</div>
<div class="line"><span class="lineno"> 3828</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>)</div>
<div class="line"><span class="lineno"> 3829</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>)</div>
<div class="line"><span class="lineno"> 3830</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>);</div>
<div class="line"><span class="lineno"> 3831</span> </div>
<div class="line"><span class="lineno"> 3832</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3833</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3834</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3835</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3836</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3837</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3838</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3839</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3840</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3841</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3842</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3843</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3844</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a7b5d0b48f9a7e84bf7a896602e8c66b9">SPELL_AURA_MOD_CHARM</a>);</div>
<div class="line"><span class="lineno"> 3845</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><span class="lineno"> 3846</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><span class="lineno"> 3847</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><span class="lineno"> 3848</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><span class="lineno"> 3849</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><span class="lineno"> 3850</span>                }</div>
<div class="line"><span class="lineno"> 3851</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3852</span>            }</div>
<div class="line"><span class="lineno"> 3853</span>        <span class="keywordflow">case</span> 679:</div>
<div class="line"><span class="lineno"> 3854</span>            {</div>
<div class="line"><span class="lineno"> 3855</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 57742)</div>
<div class="line"><span class="lineno"> 3856</span>                {</div>
<div class="line"><span class="lineno"> 3857</span>                    mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>)</div>
<div class="line"><span class="lineno"> 3858</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><span class="lineno"> 3859</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>)</div>
<div class="line"><span class="lineno"> 3860</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>)</div>
<div class="line"><span class="lineno"> 3861</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>)</div>
<div class="line"><span class="lineno"> 3862</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>);</div>
<div class="line"><span class="lineno"> 3863</span> </div>
<div class="line"><span class="lineno"> 3864</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3865</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3866</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3867</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3868</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3869</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3870</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3871</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3872</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3873</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3874</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3875</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3876</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><span class="lineno"> 3877</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><span class="lineno"> 3878</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><span class="lineno"> 3879</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><span class="lineno"> 3880</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><span class="lineno"> 3881</span>                }</div>
<div class="line"><span class="lineno"> 3882</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3883</span>            }</div>
<div class="line"><span class="lineno"> 3884</span>        <span class="keywordflow">case</span> 1557:</div>
<div class="line"><span class="lineno"> 3885</span>            {</div>
<div class="line"><span class="lineno"> 3886</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 64187)</div>
<div class="line"><span class="lineno"> 3887</span>                {</div>
<div class="line"><span class="lineno"> 3888</span>                    mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>);</div>
<div class="line"><span class="lineno"> 3889</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3890</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><span class="lineno"> 3891</span>                }</div>
<div class="line"><span class="lineno"> 3892</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3893</span>                {</div>
<div class="line"><span class="lineno"> 3894</span>                    mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>)</div>
<div class="line"><span class="lineno"> 3895</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><span class="lineno"> 3896</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>)</div>
<div class="line"><span class="lineno"> 3897</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>)</div>
<div class="line"><span class="lineno"> 3898</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>)</div>
<div class="line"><span class="lineno"> 3899</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>);</div>
<div class="line"><span class="lineno"> 3900</span> </div>
<div class="line"><span class="lineno"> 3901</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3902</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3903</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3904</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3905</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3906</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3907</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3908</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3909</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3910</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3911</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3912</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3913</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><span class="lineno"> 3914</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><span class="lineno"> 3915</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><span class="lineno"> 3916</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><span class="lineno"> 3917</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><span class="lineno"> 3918</span>                }</div>
<div class="line"><span class="lineno"> 3919</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3920</span>            }</div>
<div class="line"><span class="lineno"> 3921</span>        <span class="keywordflow">case</span> 1614:</div>
<div class="line"><span class="lineno"> 3922</span>        <span class="keywordflow">case</span> 1694:</div>
<div class="line"><span class="lineno"> 3923</span>            {</div>
<div class="line"><span class="lineno"> 3924</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97a7b3799697914dfaca12e793546900d61">SPELL_EFFECT_ATTACK_ME</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3925</span>                aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a>);</div>
<div class="line"><span class="lineno"> 3926</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3927</span>            }</div>
<div class="line"><span class="lineno"> 3928</span>        <span class="keywordflow">case</span> 1630:</div>
<div class="line"><span class="lineno"> 3929</span>            {</div>
<div class="line"><span class="lineno"> 3930</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><span class="lineno"> 3931</span>                {</div>
<div class="line"><span class="lineno"> 3932</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97a7b3799697914dfaca12e793546900d61">SPELL_EFFECT_ATTACK_ME</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3933</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a>);</div>
<div class="line"><span class="lineno"> 3934</span>                }</div>
<div class="line"><span class="lineno"> 3935</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3936</span>                {</div>
<div class="line"><span class="lineno"> 3937</span>                    mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>)</div>
<div class="line"><span class="lineno"> 3938</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><span class="lineno"> 3939</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>)</div>
<div class="line"><span class="lineno"> 3940</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>)</div>
<div class="line"><span class="lineno"> 3941</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>)</div>
<div class="line"><span class="lineno"> 3942</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>);</div>
<div class="line"><span class="lineno"> 3943</span> </div>
<div class="line"><span class="lineno"> 3944</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3945</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3946</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3947</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3948</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3949</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3950</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3951</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3952</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3953</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3954</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3955</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3956</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><span class="lineno"> 3957</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><span class="lineno"> 3958</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><span class="lineno"> 3959</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><span class="lineno"> 3960</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><span class="lineno"> 3961</span>                }</div>
<div class="line"><span class="lineno"> 3962</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3963</span>            }</div>
<div class="line"><span class="lineno"> 3964</span>        <span class="keywordflow">case</span> 477:</div>
<div class="line"><span class="lineno"> 3965</span>        <span class="keywordflow">case</span> 1733:</div>
<div class="line"><span class="lineno"> 3966</span>        <span class="keywordflow">case</span> 1632:</div>
<div class="line"><span class="lineno"> 3967</span>            {</div>
<div class="line"><span class="lineno"> 3968</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>())</div>
<div class="line"><span class="lineno"> 3969</span>                {</div>
<div class="line"><span class="lineno"> 3970</span>                    mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>)</div>
<div class="line"><span class="lineno"> 3971</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><span class="lineno"> 3972</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>)</div>
<div class="line"><span class="lineno"> 3973</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>)</div>
<div class="line"><span class="lineno"> 3974</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>)</div>
<div class="line"><span class="lineno"> 3975</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a>);</div>
<div class="line"><span class="lineno"> 3976</span> </div>
<div class="line"><span class="lineno"> 3977</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3978</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada8edb909788821535a07afdb9bf8957a8">MECHANIC_ROOT</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3979</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3980</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3981</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada94162e45f3c41a104fa71a593b39a926">MECHANIC_SLEEP</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3982</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3983</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adad9aacefd364ef80ddcf9f0caaf7bc930">MECHANIC_SAPPED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3984</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaedfaf974478ae49d77b1d7ffd7bbafff">MECHANIC_HORROR</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3985</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3986</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3987</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3988</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada76d854166bbc1fbebd24e0899d712be8">MECHANIC_TURN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3989</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adaa823d24ef2d29559df9cd8de9f0c071a">MECHANIC_BANISH</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3990</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aba465dfeb8a8eb233b90d6beb5414b8f">SPELL_EFFECT_KNOCK_BACK</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3991</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97a92566a4e474f18e338723ded05f57ff5">SPELL_EFFECT_KNOCK_BACK_DEST</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 3992</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><span class="lineno"> 3993</span> </div>
<div class="line"><span class="lineno"> 3994</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><span class="lineno"> 3995</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><span class="lineno"> 3996</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><span class="lineno"> 3997</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><span class="lineno"> 3998</span>                }</div>
<div class="line"><span class="lineno"> 3999</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4000</span>            }</div>
<div class="line"><span class="lineno"> 4001</span>        <span class="keywordflow">case</span> 878:</div>
<div class="line"><span class="lineno"> 4002</span>            {</div>
<div class="line"><span class="lineno"> 4003</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() == 1)</div>
<div class="line"><span class="lineno"> 4004</span>                {</div>
<div class="line"><span class="lineno"> 4005</span>                    mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>)</div>
<div class="line"><span class="lineno"> 4006</span>                                             | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>);</div>
<div class="line"><span class="lineno"> 4007</span> </div>
<div class="line"><span class="lineno"> 4008</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4009</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4010</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4011</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada857bb0c20ddc48863218d8987f4593a5">MECHANIC_FREEZE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4012</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><span class="lineno"> 4013</span>                    aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><span class="lineno"> 4014</span>                }</div>
<div class="line"><span class="lineno"> 4015</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4016</span>            }</div>
<div class="line"><span class="lineno"> 4017</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 4018</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 4019</span>    }</div>
<div class="line"><span class="lineno"> 4020</span> </div>
<div class="line"><span class="lineno"> 4021</span>    <span class="keywordflow">if</span> (aura_immunity_list.empty())</div>
<div class="line"><span class="lineno"> 4022</span>    {</div>
<div class="line"><span class="lineno"> 4023</span>        <span class="comment">// Roots, OK</span></div>
<div class="line"><span class="lineno"> 4024</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 0))</div>
<div class="line"><span class="lineno"> 4025</span>        {</div>
<div class="line"><span class="lineno"> 4026</span>            mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>);</div>
<div class="line"><span class="lineno"> 4027</span> </div>
<div class="line"><span class="lineno"> 4028</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4029</span>            aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a833a8773139c4fdffb24499f28e98c63">SPELL_AURA_MOD_ROOT</a>);</div>
<div class="line"><span class="lineno"> 4030</span>        }</div>
<div class="line"><span class="lineno"> 4031</span>        <span class="comment">// Taunt, OK</span></div>
<div class="line"><span class="lineno"> 4032</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 1))</div>
<div class="line"><span class="lineno"> 4033</span>        {</div>
<div class="line"><span class="lineno"> 4034</span>            aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a>);</div>
<div class="line"><span class="lineno"> 4035</span>        }</div>
<div class="line"><span class="lineno"> 4036</span>        <span class="comment">// Crowd-Control auras?</span></div>
<div class="line"><span class="lineno"> 4037</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 2))</div>
<div class="line"><span class="lineno"> 4038</span>        {</div>
<div class="line"><span class="lineno"> 4039</span>            mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>) | (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>);</div>
<div class="line"><span class="lineno"> 4040</span> </div>
<div class="line"><span class="lineno"> 4041</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada9dd2384218d039987359150d147d3263">MECHANIC_POLYMORPH</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4042</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5744155cf051dd0f750aa85f77dc1974">MECHANIC_DISORIENTED</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4043</span>            aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799adaa58e2c604243da285d64f4a95b42f7">SPELL_AURA_MOD_CONFUSE</a>);</div>
<div class="line"><span class="lineno"> 4044</span>        }</div>
<div class="line"><span class="lineno"> 4045</span>        <span class="comment">// Interrupt, OK</span></div>
<div class="line"><span class="lineno"> 4046</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 3))</div>
<div class="line"><span class="lineno"> 4047</span>        {</div>
<div class="line"><span class="lineno"> 4048</span>            mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada88ed11eafe3064e81a7694bea883af79">MECHANIC_INTERRUPT</a>);</div>
<div class="line"><span class="lineno"> 4049</span> </div>
<div class="line"><span class="lineno"> 4050</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada88ed11eafe3064e81a7694bea883af79">MECHANIC_INTERRUPT</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4051</span>        }</div>
<div class="line"><span class="lineno"> 4052</span>        <span class="comment">// Transform?</span></div>
<div class="line"><span class="lineno"> 4053</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 4))</div>
<div class="line"><span class="lineno"> 4054</span>        {</div>
<div class="line"><span class="lineno"> 4055</span>            aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab4e25ba6068fba0c5d7c5ac8adbbf8fa">SPELL_AURA_TRANSFORM</a>);</div>
<div class="line"><span class="lineno"> 4056</span>        }</div>
<div class="line"><span class="lineno"> 4057</span>        <span class="comment">// Stun auras breakable by damage (Incapacitate effects), OK</span></div>
<div class="line"><span class="lineno"> 4058</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 5))</div>
<div class="line"><span class="lineno"> 4059</span>        {</div>
<div class="line"><span class="lineno"> 4060</span>            mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5bd5524686a4163521296cb159b22363">MECHANIC_KNOCKOUT</a>);</div>
<div class="line"><span class="lineno"> 4061</span> </div>
<div class="line"><span class="lineno"> 4062</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada5bd5524686a4163521296cb159b22363">MECHANIC_KNOCKOUT</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4063</span>        }</div>
<div class="line"><span class="lineno"> 4064</span>        <span class="comment">// // Slowing effects</span></div>
<div class="line"><span class="lineno"> 4065</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 6))</div>
<div class="line"><span class="lineno"> 4066</span>        {</div>
<div class="line"><span class="lineno"> 4067</span>            mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>);</div>
<div class="line"><span class="lineno"> 4068</span> </div>
<div class="line"><span class="lineno"> 4069</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7adac33e72cd9c395583cd6db721014056b5">MECHANIC_SNARE</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4070</span>            aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a>);</div>
<div class="line"><span class="lineno"> 4071</span>        }</div>
<div class="line"><span class="lineno"> 4072</span>        <span class="comment">// Charm auras?, 90%</span></div>
<div class="line"><span class="lineno"> 4073</span>        <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 7)))</div>
<div class="line"><span class="lineno"> 4074</span>        {</div>
<div class="line"><span class="lineno"> 4075</span>            mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>);</div>
<div class="line"><span class="lineno"> 4076</span> </div>
<div class="line"><span class="lineno"> 4077</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada655f913cba9a74b4321f72f001ca174e">MECHANIC_CHARM</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4078</span>            aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a7b5d0b48f9a7e84bf7a896602e8c66b9">SPELL_AURA_MOD_CHARM</a>);</div>
<div class="line"><span class="lineno"> 4079</span>            aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799adc30e3257d95c2736a98331a53766eea">SPELL_AURA_MOD_POSSESS</a>);</div>
<div class="line"><span class="lineno"> 4080</span>        }</div>
<div class="line"><span class="lineno"> 4081</span>        <span class="comment">// UNK</span></div>
<div class="line"><span class="lineno"> 4082</span>        <span class="comment">// if ((GetMiscValue() &amp; (1 &lt;&lt; 8)))</span></div>
<div class="line"><span class="lineno"> 4083</span>        <span class="comment">// {</span></div>
<div class="line"><span class="lineno"> 4084</span>        <span class="comment">// }</span></div>
<div class="line"><span class="lineno"> 4085</span>        <span class="comment">// Fear, OK</span></div>
<div class="line"><span class="lineno"> 4086</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 9))</div>
<div class="line"><span class="lineno"> 4087</span>        {</div>
<div class="line"><span class="lineno"> 4088</span>            mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>);</div>
<div class="line"><span class="lineno"> 4089</span> </div>
<div class="line"><span class="lineno"> 4090</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada3f5a5b15800c7e6d11e1c1482fc53f96">MECHANIC_FEAR</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4091</span>            aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>);</div>
<div class="line"><span class="lineno"> 4092</span>        }</div>
<div class="line"><span class="lineno"> 4093</span>        <span class="comment">// Stuns, OK</span></div>
<div class="line"><span class="lineno"> 4094</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; 10))</div>
<div class="line"><span class="lineno"> 4095</span>        {</div>
<div class="line"><span class="lineno"> 4096</span>            mechanic_immunity_list = (1 &lt;&lt; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>);</div>
<div class="line"><span class="lineno"> 4097</span> </div>
<div class="line"><span class="lineno"> 4098</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9ab9accfd6df40410bf72e975876f34ee3">IMMUNITY_MECHANIC</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada77412c9a71759f2e8b7f3c629681be4d">MECHANIC_STUN</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4099</span>            aura_immunity_list.push_back(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799afdf00dd634aaa25017ad329f58bd6cfd">SPELL_AURA_MOD_STUN</a>);</div>
<div class="line"><span class="lineno"> 4100</span>        }</div>
<div class="line"><span class="lineno"> 4101</span>    }</div>
<div class="line"><span class="lineno"> 4102</span> </div>
<div class="line"><span class="lineno"> 4103</span>    <span class="comment">// apply immunities</span></div>
<div class="line"><span class="lineno"> 4104</span>    <span class="keywordflow">for</span> (std::list &lt;AuraType&gt;::iterator iter = aura_immunity_list.begin(); iter != aura_immunity_list.end(); ++iter)</div>
<div class="line"><span class="lineno"> 4105</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a1c2e514db062426deb4673fb86e3459e">IMMUNITY_STATE</a>, *iter, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4106</span> </div>
<div class="line"><span class="lineno"> 4107</span>    <span class="comment">// Patch 3.0.3 Bladestorm now breaks all snares and roots on the warrior when activated.</span></div>
<div class="line"><span class="lineno"> 4108</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 46924)</div>
<div class="line"><span class="lineno"> 4109</span>    {</div>
<div class="line"><span class="lineno"> 4110</span>        <span class="comment">// Knockback and hex</span></div>
<div class="line"><span class="lineno"> 4111</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1afc1e413f12c5bd7bc00c926fa05833">ApplySpellImmune</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a91d505a1e789c6ea6a338f3a3c85b6b9a5da3c36e87dda6bd23b3c55edd0830d2">IMMUNITY_EFFECT</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aba465dfeb8a8eb233b90d6beb5414b8f">SPELL_EFFECT_KNOCK_BACK</a>, <a class="code hl_function" href="../../d2/d88/a04704.html#a6177d7ac84a4ea6819c57a124345540e">apply</a>);</div>
<div class="line"><span class="lineno"> 4112</span>    }</div>
<div class="line"><span class="lineno"> 4113</span> </div>
<div class="line"><span class="lineno"> 4114</span>    <span class="keywordflow">if</span> (apply &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a638f8f550e23b2e3180b481bb3f38076ab2ba4cd294111dc378e33055074250be">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>))</div>
<div class="line"><span class="lineno"> 4115</span>    {</div>
<div class="line"><span class="lineno"> 4116</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1914cb06489a11617ad9f8c9e343876b">RemoveAurasWithMechanic</a>(mechanic_immunity_list, <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115ea51dd2d6d8e90e4ea4113c02fb772b80c">AURA_REMOVE_BY_DEFAULT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 4117</span>        <span class="keywordflow">for</span> (std::list &lt;AuraType&gt;::iterator iter = aura_immunity_list.begin(); iter != aura_immunity_list.end(); ++iter)</div>
<div class="line"><span class="lineno"> 4118</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad6df47a81f5f5f147e68211ee935b398">RemoveAurasByType</a>(*iter);</div>
<div class="line"><span class="lineno"> 4119</span>    }</div>
<div class="line"><span class="lineno"> 4120</span>}</div>
<div class="ttc" id="aa02771_html_a292c893150c454dd75628b719db1fe97a7b3799697914dfaca12e793546900d61"><div class="ttname"><a href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97a7b3799697914dfaca12e793546900d61">SPELL_EFFECT_ATTACK_ME</a></div><div class="ttdeci">@ SPELL_EFFECT_ATTACK_ME</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:892</div></div>
<div class="ttc" id="aa02771_html_a292c893150c454dd75628b719db1fe97a92566a4e474f18e338723ded05f57ff5"><div class="ttname"><a href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97a92566a4e474f18e338723ded05f57ff5">SPELL_EFFECT_KNOCK_BACK_DEST</a></div><div class="ttdeci">@ SPELL_EFFECT_KNOCK_BACK_DEST</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:922</div></div>
<div class="ttc" id="aa02771_html_a292c893150c454dd75628b719db1fe97aba465dfeb8a8eb233b90d6beb5414b8f"><div class="ttname"><a href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aba465dfeb8a8eb233b90d6beb5414b8f">SPELL_EFFECT_KNOCK_BACK</a></div><div class="ttdeci">@ SPELL_EFFECT_KNOCK_BACK</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:876</div></div>
<div class="ttc" id="aa02771_html_a8fe6a763d72d84ded23cec01c772f7ada88ed11eafe3064e81a7694bea883af79"><div class="ttname"><a href="../../d0/dbd/a02771.html#a8fe6a763d72d84ded23cec01c772f7ada88ed11eafe3064e81a7694bea883af79">MECHANIC_INTERRUPT</a></div><div class="ttdeci">@ MECHANIC_INTERRUPT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1351</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a7b5d0b48f9a7e84bf7a896602e8c66b9"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a7b5d0b48f9a7e84bf7a896602e8c66b9">SPELL_AURA_MOD_CHARM</a></div><div class="ttdeci">@ SPELL_AURA_MOD_CHARM</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:69</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_TAUNT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:74</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab3987db9e154ae9a2086efb43e5af610">SPELL_AURA_MOD_DECREASE_SPEED</a></div><div class="ttdeci">@ SPELL_AURA_MOD_DECREASE_SPEED</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:96</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799adc30e3257d95c2736a98331a53766eea"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799adc30e3257d95c2736a98331a53766eea">SPELL_AURA_MOD_POSSESS</a></div><div class="ttdeci">@ SPELL_AURA_MOD_POSSESS</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:65</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l13384">Unit::ApplySpellImmune()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00392">AURA_REMOVE_BY_DEFAULT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l01394">IMMUNITY_EFFECT</a>, <a class="el" href="../../#l01399">IMMUNITY_MECHANIC</a>, <a class="el" href="../../#l01395">IMMUNITY_STATE</a>, <a class="el" href="../../#l01343">MECHANIC_BANISH</a>, <a class="el" href="../../#l01326">MECHANIC_CHARM</a>, <a class="el" href="../../#l01327">MECHANIC_DISORIENTED</a>, <a class="el" href="../../#l01330">MECHANIC_FEAR</a>, <a class="el" href="../../#l01338">MECHANIC_FREEZE</a>, <a class="el" href="../../#l01349">MECHANIC_HORROR</a>, <a class="el" href="../../#l01351">MECHANIC_INTERRUPT</a>, <a class="el" href="../../#l01339">MECHANIC_KNOCKOUT</a>, <a class="el" href="../../#l01342">MECHANIC_POLYMORPH</a>, <a class="el" href="../../#l01332">MECHANIC_ROOT</a>, <a class="el" href="../../#l01355">MECHANIC_SAPPED</a>, <a class="el" href="../../#l01335">MECHANIC_SLEEP</a>, <a class="el" href="../../#l01336">MECHANIC_SNARE</a>, <a class="el" href="../../#l01337">MECHANIC_STUN</a>, <a class="el" href="../../#l01348">MECHANIC_TURN</a>, <a class="el" href="../../#l05110">Unit::RemoveAurasByType()</a>, <a class="el" href="../../#l05253">Unit::RemoveAurasWithMechanic()</a>, <a class="el" href="../../#l00434">SPELL_ATTR1_IMMUNITY_PURGES_EFFECT</a>, <a class="el" href="../../#l00069">SPELL_AURA_MOD_CHARM</a>, <a class="el" href="../../#l00068">SPELL_AURA_MOD_CONFUSE</a>, <a class="el" href="../../#l00096">SPELL_AURA_MOD_DECREASE_SPEED</a>, <a class="el" href="../../#l00070">SPELL_AURA_MOD_FEAR</a>, <a class="el" href="../../#l00065">SPELL_AURA_MOD_POSSESS</a>, <a class="el" href="../../#l00089">SPELL_AURA_MOD_ROOT</a>, <a class="el" href="../../#l00075">SPELL_AURA_MOD_STUN</a>, <a class="el" href="../../#l00074">SPELL_AURA_MOD_TAUNT</a>, <a class="el" href="../../#l00119">SPELL_AURA_TRANSFORM</a>, <a class="el" href="../../#l00892">SPELL_EFFECT_ATTACK_ME</a>, <a class="el" href="../../#l00876">SPELL_EFFECT_KNOCK_BACK</a>, and <a class="el" href="../../#l00922">SPELL_EFFECT_KNOCK_BACK_DEST</a>.</p>

</div>
</div>
<a id="ae72fd00fd9b6b1f1d19e8f5e3d62c6ee" name="ae72fd00fd9b6b1f1d19e8f5e3d62c6ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae72fd00fd9b6b1f1d19e8f5e3d62c6ee">&#9670;&#160;</a></span>HandleModStealth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModStealth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1642</span>{</div>
<div class="line"><span class="lineno"> 1643</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a45b308d91feffe9ebae9560b649b193b">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 1644</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1645</span> </div>
<div class="line"><span class="lineno"> 1646</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1647</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a> type = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 1648</span> </div>
<div class="line"><span class="lineno"> 1649</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1650</span>    {</div>
<div class="line"><span class="lineno"> 1651</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#a273ab3607b23881628eb0c5d6a4da288">AddFlag</a>(type);</div>
<div class="line"><span class="lineno"> 1652</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(type, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 1653</span> </div>
<div class="line"><span class="lineno"> 1654</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af2a18ad150f433db1ad8d63b3c1f98cc">SetStandFlags</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a88cad5664df249863d4ebed6162a2343ae886d5d056abd0ef34207cb400c54bca">UNIT_STAND_FLAGS_CREEP</a>);</div>
<div class="line"><span class="lineno"> 1655</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 1656</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#afe65b1ab32dbcd51890b754fb8b5e1b0">SetByteFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, 3, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a29b0496d910c02e5cc98d349c4427474a1c01d4f3e3f54b6e479482ce3f3fc9dd">PLAYER_FIELD_BYTE2_STEALTH</a>);</div>
<div class="line"><span class="lineno"> 1657</span> </div>
<div class="line"><span class="lineno"> 1658</span>        <span class="comment">// interrupt autoshot</span></div>
<div class="line"><span class="lineno"> 1659</span>        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#affc5148f2c60051706b4e85a29eb4d45">GetCurrentSpell</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1">CURRENT_AUTOREPEAT_SPELL</a>))</div>
<div class="line"><span class="lineno"> 1660</span>        {</div>
<div class="line"><span class="lineno"> 1661</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab9349116923cba29e3de802e86c3e2ec">FinishSpell</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1faf4d9017fa01b68842e61b948323e93c1">CURRENT_AUTOREPEAT_SPELL</a>);</div>
<div class="line"><span class="lineno"> 1662</span>            target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a2f876e332a71e68aa8fd08863ad3623c">SendAutoRepeatCancel</a>(target);</div>
<div class="line"><span class="lineno"> 1663</span>        }</div>
<div class="line"><span class="lineno"> 1664</span>    }</div>
<div class="line"><span class="lineno"> 1665</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1666</span>    {</div>
<div class="line"><span class="lineno"> 1667</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(type, -<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 1668</span> </div>
<div class="line"><span class="lineno"> 1669</span>        <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aeb8f5c79c441187541514b36a00918a1">SPELL_AURA_MOD_STEALTH</a>)) <span class="comment">// if last SPELL_AURA_MOD_STEALTH</span></div>
<div class="line"><span class="lineno"> 1670</span>        {</div>
<div class="line"><span class="lineno"> 1671</span>            target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#a3a674b2a7b8d5874f7210372b3e92123">DelFlag</a>(type);</div>
<div class="line"><span class="lineno"> 1672</span> </div>
<div class="line"><span class="lineno"> 1673</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a90a81ab485d5ec49b878d24ff0d0d3f7">RemoveStandFlags</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a88cad5664df249863d4ebed6162a2343ae886d5d056abd0ef34207cb400c54bca">UNIT_STAND_FLAGS_CREEP</a>);</div>
<div class="line"><span class="lineno"> 1674</span>            <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 1675</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#acef75a7f84673fda790861bd1b0b68b7">RemoveByteFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a6094e668574a870242f146ac00369951">PLAYER_FIELD_BYTES2</a>, 3, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a29b0496d910c02e5cc98d349c4427474a1c01d4f3e3f54b6e479482ce3f3fc9dd">PLAYER_FIELD_BYTE2_STEALTH</a>);</div>
<div class="line"><span class="lineno"> 1676</span>        }</div>
<div class="line"><span class="lineno"> 1677</span>    }</div>
<div class="line"><span class="lineno"> 1678</span> </div>
<div class="line"><span class="lineno"> 1679</span>    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><span class="lineno"> 1680</span>    <span class="keywordflow">if</span> (apply &amp;&amp; (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 1681</span>    {</div>
<div class="line"><span class="lineno"> 1682</span>        <span class="comment">// drop flag at stealth in bg</span></div>
<div class="line"><span class="lineno"> 1683</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aee3106d8223e3a574ea629423fea1b91">RemoveAurasWithInterruptFlags</a>(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><span class="lineno"> 1684</span>    }</div>
<div class="line"><span class="lineno"> 1685</span> </div>
<div class="line"><span class="lineno"> 1686</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>().<a class="code hl_function" href="../../db/d40/a08190.html#a676c61adb79a8be696a771a116253ee1">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a1013c27be4347a1b1a4a986a07456deb">GetMap</a>()-&gt;<a class="code hl_function" href="../../d7/dc0/a09538.html#aae3a929aefb05046ef304ffba10aae71">Instanceable</a>(), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1687</span>    target-&gt;<a class="code hl_variable" href="../../db/df9/a08518.html#a76e5156ec045582923f6d1541b66367b">bRequestForcedVisibilityUpdate</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1688</span>}</div>
<div class="ttc" id="aa02771_html_a266a631efc8ceb2255ea6886537215c8"><div class="ttname"><a href="../../d0/dbd/a02771.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a></div><div class="ttdeci">StealthType</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1246</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799aeb8f5c79c441187541514b36a00918a1"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aeb8f5c79c441187541514b36a00918a1">SPELL_AURA_MOD_STEALTH</a></div><div class="ttdeci">@ SPELL_AURA_MOD_STEALTH</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:79</div></div>
<div class="ttc" id="aa03365_html_a29b0496d910c02e5cc98d349c4427474a1c01d4f3e3f54b6e479482ce3f3fc9dd"><div class="ttname"><a href="../../d7/d13/a03365.html#a29b0496d910c02e5cc98d349c4427474a1c01d4f3e3f54b6e479482ce3f3fc9dd">PLAYER_FIELD_BYTE2_STEALTH</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTE2_STEALTH</div><div class="ttdef"><b>Definition:</b> Player.h:568</div></div>
<div class="ttc" id="aa03521_html_a88cad5664df249863d4ebed6162a2343ae886d5d056abd0ef34207cb400c54bca"><div class="ttname"><a href="../../d8/dbe/a03521.html#a88cad5664df249863d4ebed6162a2343ae886d5d056abd0ef34207cb400c54bca">UNIT_STAND_FLAGS_CREEP</a></div><div class="ttdeci">@ UNIT_STAND_FLAGS_CREEP</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:48</div></div>
<div class="ttc" id="aa08174_html_abfd070bd8d8a25a562f5070948edf7b8"><div class="ttname"><a href="../../d3/d4c/a08174.html#abfd070bd8d8a25a562f5070948edf7b8">WorldObject::m_stealth</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, StealthType, TOTAL_STEALTH_TYPES &gt; m_stealth</div><div class="ttdef"><b>Definition:</b> Object.h:517</div></div>
<div class="ttc" id="aa08518_html_a90a81ab485d5ec49b878d24ff0d0d3f7"><div class="ttname"><a href="../../db/df9/a08518.html#a90a81ab485d5ec49b878d24ff0d0d3f7">Unit::RemoveStandFlags</a></div><div class="ttdeci">void RemoveStandFlags(uint8 flags)</div><div class="ttdef"><b>Definition:</b> Unit.h:1652</div></div>
<div class="ttc" id="aa08518_html_af2a18ad150f433db1ad8d63b3c1f98cc"><div class="ttname"><a href="../../db/df9/a08518.html#af2a18ad150f433db1ad8d63b3c1f98cc">Unit::SetStandFlags</a></div><div class="ttdeci">void SetStandFlags(uint8 flags)</div><div class="ttdef"><b>Definition:</b> Unit.h:1651</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00368">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddFlag()</a>, <a class="el" href="../../#l00373">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddValue()</a>, <a class="el" href="../../#l00050">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00063">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../#l01933">Unit::bRequestForcedVisibilityUpdate</a>, <a class="el" href="../../#l00540">CURRENT_AUTOREPEAT_SPELL</a>, <a class="el" href="../../#l00369">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::DelFlag()</a>, <a class="el" href="../../#l04087">Unit::FinishSpell()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l01449">Unit::GetCurrentSpell()</a>, <a class="el" href="../../#l00531">WorldObject::GetMap()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00678">Unit::GetOwnerGUID()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00445">Map::Instanceable()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00168">ObjectGuid::IsPlayer()</a>, <a class="el" href="../../#l00517">WorldObject::m_stealth</a>, <a class="el" href="../../#l00568">PLAYER_FIELD_BYTE2_STEALTH</a>, <a class="el" href="../../#l00378">PLAYER_FIELD_BYTES2</a>, <a class="el" href="../../#l05181">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../#l00930">Object::RemoveByteFlag()</a>, <a class="el" href="../../#l01652">Unit::RemoveStandFlags()</a>, <a class="el" href="../../#l00152">Player::SendAutoRepeatCancel()</a>, <a class="el" href="../../#l00911">Object::SetByteFlag()</a>, <a class="el" href="../../#l01651">Unit::SetStandFlags()</a>, <a class="el" href="../../#l00079">SPELL_AURA_MOD_STEALTH</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00048">UNIT_STAND_FLAGS_CREEP</a>, and <a class="el" href="../../#l19126">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="aa95ea36217eb2e120bb22fa8fe9c82e2" name="aa95ea36217eb2e120bb22fa8fe9c82e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa95ea36217eb2e120bb22fa8fe9c82e2">&#9670;&#160;</a></span>HandleModStealthDetect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModStealthDetect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1617</span>{</div>
<div class="line"><span class="lineno"> 1618</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 1619</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1620</span> </div>
<div class="line"><span class="lineno"> 1621</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1622</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a> type = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 1623</span> </div>
<div class="line"><span class="lineno"> 1624</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1625</span>    {</div>
<div class="line"><span class="lineno"> 1626</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#aa4dc29f8a2f18513bcf41c90f8cc43ba">m_stealthDetect</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#a273ab3607b23881628eb0c5d6a4da288">AddFlag</a>(type);</div>
<div class="line"><span class="lineno"> 1627</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#aa4dc29f8a2f18513bcf41c90f8cc43ba">m_stealthDetect</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(type, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 1628</span>    }</div>
<div class="line"><span class="lineno"> 1629</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1630</span>    {</div>
<div class="line"><span class="lineno"> 1631</span>        <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a522afc0b32950f4b4cc054a9a18f8a1e">SPELL_AURA_MOD_STEALTH_DETECT</a>))</div>
<div class="line"><span class="lineno"> 1632</span>            target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#aa4dc29f8a2f18513bcf41c90f8cc43ba">m_stealthDetect</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#a3a674b2a7b8d5874f7210372b3e92123">DelFlag</a>(type);</div>
<div class="line"><span class="lineno"> 1633</span> </div>
<div class="line"><span class="lineno"> 1634</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#aa4dc29f8a2f18513bcf41c90f8cc43ba">m_stealthDetect</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(type, -<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 1635</span>    }</div>
<div class="line"><span class="lineno"> 1636</span> </div>
<div class="line"><span class="lineno"> 1637</span>    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><span class="lineno"> 1638</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>().<a class="code hl_function" href="../../db/d40/a08190.html#a676c61adb79a8be696a771a116253ee1">IsPlayer</a>());</div>
<div class="line"><span class="lineno"> 1639</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a522afc0b32950f4b4cc054a9a18f8a1e"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a522afc0b32950f4b4cc054a9a18f8a1e">SPELL_AURA_MOD_STEALTH_DETECT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_STEALTH_DETECT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:80</div></div>
<div class="ttc" id="aa08174_html_aa4dc29f8a2f18513bcf41c90f8cc43ba"><div class="ttname"><a href="../../d3/d4c/a08174.html#aa4dc29f8a2f18513bcf41c90f8cc43ba">WorldObject::m_stealthDetect</a></div><div class="ttdeci">FlaggedValuesArray32&lt; int32, uint32, StealthType, TOTAL_STEALTH_TYPES &gt; m_stealthDetect</div><div class="ttdef"><b>Definition:</b> Object.h:518</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00368">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddFlag()</a>, <a class="el" href="../../#l00373">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddValue()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00369">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::DelFlag()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00678">Unit::GetOwnerGUID()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00168">ObjectGuid::IsPlayer()</a>, <a class="el" href="../../#l00518">WorldObject::m_stealthDetect</a>, <a class="el" href="../../#l00080">SPELL_AURA_MOD_STEALTH_DETECT</a>, and <a class="el" href="../../#l19126">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="a9e7dc7c97738c4404913cab0cae09027" name="a9e7dc7c97738c4404913cab0cae09027"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e7dc7c97738c4404913cab0cae09027">&#9670;&#160;</a></span>HandleModStealthLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModStealthLevel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1691</span>{</div>
<div class="line"><span class="lineno"> 1692</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 1693</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1694</span> </div>
<div class="line"><span class="lineno"> 1695</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1696</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a> type = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a266a631efc8ceb2255ea6886537215c8">StealthType</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 1697</span> </div>
<div class="line"><span class="lineno"> 1698</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1699</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(type, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 1700</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1701</span>        target-&gt;<a class="code hl_variable" href="../../d3/d4c/a08174.html#abfd070bd8d8a25a562f5070948edf7b8">m_stealth</a>.<a class="code hl_function" href="../../dc/d06/a08166.html#aacca1261b2a22525e5fd40e5f479aa06">AddValue</a>(type, -<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 1702</span> </div>
<div class="line"><span class="lineno"> 1703</span>    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><span class="lineno"> 1704</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>().<a class="code hl_function" href="../../db/d40/a08190.html#a676c61adb79a8be696a771a116253ee1">IsPlayer</a>());</div>
<div class="line"><span class="lineno"> 1705</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00373">FlaggedValuesArray32&lt; T_VALUES, T_FLAGS, FLAG_TYPE, ARRAY_SIZE &gt;::AddValue()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00678">Unit::GetOwnerGUID()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00168">ObjectGuid::IsPlayer()</a>, <a class="el" href="../../#l00517">WorldObject::m_stealth</a>, and <a class="el" href="../../#l19126">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="a9f294bf8036e7a0c71b83950da2b3eff" name="a9f294bf8036e7a0c71b83950da2b3eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f294bf8036e7a0c71b83950da2b3eff">&#9670;&#160;</a></span>HandleModTargetResistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModTargetResistance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4407</span>{</div>
<div class="line"><span class="lineno"> 4408</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4409</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4410</span> </div>
<div class="line"><span class="lineno"> 4411</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4412</span> </div>
<div class="line"><span class="lineno"> 4413</span>    <span class="comment">// applied to damage as HandleNoImmediateEffect in Unit::CalcAbsorbResist and Unit::CalcArmorReducedDamage</span></div>
<div class="line"><span class="lineno"> 4414</span> </div>
<div class="line"><span class="lineno"> 4415</span>    <span class="comment">// show armor penetration</span></div>
<div class="line"><span class="lineno"> 4416</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>))</div>
<div class="line"><span class="lineno"> 4417</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881afee94ef13dedb3621bdaa1be73477be0">PLAYER_FIELD_MOD_TARGET_PHYSICAL_RESISTANCE</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 4418</span> </div>
<div class="line"><span class="lineno"> 4419</span>    <span class="comment">// show as spell penetration only full spell penetration bonuses (all resistances except armor and holy</span></div>
<div class="line"><span class="lineno"> 4420</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa73f8353b80cc15deb2fbcecd8a2ac3c0">SPELL_SCHOOL_MASK_SPELL</a>) == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa73f8353b80cc15deb2fbcecd8a2ac3c0">SPELL_SCHOOL_MASK_SPELL</a>)</div>
<div class="line"><span class="lineno"> 4421</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a494b539a938499639eab3f8d9a0c3364">ApplyModInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a42c340a1b77d8a9d208a0fcf249370bb">PLAYER_FIELD_MOD_TARGET_RESISTANCE</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 4422</span>}</div>
<div class="ttc" id="aa02771_html_aff6913cfd69489c107a071be9ec2ec8fa73f8353b80cc15deb2fbcecd8a2ac3c0"><div class="ttname"><a href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa73f8353b80cc15deb2fbcecd8a2ac3c0">SPELL_SCHOOL_MASK_SPELL</a></div><div class="ttdeci">@ SPELL_SCHOOL_MASK_SPELL</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:308</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a42c340a1b77d8a9d208a0fcf249370bb"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a42c340a1b77d8a9d208a0fcf249370bb">PLAYER_FIELD_MOD_TARGET_RESISTANCE</a></div><div class="ttdeci">@ PLAYER_FIELD_MOD_TARGET_RESISTANCE</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:366</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881afee94ef13dedb3621bdaa1be73477be0"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881afee94ef13dedb3621bdaa1be73477be0">PLAYER_FIELD_MOD_TARGET_PHYSICAL_RESISTANCE</a></div><div class="ttdeci">@ PLAYER_FIELD_MOD_TARGET_PHYSICAL_RESISTANCE</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:367</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00815">Object::ApplyModInt32Value()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00367">PLAYER_FIELD_MOD_TARGET_PHYSICAL_RESISTANCE</a>, <a class="el" href="../../#l00366">PLAYER_FIELD_MOD_TARGET_RESISTANCE</a>, <a class="el" href="../../#l00297">SPELL_SCHOOL_MASK_NORMAL</a>, and <a class="el" href="../../#l00308">SPELL_SCHOOL_MASK_SPELL</a>.</p>

</div>
</div>
<a id="a4230057d8bb2cc490b5868109790b811" name="a4230057d8bb2cc490b5868109790b811"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4230057d8bb2cc490b5868109790b811">&#9670;&#160;</a></span>HandleModTaunt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModTaunt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3456</span>{</div>
<div class="line"><span class="lineno"> 3457</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3458</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3459</span> </div>
<div class="line"><span class="lineno"> 3460</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3461</span> </div>
<div class="line"><span class="lineno"> 3462</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae0a72f8fa312caf442a6039bf9758ef6">CanHaveThreatList</a>())</div>
<div class="line"><span class="lineno"> 3463</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3464</span> </div>
<div class="line"><span class="lineno"> 3465</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>();</div>
<div class="line"><span class="lineno"> 3466</span>    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno"> 3467</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3468</span> </div>
<div class="line"><span class="lineno"> 3469</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 3470</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ee419801f2fdfed8f57ea5c19b9cb8">TauntApply</a>(caster);</div>
<div class="line"><span class="lineno"> 3471</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3472</span>    {</div>
<div class="line"><span class="lineno"> 3473</span>        <span class="comment">// When taunt aura fades out, mob will switch to previous target if current has less than 1.1 * secondthreat</span></div>
<div class="line"><span class="lineno"> 3474</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a6f920c99b9681e81a1389cf4da7ba5c6">TauntFadeOut</a>(caster);</div>
<div class="line"><span class="lineno"> 3475</span>    }</div>
<div class="line"><span class="lineno"> 3476</span>}</div>
<div class="ttc" id="aa08518_html_a51ee419801f2fdfed8f57ea5c19b9cb8"><div class="ttname"><a href="../../db/df9/a08518.html#a51ee419801f2fdfed8f57ea5c19b9cb8">Unit::TauntApply</a></div><div class="ttdeci">void TauntApply(Unit *victim)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14659</div></div>
<div class="ttc" id="aa08518_html_a6f920c99b9681e81a1389cf4da7ba5c6"><div class="ttname"><a href="../../db/df9/a08518.html#a6f920c99b9681e81a1389cf4da7ba5c6">Unit::TauntFadeOut</a></div><div class="ttdeci">void TauntFadeOut(Unit *taunter)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14689</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l14609">Unit::CanHaveThreatList()</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l14659">Unit::TauntApply()</a>, and <a class="el" href="../../#l14689">Unit::TauntFadeOut()</a>.</p>

</div>
</div>
<a id="a17a750190862b4a8b0ab247e66af3acf" name="a17a750190862b4a8b0ab247e66af3acf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17a750190862b4a8b0ab247e66af3acf">&#9670;&#160;</a></span>HandleModThreat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModThreat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3430</span>{</div>
<div class="line"><span class="lineno"> 3431</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3432</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3433</span> </div>
<div class="line"><span class="lineno"> 3434</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3435</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a3bb8a71f4ae9af551f71e9eb2c9c3325">int8</a> i = 0; i &lt; <a class="code hl_variable" href="../../d0/dbd/a02771.html#a3d2e33bfddb1e3c28157eb6d136bfd28">MAX_SPELL_SCHOOL</a>; ++i)</div>
<div class="line"><span class="lineno"> 3436</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &amp; (1 &lt;&lt; i))</div>
<div class="line"><span class="lineno"> 3437</span>            <a class="code hl_function" href="../../d4/d13/a00377.html#adcb1f2b25980bd4c71cb160030213f96">ApplyPercentModFloatVar</a>(target-&gt;<a class="code hl_variable" href="../../db/df9/a08518.html#af92510a02fea467f33bb3a19b3f4aa63">m_threatModifier</a>[i], <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 3438</span>}</div>
<div class="ttc" id="aa00377_html_adcb1f2b25980bd4c71cb160030213f96"><div class="ttname"><a href="../../d4/d13/a00377.html#adcb1f2b25980bd4c71cb160030213f96">ApplyPercentModFloatVar</a></div><div class="ttdeci">void ApplyPercentModFloatVar(float &amp;var, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> Util.h:50</div></div>
<div class="ttc" id="aa08518_html_af92510a02fea467f33bb3a19b3f4aa63"><div class="ttname"><a href="../../db/df9/a08518.html#af92510a02fea467f33bb3a19b3f4aa63">Unit::m_threatModifier</a></div><div class="ttdeci">float m_threatModifier[MAX_SPELL_SCHOOL]</div><div class="ttdef"><b>Definition:</b> Unit.h:1906</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00050">ApplyPercentModFloatVar()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01906">Unit::m_threatModifier</a>, and <a class="el" href="../../#l00292">MAX_SPELL_SCHOOL</a>.</p>

</div>
</div>
<a id="aa6f7dcbeef11bbb6af9fd5d2fb52af3c" name="aa6f7dcbeef11bbb6af9fd5d2fb52af3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6f7dcbeef11bbb6af9fd5d2fb52af3c">&#9670;&#160;</a></span>HandleModTotalPercentStat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModTotalPercentStat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4553</span>{</div>
<div class="line"><span class="lineno"> 4554</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 4555</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4556</span> </div>
<div class="line"><span class="lineno"> 4557</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 4558</span> </div>
<div class="line"><span class="lineno"> 4559</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &lt; -1 || <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() &gt; 4)</div>
<div class="line"><span class="lineno"> 4560</span>    {</div>
<div class="line"><span class="lineno"> 4561</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;WARNING: Misc Value for SPELL_AURA_MOD_PERCENT_STAT not valid&quot;</span>);</div>
<div class="line"><span class="lineno"> 4562</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4563</span>    }</div>
<div class="line"><span class="lineno"> 4564</span> </div>
<div class="line"><span class="lineno"> 4565</span>    <span class="comment">// save current health state</span></div>
<div class="line"><span class="lineno"> 4566</span>    <span class="keywordtype">float</span> healthPct = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0cb842af542d302eb67b743078e1ac01">GetHealthPct</a>();</div>
<div class="line"><span class="lineno"> 4567</span>    <span class="keywordtype">bool</span> alive = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>();</div>
<div class="line"><span class="lineno"> 4568</span>    <span class="keywordtype">float</span> value = <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><span class="lineno"> 4569</span> </div>
<div class="line"><span class="lineno"> 4570</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 67480) <span class="comment">// xinef: hack fix for blessing of sanctuary stats stack with blessing of kings...</span></div>
<div class="line"><span class="lineno"> 4571</span>    {</div>
<div class="line"><span class="lineno"> 4572</span>        <span class="keywordflow">if</span> (value) <span class="comment">// not turned off</span></div>
<div class="line"><span class="lineno"> 4573</span>            value = 10.0f;</div>
<div class="line"><span class="lineno"> 4574</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> i = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code hl_define" href="../../d0/dbd/a02771.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; i++)</div>
<div class="line"><span class="lineno"> 4575</span>        {</div>
<div class="line"><span class="lineno"> 4576</span>            <span class="keywordflow">if</span> (i == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a> || i == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4aba471c4391bfb89db5a1e1f89e7473a5">STAT_STAMINA</a>)</div>
<div class="line"><span class="lineno"> 4577</span>            {</div>
<div class="line"><span class="lineno"> 4578</span>                <span class="keywordflow">if</span> (apply &amp;&amp; (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>()))</div>
<div class="line"><span class="lineno"> 4579</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a607f22b5bdf49b097aada9baf9f58f65">ApplyStatPercentBuffMod</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), value, apply);</div>
<div class="line"><span class="lineno"> 4580</span> </div>
<div class="line"><span class="lineno"> 4581</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0">UNIT_MOD_STAT_START</a> + i), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, value, apply);</div>
<div class="line"><span class="lineno"> 4582</span> </div>
<div class="line"><span class="lineno"> 4583</span>                <span class="keywordflow">if</span> (!apply &amp;&amp; (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>()))</div>
<div class="line"><span class="lineno"> 4584</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a607f22b5bdf49b097aada9baf9f58f65">ApplyStatPercentBuffMod</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), value, apply);</div>
<div class="line"><span class="lineno"> 4585</span>            }</div>
<div class="line"><span class="lineno"> 4586</span>        }</div>
<div class="line"><span class="lineno"> 4587</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 4588</span>    }</div>
<div class="line"><span class="lineno"> 4589</span> </div>
<div class="line"><span class="lineno"> 4590</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> i = <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4aa8b5028ba51024ead888adb32c0b7778">STAT_STRENGTH</a>; i &lt; <a class="code hl_define" href="../../d0/dbd/a02771.html#a0f8923f02eb7dfba43a426b8320354da">MAX_STATS</a>; i++)</div>
<div class="line"><span class="lineno"> 4591</span>    {</div>
<div class="line"><span class="lineno"> 4592</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == i || <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == -1)</div>
<div class="line"><span class="lineno"> 4593</span>        {</div>
<div class="line"><span class="lineno"> 4594</span>            <span class="keywordflow">if</span> (apply &amp;&amp; (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>()))</div>
<div class="line"><span class="lineno"> 4595</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a607f22b5bdf49b097aada9baf9f58f65">ApplyStatPercentBuffMod</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), value, apply);</div>
<div class="line"><span class="lineno"> 4596</span> </div>
<div class="line"><span class="lineno"> 4597</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a814f9f4408cbea1438a89d09e980c5fc">HandleStatModifier</a>(<a class="code hl_enumeration" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bde">UnitMods</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a4c5336cd4be5f0162bd4874b0a1e5bdeae4231ed105be6058ed4deb6b4a5f3ba0">UNIT_MOD_STAT_START</a> + i), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa21edecdaa2e077b2b87bbe5f2b2e7eeab3ddc12b0760eec54f45b90b8671af4d">TOTAL_PCT</a>, value, apply);</div>
<div class="line"><span class="lineno"> 4598</span> </div>
<div class="line"><span class="lineno"> 4599</span>            <span class="keywordflow">if</span> (!apply &amp;&amp; (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>()))</div>
<div class="line"><span class="lineno"> 4600</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a607f22b5bdf49b097aada9baf9f58f65">ApplyStatPercentBuffMod</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4">Stats</a>(i), value, apply);</div>
<div class="line"><span class="lineno"> 4601</span>        }</div>
<div class="line"><span class="lineno"> 4602</span>    }</div>
<div class="line"><span class="lineno"> 4603</span> </div>
<div class="line"><span class="lineno"> 4604</span>    <span class="comment">// recalculate current HP/MP after applying aura modifications (only for spells with SPELL_ATTR0_UNK4 0x00000010 flag)</span></div>
<div class="line"><span class="lineno"> 4605</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4aba471c4391bfb89db5a1e1f89e7473a5">STAT_STAMINA</a> &amp;&amp; <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada46b6f1510e54490ecf24ee8a769b0aab">SPELL_ATTR0_IS_ABILITY</a>))</div>
<div class="line"><span class="lineno"> 4606</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(std::max&lt;uint32&gt;(<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(healthPct * target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() * 0.01f), (alive ? 1 : 0)));</div>
<div class="line"><span class="lineno"> 4607</span>}</div>
<div class="ttc" id="aa02771_html_a9dcd0ba8d94905ba214797c12e7c44ada46b6f1510e54490ecf24ee8a769b0aab"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada46b6f1510e54490ecf24ee8a769b0aab">SPELL_ATTR0_IS_ABILITY</a></div><div class="ttdeci">@ SPELL_ATTR0_IS_ABILITY</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:386</div></div>
<div class="ttc" id="aa02771_html_ad28c24e82986133459dee232a5360bc4aba471c4391bfb89db5a1e1f89e7473a5"><div class="ttname"><a href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4aba471c4391bfb89db5a1e1f89e7473a5">STAT_STAMINA</a></div><div class="ttdeci">@ STAT_STAMINA</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:260</div></div>
<div class="ttc" id="aa08518_html_a607f22b5bdf49b097aada9baf9f58f65"><div class="ttname"><a href="../../db/df9/a08518.html#a607f22b5bdf49b097aada9baf9f58f65">Unit::ApplyStatPercentBuffMod</a></div><div class="ttdeci">void ApplyStatPercentBuffMod(Stats stat, float val, bool apply)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:15332</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l15332">Unit::ApplyStatPercentBuffMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l01031">Unit::GetHealthPct()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l01030">Unit::GetMaxHealth()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l15198">Unit::HandleStatModifier()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l00754">Unit::IsPet()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00157">LOG_ERROR</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l00265">MAX_STATS</a>, <a class="el" href="../../#l15473">Unit::SetHealth()</a>, <a class="el" href="../../#l00386">SPELL_ATTR0_IS_ABILITY</a>, <a class="el" href="../../#l00260">STAT_STAMINA</a>, <a class="el" href="../../#l00258">STAT_STRENGTH</a>, <a class="el" href="../../#l00129">TOTAL_PCT</a>, and <a class="el" href="../../#l00170">UNIT_MOD_STAT_START</a>.</p>

</div>
</div>
<a id="a909a2bcd0d8036c938a7a5583b4ff432" name="a909a2bcd0d8036c938a7a5583b4ff432"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a909a2bcd0d8036c938a7a5583b4ff432">&#9670;&#160;</a></span>HandleModUnattackable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleModUnattackable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2929</span>{</div>
<div class="line"><span class="lineno"> 2930</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 2931</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2932</span> </div>
<div class="line"><span class="lineno"> 2933</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 2934</span> </div>
<div class="line"><span class="lineno"> 2935</span>    <span class="comment">// do not remove unit flag if there are more than this auraEffect of that kind on unit on unit</span></div>
<div class="line"><span class="lineno"> 2936</span>    <span class="keywordflow">if</span> (!apply &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ae528761bbbd24dbe4e995bf7aa52fe21">SPELL_AURA_MOD_UNATTACKABLE</a>))</div>
<div class="line"><span class="lineno"> 2937</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2938</span> </div>
<div class="line"><span class="lineno"> 2939</span>    target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a882b48728ca660c0f6251bb595e8c67e">ApplyModFlag</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881aab4868b631f1cfaf30faee627f7c9dbf">UNIT_FIELD_FLAGS</a>, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a2ecf000dcea1c08aeb8721570707f922">UNIT_FLAG_NON_ATTACKABLE</a>, apply);</div>
<div class="line"><span class="lineno"> 2940</span> </div>
<div class="line"><span class="lineno"> 2941</span>    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><span class="lineno"> 2942</span>    <span class="keywordflow">if</span> (apply &amp;&amp; (mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 2943</span>    {</div>
<div class="line"><span class="lineno"> 2944</span>        <span class="comment">// xinef: this aura should not stop combat (movie with sindragosa proves that)</span></div>
<div class="line"><span class="lineno"> 2945</span>        <span class="comment">//target-&gt;CombatStop();</span></div>
<div class="line"><span class="lineno"> 2946</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aee3106d8223e3a574ea629423fea1b91">RemoveAurasWithInterruptFlags</a>(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><span class="lineno"> 2947</span>    }</div>
<div class="line"><span class="lineno"> 2948</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ae528761bbbd24dbe4e995bf7aa52fe21"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ae528761bbbd24dbe4e995bf7aa52fe21">SPELL_AURA_MOD_UNATTACKABLE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_UNATTACKABLE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:156</div></div>
<div class="ttc" id="aa03521_html_affdd0d554c8bcaaa85a879f5a9d60934a2ecf000dcea1c08aeb8721570707f922"><div class="ttname"><a href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a2ecf000dcea1c08aeb8721570707f922">UNIT_FLAG_NON_ATTACKABLE</a></div><div class="ttdeci">@ UNIT_FLAG_NON_ATTACKABLE</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:230</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00899">Object::ApplyModFlag()</a>, <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00063">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l05181">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../#l00156">SPELL_AURA_MOD_UNATTACKABLE</a>, <a class="el" href="../../#l00117">UNIT_FIELD_FLAGS</a>, and <a class="el" href="../../#l00230">UNIT_FLAG_NON_ATTACKABLE</a>.</p>

</div>
</div>
<a id="a54cde21a5e4a3fb27b8a3b4cde5b2428" name="a54cde21a5e4a3fb27b8a3b4cde5b2428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54cde21a5e4a3fb27b8a3b4cde5b2428">&#9670;&#160;</a></span>HandleNoImmediateEffect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleNoImmediateEffect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  163</span>    {</div>
<div class="line"><span class="lineno">  164</span>        <span class="comment">// aura type not have immediate effect at add/remove and handled by ID in other code place</span></div>
<div class="line"><span class="lineno">  165</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9558df628dc0b414dae883571ead3ee9" name="a9558df628dc0b414dae883571ead3ee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9558df628dc0b414dae883571ead3ee9">&#9670;&#160;</a></span>HandleNoReagentUseAura()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleNoReagentUseAura </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5370</span>{</div>
<div class="line"><span class="lineno"> 5371</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 5372</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5373</span> </div>
<div class="line"><span class="lineno"> 5374</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5375</span> </div>
<div class="line"><span class="lineno"> 5376</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5377</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5378</span> </div>
<div class="line"><span class="lineno"> 5379</span>    <a class="code hl_class" href="../../dd/d66/a05534.html">flag96</a> mask;</div>
<div class="line"><span class="lineno"> 5380</span>    <a class="code hl_typedef" href="../../db/df9/a08518.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; noReagent = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ae2f673fac8c562b187da52c3db035e28">SPELL_AURA_NO_REAGENT_USE</a>);</div>
<div class="line"><span class="lineno"> 5381</span>    <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator i = noReagent.begin(); i != noReagent.end(); ++i)</div>
<div class="line"><span class="lineno"> 5382</span>        mask |= (*i)-&gt;m_spellInfo-&gt;Effects[(*i)-&gt;m_effIndex].SpellClassMask;</div>
<div class="line"><span class="lineno"> 5383</span> </div>
<div class="line"><span class="lineno"> 5384</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac2bd94b573bcf5e80cba886a8e2f540f">SetUInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a3870faef2067e89ff30e761cdd484625">PLAYER_NO_REAGENT_COST_1</a>, mask[0]);</div>
<div class="line"><span class="lineno"> 5385</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac2bd94b573bcf5e80cba886a8e2f540f">SetUInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a3870faef2067e89ff30e761cdd484625">PLAYER_NO_REAGENT_COST_1</a> + 1, mask[1]);</div>
<div class="line"><span class="lineno"> 5386</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac2bd94b573bcf5e80cba886a8e2f540f">SetUInt32Value</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a3870faef2067e89ff30e761cdd484625">PLAYER_NO_REAGENT_COST_1</a> + 2, mask[2]);</div>
<div class="line"><span class="lineno"> 5387</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799ae2f673fac8c562b187da52c3db035e28"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ae2f673fac8c562b187da52c3db035e28">SPELL_AURA_NO_REAGENT_USE</a></div><div class="ttdeci">@ SPELL_AURA_NO_REAGENT_USE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:319</div></div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a3870faef2067e89ff30e761cdd484625"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a3870faef2067e89ff30e761cdd484625">PLAYER_NO_REAGENT_COST_1</a></div><div class="ttdeci">@ PLAYER_NO_REAGENT_COST_1</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:387</div></div>
<div class="ttc" id="aa05534_html"><div class="ttname"><a href="../../dd/d66/a05534.html">flag96</a></div><div class="ttdef"><b>Definition:</b> Util.h:451</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l01349">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00387">PLAYER_NO_REAGENT_COST_1</a>, <a class="el" href="../../#l21312">Unit::SetUInt32Value()</a>, and <a class="el" href="../../#l00319">SPELL_AURA_NO_REAGENT_USE</a>.</p>

</div>
</div>
<a id="a22c04d564645569dc99f91ffc9196da3" name="a22c04d564645569dc99f91ffc9196da3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22c04d564645569dc99f91ffc9196da3">&#9670;&#160;</a></span>HandleNULL()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleNULL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  155</span>    {</div>
<div class="line"><span class="lineno">  156</span>        <span class="comment">// not implemented</span></div>
<div class="line"><span class="lineno">  157</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d4f436ab67e728f66577e043143f32d" name="a2d4f436ab67e728f66577e043143f32d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d4f436ab67e728f66577e043143f32d">&#9670;&#160;</a></span>HandleObsModPowerAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleObsModPowerAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7100</span>{</div>
<div class="line"><span class="lineno"> 7101</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>;</div>
<div class="line"><span class="lineno"> 7102</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a2cb95b74082766aff9aea094edcd3eee">POWER_ALL</a>)</div>
<div class="line"><span class="lineno"> 7103</span>        <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad44d31430fab9282a79e8682822ccd9c">getPowerType</a>();</div>
<div class="line"><span class="lineno"> 7104</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 7105</span>        <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 7106</span> </div>
<div class="line"><span class="lineno"> 7107</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>))</div>
<div class="line"><span class="lineno"> 7108</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7109</span> </div>
<div class="line"><span class="lineno"> 7110</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>))</div>
<div class="line"><span class="lineno"> 7111</span>    {</div>
<div class="line"><span class="lineno"> 7112</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><span class="lineno"> 7113</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7114</span>    }</div>
<div class="line"><span class="lineno"> 7115</span> </div>
<div class="line"><span class="lineno"> 7116</span>    <span class="comment">// don&#39;t regen when permanent aura target has full power</span></div>
<div class="line"><span class="lineno"> 7117</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;IsPermanent() &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>) == target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>))</div>
<div class="line"><span class="lineno"> 7118</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7119</span> </div>
<div class="line"><span class="lineno"> 7120</span>    <span class="comment">// ignore negative values (can be result apply spellmods to aura damage</span></div>
<div class="line"><span class="lineno"> 7121</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> amount = std::max(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, 0) * target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>) / 100;</div>
<div class="line"><span class="lineno"> 7122</span>    <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: {} energize {} for {} dmg inflicted by {}&quot;</span>,</div>
<div class="line"><span class="lineno"> 7123</span>                    <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code hl_function" href="../../d8/d20/a04686.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>(), target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../db/d40/a08190.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>(), amount, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7124</span>    <a class="code hl_struct" href="../../d6/d22/a08506.html">SpellPeriodicAuraLogInfo</a> pInfo(<span class="keyword">this</span>, amount, 0, 0, 0, 0.0f, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 7125</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac6e545dc53605a0c05d8556cf66040c1">SendPeriodicAuraLog</a>(&amp;pInfo);</div>
<div class="line"><span class="lineno"> 7126</span> </div>
<div class="line"><span class="lineno"> 7127</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gain = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a04eac3be7ccc3a12db515b6d2ea20f07">ModifyPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, amount);</div>
<div class="line"><span class="lineno"> 7128</span> </div>
<div class="line"><span class="lineno"> 7129</span>    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 7130</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a83fe30829a1470536e408efbf56dd5f5">getHostileRefMgr</a>().<a class="code hl_function" href="../../d9/da8/a07598.html#a69c355d1c078cfba9927c8c752912b48">threatAssist</a>(caster, <span class="keywordtype">float</span>(gain) * 0.5f, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 7131</span>}</div>
<div class="ttc" id="aa00035_html_a47ac782b14a7531c6232777165a1a161"><div class="ttname"><a href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG(filterType__,...)</div><div class="ttdef"><b>Definition:</b> Log.h:169</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414a2cb95b74082766aff9aea094edcd3eee"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a2cb95b74082766aff9aea094edcd3eee">POWER_ALL</a></div><div class="ttdeci">@ POWER_ALL</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:277</div></div>
<div class="ttc" id="aa04686_html_ac2cb308fb001c35fbaa90489ea6cf478"><div class="ttname"><a href="../../d8/d20/a04686.html#ac2cb308fb001c35fbaa90489ea6cf478">Acore::ToString</a></div><div class="ttdeci">std::string ToString(Type &amp;&amp;val, Params &amp;&amp;... params)</div><div class="ttdef"><b>Definition:</b> StringConvert.h:250</div></div>
<div class="ttc" id="aa07598_html_a69c355d1c078cfba9927c8c752912b48"><div class="ttname"><a href="../../d9/da8/a07598.html#a69c355d1c078cfba9927c8c752912b48">HostileRefMgr::threatAssist</a></div><div class="ttdeci">void threatAssist(Unit *victim, float baseThreat, SpellInfo const *threatSpell=nullptr)</div><div class="ttdef"><b>Definition:</b> HostileRefMgr.cpp:35</div></div>
<div class="ttc" id="aa08190_html_a78f5fb47e3b35addf8984000c175125b"><div class="ttname"><a href="../../db/d40/a08190.html#a78f5fb47e3b35addf8984000c175125b">ObjectGuid::ToString</a></div><div class="ttdeci">std::string ToString() const</div><div class="ttdef"><b>Definition:</b> ObjectGuid.cpp:47</div></div>
<div class="ttc" id="aa08506_html"><div class="ttname"><a href="../../d6/d22/a08506.html">SpellPeriodicAuraLogInfo</a></div><div class="ttdef"><b>Definition:</b> Unit.h:512</div></div>
<div class="ttc" id="aa08518_html_a04eac3be7ccc3a12db515b6d2ea20f07"><div class="ttname"><a href="../../db/df9/a08518.html#a04eac3be7ccc3a12db515b6d2ea20f07">Unit::ModifyPower</a></div><div class="ttdeci">int32 ModifyPower(Powers power, int32 val, bool withPowerUpdate=true)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14144</div></div>
<div class="ttc" id="aa08518_html_a93f83fd909310de2c76382d00d7dbbf1"><div class="ttname"><a href="../../db/df9/a08518.html#a93f83fd909310de2c76382d00d7dbbf1">Unit::GetMaxPower</a></div><div class="ttdeci">uint32 GetMaxPower(Powers power) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1057</div></div>
<div class="ttc" id="aa08518_html_ab78147cd520d2dac6be709b4c80a7de3"><div class="ttname"><a href="../../db/df9/a08518.html#ab78147cd520d2dac6be709b4c80a7de3">Unit::HasUnitState</a></div><div class="ttdeci">bool HasUnitState(const uint32 f) const</div><div class="ttdef"><b>Definition:</b> Unit.h:701</div></div>
<div class="ttc" id="aa08518_html_ac6e545dc53605a0c05d8556cf66040c1"><div class="ttname"><a href="../../db/df9/a08518.html#ac6e545dc53605a0c05d8556cf66040c1">Unit::SendPeriodicAuraLog</a></div><div class="ttdeci">void SendPeriodicAuraLog(SpellPeriodicAuraLogInfo *pInfo)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:6389</div></div>
<div class="ttc" id="aa10782_html_a94ad6938ac754595a00f0f5a8e2019c5"><div class="ttname"><a href="../../d6/d2f/a10782.html#a94ad6938ac754595a00f0f5a8e2019c5">AuraEffect::SendTickImmune</a></div><div class="ttdeci">void SendTickImmune(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:1096</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00907">Unit::getHostileRefMgr()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l01057">Unit::GetMaxPower()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l01056">Unit::GetPower()</a>, <a class="el" href="../../#l01052">Unit::getPowerType()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l14144">Unit::ModifyPower()</a>, <a class="el" href="../../#l00277">POWER_ALL</a>, <a class="el" href="../../#l06389">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../#l01096">SendTickImmune()</a>, <a class="el" href="../../#l00035">HostileRefMgr::threatAssist()</a>, <a class="el" href="../../#l00047">ObjectGuid::ToString()</a>, and <a class="el" href="../../#l00162">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a8f993bd36f255362d3801c708509a868" name="a8f993bd36f255362d3801c708509a868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f993bd36f255362d3801c708509a868">&#9670;&#160;</a></span>HandlePeriodicDamageAurasTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicDamageAurasTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6590</span>{</div>
<div class="line"><span class="lineno"> 6591</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno"> 6592</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6593</span> </div>
<div class="line"><span class="lineno"> 6594</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>) || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae7269683ec5b0e44c3ee49bd6f896615">IsImmunedToDamageOrSchool</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()) || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae1ce57b02474672763481af5c4e7ef6f">IsTotem</a>())</div>
<div class="line"><span class="lineno"> 6595</span>    {</div>
<div class="line"><span class="lineno"> 6596</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><span class="lineno"> 6597</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6598</span>    }</div>
<div class="line"><span class="lineno"> 6599</span> </div>
<div class="line"><span class="lineno"> 6600</span>    <span class="comment">// Consecrate ticks can miss and will not show up in the combat log</span></div>
<div class="line"><span class="lineno"> 6601</span>    <span class="keywordflow">if</span> (caster &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Effects[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].Effect == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 6602</span>            caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8698eb184506578c00250d3c4c352722">SpellHitResult</a>(target, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <span class="keyword">false</span>) != <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096">SPELL_MISS_NONE</a>)</div>
<div class="line"><span class="lineno"> 6603</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6604</span> </div>
<div class="line"><span class="lineno"> 6605</span>    <span class="comment">// some auras remove at specific health level or more</span></div>
<div class="line"><span class="lineno"> 6606</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>)</div>
<div class="line"><span class="lineno"> 6607</span>    {</div>
<div class="line"><span class="lineno"> 6608</span>        <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Id)</div>
<div class="line"><span class="lineno"> 6609</span>        {</div>
<div class="line"><span class="lineno"> 6610</span>            <span class="keywordflow">case</span> 43093:</div>
<div class="line"><span class="lineno"> 6611</span>            <span class="keywordflow">case</span> 31956:</div>
<div class="line"><span class="lineno"> 6612</span>            <span class="keywordflow">case</span> 38801:  <span class="comment">// Grievous Wound</span></div>
<div class="line"><span class="lineno"> 6613</span>            <span class="keywordflow">case</span> 35321:</div>
<div class="line"><span class="lineno"> 6614</span>            <span class="keywordflow">case</span> 38363:</div>
<div class="line"><span class="lineno"> 6615</span>            <span class="keywordflow">case</span> 39215:  <span class="comment">// Gushing Wound</span></div>
<div class="line"><span class="lineno"> 6616</span>                <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5725cda05eb9a83f0731778d27a2a80c">IsFullHealth</a>())</div>
<div class="line"><span class="lineno"> 6617</span>                {</div>
<div class="line"><span class="lineno"> 6618</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Id);</div>
<div class="line"><span class="lineno"> 6619</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6620</span>                }</div>
<div class="line"><span class="lineno"> 6621</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6622</span>            <span class="keywordflow">case</span> 38772: <span class="comment">// Grievous Wound</span></div>
<div class="line"><span class="lineno"> 6623</span>                {</div>
<div class="line"><span class="lineno"> 6624</span>                    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> percent = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ffa8ad5debef66c8aadbaf13f97f522e791">EFFECT_1</a>].CalcValue(caster);</div>
<div class="line"><span class="lineno"> 6625</span>                    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8bcfed25889f307b4849743956ae67fc">HealthBelowPct</a>(percent))</div>
<div class="line"><span class="lineno"> 6626</span>                    {</div>
<div class="line"><span class="lineno"> 6627</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Id);</div>
<div class="line"><span class="lineno"> 6628</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6629</span>                    }</div>
<div class="line"><span class="lineno"> 6630</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6631</span>                }</div>
<div class="line"><span class="lineno"> 6632</span>        }</div>
<div class="line"><span class="lineno"> 6633</span>    }</div>
<div class="line"><span class="lineno"> 6634</span> </div>
<div class="line"><span class="lineno"> 6635</span>    <a class="code hl_struct" href="../../df/d29/a08478.html">CleanDamage</a> cleanDamage = <a class="code hl_struct" href="../../df/d29/a08478.html">CleanDamage</a>(0, 0, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aba4a9525e87c7e76c6c005bc3c3f53a5a9c5d76fbca1fce33b08a1655b9017272">MELEE_HIT_NORMAL</a>);</div>
<div class="line"><span class="lineno"> 6636</span> </div>
<div class="line"><span class="lineno"> 6637</span>    <span class="comment">// ignore non positive values (can be result apply spellmods to aura damage</span></div>
<div class="line"><span class="lineno"> 6638</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = std::max(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), 0);</div>
<div class="line"><span class="lineno"> 6639</span> </div>
<div class="line"><span class="lineno"> 6640</span>    <span class="comment">// If the damage is percent-max-health based, calculate damage before the Modify hook</span></div>
<div class="line"><span class="lineno"> 6641</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a65c8ec2c8667d6c49c278491c113a374">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>)</div>
<div class="line"><span class="lineno"> 6642</span>    {</div>
<div class="line"><span class="lineno"> 6643</span>        <span class="comment">// xinef: ceil obtained value, it may happen that 10 ticks for 10% damage may not kill owner</span></div>
<div class="line"><span class="lineno"> 6644</span>        damage = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(std::ceil(CalculatePct&lt;float, float&gt;(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>(), damage)));</div>
<div class="line"><span class="lineno"> 6645</span>    }</div>
<div class="line"><span class="lineno"> 6646</span> </div>
<div class="line"><span class="lineno"> 6647</span>    <span class="comment">// Script Hook For HandlePeriodicDamageAurasTick -- Allow scripts to change the Damage pre class mitigation calculations</span></div>
<div class="line"><span class="lineno"> 6648</span>    <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;ModifyPeriodicDamageAurasTick(target, caster, damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 6649</span> </div>
<div class="line"><span class="lineno"> 6650</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac53944779fa1544c06a3fc3dc74f5294">GetAI</a>())</div>
<div class="line"><span class="lineno"> 6651</span>    {</div>
<div class="line"><span class="lineno"> 6652</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac53944779fa1544c06a3fc3dc74f5294">GetAI</a>()-&gt;<a class="code hl_function" href="../../d9/de2/a06062.html#abbffac590ddab45bf2e2085015e9d8bd">OnCalculatePeriodicTickReceived</a>(damage, caster);</div>
<div class="line"><span class="lineno"> 6653</span>    }</div>
<div class="line"><span class="lineno"> 6654</span> </div>
<div class="line"><span class="lineno"> 6655</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>)</div>
<div class="line"><span class="lineno"> 6656</span>    {</div>
<div class="line"><span class="lineno"> 6657</span>        <span class="comment">// xinef: leave only target depending bonuses, rest is handled in calculate amount</span></div>
<div class="line"><span class="lineno"> 6658</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetType() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a> &amp;&amp; caster)</div>
<div class="line"><span class="lineno"> 6659</span>            damage = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aeee2a716058141444b84649bc9c86d70">SpellDamageBonusDone</a>(target, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), 0.0f, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetStackAmount());</div>
<div class="line"><span class="lineno"> 6660</span>        damage = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8e8d13276a1ebef454bd4fc27fedc3f1">SpellDamageBonusTaken</a>(caster, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetStackAmount());</div>
<div class="line"><span class="lineno"> 6661</span> </div>
<div class="line"><span class="lineno"> 6662</span>        <span class="comment">// Calculate armor mitigation</span></div>
<div class="line"><span class="lineno"> 6663</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../db/df9/a08518.html#ad53cf516713368986bab84af35245b53">Unit::IsDamageReducedByArmor</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno"> 6664</span>        {</div>
<div class="line"><span class="lineno"> 6665</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damageReductedArmor = <a class="code hl_function" href="../../db/df9/a08518.html#a3dee46b283ebc2e4bcace26c01895387">Unit::CalcArmorReducedDamage</a>(caster, target, damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a7595664aebf24652d3ce95d6bdc18ebe">GetCasterLevel</a>());</div>
<div class="line"><span class="lineno"> 6666</span>            cleanDamage.<a class="code hl_variable" href="../../df/d29/a08478.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a> += damage - damageReductedArmor;</div>
<div class="line"><span class="lineno"> 6667</span>            damage = damageReductedArmor;</div>
<div class="line"><span class="lineno"> 6668</span>        }</div>
<div class="line"><span class="lineno"> 6669</span> </div>
<div class="line"><span class="lineno"> 6670</span>        <span class="comment">// Curse of Agony damage-per-tick calculation</span></div>
<div class="line"><span class="lineno"> 6671</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyName == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a> &amp;&amp; (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyFlags[0] &amp; 0x400) &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellIconID == 544)</div>
<div class="line"><span class="lineno"> 6672</span>        {</div>
<div class="line"><span class="lineno"> 6673</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> totalTick = <a class="code hl_function" href="../../d6/d2f/a10782.html#a67ca18798f448847e77665752fa4a32c">GetTotalTicks</a>();</div>
<div class="line"><span class="lineno"> 6674</span>            <span class="comment">// 1..4 ticks, 1/2 from normal tick damage</span></div>
<div class="line"><span class="lineno"> 6675</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> &lt;= totalTick / 3)</div>
<div class="line"><span class="lineno"> 6676</span>                damage = damage / 2;</div>
<div class="line"><span class="lineno"> 6677</span>            <span class="comment">// 9..12 ticks, 3/2 from normal tick damage</span></div>
<div class="line"><span class="lineno"> 6678</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> &gt; totalTick * 2 / 3)</div>
<div class="line"><span class="lineno"> 6679</span>                damage += (damage + 1) / 2;       <span class="comment">// +1 prevent 0.5 damage possible lost at 1..4 ticks</span></div>
<div class="line"><span class="lineno"> 6680</span>            <span class="comment">// 5..8 ticks have normal tick damage</span></div>
<div class="line"><span class="lineno"> 6681</span>        }</div>
<div class="line"><span class="lineno"> 6682</span>    }</div>
<div class="line"><span class="lineno"> 6683</span> </div>
<div class="line"><span class="lineno"> 6684</span>    <span class="comment">// calculate crit chance</span></div>
<div class="line"><span class="lineno"> 6685</span>    <span class="keywordtype">bool</span> crit = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6686</span>    <span class="keywordflow">if</span> ((crit = <a class="code hl_function" href="../../dc/dc9/a00389.html#a4b15099bc81731469c5078a778673c94">roll_chance_f</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a374ccc25c81de041d10e1ed2b52a238c">GetCritChance</a>())))</div>
<div class="line"><span class="lineno"> 6687</span>        damage = <a class="code hl_function" href="../../db/df9/a08518.html#a8a91714bd4edbbb272b5c90cefc8089d">Unit::SpellCriticalDamageBonus</a>(caster, <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, damage, target);</div>
<div class="line"><span class="lineno"> 6688</span> </div>
<div class="line"><span class="lineno"> 6689</span>    <span class="comment">// Auras reducing damage from AOE spells</span></div>
<div class="line"><span class="lineno"> 6690</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].IsAreaAuraEffect() || <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].IsTargetingArea() || <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].Effect == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a>) <span class="comment">// some persistent area auras have targets like A=53 B=28</span></div>
<div class="line"><span class="lineno"> 6691</span>    {</div>
<div class="line"><span class="lineno"> 6692</span>        damage = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a4f7bacd5659d1e3ca130dc7cf7df7bee">CalculateAOEDamageReduction</a>(damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a72ac013c860d3af649879442115971ab">SchoolMask</a>, caster);</div>
<div class="line"><span class="lineno"> 6693</span>    }</div>
<div class="line"><span class="lineno"> 6694</span> </div>
<div class="line"><span class="lineno"> 6695</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> dmg = damage;</div>
<div class="line"><span class="lineno"> 6696</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> mitigatedDamage = cleanDamage.<a class="code hl_variable" href="../../df/d29/a08478.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a>;</div>
<div class="line"><span class="lineno"> 6697</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1360fcb79edcab37b0a7b362bb6e7b2a">CanApplyResilience</a>())</div>
<div class="line"><span class="lineno"> 6698</span>    {</div>
<div class="line"><span class="lineno"> 6699</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> resilienceReduction = dmg;</div>
<div class="line"><span class="lineno"> 6700</span>        <a class="code hl_function" href="../../db/df9/a08518.html#aa347b1510155f26b954000eda2aa0775">Unit::ApplyResilience</a>(target, <span class="keyword">nullptr</span>, &amp;resilienceReduction, crit, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa60e4ef21982cf41b489e5242f01b64fa40402f79e36b6c6687d2a6511bb19aad">CR_CRIT_TAKEN_SPELL</a>);</div>
<div class="line"><span class="lineno"> 6701</span> </div>
<div class="line"><span class="lineno"> 6702</span>        resilienceReduction = dmg - resilienceReduction;</div>
<div class="line"><span class="lineno"> 6703</span>        dmg -= resilienceReduction;</div>
<div class="line"><span class="lineno"> 6704</span>        mitigatedDamage += resilienceReduction;</div>
<div class="line"><span class="lineno"> 6705</span>    }</div>
<div class="line"><span class="lineno"> 6706</span> </div>
<div class="line"><span class="lineno"> 6707</span>    damage = std::max(0, dmg);</div>
<div class="line"><span class="lineno"> 6708</span>    cleanDamage.<a class="code hl_variable" href="../../df/d29/a08478.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a> = std::max(0, mitigatedDamage);</div>
<div class="line"><span class="lineno"> 6709</span> </div>
<div class="line"><span class="lineno"> 6710</span>    <a class="code hl_class" href="../../de/dcb/a08482.html">DamageInfo</a> dmgInfo(caster, target, damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, cleanDamage.<a class="code hl_variable" href="../../df/d29/a08478.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a>);</div>
<div class="line"><span class="lineno"> 6711</span>    <a class="code hl_function" href="../../db/df9/a08518.html#af003db5856d82574c3db286a3a0186fd">Unit::CalcAbsorbResist</a>(dmgInfo);</div>
<div class="line"><span class="lineno"> 6712</span> </div>
<div class="line"><span class="lineno"> 6713</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> absorb = dmgInfo.GetAbsorb();</div>
<div class="line"><span class="lineno"> 6714</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> resist = dmgInfo.GetResist();</div>
<div class="line"><span class="lineno"> 6715</span>    damage = dmgInfo.GetDamage();</div>
<div class="line"><span class="lineno"> 6716</span> </div>
<div class="line"><span class="lineno"> 6717</span>    <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: {} attacked {} for {} dmg inflicted by {} abs is {}&quot;</span>,</div>
<div class="line"><span class="lineno"> 6718</span>                    <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code hl_function" href="../../d8/d20/a04686.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>(), target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../db/d40/a08190.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>(), damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), absorb);</div>
<div class="line"><span class="lineno"> 6719</span>    <a class="code hl_function" href="../../db/df9/a08518.html#af0c5f2f98b065f2d3976f18e4bc964a4">Unit::DealDamageMods</a>(target, damage, &amp;absorb);</div>
<div class="line"><span class="lineno"> 6720</span> </div>
<div class="line"><span class="lineno"> 6721</span>    <span class="comment">// Set trigger flag</span></div>
<div class="line"><span class="lineno"> 6722</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procAttacker = <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce">PROC_FLAG_DONE_PERIODIC</a>;</div>
<div class="line"><span class="lineno"> 6723</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procVictim   = <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4">PROC_FLAG_TAKEN_PERIODIC</a>;</div>
<div class="line"><span class="lineno"> 6724</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procEx = (crit ? <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46a970bdf3e5f6192a44f1047c0a9c01310">PROC_EX_CRITICAL_HIT</a> : <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46aa0c2a4e7377d6217e94cc8fc7c77b5b2">PROC_EX_NORMAL_HIT</a>) | <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46a94a1aa9ac3cd331d95f2d0c421f35f59">PROC_EX_INTERNAL_DOT</a>;</div>
<div class="line"><span class="lineno"> 6725</span>    <span class="keywordflow">if</span> (absorb &gt; 0)</div>
<div class="line"><span class="lineno"> 6726</span>        procEx |= <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46ad0f376666fe646253e445dedfae7753f">PROC_EX_ABSORB</a>;</div>
<div class="line"><span class="lineno"> 6727</span> </div>
<div class="line"><span class="lineno"> 6728</span>    <span class="keywordflow">if</span> (damage)</div>
<div class="line"><span class="lineno"> 6729</span>        procVictim |= <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6abcffcf75e3fd5015383c586153dc32c1">PROC_FLAG_TAKEN_DAMAGE</a>;</div>
<div class="line"><span class="lineno"> 6730</span> </div>
<div class="line"><span class="lineno"> 6731</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> overkill = damage - target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>();</div>
<div class="line"><span class="lineno"> 6732</span>    <span class="keywordflow">if</span> (overkill &lt; 0)</div>
<div class="line"><span class="lineno"> 6733</span>        overkill = 0;</div>
<div class="line"><span class="lineno"> 6734</span> </div>
<div class="line"><span class="lineno"> 6735</span>    <a class="code hl_struct" href="../../d6/d22/a08506.html">SpellPeriodicAuraLogInfo</a> pInfo(<span class="keyword">this</span>, damage, overkill, absorb, resist, 0.0f, crit);</div>
<div class="line"><span class="lineno"> 6736</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac6e545dc53605a0c05d8556cf66040c1">SendPeriodicAuraLog</a>(&amp;pInfo);</div>
<div class="line"><span class="lineno"> 6737</span> </div>
<div class="line"><span class="lineno"> 6738</span>    <a class="code hl_function" href="../../db/df9/a08518.html#afe2cdf561288531d745b6a3eb7182a98">Unit::DealDamage</a>(caster, target, damage, &amp;cleanDamage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 6739</span> </div>
<div class="line"><span class="lineno"> 6740</span>    <a class="code hl_function" href="../../db/df9/a08518.html#aad2d8dec02abdea33b3447bea9407a4f">Unit::ProcDamageAndSpell</a>(caster, target, caster ? procAttacker : 0, procVictim, procEx, damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <span class="keyword">nullptr</span>, &amp;dmgInfo);</div>
<div class="line"><span class="lineno"> 6741</span>}</div>
<div class="ttc" id="aa00389_html_a4b15099bc81731469c5078a778673c94"><div class="ttname"><a href="../../dc/dc9/a00389.html#a4b15099bc81731469c5078a778673c94">roll_chance_f</a></div><div class="ttdeci">bool roll_chance_f(float chance)</div><div class="ttdef"><b>Definition:</b> Random.h:53</div></div>
<div class="ttc" id="aa02771_html_a091a832125de330a1d2fb91d57c0e1ffa8ad5debef66c8aadbaf13f97f522e791"><div class="ttname"><a href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ffa8ad5debef66c8aadbaf13f97f522e791">EFFECT_1</a></div><div class="ttdeci">@ EFFECT_1</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:32</div></div>
<div class="ttc" id="aa02771_html_a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1"><div class="ttname"><a href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a></div><div class="ttdeci">@ SPELL_EFFECT_PERSISTENT_AREA_AURA</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:805</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a></div><div class="ttdeci">@ SPELLFAMILY_WARLOCK</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3533</div></div>
<div class="ttc" id="aa02771_html_ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096"><div class="ttname"><a href="../../d0/dbd/a02771.html#ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096">SPELL_MISS_NONE</a></div><div class="ttdeci">@ SPELL_MISS_NONE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1519</div></div>
<div class="ttc" id="aa03092_html_ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4"><div class="ttname"><a href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a></div><div class="ttdeci">@ DYNOBJ_AURA_TYPE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:386</div></div>
<div class="ttc" id="aa03110_html_ac9aaef596a1061b6b944e1dc0e679b46a94a1aa9ac3cd331d95f2d0c421f35f59"><div class="ttname"><a href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46a94a1aa9ac3cd331d95f2d0c421f35f59">PROC_EX_INTERNAL_DOT</a></div><div class="ttdeci">@ PROC_EX_INTERNAL_DOT</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:219</div></div>
<div class="ttc" id="aa03110_html_ac9aaef596a1061b6b944e1dc0e679b46a970bdf3e5f6192a44f1047c0a9c01310"><div class="ttname"><a href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46a970bdf3e5f6192a44f1047c0a9c01310">PROC_EX_CRITICAL_HIT</a></div><div class="ttdeci">@ PROC_EX_CRITICAL_HIT</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:195</div></div>
<div class="ttc" id="aa03110_html_ac9aaef596a1061b6b944e1dc0e679b46aa0c2a4e7377d6217e94cc8fc7c77b5b2"><div class="ttname"><a href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46aa0c2a4e7377d6217e94cc8fc7c77b5b2">PROC_EX_NORMAL_HIT</a></div><div class="ttdeci">@ PROC_EX_NORMAL_HIT</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:194</div></div>
<div class="ttc" id="aa03110_html_ac9aaef596a1061b6b944e1dc0e679b46ad0f376666fe646253e445dedfae7753f"><div class="ttname"><a href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46ad0f376666fe646253e445dedfae7753f">PROC_EX_ABSORB</a></div><div class="ttdeci">@ PROC_EX_ABSORB</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:204</div></div>
<div class="ttc" id="aa03110_html_ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce"><div class="ttname"><a href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce">PROC_FLAG_DONE_PERIODIC</a></div><div class="ttdeci">@ PROC_FLAG_DONE_PERIODIC</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:134</div></div>
<div class="ttc" id="aa03110_html_ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4"><div class="ttname"><a href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4">PROC_FLAG_TAKEN_PERIODIC</a></div><div class="ttdeci">@ PROC_FLAG_TAKEN_PERIODIC</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:135</div></div>
<div class="ttc" id="aa03110_html_ade1c2af066d4cf1bbcd88f13f01cd4d6abcffcf75e3fd5015383c586153dc32c1"><div class="ttname"><a href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6abcffcf75e3fd5015383c586153dc32c1">PROC_FLAG_TAKEN_DAMAGE</a></div><div class="ttdeci">@ PROC_FLAG_TAKEN_DAMAGE</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:137</div></div>
<div class="ttc" id="aa03515_html_aa60e4ef21982cf41b489e5242f01b64fa40402f79e36b6c6687d2a6511bb19aad"><div class="ttname"><a href="../../de/d3d/a03515.html#aa60e4ef21982cf41b489e5242f01b64fa40402f79e36b6c6687d2a6511bb19aad">CR_CRIT_TAKEN_SPELL</a></div><div class="ttdeci">@ CR_CRIT_TAKEN_SPELL</div><div class="ttdef"><b>Definition:</b> Unit.h:233</div></div>
<div class="ttc" id="aa03515_html_aba4a9525e87c7e76c6c005bc3c3f53a5a9c5d76fbca1fce33b08a1655b9017272"><div class="ttname"><a href="../../de/d3d/a03515.html#aba4a9525e87c7e76c6c005bc3c3f53a5a9c5d76fbca1fce33b08a1655b9017272">MELEE_HIT_NORMAL</a></div><div class="ttdeci">@ MELEE_HIT_NORMAL</div><div class="ttdef"><b>Definition:</b> Unit.h:286</div></div>
<div class="ttc" id="aa06062_html_abbffac590ddab45bf2e2085015e9d8bd"><div class="ttname"><a href="../../d9/de2/a06062.html#abbffac590ddab45bf2e2085015e9d8bd">UnitAI::OnCalculatePeriodicTickReceived</a></div><div class="ttdeci">virtual void OnCalculatePeriodicTickReceived(uint32 &amp;, Unit *)</div><div class="ttdoc">Called during calculation when receiving periodic healing or damage (DoT or HoT)</div><div class="ttdef"><b>Definition:</b> UnitAI.h:385</div></div>
<div class="ttc" id="aa08478_html"><div class="ttname"><a href="../../df/d29/a08478.html">CleanDamage</a></div><div class="ttdef"><b>Definition:</b> Unit.h:315</div></div>
<div class="ttc" id="aa08478_html_a6aeffc94560ac510c0b89e4384a2f41a"><div class="ttname"><a href="../../df/d29/a08478.html#a6aeffc94560ac510c0b89e4384a2f41a">CleanDamage::mitigated_damage</a></div><div class="ttdeci">uint32 mitigated_damage</div><div class="ttdef"><b>Definition:</b> Unit.h:320</div></div>
<div class="ttc" id="aa08482_html"><div class="ttname"><a href="../../de/dcb/a08482.html">DamageInfo</a></div><div class="ttdef"><b>Definition:</b> Unit.h:330</div></div>
<div class="ttc" id="aa08518_html_a3dee46b283ebc2e4bcace26c01895387"><div class="ttname"><a href="../../db/df9/a08518.html#a3dee46b283ebc2e4bcace26c01895387">Unit::CalcArmorReducedDamage</a></div><div class="ttdeci">static uint32 CalcArmorReducedDamage(Unit const *attacker, Unit const *victim, const uint32 damage, SpellInfo const *spellInfo, uint8 attackerLevel=0, WeaponAttackType attackType=MAX_ATTACK)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:2031</div></div>
<div class="ttc" id="aa08518_html_a4f7bacd5659d1e3ca130dc7cf7df7bee"><div class="ttname"><a href="../../db/df9/a08518.html#a4f7bacd5659d1e3ca130dc7cf7df7bee">Unit::CalculateAOEDamageReduction</a></div><div class="ttdeci">int32 CalculateAOEDamageReduction(int32 damage, uint32 schoolMask, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:20390</div></div>
<div class="ttc" id="aa08518_html_a5725cda05eb9a83f0731778d27a2a80c"><div class="ttname"><a href="../../db/df9/a08518.html#a5725cda05eb9a83f0731778d27a2a80c">Unit::IsFullHealth</a></div><div class="ttdeci">bool IsFullHealth() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1035</div></div>
<div class="ttc" id="aa08518_html_a8698eb184506578c00250d3c4c352722"><div class="ttname"><a href="../../db/df9/a08518.html#a8698eb184506578c00250d3c4c352722">Unit::SpellHitResult</a></div><div class="ttdeci">SpellMissInfo SpellHitResult(Unit *victim, SpellInfo const *spell, bool canReflect=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:3470</div></div>
<div class="ttc" id="aa08518_html_a8a91714bd4edbbb272b5c90cefc8089d"><div class="ttname"><a href="../../db/df9/a08518.html#a8a91714bd4edbbb272b5c90cefc8089d">Unit::SpellCriticalDamageBonus</a></div><div class="ttdeci">static uint32 SpellCriticalDamageBonus(Unit const *caster, SpellInfo const *spellProto, uint32 damage, Unit const *victim)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:12276</div></div>
<div class="ttc" id="aa08518_html_a8bcfed25889f307b4849743956ae67fc"><div class="ttname"><a href="../../db/df9/a08518.html#a8bcfed25889f307b4849743956ae67fc">Unit::HealthBelowPct</a></div><div class="ttdeci">bool HealthBelowPct(int32 pct) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1037</div></div>
<div class="ttc" id="aa08518_html_a8e8d13276a1ebef454bd4fc27fedc3f1"><div class="ttname"><a href="../../db/df9/a08518.html#a8e8d13276a1ebef454bd4fc27fedc3f1">Unit::SpellDamageBonusTaken</a></div><div class="ttdeci">uint32 SpellDamageBonusTaken(Unit *caster, SpellInfo const *spellProto, uint32 pdamage, DamageEffectType damagetype, uint32 stack=1)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:11786</div></div>
<div class="ttc" id="aa08518_html_aa347b1510155f26b954000eda2aa0775"><div class="ttname"><a href="../../db/df9/a08518.html#aa347b1510155f26b954000eda2aa0775">Unit::ApplyResilience</a></div><div class="ttdeci">static void ApplyResilience(Unit const *victim, float *crit, int32 *damage, bool isCrit, CombatRating type)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:18923</div></div>
<div class="ttc" id="aa08518_html_aad2d8dec02abdea33b3447bea9407a4f"><div class="ttname"><a href="../../db/df9/a08518.html#aad2d8dec02abdea33b3447bea9407a4f">Unit::ProcDamageAndSpell</a></div><div class="ttdeci">static void ProcDamageAndSpell(Unit *actor, Unit *victim, uint32 procAttacker, uint32 procVictim, uint32 procEx, uint32 amount, WeaponAttackType attType=BASE_ATTACK, SpellInfo const *procSpellInfo=nullptr, SpellInfo const *procAura=nullptr, int8 procAuraEffectIndex=-1, Spell const *procSpell=nullptr, DamageInfo *damageInfo=nullptr, HealInfo *healInfo=nullptr, uint32 procPhase=2)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:6378</div></div>
<div class="ttc" id="aa08518_html_ac53944779fa1544c06a3fc3dc74f5294"><div class="ttname"><a href="../../db/df9/a08518.html#ac53944779fa1544c06a3fc3dc74f5294">Unit::GetAI</a></div><div class="ttdeci">UnitAI * GetAI()</div><div class="ttdef"><b>Definition:</b> Unit.h:658</div></div>
<div class="ttc" id="aa08518_html_ad53cf516713368986bab84af35245b53"><div class="ttname"><a href="../../db/df9/a08518.html#ad53cf516713368986bab84af35245b53">Unit::IsDamageReducedByArmor</a></div><div class="ttdeci">static bool IsDamageReducedByArmor(SpellSchoolMask damageSchoolMask, SpellInfo const *spellInfo=nullptr, uint8 effIndex=MAX_SPELL_EFFECTS)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:2008</div></div>
<div class="ttc" id="aa08518_html_ae7269683ec5b0e44c3ee49bd6f896615"><div class="ttname"><a href="../../db/df9/a08518.html#ae7269683ec5b0e44c3ee49bd6f896615">Unit::IsImmunedToDamageOrSchool</a></div><div class="ttdeci">bool IsImmunedToDamageOrSchool(SpellSchoolMask meleeSchoolMask) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:12896</div></div>
<div class="ttc" id="aa08518_html_af003db5856d82574c3db286a3a0186fd"><div class="ttname"><a href="../../db/df9/a08518.html#af003db5856d82574c3db286a3a0186fd">Unit::CalcAbsorbResist</a></div><div class="ttdeci">static void CalcAbsorbResist(DamageInfo &amp;dmgInfo, bool Splited=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:2147</div></div>
<div class="ttc" id="aa08518_html_af0c5f2f98b065f2d3976f18e4bc964a4"><div class="ttname"><a href="../../db/df9/a08518.html#af0c5f2f98b065f2d3976f18e4bc964a4">Unit::DealDamageMods</a></div><div class="ttdeci">static void DealDamageMods(Unit const *victim, uint32 &amp;damage, uint32 *absorb)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:800</div></div>
<div class="ttc" id="aa08518_html_afe2cdf561288531d745b6a3eb7182a98"><div class="ttname"><a href="../../db/df9/a08518.html#afe2cdf561288531d745b6a3eb7182a98">Unit::DealDamage</a></div><div class="ttdeci">static uint32 DealDamage(Unit *attacker, Unit *victim, uint32 damage, CleanDamage const *cleanDamage=nullptr, DamageEffectType damagetype=DIRECT_DAMAGE, SpellSchoolMask damageSchoolMask=SPELL_SCHOOL_MASK_NORMAL, SpellInfo const *spellProto=nullptr, bool durabilityLoss=true, bool allowGM=false, Spell const *spell=nullptr)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:810</div></div>
<div class="ttc" id="aa10782_html_a1360fcb79edcab37b0a7b362bb6e7b2a"><div class="ttname"><a href="../../d6/d2f/a10782.html#a1360fcb79edcab37b0a7b362bb6e7b2a">AuraEffect::CanApplyResilience</a></div><div class="ttdeci">bool CanApplyResilience() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:111</div></div>
<div class="ttc" id="aa10782_html_a374ccc25c81de041d10e1ed2b52a238c"><div class="ttname"><a href="../../d6/d2f/a10782.html#a374ccc25c81de041d10e1ed2b52a238c">AuraEffect::GetCritChance</a></div><div class="ttdeci">float GetCritChance() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:108</div></div>
<div class="ttc" id="aa10782_html_a67ca18798f448847e77665752fa4a32c"><div class="ttname"><a href="../../d6/d2f/a10782.html#a67ca18798f448847e77665752fa4a32c">AuraEffect::GetTotalTicks</a></div><div class="ttdeci">int32 GetTotalTicks() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:7365</div></div>
<div class="ttc" id="aa10782_html_a7595664aebf24652d3ce95d6bdc18ebe"><div class="ttname"><a href="../../d6/d2f/a10782.html#a7595664aebf24652d3ce95d6bdc18ebe">AuraEffect::GetCasterLevel</a></div><div class="ttdeci">uint8 GetCasterLevel() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:110</div></div>
<div class="ttc" id="aa10898_html_a72ac013c860d3af649879442115971ab"><div class="ttname"><a href="../../d2/db6/a10898.html#a72ac013c860d3af649879442115971ab">SpellInfo::SchoolMask</a></div><div class="ttdeci">uint32 SchoolMask</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:392</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l18923">Unit::ApplyResilience()</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../#l02031">Unit::CalcArmorReducedDamage()</a>, <a class="el" href="../../#l20390">Unit::CalculateAOEDamageReduction()</a>, <a class="el" href="../../#l00111">CanApplyResilience()</a>, <a class="el" href="../../#l00233">CR_CRIT_TAKEN_SPELL</a>, <a class="el" href="../../#l00810">Unit::DealDamage()</a>, <a class="el" href="../../#l00800">Unit::DealDamageMods()</a>, <a class="el" href="../../#l00250">DOT</a>, <a class="el" href="../../#l00386">DYNOBJ_AURA_TYPE</a>, <a class="el" href="../../#l00032">EFFECT_1</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00365">DamageInfo::GetAbsorb()</a>, <a class="el" href="../../#l00658">Unit::GetAI()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00110">GetCasterLevel()</a>, <a class="el" href="../../#l00108">GetCritChance()</a>, <a class="el" href="../../#l00364">DamageInfo::GetDamage()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l01029">Unit::GetHealth()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l01030">Unit::GetMaxHealth()</a>, <a class="el" href="../../#l00366">DamageInfo::GetResist()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l07365">GetTotalTicks()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l01037">Unit::HealthBelowPct()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l02008">Unit::IsDamageReducedByArmor()</a>, <a class="el" href="../../#l01035">Unit::IsFullHealth()</a>, <a class="el" href="../../#l12896">Unit::IsImmunedToDamageOrSchool()</a>, <a class="el" href="../../#l00756">Unit::IsTotem()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l00144">m_tickNumber</a>, <a class="el" href="../../#l00286">MELEE_HIT_NORMAL</a>, <a class="el" href="../../#l00320">CleanDamage::mitigated_damage</a>, <a class="el" href="../../#l00385">UnitAI::OnCalculatePeriodicTickReceived()</a>, <a class="el" href="../../#l00204">PROC_EX_ABSORB</a>, <a class="el" href="../../#l00195">PROC_EX_CRITICAL_HIT</a>, <a class="el" href="../../#l00219">PROC_EX_INTERNAL_DOT</a>, <a class="el" href="../../#l00194">PROC_EX_NORMAL_HIT</a>, <a class="el" href="../../#l00134">PROC_FLAG_DONE_PERIODIC</a>, <a class="el" href="../../#l00137">PROC_FLAG_TAKEN_DAMAGE</a>, <a class="el" href="../../#l00135">PROC_FLAG_TAKEN_PERIODIC</a>, <a class="el" href="../../#l06378">Unit::ProcDamageAndSpell()</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../#l00053">roll_chance_f()</a>, <a class="el" href="../../#l00392">SpellInfo::SchoolMask</a>, <a class="el" href="../../#l06389">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../#l01096">SendTickImmune()</a>, <a class="el" href="../../#l00066">SPELL_AURA_PERIODIC_DAMAGE</a>, <a class="el" href="../../#l00152">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>, <a class="el" href="../../#l00805">SPELL_EFFECT_PERSISTENT_AREA_AURA</a>, <a class="el" href="../../#l01519">SPELL_MISS_NONE</a>, <a class="el" href="../../#l12276">Unit::SpellCriticalDamageBonus()</a>, <a class="el" href="../../#l11610">Unit::SpellDamageBonusDone()</a>, <a class="el" href="../../#l11786">Unit::SpellDamageBonusTaken()</a>, <a class="el" href="../../#l03533">SPELLFAMILY_WARLOCK</a>, <a class="el" href="../../#l03470">Unit::SpellHitResult()</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00047">ObjectGuid::ToString()</a>, and <a class="el" href="../../#l00162">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a61bdb07de2581972c79e3c3e46ecdbbe" name="a61bdb07de2581972c79e3c3e46ecdbbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61bdb07de2581972c79e3c3e46ecdbbe">&#9670;&#160;</a></span>HandlePeriodicDummyAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicDummyAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6197</span>{</div>
<div class="line"><span class="lineno"> 6198</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyName)</div>
<div class="line"><span class="lineno"> 6199</span>    {</div>
<div class="line"><span class="lineno"> 6200</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>:</div>
<div class="line"><span class="lineno"> 6201</span>            {</div>
<div class="line"><span class="lineno"> 6202</span>                <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Id)</div>
<div class="line"><span class="lineno"> 6203</span>                {</div>
<div class="line"><span class="lineno"> 6204</span>                    <span class="comment">// Frenzied Regeneration</span></div>
<div class="line"><span class="lineno"> 6205</span>                    <span class="keywordflow">case</span> 22842:</div>
<div class="line"><span class="lineno"> 6206</span>                        {</div>
<div class="line"><span class="lineno"> 6207</span>                            <span class="comment">// Converts up to 10 rage per second into health for $d.  Each point of rage is converted into ${$m2/10}.1% of max health.</span></div>
<div class="line"><span class="lineno"> 6208</span>                            <span class="comment">// Should be manauser</span></div>
<div class="line"><span class="lineno"> 6209</span>                            <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#adb1f3809f1c2fa9bae8ed22d3fa25b13">HasActivePowerType</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>))</div>
<div class="line"><span class="lineno"> 6210</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6211</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> rage = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>);</div>
<div class="line"><span class="lineno"> 6212</span>                            <span class="comment">// Nothing todo</span></div>
<div class="line"><span class="lineno"> 6213</span>                            <span class="keywordflow">if</span> (rage == 0)</div>
<div class="line"><span class="lineno"> 6214</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6215</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> mod = (rage &lt; 100) ? rage : 100;</div>
<div class="line"><span class="lineno"> 6216</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> points = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a31bb114ec4c1defc9e19d29840c6a6d0">CalculateSpellDamage</a>(target, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), 1);</div>
<div class="line"><span class="lineno"> 6217</span>                            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> regen = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() * (mod * points / 10) / 1000;</div>
<div class="line"><span class="lineno"> 6218</span>                            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 22845, &amp;regen, 0, 0, <span class="keyword">true</span>, 0, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6219</span>                            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a41781ed2f15641ad0aa30b2767ab2b66">SetPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a1b514bf3a42e9a5dc4271bd25b7dce7e">POWER_RAGE</a>, rage - mod);</div>
<div class="line"><span class="lineno"> 6220</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6221</span>                        }</div>
<div class="line"><span class="lineno"> 6222</span>                }</div>
<div class="line"><span class="lineno"> 6223</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6224</span>            }</div>
<div class="line"><span class="lineno"> 6225</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba66df9b34a3b922a8242d3dfb74494026">SPELLFAMILY_HUNTER</a>:</div>
<div class="line"><span class="lineno"> 6226</span>            {</div>
<div class="line"><span class="lineno"> 6227</span>                <span class="comment">// Explosive Shot</span></div>
<div class="line"><span class="lineno"> 6228</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a30452de2bd62607418f3962d00124144">SpellFamilyFlags</a>[1] &amp; 0x80000000)</div>
<div class="line"><span class="lineno"> 6229</span>                {</div>
<div class="line"><span class="lineno"> 6230</span>                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 6231</span>                        caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(53352, <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a4ad87b8c967acbbcb154a32bc123371bae5c19f392b2ebda372a39538fa9b592a">SPELLVALUE_BASE_POINT0</a>, <a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, target, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6232</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6233</span>                }</div>
<div class="line"><span class="lineno"> 6234</span>                <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>)</div>
<div class="line"><span class="lineno"> 6235</span>                {</div>
<div class="line"><span class="lineno"> 6236</span>                    <span class="comment">// Feeding Frenzy Rank 1</span></div>
<div class="line"><span class="lineno"> 6237</span>                    <span class="keywordflow">case</span> 53511:</div>
<div class="line"><span class="lineno"> 6238</span>                        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>()-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8bcfed25889f307b4849743956ae67fc">HealthBelowPct</a>(35))</div>
<div class="line"><span class="lineno"> 6239</span>                            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 60096, <span class="keyword">true</span>, 0, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6240</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6241</span>                    <span class="comment">// Feeding Frenzy Rank 2</span></div>
<div class="line"><span class="lineno"> 6242</span>                    <span class="keywordflow">case</span> 53512:</div>
<div class="line"><span class="lineno"> 6243</span>                        <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>()-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8bcfed25889f307b4849743956ae67fc">HealthBelowPct</a>(35))</div>
<div class="line"><span class="lineno"> 6244</span>                            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 60097, <span class="keyword">true</span>, 0, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6245</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6246</span>                    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 6247</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6248</span>                }</div>
<div class="line"><span class="lineno"> 6249</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6250</span>            }</div>
<div class="line"><span class="lineno"> 6251</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a>:</div>
<div class="line"><span class="lineno"> 6252</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>() == 52179) <span class="comment">// Astral Shift</span></div>
<div class="line"><span class="lineno"> 6253</span>            {</div>
<div class="line"><span class="lineno"> 6254</span>                <span class="comment">// Periodic need for remove visual on stun/fear/silence lost</span></div>
<div class="line"><span class="lineno"> 6255</span>                <span class="keywordflow">if</span> (!(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a65be256d693fe2edc0f1c4f61a4ea62d">GetUnitFlags</a>() &amp; (<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a20d03528858479b31941a42820257eeb">UNIT_FLAG_STUNNED</a> | <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a8ad2e62c7207250ee894d9a30d6bf130">UNIT_FLAG_FLEEING</a> | <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934ac5e049a6b427ad34206151958117403e">UNIT_FLAG_SILENCED</a>)))</div>
<div class="line"><span class="lineno"> 6256</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(52179);</div>
<div class="line"><span class="lineno"> 6257</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6258</span>            }</div>
<div class="line"><span class="lineno"> 6259</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6260</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1badc34b27f2cd523716d80c51d4e1d6f02">SPELLFAMILY_DEATHKNIGHT</a>:</div>
<div class="line"><span class="lineno"> 6261</span>            <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno"> 6262</span>            {</div>
<div class="line"><span class="lineno"> 6263</span>                <span class="keywordflow">case</span> 49016: <span class="comment">// Hysteria</span></div>
<div class="line"><span class="lineno"> 6264</span>                    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac6fc3f50b72cb6f2fd8bb988d48a8dba">CountPctFromMaxHealth</a>(1));</div>
<div class="line"><span class="lineno"> 6265</span>                    <a class="code hl_function" href="../../db/df9/a08518.html#afe2cdf561288531d745b6a3eb7182a98">Unit::DealDamage</a>(target, target, damage, <span class="keyword">nullptr</span>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a4d37f6fc3002a603384fa9e9d9368d35">NODAMAGE</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8fa12667dd3f55738c93e1ddb1351779b42">SPELL_SCHOOL_MASK_NORMAL</a>, <span class="keyword">nullptr</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 6266</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6267</span>            }</div>
<div class="line"><span class="lineno"> 6268</span>            <span class="comment">// Blood of the North</span></div>
<div class="line"><span class="lineno"> 6269</span>            <span class="comment">// Reaping</span></div>
<div class="line"><span class="lineno"> 6270</span>            <span class="comment">// Death Rune Mastery</span></div>
<div class="line"><span class="lineno"> 6271</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellIconID == 3041 || <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellIconID == 22 || <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellIconID == 2622)</div>
<div class="line"><span class="lineno"> 6272</span>            {</div>
<div class="line"><span class="lineno"> 6273</span>                <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 6274</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6275</span>                <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a966607859ce9c9537038b9ca21b9e827">IsClass</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a86e4e3df7a5142175aa5df522d3346cfa7f7b30426fd386c181799196c1739058">CLASS_DEATH_KNIGHT</a>, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a2a9983288cb2a06108c1d1a94c96c046a14fe87d018c5ff3c07e81b54fb10ae90">CLASS_CONTEXT_ABILITY</a>))</div>
<div class="line"><span class="lineno"> 6276</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6277</span> </div>
<div class="line"><span class="lineno"> 6278</span>                <span class="comment">// timer expired - remove death runes</span></div>
<div class="line"><span class="lineno"> 6279</span>                target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a0d99907a41953dfe2e4589a785503fc1">RemoveRunesByAuraEffect</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6280</span>            }</div>
<div class="line"><span class="lineno"> 6281</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6282</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 6283</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6284</span>    }</div>
<div class="line"><span class="lineno"> 6285</span>}</div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1ba66df9b34a3b922a8242d3dfb74494026"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba66df9b34a3b922a8242d3dfb74494026">SPELLFAMILY_HUNTER</a></div><div class="ttdeci">@ SPELLFAMILY_HUNTER</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3537</div></div>
<div class="ttc" id="aa02771_html_a9264ae6b0ef1b61a6eeb7fdac9fbab1badc34b27f2cd523716d80c51d4e1d6f02"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1badc34b27f2cd523716d80c51d4e1d6f02">SPELLFAMILY_DEATHKNIGHT</a></div><div class="ttdeci">@ SPELLFAMILY_DEATHKNIGHT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:3543</div></div>
<div class="ttc" id="aa03080_html_a4ad87b8c967acbbcb154a32bc123371bae5c19f392b2ebda372a39538fa9b592a"><div class="ttname"><a href="../../d1/d7a/a03080.html#a4ad87b8c967acbbcb154a32bc123371bae5c19f392b2ebda372a39538fa9b592a">SPELLVALUE_BASE_POINT0</a></div><div class="ttdeci">@ SPELLVALUE_BASE_POINT0</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:113</div></div>
<div class="ttc" id="aa03515_html_ab0b8a9de485ea928c497ac0b5f9040b1a4d37f6fc3002a603384fa9e9d9368d35"><div class="ttname"><a href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a4d37f6fc3002a603384fa9e9d9368d35">NODAMAGE</a></div><div class="ttdeci">@ NODAMAGE</div><div class="ttdef"><b>Definition:</b> Unit.h:252</div></div>
<div class="ttc" id="aa03521_html_affdd0d554c8bcaaa85a879f5a9d60934a20d03528858479b31941a42820257eeb"><div class="ttname"><a href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a20d03528858479b31941a42820257eeb">UNIT_FLAG_STUNNED</a></div><div class="ttdeci">@ UNIT_FLAG_STUNNED</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:247</div></div>
<div class="ttc" id="aa03521_html_affdd0d554c8bcaaa85a879f5a9d60934a8ad2e62c7207250ee894d9a30d6bf130"><div class="ttname"><a href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a8ad2e62c7207250ee894d9a30d6bf130">UNIT_FLAG_FLEEING</a></div><div class="ttdeci">@ UNIT_FLAG_FLEEING</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:252</div></div>
<div class="ttc" id="aa08518_html_a65be256d693fe2edc0f1c4f61a4ea62d"><div class="ttname"><a href="../../db/df9/a08518.html#a65be256d693fe2edc0f1c4f61a4ea62d">Unit::GetUnitFlags</a></div><div class="ttdeci">UnitFlags GetUnitFlags() const</div><div class="ttdef"><b>Definition:</b> Unit.h:711</div></div>
<div class="ttc" id="aa08518_html_ac6fc3f50b72cb6f2fd8bb988d48a8dba"><div class="ttname"><a href="../../db/df9/a08518.html#ac6fc3f50b72cb6f2fd8bb988d48a8dba">Unit::CountPctFromMaxHealth</a></div><div class="ttdeci">uint32 CountPctFromMaxHealth(int32 pct) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1042</div></div>
<div class="ttc" id="aa08518_html_adb1f3809f1c2fa9bae8ed22d3fa25b13"><div class="ttname"><a href="../../db/df9/a08518.html#adb1f3809f1c2fa9bae8ed22d3fa25b13">Unit::HasActivePowerType</a></div><div class="ttdeci">virtual bool HasActivePowerType(Powers power)</div><div class="ttdef"><b>Definition:</b> Unit.h:1053</div></div>
<div class="ttc" id="aa10898_html_a30452de2bd62607418f3962d00124144"><div class="ttname"><a href="../../d2/db6/a10898.html#a30452de2bd62607418f3962d00124144">SpellInfo::SpellFamilyFlags</a></div><div class="ttdeci">flag96 SpellFamilyFlags</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:388</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l14846">Unit::CalculateSpellDamage()</a>, <a class="el" href="../../#l01224">Unit::CastCustomSpell()</a>, <a class="el" href="../../#l01167">Unit::CastSpell()</a>, <a class="el" href="../../#l00213">CLASS_CONTEXT_ABILITY</a>, <a class="el" href="../../#l00146">CLASS_DEATH_KNIGHT</a>, <a class="el" href="../../#l01042">Unit::CountPctFromMaxHealth()</a>, <a class="el" href="../../#l00810">Unit::DealDamage()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l01030">Unit::GetMaxHealth()</a>, <a class="el" href="../../#l01056">Unit::GetPower()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00711">Unit::GetUnitFlags()</a>, <a class="el" href="../../#l00853">Unit::GetVictim()</a>, <a class="el" href="../../#l01053">Unit::HasActivePowerType()</a>, <a class="el" href="../../#l01037">Unit::HealthBelowPct()</a>, <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l01281">Player::IsClass()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l00252">NODAMAGE</a>, <a class="el" href="../../#l00270">POWER_RAGE</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../#l13396">Player::RemoveRunesByAuraEffect()</a>, <a class="el" href="../../#l15561">Unit::SetPower()</a>, <a class="el" href="../../#l00297">SPELL_SCHOOL_MASK_NORMAL</a>, <a class="el" href="../../#l03543">SPELLFAMILY_DEATHKNIGHT</a>, <a class="el" href="../../#l03535">SPELLFAMILY_DRUID</a>, <a class="el" href="../../#l03537">SPELLFAMILY_HUNTER</a>, <a class="el" href="../../#l03539">SPELLFAMILY_SHAMAN</a>, <a class="el" href="../../#l00388">SpellInfo::SpellFamilyFlags</a>, <a class="el" href="../../#l00113">SPELLVALUE_BASE_POINT0</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00252">UNIT_FLAG_FLEEING</a>, <a class="el" href="../../#l00242">UNIT_FLAG_SILENCED</a>, and <a class="el" href="../../#l00247">UNIT_FLAG_STUNNED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a4cee5e983225342908700110067f258a" name="a4cee5e983225342908700110067f258a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cee5e983225342908700110067f258a">&#9670;&#160;</a></span>HandlePeriodicEnergizeAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicEnergizeAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7134</span>{</div>
<div class="line"><span class="lineno"> 7135</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 7136</span> </div>
<div class="line"><span class="lineno"> 7137</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#adb1f3809f1c2fa9bae8ed22d3fa25b13">HasActivePowerType</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>) &amp;&amp; !<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a25ff5d34ce79433dfc852484cef1d47da1e9f8e7b13f64d6fd671411d5e906dfb">SPELL_ATTR7_ONLY_IN_SPELLBOOK_UNTIL_LEARNED</a>))</div>
<div class="line"><span class="lineno"> 7138</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7139</span> </div>
<div class="line"><span class="lineno"> 7140</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>))</div>
<div class="line"><span class="lineno"> 7141</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7142</span> </div>
<div class="line"><span class="lineno"> 7143</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>))</div>
<div class="line"><span class="lineno"> 7144</span>    {</div>
<div class="line"><span class="lineno"> 7145</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><span class="lineno"> 7146</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7147</span>    }</div>
<div class="line"><span class="lineno"> 7148</span> </div>
<div class="line"><span class="lineno"> 7149</span>    <span class="comment">// don&#39;t regen when permanent aura target has full power</span></div>
<div class="line"><span class="lineno"> 7150</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;IsPermanent() &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>) == target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>))</div>
<div class="line"><span class="lineno"> 7151</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7152</span> </div>
<div class="line"><span class="lineno"> 7153</span>    <span class="comment">// ignore negative values (can be result apply spellmods to aura damage</span></div>
<div class="line"><span class="lineno"> 7154</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount = std::max(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, 0);</div>
<div class="line"><span class="lineno"> 7155</span> </div>
<div class="line"><span class="lineno"> 7156</span>    <a class="code hl_struct" href="../../d6/d22/a08506.html">SpellPeriodicAuraLogInfo</a> pInfo(<span class="keyword">this</span>, amount, 0, 0, 0, 0.0f, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 7157</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac6e545dc53605a0c05d8556cf66040c1">SendPeriodicAuraLog</a>(&amp;pInfo);</div>
<div class="line"><span class="lineno"> 7158</span> </div>
<div class="line"><span class="lineno"> 7159</span>    <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: {} energize {} for {} dmg inflicted by {}&quot;</span>,</div>
<div class="line"><span class="lineno"> 7160</span>                    <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code hl_function" href="../../d8/d20/a04686.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>(), target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../db/d40/a08190.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>(), amount, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7161</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gain = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a04eac3be7ccc3a12db515b6d2ea20f07">ModifyPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, amount);</div>
<div class="line"><span class="lineno"> 7162</span> </div>
<div class="line"><span class="lineno"> 7163</span>    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 7164</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a83fe30829a1470536e408efbf56dd5f5">getHostileRefMgr</a>().<a class="code hl_function" href="../../d9/da8/a07598.html#a69c355d1c078cfba9927c8c752912b48">threatAssist</a>(caster, <span class="keywordtype">float</span>(gain) * 0.5f, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 7165</span>}</div>
<div class="ttc" id="aa02771_html_a25ff5d34ce79433dfc852484cef1d47da1e9f8e7b13f64d6fd671411d5e906dfb"><div class="ttname"><a href="../../d0/dbd/a02771.html#a25ff5d34ce79433dfc852484cef1d47da1e9f8e7b13f64d6fd671411d5e906dfb">SPELL_ATTR7_ONLY_IN_SPELLBOOK_UNTIL_LEARNED</a></div><div class="ttdeci">@ SPELL_ATTR7_ONLY_IN_SPELLBOOK_UNTIL_LEARNED</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:657</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00907">Unit::getHostileRefMgr()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l01057">Unit::GetMaxPower()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l01056">Unit::GetPower()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l01053">Unit::HasActivePowerType()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l14144">Unit::ModifyPower()</a>, <a class="el" href="../../#l06389">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../#l01096">SendTickImmune()</a>, <a class="el" href="../../#l00657">SPELL_ATTR7_ONLY_IN_SPELLBOOK_UNTIL_LEARNED</a>, <a class="el" href="../../#l00035">HostileRefMgr::threatAssist()</a>, <a class="el" href="../../#l00047">ObjectGuid::ToString()</a>, and <a class="el" href="../../#l00162">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a3c497a3c954b0bade630ac996c440fa3" name="a3c497a3c954b0bade630ac996c440fa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c497a3c954b0bade630ac996c440fa3">&#9670;&#160;</a></span>HandlePeriodicHealAurasTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicHealAurasTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6879</span>{</div>
<div class="line"><span class="lineno"> 6880</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno"> 6881</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6882</span> </div>
<div class="line"><span class="lineno"> 6883</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>))</div>
<div class="line"><span class="lineno"> 6884</span>    {</div>
<div class="line"><span class="lineno"> 6885</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><span class="lineno"> 6886</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6887</span>    }</div>
<div class="line"><span class="lineno"> 6888</span> </div>
<div class="line"><span class="lineno"> 6889</span>    <span class="comment">// heal for caster damage (must be alive)</span></div>
<div class="line"><span class="lineno"> 6890</span>    <span class="keywordflow">if</span> (target != caster &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a>) &amp;&amp; (!caster || !caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>()))</div>
<div class="line"><span class="lineno"> 6891</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6892</span> </div>
<div class="line"><span class="lineno"> 6893</span>    <span class="comment">// don&#39;t regen when permanent aura target has full power</span></div>
<div class="line"><span class="lineno"> 6894</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;IsPermanent() &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5725cda05eb9a83f0731778d27a2a80c">IsFullHealth</a>())</div>
<div class="line"><span class="lineno"> 6895</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6896</span> </div>
<div class="line"><span class="lineno"> 6897</span>    <span class="comment">// ignore negative values (can be result apply spellmods to aura damage</span></div>
<div class="line"><span class="lineno"> 6898</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> damage = std::max(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, 0);</div>
<div class="line"><span class="lineno"> 6899</span> </div>
<div class="line"><span class="lineno"> 6900</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a>)</div>
<div class="line"><span class="lineno"> 6901</span>    {</div>
<div class="line"><span class="lineno"> 6902</span>        <span class="comment">// Taken mods</span></div>
<div class="line"><span class="lineno"> 6903</span>        <span class="keywordtype">float</span> TakenTotalMod = 1.0f;</div>
<div class="line"><span class="lineno"> 6904</span> </div>
<div class="line"><span class="lineno"> 6905</span>        <span class="comment">// Tenacity increase healing % taken</span></div>
<div class="line"><span class="lineno"> 6906</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a> <span class="keyword">const</span>* Tenacity = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(58549, 0))</div>
<div class="line"><span class="lineno"> 6907</span>            <a class="code hl_function" href="../../d4/d13/a00377.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, Tenacity-&gt;GetAmount());</div>
<div class="line"><span class="lineno"> 6908</span> </div>
<div class="line"><span class="lineno"> 6909</span>        <span class="comment">// Healing taken percent</span></div>
<div class="line"><span class="lineno"> 6910</span>        <span class="keywordtype">float</span> minval = (float)target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#abf8fc4eaa597bd84ad83fb2c8c7f0647">GetMaxNegativeAuraModifier</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a79269de8dea27ac7f7622e49e14a687a">SPELL_AURA_MOD_HEALING_PCT</a>);</div>
<div class="line"><span class="lineno"> 6911</span>        <span class="keywordflow">if</span> (minval)</div>
<div class="line"><span class="lineno"> 6912</span>            <a class="code hl_function" href="../../d4/d13/a00377.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, minval);</div>
<div class="line"><span class="lineno"> 6913</span> </div>
<div class="line"><span class="lineno"> 6914</span>        <span class="keywordtype">float</span> maxval = (float)target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a7c31e00bd5228734b74fd24c56d45c6d">GetMaxPositiveAuraModifier</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a79269de8dea27ac7f7622e49e14a687a">SPELL_AURA_MOD_HEALING_PCT</a>);</div>
<div class="line"><span class="lineno"> 6915</span>        <span class="keywordflow">if</span> (maxval)</div>
<div class="line"><span class="lineno"> 6916</span>            <a class="code hl_function" href="../../d4/d13/a00377.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, maxval);</div>
<div class="line"><span class="lineno"> 6917</span> </div>
<div class="line"><span class="lineno"> 6918</span>        <span class="comment">// Healing over time taken percent</span></div>
<div class="line"><span class="lineno"> 6919</span>        <span class="keywordtype">float</span> minval_hot = (float)target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#abf8fc4eaa597bd84ad83fb2c8c7f0647">GetMaxNegativeAuraModifier</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aa7668cc1bc2df918f334cc75767f6048">SPELL_AURA_MOD_HOT_PCT</a>);</div>
<div class="line"><span class="lineno"> 6920</span>        <span class="keywordflow">if</span> (minval_hot)</div>
<div class="line"><span class="lineno"> 6921</span>            <a class="code hl_function" href="../../d4/d13/a00377.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, minval_hot);</div>
<div class="line"><span class="lineno"> 6922</span> </div>
<div class="line"><span class="lineno"> 6923</span>        <span class="keywordtype">float</span> maxval_hot = (float)target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a7c31e00bd5228734b74fd24c56d45c6d">GetMaxPositiveAuraModifier</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aa7668cc1bc2df918f334cc75767f6048">SPELL_AURA_MOD_HOT_PCT</a>);</div>
<div class="line"><span class="lineno"> 6924</span>        <span class="keywordflow">if</span> (maxval_hot)</div>
<div class="line"><span class="lineno"> 6925</span>            <a class="code hl_function" href="../../d4/d13/a00377.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, maxval_hot);</div>
<div class="line"><span class="lineno"> 6926</span> </div>
<div class="line"><span class="lineno"> 6927</span>        <span class="comment">// Arena / BG Dampening</span></div>
<div class="line"><span class="lineno"> 6928</span>        <span class="keywordtype">float</span> minval_pct = (float)target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#abf8fc4eaa597bd84ad83fb2c8c7f0647">GetMaxNegativeAuraModifier</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a47e92c7387722615239d60a75bf858fa">SPELL_AURA_MOD_HEALING_DONE_PERCENT</a>);</div>
<div class="line"><span class="lineno"> 6929</span>        <span class="keywordflow">if</span> (minval_pct)</div>
<div class="line"><span class="lineno"> 6930</span>            <a class="code hl_function" href="../../d4/d13/a00377.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, minval_pct);</div>
<div class="line"><span class="lineno"> 6931</span> </div>
<div class="line"><span class="lineno"> 6932</span>        TakenTotalMod = std::max(TakenTotalMod, 0.0f);</div>
<div class="line"><span class="lineno"> 6933</span> </div>
<div class="line"><span class="lineno"> 6934</span>        <span class="comment">// the most ugly hack i made :P the other option is to change all spellvalues to float...</span></div>
<div class="line"><span class="lineno"> 6935</span>        <span class="comment">// demonic aegis</span></div>
<div class="line"><span class="lineno"> 6936</span>        <span class="keywordflow">if</span> (caster &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyName == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a> &amp;&amp; (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyFlags[1] &amp; 0x20000000))</div>
<div class="line"><span class="lineno"> 6937</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2c530c4b7d2f3b77f65f62395bda9c4a">SPELL_AURA_ADD_PCT_MODIFIER</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a>, 89, 0))</div>
<div class="line"><span class="lineno"> 6938</span>                <a class="code hl_function" href="../../d4/d13/a00377.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(TakenTotalMod, aurEff-&gt;GetAmount());</div>
<div class="line"><span class="lineno"> 6939</span> </div>
<div class="line"><span class="lineno"> 6940</span>        damage = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac6fc3f50b72cb6f2fd8bb988d48a8dba">CountPctFromMaxHealth</a>(damage));</div>
<div class="line"><span class="lineno"> 6941</span>        damage = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(damage * TakenTotalMod);</div>
<div class="line"><span class="lineno"> 6942</span>    }</div>
<div class="line"><span class="lineno"> 6943</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 6944</span>    {</div>
<div class="line"><span class="lineno"> 6945</span>        <span class="comment">// Wild Growth = amount + (6 - 2*doneTicks) * ticks* amount / 100</span></div>
<div class="line"><span class="lineno"> 6946</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyName == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a> &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellIconID == 2864)</div>
<div class="line"><span class="lineno"> 6947</span>        {</div>
<div class="line"><span class="lineno"> 6948</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> tickNumber = <a class="code hl_function" href="../../d6/d2f/a10782.html#a0c28e995bc0e15c692c24154bab9df4d">GetTickNumber</a>() - 1;</div>
<div class="line"><span class="lineno"> 6949</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> tempAmount = <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].CalcValue(caster, &amp;<a class="code hl_variable" href="../../d6/d2f/a10782.html#aba194c9071a1b0551768b397abc9ebeb">m_baseAmount</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 6950</span> </div>
<div class="line"><span class="lineno"> 6951</span>            <span class="keywordtype">float</span> drop = 2.0f;</div>
<div class="line"><span class="lineno"> 6952</span> </div>
<div class="line"><span class="lineno"> 6953</span>            <span class="comment">// Item - Druid T10 Restoration 2P Bonus</span></div>
<div class="line"><span class="lineno"> 6954</span>            <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 6955</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(70658, 0))</div>
<div class="line"><span class="lineno"> 6956</span>                    <a class="code hl_function" href="../../d4/d13/a00377.html#a53176b459b4462b058b2a1be47ef82ee">AddPct</a>(drop, -aurEff-&gt;GetAmount());</div>
<div class="line"><span class="lineno"> 6957</span> </div>
<div class="line"><span class="lineno"> 6958</span>            damage += <a class="code hl_function" href="../../d6/d2f/a10782.html#a67ca18798f448847e77665752fa4a32c">GetTotalTicks</a>() * tempAmount * (6 - (drop * tickNumber)) * 0.01f;</div>
<div class="line"><span class="lineno"> 6959</span>        }</div>
<div class="line"><span class="lineno"> 6960</span> </div>
<div class="line"><span class="lineno"> 6961</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#aaddb94cd3bd95b145a8b8392e9feecca">GetType</a>() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a>)</div>
<div class="line"><span class="lineno"> 6962</span>            damage = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a511ec62a25ddf784aeb00787a0629b9d">SpellHealingBonusDone</a>(target, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), 0.0f, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>());</div>
<div class="line"><span class="lineno"> 6963</span>        damage = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aeac23e55488fc69a1b90f0e92eaf1626">SpellHealingBonusTaken</a>(caster, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#aae0b7e0da61a681e67a19b6d23c2cee6">GetStackAmount</a>());</div>
<div class="line"><span class="lineno"> 6964</span>    }</div>
<div class="line"><span class="lineno"> 6965</span> </div>
<div class="line"><span class="lineno"> 6966</span>    <span class="keywordtype">bool</span> crit = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6967</span>    <span class="keywordflow">if</span> ((crit = <a class="code hl_function" href="../../dc/dc9/a00389.html#a4b15099bc81731469c5078a778673c94">roll_chance_f</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a374ccc25c81de041d10e1ed2b52a238c">GetCritChance</a>())))</div>
<div class="line"><span class="lineno"> 6968</span>        damage = <a class="code hl_function" href="../../db/df9/a08518.html#aa6ce8b2e82075c03c6086fdb83b9ab35">Unit::SpellCriticalHealingBonus</a>(caster, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), damage, target);</div>
<div class="line"><span class="lineno"> 6969</span> </div>
<div class="line"><span class="lineno"> 6970</span>    <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: {} heal of {} for {} health inflicted by {}&quot;</span>,</div>
<div class="line"><span class="lineno"> 6971</span>                    <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code hl_function" href="../../d8/d20/a04686.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>(), target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../db/d40/a08190.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>(), damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 6972</span> </div>
<div class="line"><span class="lineno"> 6973</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> heal = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(damage);</div>
<div class="line"><span class="lineno"> 6974</span> </div>
<div class="line"><span class="lineno"> 6975</span>    <span class="comment">// Script Hook For HandlePeriodicDamageAurasTick -- Allow scripts to change the Damage pre class mitigation calculations</span></div>
<div class="line"><span class="lineno"> 6976</span>    <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;ModifyPeriodicDamageAurasTick(target, caster, heal, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 6977</span>    <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;ModifyHealReceived(target, caster, heal, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 6978</span> </div>
<div class="line"><span class="lineno"> 6979</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac53944779fa1544c06a3fc3dc74f5294">GetAI</a>())</div>
<div class="line"><span class="lineno"> 6980</span>    {</div>
<div class="line"><span class="lineno"> 6981</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac53944779fa1544c06a3fc3dc74f5294">GetAI</a>()-&gt;<a class="code hl_function" href="../../d9/de2/a06062.html#abbffac590ddab45bf2e2085015e9d8bd">OnCalculatePeriodicTickReceived</a>(heal, caster);</div>
<div class="line"><span class="lineno"> 6982</span>    }</div>
<div class="line"><span class="lineno"> 6983</span> </div>
<div class="line"><span class="lineno"> 6984</span>    <a class="code hl_class" href="../../d4/de6/a08486.html">HealInfo</a> healInfo(caster, target, heal, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask());</div>
<div class="line"><span class="lineno"> 6985</span>    <a class="code hl_function" href="../../db/df9/a08518.html#a3bb06bc22c7b60ab2fae8d7141335043">Unit::CalcHealAbsorb</a>(healInfo);</div>
<div class="line"><span class="lineno"> 6986</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gain = <a class="code hl_function" href="../../db/df9/a08518.html#a724ee0c4edc9ee0b05ba1cc56893264c">Unit::DealHeal</a>(caster, target, healInfo.GetHeal());</div>
<div class="line"><span class="lineno"> 6987</span>    healInfo.SetEffectiveHeal(gain);</div>
<div class="line"><span class="lineno"> 6988</span> </div>
<div class="line"><span class="lineno"> 6989</span>    <a class="code hl_struct" href="../../d6/d22/a08506.html">SpellPeriodicAuraLogInfo</a> pInfo(<span class="keyword">this</span>, healInfo.GetHeal(), healInfo.GetHeal() - healInfo.GetEffectiveHeal(), healInfo.GetAbsorb(), 0, 0.0f, crit);</div>
<div class="line"><span class="lineno"> 6990</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac6e545dc53605a0c05d8556cf66040c1">SendPeriodicAuraLog</a>(&amp;pInfo);</div>
<div class="line"><span class="lineno"> 6991</span> </div>
<div class="line"><span class="lineno"> 6992</span>    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 6993</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a83fe30829a1470536e408efbf56dd5f5">getHostileRefMgr</a>().<a class="code hl_function" href="../../d9/da8/a07598.html#a69c355d1c078cfba9927c8c752912b48">threatAssist</a>(caster, <span class="keywordtype">float</span>(gain) * 0.5f, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 6994</span> </div>
<div class="line"><span class="lineno"> 6995</span>    <span class="keywordtype">bool</span> haveCastItem = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ab5641e8e175470f121e2c6eda7dfb253">GetCastItemGUID</a>();</div>
<div class="line"><span class="lineno"> 6996</span> </div>
<div class="line"><span class="lineno"> 6997</span>    <span class="comment">// Health Funnel</span></div>
<div class="line"><span class="lineno"> 6998</span>    <span class="comment">// damage caster for heal amount</span></div>
<div class="line"><span class="lineno"> 6999</span>    <span class="comment">// xinef: caster is available, checked earlier</span></div>
<div class="line"><span class="lineno"> 7000</span>    <span class="keywordflow">if</span> (target != caster &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;HasAttribute(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a>))</div>
<div class="line"><span class="lineno"> 7001</span>    {</div>
<div class="line"><span class="lineno"> 7002</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> manaPerSecond = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a8fff47546b8052ac55963dd40e4ae394">ManaPerSecond</a>;</div>
<div class="line"><span class="lineno"> 7003</span>        <span class="keywordflow">if</span> ((<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)manaPerSecond &gt; gain &amp;&amp; gain &gt; 0)</div>
<div class="line"><span class="lineno"> 7004</span>        {</div>
<div class="line"><span class="lineno"> 7005</span>            manaPerSecond = gain;</div>
<div class="line"><span class="lineno"> 7006</span>        }</div>
<div class="line"><span class="lineno"> 7007</span> </div>
<div class="line"><span class="lineno"> 7008</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> absorb2 = 0;</div>
<div class="line"><span class="lineno"> 7009</span>        <a class="code hl_function" href="../../db/df9/a08518.html#af0c5f2f98b065f2d3976f18e4bc964a4">Unit::DealDamageMods</a>(caster, manaPerSecond, &amp;absorb2);</div>
<div class="line"><span class="lineno"> 7010</span> </div>
<div class="line"><span class="lineno"> 7011</span>        <a class="code hl_struct" href="../../df/d29/a08478.html">CleanDamage</a> cleanDamage = <a class="code hl_struct" href="../../df/d29/a08478.html">CleanDamage</a>(0, 0, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aba4a9525e87c7e76c6c005bc3c3f53a5a9c5d76fbca1fce33b08a1655b9017272">MELEE_HIT_NORMAL</a>);</div>
<div class="line"><span class="lineno"> 7012</span>        <a class="code hl_function" href="../../db/df9/a08518.html#afe2cdf561288531d745b6a3eb7182a98">Unit::DealDamage</a>(caster, caster, manaPerSecond, &amp;cleanDamage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a28acdc0c8049108b938b341f90a9183a">SELF_DAMAGE</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 7013</span>    }</div>
<div class="line"><span class="lineno"> 7014</span> </div>
<div class="line"><span class="lineno"> 7015</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procAttacker = <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce">PROC_FLAG_DONE_PERIODIC</a>;</div>
<div class="line"><span class="lineno"> 7016</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procVictim   = <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4">PROC_FLAG_TAKEN_PERIODIC</a>;</div>
<div class="line"><span class="lineno"> 7017</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procEx = (crit ? <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46a970bdf3e5f6192a44f1047c0a9c01310">PROC_EX_CRITICAL_HIT</a> : <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46aa0c2a4e7377d6217e94cc8fc7c77b5b2">PROC_EX_NORMAL_HIT</a>) | <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46ab92a05b298c10d1c2b9c3a2af4fe819b">PROC_EX_INTERNAL_HOT</a>;</div>
<div class="line"><span class="lineno"> 7018</span>    <span class="keywordflow">if</span> (healInfo.GetAbsorb() &gt; 0)</div>
<div class="line"><span class="lineno"> 7019</span>        procEx |= <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46ad0f376666fe646253e445dedfae7753f">PROC_EX_ABSORB</a>;</div>
<div class="line"><span class="lineno"> 7020</span> </div>
<div class="line"><span class="lineno"> 7021</span>    <span class="comment">// ignore item heals</span></div>
<div class="line"><span class="lineno"> 7022</span>    <span class="keywordflow">if</span> (!haveCastItem &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a>) <span class="comment">// xinef: dont allow obs_mod_health to proc spells, this is passive regeneration and not hot</span></div>
<div class="line"><span class="lineno"> 7023</span>        <a class="code hl_function" href="../../db/df9/a08518.html#aad2d8dec02abdea33b3447bea9407a4f">Unit::ProcDamageAndSpell</a>(caster, target, caster ? procAttacker : 0, procVictim, procEx, heal, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, &amp;healInfo);</div>
<div class="line"><span class="lineno"> 7024</span>}</div>
<div class="ttc" id="aa02771_html_a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec"><div class="ttname"><a href="../../d0/dbd/a02771.html#a583cc1b9a8909370e4d51a890d897668a546d420c10fbdd64888c71cf01c821ec">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a></div><div class="ttdeci">@ SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:467</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a47e92c7387722615239d60a75bf858fa"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a47e92c7387722615239d60a75bf858fa">SPELL_AURA_MOD_HEALING_DONE_PERCENT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_HEALING_DONE_PERCENT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:199</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a79269de8dea27ac7f7622e49e14a687a"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a79269de8dea27ac7f7622e49e14a687a">SPELL_AURA_MOD_HEALING_PCT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_HEALING_PCT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:181</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799aa7668cc1bc2df918f334cc75767f6048"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799aa7668cc1bc2df918f334cc75767f6048">SPELL_AURA_MOD_HOT_PCT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_HOT_PCT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:322</div></div>
<div class="ttc" id="aa03110_html_ac9aaef596a1061b6b944e1dc0e679b46ab92a05b298c10d1c2b9c3a2af4fe819b"><div class="ttname"><a href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46ab92a05b298c10d1c2b9c3a2af4fe819b">PROC_EX_INTERNAL_HOT</a></div><div class="ttdeci">@ PROC_EX_INTERNAL_HOT</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:220</div></div>
<div class="ttc" id="aa03515_html_ab0b8a9de485ea928c497ac0b5f9040b1a28acdc0c8049108b938b341f90a9183a"><div class="ttname"><a href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a28acdc0c8049108b938b341f90a9183a">SELF_DAMAGE</a></div><div class="ttdeci">@ SELF_DAMAGE</div><div class="ttdef"><b>Definition:</b> Unit.h:253</div></div>
<div class="ttc" id="aa08486_html"><div class="ttname"><a href="../../d4/de6/a08486.html">HealInfo</a></div><div class="ttdef"><b>Definition:</b> Unit.h:373</div></div>
<div class="ttc" id="aa08518_html_a3bb06bc22c7b60ab2fae8d7141335043"><div class="ttname"><a href="../../db/df9/a08518.html#a3bb06bc22c7b60ab2fae8d7141335043">Unit::CalcHealAbsorb</a></div><div class="ttdeci">static void CalcHealAbsorb(HealInfo &amp;healInfo)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:2502</div></div>
<div class="ttc" id="aa08518_html_a724ee0c4edc9ee0b05ba1cc56893264c"><div class="ttname"><a href="../../db/df9/a08518.html#a724ee0c4edc9ee0b05ba1cc56893264c">Unit::DealHeal</a></div><div class="ttdeci">static int32 DealHeal(Unit *healer, Unit *victim, uint32 addhealth)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10946</div></div>
<div class="ttc" id="aa08518_html_a7c31e00bd5228734b74fd24c56d45c6d"><div class="ttname"><a href="../../db/df9/a08518.html#a7c31e00bd5228734b74fd24c56d45c6d">Unit::GetMaxPositiveAuraModifier</a></div><div class="ttdeci">int32 GetMaxPositiveAuraModifier(AuraType auratype)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5935</div></div>
<div class="ttc" id="aa08518_html_aa6ce8b2e82075c03c6086fdb83b9ab35"><div class="ttname"><a href="../../db/df9/a08518.html#aa6ce8b2e82075c03c6086fdb83b9ab35">Unit::SpellCriticalHealingBonus</a></div><div class="ttdeci">static uint32 SpellCriticalHealingBonus(Unit const *caster, SpellInfo const *spellProto, uint32 damage, Unit const *victim)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:12316</div></div>
<div class="ttc" id="aa08518_html_abf8fc4eaa597bd84ad83fb2c8c7f0647"><div class="ttname"><a href="../../db/df9/a08518.html#abf8fc4eaa597bd84ad83fb2c8c7f0647">Unit::GetMaxNegativeAuraModifier</a></div><div class="ttdeci">int32 GetMaxNegativeAuraModifier(AuraType auratype) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:5949</div></div>
<div class="ttc" id="aa08518_html_aeac23e55488fc69a1b90f0e92eaf1626"><div class="ttname"><a href="../../db/df9/a08518.html#aeac23e55488fc69a1b90f0e92eaf1626">Unit::SpellHealingBonusTaken</a></div><div class="ttdeci">uint32 SpellHealingBonusTaken(Unit *caster, SpellInfo const *spellProto, uint32 healamount, DamageEffectType damagetype, uint32 stack=1)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:12565</div></div>
<div class="ttc" id="aa10782_html_a0c28e995bc0e15c692c24154bab9df4d"><div class="ttname"><a href="../../d6/d2f/a10782.html#a0c28e995bc0e15c692c24154bab9df4d">AuraEffect::GetTickNumber</a></div><div class="ttdeci">uint32 GetTickNumber() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:87</div></div>
<div class="ttc" id="aa10794_html_aaddb94cd3bd95b145a8b8392e9feecca"><div class="ttname"><a href="../../df/d4a/a10794.html#aaddb94cd3bd95b145a8b8392e9feecca">Aura::GetType</a></div><div class="ttdeci">AuraObjectType GetType() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:481</div></div>
<div class="ttc" id="aa10794_html_ab5641e8e175470f121e2c6eda7dfb253"><div class="ttname"><a href="../../df/d4a/a10794.html#ab5641e8e175470f121e2c6eda7dfb253">Aura::GetCastItemGUID</a></div><div class="ttdeci">ObjectGuid GetCastItemGUID() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:103</div></div>
<div class="ttc" id="aa10898_html_a8fff47546b8052ac55963dd40e4ae394"><div class="ttname"><a href="../../d2/db6/a10898.html#a8fff47546b8052ac55963dd40e4ae394">SpellInfo::ManaPerSecond</a></div><div class="ttdeci">uint32 ManaPerSecond</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:365</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00067">AddPct()</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l02502">Unit::CalcHealAbsorb()</a>, <a class="el" href="../../#l01042">Unit::CountPctFromMaxHealth()</a>, <a class="el" href="../../#l00810">Unit::DealDamage()</a>, <a class="el" href="../../#l00800">Unit::DealDamageMods()</a>, <a class="el" href="../../#l10946">Unit::DealHeal()</a>, <a class="el" href="../../#l00250">DOT</a>, <a class="el" href="../../#l00386">DYNOBJ_AURA_TYPE</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00414">HealInfo::GetAbsorb()</a>, <a class="el" href="../../#l00658">Unit::GetAI()</a>, <a class="el" href="../../#l05494">Unit::GetAuraEffect()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00103">Aura::GetCastItemGUID()</a>, <a class="el" href="../../#l00108">GetCritChance()</a>, <a class="el" href="../../#l00413">HealInfo::GetEffectiveHeal()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00412">HealInfo::GetHeal()</a>, <a class="el" href="../../#l00907">Unit::getHostileRefMgr()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l05949">Unit::GetMaxNegativeAuraModifier()</a>, <a class="el" href="../../#l05935">Unit::GetMaxPositiveAuraModifier()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00148">Aura::GetStackAmount()</a>, <a class="el" href="../../#l00087">GetTickNumber()</a>, <a class="el" href="../../#l07365">GetTotalTicks()</a>, <a class="el" href="../../#l00481">Aura::GetType()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l01035">Unit::IsFullHealth()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l00124">m_baseAmount</a>, <a class="el" href="../../#l00146">m_effIndex</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l00365">SpellInfo::ManaPerSecond</a>, <a class="el" href="../../#l00286">MELEE_HIT_NORMAL</a>, <a class="el" href="../../#l00385">UnitAI::OnCalculatePeriodicTickReceived()</a>, <a class="el" href="../../#l00204">PROC_EX_ABSORB</a>, <a class="el" href="../../#l00195">PROC_EX_CRITICAL_HIT</a>, <a class="el" href="../../#l00220">PROC_EX_INTERNAL_HOT</a>, <a class="el" href="../../#l00194">PROC_EX_NORMAL_HIT</a>, <a class="el" href="../../#l00134">PROC_FLAG_DONE_PERIODIC</a>, <a class="el" href="../../#l00135">PROC_FLAG_TAKEN_PERIODIC</a>, <a class="el" href="../../#l06378">Unit::ProcDamageAndSpell()</a>, <a class="el" href="../../#l00053">roll_chance_f()</a>, <a class="el" href="../../#l00253">SELF_DAMAGE</a>, <a class="el" href="../../#l06389">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../#l01096">SendTickImmune()</a>, <a class="el" href="../../#l00405">HealInfo::SetEffectiveHeal()</a>, <a class="el" href="../../#l00467">SPELL_ATTR2_NO_TARGET_PER_SECOND_COST</a>, <a class="el" href="../../#l00171">SPELL_AURA_ADD_PCT_MODIFIER</a>, <a class="el" href="../../#l00199">SPELL_AURA_MOD_HEALING_DONE_PERCENT</a>, <a class="el" href="../../#l00181">SPELL_AURA_MOD_HEALING_PCT</a>, <a class="el" href="../../#l00322">SPELL_AURA_MOD_HOT_PCT</a>, <a class="el" href="../../#l00083">SPELL_AURA_OBS_MOD_HEALTH</a>, <a class="el" href="../../#l12316">Unit::SpellCriticalHealingBonus()</a>, <a class="el" href="../../#l03535">SPELLFAMILY_DRUID</a>, <a class="el" href="../../#l03533">SPELLFAMILY_WARLOCK</a>, <a class="el" href="../../#l12447">Unit::SpellHealingBonusDone()</a>, <a class="el" href="../../#l12565">Unit::SpellHealingBonusTaken()</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00035">HostileRefMgr::threatAssist()</a>, <a class="el" href="../../#l00047">ObjectGuid::ToString()</a>, and <a class="el" href="../../#l00162">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a35cc3b13cde9e1cfbdfee49d6bdcee57" name="a35cc3b13cde9e1cfbdfee49d6bdcee57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35cc3b13cde9e1cfbdfee49d6bdcee57">&#9670;&#160;</a></span>HandlePeriodicHealthFunnelAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicHealthFunnelAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6850</span>{</div>
<div class="line"><span class="lineno"> 6851</span>    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno"> 6852</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6853</span> </div>
<div class="line"><span class="lineno"> 6854</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>))</div>
<div class="line"><span class="lineno"> 6855</span>    {</div>
<div class="line"><span class="lineno"> 6856</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><span class="lineno"> 6857</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6858</span>    }</div>
<div class="line"><span class="lineno"> 6859</span> </div>
<div class="line"><span class="lineno"> 6860</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = std::max(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), 0);</div>
<div class="line"><span class="lineno"> 6861</span>    <span class="comment">// do not kill health donator</span></div>
<div class="line"><span class="lineno"> 6862</span>    <span class="keywordflow">if</span> (caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>() &lt; damage)</div>
<div class="line"><span class="lineno"> 6863</span>        damage = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>() - 1;</div>
<div class="line"><span class="lineno"> 6864</span>    <span class="keywordflow">if</span> (!damage)</div>
<div class="line"><span class="lineno"> 6865</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6866</span> </div>
<div class="line"><span class="lineno"> 6867</span>    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a009a87eeb9cc40ed7017610cbb914b9b">ModifyHealth</a>(-(<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)damage);</div>
<div class="line"><span class="lineno"> 6868</span>    <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: donator {} target {} damage {}.&quot;</span>, caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>(), target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>(), damage);</div>
<div class="line"><span class="lineno"> 6869</span> </div>
<div class="line"><span class="lineno"> 6870</span>    <span class="keywordtype">float</span> gainMultiplier = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcValueMultiplier(caster);</div>
<div class="line"><span class="lineno"> 6871</span> </div>
<div class="line"><span class="lineno"> 6872</span>    damage = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(damage * gainMultiplier);</div>
<div class="line"><span class="lineno"> 6873</span> </div>
<div class="line"><span class="lineno"> 6874</span>    <a class="code hl_class" href="../../d4/de6/a08486.html">HealInfo</a> healInfo(caster, target, damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask());</div>
<div class="line"><span class="lineno"> 6875</span>    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a62382ca15ef5f687651acd024efa1714">HealBySpell</a>(healInfo);</div>
<div class="line"><span class="lineno"> 6876</span>}</div>
<div class="ttc" id="aa08518_html_a62382ca15ef5f687651acd024efa1714"><div class="ttname"><a href="../../db/df9/a08518.html#a62382ca15ef5f687651acd024efa1714">Unit::HealBySpell</a></div><div class="ttdeci">int32 HealBySpell(HealInfo &amp;healInfo, bool critical=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:11239</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00112">Object::GetEntry()</a>, <a class="el" href="../../#l01029">Unit::GetHealth()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l11239">Unit::HealBySpell()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l14086">Unit::ModifyHealth()</a>, <a class="el" href="../../#l01096">SendTickImmune()</a>, and <a class="el" href="../../#l00162">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a757600361597c84413041214cd39dc22" name="a757600361597c84413041214cd39dc22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a757600361597c84413041214cd39dc22">&#9670;&#160;</a></span>HandlePeriodicHealthLeechAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicHealthLeechAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6744</span>{</div>
<div class="line"><span class="lineno"> 6745</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno"> 6746</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6747</span> </div>
<div class="line"><span class="lineno"> 6748</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>) || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae7269683ec5b0e44c3ee49bd6f896615">IsImmunedToDamageOrSchool</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()))</div>
<div class="line"><span class="lineno"> 6749</span>    {</div>
<div class="line"><span class="lineno"> 6750</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><span class="lineno"> 6751</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6752</span>    }</div>
<div class="line"><span class="lineno"> 6753</span> </div>
<div class="line"><span class="lineno"> 6754</span>    <span class="keywordflow">if</span> (caster &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Effects[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].Effect == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 6755</span>            caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8698eb184506578c00250d3c4c352722">SpellHitResult</a>(target, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <span class="keyword">false</span>) != <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096">SPELL_MISS_NONE</a>)</div>
<div class="line"><span class="lineno"> 6756</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6757</span> </div>
<div class="line"><span class="lineno"> 6758</span>    <a class="code hl_struct" href="../../df/d29/a08478.html">CleanDamage</a> cleanDamage = <a class="code hl_struct" href="../../df/d29/a08478.html">CleanDamage</a>(0, 0, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aba4a9525e87c7e76c6c005bc3c3f53a5a9c5d76fbca1fce33b08a1655b9017272">MELEE_HIT_NORMAL</a>);</div>
<div class="line"><span class="lineno"> 6759</span> </div>
<div class="line"><span class="lineno"> 6760</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = std::max(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), 0);</div>
<div class="line"><span class="lineno"> 6761</span> </div>
<div class="line"><span class="lineno"> 6762</span>    <span class="comment">// Script Hook For HandlePeriodicHealthLeechAurasTick -- Allow scripts to change the Damage pre class mitigation calculations</span></div>
<div class="line"><span class="lineno"> 6763</span>    <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;ModifyPeriodicDamageAurasTick(target, caster, damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 6764</span> </div>
<div class="line"><span class="lineno"> 6765</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac53944779fa1544c06a3fc3dc74f5294">GetAI</a>())</div>
<div class="line"><span class="lineno"> 6766</span>    {</div>
<div class="line"><span class="lineno"> 6767</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac53944779fa1544c06a3fc3dc74f5294">GetAI</a>()-&gt;<a class="code hl_function" href="../../d9/de2/a06062.html#abbffac590ddab45bf2e2085015e9d8bd">OnCalculatePeriodicTickReceived</a>(damage, caster);</div>
<div class="line"><span class="lineno"> 6768</span>    }</div>
<div class="line"><span class="lineno"> 6769</span> </div>
<div class="line"><span class="lineno"> 6770</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetType() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#ade4e7c2cbd17c45015f9f70c2a5400b2a51cd79314936d46d8bc738a8c1207ab4">DYNOBJ_AURA_TYPE</a>)</div>
<div class="line"><span class="lineno"> 6771</span>        damage = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aeee2a716058141444b84649bc9c86d70">SpellDamageBonusDone</a>(target, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), 0.0f, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetStackAmount());</div>
<div class="line"><span class="lineno"> 6772</span>    damage = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8e8d13276a1ebef454bd4fc27fedc3f1">SpellDamageBonusTaken</a>(caster, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetStackAmount());</div>
<div class="line"><span class="lineno"> 6773</span> </div>
<div class="line"><span class="lineno"> 6774</span>    <span class="keywordtype">bool</span> crit = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6775</span>    <span class="keywordflow">if</span> ((crit = <a class="code hl_function" href="../../dc/dc9/a00389.html#a4b15099bc81731469c5078a778673c94">roll_chance_f</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a374ccc25c81de041d10e1ed2b52a238c">GetCritChance</a>())))</div>
<div class="line"><span class="lineno"> 6776</span>        damage = <a class="code hl_function" href="../../db/df9/a08518.html#a8a91714bd4edbbb272b5c90cefc8089d">Unit::SpellCriticalDamageBonus</a>(caster, <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, damage, target);</div>
<div class="line"><span class="lineno"> 6777</span> </div>
<div class="line"><span class="lineno"> 6778</span>    <span class="comment">// Calculate armor mitigation</span></div>
<div class="line"><span class="lineno"> 6779</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../db/df9/a08518.html#ad53cf516713368986bab84af35245b53">Unit::IsDamageReducedByArmor</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>))</div>
<div class="line"><span class="lineno"> 6780</span>    {</div>
<div class="line"><span class="lineno"> 6781</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damageReductedArmor = <a class="code hl_function" href="../../db/df9/a08518.html#a3dee46b283ebc2e4bcace26c01895387">Unit::CalcArmorReducedDamage</a>(caster, target, damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a7595664aebf24652d3ce95d6bdc18ebe">GetCasterLevel</a>());</div>
<div class="line"><span class="lineno"> 6782</span>        cleanDamage.<a class="code hl_variable" href="../../df/d29/a08478.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a> += damage - damageReductedArmor;</div>
<div class="line"><span class="lineno"> 6783</span>        damage = damageReductedArmor;</div>
<div class="line"><span class="lineno"> 6784</span>    }</div>
<div class="line"><span class="lineno"> 6785</span> </div>
<div class="line"><span class="lineno"> 6786</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> dmg = damage;</div>
<div class="line"><span class="lineno"> 6787</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> cleanDamageAmount = cleanDamage.<a class="code hl_variable" href="../../df/d29/a08478.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a>;</div>
<div class="line"><span class="lineno"> 6788</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1360fcb79edcab37b0a7b362bb6e7b2a">CanApplyResilience</a>())</div>
<div class="line"><span class="lineno"> 6789</span>    {</div>
<div class="line"><span class="lineno"> 6790</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> resilienceReduction = dmg;</div>
<div class="line"><span class="lineno"> 6791</span>        <a class="code hl_function" href="../../db/df9/a08518.html#aa347b1510155f26b954000eda2aa0775">Unit::ApplyResilience</a>(target, <span class="keyword">nullptr</span>, &amp;resilienceReduction, crit, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#aa60e4ef21982cf41b489e5242f01b64fa40402f79e36b6c6687d2a6511bb19aad">CR_CRIT_TAKEN_SPELL</a>);</div>
<div class="line"><span class="lineno"> 6792</span> </div>
<div class="line"><span class="lineno"> 6793</span>        resilienceReduction = dmg - resilienceReduction;</div>
<div class="line"><span class="lineno"> 6794</span>        dmg -= resilienceReduction;</div>
<div class="line"><span class="lineno"> 6795</span>        cleanDamageAmount += resilienceReduction;</div>
<div class="line"><span class="lineno"> 6796</span>    }</div>
<div class="line"><span class="lineno"> 6797</span> </div>
<div class="line"><span class="lineno"> 6798</span>    damage = std::max(0, dmg);</div>
<div class="line"><span class="lineno"> 6799</span>    cleanDamage.<a class="code hl_variable" href="../../df/d29/a08478.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a> = std::max(0, cleanDamageAmount);</div>
<div class="line"><span class="lineno"> 6800</span> </div>
<div class="line"><span class="lineno"> 6801</span>    <a class="code hl_class" href="../../de/dcb/a08482.html">DamageInfo</a> dmgInfo(caster, target, damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, cleanDamage.<a class="code hl_variable" href="../../df/d29/a08478.html#a6aeffc94560ac510c0b89e4384a2f41a">mitigated_damage</a>);</div>
<div class="line"><span class="lineno"> 6802</span>    <a class="code hl_function" href="../../db/df9/a08518.html#af003db5856d82574c3db286a3a0186fd">Unit::CalcAbsorbResist</a>(dmgInfo);</div>
<div class="line"><span class="lineno"> 6803</span> </div>
<div class="line"><span class="lineno"> 6804</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> absorb = dmgInfo.GetAbsorb();</div>
<div class="line"><span class="lineno"> 6805</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> resist = dmgInfo.GetResist();</div>
<div class="line"><span class="lineno"> 6806</span>    damage = dmgInfo.GetDamage();</div>
<div class="line"><span class="lineno"> 6807</span> </div>
<div class="line"><span class="lineno"> 6808</span>    <span class="comment">// Set trigger flag</span></div>
<div class="line"><span class="lineno"> 6809</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procAttacker = <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce">PROC_FLAG_DONE_PERIODIC</a>;</div>
<div class="line"><span class="lineno"> 6810</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procVictim   = <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4">PROC_FLAG_TAKEN_PERIODIC</a>;</div>
<div class="line"><span class="lineno"> 6811</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procEx = (crit ? <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46a970bdf3e5f6192a44f1047c0a9c01310">PROC_EX_CRITICAL_HIT</a> : <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46aa0c2a4e7377d6217e94cc8fc7c77b5b2">PROC_EX_NORMAL_HIT</a>) | <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46a94a1aa9ac3cd331d95f2d0c421f35f59">PROC_EX_INTERNAL_DOT</a>;</div>
<div class="line"><span class="lineno"> 6812</span>    <span class="keywordflow">if</span> (absorb &gt; 0)</div>
<div class="line"><span class="lineno"> 6813</span>        procEx |= <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46ad0f376666fe646253e445dedfae7753f">PROC_EX_ABSORB</a>;</div>
<div class="line"><span class="lineno"> 6814</span> </div>
<div class="line"><span class="lineno"> 6815</span>    <span class="keywordflow">if</span> (dmgInfo.GetDamage())</div>
<div class="line"><span class="lineno"> 6816</span>        procVictim |= <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6abcffcf75e3fd5015383c586153dc32c1">PROC_FLAG_TAKEN_DAMAGE</a>;</div>
<div class="line"><span class="lineno"> 6817</span> </div>
<div class="line"><span class="lineno"> 6818</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>() &lt; dmgInfo.GetDamage())</div>
<div class="line"><span class="lineno"> 6819</span>    {</div>
<div class="line"><span class="lineno"> 6820</span>        dmgInfo.ModifyDamage(dmgInfo.GetDamage() - target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>());</div>
<div class="line"><span class="lineno"> 6821</span>    }</div>
<div class="line"><span class="lineno"> 6822</span> </div>
<div class="line"><span class="lineno"> 6823</span>    damage = dmgInfo.GetDamage();</div>
<div class="line"><span class="lineno"> 6824</span> </div>
<div class="line"><span class="lineno"> 6825</span>    <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: {} health leech of {} for {} dmg inflicted by {} abs is {}&quot;</span>,</div>
<div class="line"><span class="lineno"> 6826</span>                    <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code hl_function" href="../../d8/d20/a04686.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>(), target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../db/d40/a08190.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>(), damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), absorb);</div>
<div class="line"><span class="lineno"> 6827</span>    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 6828</span>        caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aaf7877cad85523173a7bcd7af163e8cb">SendSpellNonMeleeDamageLog</a>(target, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), absorb, resist, <span class="keyword">false</span>, 0, crit);</div>
<div class="line"><span class="lineno"> 6829</span> </div>
<div class="line"><span class="lineno"> 6830</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> new_damage;</div>
<div class="line"><span class="lineno"> 6831</span> </div>
<div class="line"><span class="lineno"> 6832</span>    new_damage = <a class="code hl_function" href="../../db/df9/a08518.html#afe2cdf561288531d745b6a3eb7182a98">Unit::DealDamage</a>(caster, target, damage, &amp;cleanDamage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 6833</span> </div>
<div class="line"><span class="lineno"> 6834</span>    <a class="code hl_function" href="../../db/df9/a08518.html#aad2d8dec02abdea33b3447bea9407a4f">Unit::ProcDamageAndSpell</a>(caster, target, caster ? procAttacker : 0, procVictim, procEx, damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <span class="keyword">nullptr</span>, &amp;dmgInfo);</div>
<div class="line"><span class="lineno"> 6835</span> </div>
<div class="line"><span class="lineno"> 6836</span>    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno"> 6837</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6838</span> </div>
<div class="line"><span class="lineno"> 6839</span>    <span class="keywordtype">float</span> gainMultiplier = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcValueMultiplier(caster);</div>
<div class="line"><span class="lineno"> 6840</span> </div>
<div class="line"><span class="lineno"> 6841</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> heal = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a511ec62a25ddf784aeb00787a0629b9d">SpellHealingBonusDone</a>(caster, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(new_damage * gainMultiplier), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), 0.0f, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetStackAmount()));</div>
<div class="line"><span class="lineno"> 6842</span>    heal = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aeac23e55488fc69a1b90f0e92eaf1626">SpellHealingBonusTaken</a>(caster, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), heal, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetStackAmount()));</div>
<div class="line"><span class="lineno"> 6843</span> </div>
<div class="line"><span class="lineno"> 6844</span>    <a class="code hl_class" href="../../d4/de6/a08486.html">HealInfo</a> healInfo(caster, caster, heal, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask());</div>
<div class="line"><span class="lineno"> 6845</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gain = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a62382ca15ef5f687651acd024efa1714">HealBySpell</a>(healInfo);</div>
<div class="line"><span class="lineno"> 6846</span>    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a83fe30829a1470536e408efbf56dd5f5">getHostileRefMgr</a>().<a class="code hl_function" href="../../d9/da8/a07598.html#a69c355d1c078cfba9927c8c752912b48">threatAssist</a>(caster, gain * 0.5f, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 6847</span>}</div>
<div class="ttc" id="aa08518_html_aaf7877cad85523173a7bcd7af163e8cb"><div class="ttname"><a href="../../db/df9/a08518.html#aaf7877cad85523173a7bcd7af163e8cb">Unit::SendSpellNonMeleeDamageLog</a></div><div class="ttdeci">void SendSpellNonMeleeDamageLog(SpellNonMeleeDamage *log)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:6310</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l18923">Unit::ApplyResilience()</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../#l02031">Unit::CalcArmorReducedDamage()</a>, <a class="el" href="../../#l00111">CanApplyResilience()</a>, <a class="el" href="../../#l00233">CR_CRIT_TAKEN_SPELL</a>, <a class="el" href="../../#l00810">Unit::DealDamage()</a>, <a class="el" href="../../#l00250">DOT</a>, <a class="el" href="../../#l00386">DYNOBJ_AURA_TYPE</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00365">DamageInfo::GetAbsorb()</a>, <a class="el" href="../../#l00658">Unit::GetAI()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00110">GetCasterLevel()</a>, <a class="el" href="../../#l00108">GetCritChance()</a>, <a class="el" href="../../#l00364">DamageInfo::GetDamage()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l01029">Unit::GetHealth()</a>, <a class="el" href="../../#l00907">Unit::getHostileRefMgr()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00366">DamageInfo::GetResist()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l11239">Unit::HealBySpell()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l02008">Unit::IsDamageReducedByArmor()</a>, <a class="el" href="../../#l12896">Unit::IsImmunedToDamageOrSchool()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00146">m_effIndex</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l00286">MELEE_HIT_NORMAL</a>, <a class="el" href="../../#l00320">CleanDamage::mitigated_damage</a>, <a class="el" href="../../#l00145">DamageInfo::ModifyDamage()</a>, <a class="el" href="../../#l00385">UnitAI::OnCalculatePeriodicTickReceived()</a>, <a class="el" href="../../#l00204">PROC_EX_ABSORB</a>, <a class="el" href="../../#l00195">PROC_EX_CRITICAL_HIT</a>, <a class="el" href="../../#l00219">PROC_EX_INTERNAL_DOT</a>, <a class="el" href="../../#l00194">PROC_EX_NORMAL_HIT</a>, <a class="el" href="../../#l00134">PROC_FLAG_DONE_PERIODIC</a>, <a class="el" href="../../#l00137">PROC_FLAG_TAKEN_DAMAGE</a>, <a class="el" href="../../#l00135">PROC_FLAG_TAKEN_PERIODIC</a>, <a class="el" href="../../#l06378">Unit::ProcDamageAndSpell()</a>, <a class="el" href="../../#l00053">roll_chance_f()</a>, <a class="el" href="../../#l06310">Unit::SendSpellNonMeleeDamageLog()</a>, <a class="el" href="../../#l01096">SendTickImmune()</a>, <a class="el" href="../../#l00805">SPELL_EFFECT_PERSISTENT_AREA_AURA</a>, <a class="el" href="../../#l01519">SPELL_MISS_NONE</a>, <a class="el" href="../../#l12276">Unit::SpellCriticalDamageBonus()</a>, <a class="el" href="../../#l11610">Unit::SpellDamageBonusDone()</a>, <a class="el" href="../../#l11786">Unit::SpellDamageBonusTaken()</a>, <a class="el" href="../../#l12447">Unit::SpellHealingBonusDone()</a>, <a class="el" href="../../#l12565">Unit::SpellHealingBonusTaken()</a>, <a class="el" href="../../#l03470">Unit::SpellHitResult()</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00035">HostileRefMgr::threatAssist()</a>, <a class="el" href="../../#l00047">ObjectGuid::ToString()</a>, and <a class="el" href="../../#l00162">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a20e3450e5f8299f76561cbe747d12c88" name="a20e3450e5f8299f76561cbe747d12c88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20e3450e5f8299f76561cbe747d12c88">&#9670;&#160;</a></span>HandlePeriodicManaLeechAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicManaLeechAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7027</span>{</div>
<div class="line"><span class="lineno"> 7028</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 7029</span> </div>
<div class="line"><span class="lineno"> 7030</span>    <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#adb1f3809f1c2fa9bae8ed22d3fa25b13">HasActivePowerType</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>))</div>
<div class="line"><span class="lineno"> 7031</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7032</span> </div>
<div class="line"><span class="lineno"> 7033</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>) || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae7269683ec5b0e44c3ee49bd6f896615">IsImmunedToDamageOrSchool</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()))</div>
<div class="line"><span class="lineno"> 7034</span>    {</div>
<div class="line"><span class="lineno"> 7035</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><span class="lineno"> 7036</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7037</span>    }</div>
<div class="line"><span class="lineno"> 7038</span> </div>
<div class="line"><span class="lineno"> 7039</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Effects[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].Effect == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97aa3290e738b6cd09859039989143f9ac1">SPELL_EFFECT_PERSISTENT_AREA_AURA</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 7040</span>            caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8698eb184506578c00250d3c4c352722">SpellHitResult</a>(target, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <span class="keyword">false</span>) != <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096">SPELL_MISS_NONE</a>)</div>
<div class="line"><span class="lineno"> 7041</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7042</span> </div>
<div class="line"><span class="lineno"> 7043</span>    <span class="comment">// ignore negative values (can be result apply spellmods to aura damage</span></div>
<div class="line"><span class="lineno"> 7044</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> drainAmount = std::max(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, 0);</div>
<div class="line"><span class="lineno"> 7045</span> </div>
<div class="line"><span class="lineno"> 7046</span>    <span class="comment">// Special case: draining x% of mana (up to a maximum of 2*x% of the caster&#39;s maximum mana)</span></div>
<div class="line"><span class="lineno"> 7047</span>    <span class="comment">// It&#39;s mana percent cost spells, m_amount is percent drain from target</span></div>
<div class="line"><span class="lineno"> 7048</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aad468ff1d83ba29cad67dc5d395337db">ManaCostPercentage</a>)</div>
<div class="line"><span class="lineno"> 7049</span>    {</div>
<div class="line"><span class="lineno"> 7050</span>        <span class="comment">// max value</span></div>
<div class="line"><span class="lineno"> 7051</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> maxmana = <a class="code hl_function" href="../../d4/d13/a00377.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>), drainAmount * 2.0f);</div>
<div class="line"><span class="lineno"> 7052</span>        <a class="code hl_function" href="../../d4/d13/a00377.html#acc70a4cd7bafafa527a375b638ee2f9a">ApplyPct</a>(drainAmount, target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>));</div>
<div class="line"><span class="lineno"> 7053</span>        <span class="keywordflow">if</span> (drainAmount &gt; maxmana)</div>
<div class="line"><span class="lineno"> 7054</span>            drainAmount = maxmana;</div>
<div class="line"><span class="lineno"> 7055</span>    }</div>
<div class="line"><span class="lineno"> 7056</span> </div>
<div class="line"><span class="lineno"> 7057</span>    <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;PeriodicTick: {} power leech of {} for {} dmg inflicted by {}&quot;</span>,</div>
<div class="line"><span class="lineno"> 7058</span>                    <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>().<a class="code hl_function" href="../../d8/d20/a04686.html#ac2cb308fb001c35fbaa90489ea6cf478">ToString</a>(), target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../db/d40/a08190.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>(), drainAmount, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7059</span>    <span class="comment">// resilience reduce mana draining effect at spell crit damage reduction (added in 2.4)</span></div>
<div class="line"><span class="lineno"> 7060</span>    <span class="keywordflow">if</span> (<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>)</div>
<div class="line"><span class="lineno"> 7061</span>        drainAmount -= target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5639a855e969bbb0d743322066a7ad19">GetSpellCritDamageReduction</a>(drainAmount);</div>
<div class="line"><span class="lineno"> 7062</span> </div>
<div class="line"><span class="lineno"> 7063</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> drainedAmount = -target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a04eac3be7ccc3a12db515b6d2ea20f07">ModifyPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, -drainAmount);</div>
<div class="line"><span class="lineno"> 7064</span> </div>
<div class="line"><span class="lineno"> 7065</span>    <span class="keywordtype">float</span> gainMultiplier = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcValueMultiplier(caster);</div>
<div class="line"><span class="lineno"> 7066</span> </div>
<div class="line"><span class="lineno"> 7067</span>    <a class="code hl_struct" href="../../d6/d22/a08506.html">SpellPeriodicAuraLogInfo</a> pInfo(<span class="keyword">this</span>, drainedAmount, 0, 0, 0, gainMultiplier, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 7068</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac6e545dc53605a0c05d8556cf66040c1">SendPeriodicAuraLog</a>(&amp;pInfo);</div>
<div class="line"><span class="lineno"> 7069</span> </div>
<div class="line"><span class="lineno"> 7070</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gainAmount = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(drainedAmount * gainMultiplier);</div>
<div class="line"><span class="lineno"> 7071</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> gainedAmount = 0;</div>
<div class="line"><span class="lineno"> 7072</span>    <span class="keywordflow">if</span> (gainAmount)</div>
<div class="line"><span class="lineno"> 7073</span>    {</div>
<div class="line"><span class="lineno"> 7074</span>        gainedAmount = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a04eac3be7ccc3a12db515b6d2ea20f07">ModifyPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, gainAmount);</div>
<div class="line"><span class="lineno"> 7075</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a3b4dad985e3b5dde28d89afc956999e4">AddThreat</a>(caster, <span class="keywordtype">float</span>(gainedAmount) * 0.5f, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 7076</span>    }</div>
<div class="line"><span class="lineno"> 7077</span> </div>
<div class="line"><span class="lineno"> 7078</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a3b4dad985e3b5dde28d89afc956999e4">AddThreat</a>(caster, <span class="keywordtype">float</span>(gainedAmount) * 0.5f, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;GetSchoolMask(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 7079</span> </div>
<div class="line"><span class="lineno"> 7080</span>    <span class="comment">// remove CC auras</span></div>
<div class="line"><span class="lineno"> 7081</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aee3106d8223e3a574ea629423fea1b91">RemoveAurasWithInterruptFlags</a>(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a0709fc3ab848cf1b8b4853813b8fe011a043102900f6d0a56c4ba2aaf151fa41a">AURA_INTERRUPT_FLAG_TAKE_DAMAGE</a>);</div>
<div class="line"><span class="lineno"> 7082</span> </div>
<div class="line"><span class="lineno"> 7083</span>    <span class="comment">// Drain Mana</span></div>
<div class="line"><span class="lineno"> 7084</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a> == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0a134bc75d430da10f6c1df4977c29cf">SPELLFAMILY_WARLOCK</a></div>
<div class="line"><span class="lineno"> 7085</span>            &amp;&amp; <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a30452de2bd62607418f3962d00124144">SpellFamilyFlags</a>[0] &amp; 0x00000010)</div>
<div class="line"><span class="lineno"> 7086</span>    {</div>
<div class="line"><span class="lineno"> 7087</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> manaFeedVal = 0;</div>
<div class="line"><span class="lineno"> 7088</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetEffect(1))</div>
<div class="line"><span class="lineno"> 7089</span>            manaFeedVal = aurEff-&gt;GetAmount();</div>
<div class="line"><span class="lineno"> 7090</span>        <span class="comment">// Mana Feed - Drain Mana</span></div>
<div class="line"><span class="lineno"> 7091</span>        <span class="keywordflow">if</span> (manaFeedVal &gt; 0)</div>
<div class="line"><span class="lineno"> 7092</span>        {</div>
<div class="line"><span class="lineno"> 7093</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> feedAmount = <a class="code hl_function" href="../../d4/d13/a00377.html#ae00607f8188c59ffcea5a3997c0120b0">CalculatePct</a>(gainedAmount, manaFeedVal);</div>
<div class="line"><span class="lineno"> 7094</span>            caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(caster, 32554, &amp;feedAmount, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 7095</span>        }</div>
<div class="line"><span class="lineno"> 7096</span>    }</div>
<div class="line"><span class="lineno"> 7097</span>}</div>
<div class="ttc" id="aa00377_html_acc70a4cd7bafafa527a375b638ee2f9a"><div class="ttname"><a href="../../d4/d13/a00377.html#acc70a4cd7bafafa527a375b638ee2f9a">ApplyPct</a></div><div class="ttdeci">T ApplyPct(T &amp;base, U pct)</div><div class="ttdef"><b>Definition:</b> Util.h:73</div></div>
<div class="ttc" id="aa03080_html_a0709fc3ab848cf1b8b4853813b8fe011a043102900f6d0a56c4ba2aaf151fa41a"><div class="ttname"><a href="../../d1/d7a/a03080.html#a0709fc3ab848cf1b8b4853813b8fe011a043102900f6d0a56c4ba2aaf151fa41a">AURA_INTERRUPT_FLAG_TAKE_DAMAGE</a></div><div class="ttdeci">@ AURA_INTERRUPT_FLAG_TAKE_DAMAGE</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:44</div></div>
<div class="ttc" id="aa08518_html_a5639a855e969bbb0d743322066a7ad19"><div class="ttname"><a href="../../db/df9/a08518.html#a5639a855e969bbb0d743322066a7ad19">Unit::GetSpellCritDamageReduction</a></div><div class="ttdeci">uint32 GetSpellCritDamageReduction(uint32 damage) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1201</div></div>
<div class="ttc" id="aa10898_html_aad468ff1d83ba29cad67dc5d395337db"><div class="ttname"><a href="../../d2/db6/a10898.html#aad468ff1d83ba29cad67dc5d395337db">SpellInfo::ManaCostPercentage</a></div><div class="ttdeci">uint32 ManaCostPercentage</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:367</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l14648">Unit::AddThreat()</a>, <a class="el" href="../../#l00073">ApplyPct()</a>, <a class="el" href="../../#l00044">AURA_INTERRUPT_FLAG_TAKE_DAMAGE</a>, <a class="el" href="../../#l00061">CalculatePct()</a>, <a class="el" href="../../#l01224">Unit::CastCustomSpell()</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l01057">Unit::GetMaxPower()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l01201">Unit::GetSpellCritDamageReduction()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l01053">Unit::HasActivePowerType()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l12896">Unit::IsImmunedToDamageOrSchool()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l00367">SpellInfo::ManaCostPercentage</a>, <a class="el" href="../../#l14144">Unit::ModifyPower()</a>, <a class="el" href="../../#l00269">POWER_MANA</a>, <a class="el" href="../../#l05181">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../#l06389">Unit::SendPeriodicAuraLog()</a>, <a class="el" href="../../#l01096">SendTickImmune()</a>, <a class="el" href="../../#l00805">SPELL_EFFECT_PERSISTENT_AREA_AURA</a>, <a class="el" href="../../#l01519">SPELL_MISS_NONE</a>, <a class="el" href="../../#l03533">SPELLFAMILY_WARLOCK</a>, <a class="el" href="../../#l00388">SpellInfo::SpellFamilyFlags</a>, <a class="el" href="../../#l00387">SpellInfo::SpellFamilyName</a>, <a class="el" href="../../#l03470">Unit::SpellHitResult()</a>, <a class="el" href="../../#l00047">ObjectGuid::ToString()</a>, and <a class="el" href="../../#l00162">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a0e5699c43a4f49c32daa9c1b6df068ce" name="a0e5699c43a4f49c32daa9c1b6df068ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e5699c43a4f49c32daa9c1b6df068ce">&#9670;&#160;</a></span>HandlePeriodicPowerBurnAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicPowerBurnAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7168</span>{</div>
<div class="line"><span class="lineno"> 7169</span>    <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a> <a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> = <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>());</div>
<div class="line"><span class="lineno"> 7170</span> </div>
<div class="line"><span class="lineno"> 7171</span>    <span class="keywordflow">if</span> (!caster || !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#adb1f3809f1c2fa9bae8ed22d3fa25b13">HasActivePowerType</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>))</div>
<div class="line"><span class="lineno"> 7172</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7173</span> </div>
<div class="line"><span class="lineno"> 7174</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>) || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae7269683ec5b0e44c3ee49bd6f896615">IsImmunedToDamageOrSchool</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()))</div>
<div class="line"><span class="lineno"> 7175</span>    {</div>
<div class="line"><span class="lineno"> 7176</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(target, caster);</div>
<div class="line"><span class="lineno"> 7177</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7178</span>    }</div>
<div class="line"><span class="lineno"> 7179</span> </div>
<div class="line"><span class="lineno"> 7180</span>    <span class="comment">// ignore negative values (can be result apply spellmods to aura damage</span></div>
<div class="line"><span class="lineno"> 7181</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> damage = std::max(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, 0);</div>
<div class="line"><span class="lineno"> 7182</span> </div>
<div class="line"><span class="lineno"> 7183</span>    <span class="comment">// resilience reduce mana draining effect at spell crit damage reduction (added in 2.4)</span></div>
<div class="line"><span class="lineno"> 7184</span>    <span class="keywordflow">if</span> (<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a> == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>)</div>
<div class="line"><span class="lineno"> 7185</span>        damage -= target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5639a855e969bbb0d743322066a7ad19">GetSpellCritDamageReduction</a>(damage);</div>
<div class="line"><span class="lineno"> 7186</span> </div>
<div class="line"><span class="lineno"> 7187</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> gain = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>(-target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a04eac3be7ccc3a12db515b6d2ea20f07">ModifyPower</a>(<a class="code hl_enumeration" href="../../dd/dfe/a03425.html#a0d0e3226055ad5266e487b58fd01cebd">PowerType</a>, -damage));</div>
<div class="line"><span class="lineno"> 7188</span> </div>
<div class="line"><span class="lineno"> 7189</span>    <span class="keywordtype">float</span> dmgMultiplier = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcValueMultiplier(caster);</div>
<div class="line"><span class="lineno"> 7190</span> </div>
<div class="line"><span class="lineno"> 7191</span>    <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* spellProto = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>();</div>
<div class="line"><span class="lineno"> 7192</span>    <span class="comment">// maybe has to be sent different to client, but not by SMSG_PERIODICAURALOG</span></div>
<div class="line"><span class="lineno"> 7193</span>    <a class="code hl_struct" href="../../de/df3/a08502.html">SpellNonMeleeDamage</a> damageInfo(caster, target, spellProto, spellProto-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a72ac013c860d3af649879442115971ab">SchoolMask</a>);</div>
<div class="line"><span class="lineno"> 7194</span>    <span class="comment">// no SpellDamageBonus for burn mana</span></div>
<div class="line"><span class="lineno"> 7195</span>    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af7dee3a5dbbc2970cec0ef851b81eaf7">CalculateSpellDamageTaken</a>(&amp;damageInfo, <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(gain * dmgMultiplier), spellProto);</div>
<div class="line"><span class="lineno"> 7196</span> </div>
<div class="line"><span class="lineno"> 7197</span>    <a class="code hl_function" href="../../db/df9/a08518.html#af0c5f2f98b065f2d3976f18e4bc964a4">Unit::DealDamageMods</a>(damageInfo.target, damageInfo.damage, &amp;damageInfo.absorb);</div>
<div class="line"><span class="lineno"> 7198</span> </div>
<div class="line"><span class="lineno"> 7199</span>    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aaf7877cad85523173a7bcd7af163e8cb">SendSpellNonMeleeDamageLog</a>(&amp;damageInfo);</div>
<div class="line"><span class="lineno"> 7200</span> </div>
<div class="line"><span class="lineno"> 7201</span>    <span class="comment">// Set trigger flag</span></div>
<div class="line"><span class="lineno"> 7202</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procAttacker = <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a429d6c885f9687a1b041436cb45d74ce">PROC_FLAG_DONE_PERIODIC</a>;</div>
<div class="line"><span class="lineno"> 7203</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procVictim   = <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6a968d75fc25f1413369015f9ba98870b4">PROC_FLAG_TAKEN_PERIODIC</a>;</div>
<div class="line"><span class="lineno"> 7204</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> procEx       = <a class="code hl_function" href="../../d7/d65/a03518.html#afb539370dad036ff97905efdbb4270c0">createProcExtendMask</a>(&amp;damageInfo, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ac42174a036914cd9ca25c52e98bef65aa893d017f010f243616e70394c7fec096">SPELL_MISS_NONE</a>) | <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ac9aaef596a1061b6b944e1dc0e679b46a94a1aa9ac3cd331d95f2d0c421f35f59">PROC_EX_INTERNAL_DOT</a>;</div>
<div class="line"><span class="lineno"> 7205</span>    <span class="keywordflow">if</span> (damageInfo.damage)</div>
<div class="line"><span class="lineno"> 7206</span>        procVictim |= <a class="code hl_enumvalue" href="../../df/d64/a03110.html#ade1c2af066d4cf1bbcd88f13f01cd4d6abcffcf75e3fd5015383c586153dc32c1">PROC_FLAG_TAKEN_DAMAGE</a>;</div>
<div class="line"><span class="lineno"> 7207</span> </div>
<div class="line"><span class="lineno"> 7208</span>    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1834e2b07bdde3d3a20a2479b6384bb1">DealSpellDamage</a>(&amp;damageInfo, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 7209</span> </div>
<div class="line"><span class="lineno"> 7210</span>    <a class="code hl_class" href="../../de/dcb/a08482.html">DamageInfo</a> dmgInfo(damageInfo, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a87fdcd2ffa8f71b49da9e0cfd4fb893f">DOT</a>);</div>
<div class="line"><span class="lineno"> 7211</span>    <a class="code hl_function" href="../../db/df9/a08518.html#aad2d8dec02abdea33b3447bea9407a4f">Unit::ProcDamageAndSpell</a>(caster, damageInfo.target, procAttacker, procVictim, procEx, damageInfo.damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352a5145c1138a6f21d47061e9015e07a3ae">BASE_ATTACK</a>, spellProto, <span class="keyword">nullptr</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>(), <span class="keyword">nullptr</span>, &amp;dmgInfo);</div>
<div class="line"><span class="lineno"> 7212</span>}</div>
<div class="ttc" id="aa03518_html_afb539370dad036ff97905efdbb4270c0"><div class="ttname"><a href="../../d7/d65/a03518.html#afb539370dad036ff97905efdbb4270c0">createProcExtendMask</a></div><div class="ttdeci">uint32 createProcExtendMask(SpellNonMeleeDamage *damageInfo, SpellMissInfo missCondition)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:15990</div></div>
<div class="ttc" id="aa08502_html"><div class="ttname"><a href="../../de/df3/a08502.html">SpellNonMeleeDamage</a></div><div class="ttdef"><b>Definition:</b> Unit.h:489</div></div>
<div class="ttc" id="aa08518_html_a1834e2b07bdde3d3a20a2479b6384bb1"><div class="ttname"><a href="../../db/df9/a08518.html#a1834e2b07bdde3d3a20a2479b6384bb1">Unit::DealSpellDamage</a></div><div class="ttdeci">void DealSpellDamage(SpellNonMeleeDamage *damageInfo, bool durabilityLoss, Spell const *spell=nullptr)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:1438</div></div>
<div class="ttc" id="aa08518_html_af7dee3a5dbbc2970cec0ef851b81eaf7"><div class="ttname"><a href="../../db/df9/a08518.html#af7dee3a5dbbc2970cec0ef851b81eaf7">Unit::CalculateSpellDamageTaken</a></div><div class="ttdeci">void CalculateSpellDamageTaken(SpellNonMeleeDamage *damageInfo, int32 damage, SpellInfo const *spellInfo, WeaponAttackType attackType=BASE_ATTACK, bool crit=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:1295</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00501">SpellNonMeleeDamage::absorb</a>, <a class="el" href="../../#l00209">BASE_ATTACK</a>, <a class="el" href="../../#l01295">Unit::CalculateSpellDamageTaken()</a>, <a class="el" href="../../#l15990">createProcExtendMask()</a>, <a class="el" href="../../#l00498">SpellNonMeleeDamage::damage</a>, <a class="el" href="../../#l00800">Unit::DealDamageMods()</a>, <a class="el" href="../../#l01438">Unit::DealSpellDamage()</a>, <a class="el" href="../../#l00250">DOT</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l01201">Unit::GetSpellCritDamageReduction()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l01053">Unit::HasActivePowerType()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l12896">Unit::IsImmunedToDamageOrSchool()</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l14144">Unit::ModifyPower()</a>, <a class="el" href="../../#l00269">POWER_MANA</a>, <a class="el" href="../../#l00219">PROC_EX_INTERNAL_DOT</a>, <a class="el" href="../../#l00134">PROC_FLAG_DONE_PERIODIC</a>, <a class="el" href="../../#l00137">PROC_FLAG_TAKEN_DAMAGE</a>, <a class="el" href="../../#l00135">PROC_FLAG_TAKEN_PERIODIC</a>, <a class="el" href="../../#l06378">Unit::ProcDamageAndSpell()</a>, <a class="el" href="../../#l00392">SpellInfo::SchoolMask</a>, <a class="el" href="../../#l06310">Unit::SendSpellNonMeleeDamageLog()</a>, <a class="el" href="../../#l01096">SendTickImmune()</a>, <a class="el" href="../../#l01519">SPELL_MISS_NONE</a>, <a class="el" href="../../#l00495">SpellNonMeleeDamage::target</a>, and <a class="el" href="../../#l00162">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">PeriodicTick()</a>.</p>

</div>
</div>
<a id="a545377a3f6c71f42c3897206a2dc0919" name="a545377a3f6c71f42c3897206a2dc0919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a545377a3f6c71f42c3897206a2dc0919">&#9670;&#160;</a></span>HandlePeriodicTriggerSpellAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicTriggerSpellAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000115">Todo:</a></b></dt><dd>: effect trigger spell may be independant on spell targets, and executed in spell finish phase </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 6288</span>{</div>
<div class="line"><span class="lineno"> 6289</span>    <span class="comment">// generic casting code with custom spells and target/caster customs</span></div>
<div class="line"><span class="lineno"> 6290</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].TriggerSpell;</div>
<div class="line"><span class="lineno"> 6291</span> </div>
<div class="line"><span class="lineno"> 6292</span>    <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* triggeredSpellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggerSpellId);</div>
<div class="line"><span class="lineno"> 6293</span>    <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* auraSpellInfo = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>();</div>
<div class="line"><span class="lineno"> 6294</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> auraId = auraSpellInfo-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>;</div>
<div class="line"><span class="lineno"> 6295</span> </div>
<div class="line"><span class="lineno"> 6296</span>    <span class="comment">// specific code for cases with no trigger spell provided in field</span></div>
<div class="line"><span class="lineno"> 6297</span>    <span class="keywordflow">if</span> (!triggeredSpellInfo)</div>
<div class="line"><span class="lineno"> 6298</span>    {</div>
<div class="line"><span class="lineno"> 6299</span>        <span class="keywordflow">switch</span> (auraSpellInfo-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a>)</div>
<div class="line"><span class="lineno"> 6300</span>        {</div>
<div class="line"><span class="lineno"> 6301</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>:</div>
<div class="line"><span class="lineno"> 6302</span>                {</div>
<div class="line"><span class="lineno"> 6303</span>                    <span class="keywordflow">switch</span> (auraId)</div>
<div class="line"><span class="lineno"> 6304</span>                    {</div>
<div class="line"><span class="lineno"> 6305</span>                        <span class="comment">// Thaumaturgy Channel</span></div>
<div class="line"><span class="lineno"> 6306</span>                        <span class="keywordflow">case</span> 9712:</div>
<div class="line"><span class="lineno"> 6307</span>                            triggerSpellId = 21029;</div>
<div class="line"><span class="lineno"> 6308</span>                            <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 6309</span>                                caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(caster, triggerSpellId, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 6310</span>                            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6311</span>                        <span class="comment">// Brood Affliction: Bronze</span></div>
<div class="line"><span class="lineno"> 6312</span>                        <span class="keywordflow">case</span> 23170:</div>
<div class="line"><span class="lineno"> 6313</span>                            <span class="comment">// Only 10% chance of triggering spell</span></div>
<div class="line"><span class="lineno"> 6314</span>                            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/dc9/a00389.html#a4b15099bc81731469c5078a778673c94">roll_chance_f</a>(10.f))</div>
<div class="line"><span class="lineno"> 6315</span>                            {</div>
<div class="line"><span class="lineno"> 6316</span>                                triggerSpellId = 23171;</div>
<div class="line"><span class="lineno"> 6317</span>                            }</div>
<div class="line"><span class="lineno"> 6318</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6319</span>                        <span class="comment">// Restoration</span></div>
<div class="line"><span class="lineno"> 6320</span>                        <span class="keywordflow">case</span> 24379:</div>
<div class="line"><span class="lineno"> 6321</span>                        <span class="keywordflow">case</span> 23493:</div>
<div class="line"><span class="lineno"> 6322</span>                            {</div>
<div class="line"><span class="lineno"> 6323</span>                                <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 6324</span>                                {</div>
<div class="line"><span class="lineno"> 6325</span>                                    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> heal = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac6fc3f50b72cb6f2fd8bb988d48a8dba">CountPctFromMaxHealth</a>(10);</div>
<div class="line"><span class="lineno"> 6326</span>                                    <a class="code hl_class" href="../../d4/de6/a08486.html">HealInfo</a> healInfo(caster, target, heal, auraSpellInfo, auraSpellInfo-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a8dc618d81b8658f72b686f8ac9e90829">GetSchoolMask</a>());</div>
<div class="line"><span class="lineno"> 6327</span>                                    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a62382ca15ef5f687651acd024efa1714">HealBySpell</a>(healInfo);</div>
<div class="line"><span class="lineno"> 6328</span> </div>
<div class="line"><span class="lineno"> 6329</span>                                    <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> mana = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>))</div>
<div class="line"><span class="lineno"> 6330</span>                                    {</div>
<div class="line"><span class="lineno"> 6331</span>                                        mana /= 10;</div>
<div class="line"><span class="lineno"> 6332</span>                                        caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1ed7bebb7769f200cc2625ae2a1988b0">EnergizeBySpell</a>(caster, 23493, mana, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>);</div>
<div class="line"><span class="lineno"> 6333</span>                                    }</div>
<div class="line"><span class="lineno"> 6334</span>                                }</div>
<div class="line"><span class="lineno"> 6335</span>                                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6336</span>                            }</div>
<div class="line"><span class="lineno"> 6337</span>                        <span class="comment">// Nitrous Boost</span></div>
<div class="line"><span class="lineno"> 6338</span>                        <span class="keywordflow">case</span> 27746:</div>
<div class="line"><span class="lineno"> 6339</span>                            <span class="keywordflow">if</span> (caster &amp;&amp; target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>) &gt;= 10)</div>
<div class="line"><span class="lineno"> 6340</span>                            {</div>
<div class="line"><span class="lineno"> 6341</span>                                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a04eac3be7ccc3a12db515b6d2ea20f07">ModifyPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>, -10);</div>
<div class="line"><span class="lineno"> 6342</span>                                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab0862bc9abdba0e6cf232a1ebb4efd91">SendEnergizeSpellLog</a>(caster, 27746, 10, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>);</div>
<div class="line"><span class="lineno"> 6343</span>                            }</div>
<div class="line"><span class="lineno"> 6344</span>                            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 6345</span>                                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(27746);</div>
<div class="line"><span class="lineno"> 6346</span>                            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6347</span>                        <span class="comment">// Frost Blast</span></div>
<div class="line"><span class="lineno"> 6348</span>                        <span class="keywordflow">case</span> 27808:</div>
<div class="line"><span class="lineno"> 6349</span>                            <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 6350</span>                            {</div>
<div class="line"><span class="lineno"> 6351</span>                                caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(29879, <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a4ad87b8c967acbbcb154a32bc123371bae5c19f392b2ebda372a39538fa9b592a">SPELLVALUE_BASE_POINT0</a>, <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ac6fc3f50b72cb6f2fd8bb988d48a8dba">CountPctFromMaxHealth</a>(21)), target, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6352</span>                                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a0c28e995bc0e15c692c24154bab9df4d">GetTickNumber</a>() == 1)</div>
<div class="line"><span class="lineno"> 6353</span>                                    caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 27808, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 6354</span>                            }</div>
<div class="line"><span class="lineno"> 6355</span>                            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6356</span>                        <span class="comment">// Inoculate Nestlewood Owlkin</span></div>
<div class="line"><span class="lineno"> 6357</span>                        <span class="keywordflow">case</span> 29528:</div>
<div class="line"><span class="lineno"> 6358</span>                            <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aacc8ee332f66effdc0d77c126dae1961">IsCreature</a>()) <span class="comment">// prevent error reports in case ignored player target</span></div>
<div class="line"><span class="lineno"> 6359</span>                                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6360</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6361</span>                        <span class="comment">// Feed Captured Animal</span></div>
<div class="line"><span class="lineno"> 6362</span>                        <span class="keywordflow">case</span> 29917:</div>
<div class="line"><span class="lineno"> 6363</span>                            triggerSpellId = 29916;</div>
<div class="line"><span class="lineno"> 6364</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6365</span>                        <span class="comment">// Extract Gas</span></div>
<div class="line"><span class="lineno"> 6366</span>                        <span class="keywordflow">case</span> 30427:</div>
<div class="line"><span class="lineno"> 6367</span>                            {</div>
<div class="line"><span class="lineno"> 6368</span>                                <span class="comment">// move loot to player inventory and despawn target</span></div>
<div class="line"><span class="lineno"> 6369</span>                                <span class="keywordflow">if</span> (caster &amp;&amp; caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp;</div>
<div class="line"><span class="lineno"> 6370</span>                                        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#aacc8ee332f66effdc0d77c126dae1961">IsCreature</a>() &amp;&amp;</div>
<div class="line"><span class="lineno"> 6371</span>                                        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>()-&gt;<a class="code hl_function" href="../../d1/d66/a07770.html#a97fd2015b3956323ef777b5f9e23a1e8">GetCreatureTemplate</a>()-&gt;<a class="code hl_variable" href="../../d3/d43/a07798.html#a41b5b566ed4467063839cc328f31befe">type</a> == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a5bc40f1116d89138cda8ebd1a04694dfa42f63a8ac1c2beef9f57e0bee333c3af">CREATURE_TYPE_GAS_CLOUD</a>)</div>
<div class="line"><span class="lineno"> 6372</span>                                {</div>
<div class="line"><span class="lineno"> 6373</span>                                    <a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* player = caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>();</div>
<div class="line"><span class="lineno"> 6374</span>                                    <a class="code hl_class" href="../../d1/d66/a07770.html">Creature</a>* creature = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>();</div>
<div class="line"><span class="lineno"> 6375</span>                                    <span class="comment">// missing lootid has been reported on startup - just return</span></div>
<div class="line"><span class="lineno"> 6376</span>                                    <span class="keywordflow">if</span> (!creature-&gt;<a class="code hl_function" href="../../d1/d66/a07770.html#a97fd2015b3956323ef777b5f9e23a1e8">GetCreatureTemplate</a>()-&gt;<a class="code hl_variable" href="../../d3/d43/a07798.html#a587931c50c46f01ace454be66092683d">SkinLootId</a>)</div>
<div class="line"><span class="lineno"> 6377</span>                                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6378</span> </div>
<div class="line"><span class="lineno"> 6379</span>                                    player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a0b1a642b3efc74f5e024686a93475914">AutoStoreLoot</a>(creature-&gt;<a class="code hl_function" href="../../d1/d66/a07770.html#a97fd2015b3956323ef777b5f9e23a1e8">GetCreatureTemplate</a>()-&gt;<a class="code hl_variable" href="../../d3/d43/a07798.html#a587931c50c46f01ace454be66092683d">SkinLootId</a>, <a class="code hl_variable" href="../../da/d3e/a03581.html#a195e88b39c43d01cbf8b1871a7129a60">LootTemplates_Skinning</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 6380</span> </div>
<div class="line"><span class="lineno"> 6381</span>                                    creature-&gt;<a class="code hl_function" href="../../d1/d66/a07770.html#abce66404f36b926cf403555911bcb9f7">DespawnOrUnsummon</a>();</div>
<div class="line"><span class="lineno"> 6382</span>                                }</div>
<div class="line"><span class="lineno"> 6383</span>                                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6384</span>                            }</div>
<div class="line"><span class="lineno"> 6385</span>                        <span class="comment">// Quake</span></div>
<div class="line"><span class="lineno"> 6386</span>                        <span class="keywordflow">case</span> 30576:</div>
<div class="line"><span class="lineno"> 6387</span>                            triggerSpellId = 30571;</div>
<div class="line"><span class="lineno"> 6388</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6389</span>                        <span class="comment">// Doom</span></div>
<div class="line"><span class="lineno"> 6391</span><span class="comment"></span>                        <span class="comment">// so instakill will be naturally done before trigger spell</span></div>
<div class="line"><span class="lineno"> 6392</span>                        <span class="keywordflow">case</span> 31347:</div>
<div class="line"><span class="lineno"> 6393</span>                            {</div>
<div class="line"><span class="lineno"> 6394</span>                                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 31350, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6395</span>                                <a class="code hl_function" href="../../db/df9/a08518.html#a413f3a85a1e57ce8c13b8870347830f5">Unit::Kill</a>(target, target);</div>
<div class="line"><span class="lineno"> 6396</span>                                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6397</span>                            }</div>
<div class="line"><span class="lineno"> 6398</span>                        <span class="comment">// Tear of Azzinoth Summon Channel - it&#39;s not really supposed to do anything, and this only prevents the console spam</span></div>
<div class="line"><span class="lineno"> 6399</span>                        <span class="keywordflow">case</span> 39857:</div>
<div class="line"><span class="lineno"> 6400</span>                            triggerSpellId = 39856;</div>
<div class="line"><span class="lineno"> 6401</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6402</span>                        <span class="comment">// Personalized Weather</span></div>
<div class="line"><span class="lineno"> 6403</span>                        <span class="keywordflow">case</span> 46736:</div>
<div class="line"><span class="lineno"> 6404</span>                            triggerSpellId = 46737;</div>
<div class="line"><span class="lineno"> 6405</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6406</span>                        <span class="comment">// Shield Level 1</span></div>
<div class="line"><span class="lineno"> 6407</span>                        <span class="keywordflow">case</span> 63130:</div>
<div class="line"><span class="lineno"> 6408</span>                        <span class="comment">// Shield Level 2</span></div>
<div class="line"><span class="lineno"> 6409</span>                        <span class="keywordflow">case</span> 63131:</div>
<div class="line"><span class="lineno"> 6410</span>                        <span class="comment">// Shield Level 3</span></div>
<div class="line"><span class="lineno"> 6411</span>                        <span class="keywordflow">case</span> 63132:</div>
<div class="line"><span class="lineno"> 6412</span>                        <span class="comment">// Ball of Flames Visual</span></div>
<div class="line"><span class="lineno"> 6413</span>                        <span class="keywordflow">case</span> 71706:</div>
<div class="line"><span class="lineno"> 6414</span>                            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6415</span>                        <span class="comment">// Oculus, Mage-Lord Urom, Time Bomb</span></div>
<div class="line"><span class="lineno"> 6416</span>                        <span class="keywordflow">case</span> 51121:</div>
<div class="line"><span class="lineno"> 6417</span>                        <span class="keywordflow">case</span> 59376:</div>
<div class="line"><span class="lineno"> 6418</span>                            {</div>
<div class="line"><span class="lineno"> 6419</span>                                <span class="keyword">const</span> <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> dmg = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() - target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a958172d6051b106e3b3c776e4f9f3952">GetHealth</a>();</div>
<div class="line"><span class="lineno"> 6420</span>                                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 51132, &amp;dmg, 0, 0, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 6421</span>                                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6422</span>                            }</div>
<div class="line"><span class="lineno"> 6423</span>                    }</div>
<div class="line"><span class="lineno"> 6424</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6425</span>                }</div>
<div class="line"><span class="lineno"> 6426</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a>:</div>
<div class="line"><span class="lineno"> 6427</span>                {</div>
<div class="line"><span class="lineno"> 6428</span>                    <span class="keywordflow">switch</span> (auraId)</div>
<div class="line"><span class="lineno"> 6429</span>                    {</div>
<div class="line"><span class="lineno"> 6430</span>                        <span class="comment">// Lightning Shield (The Earthshatterer set trigger after cast Lighting Shield)</span></div>
<div class="line"><span class="lineno"> 6431</span>                        <span class="keywordflow">case</span> 28820:</div>
<div class="line"><span class="lineno"> 6432</span>                            {</div>
<div class="line"><span class="lineno"> 6433</span>                                <span class="comment">// Need remove self if Lightning Shield not active</span></div>
<div class="line"><span class="lineno"> 6434</span>                                <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b">SPELL_AURA_PROC_TRIGGER_SPELL</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba9c8a9c6e102c760263471a93e58e80ea">SPELLFAMILY_SHAMAN</a>, 0x400, 0, 0))</div>
<div class="line"><span class="lineno"> 6435</span>                                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(28820);</div>
<div class="line"><span class="lineno"> 6436</span>                                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6437</span>                            }</div>
<div class="line"><span class="lineno"> 6438</span>                    }</div>
<div class="line"><span class="lineno"> 6439</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6440</span>                }</div>
<div class="line"><span class="lineno"> 6441</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 6442</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6443</span>        }</div>
<div class="line"><span class="lineno"> 6444</span>    }</div>
<div class="line"><span class="lineno"> 6445</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 6446</span>    {</div>
<div class="line"><span class="lineno"> 6447</span>        <span class="comment">// Spell exist but require custom code</span></div>
<div class="line"><span class="lineno"> 6448</span>        <span class="keywordflow">switch</span> (auraId)</div>
<div class="line"><span class="lineno"> 6449</span>        {</div>
<div class="line"><span class="lineno"> 6450</span>            <span class="comment">// Mana Tide</span></div>
<div class="line"><span class="lineno"> 6451</span>            <span class="keywordflow">case</span> 16191:</div>
<div class="line"><span class="lineno"> 6452</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, triggerSpellId, &amp;<a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6453</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6454</span>            <span class="comment">// Poison (Grobbulus)</span></div>
<div class="line"><span class="lineno"> 6455</span>            <span class="keywordflow">case</span> 28158:</div>
<div class="line"><span class="lineno"> 6456</span>            <span class="keywordflow">case</span> 54362:</div>
<div class="line"><span class="lineno"> 6457</span>            <span class="comment">// Slime Pool (Dreadscale &amp; Acidmaw)</span></div>
<div class="line"><span class="lineno"> 6458</span>            <span class="keywordflow">case</span> 66882:</div>
<div class="line"><span class="lineno"> 6459</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(triggerSpellId, <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a4ad87b8c967acbbcb154a32bc123371ba97ab1803f9ef6a623afef555025a6df8">SPELLVALUE_RADIUS_MOD</a>, (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)((((<span class="keywordtype">float</span>)<a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> / 60) * 0.9f + 0.1f) * 10000 * 2 / 3), <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6460</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6461</span>            <span class="comment">// Eye of Eternity, Malygos, Arcane Overload</span></div>
<div class="line"><span class="lineno"> 6462</span>            <span class="keywordflow">case</span> 56432:</div>
<div class="line"><span class="lineno"> 6463</span>                <span class="keywordflow">if</span> (triggerSpellId == 56438)</div>
<div class="line"><span class="lineno"> 6464</span>                {</div>
<div class="line"><span class="lineno"> 6465</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(triggerSpellId, <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a4ad87b8c967acbbcb154a32bc123371ba97ab1803f9ef6a623afef555025a6df8">SPELLVALUE_RADIUS_MOD</a>, (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)(10000 * (1.0f - 0.02f * (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> + 1))), <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6466</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6467</span>                }</div>
<div class="line"><span class="lineno"> 6468</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6469</span>            <span class="comment">// Beacon of Light</span></div>
<div class="line"><span class="lineno"> 6470</span>            <span class="keywordflow">case</span> 53563:</div>
<div class="line"><span class="lineno"> 6471</span>                {</div>
<div class="line"><span class="lineno"> 6472</span>                    <span class="comment">// area aura owner casts the spell</span></div>
<div class="line"><span class="lineno"> 6473</span>                    <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a25ce9277dfb99c46f2f0136e4aa5ab7c">GetUnitOwner</a>()-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, triggeredSpellInfo, <span class="keyword">true</span>, 0, <span class="keyword">this</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetUnitOwner()-&gt;GetGUID());</div>
<div class="line"><span class="lineno"> 6474</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6475</span>                }</div>
<div class="line"><span class="lineno"> 6476</span>            <span class="comment">// Trial of the Crusader, Jaraxxus, Spinning Pain Spike</span></div>
<div class="line"><span class="lineno"> 6477</span>            <span class="keywordflow">case</span> 66283:</div>
<div class="line"><span class="lineno"> 6478</span>                {</div>
<div class="line"><span class="lineno"> 6479</span>                    <span class="keyword">const</span> <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> dmg = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5173c1774b09b42c409bf31280c37d36">GetMaxHealth</a>() / 2;</div>
<div class="line"><span class="lineno"> 6480</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 66316, &amp;dmg, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 6481</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6482</span>                }</div>
<div class="line"><span class="lineno"> 6483</span>            <span class="comment">// Violet Hold, Moragg, Ray of Suffering, Ray of Pain</span></div>
<div class="line"><span class="lineno"> 6484</span>            <span class="keywordflow">case</span> 54442:</div>
<div class="line"><span class="lineno"> 6485</span>            <span class="keywordflow">case</span> 59524:</div>
<div class="line"><span class="lineno"> 6486</span>            <span class="keywordflow">case</span> 54438:</div>
<div class="line"><span class="lineno"> 6487</span>            <span class="keywordflow">case</span> 59523:</div>
<div class="line"><span class="lineno"> 6488</span>                {</div>
<div class="line"><span class="lineno"> 6489</span>                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 6490</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* victim = caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>())</div>
<div class="line"><span class="lineno"> 6491</span>                            <span class="keywordflow">if</span> (victim-&gt;GetDistance(caster) &lt; 45.0f)</div>
<div class="line"><span class="lineno"> 6492</span>                            {</div>
<div class="line"><span class="lineno"> 6493</span>                                target = victim;</div>
<div class="line"><span class="lineno"> 6494</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6495</span>                            }</div>
<div class="line"><span class="lineno"> 6496</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6497</span>                }</div>
<div class="line"><span class="lineno"> 6498</span>            <span class="keywordflow">case</span> 24745: <span class="comment">// Summon Templar, Trigger</span></div>
<div class="line"><span class="lineno"> 6499</span>            <span class="keywordflow">case</span> 24747: <span class="comment">// Summon Templar Fire, Trigger</span></div>
<div class="line"><span class="lineno"> 6500</span>            <span class="keywordflow">case</span> 24757: <span class="comment">// Summon Templar Air, Trigger</span></div>
<div class="line"><span class="lineno"> 6501</span>            <span class="keywordflow">case</span> 24759: <span class="comment">// Summon Templar Earth, Trigger</span></div>
<div class="line"><span class="lineno"> 6502</span>            <span class="keywordflow">case</span> 24761: <span class="comment">// Summon Templar Water, Trigger</span></div>
<div class="line"><span class="lineno"> 6503</span>            <span class="keywordflow">case</span> 24762: <span class="comment">// Summon Duke, Trigger</span></div>
<div class="line"><span class="lineno"> 6504</span>            <span class="keywordflow">case</span> 24766: <span class="comment">// Summon Duke Fire, Trigger</span></div>
<div class="line"><span class="lineno"> 6505</span>            <span class="keywordflow">case</span> 24769: <span class="comment">// Summon Duke Air, Trigger</span></div>
<div class="line"><span class="lineno"> 6506</span>            <span class="keywordflow">case</span> 24771: <span class="comment">// Summon Duke Earth, Trigger</span></div>
<div class="line"><span class="lineno"> 6507</span>            <span class="keywordflow">case</span> 24773: <span class="comment">// Summon Duke Water, Trigger</span></div>
<div class="line"><span class="lineno"> 6508</span>            <span class="keywordflow">case</span> 24785: <span class="comment">// Summon Royal, Trigger</span></div>
<div class="line"><span class="lineno"> 6509</span>            <span class="keywordflow">case</span> 24787: <span class="comment">// Summon Royal Fire, Trigger</span></div>
<div class="line"><span class="lineno"> 6510</span>            <span class="keywordflow">case</span> 24791: <span class="comment">// Summon Royal Air, Trigger</span></div>
<div class="line"><span class="lineno"> 6511</span>            <span class="keywordflow">case</span> 24792: <span class="comment">// Summon Royal Earth, Trigger</span></div>
<div class="line"><span class="lineno"> 6512</span>            <span class="keywordflow">case</span> 24793: <span class="comment">// Summon Royal Water, Trigger</span></div>
<div class="line"><span class="lineno"> 6513</span>                {</div>
<div class="line"><span class="lineno"> 6514</span>                    <span class="comment">// All this spells trigger a spell that requires reagents; if the</span></div>
<div class="line"><span class="lineno"> 6515</span>                    <span class="comment">// triggered spell is cast as &quot;triggered&quot;, reagents are not consumed</span></div>
<div class="line"><span class="lineno"> 6516</span>                    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 6517</span>                        caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, triggerSpellId, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 6518</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6519</span>                }</div>
<div class="line"><span class="lineno"> 6520</span>            <span class="comment">// Hunter - Rapid Recuperation</span></div>
<div class="line"><span class="lineno"> 6521</span>            <span class="keywordflow">case</span> 56654:</div>
<div class="line"><span class="lineno"> 6522</span>            <span class="keywordflow">case</span> 58882:</div>
<div class="line"><span class="lineno"> 6523</span>                <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> amount = <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a93f83fd909310de2c76382d00d7dbbf1">GetMaxPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>) * <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() / 100.0f);</div>
<div class="line"><span class="lineno"> 6524</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, triggerSpellId, &amp;amount, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6525</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6526</span>        }</div>
<div class="line"><span class="lineno"> 6527</span>    }</div>
<div class="line"><span class="lineno"> 6528</span> </div>
<div class="line"><span class="lineno"> 6529</span>    <span class="comment">// Reget trigger spell proto</span></div>
<div class="line"><span class="lineno"> 6530</span>    triggeredSpellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggerSpellId);</div>
<div class="line"><span class="lineno"> 6531</span> </div>
<div class="line"><span class="lineno"> 6532</span>    <span class="keywordflow">if</span> (triggeredSpellInfo)</div>
<div class="line"><span class="lineno"> 6533</span>    {</div>
<div class="line"><span class="lineno"> 6534</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* triggerCaster = triggeredSpellInfo-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a4c7c234798883a938f264f5ef9825e0a">NeedsToBeTriggeredByCaster</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()) ? caster : target)</div>
<div class="line"><span class="lineno"> 6535</span>        {</div>
<div class="line"><span class="lineno"> 6536</span>            <a class="code hl_class" href="../../df/d90/a10814.html">SpellCastTargets</a> targets;</div>
<div class="line"><span class="lineno"> 6537</span>            targets.<a class="code hl_function" href="../../df/d90/a10814.html#a981f7520eed4002d70d7b15eb5e710a7">SetUnitTarget</a>(target);</div>
<div class="line"><span class="lineno"> 6538</span>            <span class="keywordflow">if</span> (triggeredSpellInfo-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a3e2564cfe616fac133d4a81af36f6b5a">IsChannelCategorySpell</a>() &amp;&amp; <a class="code hl_variable" href="../../d6/d2f/a10782.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>)</div>
<div class="line"><span class="lineno"> 6539</span>            {</div>
<div class="line"><span class="lineno"> 6540</span>                targets.<a class="code hl_function" href="../../df/d90/a10814.html#ad3c49b0121f60c337101ed9107dbc4e8">SetDstChannel</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>-&gt;<a class="code hl_variable" href="../../db/d67/a10822.html#aa5cfec093a599f4bf33ebf0c73a2f4ac">spellDst</a>);</div>
<div class="line"><span class="lineno"> 6541</span>                targets.<a class="code hl_function" href="../../df/d90/a10814.html#aa1f08cea0af20a69bc9e3cea47a03e62">SetObjectTargetChannel</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>-&gt;<a class="code hl_variable" href="../../db/d67/a10822.html#afad1c896d6a137ebb224fd636ba4d7f2">channelGUID</a>);</div>
<div class="line"><span class="lineno"> 6542</span>            }</div>
<div class="line"><span class="lineno"> 6543</span> </div>
<div class="line"><span class="lineno"> 6544</span>            <span class="comment">// Xinef: do not skip reagent cost for entry casts</span></div>
<div class="line"><span class="lineno"> 6545</span>            <a class="code hl_enumeration" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967">TriggerCastFlags</a> triggerFlags = <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a">TRIGGERED_FULL_MASK</a>;</div>
<div class="line"><span class="lineno"> 6546</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Effects[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].TargetA.GetCheckType() == <a class="code hl_enumvalue" href="../../d4/d44/a03065.html#a392c69714f880d43f8afb5510ba1fff7ab9ec49a9cbf57785f6e61d137e7d89dc">TARGET_CHECK_ENTRY</a> || <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;Effects[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].TargetB.GetCheckType() == <a class="code hl_enumvalue" href="../../d4/d44/a03065.html#a392c69714f880d43f8afb5510ba1fff7ab9ec49a9cbf57785f6e61d137e7d89dc">TARGET_CHECK_ENTRY</a>)</div>
<div class="line"><span class="lineno"> 6547</span>                triggerFlags = <a class="code hl_enumeration" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967">TriggerCastFlags</a>(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a">TRIGGERED_FULL_MASK</a> &amp; ~<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967a1186247cfc7007358221bd431b828ba0">TRIGGERED_IGNORE_POWER_AND_REAGENT_COST</a>);</div>
<div class="line"><span class="lineno"> 6548</span> </div>
<div class="line"><span class="lineno"> 6549</span>            triggerCaster-&gt;CastSpell(targets, triggeredSpellInfo, <span class="keyword">nullptr</span>, triggerFlags, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6550</span>            <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandlePeriodicTriggerSpellAuraTick: Spell {} Trigger {}&quot;</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), triggeredSpellInfo-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>);</div>
<div class="line"><span class="lineno"> 6551</span>        }</div>
<div class="line"><span class="lineno"> 6552</span>    }</div>
<div class="line"><span class="lineno"> 6553</span>}</div>
<div class="ttc" id="aa02771_html_a5bc40f1116d89138cda8ebd1a04694dfa42f63a8ac1c2beef9f57e0bee333c3af"><div class="ttname"><a href="../../d0/dbd/a02771.html#a5bc40f1116d89138cda8ebd1a04694dfa42f63a8ac1c2beef9f57e0bee333c3af">CREATURE_TYPE_GAS_CLOUD</a></div><div class="ttdeci">@ CREATURE_TYPE_GAS_CLOUD</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:2640</div></div>
<div class="ttc" id="aa03065_html_a392c69714f880d43f8afb5510ba1fff7ab9ec49a9cbf57785f6e61d137e7d89dc"><div class="ttname"><a href="../../d4/d44/a03065.html#a392c69714f880d43f8afb5510ba1fff7ab9ec49a9cbf57785f6e61d137e7d89dc">TARGET_CHECK_ENTRY</a></div><div class="ttdeci">@ TARGET_CHECK_ENTRY</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:115</div></div>
<div class="ttc" id="aa03080_html_a4ad87b8c967acbbcb154a32bc123371ba97ab1803f9ef6a623afef555025a6df8"><div class="ttname"><a href="../../d1/d7a/a03080.html#a4ad87b8c967acbbcb154a32bc123371ba97ab1803f9ef6a623afef555025a6df8">SPELLVALUE_RADIUS_MOD</a></div><div class="ttdeci">@ SPELLVALUE_RADIUS_MOD</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:116</div></div>
<div class="ttc" id="aa03080_html_a9f3c49d8db7e142b86eba36bc8951967"><div class="ttname"><a href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967">TriggerCastFlags</a></div><div class="ttdeci">TriggerCastFlags</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:129</div></div>
<div class="ttc" id="aa03080_html_a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a"><div class="ttname"><a href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a">TRIGGERED_FULL_MASK</a></div><div class="ttdeci">@ TRIGGERED_FULL_MASK</div><div class="ttdoc">Will return SPELL_FAILED_DONT_REPORT in CheckCast functions.</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:147</div></div>
<div class="ttc" id="aa03080_html_a9f3c49d8db7e142b86eba36bc8951967a1186247cfc7007358221bd431b828ba0"><div class="ttname"><a href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967a1186247cfc7007358221bd431b828ba0">TRIGGERED_IGNORE_POWER_AND_REAGENT_COST</a></div><div class="ttdeci">@ TRIGGERED_IGNORE_POWER_AND_REAGENT_COST</div><div class="ttdoc">Will ignore Spell and Category cooldowns.</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:133</div></div>
<div class="ttc" id="aa03581_html_a195e88b39c43d01cbf8b1871a7129a60"><div class="ttname"><a href="../../da/d3e/a03581.html#a195e88b39c43d01cbf8b1871a7129a60">LootTemplates_Skinning</a></div><div class="ttdeci">LootStore LootTemplates_Skinning(&quot;skinning_loot_template&quot;, &quot;creature skinning id&quot;, true)</div></div>
<div class="ttc" id="aa07770_html_abce66404f36b926cf403555911bcb9f7"><div class="ttname"><a href="../../d1/d66/a07770.html#abce66404f36b926cf403555911bcb9f7">Creature::DespawnOrUnsummon</a></div><div class="ttdeci">void DespawnOrUnsummon(Milliseconds msTimeToDespawn, Seconds forcedRespawnTimer)</div><div class="ttdef"><b>Definition:</b> Creature.cpp:2176</div></div>
<div class="ttc" id="aa07798_html_a41b5b566ed4467063839cc328f31befe"><div class="ttname"><a href="../../d3/d43/a07798.html#a41b5b566ed4467063839cc328f31befe">CreatureTemplate::type</a></div><div class="ttdeci">uint32 type</div><div class="ttdef"><b>Definition:</b> CreatureData.h:222</div></div>
<div class="ttc" id="aa07798_html_a587931c50c46f01ace454be66092683d"><div class="ttname"><a href="../../d3/d43/a07798.html#a587931c50c46f01ace454be66092683d">CreatureTemplate::SkinLootId</a></div><div class="ttdeci">uint32 SkinLootId</div><div class="ttdef"><b>Definition:</b> CreatureData.h:226</div></div>
<div class="ttc" id="aa08386_html_a0b1a642b3efc74f5e024686a93475914"><div class="ttname"><a href="../../d0/dc6/a08386.html#a0b1a642b3efc74f5e024686a93475914">Player::AutoStoreLoot</a></div><div class="ttdeci">void AutoStoreLoot(uint8 bag, uint8 slot, uint32 loot_id, LootStore const &amp;store, bool broadcast=false)</div><div class="ttdef"><b>Definition:</b> Player.cpp:13499</div></div>
<div class="ttc" id="aa08518_html_a1ed7bebb7769f200cc2625ae2a1988b0"><div class="ttname"><a href="../../db/df9/a08518.html#a1ed7bebb7769f200cc2625ae2a1988b0">Unit::EnergizeBySpell</a></div><div class="ttdeci">void EnergizeBySpell(Unit *victim, uint32 SpellID, uint32 Damage, Powers powertype)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:11266</div></div>
<div class="ttc" id="aa08518_html_ab0862bc9abdba0e6cf232a1ebb4efd91"><div class="ttname"><a href="../../db/df9/a08518.html#ab0862bc9abdba0e6cf232a1ebb4efd91">Unit::SendEnergizeSpellLog</a></div><div class="ttdeci">void SendEnergizeSpellLog(Unit *victim, uint32 SpellID, uint32 Damage, Powers powertype)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:11255</div></div>
<div class="ttc" id="aa10794_html_a25ce9277dfb99c46f2f0136e4aa5ab7c"><div class="ttname"><a href="../../df/d4a/a10794.html#a25ce9277dfb99c46f2f0136e4aa5ab7c">Aura::GetUnitOwner</a></div><div class="ttdeci">Unit * GetUnitOwner() const</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:108</div></div>
<div class="ttc" id="aa10814_html"><div class="ttname"><a href="../../df/d90/a10814.html">SpellCastTargets</a></div><div class="ttdef"><b>Definition:</b> Spell.h:111</div></div>
<div class="ttc" id="aa10814_html_a981f7520eed4002d70d7b15eb5e710a7"><div class="ttname"><a href="../../df/d90/a10814.html#a981f7520eed4002d70d7b15eb5e710a7">SpellCastTargets::SetUnitTarget</a></div><div class="ttdeci">void SetUnitTarget(Unit *target)</div><div class="ttdef"><b>Definition:</b> Spell.cpp:239</div></div>
<div class="ttc" id="aa10814_html_aa1f08cea0af20a69bc9e3cea47a03e62"><div class="ttname"><a href="../../df/d90/a10814.html#aa1f08cea0af20a69bc9e3cea47a03e62">SpellCastTargets::SetObjectTargetChannel</a></div><div class="ttdeci">void SetObjectTargetChannel(ObjectGuid targetGUID)</div><div class="ttdef"><b>Definition:</b> Spell.cpp:454</div></div>
<div class="ttc" id="aa10814_html_ad3c49b0121f60c337101ed9107dbc4e8"><div class="ttname"><a href="../../df/d90/a10814.html#ad3c49b0121f60c337101ed9107dbc4e8">SpellCastTargets::SetDstChannel</a></div><div class="ttdeci">void SetDstChannel(SpellDestination const &amp;spellDest)</div><div class="ttdef"><b>Definition:</b> Spell.cpp:459</div></div>
<div class="ttc" id="aa10822_html_aa5cfec093a599f4bf33ebf0c73a2f4ac"><div class="ttname"><a href="../../db/d67/a10822.html#aa5cfec093a599f4bf33ebf0c73a2f4ac">ChannelTargetData::spellDst</a></div><div class="ttdeci">SpellDestination spellDst</div><div class="ttdef"><b>Definition:</b> Spell.h:251</div></div>
<div class="ttc" id="aa10822_html_afad1c896d6a137ebb224fd636ba4d7f2"><div class="ttname"><a href="../../db/d67/a10822.html#afad1c896d6a137ebb224fd636ba4d7f2">ChannelTargetData::channelGUID</a></div><div class="ttdeci">ObjectGuid channelGUID</div><div class="ttdef"><b>Definition:</b> Spell.h:250</div></div>
<div class="ttc" id="aa10898_html_a3e2564cfe616fac133d4a81af36f6b5a"><div class="ttname"><a href="../../d2/db6/a10898.html#a3e2564cfe616fac133d4a81af36f6b5a">SpellInfo::IsChannelCategorySpell</a></div><div class="ttdeci">bool IsChannelCategorySpell() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1083</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l13499">Player::AutoStoreLoot()</a>, <a class="el" href="../../#l01224">Unit::CastCustomSpell()</a>, <a class="el" href="../../#l01167">Unit::CastSpell()</a>, <a class="el" href="../../#l00250">ChannelTargetData::channelGUID</a>, <a class="el" href="../../#l01042">Unit::CountPctFromMaxHealth()</a>, <a class="el" href="../../#l02640">CREATURE_TYPE_GAS_CLOUD</a>, <a class="el" href="../../#l02176">Creature::DespawnOrUnsummon()</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l11266">Unit::EnergizeBySpell()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l05494">Unit::GetAuraEffect()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00205">Creature::GetCreatureTemplate()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l01029">Unit::GetHealth()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l01030">Unit::GetMaxHealth()</a>, <a class="el" href="../../#l01057">Unit::GetMaxPower()</a>, <a class="el" href="../../#l01056">Unit::GetPower()</a>, <a class="el" href="../../#l01987">SpellInfo::GetSchoolMask()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00087">GetTickNumber()</a>, <a class="el" href="../../#l00108">Aura::GetUnitOwner()</a>, <a class="el" href="../../#l00853">Unit::GetVictim()</a>, <a class="el" href="../../#l11239">Unit::HealBySpell()</a>, <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l01083">SpellInfo::IsChannelCategorySpell()</a>, <a class="el" href="../../#l00201">Object::IsCreature()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l17698">Unit::Kill()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../da/d3e/a03581.html#a195e88b39c43d01cbf8b1871a7129a60">LootTemplates_Skinning</a>, <a class="el" href="../../#l00129">m_amount</a>, <a class="el" href="../../#l00138">m_channelData</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l00144">m_tickNumber</a>, <a class="el" href="../../#l14144">Unit::ModifyPower()</a>, <a class="el" href="../../#l01038">SpellInfo::NeedsToBeTriggeredByCaster()</a>, <a class="el" href="../../#l00269">POWER_MANA</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../#l00053">roll_chance_f()</a>, <a class="el" href="../../#l11255">Unit::SendEnergizeSpellLog()</a>, <a class="el" href="../../#l00459">SpellCastTargets::SetDstChannel()</a>, <a class="el" href="../../#l00454">SpellCastTargets::SetObjectTargetChannel()</a>, <a class="el" href="../../#l00239">SpellCastTargets::SetUnitTarget()</a>, <a class="el" href="../../#l00226">CreatureTemplate::SkinLootId</a>, <a class="el" href="../../#l00105">SPELL_AURA_PROC_TRIGGER_SPELL</a>, <a class="el" href="../../#l00251">ChannelTargetData::spellDst</a>, <a class="el" href="../../#l03528">SPELLFAMILY_GENERIC</a>, <a class="el" href="../../#l03539">SPELLFAMILY_SHAMAN</a>, <a class="el" href="../../#l00387">SpellInfo::SpellFamilyName</a>, <a class="el" href="../../#l00113">SPELLVALUE_BASE_POINT0</a>, <a class="el" href="../../#l00116">SPELLVALUE_RADIUS_MOD</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, <a class="el" href="../../#l00115">TARGET_CHECK_ENTRY</a>, <a class="el" href="../../#l00202">Object::ToCreature()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00147">TRIGGERED_FULL_MASK</a>, <a class="el" href="../../#l00133">TRIGGERED_IGNORE_POWER_AND_REAGENT_COST</a>, and <a class="el" href="../../#l00222">CreatureTemplate::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">PeriodicTick()</a>.</p>

</div>
</div>
<a id="af605dc2f9174968cb77b9d3cc50a1fb4" name="af605dc2f9174968cb77b9d3cc50a1fb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af605dc2f9174968cb77b9d3cc50a1fb4">&#9670;&#160;</a></span>HandlePeriodicTriggerSpellWithValueAuraTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePeriodicTriggerSpellWithValueAuraTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6556</span>{</div>
<div class="line"><span class="lineno"> 6557</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].TriggerSpell;</div>
<div class="line"><span class="lineno"> 6558</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* triggeredSpellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggerSpellId))</div>
<div class="line"><span class="lineno"> 6559</span>    {</div>
<div class="line"><span class="lineno"> 6560</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* triggerCaster = triggeredSpellInfo-&gt;NeedsToBeTriggeredByCaster(<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()) ? caster : target)</div>
<div class="line"><span class="lineno"> 6561</span>        {</div>
<div class="line"><span class="lineno"> 6562</span>            <a class="code hl_class" href="../../df/d90/a10814.html">SpellCastTargets</a> targets;</div>
<div class="line"><span class="lineno"> 6563</span>            targets.<a class="code hl_function" href="../../df/d90/a10814.html#a981f7520eed4002d70d7b15eb5e710a7">SetUnitTarget</a>(target);</div>
<div class="line"><span class="lineno"> 6564</span>            <span class="keywordflow">if</span> (triggeredSpellInfo-&gt;IsChannelCategorySpell() &amp;&amp; <a class="code hl_variable" href="../../d6/d2f/a10782.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>)</div>
<div class="line"><span class="lineno"> 6565</span>            {</div>
<div class="line"><span class="lineno"> 6566</span>                targets.<a class="code hl_function" href="../../df/d90/a10814.html#ad3c49b0121f60c337101ed9107dbc4e8">SetDstChannel</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>-&gt;<a class="code hl_variable" href="../../db/d67/a10822.html#aa5cfec093a599f4bf33ebf0c73a2f4ac">spellDst</a>);</div>
<div class="line"><span class="lineno"> 6567</span>                targets.<a class="code hl_function" href="../../df/d90/a10814.html#aa1f08cea0af20a69bc9e3cea47a03e62">SetObjectTargetChannel</a>(<a class="code hl_variable" href="../../d6/d2f/a10782.html#a256fe55e1c441e5dcc7c33abb4222e69">m_channelData</a>-&gt;<a class="code hl_variable" href="../../db/d67/a10822.html#afad1c896d6a137ebb224fd636ba4d7f2">channelGUID</a>);</div>
<div class="line"><span class="lineno"> 6568</span>            }</div>
<div class="line"><span class="lineno"> 6569</span> </div>
<div class="line"><span class="lineno"> 6570</span>            <a class="code hl_class" href="../../d2/d74/a10874.html">CustomSpellValues</a> values;</div>
<div class="line"><span class="lineno"> 6571</span>            values.<a class="code hl_function" href="../../d2/d74/a10874.html#a1c14e27dd094be2fccff3d74a1414a80">AddSpellMod</a>(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a4ad87b8c967acbbcb154a32bc123371bae5c19f392b2ebda372a39538fa9b592a">SPELLVALUE_BASE_POINT0</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno"> 6572</span> </div>
<div class="line"><span class="lineno"> 6573</span>            triggerCaster-&gt;CastSpell(targets, triggeredSpellInfo, &amp;values, <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a">TRIGGERED_FULL_MASK</a>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 6574</span>            <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandlePeriodicTriggerSpellWithValueAuraTick: Spell {} Trigger {}&quot;</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), triggeredSpellInfo-&gt;Id);</div>
<div class="line"><span class="lineno"> 6575</span>        }</div>
<div class="line"><span class="lineno"> 6576</span>    }</div>
<div class="line"><span class="lineno"> 6577</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 6578</span>    {</div>
<div class="line"><span class="lineno"> 6579</span>        <a class="code hl_class" href="../../d1/d66/a07770.html">Creature</a>* c = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>();</div>
<div class="line"><span class="lineno"> 6580</span>        <span class="keywordflow">if</span> (c &amp;&amp; caster)</div>
<div class="line"><span class="lineno"> 6581</span>        {</div>
<div class="line"><span class="lineno"> 6582</span>            <a class="code hl_define" href="../../d1/d8f/a04202.html#ae8161e629869974bc49b1cbfc73c1087">sScriptMgr</a>-&gt;OnDummyEffect(caster, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ff">SpellEffIndex</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()), target-&gt;ToCreature());</div>
<div class="line"><span class="lineno"> 6583</span>        }</div>
<div class="line"><span class="lineno"> 6584</span> </div>
<div class="line"><span class="lineno"> 6585</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandlePeriodicTriggerSpellWithValueAuraTick: Spell {} has non-existent spell {} in EffectTriggered[{}] and is therefor not triggered.&quot;</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), triggerSpellId, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>());</div>
<div class="line"><span class="lineno"> 6586</span>    }</div>
<div class="line"><span class="lineno"> 6587</span>}</div>
<div class="ttc" id="aa02771_html_a091a832125de330a1d2fb91d57c0e1ff"><div class="ttname"><a href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ff">SpellEffIndex</a></div><div class="ttdeci">SpellEffIndex</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:30</div></div>
<div class="ttc" id="aa10874_html"><div class="ttname"><a href="../../d2/d74/a10874.html">CustomSpellValues</a></div><div class="ttdef"><b>Definition:</b> SpellDefines.h:162</div></div>
<div class="ttc" id="aa10874_html_a1c14e27dd094be2fccff3d74a1414a80"><div class="ttname"><a href="../../d2/d74/a10874.html#a1c14e27dd094be2fccff3d74a1414a80">CustomSpellValues::AddSpellMod</a></div><div class="ttdeci">void AddSpellMod(SpellValueMod mod, int32 value)</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:164</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00164">CustomSpellValues::AddSpellMod()</a>, <a class="el" href="../../#l00250">ChannelTargetData::channelGUID</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00138">m_channelData</a>, <a class="el" href="../../#l00146">m_effIndex</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l00459">SpellCastTargets::SetDstChannel()</a>, <a class="el" href="../../#l00454">SpellCastTargets::SetObjectTargetChannel()</a>, <a class="el" href="../../#l00239">SpellCastTargets::SetUnitTarget()</a>, <a class="el" href="../../#l00251">ChannelTargetData::spellDst</a>, <a class="el" href="../../#l00113">SPELLVALUE_BASE_POINT0</a>, <a class="el" href="../../#l00709">sScriptMgr</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, <a class="el" href="../../#l00202">Object::ToCreature()</a>, and <a class="el" href="../../#l00147">TRIGGERED_FULL_MASK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01102">PeriodicTick()</a>.</p>

</div>
</div>
<a id="ae4ae88f1abefd9f50e42dce8e928b1c9" name="ae4ae88f1abefd9f50e42dce8e928b1c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4ae88f1abefd9f50e42dce8e928b1c9">&#9670;&#160;</a></span>HandlePhase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePhase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1803</span>{</div>
<div class="line"><span class="lineno"> 1804</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 1805</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1806</span> </div>
<div class="line"><span class="lineno"> 1807</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1808</span> </div>
<div class="line"><span class="lineno"> 1809</span>    <span class="comment">// no-phase is also phase state so same code for apply and remove</span></div>
<div class="line"><span class="lineno"> 1810</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> newPhase = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a839e8e5f55d1067217f39293663663eb">GetPhaseByAuras</a>();</div>
<div class="line"><span class="lineno"> 1811</span> </div>
<div class="line"><span class="lineno"> 1812</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* player = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno"> 1813</span>    {</div>
<div class="line"><span class="lineno"> 1814</span>        <span class="keywordflow">if</span> (!newPhase)</div>
<div class="line"><span class="lineno"> 1815</span>            newPhase = <a class="code hl_enumvalue" href="../../d4/d4b/a03464.html#a154255f23e41069883118fc4f0d23157aa253161c3caae282ce3c6922048db060">PHASEMASK_NORMAL</a>;</div>
<div class="line"><span class="lineno"> 1816</span> </div>
<div class="line"><span class="lineno"> 1817</span>        <span class="comment">// do not change phase to GM with all phases enabled</span></div>
<div class="line"><span class="lineno"> 1818</span>        <span class="keywordflow">if</span> (player-&gt;IsGameMaster())</div>
<div class="line"><span class="lineno"> 1819</span>            newPhase = <a class="code hl_enumvalue" href="../../d4/d4b/a03464.html#a154255f23e41069883118fc4f0d23157a212ead88887027cc3575f2b07c08af57">PHASEMASK_ANYWHERE</a>;</div>
<div class="line"><span class="lineno"> 1820</span> </div>
<div class="line"><span class="lineno"> 1821</span>        player-&gt;SetPhaseMask(newPhase, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1822</span>        player-&gt;GetSession()-&gt;SendSetPhaseShift(newPhase);</div>
<div class="line"><span class="lineno"> 1823</span>    }</div>
<div class="line"><span class="lineno"> 1824</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1825</span>    {</div>
<div class="line"><span class="lineno"> 1826</span>        <span class="keywordflow">if</span> (!newPhase)</div>
<div class="line"><span class="lineno"> 1827</span>        {</div>
<div class="line"><span class="lineno"> 1828</span>            newPhase = <a class="code hl_enumvalue" href="../../d4/d4b/a03464.html#a154255f23e41069883118fc4f0d23157aa253161c3caae282ce3c6922048db060">PHASEMASK_NORMAL</a>;</div>
<div class="line"><span class="lineno"> 1829</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d1/d66/a07770.html">Creature</a>* creature = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>())</div>
<div class="line"><span class="lineno"> 1830</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../de/d19/a07822.html">CreatureData</a> <span class="keyword">const</span>* data = <a class="code hl_define" href="../../d0/d45/a02843.html#a736e30da2b5261060ac6cdbb5de3b787">sObjectMgr</a>-&gt;GetCreatureData(creature-&gt;GetSpawnId()))</div>
<div class="line"><span class="lineno"> 1831</span>                    newPhase = data-&gt;phaseMask;</div>
<div class="line"><span class="lineno"> 1832</span>        }</div>
<div class="line"><span class="lineno"> 1833</span> </div>
<div class="line"><span class="lineno"> 1834</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3f511c51aa1082be9d4777c770a3485">SetPhaseMask</a>(newPhase, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1835</span>    }</div>
<div class="line"><span class="lineno"> 1836</span> </div>
<div class="line"><span class="lineno"> 1837</span>    <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><span class="lineno"> 1838</span>    <span class="comment">// phase auras normally not expected at BG but anyway better check</span></div>
<div class="line"><span class="lineno"> 1839</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1840</span>    {</div>
<div class="line"><span class="lineno"> 1841</span>        <span class="comment">// drop flag at invisibiliy in bg</span></div>
<div class="line"><span class="lineno"> 1842</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aee3106d8223e3a574ea629423fea1b91">RemoveAurasWithInterruptFlags</a>(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a0709fc3ab848cf1b8b4853813b8fe011a61b4509cc6643cd80da8b6c065d45f4a">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>);</div>
<div class="line"><span class="lineno"> 1843</span>    }</div>
<div class="line"><span class="lineno"> 1844</span> </div>
<div class="line"><span class="lineno"> 1845</span>    <span class="comment">// need triggering visibility update base at phase update of not GM invisible (other GMs anyway see in any phases)</span></div>
<div class="line"><span class="lineno"> 1846</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9c7dedb1f44ae891b5d393ae1f377ade">IsVisible</a>())</div>
<div class="line"><span class="lineno"> 1847</span>    {</div>
<div class="line"><span class="lineno"> 1848</span>        <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../d3/d4c/a08174.html#a1013c27be4347a1b1a4a986a07456deb">GetMap</a>()-&gt;<a class="code hl_function" href="../../d7/dc0/a09538.html#aae3a929aefb05046ef304ffba10aae71">Instanceable</a>())</div>
<div class="line"><span class="lineno"> 1849</span>        {</div>
<div class="line"><span class="lineno"> 1850</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1851</span>            target-&gt;<a class="code hl_variable" href="../../db/df9/a08518.html#aadd29d4cd956b08c12211c756b740d86">m_last_notify_position</a>.<a class="code hl_function" href="../../de/d68/a08218.html#afdbf0a257fcd7a48066fd92c4eacae3b">Relocate</a>(-5000.0f, -5000.0f, -5000.0f);</div>
<div class="line"><span class="lineno"> 1852</span>        }</div>
<div class="line"><span class="lineno"> 1853</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1854</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5b2b731101a2c33063cef5c59e595249">UpdateObjectVisibility</a>();</div>
<div class="line"><span class="lineno"> 1855</span>    }</div>
<div class="line"><span class="lineno"> 1856</span>}</div>
<div class="ttc" id="aa03464_html_a154255f23e41069883118fc4f0d23157a212ead88887027cc3575f2b07c08af57"><div class="ttname"><a href="../../d4/d4b/a03464.html#a154255f23e41069883118fc4f0d23157a212ead88887027cc3575f2b07c08af57">PHASEMASK_ANYWHERE</a></div><div class="ttdeci">@ PHASEMASK_ANYWHERE</div><div class="ttdef"><b>Definition:</b> Object.h:60</div></div>
<div class="ttc" id="aa03464_html_a154255f23e41069883118fc4f0d23157aa253161c3caae282ce3c6922048db060"><div class="ttname"><a href="../../d4/d4b/a03464.html#a154255f23e41069883118fc4f0d23157aa253161c3caae282ce3c6922048db060">PHASEMASK_NORMAL</a></div><div class="ttdeci">@ PHASEMASK_NORMAL</div><div class="ttdef"><b>Definition:</b> Object.h:59</div></div>
<div class="ttc" id="aa07822_html"><div class="ttname"><a href="../../de/d19/a07822.html">CreatureData</a></div><div class="ttdef"><b>Definition:</b> CreatureData.h:370</div></div>
<div class="ttc" id="aa08218_html_afdbf0a257fcd7a48066fd92c4eacae3b"><div class="ttname"><a href="../../de/d68/a08218.html#afdbf0a257fcd7a48066fd92c4eacae3b">Position::Relocate</a></div><div class="ttdeci">void Relocate(float x, float y)</div><div class="ttdef"><b>Definition:</b> Position.h:72</div></div>
<div class="ttc" id="aa08518_html_a839e8e5f55d1067217f39293663663eb"><div class="ttname"><a href="../../db/df9/a08518.html#a839e8e5f55d1067217f39293663663eb">Unit::GetPhaseByAuras</a></div><div class="ttdeci">uint32 GetPhaseByAuras() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:19034</div></div>
<div class="ttc" id="aa08518_html_a9c7dedb1f44ae891b5d393ae1f377ade"><div class="ttname"><a href="../../db/df9/a08518.html#a9c7dedb1f44ae891b5d393ae1f377ade">Unit::IsVisible</a></div><div class="ttdeci">bool IsVisible() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1830</div></div>
<div class="ttc" id="aa08518_html_aa3f511c51aa1082be9d4777c770a3485"><div class="ttname"><a href="../../db/df9/a08518.html#aa3f511c51aa1082be9d4777c770a3485">Unit::SetPhaseMask</a></div><div class="ttdeci">void SetPhaseMask(uint32 newPhaseMask, bool update) override</div><div class="ttdef"><b>Definition:</b> Unit.cpp:19045</div></div>
<div class="ttc" id="aa08518_html_aadd29d4cd956b08c12211c756b740d86"><div class="ttname"><a href="../../db/df9/a08518.html#aadd29d4cd956b08c12211c756b740d86">Unit::m_last_notify_position</a></div><div class="ttdeci">Position m_last_notify_position</div><div class="ttdef"><b>Definition:</b> Unit.h:1929</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00063">AURA_INTERRUPT_FLAG_IMMUNE_OR_LOST_SELECTION</a>, <a class="el" href="../../#l00531">WorldObject::GetMap()</a>, <a class="el" href="../../#l19034">Unit::GetPhaseByAuras()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00445">Map::Instanceable()</a>, <a class="el" href="../../#l01830">Unit::IsVisible()</a>, <a class="el" href="../../#l01929">Unit::m_last_notify_position</a>, <a class="el" href="../../#l00060">PHASEMASK_ANYWHERE</a>, <a class="el" href="../../#l00059">PHASEMASK_NORMAL</a>, <a class="el" href="../../#l00072">Position::Relocate()</a>, <a class="el" href="../../#l05181">Unit::RemoveAurasWithInterruptFlags()</a>, <a class="el" href="../../#l19045">Unit::SetPhaseMask()</a>, <a class="el" href="../../#l01634">sObjectMgr</a>, <a class="el" href="../../#l00202">Object::ToCreature()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l19126">Unit::UpdateObjectVisibility()</a>.</p>

</div>
</div>
<a id="a03f0b850af3051c8815fba75d502c658" name="a03f0b850af3051c8815fba75d502c658"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03f0b850af3051c8815fba75d502c658">&#9670;&#160;</a></span>HandlePreventFleeing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePreventFleeing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../d5/def/a04676.html#_todo000113">Todo:</a></b></dt><dd>: find a way to cancel fleeing for assistance. Currently this will only stop creatures fleeing due to low health that could not find nearby allies to flee towards. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 3523</span>{</div>
<div class="line"><span class="lineno"> 3524</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 3525</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3526</span> </div>
<div class="line"><span class="lineno"> 3527</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3528</span>    <span class="comment">// Since patch 3.0.2 this mechanic no longer affects fear effects. It will ONLY prevent humanoids from fleeing due to low health.</span></div>
<div class="line"><span class="lineno"> 3529</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() || !apply || target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a9cd076c7f1e10e71af51ffc1ea1f9136">HasAuraType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a44cf043145f5a78c5a4e36ecff8a034d">SPELL_AURA_MOD_FEAR</a>))</div>
<div class="line"><span class="lineno"> 3530</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3533</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a828f4fc42209162a104a10d1f70838d4">SetControlled</a>(<span class="keyword">false</span>, <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544ab254220382db03ed44e6cea86ad4c87d">UNIT_STATE_FLEEING</a>);</div>
<div class="line"><span class="lineno"> 3534</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05705">Unit::HasAuraType()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l18030">Unit::SetControlled()</a>, <a class="el" href="../../#l00070">SPELL_AURA_MOD_FEAR</a>, and <a class="el" href="../../#l00156">UNIT_STATE_FLEEING</a>.</p>

</div>
</div>
<a id="a683b73bc2152dcc1cf895731abccdd11" name="a683b73bc2152dcc1cf895731abccdd11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a683b73bc2152dcc1cf895731abccdd11">&#9670;&#160;</a></span>HandlePreventResurrection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandlePreventResurrection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6183</span>{</div>
<div class="line"><span class="lineno"> 6184</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 6185</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6186</span> </div>
<div class="line"><span class="lineno"> 6187</span>    <span class="keywordflow">if</span> (!aurApp-&gt;GetTarget()-&gt;IsPlayer())</div>
<div class="line"><span class="lineno"> 6188</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 6189</span> </div>
<div class="line"><span class="lineno"> 6190</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 6191</span>        aurApp-&gt;GetTarget()-&gt;RemoveByteFlag(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881adec3c53fd2c3fb2d9849fb52e62f418c">PLAYER_FIELD_BYTES</a>, 0, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a31ae2504a623eb1746ff5da8a1902333adf79443adab6dafc6a7ec2546b3db2b6">PLAYER_FIELD_BYTE_RELEASE_TIMER</a>);</div>
<div class="line"><span class="lineno"> 6192</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!aurApp-&gt;GetTarget()-&gt;GetMap()-&gt;Instanceable())</div>
<div class="line"><span class="lineno"> 6193</span>        aurApp-&gt;GetTarget()-&gt;SetByteFlag(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881adec3c53fd2c3fb2d9849fb52e62f418c">PLAYER_FIELD_BYTES</a>, 0, <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#a31ae2504a623eb1746ff5da8a1902333adf79443adab6dafc6a7ec2546b3db2b6">PLAYER_FIELD_BYTE_RELEASE_TIMER</a>);</div>
<div class="line"><span class="lineno"> 6194</span>}</div>
<div class="ttc" id="aa03365_html_a31ae2504a623eb1746ff5da8a1902333adf79443adab6dafc6a7ec2546b3db2b6"><div class="ttname"><a href="../../d7/d13/a03365.html#a31ae2504a623eb1746ff5da8a1902333adf79443adab6dafc6a7ec2546b3db2b6">PLAYER_FIELD_BYTE_RELEASE_TIMER</a></div><div class="ttdeci">@ PLAYER_FIELD_BYTE_RELEASE_TIMER</div><div class="ttdef"><b>Definition:</b> Player.h:560</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l00531">WorldObject::GetMap()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00445">Map::Instanceable()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00560">PLAYER_FIELD_BYTE_RELEASE_TIMER</a>, <a class="el" href="../../#l00368">PLAYER_FIELD_BYTES</a>, <a class="el" href="../../#l00930">Object::RemoveByteFlag()</a>, and <a class="el" href="../../#l00911">Object::SetByteFlag()</a>.</p>

</div>
</div>
<a id="ad2a6d0a6fcbf6f5d53633e0d1ab10dd3" name="ad2a6d0a6fcbf6f5d53633e0d1ab10dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a6d0a6fcbf6f5d53633e0d1ab10dd3">&#9670;&#160;</a></span>HandleProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1170</span>{</div>
<div class="line"><span class="lineno"> 1171</span>    <span class="keywordtype">bool</span> prevented = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a96d2072a3b0b06f82113eb9d3e186ac1">CallScriptEffectProcHandlers</a>(<span class="keyword">this</span>, aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 1172</span>    <span class="keywordflow">if</span> (prevented)</div>
<div class="line"><span class="lineno"> 1173</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1174</span> </div>
<div class="line"><span class="lineno"> 1175</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><span class="lineno"> 1176</span>    {</div>
<div class="line"><span class="lineno"> 1177</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a3c6e04ab343a9f5ef767f8e8dd71af5b">SPELL_AURA_PROC_TRIGGER_SPELL</a>:</div>
<div class="line"><span class="lineno"> 1178</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#af9b15db701d1d804b52a425b23c1e154">HandleProcTriggerSpellAuraProc</a>(aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 1179</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1180</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a651bba5033934ceb87de2329c845808a">SPELL_AURA_PROC_TRIGGER_SPELL_WITH_VALUE</a>:</div>
<div class="line"><span class="lineno"> 1181</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a8457bab110c3818d1506a3b5d767a411">HandleProcTriggerSpellWithValueAuraProc</a>(aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 1182</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1183</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799acc5994eedad39ba63e84f1279bfd5e2f">SPELL_AURA_PROC_TRIGGER_DAMAGE</a>:</div>
<div class="line"><span class="lineno"> 1184</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#abf1a9e6c5d480b4a72634fd4d489c81f">HandleProcTriggerDamageAuraProc</a>(aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 1185</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1186</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a97e43d4f89788b97090ee8df08682157">SPELL_AURA_RAID_PROC_FROM_CHARGE</a>:</div>
<div class="line"><span class="lineno"> 1187</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a71194f9e306aa0a2f477d59f9f0a3b97">HandleRaidProcFromChargeAuraProc</a>(aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 1188</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1189</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2223f78228bf66cb54c15fea685c809c">SPELL_AURA_RAID_PROC_FROM_CHARGE_WITH_VALUE</a>:</div>
<div class="line"><span class="lineno"> 1190</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#ac49e3ca52e3aece117127e6712d2069f">HandleRaidProcFromChargeWithValueAuraProc</a>(aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 1191</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1192</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1193</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1194</span>    }</div>
<div class="line"><span class="lineno"> 1195</span> </div>
<div class="line"><span class="lineno"> 1196</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a97347f8dc5f2dd96c7c45a77c13988a5">CallScriptAfterEffectProcHandlers</a>(<span class="keyword">this</span>, aurApp, eventInfo);</div>
<div class="line"><span class="lineno"> 1197</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a2223f78228bf66cb54c15fea685c809c"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2223f78228bf66cb54c15fea685c809c">SPELL_AURA_RAID_PROC_FROM_CHARGE_WITH_VALUE</a></div><div class="ttdeci">@ SPELL_AURA_RAID_PROC_FROM_CHARGE_WITH_VALUE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:288</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a651bba5033934ceb87de2329c845808a"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a651bba5033934ceb87de2329c845808a">SPELL_AURA_PROC_TRIGGER_SPELL_WITH_VALUE</a></div><div class="ttdeci">@ SPELL_AURA_PROC_TRIGGER_SPELL_WITH_VALUE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:294</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a97e43d4f89788b97090ee8df08682157"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a97e43d4f89788b97090ee8df08682157">SPELL_AURA_RAID_PROC_FROM_CHARGE</a></div><div class="ttdeci">@ SPELL_AURA_RAID_PROC_FROM_CHARGE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:286</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799acc5994eedad39ba63e84f1279bfd5e2f"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799acc5994eedad39ba63e84f1279bfd5e2f">SPELL_AURA_PROC_TRIGGER_DAMAGE</a></div><div class="ttdeci">@ SPELL_AURA_PROC_TRIGGER_DAMAGE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:106</div></div>
<div class="ttc" id="aa10782_html_a71194f9e306aa0a2f477d59f9f0a3b97"><div class="ttname"><a href="../../d6/d2f/a10782.html#a71194f9e306aa0a2f477d59f9f0a3b97">AuraEffect::HandleRaidProcFromChargeAuraProc</a></div><div class="ttdeci">void HandleRaidProcFromChargeAuraProc(AuraApplication *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:7272</div></div>
<div class="ttc" id="aa10782_html_a8457bab110c3818d1506a3b5d767a411"><div class="ttname"><a href="../../d6/d2f/a10782.html#a8457bab110c3818d1506a3b5d767a411">AuraEffect::HandleProcTriggerSpellWithValueAuraProc</a></div><div class="ttdeci">void HandleProcTriggerSpellWithValueAuraProc(AuraApplication *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:7231</div></div>
<div class="ttc" id="aa10782_html_abf1a9e6c5d480b4a72634fd4d489c81f"><div class="ttname"><a href="../../d6/d2f/a10782.html#abf1a9e6c5d480b4a72634fd4d489c81f">AuraEffect::HandleProcTriggerDamageAuraProc</a></div><div class="ttdeci">void HandleProcTriggerDamageAuraProc(AuraApplication *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:7252</div></div>
<div class="ttc" id="aa10782_html_ac49e3ca52e3aece117127e6712d2069f"><div class="ttname"><a href="../../d6/d2f/a10782.html#ac49e3ca52e3aece117127e6712d2069f">AuraEffect::HandleRaidProcFromChargeWithValueAuraProc</a></div><div class="ttdeci">void HandleRaidProcFromChargeWithValueAuraProc(AuraApplication *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:7320</div></div>
<div class="ttc" id="aa10782_html_af9b15db701d1d804b52a425b23c1e154"><div class="ttname"><a href="../../d6/d2f/a10782.html#af9b15db701d1d804b52a425b23c1e154">AuraEffect::HandleProcTriggerSpellAuraProc</a></div><div class="ttdeci">void HandleProcTriggerSpellAuraProc(AuraApplication *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:7214</div></div>
<div class="ttc" id="aa10794_html_a96d2072a3b0b06f82113eb9d3e186ac1"><div class="ttname"><a href="../../df/d4a/a10794.html#a96d2072a3b0b06f82113eb9d3e186ac1">Aura::CallScriptEffectProcHandlers</a></div><div class="ttdeci">bool CallScriptEffectProcHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2714</div></div>
<div class="ttc" id="aa10794_html_a97347f8dc5f2dd96c7c45a77c13988a5"><div class="ttname"><a href="../../df/d4a/a10794.html#a97347f8dc5f2dd96c7c45a77c13988a5">Aura::CallScriptAfterEffectProcHandlers</a></div><div class="ttdeci">void CallScriptAfterEffectProcHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp, ProcEventInfo &amp;eventInfo)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2733</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02733">Aura::CallScriptAfterEffectProcHandlers()</a>, <a class="el" href="../../#l02714">Aura::CallScriptEffectProcHandlers()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l07252">HandleProcTriggerDamageAuraProc()</a>, <a class="el" href="../../#l07214">HandleProcTriggerSpellAuraProc()</a>, <a class="el" href="../../#l07231">HandleProcTriggerSpellWithValueAuraProc()</a>, <a class="el" href="../../#l07272">HandleRaidProcFromChargeAuraProc()</a>, <a class="el" href="../../#l07320">HandleRaidProcFromChargeWithValueAuraProc()</a>, <a class="el" href="../../#l00106">SPELL_AURA_PROC_TRIGGER_DAMAGE</a>, <a class="el" href="../../#l00105">SPELL_AURA_PROC_TRIGGER_SPELL</a>, <a class="el" href="../../#l00294">SPELL_AURA_PROC_TRIGGER_SPELL_WITH_VALUE</a>, <a class="el" href="../../#l00286">SPELL_AURA_RAID_PROC_FROM_CHARGE</a>, and <a class="el" href="../../#l00288">SPELL_AURA_RAID_PROC_FROM_CHARGE_WITH_VALUE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l02331">Aura::TriggerProcOnEvent()</a>.</p>

</div>
</div>
<a id="abf1a9e6c5d480b4a72634fd4d489c81f" name="abf1a9e6c5d480b4a72634fd4d489c81f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf1a9e6c5d480b4a72634fd4d489c81f">&#9670;&#160;</a></span>HandleProcTriggerDamageAuraProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleProcTriggerDamageAuraProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7253</span>{</div>
<div class="line"><span class="lineno"> 7254</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a0447441f89446b170d751abbdda541b8">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 7255</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* triggerTarget = eventInfo.<a class="code hl_function" href="../../de/d75/a08490.html#ae57fa4c37ca2a3fedb00079f4160bcc7">GetProcTarget</a>();</div>
<div class="line"><span class="lineno"> 7256</span>    <span class="keywordflow">if</span> (triggerTarget-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a7c4ae74029844364315885e02df35505">UNIT_STATE_ISOLATED</a>) || triggerTarget-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae7269683ec5b0e44c3ee49bd6f896615">IsImmunedToDamageOrSchool</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()))</div>
<div class="line"><span class="lineno"> 7257</span>    {</div>
<div class="line"><span class="lineno"> 7258</span>        <a class="code hl_function" href="../../d6/d2f/a10782.html#a94ad6938ac754595a00f0f5a8e2019c5">SendTickImmune</a>(triggerTarget, target);</div>
<div class="line"><span class="lineno"> 7259</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7260</span>    }</div>
<div class="line"><span class="lineno"> 7261</span> </div>
<div class="line"><span class="lineno"> 7262</span>    <a class="code hl_struct" href="../../de/df3/a08502.html">SpellNonMeleeDamage</a> damageInfo(target, triggerTarget, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SchoolMask);</div>
<div class="line"><span class="lineno"> 7263</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> damage = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aeee2a716058141444b84649bc9c86d70">SpellDamageBonusDone</a>(triggerTarget, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a9308d3cdd6446af40814a12302809f54">SPELL_DIRECT_DAMAGE</a>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>());</div>
<div class="line"><span class="lineno"> 7264</span>    damage = triggerTarget-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a8e8d13276a1ebef454bd4fc27fedc3f1">SpellDamageBonusTaken</a>(target, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), damage, <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1a9308d3cdd6446af40814a12302809f54">SPELL_DIRECT_DAMAGE</a>);</div>
<div class="line"><span class="lineno"> 7265</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af7dee3a5dbbc2970cec0ef851b81eaf7">CalculateSpellDamageTaken</a>(&amp;damageInfo, damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>());</div>
<div class="line"><span class="lineno"> 7266</span>    <a class="code hl_function" href="../../db/df9/a08518.html#af0c5f2f98b065f2d3976f18e4bc964a4">Unit::DealDamageMods</a>(damageInfo.target, damageInfo.damage, &amp;damageInfo.absorb);</div>
<div class="line"><span class="lineno"> 7267</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aaf7877cad85523173a7bcd7af163e8cb">SendSpellNonMeleeDamageLog</a>(&amp;damageInfo);</div>
<div class="line"><span class="lineno"> 7268</span>    <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleProcTriggerDamageAuraProc: Triggering {} spell damage from aura {} proc&quot;</span>, damage, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7269</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1834e2b07bdde3d3a20a2479b6384bb1">DealSpellDamage</a>(&amp;damageInfo, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 7270</span>}</div>
<div class="ttc" id="aa08490_html_ae57fa4c37ca2a3fedb00079f4160bcc7"><div class="ttname"><a href="../../de/d75/a08490.html#ae57fa4c37ca2a3fedb00079f4160bcc7">ProcEventInfo::GetProcTarget</a></div><div class="ttdeci">Unit * GetProcTarget() const</div><div class="ttdef"><b>Definition:</b> Unit.h:441</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00501">SpellNonMeleeDamage::absorb</a>, <a class="el" href="../../#l01295">Unit::CalculateSpellDamageTaken()</a>, <a class="el" href="../../#l00498">SpellNonMeleeDamage::damage</a>, <a class="el" href="../../#l00800">Unit::DealDamageMods()</a>, <a class="el" href="../../#l01438">Unit::DealSpellDamage()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00441">ProcEventInfo::GetProcTarget()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l12896">Unit::IsImmunedToDamageOrSchool()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l06310">Unit::SendSpellNonMeleeDamageLog()</a>, <a class="el" href="../../#l01096">SendTickImmune()</a>, <a class="el" href="../../#l00249">SPELL_DIRECT_DAMAGE</a>, <a class="el" href="../../#l11610">Unit::SpellDamageBonusDone()</a>, <a class="el" href="../../#l11786">Unit::SpellDamageBonusTaken()</a>, <a class="el" href="../../#l00495">SpellNonMeleeDamage::target</a>, and <a class="el" href="../../#l00162">UNIT_STATE_ISOLATED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01169">HandleProc()</a>, and <a class="el" href="../../#l16050">Unit::ProcDamageAndSpellFor()</a>.</p>

</div>
</div>
<a id="af9b15db701d1d804b52a425b23c1e154" name="af9b15db701d1d804b52a425b23c1e154"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9b15db701d1d804b52a425b23c1e154">&#9670;&#160;</a></span>HandleProcTriggerSpellAuraProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleProcTriggerSpellAuraProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7215</span>{</div>
<div class="line"><span class="lineno"> 7216</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* triggerCaster = aurApp-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a0447441f89446b170d751abbdda541b8">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 7217</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* triggerTarget = eventInfo.<a class="code hl_function" href="../../de/d75/a08490.html#ae57fa4c37ca2a3fedb00079f4160bcc7">GetProcTarget</a>();</div>
<div class="line"><span class="lineno"> 7218</span> </div>
<div class="line"><span class="lineno"> 7219</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].TriggerSpell;</div>
<div class="line"><span class="lineno"> 7220</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* triggeredSpellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggerSpellId))</div>
<div class="line"><span class="lineno"> 7221</span>    {</div>
<div class="line"><span class="lineno"> 7222</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleProcTriggerSpellAuraProc: Triggering spell {} from aura {} proc&quot;</span>, triggeredSpellInfo-&gt;Id, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7223</span>        triggerCaster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(triggerTarget, triggeredSpellInfo, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 7224</span>    }</div>
<div class="line"><span class="lineno"> 7225</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 7226</span>    {</div>
<div class="line"><span class="lineno"> 7227</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleProcTriggerSpellAuraProc: Could not trigger spell {} from aura {} proc, because the spell does not have an entry in Spell.dbc.&quot;</span>, triggerSpellId, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7228</span>    }</div>
<div class="line"><span class="lineno"> 7229</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01167">Unit::CastSpell()</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00441">ProcEventInfo::GetProcTarget()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, and <a class="el" href="../../#l00825">sSpellMgr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01169">HandleProc()</a>.</p>

</div>
</div>
<a id="a8457bab110c3818d1506a3b5d767a411" name="a8457bab110c3818d1506a3b5d767a411"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8457bab110c3818d1506a3b5d767a411">&#9670;&#160;</a></span>HandleProcTriggerSpellWithValueAuraProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleProcTriggerSpellWithValueAuraProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7232</span>{</div>
<div class="line"><span class="lineno"> 7233</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* triggerCaster = aurApp-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a0447441f89446b170d751abbdda541b8">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 7234</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* triggerTarget = eventInfo.<a class="code hl_function" href="../../de/d75/a08490.html#ae57fa4c37ca2a3fedb00079f4160bcc7">GetProcTarget</a>();</div>
<div class="line"><span class="lineno"> 7235</span> </div>
<div class="line"><span class="lineno"> 7236</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].TriggerSpell;</div>
<div class="line"><span class="lineno"> 7237</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* triggeredSpellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(triggerSpellId))</div>
<div class="line"><span class="lineno"> 7238</span>    {</div>
<div class="line"><span class="lineno"> 7239</span>        <span class="comment">// used only with EXTRA_LOGS</span></div>
<div class="line"><span class="lineno"> 7240</span>        (void)triggeredSpellInfo;</div>
<div class="line"><span class="lineno"> 7241</span> </div>
<div class="line"><span class="lineno"> 7242</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> basepoints0 = <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><span class="lineno"> 7243</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleProcTriggerSpellWithValueAuraProc: Triggering spell {} with value {} from aura {} proc&quot;</span>, triggeredSpellInfo-&gt;Id, basepoints0, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7244</span>        triggerCaster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(triggerTarget, triggerSpellId, &amp;basepoints0, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 7245</span>    }</div>
<div class="line"><span class="lineno"> 7246</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 7247</span>    {</div>
<div class="line"><span class="lineno"> 7248</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleProcTriggerSpellWithValueAuraProc: Could not trigger spell {} from aura {} proc, because the spell does not have an entry in Spell.dbc.&quot;</span>, triggerSpellId, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7249</span>    }</div>
<div class="line"><span class="lineno"> 7250</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01224">Unit::CastCustomSpell()</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00441">ProcEventInfo::GetProcTarget()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00146">m_effIndex</a>, and <a class="el" href="../../#l00825">sSpellMgr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01169">HandleProc()</a>.</p>

</div>
</div>
<a id="a71194f9e306aa0a2f477d59f9f0a3b97" name="a71194f9e306aa0a2f477d59f9f0a3b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71194f9e306aa0a2f477d59f9f0a3b97">&#9670;&#160;</a></span>HandleRaidProcFromChargeAuraProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleRaidProcFromChargeAuraProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7273</span>{</div>
<div class="line"><span class="lineno"> 7274</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a0447441f89446b170d751abbdda541b8">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 7275</span> </div>
<div class="line"><span class="lineno"> 7276</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId;</div>
<div class="line"><span class="lineno"> 7277</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno"> 7278</span>    {</div>
<div class="line"><span class="lineno"> 7279</span>        <span class="keywordflow">case</span> 57949:            <span class="comment">// Shiver</span></div>
<div class="line"><span class="lineno"> 7280</span>            triggerSpellId = 57952;</div>
<div class="line"><span class="lineno"> 7281</span>            <span class="comment">//animationSpellId = 57951; dummy effects for jump spell have unknown use (see also 41637)</span></div>
<div class="line"><span class="lineno"> 7282</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 7283</span>        <span class="keywordflow">case</span> 59978:            <span class="comment">// Shiver</span></div>
<div class="line"><span class="lineno"> 7284</span>            triggerSpellId = 59979;</div>
<div class="line"><span class="lineno"> 7285</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 7286</span>        <span class="keywordflow">case</span> 43593:            <span class="comment">// Cold Stare</span></div>
<div class="line"><span class="lineno"> 7287</span>            triggerSpellId = 43594;</div>
<div class="line"><span class="lineno"> 7288</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 7289</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 7290</span>            <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleRaidProcFromChargeAuraProc: received not handled spell: {}&quot;</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7291</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7292</span>    }</div>
<div class="line"><span class="lineno"> 7293</span> </div>
<div class="line"><span class="lineno"> 7294</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> jumps = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ab07705be94c0c10fce558c80d7208e0b">GetCharges</a>();</div>
<div class="line"><span class="lineno"> 7295</span> </div>
<div class="line"><span class="lineno"> 7296</span>    <span class="comment">// current aura expire on proc finish</span></div>
<div class="line"><span class="lineno"> 7297</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a7f7d613279717173c13708425f3a8083">SetCharges</a>(0);</div>
<div class="line"><span class="lineno"> 7298</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a357ceeec6595c847d01b5ed4713ffd2f">SetUsingCharges</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 7299</span> </div>
<div class="line"><span class="lineno"> 7300</span>    <span class="comment">// next target selection</span></div>
<div class="line"><span class="lineno"> 7301</span>    <span class="keywordflow">if</span> (jumps &gt; 0)</div>
<div class="line"><span class="lineno"> 7302</span>    {</div>
<div class="line"><span class="lineno"> 7303</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>())</div>
<div class="line"><span class="lineno"> 7304</span>        {</div>
<div class="line"><span class="lineno"> 7305</span>            <span class="keywordtype">float</span> radius = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcRadius(caster);</div>
<div class="line"><span class="lineno"> 7306</span> </div>
<div class="line"><span class="lineno"> 7307</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* triggerTarget = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a71e5b56f73156a90439d5ca7f89b780f">GetNextRandomRaidMemberOrPet</a>(radius))</div>
<div class="line"><span class="lineno"> 7308</span>            {</div>
<div class="line"><span class="lineno"> 7309</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(triggerTarget, <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>(), <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno"> 7310</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../df/d4a/a10794.html">Aura</a>* aura = triggerTarget-&gt;GetAura(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>()))</div>
<div class="line"><span class="lineno"> 7311</span>                    aura-&gt;SetCharges(jumps);</div>
<div class="line"><span class="lineno"> 7312</span>            }</div>
<div class="line"><span class="lineno"> 7313</span>        }</div>
<div class="line"><span class="lineno"> 7314</span>    }</div>
<div class="line"><span class="lineno"> 7315</span> </div>
<div class="line"><span class="lineno"> 7316</span>    <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleRaidProcFromChargeAuraProc: Triggering spell {} from aura {} proc&quot;</span>, triggerSpellId, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7317</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, triggerSpellId, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno"> 7318</span>}</div>
<div class="ttc" id="aa08518_html_a71e5b56f73156a90439d5ca7f89b780f"><div class="ttname"><a href="../../db/df9/a08518.html#a71e5b56f73156a90439d5ca7f89b780f">Unit::GetNextRandomRaidMemberOrPet</a></div><div class="ttdeci">Unit * GetNextRandomRaidMemberOrPet(float radius)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:11109</div></div>
<div class="ttc" id="aa10794_html_a357ceeec6595c847d01b5ed4713ffd2f"><div class="ttname"><a href="../../df/d4a/a10794.html#a357ceeec6595c847d01b5ed4713ffd2f">Aura::SetUsingCharges</a></div><div class="ttdeci">void SetUsingCharges(bool val)</div><div class="ttdef"><b>Definition:</b> SpellAuras.h:201</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01167">Unit::CastSpell()</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00141">Aura::GetCharges()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l11109">Unit::GetNextRandomRaidMemberOrPet()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00952">Aura::SetCharges()</a>, and <a class="el" href="../../#l00201">Aura::SetUsingCharges()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01169">HandleProc()</a>.</p>

</div>
</div>
<a id="ac49e3ca52e3aece117127e6712d2069f" name="ac49e3ca52e3aece117127e6712d2069f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac49e3ca52e3aece117127e6712d2069f">&#9670;&#160;</a></span>HandleRaidProcFromChargeWithValueAuraProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleRaidProcFromChargeWithValueAuraProc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d75/a08490.html">ProcEventInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>eventInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7321</span>{</div>
<div class="line"><span class="lineno"> 7322</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a0447441f89446b170d751abbdda541b8">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 7323</span> </div>
<div class="line"><span class="lineno"> 7324</span>    <span class="comment">// Currently only Prayer of Mending</span></div>
<div class="line"><span class="lineno"> 7325</span>    <span class="keywordflow">if</span> (!(<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyName == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba04f59ec569a753b4e47a0a230782f207">SPELLFAMILY_PRIEST</a> &amp;&amp; <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyFlags[1] &amp; 0x20))</div>
<div class="line"><span class="lineno"> 7326</span>    {</div>
<div class="line"><span class="lineno"> 7327</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleRaidProcFromChargeWithValueAuraProc: received not handled spell: {}&quot;</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7328</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 7329</span>    }</div>
<div class="line"><span class="lineno"> 7330</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> triggerSpellId = 33110;</div>
<div class="line"><span class="lineno"> 7331</span> </div>
<div class="line"><span class="lineno"> 7332</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> value = <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><span class="lineno"> 7333</span> </div>
<div class="line"><span class="lineno"> 7334</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> jumps = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#ab07705be94c0c10fce558c80d7208e0b">GetCharges</a>();</div>
<div class="line"><span class="lineno"> 7335</span> </div>
<div class="line"><span class="lineno"> 7336</span>    <span class="comment">// current aura expire on proc finish</span></div>
<div class="line"><span class="lineno"> 7337</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a7f7d613279717173c13708425f3a8083">SetCharges</a>(0);</div>
<div class="line"><span class="lineno"> 7338</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a357ceeec6595c847d01b5ed4713ffd2f">SetUsingCharges</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 7339</span> </div>
<div class="line"><span class="lineno"> 7340</span>    <span class="comment">// next target selection</span></div>
<div class="line"><span class="lineno"> 7341</span>    <span class="keywordflow">if</span> (jumps &gt; 0)</div>
<div class="line"><span class="lineno"> 7342</span>    {</div>
<div class="line"><span class="lineno"> 7343</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* caster = <a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>())</div>
<div class="line"><span class="lineno"> 7344</span>        {</div>
<div class="line"><span class="lineno"> 7345</span>            <span class="keywordtype">float</span> radius = <a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()].CalcRadius(caster);</div>
<div class="line"><span class="lineno"> 7346</span> </div>
<div class="line"><span class="lineno"> 7347</span>            <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>*                                                         triggerTarget = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 7348</span>            <a class="code hl_class" href="../../d0/d6d/a09126.html">Acore::MostHPMissingGroupInRange</a>                              u_check(target, radius, 0);</div>
<div class="line"><span class="lineno"> 7349</span>            <a class="code hl_struct" href="../../d9/d07/a08930.html">Acore::UnitLastSearcher&lt;Acore::MostHPMissingGroupInRange&gt;</a>     searcher(target, triggerTarget, u_check);</div>
<div class="line"><span class="lineno"> 7350</span>            <a class="code hl_function" href="../../d9/db0/a08822.html#a15697efba7478b6e227b5f3c7aafc961">Cell::VisitAllObjects</a>(target, searcher, radius);</div>
<div class="line"><span class="lineno"> 7351</span> </div>
<div class="line"><span class="lineno"> 7352</span>            <span class="keywordflow">if</span> (triggerTarget)</div>
<div class="line"><span class="lineno"> 7353</span>            {</div>
<div class="line"><span class="lineno"> 7354</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(triggerTarget, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), &amp;value, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno"> 7355</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../df/d4a/a10794.html">Aura</a>* aura = triggerTarget-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a135e4d345c338da83450a60528f71222">GetAura</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>(), <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>()))</div>
<div class="line"><span class="lineno"> 7356</span>                    aura-&gt;SetCharges(jumps);</div>
<div class="line"><span class="lineno"> 7357</span>            }</div>
<div class="line"><span class="lineno"> 7358</span>        }</div>
<div class="line"><span class="lineno"> 7359</span>    }</div>
<div class="line"><span class="lineno"> 7360</span> </div>
<div class="line"><span class="lineno"> 7361</span>    <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;spells.aura&quot;</span>, <span class="stringliteral">&quot;AuraEffect::HandleRaidProcFromChargeWithValueAuraProc: Triggering spell {} from aura {} proc&quot;</span>, triggerSpellId, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno"> 7362</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, triggerSpellId, &amp;value, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#ad507745acb9935a3a3cb2c6f35788ef6">GetCasterGUID</a>());</div>
<div class="line"><span class="lineno"> 7363</span>}</div>
<div class="ttc" id="aa08930_html"><div class="ttname"><a href="../../d9/d07/a08930.html">Acore::UnitLastSearcher</a></div><div class="ttdef"><b>Definition:</b> GridNotifiers.h:406</div></div>
<div class="ttc" id="aa09126_html"><div class="ttname"><a href="../../d0/d6d/a09126.html">Acore::MostHPMissingGroupInRange</a></div><div class="ttdef"><b>Definition:</b> GridNotifiers.h:1479</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01224">Unit::CastCustomSpell()</a>, <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l05581">Unit::GetAura()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00047">GetCaster()</a>, <a class="el" href="../../#l00048">GetCasterGUID()</a>, <a class="el" href="../../#l00141">Aura::GetCharges()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00952">Aura::SetCharges()</a>, <a class="el" href="../../#l00201">Aura::SetUsingCharges()</a>, <a class="el" href="../../#l03534">SPELLFAMILY_PRIEST</a>, and <a class="el" href="../../#l00206">Cell::VisitAllObjects()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01169">HandleProc()</a>.</p>

</div>
</div>
<a id="a964b95da784412c60c9310227a614549" name="a964b95da784412c60c9310227a614549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a964b95da784412c60c9310227a614549">&#9670;&#160;</a></span>HandleRangedAmmoHaste()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleRangedAmmoHaste </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5048</span>{</div>
<div class="line"><span class="lineno"> 5049</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5050</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5051</span> </div>
<div class="line"><span class="lineno"> 5052</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5053</span> </div>
<div class="line"><span class="lineno"> 5054</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5055</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5056</span> </div>
<div class="line"><span class="lineno"> 5057</span>    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a60d7ad5197284d3caaed380dfc740ff0">ApplyAttackTimePercentMod</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a85524ab4e1fb005ed500bd190f79c352aa2557af152c5f2b27bbf59915cbd1670">RANGED_ATTACK</a>, (<span class="keywordtype">float</span>)<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>(), apply);</div>
<div class="line"><span class="lineno"> 5058</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l17050">Unit::ApplyAttackTimePercentMod()</a>, <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, and <a class="el" href="../../#l00211">RANGED_ATTACK</a>.</p>

</div>
</div>
<a id="a66eb63a01dca27eaa327c72f03710c53" name="a66eb63a01dca27eaa327c72f03710c53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66eb63a01dca27eaa327c72f03710c53">&#9670;&#160;</a></span>HandleShapeshiftBoosts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleShapeshiftBoosts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1222</span>{</div>
<div class="line"><span class="lineno"> 1223</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId = 0;</div>
<div class="line"><span class="lineno"> 1224</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId2 = 0;</div>
<div class="line"><span class="lineno"> 1225</span>    <span class="comment">//uint32 spellId3 = 0;</span></div>
<div class="line"><span class="lineno"> 1226</span>    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> HotWSpellId = 0;</div>
<div class="line"><span class="lineno"> 1227</span> </div>
<div class="line"><span class="lineno"> 1228</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>())</div>
<div class="line"><span class="lineno"> 1229</span>    {</div>
<div class="line"><span class="lineno"> 1230</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><span class="lineno"> 1231</span>            spellId = 3025;</div>
<div class="line"><span class="lineno"> 1232</span>            HotWSpellId = 24900;</div>
<div class="line"><span class="lineno"> 1233</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1234</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca">FORM_TREE</a>:</div>
<div class="line"><span class="lineno"> 1235</span>            spellId = 34123;</div>
<div class="line"><span class="lineno"> 1236</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1237</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230">FORM_TRAVEL</a>:</div>
<div class="line"><span class="lineno"> 1238</span>            spellId = 5419;</div>
<div class="line"><span class="lineno"> 1239</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1240</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac2743246d577352cdae533578e3c8c1b">FORM_AQUA</a>:</div>
<div class="line"><span class="lineno"> 1241</span>            spellId = 5421;</div>
<div class="line"><span class="lineno"> 1242</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1243</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><span class="lineno"> 1244</span>            spellId = 1178;</div>
<div class="line"><span class="lineno"> 1245</span>            spellId2 = 21178;</div>
<div class="line"><span class="lineno"> 1246</span>            HotWSpellId = 24899;</div>
<div class="line"><span class="lineno"> 1247</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1248</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><span class="lineno"> 1249</span>            spellId = 9635;</div>
<div class="line"><span class="lineno"> 1250</span>            spellId2 = 21178;</div>
<div class="line"><span class="lineno"> 1251</span>            HotWSpellId = 24899;</div>
<div class="line"><span class="lineno"> 1252</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1253</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac6f4bdb76e70e28c403bbd02bf4a969d">FORM_BATTLESTANCE</a>:</div>
<div class="line"><span class="lineno"> 1254</span>            spellId = 21156;</div>
<div class="line"><span class="lineno"> 1255</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1256</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca740528acba7c88e26c5c6970b99ed18f">FORM_DEFENSIVESTANCE</a>:</div>
<div class="line"><span class="lineno"> 1257</span>            spellId = 7376;</div>
<div class="line"><span class="lineno"> 1258</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1259</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca6a2bb66552732011772c2d2ac6dc21b0">FORM_BERSERKERSTANCE</a>:</div>
<div class="line"><span class="lineno"> 1260</span>            spellId = 7381;</div>
<div class="line"><span class="lineno"> 1261</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1262</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a>:</div>
<div class="line"><span class="lineno"> 1263</span>            spellId = 24905;</div>
<div class="line"><span class="lineno"> 1264</span>            spellId2 = 69366;</div>
<div class="line"><span class="lineno"> 1265</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1266</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa2a3be49d483fe70fcffab38a9787557">FORM_FLIGHT</a>:</div>
<div class="line"><span class="lineno"> 1267</span>            spellId = 33948;</div>
<div class="line"><span class="lineno"> 1268</span>            spellId2 = 34764;</div>
<div class="line"><span class="lineno"> 1269</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1270</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca84efb6dc7feed91df401b04c5d4f9353">FORM_FLIGHT_EPIC</a>:</div>
<div class="line"><span class="lineno"> 1271</span>            spellId  = 40122;</div>
<div class="line"><span class="lineno"> 1272</span>            spellId2 = 40121;</div>
<div class="line"><span class="lineno"> 1273</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1274</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cadc094fb8dc4c8a87fffe3eac62b84ad4">FORM_METAMORPHOSIS</a>:</div>
<div class="line"><span class="lineno"> 1275</span>            spellId  = 54817;</div>
<div class="line"><span class="lineno"> 1276</span>            spellId2 = 54879;</div>
<div class="line"><span class="lineno"> 1277</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1278</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca6580b40dee982ab6f82c1c59d34988de">FORM_SPIRITOFREDEMPTION</a>:</div>
<div class="line"><span class="lineno"> 1279</span>            spellId  = 27792;</div>
<div class="line"><span class="lineno"> 1280</span>            spellId2 = 27795;                               <span class="comment">// must be second, this important at aura remove to prevent to early iterator invalidation.</span></div>
<div class="line"><span class="lineno"> 1281</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1282</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca45e034d920948e0ba5085eb103660161">FORM_SHADOW</a>:</div>
<div class="line"><span class="lineno"> 1283</span>            spellId = 49868;</div>
<div class="line"><span class="lineno"> 1284</span>            spellId2 = 71167;</div>
<div class="line"><span class="lineno"> 1285</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1286</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cab77bbfbe52ce8a4876d6c762735cfbc9">FORM_GHOSTWOLF</a>:</div>
<div class="line"><span class="lineno"> 1287</span>            spellId = 67116;</div>
<div class="line"><span class="lineno"> 1288</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1289</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cadcc1e9eb63ae2e0530c35f95767cfa5a">FORM_GHOUL</a>:</div>
<div class="line"><span class="lineno"> 1290</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac0d940f97165e877e8c3ec0fed5074c6">FORM_AMBIENT</a>:</div>
<div class="line"><span class="lineno"> 1291</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cac5b4b27f0234cd99d2a201732a392b85">FORM_STEALTH</a>:</div>
<div class="line"><span class="lineno"> 1292</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa1fa851e463bf75f379d7b6a668c0cff">FORM_CREATURECAT</a>:</div>
<div class="line"><span class="lineno"> 1293</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca42d6a809df54cb1ee4efeeeed671aece">FORM_CREATUREBEAR</a>:</div>
<div class="line"><span class="lineno"> 1294</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1295</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1296</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1297</span>    }</div>
<div class="line"><span class="lineno"> 1298</span> </div>
<div class="line"><span class="lineno"> 1299</span>    <a class="code hl_class" href="../../d0/dc6/a08386.html">Player</a>* player = target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>();</div>
<div class="line"><span class="lineno"> 1300</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1301</span>    {</div>
<div class="line"><span class="lineno"> 1302</span>        <span class="comment">// Remove cooldown of spells triggered on stance change - they may share cooldown with stance spell</span></div>
<div class="line"><span class="lineno"> 1303</span>        <span class="keywordflow">if</span> (spellId)</div>
<div class="line"><span class="lineno"> 1304</span>        {</div>
<div class="line"><span class="lineno"> 1305</span>            <span class="keywordflow">if</span> (player)</div>
<div class="line"><span class="lineno"> 1306</span>                player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ad52044947ef0aa2325b2688075bac34d">RemoveSpellCooldown</a>(spellId);</div>
<div class="line"><span class="lineno"> 1307</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spellId, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 1308</span>        }</div>
<div class="line"><span class="lineno"> 1309</span> </div>
<div class="line"><span class="lineno"> 1310</span>        <span class="keywordflow">if</span> (spellId2)</div>
<div class="line"><span class="lineno"> 1311</span>        {</div>
<div class="line"><span class="lineno"> 1312</span>            <span class="keywordflow">if</span> (player)</div>
<div class="line"><span class="lineno"> 1313</span>                player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ad52044947ef0aa2325b2688075bac34d">RemoveSpellCooldown</a>(spellId2);</div>
<div class="line"><span class="lineno"> 1314</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spellId2, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 1315</span>        }</div>
<div class="line"><span class="lineno"> 1316</span> </div>
<div class="line"><span class="lineno"> 1317</span>        <span class="keywordflow">if</span> (player)</div>
<div class="line"><span class="lineno"> 1318</span>        {</div>
<div class="line"><span class="lineno"> 1319</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="../../d7/d13/a03365.html#a6829a36dad31b0ac277fae810007c700">PlayerSpellMap</a>&amp; sp_list = player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a7c8a4e8ee95bbb01af854b79479d9247">GetSpellMap</a>();</div>
<div class="line"><span class="lineno"> 1320</span>            <span class="keywordflow">for</span> (PlayerSpellMap::const_iterator itr = sp_list.begin(); itr != sp_list.end(); ++itr)</div>
<div class="line"><span class="lineno"> 1321</span>            {</div>
<div class="line"><span class="lineno"> 1322</span>                <span class="keywordflow">if</span> (itr-&gt;second-&gt;State == <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50">PLAYERSPELL_REMOVED</a> || !itr-&gt;second-&gt;IsInSpec(player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><span class="lineno"> 1323</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1324</span> </div>
<div class="line"><span class="lineno"> 1325</span>                <span class="keywordflow">if</span> (itr-&gt;first == spellId || itr-&gt;first == spellId2)</div>
<div class="line"><span class="lineno"> 1326</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1327</span> </div>
<div class="line"><span class="lineno"> 1328</span>                <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(itr-&gt;first);</div>
<div class="line"><span class="lineno"> 1329</span>                <span class="keywordflow">if</span> (!spellInfo || !spellInfo-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ad">SpellAttr0</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada407e023ed336f3c64aa20f11dd49f6bd">SPELL_ATTR0_PASSIVE</a> | <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75">SPELL_ATTR0_DO_NOT_DISPLAY</a>)))</div>
<div class="line"><span class="lineno"> 1330</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1331</span> </div>
<div class="line"><span class="lineno"> 1332</span>                <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a21cf48a7eb77db7f731ebe746d2d6878">Stances</a> &amp; (1 &lt;&lt; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1)))</div>
<div class="line"><span class="lineno"> 1333</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, itr-&gt;first, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 1334</span>            }</div>
<div class="line"><span class="lineno"> 1335</span> </div>
<div class="line"><span class="lineno"> 1336</span>            <span class="comment">// xinef: talent stance auras are not on m_spells map, so iterate talents</span></div>
<div class="line"><span class="lineno"> 1337</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="../../d7/d13/a03365.html#a58b30b88955cb12b1f6441e41eed03b5">PlayerTalentMap</a>&amp; tl_list = player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a518d9522da9ab4fcb1597f04fef45ae4">GetTalentMap</a>();</div>
<div class="line"><span class="lineno"> 1338</span>            <span class="keywordflow">for</span> (PlayerTalentMap::const_iterator itr = tl_list.begin(); itr != tl_list.end(); ++itr)</div>
<div class="line"><span class="lineno"> 1339</span>            {</div>
<div class="line"><span class="lineno"> 1340</span>                <span class="keywordflow">if</span> (itr-&gt;second-&gt;State == <a class="code hl_enumvalue" href="../../d7/d13/a03365.html#aeba4f8d5fc0fa3fd00538df69077ba55a1a8411f74fdb6a5715ed8cfca6b96a50">PLAYERSPELL_REMOVED</a> || !itr-&gt;second-&gt;IsInSpec(player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><span class="lineno"> 1341</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1342</span> </div>
<div class="line"><span class="lineno"> 1343</span>                <span class="keywordflow">if</span> (itr-&gt;first == spellId || itr-&gt;first == spellId2)</div>
<div class="line"><span class="lineno"> 1344</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1345</span> </div>
<div class="line"><span class="lineno"> 1346</span>                <span class="comment">// Xinef: skip talents with effect learn spell</span></div>
<div class="line"><span class="lineno"> 1347</span>                <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(itr-&gt;first);</div>
<div class="line"><span class="lineno"> 1348</span>                <span class="keywordflow">if</span> (!spellInfo || !spellInfo-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ad">SpellAttr0</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada407e023ed336f3c64aa20f11dd49f6bd">SPELL_ATTR0_PASSIVE</a> | <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75">SPELL_ATTR0_DO_NOT_DISPLAY</a>)) || spellInfo-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#ad66dd61ba67ee1626e7e8393f0c27498">HasEffect</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97acef490c9f3480852d33dbbec7727fa7f">SPELL_EFFECT_LEARN_SPELL</a>))</div>
<div class="line"><span class="lineno"> 1349</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1350</span> </div>
<div class="line"><span class="lineno"> 1351</span>                <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a21cf48a7eb77db7f731ebe746d2d6878">Stances</a> &amp; (1 &lt;&lt; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1)))</div>
<div class="line"><span class="lineno"> 1352</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, itr-&gt;first, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 1353</span>            }</div>
<div class="line"><span class="lineno"> 1354</span> </div>
<div class="line"><span class="lineno"> 1355</span>            <span class="comment">// Also do it for Glyphs</span></div>
<div class="line"><span class="lineno"> 1356</span>            <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> i = 0; i &lt; <a class="code hl_define" href="../../d0/dbd/a02771.html#a81bad32063c8fa96f892b95fbcb156ca">MAX_GLYPH_SLOT_INDEX</a>; ++i)</div>
<div class="line"><span class="lineno"> 1357</span>            {</div>
<div class="line"><span class="lineno"> 1358</span>                <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> glyphId = player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a4b55b85a0c0a94c13e155c7031388757">GetGlyph</a>(i))</div>
<div class="line"><span class="lineno"> 1359</span>                {</div>
<div class="line"><span class="lineno"> 1360</span>                    <span class="keywordflow">if</span> (<a class="code hl_struct" href="../../d3/d8d/a27754.html">GlyphPropertiesEntry</a> <span class="keyword">const</span>* glyph = <a class="code hl_variable" href="../../d7/da2/a03704.html#acea66fa4ab7a4e45db7d27aa86a15eda">sGlyphPropertiesStore</a>.LookupEntry(glyphId))</div>
<div class="line"><span class="lineno"> 1361</span>                    {</div>
<div class="line"><span class="lineno"> 1362</span>                        <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(glyph-&gt;SpellId);</div>
<div class="line"><span class="lineno"> 1363</span>                        <span class="keywordflow">if</span> (!spellInfo || !spellInfo-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumeration" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ad">SpellAttr0</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada407e023ed336f3c64aa20f11dd49f6bd">SPELL_ATTR0_PASSIVE</a> | <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75">SPELL_ATTR0_DO_NOT_DISPLAY</a>)))</div>
<div class="line"><span class="lineno"> 1364</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1365</span>                        <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a21cf48a7eb77db7f731ebe746d2d6878">Stances</a> &amp; (1 &lt;&lt; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1)))</div>
<div class="line"><span class="lineno"> 1366</span>                            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, glyph-&gt;SpellId, <a class="code hl_enumeration" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967">TriggerCastFlags</a>(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967a10578b171eb74dc9851866cc6eb53f3a">TRIGGERED_FULL_MASK</a> &amp; ~(<a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967a5e96b0ff258ff2655647102a361a7300">TRIGGERED_IGNORE_SHAPESHIFT</a> | <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967a3ab7cedf4f334dafece5849da2e0a4d1">TRIGGERED_IGNORE_CASTER_AURASTATE</a>)), <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 1367</span>                    }</div>
<div class="line"><span class="lineno"> 1368</span>                }</div>
<div class="line"><span class="lineno"> 1369</span>            }</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>            <span class="comment">// Leader of the Pack</span></div>
<div class="line"><span class="lineno"> 1372</span>            <span class="keywordflow">if</span> (player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a681d507744410840b99ecf2ee14dfc72">HasTalent</a>(17007, player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><span class="lineno"> 1373</span>            {</div>
<div class="line"><span class="lineno"> 1374</span>                <a class="code hl_class" href="../../d2/db6/a10898.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(24932);</div>
<div class="line"><span class="lineno"> 1375</span>                <span class="keywordflow">if</span> (spellInfo &amp;&amp; spellInfo-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a21cf48a7eb77db7f731ebe746d2d6878">Stances</a> &amp; (1 &lt;&lt; (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() - 1)))</div>
<div class="line"><span class="lineno"> 1376</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 24932, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 1377</span>            }</div>
<div class="line"><span class="lineno"> 1378</span>            <span class="comment">// Improved Barkskin - apply/remove armor bonus due to shapeshift</span></div>
<div class="line"><span class="lineno"> 1379</span>            <span class="keywordflow">if</span> (player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a681d507744410840b99ecf2ee14dfc72">HasTalent</a>(63410, player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()) || player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a681d507744410840b99ecf2ee14dfc72">HasTalent</a>(63411, player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><span class="lineno"> 1380</span>            {</div>
<div class="line"><span class="lineno"> 1381</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(66530);</div>
<div class="line"><span class="lineno"> 1382</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca3d7db874597fdd74df839cebc5513230">FORM_TRAVEL</a> || <a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() == <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa094ef89cc14332f71872d1864ec2543">FORM_NONE</a>) <span class="comment">// &quot;while in Travel Form or while not shapeshifted&quot;</span></div>
<div class="line"><span class="lineno"> 1383</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 66530, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1384</span>            }</div>
<div class="line"><span class="lineno"> 1385</span>            <span class="comment">// Heart of the Wild</span></div>
<div class="line"><span class="lineno"> 1386</span>            <span class="keywordflow">if</span> (HotWSpellId)</div>
<div class="line"><span class="lineno"> 1387</span>            {</div>
<div class="line"><span class="lineno"> 1388</span>                <span class="comment">// hacky, but the only way as spell family is not SPELLFAMILY_DRUID</span></div>
<div class="line"><span class="lineno"> 1389</span>                <a class="code hl_typedef" href="../../db/df9/a08518.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a> <span class="keyword">const</span>&amp; mModTotalStatPct = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a072316fcb58b6c8c67119d4682ab4b3c">SPELL_AURA_MOD_TOTAL_STAT_PERCENTAGE</a>);</div>
<div class="line"><span class="lineno"> 1390</span>                <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator i = mModTotalStatPct.begin(); i != mModTotalStatPct.end(); ++i)</div>
<div class="line"><span class="lineno"> 1391</span>                {</div>
<div class="line"><span class="lineno"> 1392</span>                    <span class="comment">// Heart of the Wild</span></div>
<div class="line"><span class="lineno"> 1393</span>                    <span class="keywordflow">if</span> ((*i)-&gt;GetSpellInfo()-&gt;SpellIconID == 240 &amp;&amp; (*i)-&gt;GetMiscValue() == <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4a18f70ee14d68f9a30bdc3b4022473db7">STAT_INTELLECT</a>)</div>
<div class="line"><span class="lineno"> 1394</span>                    {</div>
<div class="line"><span class="lineno"> 1395</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> HotWMod = (*i)-&gt;GetAmount() / 2; <span class="comment">// For each 2% Intelligence, you get 1% stamina and 1% attack power.</span></div>
<div class="line"><span class="lineno"> 1396</span> </div>
<div class="line"><span class="lineno"> 1397</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, HotWSpellId, &amp;HotWMod, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 1398</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1399</span>                    }</div>
<div class="line"><span class="lineno"> 1400</span>                }</div>
<div class="line"><span class="lineno"> 1401</span>            }</div>
<div class="line"><span class="lineno"> 1402</span>            <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>())</div>
<div class="line"><span class="lineno"> 1403</span>            {</div>
<div class="line"><span class="lineno"> 1404</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caa28b6421a1efdc3a6377c480e1f80809">FORM_CAT</a>:</div>
<div class="line"><span class="lineno"> 1405</span>                    <span class="comment">// Savage Roar</span></div>
<div class="line"><span class="lineno"> 1406</span>                    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a66cca11731d68512cb0bb652cb1e7caf">SPELL_AURA_DUMMY</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>, 0, 0x10000000, 0))</div>
<div class="line"><span class="lineno"> 1407</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 62071, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1408</span>                    <span class="comment">// Nurturing Instinct</span></div>
<div class="line"><span class="lineno"> 1409</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a7e920736925cc01608542567a3d2107e">SPELL_AURA_MOD_SPELL_HEALING_OF_STAT_PERCENT</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>, 2254, 0))</div>
<div class="line"><span class="lineno"> 1410</span>                    {</div>
<div class="line"><span class="lineno"> 1411</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId3 = 0;</div>
<div class="line"><span class="lineno"> 1412</span>                        <span class="keywordflow">switch</span> (aurEff-&gt;GetId())</div>
<div class="line"><span class="lineno"> 1413</span>                        {</div>
<div class="line"><span class="lineno"> 1414</span>                            <span class="keywordflow">case</span> 33872:</div>
<div class="line"><span class="lineno"> 1415</span>                                spellId3 = 47179;</div>
<div class="line"><span class="lineno"> 1416</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1417</span>                            <span class="keywordflow">case</span> 33873:</div>
<div class="line"><span class="lineno"> 1418</span>                                spellId3 = 47180;</div>
<div class="line"><span class="lineno"> 1419</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1420</span>                        }</div>
<div class="line"><span class="lineno"> 1421</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, spellId3, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 1422</span>                    }</div>
<div class="line"><span class="lineno"> 1423</span>                    <span class="comment">// Master Shapeshifter - Cat</span></div>
<div class="line"><span class="lineno"> 1424</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad0d63bc686dc3c20de0ace8d4da4fc28">GetDummyAuraEffect</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>, 2851, 0))</div>
<div class="line"><span class="lineno"> 1425</span>                    {</div>
<div class="line"><span class="lineno"> 1426</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> bp = aurEff-&gt;GetAmount();</div>
<div class="line"><span class="lineno"> 1427</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 48420, &amp;bp, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1428</span>                    }</div>
<div class="line"><span class="lineno"> 1429</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1430</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca104eb15c414a7006998ae56cf4b64f4c">FORM_DIREBEAR</a>:</div>
<div class="line"><span class="lineno"> 1431</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547caff14e446078e4fbc3d35a9826ae59a75">FORM_BEAR</a>:</div>
<div class="line"><span class="lineno"> 1432</span>                    <span class="comment">// Master Shapeshifter - Bear</span></div>
<div class="line"><span class="lineno"> 1433</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad0d63bc686dc3c20de0ace8d4da4fc28">GetDummyAuraEffect</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>, 2851, 0))</div>
<div class="line"><span class="lineno"> 1434</span>                    {</div>
<div class="line"><span class="lineno"> 1435</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> bp = aurEff-&gt;GetAmount();</div>
<div class="line"><span class="lineno"> 1436</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 48418, &amp;bp, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1437</span>                    }</div>
<div class="line"><span class="lineno"> 1438</span>                    <span class="comment">// Survival of the Fittest</span></div>
<div class="line"><span class="lineno"> 1439</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a520e229dc1a93ea4a53d0ba81e586d11">GetAuraEffect</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a072316fcb58b6c8c67119d4682ab4b3c">SPELL_AURA_MOD_TOTAL_STAT_PERCENTAGE</a>, <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1bac3788ce010075b8bd4e6083638d8cd40">SPELLFAMILY_DRUID</a>, 961, 0))</div>
<div class="line"><span class="lineno"> 1440</span>                    {</div>
<div class="line"><span class="lineno"> 1441</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> bp = aurEff-&gt;GetSpellInfo()-&gt;Effects[<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ffaf927c15d111e2212aaf1f8488ce751c1">EFFECT_2</a>].CalcValue();</div>
<div class="line"><span class="lineno"> 1442</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 62069, &amp;bp, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>, 0, <span class="keyword">this</span>, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 1443</span>                    }</div>
<div class="line"><span class="lineno"> 1444</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1445</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547ca956565a0800ab3f327d90d6a413f4482">FORM_MOONKIN</a>:</div>
<div class="line"><span class="lineno"> 1446</span>                    <span class="comment">// Master Shapeshifter - Moonkin</span></div>
<div class="line"><span class="lineno"> 1447</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad0d63bc686dc3c20de0ace8d4da4fc28">GetDummyAuraEffect</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>, 2851, 0))</div>
<div class="line"><span class="lineno"> 1448</span>                    {</div>
<div class="line"><span class="lineno"> 1449</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> bp = aurEff-&gt;GetAmount();</div>
<div class="line"><span class="lineno"> 1450</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 48421, &amp;bp, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1451</span>                    }</div>
<div class="line"><span class="lineno"> 1452</span>                    <span class="comment">// Always cast Moonkin Aura</span></div>
<div class="line"><span class="lineno"> 1453</span>                    target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 24907, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">this</span>, target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno"> 1454</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1455</span>                <span class="comment">// Master Shapeshifter - Tree of Life</span></div>
<div class="line"><span class="lineno"> 1456</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ab1b67dd15f243c850f589f66747e547cadede345fd72f3a48598be8a70afe65ca">FORM_TREE</a>:</div>
<div class="line"><span class="lineno"> 1457</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a> <span class="keyword">const</span>* aurEff = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ad0d63bc686dc3c20de0ace8d4da4fc28">GetDummyAuraEffect</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>, 2851, 0))</div>
<div class="line"><span class="lineno"> 1458</span>                    {</div>
<div class="line"><span class="lineno"> 1459</span>                        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> bp = aurEff-&gt;GetAmount();</div>
<div class="line"><span class="lineno"> 1460</span>                        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a51ec81e114bf82a2485ba9f66200afd2">CastCustomSpell</a>(target, 48422, &amp;bp, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1461</span>                    }</div>
<div class="line"><span class="lineno"> 1462</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1463</span>            }</div>
<div class="line"><span class="lineno"> 1464</span>        }</div>
<div class="line"><span class="lineno"> 1465</span>    }</div>
<div class="line"><span class="lineno"> 1466</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1467</span>    {</div>
<div class="line"><span class="lineno"> 1468</span>        <span class="keywordflow">if</span> (spellId)</div>
<div class="line"><span class="lineno"> 1469</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a07e3ea0e73b3ac9987aedd33c99873c9">RemoveOwnedAura</a>(spellId);</div>
<div class="line"><span class="lineno"> 1470</span>        <span class="keywordflow">if</span> (spellId2)</div>
<div class="line"><span class="lineno"> 1471</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a07e3ea0e73b3ac9987aedd33c99873c9">RemoveOwnedAura</a>(spellId2);</div>
<div class="line"><span class="lineno"> 1472</span> </div>
<div class="line"><span class="lineno"> 1473</span>        <span class="comment">// Improved Barkskin - apply/remove armor bonus due to shapeshift</span></div>
<div class="line"><span class="lineno"> 1474</span>        <span class="keywordflow">if</span> (player)</div>
<div class="line"><span class="lineno"> 1475</span>        {</div>
<div class="line"><span class="lineno"> 1476</span>            <span class="keywordflow">if</span> (player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a681d507744410840b99ecf2ee14dfc72">HasTalent</a>(63410, player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()) || player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a681d507744410840b99ecf2ee14dfc72">HasTalent</a>(63411, player-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aadce3b13b7dcab72e227e1b404ab87ab">GetActiveSpec</a>()))</div>
<div class="line"><span class="lineno"> 1477</span>            {</div>
<div class="line"><span class="lineno"> 1478</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(66530);</div>
<div class="line"><span class="lineno"> 1479</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 66530, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1480</span>            }</div>
<div class="line"><span class="lineno"> 1481</span>        }</div>
<div class="line"><span class="lineno"> 1482</span> </div>
<div class="line"><span class="lineno"> 1483</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../db/df9/a08518.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a>&amp; shapeshifts = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a1c3516bb8442ba5d970c928ffc976689">SPELL_AURA_MOD_SHAPESHIFT</a>);</div>
<div class="line"><span class="lineno"> 1484</span>        <a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* newAura = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1485</span>        <span class="comment">// Iterate through all the shapeshift auras that the target has, if there is another aura with SPELL_AURA_MOD_SHAPESHIFT, then this aura is being removed due to that one being applied</span></div>
<div class="line"><span class="lineno"> 1486</span>        <span class="keywordflow">for</span> (Unit::AuraEffectList::const_iterator itr = shapeshifts.begin(); itr != shapeshifts.end(); ++itr)</div>
<div class="line"><span class="lineno"> 1487</span>        {</div>
<div class="line"><span class="lineno"> 1488</span>            <span class="keywordflow">if</span> ((*itr) != <span class="keyword">this</span>)</div>
<div class="line"><span class="lineno"> 1489</span>            {</div>
<div class="line"><span class="lineno"> 1490</span>                newAura = *itr;</div>
<div class="line"><span class="lineno"> 1491</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1492</span>            }</div>
<div class="line"><span class="lineno"> 1493</span>        }</div>
<div class="line"><span class="lineno"> 1494</span> </div>
<div class="line"><span class="lineno"> 1495</span>        <span class="comment">// Use the new aura to see on what stance the target will be</span></div>
<div class="line"><span class="lineno"> 1496</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> newStance = (1 &lt;&lt; ((newAura ? newAura-&gt;<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() : 0) - 1));</div>
<div class="line"><span class="lineno"> 1497</span> </div>
<div class="line"><span class="lineno"> 1498</span>        <a class="code hl_typedef" href="../../db/df9/a08518.html#a32f102f941cf4a53fe17e7f7e957150a">Unit::AuraApplicationMap</a>&amp; tAuras = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#adc7150ef9ed6fc45dc84ac504fd75141">GetAppliedAuras</a>();</div>
<div class="line"><span class="lineno"> 1499</span>        <span class="keywordflow">for</span> (Unit::AuraApplicationMap::iterator itr = tAuras.begin(); itr != tAuras.end();)</div>
<div class="line"><span class="lineno"> 1500</span>        {</div>
<div class="line"><span class="lineno"> 1501</span>            <span class="comment">// If the stances are not compatible with the spell, remove it</span></div>
<div class="line"><span class="lineno"> 1502</span>            <span class="comment">// Xinef: Remove all passive auras, they will be added if needed</span></div>
<div class="line"><span class="lineno"> 1503</span>            <span class="keywordflow">if</span> (itr-&gt;second-&gt;GetBase()-&gt;IsRemovedOnShapeLost(target) &amp;&amp; (!(itr-&gt;second-&gt;GetBase()-&gt;GetSpellInfo()-&gt;Stances &amp; newStance) || itr-&gt;second-&gt;GetBase()-&gt;IsPassive()))</div>
<div class="line"><span class="lineno"> 1504</span>                target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a1be09c524dfdd2c3538f2ae977c58399">RemoveAura</a>(itr);</div>
<div class="line"><span class="lineno"> 1505</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1506</span>                ++itr;</div>
<div class="line"><span class="lineno"> 1507</span>        }</div>
<div class="line"><span class="lineno"> 1508</span> </div>
<div class="line"><span class="lineno"> 1509</span>        <span class="comment">// Xinef: Remove autoattack spells</span></div>
<div class="line"><span class="lineno"> 1510</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d3/dcf/a10834.html">Spell</a>* spell = target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#affc5148f2c60051706b4e85a29eb4d45">GetCurrentSpell</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#ab791040bd6d685b1fd2cfd12c96d0a1fabf840fee2a2e133105c6a92a7b43a272">CURRENT_MELEE_SPELL</a>))</div>
<div class="line"><span class="lineno"> 1511</span>            <span class="keywordflow">if</span> (spell-&gt;GetSpellInfo()-&gt;CheckShapeshift(newAura ? newAura-&gt;<a class="code hl_function" href="../../d6/d2f/a10782.html#aa183791665930afb43bbac2163b1d8d4">GetMiscValue</a>() : 0) != <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#ade9b4e913a84079f5311c2817e3de9daadb56426fd2113c3ff3ff3d1815d79fa6">SPELL_CAST_OK</a>)</div>
<div class="line"><span class="lineno"> 1512</span>                spell-&gt;cancel(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1513</span>    }</div>
<div class="line"><span class="lineno"> 1514</span>}</div>
<div class="ttc" id="aa02771_html_a091a832125de330a1d2fb91d57c0e1ffaf927c15d111e2212aaf1f8488ce751c1"><div class="ttname"><a href="../../d0/dbd/a02771.html#a091a832125de330a1d2fb91d57c0e1ffaf927c15d111e2212aaf1f8488ce751c1">EFFECT_2</a></div><div class="ttdeci">@ EFFECT_2</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:33</div></div>
<div class="ttc" id="aa02771_html_a292c893150c454dd75628b719db1fe97acef490c9f3480852d33dbbec7727fa7f"><div class="ttname"><a href="../../d0/dbd/a02771.html#a292c893150c454dd75628b719db1fe97acef490c9f3480852d33dbbec7727fa7f">SPELL_EFFECT_LEARN_SPELL</a></div><div class="ttdeci">@ SPELL_EFFECT_LEARN_SPELL</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:814</div></div>
<div class="ttc" id="aa02771_html_a81bad32063c8fa96f892b95fbcb156ca"><div class="ttname"><a href="../../d0/dbd/a02771.html#a81bad32063c8fa96f892b95fbcb156ca">MAX_GLYPH_SLOT_INDEX</a></div><div class="ttdeci">#define MAX_GLYPH_SLOT_INDEX</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:676</div></div>
<div class="ttc" id="aa02771_html_a9dcd0ba8d94905ba214797c12e7c44ad"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ad">SpellAttr0</a></div><div class="ttdeci">SpellAttr0</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:381</div></div>
<div class="ttc" id="aa02771_html_a9dcd0ba8d94905ba214797c12e7c44ada407e023ed336f3c64aa20f11dd49f6bd"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada407e023ed336f3c64aa20f11dd49f6bd">SPELL_ATTR0_PASSIVE</a></div><div class="ttdeci">@ SPELL_ATTR0_PASSIVE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:388</div></div>
<div class="ttc" id="aa02771_html_a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75"><div class="ttname"><a href="../../d0/dbd/a02771.html#a9dcd0ba8d94905ba214797c12e7c44ada9d53bd915f5409506cb045a0688a0a75">SPELL_ATTR0_DO_NOT_DISPLAY</a></div><div class="ttdeci">@ SPELL_ATTR0_DO_NOT_DISPLAY</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:389</div></div>
<div class="ttc" id="aa02771_html_ad28c24e82986133459dee232a5360bc4a18f70ee14d68f9a30bdc3b4022473db7"><div class="ttname"><a href="../../d0/dbd/a02771.html#ad28c24e82986133459dee232a5360bc4a18f70ee14d68f9a30bdc3b4022473db7">STAT_INTELLECT</a></div><div class="ttdeci">@ STAT_INTELLECT</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:261</div></div>
<div class="ttc" id="aa02771_html_ade9b4e913a84079f5311c2817e3de9daadb56426fd2113c3ff3ff3d1815d79fa6"><div class="ttname"><a href="../../d0/dbd/a02771.html#ade9b4e913a84079f5311c2817e3de9daadb56426fd2113c3ff3ff3d1815d79fa6">SPELL_CAST_OK</a></div><div class="ttdeci">@ SPELL_CAST_OK</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1138</div></div>
<div class="ttc" id="aa03080_html_a9f3c49d8db7e142b86eba36bc8951967a3ab7cedf4f334dafece5849da2e0a4d1"><div class="ttname"><a href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967a3ab7cedf4f334dafece5849da2e0a4d1">TRIGGERED_IGNORE_CASTER_AURASTATE</a></div><div class="ttdeci">@ TRIGGERED_IGNORE_CASTER_AURASTATE</div><div class="ttdoc">Will ignore shapeshift checks.</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:142</div></div>
<div class="ttc" id="aa03080_html_a9f3c49d8db7e142b86eba36bc8951967a5e96b0ff258ff2655647102a361a7300"><div class="ttname"><a href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967a5e96b0ff258ff2655647102a361a7300">TRIGGERED_IGNORE_SHAPESHIFT</a></div><div class="ttdeci">@ TRIGGERED_IGNORE_SHAPESHIFT</div><div class="ttdoc">Will not adjust facing to target (if any)</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:141</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a072316fcb58b6c8c67119d4682ab4b3c"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a072316fcb58b6c8c67119d4682ab4b3c">SPELL_AURA_MOD_TOTAL_STAT_PERCENTAGE</a></div><div class="ttdeci">@ SPELL_AURA_MOD_TOTAL_STAT_PERCENTAGE</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:200</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a66cca11731d68512cb0bb652cb1e7caf"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a66cca11731d68512cb0bb652cb1e7caf">SPELL_AURA_DUMMY</a></div><div class="ttdeci">@ SPELL_AURA_DUMMY</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:67</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a7e920736925cc01608542567a3d2107e"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a7e920736925cc01608542567a3d2107e">SPELL_AURA_MOD_SPELL_HEALING_OF_STAT_PERCENT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_SPELL_HEALING_OF_STAT_PERCENT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:238</div></div>
<div class="ttc" id="aa03704_html_acea66fa4ab7a4e45db7d27aa86a15eda"><div class="ttname"><a href="../../d7/da2/a03704.html#acea66fa4ab7a4e45db7d27aa86a15eda">sGlyphPropertiesStore</a></div><div class="ttdeci">DBCStorage&lt; GlyphPropertiesEntry &gt; sGlyphPropertiesStore(GlyphPropertiesfmt)</div></div>
<div class="ttc" id="aa08386_html_a4b55b85a0c0a94c13e155c7031388757"><div class="ttname"><a href="../../d0/dc6/a08386.html#a4b55b85a0c0a94c13e155c7031388757">Player::GetGlyph</a></div><div class="ttdeci">uint32 GetGlyph(uint8 slot) const</div><div class="ttdef"><b>Definition:</b> Player.h:1753</div></div>
<div class="ttc" id="aa08386_html_a681d507744410840b99ecf2ee14dfc72"><div class="ttname"><a href="../../d0/dc6/a08386.html#a681d507744410840b99ecf2ee14dfc72">Player::HasTalent</a></div><div class="ttdeci">bool HasTalent(uint32 spell_id, uint8 spec) const</div><div class="ttdef"><b>Definition:</b> Player.cpp:3873</div></div>
<div class="ttc" id="aa08386_html_ad52044947ef0aa2325b2688075bac34d"><div class="ttname"><a href="../../d0/dc6/a08386.html#ad52044947ef0aa2325b2688075bac34d">Player::RemoveSpellCooldown</a></div><div class="ttdeci">void RemoveSpellCooldown(uint32 spell_id, bool update=false)</div><div class="ttdef"><b>Definition:</b> Player.cpp:3511</div></div>
<div class="ttc" id="aa08518_html_a07e3ea0e73b3ac9987aedd33c99873c9"><div class="ttname"><a href="../../db/df9/a08518.html#a07e3ea0e73b3ac9987aedd33c99873c9">Unit::RemoveOwnedAura</a></div><div class="ttdeci">void RemoveOwnedAura(AuraMap::iterator &amp;i, AuraRemoveMode removeMode=AURA_REMOVE_BY_DEFAULT)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4705</div></div>
<div class="ttc" id="aa10898_html_a21cf48a7eb77db7f731ebe746d2d6878"><div class="ttname"><a href="../../d2/db6/a10898.html#a21cf48a7eb77db7f731ebe746d2d6878">SpellInfo::Stances</a></div><div class="ttdeci">uint32 Stances</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:333</div></div>
<div class="ttc" id="aa10898_html_ad66dd61ba67ee1626e7e8393f0c27498"><div class="ttname"><a href="../../d2/db6/a10898.html#ad66dd61ba67ee1626e7e8393f0c27498">SpellInfo::HasEffect</a></div><div class="ttdeci">bool HasEffect(SpellEffects effect) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:876</div></div>
<div class="ttc" id="aa27754_html"><div class="ttname"><a href="../../d3/d8d/a27754.html">GlyphPropertiesEntry</a></div><div class="ttdef"><b>Definition:</b> DBCStructure.h:1020</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01224">Unit::CastCustomSpell()</a>, <a class="el" href="../../#l01167">Unit::CastSpell()</a>, <a class="el" href="../../#l00537">CURRENT_MELEE_SPELL</a>, <a class="el" href="../../#l00033">EFFECT_2</a>, <a class="el" href="../../#l00075">FORM_AMBIENT</a>, <a class="el" href="../../#l00073">FORM_AQUA</a>, <a class="el" href="../../#l00086">FORM_BATTLESTANCE</a>, <a class="el" href="../../#l00074">FORM_BEAR</a>, <a class="el" href="../../#l00088">FORM_BERSERKERSTANCE</a>, <a class="el" href="../../#l00070">FORM_CAT</a>, <a class="el" href="../../#l00083">FORM_CREATUREBEAR</a>, <a class="el" href="../../#l00084">FORM_CREATURECAT</a>, <a class="el" href="../../#l00087">FORM_DEFENSIVESTANCE</a>, <a class="el" href="../../#l00077">FORM_DIREBEAR</a>, <a class="el" href="../../#l00096">FORM_FLIGHT</a>, <a class="el" href="../../#l00094">FORM_FLIGHT_EPIC</a>, <a class="el" href="../../#l00085">FORM_GHOSTWOLF</a>, <a class="el" href="../../#l00076">FORM_GHOUL</a>, <a class="el" href="../../#l00091">FORM_METAMORPHOSIS</a>, <a class="el" href="../../#l00098">FORM_MOONKIN</a>, <a class="el" href="../../#l00069">FORM_NONE</a>, <a class="el" href="../../#l00095">FORM_SHADOW</a>, <a class="el" href="../../#l00099">FORM_SPIRITOFREDEMPTION</a>, <a class="el" href="../../#l00097">FORM_STEALTH</a>, <a class="el" href="../../#l00072">FORM_TRAVEL</a>, <a class="el" href="../../#l00071">FORM_TREE</a>, <a class="el" href="../../#l01727">Player::GetActiveSpec()</a>, <a class="el" href="../../#l01304">Unit::GetAppliedAuras()</a>, <a class="el" href="../../#l05494">Unit::GetAuraEffect()</a>, <a class="el" href="../../#l01349">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../#l01449">Unit::GetCurrentSpell()</a>, <a class="el" href="../../#l01358">Unit::GetDummyAuraEffect()</a>, <a class="el" href="../../#l01753">Player::GetGlyph()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l01759">Player::GetSpellMap()</a>, <a class="el" href="../../#l02593">Player::GetTalentMap()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l00876">SpellInfo::HasEffect()</a>, <a class="el" href="../../#l03873">Player::HasTalent()</a>, <a class="el" href="../../#l00676">MAX_GLYPH_SLOT_INDEX</a>, <a class="el" href="../../#l00122">PLAYERSPELL_REMOVED</a>, <a class="el" href="../../#l04776">Unit::RemoveAura()</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../#l04705">Unit::RemoveOwnedAura()</a>, <a class="el" href="../../#l03511">Player::RemoveSpellCooldown()</a>, <a class="el" href="../../d7/da2/a03704.html#acea66fa4ab7a4e45db7d27aa86a15eda">sGlyphPropertiesStore</a>, <a class="el" href="../../#l00389">SPELL_ATTR0_DO_NOT_DISPLAY</a>, <a class="el" href="../../#l00388">SPELL_ATTR0_PASSIVE</a>, <a class="el" href="../../#l00067">SPELL_AURA_DUMMY</a>, <a class="el" href="../../#l00099">SPELL_AURA_MOD_SHAPESHIFT</a>, <a class="el" href="../../#l00238">SPELL_AURA_MOD_SPELL_HEALING_OF_STAT_PERCENT</a>, <a class="el" href="../../#l00200">SPELL_AURA_MOD_TOTAL_STAT_PERCENTAGE</a>, <a class="el" href="../../#l01138">SPELL_CAST_OK</a>, <a class="el" href="../../#l00814">SPELL_EFFECT_LEARN_SPELL</a>, <a class="el" href="../../#l03535">SPELLFAMILY_DRUID</a>, <a class="el" href="../../#l03528">SPELLFAMILY_GENERIC</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, <a class="el" href="../../#l00333">SpellInfo::Stances</a>, <a class="el" href="../../#l00261">STAT_INTELLECT</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, <a class="el" href="../../#l00147">TRIGGERED_FULL_MASK</a>, <a class="el" href="../../#l00142">TRIGGERED_IGNORE_CASTER_AURASTATE</a>, and <a class="el" href="../../#l00141">TRIGGERED_IGNORE_SHAPESHIFT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01862">HandleAuraModShapeshift()</a>.</p>

</div>
</div>
<a id="ac3cf8ea3adbe4a9b6756c1759d515528" name="ac3cf8ea3adbe4a9b6756c1759d515528"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3cf8ea3adbe4a9b6756c1759d515528">&#9670;&#160;</a></span>HandleShieldBlockValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleShieldBlockValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5308</span>{</div>
<div class="line"><span class="lineno"> 5309</span>    <span class="keywordflow">if</span> (!(mode &amp; (<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a3f927e93e8d12cb62df027bcf32c3b97">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a> | <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a1ad8c6affd2f65e52f1a377b7ebf3d4f">AURA_EFFECT_HANDLE_STAT</a>)))</div>
<div class="line"><span class="lineno"> 5310</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 5311</span> </div>
<div class="line"><span class="lineno"> 5312</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 5313</span> </div>
<div class="line"><span class="lineno"> 5314</span>    <a class="code hl_enumeration" href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10">BaseModType</a> modType = <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10a13f6d70c134b3744ab0581ab8df32177">FLAT_MOD</a>;</div>
<div class="line"><span class="lineno"> 5315</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>() == <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a580ae19464afb0d72ab7d3414e14796b">SPELL_AURA_MOD_SHIELD_BLOCKVALUE_PCT</a>)</div>
<div class="line"><span class="lineno"> 5316</span>        modType = <a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10ad445af08f58d13cde94091cab97f7deb">PCT_MOD</a>;</div>
<div class="line"><span class="lineno"> 5317</span> </div>
<div class="line"><span class="lineno"> 5318</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 5319</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#af85e4f061186ef03c3561aaf1a99a72d">HandleBaseModValue</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a938646605f1e70b8f1613bf9bdb78b4fa63a0b2c814bdfeeb5e4979e43fe90ad0">SHIELD_BLOCK_VALUE</a>, modType, <span class="keywordtype">float</span>(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>()), apply);</div>
<div class="line"><span class="lineno"> 5320</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a580ae19464afb0d72ab7d3414e14796b"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a580ae19464afb0d72ab7d3414e14796b">SPELL_AURA_MOD_SHIELD_BLOCKVALUE_PCT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_SHIELD_BLOCKVALUE_PCT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:213</div></div>
<div class="ttc" id="aa03515_html_a114d5261840f2cea1ebee7abcad43e10"><div class="ttname"><a href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10">BaseModType</a></div><div class="ttdeci">BaseModType</div><div class="ttdef"><b>Definition:</b> Unit.h:188</div></div>
<div class="ttc" id="aa03515_html_a114d5261840f2cea1ebee7abcad43e10ad445af08f58d13cde94091cab97f7deb"><div class="ttname"><a href="../../de/d3d/a03515.html#a114d5261840f2cea1ebee7abcad43e10ad445af08f58d13cde94091cab97f7deb">PCT_MOD</a></div><div class="ttdeci">@ PCT_MOD</div><div class="ttdef"><b>Definition:</b> Unit.h:190</div></div>
<div class="ttc" id="aa03515_html_a938646605f1e70b8f1613bf9bdb78b4fa63a0b2c814bdfeeb5e4979e43fe90ad0"><div class="ttname"><a href="../../de/d3d/a03515.html#a938646605f1e70b8f1613bf9bdb78b4fa63a0b2c814bdfeeb5e4979e43fe90ad0">SHIELD_BLOCK_VALUE</a></div><div class="ttdeci">@ SHIELD_BLOCK_VALUE</div><div class="ttdef"><b>Definition:</b> Unit.h:183</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00049">AURA_EFFECT_HANDLE_CHANGE_AMOUNT_MASK</a>, <a class="el" href="../../#l00046">AURA_EFFECT_HANDLE_STAT</a>, <a class="el" href="../../#l00189">FLAT_MOD</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l05013">Player::HandleBaseModValue()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00190">PCT_MOD</a>, <a class="el" href="../../#l00183">SHIELD_BLOCK_VALUE</a>, <a class="el" href="../../#l00213">SPELL_AURA_MOD_SHIELD_BLOCKVALUE_PCT</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

</div>
</div>
<a id="a40c4c923ea3038d2285ab82992e87dc8" name="a40c4c923ea3038d2285ab82992e87dc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40c4c923ea3038d2285ab82992e87dc8">&#9670;&#160;</a></span>HandleSpiritOfRedemption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleSpiritOfRedemption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1741</span>{</div>
<div class="line"><span class="lineno"> 1742</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a9db592566b0111486336c591e7a06e2b">AURA_EFFECT_HANDLE_REAL</a>))</div>
<div class="line"><span class="lineno"> 1743</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1744</span> </div>
<div class="line"><span class="lineno"> 1745</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1746</span> </div>
<div class="line"><span class="lineno"> 1747</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 1748</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1749</span> </div>
<div class="line"><span class="lineno"> 1750</span>    <span class="comment">// prepare spirit state</span></div>
<div class="line"><span class="lineno"> 1751</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1752</span>    {</div>
<div class="line"><span class="lineno"> 1753</span>        <span class="comment">// disable breath/etc timers</span></div>
<div class="line"><span class="lineno"> 1754</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#a6fcb0dcc0f5d2cd100b754165592cb00">StopMirrorTimers</a>();</div>
<div class="line"><span class="lineno"> 1755</span> </div>
<div class="line"><span class="lineno"> 1756</span>        <span class="comment">// set stand state (expected in this form)</span></div>
<div class="line"><span class="lineno"> 1757</span>        <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a66120644adf09a45c139d48d4e4dce5b">IsStandState</a>())</div>
<div class="line"><span class="lineno"> 1758</span>            target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aeae261b4b6d3ccacc8819ca19b4ef0cc">SetStandState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a809d475cf0ffeaa1ddad86f73e24a7c1ae36b6864d89399e04b14123d3194e224">UNIT_STAND_STATE_STAND</a>);</div>
<div class="line"><span class="lineno"> 1759</span> </div>
<div class="line"><span class="lineno"> 1760</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a6548d4bfff73fad6df63a0bd0d806e2e">SetHealth</a>(1);</div>
<div class="line"><span class="lineno"> 1761</span>    }</div>
<div class="line"><span class="lineno"> 1762</span>    <span class="comment">// die at aura end</span></div>
<div class="line"><span class="lineno"> 1763</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno"> 1764</span>        <span class="comment">// call functions which may have additional effects after chainging state of unit</span></div>
<div class="line"><span class="lineno"> 1765</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a0e26ac5eae65e908edf086ec7a68cb3e">setDeathState</a>(DeathState::JustDied);</div>
<div class="line"><span class="lineno"> 1766</span> </div>
<div class="line"><span class="lineno"> 1767</span>    <span class="comment">// xinef: damage immunity spell, not needed because of 93 aura (adds non_attackable state)</span></div>
<div class="line"><span class="lineno"> 1768</span>    <span class="comment">// xinef: probably blizzard added it just in case in wotlk (id &gt; 46000)</span></div>
<div class="line"><span class="lineno"> 1769</span>    <span class="keywordflow">if</span> (apply)</div>
<div class="line"><span class="lineno"> 1770</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aa3ca95f7a14041f562ed69c3994afdfc">CastSpell</a>(target, 62371, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1771</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1772</span>        target-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#aac612f06e84142d92dcfc432b5feb4ac">RemoveAurasDueToSpell</a>(62371);</div>
<div class="line"><span class="lineno"> 1773</span>}</div>
<div class="ttc" id="aa03521_html_a809d475cf0ffeaa1ddad86f73e24a7c1ae36b6864d89399e04b14123d3194e224"><div class="ttname"><a href="../../d8/dbe/a03521.html#a809d475cf0ffeaa1ddad86f73e24a7c1ae36b6864d89399e04b14123d3194e224">UNIT_STAND_STATE_STAND</a></div><div class="ttdeci">@ UNIT_STAND_STATE_STAND</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:32</div></div>
<div class="ttc" id="aa08386_html_a6fcb0dcc0f5d2cd100b754165592cb00"><div class="ttname"><a href="../../d0/dc6/a08386.html#a6fcb0dcc0f5d2cd100b754165592cb00">Player::StopMirrorTimers</a></div><div class="ttdeci">void StopMirrorTimers()</div><div class="ttdef"><b>Definition:</b> Player.h:2038</div></div>
<div class="ttc" id="aa08518_html_a0e26ac5eae65e908edf086ec7a68cb3e"><div class="ttname"><a href="../../db/df9/a08518.html#a0e26ac5eae65e908edf086ec7a68cb3e">Unit::setDeathState</a></div><div class="ttdeci">virtual void setDeathState(DeathState s, bool despawn=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:14548</div></div>
<div class="ttc" id="aa08518_html_a66120644adf09a45c139d48d4e4dce5b"><div class="ttname"><a href="../../db/df9/a08518.html#a66120644adf09a45c139d48d4e4dce5b">Unit::IsStandState</a></div><div class="ttdeci">bool IsStandState() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:16716</div></div>
<div class="ttc" id="aa08518_html_aeae261b4b6d3ccacc8819ca19b4ef0cc"><div class="ttname"><a href="../../db/df9/a08518.html#aeae261b4b6d3ccacc8819ca19b4ef0cc">Unit::SetStandState</a></div><div class="ttdeci">void SetStandState(uint8 state)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:16722</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00042">AURA_EFFECT_HANDLE_REAL</a>, <a class="el" href="../../#l01167">Unit::CastSpell()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l01658">Unit::IsAlive()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l16716">Unit::IsStandState()</a>, <a class="el" href="../../#l04909">Unit::RemoveAurasDueToSpell()</a>, <a class="el" href="../../#l14548">Unit::setDeathState()</a>, <a class="el" href="../../#l15473">Unit::SetHealth()</a>, <a class="el" href="../../#l16722">Unit::SetStandState()</a>, <a class="el" href="../../#l02038">Player::StopMirrorTimers()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00032">UNIT_STAND_STATE_STAND</a>.</p>

</div>
</div>
<a id="a49b7f5bcb03bab576c46e4db57e0625d" name="a49b7f5bcb03bab576c46e4db57e0625d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49b7f5bcb03bab576c46e4db57e0625d">&#9670;&#160;</a></span>HandleUnused()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleUnused </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  159</span>    {</div>
<div class="line"><span class="lineno">  160</span>        <span class="comment">// useless</span></div>
<div class="line"><span class="lineno">  161</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0e6dfd8b1d19f6f3ab0d60f65e4427a" name="ae0e6dfd8b1d19f6f3ab0d60f65e4427a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0e6dfd8b1d19f6f3ab0d60f65e4427a">&#9670;&#160;</a></span>HandleWaterBreathing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::HandleWaterBreathing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> const *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3396</span>{</div>
<div class="line"><span class="lineno"> 3397</span>    <span class="keywordflow">if</span> (!(mode &amp; <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a82ebee9e3cf7eaf2ab892a6eb7796288a7aa4d8b719d50cad08a3c78687ccbec2">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>))</div>
<div class="line"><span class="lineno"> 3398</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3399</span> </div>
<div class="line"><span class="lineno"> 3400</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#af387d5e18806e37f65ebc3408c0b8712">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 3401</span> </div>
<div class="line"><span class="lineno"> 3402</span>    <span class="comment">// update timers in client</span></div>
<div class="line"><span class="lineno"> 3403</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno"> 3404</span>        target-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#aa4a31e21f267b78a58a6c2031b04c487">UpdateMirrorTimers</a>();</div>
<div class="line"><span class="lineno"> 3405</span>}</div>
<div class="ttc" id="aa08386_html_aa4a31e21f267b78a58a6c2031b04c487"><div class="ttname"><a href="../../d0/dc6/a08386.html#aa4a31e21f267b78a58a6c2031b04c487">Player::UpdateMirrorTimers</a></div><div class="ttdeci">void UpdateMirrorTimers()</div><div class="ttdef"><b>Definition:</b> PlayerUpdates.cpp:428</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00048">AURA_EFFECT_HANDLE_SEND_FOR_CLIENT_MASK</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00198">Object::ToPlayer()</a>, and <a class="el" href="../../#l00428">Player::UpdateMirrorTimers()</a>.</p>

</div>
</div>
<a id="ac47f45d58ef676d9e242852a80c96b01" name="ac47f45d58ef676d9e242852a80c96b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac47f45d58ef676d9e242852a80c96b01">&#9670;&#160;</a></span>HasSpellClassMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AuraEffect::HasSpellClassMask </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1092</span>{</div>
<div class="line"><span class="lineno"> 1093</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].SpellClassMask;</div>
<div class="line"><span class="lineno"> 1094</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00146">m_effIndex</a>, and <a class="el" href="../../#l00123">m_spellInfo</a>.</p>

</div>
</div>
<a id="a71cd3938d8e16b4f6363e6978077aa8f" name="a71cd3938d8e16b4f6363e6978077aa8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71cd3938d8e16b4f6363e6978077aa8f">&#9670;&#160;</a></span>IsAffectedOnSpell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AuraEffect::IsAffectedOnSpell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/db6/a10898.html">SpellInfo</a> const *&#160;</td>
          <td class="paramname"><em>spell</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1078</span>{</div>
<div class="line"><span class="lineno"> 1079</span>    <span class="keywordflow">if</span> (!spell)</div>
<div class="line"><span class="lineno"> 1080</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1081</span>    <span class="comment">// Check family name</span></div>
<div class="line"><span class="lineno"> 1082</span>    <span class="keywordflow">if</span> (spell-&gt;SpellFamilyName != <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#af6ec577353f7d3cc59badd7d332153b0">SpellFamilyName</a>)</div>
<div class="line"><span class="lineno"> 1083</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1084</span> </div>
<div class="line"><span class="lineno"> 1085</span>    <span class="comment">// Check EffectClassMask</span></div>
<div class="line"><span class="lineno"> 1086</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#aa5bb0d7d6df03526d011d9cbfa3734e0">Effects</a>[<a class="code hl_variable" href="../../d6/d2f/a10782.html#a355d61580194626ea54b22ff9a3ac96a">m_effIndex</a>].SpellClassMask &amp; spell-&gt;SpellFamilyFlags)</div>
<div class="line"><span class="lineno"> 1087</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1088</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1089</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00393">SpellInfo::Effects</a>, <a class="el" href="../../#l00146">m_effIndex</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l00388">SpellInfo::SpellFamilyFlags</a>, and <a class="el" href="../../#l00387">SpellInfo::SpellFamilyName</a>.</p>

</div>
</div>
<a id="a7d45367044e196745676c63d61fbd89d" name="a7d45367044e196745676c63d61fbd89d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d45367044e196745676c63d61fbd89d">&#9670;&#160;</a></span>IsPeriodic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AuraEffect::IsPeriodic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   92</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00148">m_isPeriodic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>, and <a class="el" href="../../#l03476">Spell::prepare()</a>.</p>

</div>
</div>
<a id="af498cc64849486b0001f558da9c5c9ef" name="af498cc64849486b0001f558da9c5c9ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af498cc64849486b0001f558da9c5c9ef">&#9670;&#160;</a></span>PeriodicTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::PeriodicTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d50/a10790.html">AuraApplication</a> *&#160;</td>
          <td class="paramname"><em>aurApp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1103</span>{</div>
<div class="line"><span class="lineno"> 1104</span>    <span class="keywordtype">bool</span> prevented = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a3b0854e2019338fd16c9ca46e3997931">CallScriptEffectPeriodicHandlers</a>(<span class="keyword">this</span>, aurApp);</div>
<div class="line"><span class="lineno"> 1105</span>    <span class="keywordflow">if</span> (prevented)</div>
<div class="line"><span class="lineno"> 1106</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1107</span> </div>
<div class="line"><span class="lineno"> 1108</span>    <a class="code hl_class" href="../../db/df9/a08518.html">Unit</a>* target = aurApp-&gt;<a class="code hl_function" href="../../de/d50/a10790.html#a0447441f89446b170d751abbdda541b8">GetTarget</a>();</div>
<div class="line"><span class="lineno"> 1109</span> </div>
<div class="line"><span class="lineno"> 1110</span>    <span class="comment">// Update serverside orientation of tracking channeled auras on periodic update ticks</span></div>
<div class="line"><span class="lineno"> 1111</span>    <span class="comment">// exclude players because can turn during channeling and shouldn&#39;t desync orientation client/server</span></div>
<div class="line"><span class="lineno"> 1112</span>    <span class="keywordflow">if</span> (caster &amp;&amp; !caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a93b51808183b35049d7e5847acee0390">IsChanneled</a>() &amp;&amp; <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_function" href="../../d2/db6/a10898.html#a975746d6b737abb063ea037327abfc5a">HasAttribute</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a638f8f550e23b2e3180b481bb3f38076a765189f25c2f47a7260b5f61fdce9fe9">SPELL_ATTR1_TRACK_TARGET_IN_CHANNEL</a>))</div>
<div class="line"><span class="lineno"> 1113</span>    {</div>
<div class="line"><span class="lineno"> 1114</span>        <a class="code hl_class" href="../../db/d40/a08190.html">ObjectGuid</a> <span class="keyword">const</span> channelGuid = caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#af7b6a5afebd7c3297e369213be44e059">GetGuidValue</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a2ade5a94dc5b622bd2dfdad5eddaf273">UNIT_FIELD_CHANNEL_OBJECT</a>);</div>
<div class="line"><span class="lineno"> 1115</span>        <span class="keywordflow">if</span> (!channelGuid.<a class="code hl_function" href="../../db/d40/a08190.html#a32695a11f47a244236e7bce277fcf3a8">IsEmpty</a>() &amp;&amp; channelGuid != caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>())</div>
<div class="line"><span class="lineno"> 1116</span>        {</div>
<div class="line"><span class="lineno"> 1117</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d3/d4c/a08174.html">WorldObject</a> <span class="keyword">const</span>* objectTarget = <a class="code hl_function" href="../../d9/d06/a04735.html#ade254f98439319c444ce701c75d4f93a">ObjectAccessor::GetWorldObject</a>(*caster, channelGuid))</div>
<div class="line"><span class="lineno"> 1118</span>            {</div>
<div class="line"><span class="lineno"> 1119</span>                caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#ae2ce6a171e27e575ad183809a78286ae">SetInFront</a>(objectTarget);</div>
<div class="line"><span class="lineno"> 1120</span>            }</div>
<div class="line"><span class="lineno"> 1121</span>        }</div>
<div class="line"><span class="lineno"> 1122</span>    }</div>
<div class="line"><span class="lineno"> 1123</span> </div>
<div class="line"><span class="lineno"> 1124</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><span class="lineno"> 1125</span>    {</div>
<div class="line"><span class="lineno"> 1126</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56">SPELL_AURA_PERIODIC_DUMMY</a>:</div>
<div class="line"><span class="lineno"> 1127</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a61bdb07de2581972c79e3c3e46ecdbbe">HandlePeriodicDummyAuraTick</a>(target, caster);</div>
<div class="line"><span class="lineno"> 1128</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1129</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799af51e1877e096bbfd69505e5ab4fc69ad">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>:</div>
<div class="line"><span class="lineno"> 1130</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a545377a3f6c71f42c3897206a2dc0919">HandlePeriodicTriggerSpellAuraTick</a>(target, caster);</div>
<div class="line"><span class="lineno"> 1131</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1132</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ae054658138830d9b34867a15c8bb9f5c">SPELL_AURA_PERIODIC_TRIGGER_SPELL_FROM_CLIENT</a>:</div>
<div class="line"><span class="lineno"> 1133</span>            <span class="comment">// Don&#39;t actually do anything - client will trigger casts of these spells by itself</span></div>
<div class="line"><span class="lineno"> 1134</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1135</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab6c4d806c60e94fec189c27a7a205576">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a>:</div>
<div class="line"><span class="lineno"> 1136</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#af605dc2f9174968cb77b9d3cc50a1fb4">HandlePeriodicTriggerSpellWithValueAuraTick</a>(target, caster);</div>
<div class="line"><span class="lineno"> 1137</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1138</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a11166673929d2fda5967add284832fad">SPELL_AURA_PERIODIC_DAMAGE</a>:</div>
<div class="line"><span class="lineno"> 1139</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a65c8ec2c8667d6c49c278491c113a374">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>:</div>
<div class="line"><span class="lineno"> 1140</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a8f993bd36f255362d3801c708509a868">HandlePeriodicDamageAurasTick</a>(target, caster);</div>
<div class="line"><span class="lineno"> 1141</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1142</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ac84a600c9fc81cbda953c9f64074ab9f">SPELL_AURA_PERIODIC_LEECH</a>:</div>
<div class="line"><span class="lineno"> 1143</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a757600361597c84413041214cd39dc22">HandlePeriodicHealthLeechAuraTick</a>(target, caster);</div>
<div class="line"><span class="lineno"> 1144</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1145</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2b064a34862eb2f85ec873398d787012">SPELL_AURA_PERIODIC_HEALTH_FUNNEL</a>:</div>
<div class="line"><span class="lineno"> 1146</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a35cc3b13cde9e1cfbdfee49d6bdcee57">HandlePeriodicHealthFunnelAuraTick</a>(target, caster);</div>
<div class="line"><span class="lineno"> 1147</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1148</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a6442a4a379f82e2f08734296e1e21c9f">SPELL_AURA_PERIODIC_HEAL</a>:</div>
<div class="line"><span class="lineno"> 1149</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2616d80ed4951b4ff860a0e0e2a98da0">SPELL_AURA_OBS_MOD_HEALTH</a>:</div>
<div class="line"><span class="lineno"> 1150</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a3c497a3c954b0bade630ac996c440fa3">HandlePeriodicHealAurasTick</a>(target, caster);</div>
<div class="line"><span class="lineno"> 1151</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1152</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a2eb3f6e6a49bc0b70fa9726b1fa12bb3">SPELL_AURA_PERIODIC_MANA_LEECH</a>:</div>
<div class="line"><span class="lineno"> 1153</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a20e3450e5f8299f76561cbe747d12c88">HandlePeriodicManaLeechAuraTick</a>(target, caster);</div>
<div class="line"><span class="lineno"> 1154</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1155</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a4f1feb3950d2776a74c938c366adbbdf">SPELL_AURA_OBS_MOD_POWER</a>:</div>
<div class="line"><span class="lineno"> 1156</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a2d4f436ab67e728f66577e043143f32d">HandleObsModPowerAuraTick</a>(target, caster);</div>
<div class="line"><span class="lineno"> 1157</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1158</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ab9f377f6e107ad1633d32a22da2ec7d2">SPELL_AURA_PERIODIC_ENERGIZE</a>:</div>
<div class="line"><span class="lineno"> 1159</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a4cee5e983225342908700110067f258a">HandlePeriodicEnergizeAuraTick</a>(target, caster);</div>
<div class="line"><span class="lineno"> 1160</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1161</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799ad06611922c0cf903c24b220140daacab">SPELL_AURA_POWER_BURN</a>:</div>
<div class="line"><span class="lineno"> 1162</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a0e5699c43a4f49c32daa9c1b6df068ce">HandlePeriodicPowerBurnAuraTick</a>(target, caster);</div>
<div class="line"><span class="lineno"> 1163</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1164</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1165</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1166</span>    }</div>
<div class="line"><span class="lineno"> 1167</span>}</div>
<div class="ttc" id="aa02771_html_a638f8f550e23b2e3180b481bb3f38076a765189f25c2f47a7260b5f61fdce9fe9"><div class="ttname"><a href="../../d0/dbd/a02771.html#a638f8f550e23b2e3180b481bb3f38076a765189f25c2f47a7260b5f61fdce9fe9">SPELL_ATTR1_TRACK_TARGET_IN_CHANNEL</a></div><div class="ttdeci">@ SPELL_ATTR1_TRACK_TARGET_IN_CHANNEL</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:433</div></div>
<div class="ttc" id="aa04735_html_ade254f98439319c444ce701c75d4f93a"><div class="ttname"><a href="../../d9/d06/a04735.html#ade254f98439319c444ce701c75d4f93a">ObjectAccessor::GetWorldObject</a></div><div class="ttdeci">WorldObject * GetWorldObject(WorldObject const &amp;, ObjectGuid const guid)</div><div class="ttdef"><b>Definition:</b> ObjectAccessor.cpp:115</div></div>
<div class="ttc" id="aa08174_html"><div class="ttname"><a href="../../d3/d4c/a08174.html">WorldObject</a></div><div class="ttdef"><b>Definition:</b> Object.h:405</div></div>
<div class="ttc" id="aa08190_html_a32695a11f47a244236e7bce277fcf3a8"><div class="ttname"><a href="../../db/d40/a08190.html#a32695a11f47a244236e7bce277fcf3a8">ObjectGuid::IsEmpty</a></div><div class="ttdeci">bool IsEmpty() const</div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:161</div></div>
<div class="ttc" id="aa08518_html_ae2ce6a171e27e575ad183809a78286ae"><div class="ttname"><a href="../../db/df9/a08518.html#ae2ce6a171e27e575ad183809a78286ae">Unit::SetInFront</a></div><div class="ttdeci">void SetInFront(WorldObject const *target)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:20517</div></div>
<div class="ttc" id="aa10782_html_a0e5699c43a4f49c32daa9c1b6df068ce"><div class="ttname"><a href="../../d6/d2f/a10782.html#a0e5699c43a4f49c32daa9c1b6df068ce">AuraEffect::HandlePeriodicPowerBurnAuraTick</a></div><div class="ttdeci">void HandlePeriodicPowerBurnAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:7167</div></div>
<div class="ttc" id="aa10782_html_a20e3450e5f8299f76561cbe747d12c88"><div class="ttname"><a href="../../d6/d2f/a10782.html#a20e3450e5f8299f76561cbe747d12c88">AuraEffect::HandlePeriodicManaLeechAuraTick</a></div><div class="ttdeci">void HandlePeriodicManaLeechAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:7026</div></div>
<div class="ttc" id="aa10782_html_a2d4f436ab67e728f66577e043143f32d"><div class="ttname"><a href="../../d6/d2f/a10782.html#a2d4f436ab67e728f66577e043143f32d">AuraEffect::HandleObsModPowerAuraTick</a></div><div class="ttdeci">void HandleObsModPowerAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:7099</div></div>
<div class="ttc" id="aa10782_html_a35cc3b13cde9e1cfbdfee49d6bdcee57"><div class="ttname"><a href="../../d6/d2f/a10782.html#a35cc3b13cde9e1cfbdfee49d6bdcee57">AuraEffect::HandlePeriodicHealthFunnelAuraTick</a></div><div class="ttdeci">void HandlePeriodicHealthFunnelAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:6849</div></div>
<div class="ttc" id="aa10782_html_a3c497a3c954b0bade630ac996c440fa3"><div class="ttname"><a href="../../d6/d2f/a10782.html#a3c497a3c954b0bade630ac996c440fa3">AuraEffect::HandlePeriodicHealAurasTick</a></div><div class="ttdeci">void HandlePeriodicHealAurasTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:6878</div></div>
<div class="ttc" id="aa10782_html_a4cee5e983225342908700110067f258a"><div class="ttname"><a href="../../d6/d2f/a10782.html#a4cee5e983225342908700110067f258a">AuraEffect::HandlePeriodicEnergizeAuraTick</a></div><div class="ttdeci">void HandlePeriodicEnergizeAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:7133</div></div>
<div class="ttc" id="aa10782_html_a545377a3f6c71f42c3897206a2dc0919"><div class="ttname"><a href="../../d6/d2f/a10782.html#a545377a3f6c71f42c3897206a2dc0919">AuraEffect::HandlePeriodicTriggerSpellAuraTick</a></div><div class="ttdeci">void HandlePeriodicTriggerSpellAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:6287</div></div>
<div class="ttc" id="aa10782_html_a61bdb07de2581972c79e3c3e46ecdbbe"><div class="ttname"><a href="../../d6/d2f/a10782.html#a61bdb07de2581972c79e3c3e46ecdbbe">AuraEffect::HandlePeriodicDummyAuraTick</a></div><div class="ttdeci">void HandlePeriodicDummyAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:6196</div></div>
<div class="ttc" id="aa10782_html_a757600361597c84413041214cd39dc22"><div class="ttname"><a href="../../d6/d2f/a10782.html#a757600361597c84413041214cd39dc22">AuraEffect::HandlePeriodicHealthLeechAuraTick</a></div><div class="ttdeci">void HandlePeriodicHealthLeechAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:6743</div></div>
<div class="ttc" id="aa10782_html_a8f993bd36f255362d3801c708509a868"><div class="ttname"><a href="../../d6/d2f/a10782.html#a8f993bd36f255362d3801c708509a868">AuraEffect::HandlePeriodicDamageAurasTick</a></div><div class="ttdeci">void HandlePeriodicDamageAurasTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:6589</div></div>
<div class="ttc" id="aa10782_html_af605dc2f9174968cb77b9d3cc50a1fb4"><div class="ttname"><a href="../../d6/d2f/a10782.html#af605dc2f9174968cb77b9d3cc50a1fb4">AuraEffect::HandlePeriodicTriggerSpellWithValueAuraTick</a></div><div class="ttdeci">void HandlePeriodicTriggerSpellWithValueAuraTick(Unit *target, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:6555</div></div>
<div class="ttc" id="aa10794_html_a3b0854e2019338fd16c9ca46e3997931"><div class="ttname"><a href="../../df/d4a/a10794.html#a3b0854e2019338fd16c9ca46e3997931">Aura::CallScriptEffectPeriodicHandlers</a></div><div class="ttdeci">bool CallScriptEffectPeriodicHandlers(AuraEffect const *aurEff, AuraApplication const *aurApp)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2483</div></div>
<div class="ttc" id="aa10898_html_a93b51808183b35049d7e5847acee0390"><div class="ttname"><a href="../../d2/db6/a10898.html#a93b51808183b35049d7e5847acee0390">SpellInfo::IsChanneled</a></div><div class="ttdeci">bool IsChanneled() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1256</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02483">Aura::CallScriptEffectPeriodicHandlers()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00109">Object::GetGUID()</a>, <a class="el" href="../../#l00337">Object::GetGuidValue()</a>, <a class="el" href="../../#l00061">AuraApplication::GetTarget()</a>, <a class="el" href="../../#l00115">ObjectAccessor::GetWorldObject()</a>, <a class="el" href="../../#l07099">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l06196">HandlePeriodicDummyAuraTick()</a>, <a class="el" href="../../#l07133">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l06849">HandlePeriodicHealthFunnelAuraTick()</a>, <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../#l07026">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../#l07167">HandlePeriodicPowerBurnAuraTick()</a>, <a class="el" href="../../#l06287">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../#l06555">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l01256">SpellInfo::IsChanneled()</a>, <a class="el" href="../../#l00161">ObjectGuid::IsEmpty()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, <a class="el" href="../../#l20517">Unit::SetInFront()</a>, <a class="el" href="../../#l00433">SPELL_ATTR1_TRACK_TARGET_IN_CHANNEL</a>, <a class="el" href="../../#l00083">SPELL_AURA_OBS_MOD_HEALTH</a>, <a class="el" href="../../#l00084">SPELL_AURA_OBS_MOD_POWER</a>, <a class="el" href="../../#l00066">SPELL_AURA_PERIODIC_DAMAGE</a>, <a class="el" href="../../#l00152">SPELL_AURA_PERIODIC_DAMAGE_PERCENT</a>, <a class="el" href="../../#l00289">SPELL_AURA_PERIODIC_DUMMY</a>, <a class="el" href="../../#l00087">SPELL_AURA_PERIODIC_ENERGIZE</a>, <a class="el" href="../../#l00071">SPELL_AURA_PERIODIC_HEAL</a>, <a class="el" href="../../#l00125">SPELL_AURA_PERIODIC_HEALTH_FUNNEL</a>, <a class="el" href="../../#l00116">SPELL_AURA_PERIODIC_LEECH</a>, <a class="el" href="../../#l00127">SPELL_AURA_PERIODIC_MANA_LEECH</a>, <a class="el" href="../../#l00086">SPELL_AURA_PERIODIC_TRIGGER_SPELL</a>, <a class="el" href="../../#l00111">SPELL_AURA_PERIODIC_TRIGGER_SPELL_FROM_CLIENT</a>, <a class="el" href="../../#l00290">SPELL_AURA_PERIODIC_TRIGGER_SPELL_WITH_VALUE</a>, <a class="el" href="../../#l00225">SPELL_AURA_POWER_BURN</a>, and <a class="el" href="../../#l00093">UNIT_FIELD_CHANNEL_OBJECT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00897">Update()</a>.</p>

</div>
</div>
<a id="adc38a016285e442a485c9b9bc17a6105" name="adc38a016285e442a485c9b9bc17a6105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc38a016285e442a485c9b9bc17a6105">&#9670;&#160;</a></span>RecalculateAmount() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::RecalculateAmount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   76</span>{ <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/d2f/a10782.html#a2322ac1aaf1bdfe21733d082603c503c">CanBeRecalculated</a>()) <span class="keywordflow">return</span>; <a class="code hl_function" href="../../d6/d2f/a10782.html#a07673908af178ffaee01353a6d11a703">ChangeAmount</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a66f8fd3fa296b59cee26c35c433e52f2">CalculateAmount</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a9ca1c0fbc142af46a5926b2d87520ee3">GetCaster</a>()), <span class="keyword">false</span>); }</div>
<div class="ttc" id="aa10782_html_a07673908af178ffaee01353a6d11a703"><div class="ttname"><a href="../../d6/d2f/a10782.html#a07673908af178ffaee01353a6d11a703">AuraEffect::ChangeAmount</a></div><div class="ttdeci">void ChangeAmount(int32 newAmount, bool mark=true, bool onStackOrReapply=false)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:708</div></div>
<div class="ttc" id="aa10782_html_a2322ac1aaf1bdfe21733d082603c503c"><div class="ttname"><a href="../../d6/d2f/a10782.html#a2322ac1aaf1bdfe21733d082603c503c">AuraEffect::CanBeRecalculated</a></div><div class="ttdeci">bool CanBeRecalculated() const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.h:78</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00078">CanBeRecalculated()</a>, <a class="el" href="../../#l00708">ChangeAmount()</a>, and <a class="el" href="../../#l00047">GetCaster()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00823">spell_dk_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00495">spell_pet_hit_expertise_scalling::HandlePeriodic()</a>, <a class="el" href="../../#l00245">spell_hun_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00296">spell_mage_pet_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00238">spell_sha_feral_spirit_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l00205">spell_warl_improved_demonic_tactics::HandlePeriodic()</a>, <a class="el" href="../../#l00274">spell_warl_demonic_knowledge::HandlePeriodic()</a>, <a class="el" href="../../#l00353">spell_warl_generic_scaling::HandlePeriodic()</a>, <a class="el" href="../../#l01232">Aura::RecalculateAmountOfEffects()</a>, and <a class="el" href="../../#l01203">Aura::SetLoadedState()</a>.</p>

</div>
</div>
<a id="a597dbfc9d3bbe964088f601528126818" name="a597dbfc9d3bbe964088f601528126818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a597dbfc9d3bbe964088f601528126818">&#9670;&#160;</a></span>RecalculateAmount() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::RecalculateAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   77</span>{ <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/d2f/a10782.html#a2322ac1aaf1bdfe21733d082603c503c">CanBeRecalculated</a>()) <span class="keywordflow">return</span>; <a class="code hl_function" href="../../d6/d2f/a10782.html#a07673908af178ffaee01353a6d11a703">ChangeAmount</a>(<a class="code hl_function" href="../../d6/d2f/a10782.html#a66f8fd3fa296b59cee26c35c433e52f2">CalculateAmount</a>(caster), <span class="keyword">false</span>); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00078">CanBeRecalculated()</a>, and <a class="el" href="../../#l00708">ChangeAmount()</a>.</p>

</div>
</div>
<a id="acc2bdb287922c879abcbab9e8a6f4fab" name="acc2bdb287922c879abcbab9e8a6f4fab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc2bdb287922c879abcbab9e8a6f4fab">&#9670;&#160;</a></span>ResetPeriodic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::ResetPeriodic </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>resetPeriodicTimer</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   89</span>{ <span class="keywordflow">if</span> (resetPeriodicTimer) <a class="code hl_variable" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> = <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>; <a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> = 0;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00143">m_amplitude</a>, <a class="el" href="../../#l00142">m_periodicTimer</a>, and <a class="el" href="../../#l00144">m_tickNumber</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l08739">Unit::HandleAuraProc()</a>.</p>

</div>
</div>
<a id="afc2f180bb606c2d4f11ae239d3293dbf" name="afc2f180bb606c2d4f11ae239d3293dbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc2f180bb606c2d4f11ae239d3293dbf">&#9670;&#160;</a></span>ResetTicks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::ResetTicks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   90</span>{ <a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> = 0; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00144">m_tickNumber</a>.</p>

</div>
</div>
<a id="a94ad6938ac754595a00f0f5a8e2019c5" name="a94ad6938ac754595a00f0f5a8e2019c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94ad6938ac754595a00f0f5a8e2019c5">&#9670;&#160;</a></span>SendTickImmune()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SendTickImmune </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1097</span>{</div>
<div class="line"><span class="lineno"> 1098</span>    <span class="keywordflow">if</span> (caster)</div>
<div class="line"><span class="lineno"> 1099</span>        caster-&gt;<a class="code hl_function" href="../../db/df9/a08518.html#a43d885100b3d51bbc5c8ba7b78cdd60c">SendSpellDamageImmune</a>(target, <a class="code hl_variable" href="../../d6/d2f/a10782.html#ac4df84854746b8de74f64e2abfec76c1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../d2/db6/a10898.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>);</div>
<div class="line"><span class="lineno"> 1100</span>}</div>
<div class="ttc" id="aa08518_html_a43d885100b3d51bbc5c8ba7b78cdd60c"><div class="ttname"><a href="../../db/df9/a08518.html#a43d885100b3d51bbc5c8ba7b78cdd60c">Unit::SendSpellDamageImmune</a></div><div class="ttdeci">void SendSpellDamageImmune(Unit *target, uint32 spellId)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:6469</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l00123">m_spellInfo</a>, and <a class="el" href="../../#l06469">Unit::SendSpellDamageImmune()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l07099">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l07133">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l06849">HandlePeriodicHealthFunnelAuraTick()</a>, <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../#l07026">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../#l07167">HandlePeriodicPowerBurnAuraTick()</a>, and <a class="el" href="../../#l07252">HandleProcTriggerDamageAuraProc()</a>.</p>

</div>
</div>
<a id="a9790b9f33c52c6d3b830dc6f56f08bf0" name="a9790b9f33c52c6d3b830dc6f56f08bf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9790b9f33c52c6d3b830dc6f56f08bf0">&#9670;&#160;</a></span>SetAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   66</span>{ <a class="code hl_variable" href="../../d6/d2f/a10782.html#a7f01908f09b465b6770f18c13e459f17">m_amount</a> = amount; <a class="code hl_variable" href="../../d6/d2f/a10782.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a> = <span class="keyword">false</span>;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00129">m_amount</a>, and <a class="el" href="../../#l00147">m_canBeRecalculated</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00842">spell_dru_savage_defense::Absorb()</a>, <a class="el" href="../../#l02147">Unit::CalcAbsorbResist()</a>, <a class="el" href="../../#l00708">ChangeAmount()</a>, <a class="el" href="../../#l01265">Aura::HandleAuraSpecificMods()</a>, <a class="el" href="../../#l06589">Unit::HandleDummyAuraProc()</a>, <a class="el" href="../../#l00139">spell_optic_link_aura::HandleEffectPeriodic()</a>, <a class="el" href="../../#l00319">spell_hallows_end_base_fire::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../#l01324">spell_gen_burn_brutallus::HandleEffectPeriodicUpdate()</a>, <a class="el" href="../../#l01231">spell_putricide_unbound_plague_dmg_aura::HandlePeriodic()</a>, <a class="el" href="../../#l00744">spell_warl_seed_of_corruption_aura::HandleProc()</a>, <a class="el" href="../../#l00803">spell_warl_seed_of_corruption_generic_aura::HandleProc()</a>, <a class="el" href="../../#l00760">spell_hun_sniper_training::HandleUpdatePeriodic()</a>, <a class="el" href="../../#l00523">spell_kalecgos_curse_of_boundless_agony_aura::OnPeriodic()</a>, <a class="el" href="../../#l01857">spell_the_lich_king_infest_aura::OnUpdate()</a>, <a class="el" href="../../#l16050">Unit::ProcDamageAndSpellFor()</a>, <a class="el" href="../../#l01203">Aura::SetLoadedState()</a>, and <a class="el" href="../../#l00353">spell_black_temple_shadow_inferno_aura::Update()</a>.</p>

</div>
</div>
<a id="af93cf68cd8854d93010663353043e4a2" name="af93cf68cd8854d93010663353043e4a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af93cf68cd8854d93010663353043e4a2">&#9670;&#160;</a></span>SetCanBeRecalculated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetCanBeRecalculated </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   79</span>{ <a class="code hl_variable" href="../../d6/d2f/a10782.html#a334378fa304471045fd273f4d845c8dd">m_canBeRecalculated</a> = val; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00147">m_canBeRecalculated</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01203">Aura::SetLoadedState()</a>.</p>

</div>
</div>
<a id="aa5fa45a022f85bfea33ae5faf843cd69" name="aa5fa45a022f85bfea33ae5faf843cd69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5fa45a022f85bfea33ae5faf843cd69">&#9670;&#160;</a></span>SetCritChance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetCritChance </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>crit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  109</span>{ <a class="code hl_variable" href="../../d6/d2f/a10782.html#af7eff5d08a22189f99f66695367ae250">m_critChance</a> = crit; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00130">m_critChance</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00578">CalculatePeriodicData()</a>.</p>

</div>
</div>
<a id="a063903240b281f490908845ef93ec68a" name="a063903240b281f490908845ef93ec68a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a063903240b281f490908845ef93ec68a">&#9670;&#160;</a></span>SetEnabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetEnabled </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  118</span>{ <a class="code hl_variable" href="../../d6/d2f/a10782.html#acec00491f0ec7f7c68d6a25d85b5b53f">m_isAuraEnabled</a> = enabled; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00136">m_isAuraEnabled</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00161">AuraApplication::_HandleEffect()</a>.</p>

</div>
</div>
<a id="a04d3cc9ebda15ebf8f10650864d0724a" name="a04d3cc9ebda15ebf8f10650864d0724a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04d3cc9ebda15ebf8f10650864d0724a">&#9670;&#160;</a></span>SetOldAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetOldAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  117</span>{ <a class="code hl_variable" href="../../d6/d2f/a10782.html#a5fa9f61c77274c75e6f3d8222142ab4e">m_oldAmount</a> = amount; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00135">m_oldAmount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00452">CalculateAmount()</a>.</p>

</div>
</div>
<a id="a8b39616fd9d0543194c9d6dbec186f55" name="a8b39616fd9d0543194c9d6dbec186f55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b39616fd9d0543194c9d6dbec186f55">&#9670;&#160;</a></span>SetPeriodic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetPeriodic </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isPeriodic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   93</span>{ <a class="code hl_variable" href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> = isPeriodic; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00148">m_isPeriodic</a>.</p>

</div>
</div>
<a id="abc3f0fbe56a3974699db0056eed45664" name="abc3f0fbe56a3974699db0056eed45664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc3f0fbe56a3974699db0056eed45664">&#9670;&#160;</a></span>SetPeriodicTimer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::SetPeriodicTimer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td>
          <td class="paramname"><em>periodicTimer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   69</span>{ <a class="code hl_variable" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> = periodicTimer; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00142">m_periodicTimer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01243">spell_dreamwalker_decay_periodic_timer_aura::DecayPeriodicTimer()</a>, <a class="el" href="../../#l00221">spell_muru_summon_blood_elves_periodic_aura::HandleApply()</a>, <a class="el" href="../../#l00789">spell_gen_baby_murloc_passive::HandleApply()</a>, <a class="el" href="../../#l00794">spell_gen_baby_murloc_passive::HandlePeriodicTimer()</a>, <a class="el" href="../../#l00354">spell_hadronox_summon_periodic_aura::OnApply()</a>, and <a class="el" href="../../#l00211">spell_item_goblin_gumbo_kettle::Update()</a>.</p>

</div>
</div>
<a id="a1e57c07b017695d76137b0d81074df1e" name="a1e57c07b017695d76137b0d81074df1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e57c07b017695d76137b0d81074df1e">&#9670;&#160;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::Update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>diff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  898</span>{</div>
<div class="line"><span class="lineno">  899</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> &amp;&amp; (<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetDuration() &gt;= 0 || <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;IsPassive() || <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;IsPermanent()))</div>
<div class="line"><span class="lineno">  900</span>    {</div>
<div class="line"><span class="lineno">  901</span>        <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> totalTicks = <a class="code hl_function" href="../../d6/d2f/a10782.html#a67ca18798f448847e77665752fa4a32c">GetTotalTicks</a>();</div>
<div class="line"><span class="lineno">  902</span> </div>
<div class="line"><span class="lineno">  903</span>        <a class="code hl_variable" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> -= <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>(diff);</div>
<div class="line"><span class="lineno">  904</span>        <span class="keywordflow">while</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> &lt;= 0)</div>
<div class="line"><span class="lineno">  905</span>        {</div>
<div class="line"><span class="lineno">  906</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;IsPermanent() &amp;&amp; (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a> + 1) &gt; totalTicks)</div>
<div class="line"><span class="lineno">  907</span>            {</div>
<div class="line"><span class="lineno">  908</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  909</span>            }</div>
<div class="line"><span class="lineno">  910</span> </div>
<div class="line"><span class="lineno">  911</span>            ++<a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a>;</div>
<div class="line"><span class="lineno">  912</span> </div>
<div class="line"><span class="lineno">  913</span>            <span class="comment">// update before tick (aura can be removed in TriggerSpell or PeriodicTick calls)</span></div>
<div class="line"><span class="lineno">  914</span>            <a class="code hl_variable" href="../../d6/d2f/a10782.html#a2d9b475cbf04d8597953802e1accc938">m_periodicTimer</a> += <a class="code hl_variable" href="../../d6/d2f/a10782.html#a9b7657d41ca8a463e12dca94fffdddbc">m_amplitude</a>;</div>
<div class="line"><span class="lineno">  915</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#afebebaa8f9f33d8354d624561c34b461">UpdatePeriodic</a>(caster);</div>
<div class="line"><span class="lineno">  916</span> </div>
<div class="line"><span class="lineno">  917</span>            std::list&lt;AuraApplication*&gt; effectApplications;</div>
<div class="line"><span class="lineno">  918</span>            <a class="code hl_function" href="../../d6/d2f/a10782.html#a3ea63ccc256382991e0802842f69e44f">GetApplicationList</a>(effectApplications);</div>
<div class="line"><span class="lineno">  919</span>            <span class="comment">// tick on targets of effects</span></div>
<div class="line"><span class="lineno">  920</span>            <span class="keywordflow">for</span> (std::list&lt;AuraApplication*&gt;::const_iterator apptItr = effectApplications.begin(); apptItr != effectApplications.end(); ++apptItr)</div>
<div class="line"><span class="lineno">  921</span>                <span class="keywordflow">if</span> ((*apptItr)-&gt;HasEffect(<a class="code hl_function" href="../../d6/d2f/a10782.html#ab8c4811ced24cbd9b4afff1c22fbb1b0">GetEffIndex</a>()))</div>
<div class="line"><span class="lineno">  922</span>                    <a class="code hl_function" href="../../d6/d2f/a10782.html#af498cc64849486b0001f558da9c5c9ef">PeriodicTick</a>(*apptItr, caster);</div>
<div class="line"><span class="lineno">  923</span>        }</div>
<div class="line"><span class="lineno">  924</span>    }</div>
<div class="line"><span class="lineno">  925</span>}</div>
<div class="ttc" id="aa10782_html_af498cc64849486b0001f558da9c5c9ef"><div class="ttname"><a href="../../d6/d2f/a10782.html#af498cc64849486b0001f558da9c5c9ef">AuraEffect::PeriodicTick</a></div><div class="ttdeci">void PeriodicTick(AuraApplication *aurApp, Unit *caster) const</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:1102</div></div>
<div class="ttc" id="aa10782_html_afebebaa8f9f33d8354d624561c34b461"><div class="ttname"><a href="../../d6/d2f/a10782.html#afebebaa8f9f33d8354d624561c34b461">AuraEffect::UpdatePeriodic</a></div><div class="ttdeci">void UpdatePeriodic(Unit *caster)</div><div class="ttdef"><b>Definition:</b> SpellAuraEffects.cpp:927</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00422">GetApplicationList()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l07365">GetTotalTicks()</a>, <a class="el" href="../../#l00143">m_amplitude</a>, <a class="el" href="../../#l00148">m_isPeriodic</a>, <a class="el" href="../../#l00142">m_periodicTimer</a>, <a class="el" href="../../#l00144">m_tickNumber</a>, <a class="el" href="../../#l01102">PeriodicTick()</a>, and <a class="el" href="../../#l00927">UpdatePeriodic()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00756">Aura::UpdateOwner()</a>.</p>

</div>
</div>
<a id="afebebaa8f9f33d8354d624561c34b461" name="afebebaa8f9f33d8354d624561c34b461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afebebaa8f9f33d8354d624561c34b461">&#9670;&#160;</a></span>UpdatePeriodic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AuraEffect::UpdatePeriodic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  928</span>{</div>
<div class="line"><span class="lineno">  929</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a120cf8a45a3c816e4ef588733fa812e5">GetAuraType</a>())</div>
<div class="line"><span class="lineno">  930</span>    {</div>
<div class="line"><span class="lineno">  931</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799add498157825d0faca2c013bbcdfbae56">SPELL_AURA_PERIODIC_DUMMY</a>:</div>
<div class="line"><span class="lineno">  932</span>            <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a1004d58d71df9a9b603d217ebca51321">GetSpellInfo</a>()-&gt;SpellFamilyName)</div>
<div class="line"><span class="lineno">  933</span>            {</div>
<div class="line"><span class="lineno">  934</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a9264ae6b0ef1b61a6eeb7fdac9fbab1ba0ebbb6206eb92cdc484b416eb6f41743">SPELLFAMILY_GENERIC</a>:</div>
<div class="line"><span class="lineno">  935</span>                    <span class="keywordflow">switch</span> (<a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>())</div>
<div class="line"><span class="lineno">  936</span>                    {</div>
<div class="line"><span class="lineno">  937</span>                        <span class="comment">// Drink</span></div>
<div class="line"><span class="lineno">  938</span>                        <span class="keywordflow">case</span> 430:</div>
<div class="line"><span class="lineno">  939</span>                        <span class="keywordflow">case</span> 431:</div>
<div class="line"><span class="lineno">  940</span>                        <span class="keywordflow">case</span> 432:</div>
<div class="line"><span class="lineno">  941</span>                        <span class="keywordflow">case</span> 1133:</div>
<div class="line"><span class="lineno">  942</span>                        <span class="keywordflow">case</span> 1135:</div>
<div class="line"><span class="lineno">  943</span>                        <span class="keywordflow">case</span> 1137:</div>
<div class="line"><span class="lineno">  944</span>                        <span class="keywordflow">case</span> 10250:</div>
<div class="line"><span class="lineno">  945</span>                        <span class="keywordflow">case</span> 22734:</div>
<div class="line"><span class="lineno">  946</span>                        <span class="keywordflow">case</span> 27089:</div>
<div class="line"><span class="lineno">  947</span>                        <span class="keywordflow">case</span> 34291:</div>
<div class="line"><span class="lineno">  948</span>                        <span class="keywordflow">case</span> 43182:</div>
<div class="line"><span class="lineno">  949</span>                        <span class="keywordflow">case</span> 43183:</div>
<div class="line"><span class="lineno">  950</span>                        <span class="keywordflow">case</span> 46755:</div>
<div class="line"><span class="lineno">  951</span>                        <span class="keywordflow">case</span> 49472: <span class="comment">// Drink Coffee</span></div>
<div class="line"><span class="lineno">  952</span>                        <span class="keywordflow">case</span> 57073:</div>
<div class="line"><span class="lineno">  953</span>                        <span class="keywordflow">case</span> 61830:</div>
<div class="line"><span class="lineno">  954</span>                            <span class="keywordflow">if</span> (!caster || !caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno">  955</span>                                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  956</span>                            <span class="comment">// Get SPELL_AURA_MOD_POWER_REGEN aura from spell</span></div>
<div class="line"><span class="lineno">  957</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* aurEff = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetEffect(0))</div>
<div class="line"><span class="lineno">  958</span>                            {</div>
<div class="line"><span class="lineno">  959</span>                                <span class="keywordflow">if</span> (aurEff-&gt;GetAuraType() != <a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a46b15fd937d6f84e680507c7dd110c2c">SPELL_AURA_MOD_POWER_REGEN</a>)</div>
<div class="line"><span class="lineno">  960</span>                                {</div>
<div class="line"><span class="lineno">  961</span>                                    <a class="code hl_variable" href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  962</span>                                    <a class="code hl_define" href="../../d4/d8c/a00035.html#a43832e3fa8508deb4ce43e520005fcd9">LOG_ERROR</a>(<span class="stringliteral">&quot;spells.aura.effect&quot;</span>, <span class="stringliteral">&quot;Aura {} structure has been changed - first aura is no longer SPELL_AURA_MOD_POWER_REGEN&quot;</span>, <a class="code hl_function" href="../../d6/d2f/a10782.html#a63863fb01a8cf08251c0b4482be6a20f">GetId</a>());</div>
<div class="line"><span class="lineno">  963</span>                                }</div>
<div class="line"><span class="lineno">  964</span>                                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  965</span>                                {</div>
<div class="line"><span class="lineno">  966</span>                                    <span class="comment">// default case - not in arena</span></div>
<div class="line"><span class="lineno">  967</span>                                    <span class="keywordflow">if</span> (!caster-&gt;<a class="code hl_function" href="../../df/d2d/a08142.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d0/dc6/a08386.html#ad08f358cbaa67f340fb1d50b756cc446">InArena</a>())</div>
<div class="line"><span class="lineno">  968</span>                                    {</div>
<div class="line"><span class="lineno">  969</span>                                        aurEff-&gt;ChangeAmount(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno">  970</span>                                        <a class="code hl_variable" href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  971</span>                                    }</div>
<div class="line"><span class="lineno">  972</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  973</span>                                    {</div>
<div class="line"><span class="lineno">  974</span>                                        <span class="comment">// **********************************************</span></div>
<div class="line"><span class="lineno">  975</span>                                        <span class="comment">// This feature uses only in arenas</span></div>
<div class="line"><span class="lineno">  976</span>                                        <span class="comment">// **********************************************</span></div>
<div class="line"><span class="lineno">  977</span>                                        <span class="comment">// Here need increase mana regen per tick (6 second rule)</span></div>
<div class="line"><span class="lineno">  978</span>                                        <span class="comment">// on 0 tick -   0  (handled in 2 second)</span></div>
<div class="line"><span class="lineno">  979</span>                                        <span class="comment">// on 1 tick - 166% (handled in 4 second)</span></div>
<div class="line"><span class="lineno">  980</span>                                        <span class="comment">// on 2 tick - 133% (handled in 6 second)</span></div>
<div class="line"><span class="lineno">  981</span> </div>
<div class="line"><span class="lineno">  982</span>                                        <span class="comment">// Apply bonus for 1 - 4 tick</span></div>
<div class="line"><span class="lineno">  983</span>                                        <span class="keywordflow">switch</span> (<a class="code hl_variable" href="../../d6/d2f/a10782.html#ab8c7fb50eac3482a162cbbacd64f1625">m_tickNumber</a>)</div>
<div class="line"><span class="lineno">  984</span>                                        {</div>
<div class="line"><span class="lineno">  985</span>                                            <span class="keywordflow">case</span> 1:   <span class="comment">// 0%</span></div>
<div class="line"><span class="lineno">  986</span>                                                aurEff-&gt;ChangeAmount(0);</div>
<div class="line"><span class="lineno">  987</span>                                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  988</span>                                            <span class="keywordflow">case</span> 2:   <span class="comment">// 166%</span></div>
<div class="line"><span class="lineno">  989</span>                                                aurEff-&gt;ChangeAmount(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() * 5 / 3);</div>
<div class="line"><span class="lineno">  990</span>                                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  991</span>                                            <span class="keywordflow">case</span> 3:   <span class="comment">// 133%</span></div>
<div class="line"><span class="lineno">  992</span>                                                aurEff-&gt;ChangeAmount(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>() * 4 / 3);</div>
<div class="line"><span class="lineno">  993</span>                                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  994</span>                                            <span class="keywordflow">default</span>:  <span class="comment">// 100% - normal regen</span></div>
<div class="line"><span class="lineno">  995</span>                                                aurEff-&gt;ChangeAmount(<a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>());</div>
<div class="line"><span class="lineno">  996</span>                                                <span class="comment">// No need to update after 4th tick</span></div>
<div class="line"><span class="lineno">  997</span>                                                <a class="code hl_variable" href="../../d6/d2f/a10782.html#ad6931b2764b92bc6c2a20b092c011f0a">m_isPeriodic</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  998</span>                                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  999</span>                                        }</div>
<div class="line"><span class="lineno"> 1000</span>                                    }</div>
<div class="line"><span class="lineno"> 1001</span>                                }</div>
<div class="line"><span class="lineno"> 1002</span>                            }</div>
<div class="line"><span class="lineno"> 1003</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1004</span>                        <span class="keywordflow">case</span> 58549: <span class="comment">// Tenacity</span></div>
<div class="line"><span class="lineno"> 1005</span>                        <span class="keywordflow">case</span> 59911: <span class="comment">// Tenacity (vehicle)</span></div>
<div class="line"><span class="lineno"> 1006</span>                            <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#a2f108f33766c253a827d41c2f3fdc45e">RefreshDuration</a>();</div>
<div class="line"><span class="lineno"> 1007</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1008</span>                        <span class="keywordflow">case</span> 66823:</div>
<div class="line"><span class="lineno"> 1009</span>                        <span class="keywordflow">case</span> 67618:</div>
<div class="line"><span class="lineno"> 1010</span>                        <span class="keywordflow">case</span> 67619:</div>
<div class="line"><span class="lineno"> 1011</span>                        <span class="keywordflow">case</span> 67620: <span class="comment">// Paralytic Toxin</span></div>
<div class="line"><span class="lineno"> 1012</span>                            <span class="comment">// Get 0 effect aura</span></div>
<div class="line"><span class="lineno"> 1013</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* slow = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetEffect(0))</div>
<div class="line"><span class="lineno"> 1014</span>                            {</div>
<div class="line"><span class="lineno"> 1015</span>                                <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> newAmount = slow-&gt;GetAmount() - 10;</div>
<div class="line"><span class="lineno"> 1016</span>                                <span class="keywordflow">if</span> (newAmount &lt; -100)</div>
<div class="line"><span class="lineno"> 1017</span>                                    newAmount = -100;</div>
<div class="line"><span class="lineno"> 1018</span>                                slow-&gt;ChangeAmount(newAmount);</div>
<div class="line"><span class="lineno"> 1019</span>                            }</div>
<div class="line"><span class="lineno"> 1020</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1021</span>                        <span class="keywordflow">case</span> 66020:</div>
<div class="line"><span class="lineno"> 1022</span>                            <span class="comment">// Get 0 effect aura</span></div>
<div class="line"><span class="lineno"> 1023</span>                            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/d2f/a10782.html">AuraEffect</a>* slow = <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;GetEffect(0))</div>
<div class="line"><span class="lineno"> 1024</span>                            {</div>
<div class="line"><span class="lineno"> 1025</span>                                <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> newAmount = slow-&gt;GetAmount() + <a class="code hl_function" href="../../d6/d2f/a10782.html#afcf272bebf373ad3aebc03cce644cbee">GetAmount</a>();</div>
<div class="line"><span class="lineno"> 1026</span>                                <span class="keywordflow">if</span> (newAmount &gt; 0)</div>
<div class="line"><span class="lineno"> 1027</span>                                    newAmount = 0;</div>
<div class="line"><span class="lineno"> 1028</span>                                slow-&gt;ChangeAmount(newAmount);</div>
<div class="line"><span class="lineno"> 1029</span>                            }</div>
<div class="line"><span class="lineno"> 1030</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1031</span>                        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1032</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1033</span>                    }</div>
<div class="line"><span class="lineno"> 1034</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1035</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1036</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1037</span>            }</div>
<div class="line"><span class="lineno"> 1038</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1039</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1040</span>    }</div>
<div class="line"><span class="lineno"> 1041</span>    <a class="code hl_function" href="../../d6/d2f/a10782.html#ab288b290ebc452f0b03c7d79be1efc52">GetBase</a>()-&gt;<a class="code hl_function" href="../../df/d4a/a10794.html#adac81f948f034942046b45a94fea365f">CallScriptEffectUpdatePeriodicHandlers</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno"> 1042</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a46b15fd937d6f84e680507c7dd110c2c"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a46b15fd937d6f84e680507c7dd110c2c">SPELL_AURA_MOD_POWER_REGEN</a></div><div class="ttdeci">@ SPELL_AURA_MOD_POWER_REGEN</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:148</div></div>
<div class="ttc" id="aa08386_html_ad08f358cbaa67f340fb1d50b756cc446"><div class="ttname"><a href="../../d0/dc6/a08386.html#ad08f358cbaa67f340fb1d50b756cc446">Player::InArena</a></div><div class="ttdeci">bool InArena() const</div><div class="ttdef"><b>Definition:</b> Player.cpp:12304</div></div>
<div class="ttc" id="aa10794_html_a2f108f33766c253a827d41c2f3fdc45e"><div class="ttname"><a href="../../df/d4a/a10794.html#a2f108f33766c253a827d41c2f3fdc45e">Aura::RefreshDuration</a></div><div class="ttdeci">void RefreshDuration(bool withMods=false)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:880</div></div>
<div class="ttc" id="aa10794_html_adac81f948f034942046b45a94fea365f"><div class="ttname"><a href="../../df/d4a/a10794.html#adac81f948f034942046b45a94fea365f">Aura::CallScriptEffectUpdatePeriodicHandlers</a></div><div class="ttdeci">void CallScriptEffectUpdatePeriodicHandlers(AuraEffect *aurEff)</div><div class="ttdef"><b>Definition:</b> SpellAuras.cpp:2503</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02503">Aura::CallScriptEffectUpdatePeriodicHandlers()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00049">GetBase()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l12304">Player::InArena()</a>, <a class="el" href="../../#l00197">Object::IsPlayer()</a>, <a class="el" href="../../#l00157">LOG_ERROR</a>, <a class="el" href="../../#l00148">m_isPeriodic</a>, <a class="el" href="../../#l00144">m_tickNumber</a>, <a class="el" href="../../#l00880">Aura::RefreshDuration()</a>, <a class="el" href="../../#l00148">SPELL_AURA_MOD_POWER_REGEN</a>, <a class="el" href="../../#l00289">SPELL_AURA_PERIODIC_DUMMY</a>, <a class="el" href="../../#l03528">SPELLFAMILY_GENERIC</a>, and <a class="el" href="../../#l00198">Object::ToPlayer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00897">Update()</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a80ab74fb057cffbba01f0b5bd038ccf2" name="a80ab74fb057cffbba01f0b5bd038ccf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80ab74fb057cffbba01f0b5bd038ccf2">&#9670;&#160;</a></span>Aura::_InitEffects</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/d4a/a10794.html#ab477124f94af36e9be706451dce791f7">Aura::_InitEffects</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>effMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>baseAmount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a851e18dcd4b806db1cd3843a7814d15a" name="a851e18dcd4b806db1cd3843a7814d15a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a851e18dcd4b806db1cd3843a7814d15a">&#9670;&#160;</a></span>Unit::_TryStackingOrRefreshingExistingAura</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/d4a/a10794.html">Aura</a> * <a class="el" href="../../db/df9/a08518.html#a9f63d861cbd0113802b941275e90208c">Unit::_TryStackingOrRefreshingExistingAura</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/db6/a10898.html">SpellInfo</a> const *&#160;</td>
          <td class="paramname"><em>newAura</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a>&#160;</td>
          <td class="paramname"><em>effMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/df9/a08518.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> *&#160;</td>
          <td class="paramname"><em>baseAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d24/a08098.html">Item</a> *&#160;</td>
          <td class="paramname"><em>castItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d40/a08190.html">ObjectGuid</a>&#160;</td>
          <td class="paramname"><em>casterGUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>noPeriodicReset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7f01908f09b465b6770f18c13e459f17" name="a7f01908f09b465b6770f18c13e459f17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f01908f09b465b6770f18c13e459f17">&#9670;&#160;</a></span>m_amount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::m_amount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00383">AuraEffect()</a>, <a class="el" href="../../#l00708">ChangeAmount()</a>, <a class="el" href="../../#l00064">GetAmount()</a>, <a class="el" href="../../#l00065">GetForcedAmount()</a>, <a class="el" href="../../#l03649">HandleAuraControlVehicle()</a>, <a class="el" href="../../#l06019">HandleAuraConvertRune()</a>, <a class="el" href="../../#l06053">HandleAuraLinked()</a>, <a class="el" href="../../#l05853">HandleChannelDeathItem()</a>, <a class="el" href="../../#l05939">HandleForceReaction()</a>, <a class="el" href="../../#l04454">HandleModPercentStat()</a>, <a class="el" href="../../#l07099">HandleObsModPowerAuraTick()</a>, <a class="el" href="../../#l06196">HandlePeriodicDummyAuraTick()</a>, <a class="el" href="../../#l07133">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l07026">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../#l07167">HandlePeriodicPowerBurnAuraTick()</a>, <a class="el" href="../../#l06287">HandlePeriodicTriggerSpellAuraTick()</a>, and <a class="el" href="../../#l00066">SetAmount()</a>.</p>

</div>
</div>
<a id="a9b7657d41ca8a463e12dca94fffdddbc" name="a9b7657d41ca8a463e12dca94fffdddbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b7657d41ca8a463e12dca94fffdddbc">&#9670;&#160;</a></span>m_amplitude</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::m_amplitude</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00593">CalculatePeriodic()</a>, <a class="el" href="../../#l00059">GetAmplitude()</a>, <a class="el" href="../../#l07365">GetTotalTicks()</a>, <a class="el" href="../../#l00089">ResetPeriodic()</a>, and <a class="el" href="../../#l00897">Update()</a>.</p>

</div>
</div>
<a id="a4745b52e662a6dd92ec3b566ef7ca297" name="a4745b52e662a6dd92ec3b566ef7ca297"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4745b52e662a6dd92ec3b566ef7ca297">&#9670;&#160;</a></span>m_applyResilience</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AuraEffect::m_applyResilience</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00383">AuraEffect()</a>, and <a class="el" href="../../#l00111">CanApplyResilience()</a>.</p>

</div>
</div>
<a id="ada78fc2515cb55583bf83667e475c7fe" name="ada78fc2515cb55583bf83667e475c7fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada78fc2515cb55583bf83667e475c7fe">&#9670;&#160;</a></span>m_auraGroup</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::m_auraGroup</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00383">AuraEffect()</a>, and <a class="el" href="../../#l00115">GetAuraGroup()</a>.</p>

</div>
</div>
<a id="aff934af743b5031d558ffc9a4b55d6de" name="aff934af743b5031d558ffc9a4b55d6de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff934af743b5031d558ffc9a4b55d6de">&#9670;&#160;</a></span>m_base</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/d4a/a10794.html">Aura</a>* const AuraEffect::m_base</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00049">GetBase()</a>.</p>

</div>
</div>
<a id="aba194c9071a1b0551768b397abc9ebeb" name="aba194c9071a1b0551768b397abc9ebeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba194c9071a1b0551768b397abc9ebeb">&#9670;&#160;</a></span>m_baseAmount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> const AuraEffect::m_baseAmount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00057">GetBaseAmount()</a>, and <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>.</p>

</div>
</div>
<a id="a334378fa304471045fd273f4d845c8dd" name="a334378fa304471045fd273f4d845c8dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a334378fa304471045fd273f4d845c8dd">&#9670;&#160;</a></span>m_canBeRecalculated</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AuraEffect::m_canBeRecalculated</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00078">CanBeRecalculated()</a>, <a class="el" href="../../#l00066">SetAmount()</a>, and <a class="el" href="../../#l00079">SetCanBeRecalculated()</a>.</p>

</div>
</div>
<a id="a3f9c2c6496be1ffad249825f86074def" name="a3f9c2c6496be1ffad249825f86074def"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f9c2c6496be1ffad249825f86074def">&#9670;&#160;</a></span>m_casterLevel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> AuraEffect::m_casterLevel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00383">AuraEffect()</a>, and <a class="el" href="../../#l00110">GetCasterLevel()</a>.</p>

</div>
</div>
<a id="a256fe55e1c441e5dcc7c33abb4222e69" name="a256fe55e1c441e5dcc7c33abb4222e69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256fe55e1c441e5dcc7c33abb4222e69">&#9670;&#160;</a></span>m_channelData</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d67/a10822.html">ChannelTargetData</a>* AuraEffect::m_channelData</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00383">AuraEffect()</a>, <a class="el" href="../../#l06287">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../#l06555">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, and <a class="el" href="../../#l00405">~AuraEffect()</a>.</p>

</div>
</div>
<a id="af7eff5d08a22189f99f66695367ae250" name="af7eff5d08a22189f99f66695367ae250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7eff5d08a22189f99f66695367ae250">&#9670;&#160;</a></span>m_critChance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float AuraEffect::m_critChance</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00108">GetCritChance()</a>, and <a class="el" href="../../#l00109">SetCritChance()</a>.</p>

</div>
</div>
<a id="aea3300db680ab47876dbc7ae45c08d18" name="aea3300db680ab47876dbc7ae45c08d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea3300db680ab47876dbc7ae45c08d18">&#9670;&#160;</a></span>m_dieSides</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> const AuraEffect::m_dieSides</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00058">GetDieSides()</a>.</p>

</div>
</div>
<a id="a355d61580194626ea54b22ff9a3ac96a" name="a355d61580194626ea54b22ff9a3ac96a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a355d61580194626ea54b22ff9a3ac96a">&#9670;&#160;</a></span>m_effIndex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> const AuraEffect::m_effIndex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00593">CalculatePeriodic()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00056">GetEffIndex()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00437">GetMiscValueB()</a>, <a class="el" href="../../#l05409">HandleAuraDummy()</a>, <a class="el" href="../../#l06053">HandleAuraLinked()</a>, <a class="el" href="../../#l05853">HandleChannelDeathItem()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../#l06555">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../#l07231">HandleProcTriggerSpellWithValueAuraProc()</a>, <a class="el" href="../../#l01091">HasSpellClassMask()</a>, and <a class="el" href="../../#l01077">IsAffectedOnSpell()</a>.</p>

</div>
</div>
<a id="acec00491f0ec7f7c68d6a25d85b5b53f" name="acec00491f0ec7f7c68d6a25d85b5b53f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acec00491f0ec7f7c68d6a25d85b5b53f">&#9670;&#160;</a></span>m_isAuraEnabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AuraEffect::m_isAuraEnabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00064">GetAmount()</a>, and <a class="el" href="../../#l00118">SetEnabled()</a>.</p>

</div>
</div>
<a id="ad6931b2764b92bc6c2a20b092c011f0a" name="ad6931b2764b92bc6c2a20b092c011f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6931b2764b92bc6c2a20b092c011f0a">&#9670;&#160;</a></span>m_isPeriodic</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AuraEffect::m_isPeriodic</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00593">CalculatePeriodic()</a>, <a class="el" href="../../#l00092">IsPeriodic()</a>, <a class="el" href="../../#l00093">SetPeriodic()</a>, <a class="el" href="../../#l00897">Update()</a>, and <a class="el" href="../../#l00927">UpdatePeriodic()</a>.</p>

</div>
</div>
<a id="a5fa9f61c77274c75e6f3d8222142ab4e" name="a5fa9f61c77274c75e6f3d8222142ab4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fa9f61c77274c75e6f3d8222142ab4e">&#9670;&#160;</a></span>m_oldAmount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::m_oldAmount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00116">GetOldAmount()</a>, and <a class="el" href="../../#l00117">SetOldAmount()</a>.</p>

</div>
</div>
<a id="a8e00da47192a4d1c9139b037d07d565b" name="a8e00da47192a4d1c9139b037d07d565b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e00da47192a4d1c9139b037d07d565b">&#9670;&#160;</a></span>m_pctMods</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float AuraEffect::m_pctMods</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00578">CalculatePeriodicData()</a>, and <a class="el" href="../../#l00112">GetPctMods()</a>.</p>

</div>
</div>
<a id="a2d9b475cbf04d8597953802e1accc938" name="a2d9b475cbf04d8597953802e1accc938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d9b475cbf04d8597953802e1accc938">&#9670;&#160;</a></span>m_periodicTimer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> AuraEffect::m_periodicTimer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00593">CalculatePeriodic()</a>, <a class="el" href="../../#l00068">GetPeriodicTimer()</a>, <a class="el" href="../../#l00089">ResetPeriodic()</a>, <a class="el" href="../../#l00069">SetPeriodicTimer()</a>, and <a class="el" href="../../#l00897">Update()</a>.</p>

</div>
</div>
<a id="ac4df84854746b8de74f64e2abfec76c1" name="ac4df84854746b8de74f64e2abfec76c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4df84854746b8de74f64e2abfec76c1">&#9670;&#160;</a></span>m_spellInfo</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db6/a10898.html">SpellInfo</a> const* const AuraEffect::m_spellInfo</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00452">CalculateAmount()</a>, <a class="el" href="../../#l00593">CalculatePeriodic()</a>, <a class="el" href="../../#l00578">CalculatePeriodicData()</a>, <a class="el" href="../../#l01199">CleanupTriggeredSpells()</a>, <a class="el" href="../../#l00447">GetAuraType()</a>, <a class="el" href="../../#l00432">GetId()</a>, <a class="el" href="../../#l00442">GetMiscValue()</a>, <a class="el" href="../../#l00437">GetMiscValueB()</a>, <a class="el" href="../../#l00054">GetSpellInfo()</a>, <a class="el" href="../../#l07365">GetTotalTicks()</a>, <a class="el" href="../../#l05409">HandleAuraDummy()</a>, <a class="el" href="../../#l06053">HandleAuraLinked()</a>, <a class="el" href="../../#l04296">HandleAuraModDispelImmunity()</a>, <a class="el" href="../../#l01862">HandleAuraModShapeshift()</a>, <a class="el" href="../../#l05913">HandleFarSight()</a>, <a class="el" href="../../#l04552">HandleModTotalPercentStat()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l07133">HandlePeriodicEnergizeAuraTick()</a>, <a class="el" href="../../#l06878">HandlePeriodicHealAurasTick()</a>, <a class="el" href="../../#l06743">HandlePeriodicHealthLeechAuraTick()</a>, <a class="el" href="../../#l07026">HandlePeriodicManaLeechAuraTick()</a>, <a class="el" href="../../#l06287">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../#l06555">HandlePeriodicTriggerSpellWithValueAuraTick()</a>, <a class="el" href="../../#l01091">HasSpellClassMask()</a>, <a class="el" href="../../#l01077">IsAffectedOnSpell()</a>, <a class="el" href="../../#l01102">PeriodicTick()</a>, and <a class="el" href="../../#l01096">SendTickImmune()</a>.</p>

</div>
</div>
<a id="a25ce25c5ff12969bd62d0547c48b5753" name="a25ce25c5ff12969bd62d0547c48b5753"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25ce25c5ff12969bd62d0547c48b5753">&#9670;&#160;</a></span>m_spellmod</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/da7/a08290.html">SpellModifier</a>* AuraEffect::m_spellmod</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00799">ApplySpellMod()</a>, <a class="el" href="../../#l00684">CalculateSpellMod()</a>, <a class="el" href="../../#l00052">GetSpellModifier()</a>, and <a class="el" href="../../#l00405">~AuraEffect()</a>.</p>

</div>
</div>
<a id="ab8c7fb50eac3482a162cbbacd64f1625" name="ab8c7fb50eac3482a162cbbacd64f1625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8c7fb50eac3482a162cbbacd64f1625">&#9670;&#160;</a></span>m_tickNumber</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> AuraEffect::m_tickNumber</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00593">CalculatePeriodic()</a>, <a class="el" href="../../#l00087">GetTickNumber()</a>, <a class="el" href="../../#l06589">HandlePeriodicDamageAurasTick()</a>, <a class="el" href="../../#l06287">HandlePeriodicTriggerSpellAuraTick()</a>, <a class="el" href="../../#l00089">ResetPeriodic()</a>, <a class="el" href="../../#l00090">ResetTicks()</a>, <a class="el" href="../../#l00897">Update()</a>, and <a class="el" href="../../#l00927">UpdatePeriodic()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d6/d2f/a10782.html">AuraEffect</a></li>
    <li class="footer">Generated on Mon Nov 18 2024 20:41:33 for AzerothCore by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
