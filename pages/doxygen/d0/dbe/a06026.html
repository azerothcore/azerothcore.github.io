<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AzerothCore: PetAI Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AzerothCore<span id="projectnumber">&#160;3.3.5a</span>
   </div>
   <div id="projectbrief">OpenSource WoW Emulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d0/dbe/a06026.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../dd/d51/a06023.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">PetAI Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &quot;<a class="el" href="../../">PetAI.h</a>&quot;</code></p>
<div class="dynheader">
Inheritance diagram for PetAI:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d0/dbe/a06026.png" usemap="#PetAI_map" alt=""/>
  <map id="PetAI_map" name="PetAI_map">
<area href="../../dc/d36/a06074.html" alt="CreatureAI" shape="rect" coords="0,56,157,80"/>
<area href="../../d9/de2/a06062.html" alt="UnitAI" shape="rect" coords="0,0,157,24"/>
<area href="../../dc/d8e/a24102.html" alt="npc_pet_pri_shadowfiend" shape="rect" coords="0,168,157,192"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9fd8e152cff0c7604c16c9e9549c257a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a9fd8e152cff0c7604c16c9e9549c257a">PetAI</a> (<a class="el" href="../../df/d49/a07778.html">Creature</a> *c)</td></tr>
<tr class="separator:a9fd8e152cff0c7604c16c9e9549c257a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea55a7701940e23f90b68fd43a6367ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#aea55a7701940e23f90b68fd43a6367ff">UpdateAI</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>) override</td></tr>
<tr class="memdesc:aea55a7701940e23f90b68fd43a6367ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use to start attacking a target. Called just before <a class="el" href="../../dc/d36/a06074.html#a15f691c9137273cd5c3d5ba6f0762300" title="Called for reaction when initially engaged.">JustEngagedWith()</a>  <a href="../../d0/dbe/a06026.html#aea55a7701940e23f90b68fd43a6367ff">More...</a><br /></td></tr>
<tr class="separator:aea55a7701940e23f90b68fd43a6367ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8163d14de6e317393ecdbfeb2e1d24b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#ac8163d14de6e317393ecdbfeb2e1d24b">KilledUnit</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *) override</td></tr>
<tr class="separator:ac8163d14de6e317393ecdbfeb2e1d24b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b6e07ca92d367bcd3e3d27bf6e5cc9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a2b6e07ca92d367bcd3e3d27bf6e5cc9b">AttackStart</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *target) override</td></tr>
<tr class="separator:a2b6e07ca92d367bcd3e3d27bf6e5cc9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85d9d8d91c784c81473360bba6159722"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a85d9d8d91c784c81473360bba6159722">MovementInform</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> moveType, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> data) override</td></tr>
<tr class="separator:a85d9d8d91c784c81473360bba6159722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fc49263e5d964bf79c6a5fe14d87721"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a1fc49263e5d964bf79c6a5fe14d87721">OwnerAttackedBy</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *attacker) override</td></tr>
<tr class="separator:a1fc49263e5d964bf79c6a5fe14d87721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c06c119e98937f84a0a45c08dab6457"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a2c06c119e98937f84a0a45c08dab6457">OwnerAttacked</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *target) override</td></tr>
<tr class="separator:a2c06c119e98937f84a0a45c08dab6457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae395f8a622199714c0204f8df0bd3c0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#ae395f8a622199714c0204f8df0bd3c0d">AttackedBy</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *attacker) override</td></tr>
<tr class="separator:ae395f8a622199714c0204f8df0bd3c0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fdb1df9497319d5a874df78c74caf39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a0fdb1df9497319d5a874df78c74caf39">ReceiveEmote</a> (<a class="el" href="../../d9/d86/a08398.html">Player</a> *player, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> textEmote) override</td></tr>
<tr class="separator:a0fdb1df9497319d5a874df78c74caf39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aacaa70911c4249a36a2e50a0fd3362"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a5aacaa70911c4249a36a2e50a0fd3362">MoveInLineOfSight</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *) override</td></tr>
<tr class="separator:a5aacaa70911c4249a36a2e50a0fd3362"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adea0e094c01741e6d883a3a378ceaced"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#adea0e094c01741e6d883a3a378ceaced">MoveInLineOfSight_Safe</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="separator:adea0e094c01741e6d883a3a378ceaced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40cee95bfee96c4743b3c05ffc674d04"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a40cee95bfee96c4743b3c05ffc674d04">EnterEvadeMode</a> (<a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbb">EvadeReason</a>) override</td></tr>
<tr class="separator:a40cee95bfee96c4743b3c05ffc674d04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42fba073be62e3a35fc671f288d6e02b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a42fba073be62e3a35fc671f288d6e02b">SpellHit</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *caster, <a class="el" href="../../dd/df5/a10910.html">SpellInfo</a> const *spellInfo) override</td></tr>
<tr class="separator:a42fba073be62e3a35fc671f288d6e02b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ee1ac5c9e0235957c823e8f3c847d9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a4ee1ac5c9e0235957c823e8f3c847d9f">PetStopAttack</a> () override</td></tr>
<tr class="separator:a4ee1ac5c9e0235957c823e8f3c847d9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a06074"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a06074')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../dc/d36/a06074.html">CreatureAI</a></td></tr>
<tr class="memitem:aad45a32b75725ab20fc1164805ed0578 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#aad45a32b75725ab20fc1164805ed0578">Talk</a> (<a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> id, <a class="el" href="../../db/df3/a08182.html">WorldObject</a> const *whisperTarget=nullptr, <a class="el" href="../../dc/d84/a00338.html#a1c3834b9e3853535027d58bf21bec81f">Milliseconds</a> delay=0s)</td></tr>
<tr class="memdesc:aad45a32b75725ab20fc1164805ed0578 inherit pub_methods_a06074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Causes the creature to talk/say the text assigned to their entry in the <code>creature_text</code> database table.  <a href="../../dc/d36/a06074.html#aad45a32b75725ab20fc1164805ed0578">More...</a><br /></td></tr>
<tr class="separator:aad45a32b75725ab20fc1164805ed0578 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d2cc91d7cdcfa323aaf5ada6ac8a7b inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a17d2cc91d7cdcfa323aaf5ada6ac8a7b">Talk</a> (<a class="el" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> id, <a class="el" href="../../dc/d84/a00338.html#a1c3834b9e3853535027d58bf21bec81f">Milliseconds</a> delay)</td></tr>
<tr class="separator:a17d2cc91d7cdcfa323aaf5ada6ac8a7b inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64328d924deddb3b54b185448bd9793b inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/df3/a08182.html">WorldObject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a64328d924deddb3b54b185448bd9793b">GetSummoner</a> () const</td></tr>
<tr class="memdesc:a64328d924deddb3b54b185448bd9793b inherit pub_methods_a06074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the summoner creature/object, if the creature is a temporary summon.  <a href="../../dc/d36/a06074.html#a64328d924deddb3b54b185448bd9793b">More...</a><br /></td></tr>
<tr class="separator:a64328d924deddb3b54b185448bd9793b inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a100ffdac1244f5a7fdb3692cb903a119 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a100ffdac1244f5a7fdb3692cb903a119">CreatureAI</a> (<a class="el" href="../../df/d49/a07778.html">Creature</a> *creature)</td></tr>
<tr class="separator:a100ffdac1244f5a7fdb3692cb903a119 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12d4493d7e3dbb67131e360638efb2d3 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a12d4493d7e3dbb67131e360638efb2d3">~CreatureAI</a> () override</td></tr>
<tr class="separator:a12d4493d7e3dbb67131e360638efb2d3 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47d2c5e44ccbf09d7c2059bed31d216d inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a47d2c5e44ccbf09d7c2059bed31d216d">MoveCircleChecks</a> ()</td></tr>
<tr class="separator:a47d2c5e44ccbf09d7c2059bed31d216d inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae80b4a2f2107818472619d8586059d66 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ae80b4a2f2107818472619d8586059d66">MoveBackwardsChecks</a> ()</td></tr>
<tr class="separator:ae80b4a2f2107818472619d8586059d66 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd0302ecfe6e2381dc2bc5f89f2c2152 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#afd0302ecfe6e2381dc2bc5f89f2c2152">MoveInLineOfSight_Safe</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *who)</td></tr>
<tr class="memdesc:afd0302ecfe6e2381dc2bc5f89f2c2152 inherit pub_methods_a06074"><td class="mdescLeft">&#160;</td><td class="mdescRight">== Reactions At =================================  <a href="../../dc/d36/a06074.html#afd0302ecfe6e2381dc2bc5f89f2c2152">More...</a><br /></td></tr>
<tr class="separator:afd0302ecfe6e2381dc2bc5f89f2c2152 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a8fee035f2cd3ed05f46f6ab042cd50 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a3a8fee035f2cd3ed05f46f6ab042cd50">TriggerAlert</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> const *who) const</td></tr>
<tr class="separator:a3a8fee035f2cd3ed05f46f6ab042cd50 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18697bb982e25e72f50eac5aa56c7d33 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a18697bb982e25e72f50eac5aa56c7d33">CanRespawn</a> ()</td></tr>
<tr class="separator:a18697bb982e25e72f50eac5aa56c7d33 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe5dd68e11d20028510eca29d4184778 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#afe5dd68e11d20028510eca29d4184778">EnterEvadeMode</a> (<a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbb">EvadeReason</a> why=<a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbba0a93738d4e35efeb13a3ce07963de027">EVADE_REASON_OTHER</a>)</td></tr>
<tr class="separator:afe5dd68e11d20028510eca29d4184778 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15f691c9137273cd5c3d5ba6f0762300 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a15f691c9137273cd5c3d5ba6f0762300">JustEngagedWith</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="memdesc:a15f691c9137273cd5c3d5ba6f0762300 inherit pub_methods_a06074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called for reaction when initially engaged.  <a href="../../dc/d36/a06074.html#a15f691c9137273cd5c3d5ba6f0762300">More...</a><br /></td></tr>
<tr class="separator:a15f691c9137273cd5c3d5ba6f0762300 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c0eee7b55a8cf3cd5f99cf6fa41b00b inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a8c0eee7b55a8cf3cd5f99cf6fa41b00b">JustDied</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="separator:a8c0eee7b55a8cf3cd5f99cf6fa41b00b inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9ec4de552a9f0b08b8494bb782eed58 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ab9ec4de552a9f0b08b8494bb782eed58">KilledUnit</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="separator:ab9ec4de552a9f0b08b8494bb782eed58 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a55253d96d72f1df305b2ccfa7284ca inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a3a55253d96d72f1df305b2ccfa7284ca">JustSummoned</a> (<a class="el" href="../../df/d49/a07778.html">Creature</a> *)</td></tr>
<tr class="separator:a3a55253d96d72f1df305b2ccfa7284ca inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae994802040dee85cb8b020d8629b9f94 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ae994802040dee85cb8b020d8629b9f94">IsSummonedBy</a> (<a class="el" href="../../db/df3/a08182.html">WorldObject</a> *)</td></tr>
<tr class="separator:ae994802040dee85cb8b020d8629b9f94 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0850b634c283a045bd4448e93f99efe inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ad0850b634c283a045bd4448e93f99efe">SummonedCreatureDespawn</a> (<a class="el" href="../../df/d49/a07778.html">Creature</a> *)</td></tr>
<tr class="separator:ad0850b634c283a045bd4448e93f99efe inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa84f573bdb0e556cf911d0a00f6ed5fb inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#aa84f573bdb0e556cf911d0a00f6ed5fb">SummonedCreatureDies</a> (<a class="el" href="../../df/d49/a07778.html">Creature</a> *, <a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="separator:aa84f573bdb0e556cf911d0a00f6ed5fb inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a864fed7b6710808761b3b0d4c4a518fd inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a864fed7b6710808761b3b0d4c4a518fd">SummonedCreatureDespawnAll</a> ()</td></tr>
<tr class="separator:a864fed7b6710808761b3b0d4c4a518fd inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b57ae64a42c982865b94cd889a18bd4 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a1b57ae64a42c982865b94cd889a18bd4">SummonedCreatureEvade</a> (<a class="el" href="../../df/d49/a07778.html">Creature</a> *)</td></tr>
<tr class="separator:a1b57ae64a42c982865b94cd889a18bd4 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6afb39c4bf86a1e882cc80fd7ec80a8f inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a6afb39c4bf86a1e882cc80fd7ec80a8f">SpellHit</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *, <a class="el" href="../../dd/df5/a10910.html">SpellInfo</a> const *)</td></tr>
<tr class="separator:a6afb39c4bf86a1e882cc80fd7ec80a8f inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e545b8b2c9f8538d8663ef06c2c1030 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a1e545b8b2c9f8538d8663ef06c2c1030">SpellHitTarget</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *, <a class="el" href="../../dd/df5/a10910.html">SpellInfo</a> const *)</td></tr>
<tr class="separator:a1e545b8b2c9f8538d8663ef06c2c1030 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57b18b733f139df7116009c73a78fd4b inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a57b18b733f139df7116009c73a78fd4b">AttackedBy</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="separator:a57b18b733f139df7116009c73a78fd4b inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe73fad7f8eeedeb636cb77790bffff4 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#afe73fad7f8eeedeb636cb77790bffff4">IsEscorted</a> ()</td></tr>
<tr class="separator:afe73fad7f8eeedeb636cb77790bffff4 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c039b3df20368e5dc6aca4811ca9084 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a7c039b3df20368e5dc6aca4811ca9084">JustRespawned</a> ()</td></tr>
<tr class="separator:a7c039b3df20368e5dc6aca4811ca9084 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0438b14dc1d7f038221d9d7a2f37043 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ab0438b14dc1d7f038221d9d7a2f37043">MovementInform</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)</td></tr>
<tr class="separator:ab0438b14dc1d7f038221d9d7a2f37043 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f8df8722e2c7f1cc29875db3f27d9fd inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a7f8df8722e2c7f1cc29875db3f27d9fd">PathEndReached</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)</td></tr>
<tr class="separator:a7f8df8722e2c7f1cc29875db3f27d9fd inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a454866f22b192f0c78301be09ae69a86 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a454866f22b192f0c78301be09ae69a86">OnCharmed</a> (bool apply) override</td></tr>
<tr class="memdesc:a454866f22b192f0c78301be09ae69a86 inherit pub_methods_a06074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when unit is charmed.  <a href="../../dc/d36/a06074.html#a454866f22b192f0c78301be09ae69a86">More...</a><br /></td></tr>
<tr class="separator:a454866f22b192f0c78301be09ae69a86 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85468652a394c5f2b3b14d822ac2d222 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a85468652a394c5f2b3b14d822ac2d222">JustReachedHome</a> ()</td></tr>
<tr class="separator:a85468652a394c5f2b3b14d822ac2d222 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdeeccb48c5f74120d0fffe2a631a88a inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#afdeeccb48c5f74120d0fffe2a631a88a">DoZoneInCombat</a> (<a class="el" href="../../df/d49/a07778.html">Creature</a> *creature=nullptr, float maxRangeToNearestTarget=250.0f)</td></tr>
<tr class="separator:afdeeccb48c5f74120d0fffe2a631a88a inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb43fe424c8e27543a935a335c133c86 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#abb43fe424c8e27543a935a335c133c86">ReceiveEmote</a> (<a class="el" href="../../d9/d86/a08398.html">Player</a> *, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)</td></tr>
<tr class="separator:abb43fe424c8e27543a935a335c133c86 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3358b036c3afc22343e44c1f69d5f19d inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a3358b036c3afc22343e44c1f69d5f19d">OwnerAttackedBy</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="separator:a3358b036c3afc22343e44c1f69d5f19d inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e1c155745ee7fa6a970d38828352ad6 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a0e1c155745ee7fa6a970d38828352ad6">OwnerAttacked</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="separator:a0e1c155745ee7fa6a970d38828352ad6 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d3a9d75687236fcd615a1ac624db59 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ae7d3a9d75687236fcd615a1ac624db59">CorpseRemoved</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;)</td></tr>
<tr class="memdesc:ae7d3a9d75687236fcd615a1ac624db59 inherit pub_methods_a06074"><td class="mdescLeft">&#160;</td><td class="mdescRight">== Triggered Actions Requested ==================  <a href="../../dc/d36/a06074.html#ae7d3a9d75687236fcd615a1ac624db59">More...</a><br /></td></tr>
<tr class="separator:ae7d3a9d75687236fcd615a1ac624db59 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5f77a4717d02695e089042fa12f5c1e inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ac5f77a4717d02695e089042fa12f5c1e">PassengerBoarded</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *, <a class="el" href="../../d4/d1e/a00497.html#a3bb8a71f4ae9af551f71e9eb2c9c3325">int8</a>, bool)</td></tr>
<tr class="memdesc:ac5f77a4717d02695e089042fa12f5c1e inherit pub_methods_a06074"><td class="mdescLeft">&#160;</td><td class="mdescRight">== Fields =======================================  <a href="../../dc/d36/a06074.html#ac5f77a4717d02695e089042fa12f5c1e">More...</a><br /></td></tr>
<tr class="separator:ac5f77a4717d02695e089042fa12f5c1e inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa039cf7a893c697b56bc63a78580eb38 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#aa039cf7a893c697b56bc63a78580eb38">BeforeSpellClick</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="separator:aa039cf7a893c697b56bc63a78580eb38 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c9b51cb63fa6d4673a2bcd88cfd0218 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a7c9b51cb63fa6d4673a2bcd88cfd0218">OnSpellClick</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *, bool &amp;)</td></tr>
<tr class="separator:a7c9b51cb63fa6d4673a2bcd88cfd0218 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0619d01bf9eab0b2201fefccb829bc45 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a0619d01bf9eab0b2201fefccb829bc45">CanSeeAlways</a> (<a class="el" href="../../db/df3/a08182.html">WorldObject</a> const *)</td></tr>
<tr class="separator:a0619d01bf9eab0b2201fefccb829bc45 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f2469dbb7ee382f35c2a69c70519644 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a7f2469dbb7ee382f35c2a69c70519644">CanBeSeen</a> (<a class="el" href="../../d9/d86/a08398.html">Player</a> const *)</td></tr>
<tr class="separator:a7f2469dbb7ee382f35c2a69c70519644 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affb58f71126f78106d39a142d962210f inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#affb58f71126f78106d39a142d962210f">CanAlwaysBeDetectable</a> (<a class="el" href="../../db/df3/a08182.html">WorldObject</a> const *)</td></tr>
<tr class="separator:affb58f71126f78106d39a142d962210f inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae16f47644ea272cf4ba3aa5f6c7256ee inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ae16f47644ea272cf4ba3aa5f6c7256ee">PetStopAttack</a> ()</td></tr>
<tr class="separator:ae16f47644ea272cf4ba3aa5f6c7256ee inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac43a29ce3cf25c376853a52f3829c0ee inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ac43a29ce3cf25c376853a52f3829c0ee">CheckInRoom</a> ()</td></tr>
<tr class="separator:ac43a29ce3cf25c376853a52f3829c0ee inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ab2493951d4eee8560c1415536f726e inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d81/a02966.html#a7994a32cb10f6de9d90e32ef2d6c1f37">CreatureBoundary</a> const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a4ab2493951d4eee8560c1415536f726e">GetBoundary</a> () const</td></tr>
<tr class="separator:a4ab2493951d4eee8560c1415536f726e inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae99cf5a9b542173bf08aa21de2319a51 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ae99cf5a9b542173bf08aa21de2319a51">SetBoundary</a> (<a class="el" href="../../df/d81/a02966.html#a7994a32cb10f6de9d90e32ef2d6c1f37">CreatureBoundary</a> const *boundary, bool negativeBoundaries=false)</td></tr>
<tr class="separator:ae99cf5a9b542173bf08aa21de2319a51 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aded3c4896ed48811d276b356b9468b00 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#aded3c4896ed48811d276b356b9468b00">IsInBoundary</a> (<a class="el" href="../../d6/dc8/a08226.html">Position</a> const *who=nullptr) const</td></tr>
<tr class="separator:aded3c4896ed48811d276b356b9468b00 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f63df5b2e85f30bf2f8898f30de45b5 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a4f63df5b2e85f30bf2f8898f30de45b5">CalculateThreat</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *, float &amp;, <a class="el" href="../../dd/df5/a10910.html">SpellInfo</a> const *)</td></tr>
<tr class="separator:a4f63df5b2e85f30bf2f8898f30de45b5 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa92eeb50af35d0c7ab49c90509d0a57 inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#afa92eeb50af35d0c7ab49c90509d0a57">OnTeleportUnreacheablePlayer</a> (<a class="el" href="../../d9/d86/a08398.html">Player</a> *)</td></tr>
<tr class="separator:afa92eeb50af35d0c7ab49c90509d0a57 inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a047d300ab37a17b0ff5ee133c31aa08d inherit pub_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a047d300ab37a17b0ff5ee133c31aa08d">OnAuraRemove</a> (<a class="el" href="../../d3/d9a/a10802.html">AuraApplication</a> *, <a class="el" href="../../d5/d37/a03092.html#a56f7dd5627e22afd9eb73530b767115e">AuraRemoveMode</a>)</td></tr>
<tr class="separator:a047d300ab37a17b0ff5ee133c31aa08d inherit pub_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a06062"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a06062')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d9/de2/a06062.html">UnitAI</a></td></tr>
<tr class="memitem:a47314b7b16464a57a8bfa010900ec032 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a47314b7b16464a57a8bfa010900ec032">UnitAI</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *unit)</td></tr>
<tr class="separator:a47314b7b16464a57a8bfa010900ec032 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bf60ae9d2c16f842e97cba569d8ec01 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a3bf60ae9d2c16f842e97cba569d8ec01">~UnitAI</a> ()</td></tr>
<tr class="separator:a3bf60ae9d2c16f842e97cba569d8ec01 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a2ee2c8c34726e0dd7d2e7a25047690 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a5a2ee2c8c34726e0dd7d2e7a25047690">CanAIAttack</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> const *) const</td></tr>
<tr class="separator:a5a2ee2c8c34726e0dd7d2e7a25047690 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae120634c255d365f1567e341e2cf1feb inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#ae120634c255d365f1567e341e2cf1feb">AttackStart</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="separator:ae120634c255d365f1567e341e2cf1feb inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7288294b38c6161ab1218d75fe622fc0 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a7288294b38c6161ab1218d75fe622fc0">UpdateAI</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)=0</td></tr>
<tr class="memdesc:a7288294b38c6161ab1218d75fe622fc0 inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use to start attacking a target. Called just before JustEngagedWith()  <a href="../../d9/de2/a06062.html#a7288294b38c6161ab1218d75fe622fc0">More...</a><br /></td></tr>
<tr class="separator:a7288294b38c6161ab1218d75fe622fc0 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa88ecdf57b44fb013c3fed4ff59aec0d inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#aa88ecdf57b44fb013c3fed4ff59aec0d">InitializeAI</a> ()</td></tr>
<tr class="separator:aa88ecdf57b44fb013c3fed4ff59aec0d inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43eb9ef68b977d98f6618d69a0d62115 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a43eb9ef68b977d98f6618d69a0d62115">Reset</a> ()</td></tr>
<tr class="separator:a43eb9ef68b977d98f6618d69a0d62115 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af09c59bb8f40f0c3470175c1123a9c55 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#af09c59bb8f40f0c3470175c1123a9c55">OnCharmed</a> (bool apply)=0</td></tr>
<tr class="memdesc:af09c59bb8f40f0c3470175c1123a9c55 inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when unit is charmed.  <a href="../../d9/de2/a06062.html#af09c59bb8f40f0c3470175c1123a9c55">More...</a><br /></td></tr>
<tr class="separator:af09c59bb8f40f0c3470175c1123a9c55 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a165d336cb3423f9665ed612d2dec76ed inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a165d336cb3423f9665ed612d2dec76ed">DoAction</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>)</td></tr>
<tr class="separator:a165d336cb3423f9665ed612d2dec76ed inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6905aa5db0b3501623c040689946350e inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a6905aa5db0b3501623c040689946350e">GetData</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>) const</td></tr>
<tr class="separator:a6905aa5db0b3501623c040689946350e inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14c40dcfec28989cc630fa571c67ebb7 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a14c40dcfec28989cc630fa571c67ebb7">SetData</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)</td></tr>
<tr class="separator:a14c40dcfec28989cc630fa571c67ebb7 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed57e805b8792eda265a1a426fcf152a inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#aed57e805b8792eda265a1a426fcf152a">SetGUID</a> (<a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>=0)</td></tr>
<tr class="separator:aed57e805b8792eda265a1a426fcf152a inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b3f14630803365aeb7952d765a7cf1 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d9/d08/a08198.html">ObjectGuid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a88b3f14630803365aeb7952d765a7cf1">GetGUID</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>=0) const</td></tr>
<tr class="separator:a88b3f14630803365aeb7952d765a7cf1 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5b181f1036962caaf140369b22e807b inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#ac5b181f1036962caaf140369b22e807b">SelectTarget</a> (<a class="el" href="../../d2/d4c/a02897.html#a482ee472018cb5f0e11addaabad35c3d">SelectTargetMethod</a> targetType, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> position=0, float dist=0.0f, bool playerOnly=false, bool withTank=true, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> aura=0)</td></tr>
<tr class="separator:ac5b181f1036962caaf140369b22e807b inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef9582ba7484d83bece81243f8005bfc inherit pub_methods_a06062"><td class="memTemplParams" colspan="2">template&lt;class PREDICATE &gt; </td></tr>
<tr class="memitem:aef9582ba7484d83bece81243f8005bfc inherit pub_methods_a06062"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#aef9582ba7484d83bece81243f8005bfc">SelectTarget</a> (<a class="el" href="../../d2/d4c/a02897.html#a482ee472018cb5f0e11addaabad35c3d">SelectTargetMethod</a> targetType, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> position, PREDICATE const &amp;predicate)</td></tr>
<tr class="separator:aef9582ba7484d83bece81243f8005bfc inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7057b419b4fdcb9a4a87344aa59e97b3 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a7057b419b4fdcb9a4a87344aa59e97b3">SelectTargetList</a> (std::list&lt; <a class="el" href="../../de/d71/a08530.html">Unit</a> * &gt; &amp;targetList, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> num, <a class="el" href="../../d2/d4c/a02897.html#a482ee472018cb5f0e11addaabad35c3d">SelectTargetMethod</a> targetType, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> position=0, float dist=0.0f, bool playerOnly=false, bool withTank=true, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> aura=0)</td></tr>
<tr class="memdesc:a7057b419b4fdcb9a4a87344aa59e97b3 inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select the best (up to) &lt;num&gt; targets (in &lt;targetType&gt; order) from the threat list that fulfill the following:  <a href="../../d9/de2/a06062.html#a7057b419b4fdcb9a4a87344aa59e97b3">More...</a><br /></td></tr>
<tr class="separator:a7057b419b4fdcb9a4a87344aa59e97b3 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0732b1835b79a9b866e1932f63f87db0 inherit pub_methods_a06062"><td class="memTemplParams" colspan="2">template&lt;class PREDICATE &gt; </td></tr>
<tr class="memitem:a0732b1835b79a9b866e1932f63f87db0 inherit pub_methods_a06062"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a0732b1835b79a9b866e1932f63f87db0">SelectTargetList</a> (std::list&lt; <a class="el" href="../../de/d71/a08530.html">Unit</a> * &gt; &amp;targetList, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> num, <a class="el" href="../../d2/d4c/a02897.html#a482ee472018cb5f0e11addaabad35c3d">SelectTargetMethod</a> targetType, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> position, PREDICATE const &amp;predicate)</td></tr>
<tr class="separator:a0732b1835b79a9b866e1932f63f87db0 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a201d5172cecf024e16cd3cad9ed99623 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a201d5172cecf024e16cd3cad9ed99623">JustEnteredCombat</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="memdesc:a201d5172cecf024e16cd3cad9ed99623 inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the unit enters combat.  <a href="../../d9/de2/a06062.html#a201d5172cecf024e16cd3cad9ed99623">More...</a><br /></td></tr>
<tr class="separator:a201d5172cecf024e16cd3cad9ed99623 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb05f651e7b7a7235c89f576d9c5d8e inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#abeb05f651e7b7a7235c89f576d9c5d8e">JustExitedCombat</a> ()</td></tr>
<tr class="memdesc:abeb05f651e7b7a7235c89f576d9c5d8e inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the unit leaves combat.  <a href="../../d9/de2/a06062.html#abeb05f651e7b7a7235c89f576d9c5d8e">More...</a><br /></td></tr>
<tr class="separator:abeb05f651e7b7a7235c89f576d9c5d8e inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ff7747aadce5bf9b3734a5f7abbc1b inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#ad2ff7747aadce5bf9b3734a5f7abbc1b">DamageDealt</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;, <a class="el" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1">DamageEffectType</a>)</td></tr>
<tr class="memdesc:ad2ff7747aadce5bf9b3734a5f7abbc1b inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called at any Damage to any victim (before damage apply)  <a href="../../d9/de2/a06062.html#ad2ff7747aadce5bf9b3734a5f7abbc1b">More...</a><br /></td></tr>
<tr class="separator:ad2ff7747aadce5bf9b3734a5f7abbc1b inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca924c2f1f249c2dcffaaea0fa35cd91 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#aca924c2f1f249c2dcffaaea0fa35cd91">DamageTaken</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;, <a class="el" href="../../de/d3d/a03515.html#ab0b8a9de485ea928c497ac0b5f9040b1">DamageEffectType</a>, <a class="el" href="../../d0/dbd/a02771.html#aff6913cfd69489c107a071be9ec2ec8f">SpellSchoolMask</a>)</td></tr>
<tr class="memdesc:aca924c2f1f249c2dcffaaea0fa35cd91 inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called at any Damage from any attacker (before damage apply)  <a href="../../d9/de2/a06062.html#aca924c2f1f249c2dcffaaea0fa35cd91">More...</a><br /></td></tr>
<tr class="separator:aca924c2f1f249c2dcffaaea0fa35cd91 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a042779745a27ea5099ac60fd79a9dc6a inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a042779745a27ea5099ac60fd79a9dc6a">HealReceived</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;)</td></tr>
<tr class="memdesc:a042779745a27ea5099ac60fd79a9dc6a inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the creature receives heal.  <a href="../../d9/de2/a06062.html#a042779745a27ea5099ac60fd79a9dc6a">More...</a><br /></td></tr>
<tr class="separator:a042779745a27ea5099ac60fd79a9dc6a inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd90405c7067d344249fb273472d34da inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#acd90405c7067d344249fb273472d34da">OnPowerUpdate</a> (<a class="el" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414">Powers</a>, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>, <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)</td></tr>
<tr class="memdesc:acd90405c7067d344249fb273472d34da inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the creature power updates.  <a href="../../d9/de2/a06062.html#acd90405c7067d344249fb273472d34da">More...</a><br /></td></tr>
<tr class="separator:acd90405c7067d344249fb273472d34da inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd135c95a0d2a1a8c58073edbaa5a5bd inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#acd135c95a0d2a1a8c58073edbaa5a5bd">HealDone</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;)</td></tr>
<tr class="memdesc:acd135c95a0d2a1a8c58073edbaa5a5bd inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the unit heals.  <a href="../../d9/de2/a06062.html#acd135c95a0d2a1a8c58073edbaa5a5bd">More...</a><br /></td></tr>
<tr class="separator:acd135c95a0d2a1a8c58073edbaa5a5bd inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a609a87500d652651a524592f0d5b203d inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a609a87500d652651a524592f0d5b203d">OnCalculateMeleeDamageReceived</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;, <a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="memdesc:a609a87500d652651a524592f0d5b203d inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called during damage calculations.  <a href="../../d9/de2/a06062.html#a609a87500d652651a524592f0d5b203d">More...</a><br /></td></tr>
<tr class="separator:a609a87500d652651a524592f0d5b203d inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8460a963a07bbd44d97a51d0f7ba01f0 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a8460a963a07bbd44d97a51d0f7ba01f0">OnCalculateSpellDamageReceived</a> (<a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> &amp;, <a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="separator:a8460a963a07bbd44d97a51d0f7ba01f0 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbffac590ddab45bf2e2085015e9d8bd inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#abbffac590ddab45bf2e2085015e9d8bd">OnCalculatePeriodicTickReceived</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> &amp;, <a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="memdesc:abbffac590ddab45bf2e2085015e9d8bd inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called during calculation when receiving periodic healing or damage (DoT or HoT)  <a href="../../d9/de2/a06062.html#abbffac590ddab45bf2e2085015e9d8bd">More...</a><br /></td></tr>
<tr class="separator:abbffac590ddab45bf2e2085015e9d8bd inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a187fc41350aa8d540512695ef2cbf73b inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a187fc41350aa8d540512695ef2cbf73b">AttackStartCaster</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *victim, float dist)</td></tr>
<tr class="separator:a187fc41350aa8d540512695ef2cbf73b inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a109b45d74dd97d12a43a03918c31bfec inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dbd/a02771.html#ade9b4e913a84079f5311c2817e3de9da">SpellCastResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a109b45d74dd97d12a43a03918c31bfec">DoAddAuraToAllHostilePlayers</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellid)</td></tr>
<tr class="separator:a109b45d74dd97d12a43a03918c31bfec inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeebcad9b6effa45145c50f06af60b23d inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dbd/a02771.html#ade9b4e913a84079f5311c2817e3de9da">SpellCastResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#aeebcad9b6effa45145c50f06af60b23d">DoCast</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId)</td></tr>
<tr class="separator:aeebcad9b6effa45145c50f06af60b23d inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65454ef7cdc5c8f83b71171d9a48aad1 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dbd/a02771.html#ade9b4e913a84079f5311c2817e3de9da">SpellCastResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a65454ef7cdc5c8f83b71171d9a48aad1">DoCast</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *victim, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId, bool triggered=false)</td></tr>
<tr class="separator:a65454ef7cdc5c8f83b71171d9a48aad1 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ae5c7d15b747433f4d94f80bcebd215 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dbd/a02771.html#ade9b4e913a84079f5311c2817e3de9da">SpellCastResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a6ae5c7d15b747433f4d94f80bcebd215">DoCastSelf</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId, bool triggered=false)</td></tr>
<tr class="separator:a6ae5c7d15b747433f4d94f80bcebd215 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73cecdaa59da8166335eba352d58df2a inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dbd/a02771.html#ade9b4e913a84079f5311c2817e3de9da">SpellCastResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a73cecdaa59da8166335eba352d58df2a">DoCastToAllHostilePlayers</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellid, bool triggered=false)</td></tr>
<tr class="memdesc:a73cecdaa59da8166335eba352d58df2a inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">To specify the caster as target if the spell is self-cast.  <a href="../../d9/de2/a06062.html#a73cecdaa59da8166335eba352d58df2a">More...</a><br /></td></tr>
<tr class="separator:a73cecdaa59da8166335eba352d58df2a inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361b6f4e71e9c74595bdf3d7e3b29a82 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dbd/a02771.html#ade9b4e913a84079f5311c2817e3de9da">SpellCastResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a361b6f4e71e9c74595bdf3d7e3b29a82">DoCastVictim</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId, bool triggered=false)</td></tr>
<tr class="separator:a361b6f4e71e9c74595bdf3d7e3b29a82 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e37cbb75f91c247b04131afc7ce35f5 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dbd/a02771.html#ade9b4e913a84079f5311c2817e3de9da">SpellCastResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a1e37cbb75f91c247b04131afc7ce35f5">DoCastAOE</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId, bool triggered=false)</td></tr>
<tr class="separator:a1e37cbb75f91c247b04131afc7ce35f5 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01ab166c5d8c01645f8c638c85ed2c94 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dbd/a02771.html#ade9b4e913a84079f5311c2817e3de9da">SpellCastResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a01ab166c5d8c01645f8c638c85ed2c94">DoCastRandomTarget</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> threatTablePosition=0, float dist=0.0f, bool playerOnly=true, bool triggered=false, bool withTank=true)</td></tr>
<tr class="memdesc:a01ab166c5d8c01645f8c638c85ed2c94 inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cast the spell on a random unit from the threat list.  <a href="../../d9/de2/a06062.html#a01ab166c5d8c01645f8c638c85ed2c94">More...</a><br /></td></tr>
<tr class="separator:a01ab166c5d8c01645f8c638c85ed2c94 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e6b86ce644125ad36c4f148e0997a3 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/dbd/a02771.html#ade9b4e913a84079f5311c2817e3de9da">SpellCastResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a60e6b86ce644125ad36c4f148e0997a3">DoCastMaxThreat</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> threatTablePosition=0, float dist=0.0f, bool playerOnly=true, bool triggered=false)</td></tr>
<tr class="memdesc:a60e6b86ce644125ad36c4f148e0997a3 inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cast spell on the top threat target, which may not be the current victim.  <a href="../../d9/de2/a06062.html#a60e6b86ce644125ad36c4f148e0997a3">More...</a><br /></td></tr>
<tr class="separator:a60e6b86ce644125ad36c4f148e0997a3 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa37866ca18fd7b86356b9e5d828cbd00 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#aa37866ca18fd7b86356b9e5d828cbd00">DoGetSpellMaxRange</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellId, bool positive=false)</td></tr>
<tr class="separator:aa37866ca18fd7b86356b9e5d828cbd00 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a348a472089a9be6210b58aace8fafa9f inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a348a472089a9be6210b58aace8fafa9f">DoMeleeAttackIfReady</a> ()</td></tr>
<tr class="separator:a348a472089a9be6210b58aace8fafa9f inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc5c0f9175fa6f35f7a8f5337aa37928 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#abc5c0f9175fa6f35f7a8f5337aa37928">DoSpellAttackIfReady</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spell)</td></tr>
<tr class="separator:abc5c0f9175fa6f35f7a8f5337aa37928 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcdeaf8720c085b894f67b9b315cf528 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#adcdeaf8720c085b894f67b9b315cf528">DoSpellAttackToRandomTargetIfReady</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spell, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> threatTablePosition=0, float dist=0.f, bool playerOnly=true)</td></tr>
<tr class="separator:adcdeaf8720c085b894f67b9b315cf528 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fd8840fb63eb5360e6e46d83eeac049 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a1fd8840fb63eb5360e6e46d83eeac049">SummonMovementInform</a> (<a class="el" href="../../df/d49/a07778.html">Creature</a> *, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)</td></tr>
<tr class="memdesc:a1fd8840fb63eb5360e6e46d83eeac049 inherit pub_methods_a06062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a summon reaches a waypoint or point movement finished.  <a href="../../d9/de2/a06062.html#a1fd8840fb63eb5360e6e46d83eeac049">More...</a><br /></td></tr>
<tr class="separator:a1fd8840fb63eb5360e6e46d83eeac049 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8de6be511eebe0cc7a3332a9bb74d01e inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a8de6be511eebe0cc7a3332a9bb74d01e">sGossipHello</a> (<a class="el" href="../../d9/d86/a08398.html">Player</a> *)</td></tr>
<tr class="separator:a8de6be511eebe0cc7a3332a9bb74d01e inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4adb2abfabe081acf0e4c5670607f87 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#ab4adb2abfabe081acf0e4c5670607f87">sGossipSelect</a> (<a class="el" href="../../d9/d86/a08398.html">Player</a> *, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)</td></tr>
<tr class="separator:ab4adb2abfabe081acf0e4c5670607f87 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ff4994ac5dff9fe23091a864e69cc9f inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a3ff4994ac5dff9fe23091a864e69cc9f">sGossipSelectCode</a> (<a class="el" href="../../d9/d86/a08398.html">Player</a> *, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>, char const *)</td></tr>
<tr class="separator:a3ff4994ac5dff9fe23091a864e69cc9f inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03076e2d142052af78e6d9e85f390fd1 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a03076e2d142052af78e6d9e85f390fd1">sQuestAccept</a> (<a class="el" href="../../d9/d86/a08398.html">Player</a> *, <a class="el" href="../../db/d15/a09926.html">Quest</a> const *)</td></tr>
<tr class="separator:a03076e2d142052af78e6d9e85f390fd1 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c98d2351a8b902ec70c36d9b076fed inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#ad7c98d2351a8b902ec70c36d9b076fed">sQuestSelect</a> (<a class="el" href="../../d9/d86/a08398.html">Player</a> *, <a class="el" href="../../db/d15/a09926.html">Quest</a> const *)</td></tr>
<tr class="separator:ad7c98d2351a8b902ec70c36d9b076fed inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a529bb9c4e81203c5cfe39e3555730554 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a529bb9c4e81203c5cfe39e3555730554">sQuestComplete</a> (<a class="el" href="../../d9/d86/a08398.html">Player</a> *, <a class="el" href="../../db/d15/a09926.html">Quest</a> const *)</td></tr>
<tr class="separator:a529bb9c4e81203c5cfe39e3555730554 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a676d01e4a58ac141f992ef1bb838d6d9 inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a676d01e4a58ac141f992ef1bb838d6d9">sQuestReward</a> (<a class="el" href="../../d9/d86/a08398.html">Player</a> *, <a class="el" href="../../db/d15/a09926.html">Quest</a> const *, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>)</td></tr>
<tr class="separator:a676d01e4a58ac141f992ef1bb838d6d9 inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0dcf0919badd9b450ed3f70973c9fde inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#af0dcf0919badd9b450ed3f70973c9fde">sOnGameEvent</a> (bool, <a class="el" href="../../d4/d1e/a00497.html#ad9c79638db63f1dfe2b085743b5cbf7b">uint16</a>)</td></tr>
<tr class="separator:af0dcf0919badd9b450ed3f70973c9fde inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa96fa3aa7728e3ae090105bb3d10de4a inherit pub_methods_a06062"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#aa96fa3aa7728e3ae090105bb3d10de4a">GetDebugInfo</a> () const</td></tr>
<tr class="separator:aa96fa3aa7728e3ae090105bb3d10de4a inherit pub_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a4185f1f3c2193717eef59bc391854812"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a4185f1f3c2193717eef59bc391854812">Permissible</a> (<a class="el" href="../../df/d49/a07778.html">Creature</a> const *creature)</td></tr>
<tr class="separator:a4185f1f3c2193717eef59bc391854812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_a06074"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_a06074')"><img src="../../closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="../../dc/d36/a06074.html">CreatureAI</a></td></tr>
<tr class="memitem:a39a72debf9a7ab05cd350c08eb463180 inherit pub_static_methods_a06074"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a39a72debf9a7ab05cd350c08eb463180">IsInBounds</a> (<a class="el" href="../../df/d81/a02966.html#a7994a32cb10f6de9d90e32ef2d6c1f37">CreatureBoundary</a> const &amp;boundary, <a class="el" href="../../d6/dc8/a08226.html">Position</a> const *who)</td></tr>
<tr class="separator:a39a72debf9a7ab05cd350c08eb463180 inherit pub_static_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_a06062"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_a06062')"><img src="../../closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="../../d9/de2/a06062.html">UnitAI</a></td></tr>
<tr class="memitem:a1ff3f1e75730e6464e622267a73d6cc3 inherit pub_static_methods_a06062"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#a1ff3f1e75730e6464e622267a73d6cc3">FillAISpellInfo</a> ()</td></tr>
<tr class="separator:a1ff3f1e75730e6464e622267a73d6cc3 inherit pub_static_methods_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa297cbcee57b47ade3bec433f8ca0cd3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#aa297cbcee57b47ade3bec433f8ca0cd3">_isVisible</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *) const</td></tr>
<tr class="separator:aa297cbcee57b47ade3bec433f8ca0cd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2db745b751d87fad8e473701e80b30cb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a2db745b751d87fad8e473701e80b30cb">_needToStop</a> (void)</td></tr>
<tr class="separator:a2db745b751d87fad8e473701e80b30cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad917a38ff0553bd974694f37242076b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#ad917a38ff0553bd974694f37242076b0">_stopAttack</a> (void)</td></tr>
<tr class="separator:ad917a38ff0553bd974694f37242076b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9844910170b61d3f5e60783d0ec73322"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a9844910170b61d3f5e60783d0ec73322">_doMeleeAttack</a> ()</td></tr>
<tr class="separator:a9844910170b61d3f5e60783d0ec73322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25fb8a89f10d36e1189c8c77e0d9345e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a25fb8a89f10d36e1189c8c77e0d9345e">_canMeleeAttack</a> ()</td></tr>
<tr class="separator:a25fb8a89f10d36e1189c8c77e0d9345e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a611f7bd5e1cf0cb592087bd836c2b922"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a611f7bd5e1cf0cb592087bd836c2b922">UpdateAllies</a> ()</td></tr>
<tr class="separator:a611f7bd5e1cf0cb592087bd836c2b922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add179efcb9c2ed0dd01aa3b2ac74004b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#add179efcb9c2ed0dd01aa3b2ac74004b">SelectNextTarget</a> (bool allowAutoSelect) const</td></tr>
<tr class="separator:add179efcb9c2ed0dd01aa3b2ac74004b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd92475342c2905052a2ea9601c1423"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#aebd92475342c2905052a2ea9601c1423">HandleReturnMovement</a> ()</td></tr>
<tr class="separator:aebd92475342c2905052a2ea9601c1423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9db3295e6d83e5407c8a55b004ccf4c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a9db3295e6d83e5407c8a55b004ccf4c7">DoAttack</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *target, bool chase)</td></tr>
<tr class="separator:a9db3295e6d83e5407c8a55b004ccf4c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acccb6f24c7b1bb0762d542fdc013b330"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#acccb6f24c7b1bb0762d542fdc013b330">CanAttack</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *target, <a class="el" href="../../dd/df5/a10910.html">SpellInfo</a> const *spellInfo=nullptr)</td></tr>
<tr class="separator:acccb6f24c7b1bb0762d542fdc013b330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac444db9042968b0d7aff3fe2cb2e00ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#ac444db9042968b0d7aff3fe2cb2e00ae">ClearCharmInfoFlags</a> ()</td></tr>
<tr class="separator:ac444db9042968b0d7aff3fe2cb2e00ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abd873f793021a2937e2c9a2a9450cf1f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/de0/a05478.html">TimeTracker</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#abd873f793021a2937e2c9a2a9450cf1f">i_tracker</a></td></tr>
<tr class="separator:abd873f793021a2937e2c9a2a9450cf1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77bf7a57505e47e830eeb1fefb5a4493"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/db0/a03467.html#a62874da4f73709809fa3c7609d3e30af">GuidSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a77bf7a57505e47e830eeb1fefb5a4493">m_AllySet</a></td></tr>
<tr class="separator:a77bf7a57505e47e830eeb1fefb5a4493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc18dc58935e17b2bc224a78f43250b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#acbc18dc58935e17b2bc224a78f43250b">m_updateAlliesTimer</a></td></tr>
<tr class="separator:acbc18dc58935e17b2bc224a78f43250b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b9d25512fc4f8c9f0eb538542f72644"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbe/a06026.html#a4b9d25512fc4f8c9f0eb538542f72644">combatRange</a></td></tr>
<tr class="separator:a4b9d25512fc4f8c9f0eb538542f72644"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_a06074"><td colspan="2" onclick="javascript:toggleInherit('pub_types_a06074')"><img src="../../closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="../../dc/d36/a06074.html">CreatureAI</a></td></tr>
<tr class="memitem:a48b996440be01f98686cd088857a5dbb inherit pub_types_a06074"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbb">EvadeReason</a> { <br />
&#160;&#160;<a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbbac7c78f8b470c699fbd3827545ba1c5d6">EVADE_REASON_NO_HOSTILES</a>
, <br />
&#160;&#160;<a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbba6ba168f6d4aec0dfafdfe875d7d076c3">EVADE_REASON_BOUNDARY</a>
, <br />
&#160;&#160;<a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbbaf24b8c9fcce8bf3026db1780cec6c606">EVADE_REASON_SEQUENCE_BREAK</a>
, <br />
&#160;&#160;<a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbbaf4f79f23236f8fee7fac907e5175071c">EVADE_REASON_NO_PATH</a>
, <br />
&#160;&#160;<a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbba0a93738d4e35efeb13a3ce07963de027">EVADE_REASON_OTHER</a>
<br />
 }</td></tr>
<tr class="separator:a48b996440be01f98686cd088857a5dbb inherit pub_types_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_a06062"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_a06062')"><img src="../../closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="../../d9/de2/a06062.html">UnitAI</a></td></tr>
<tr class="memitem:adaf99f0a5a2d4993e5408eec175f5e24 inherit pub_static_attribs_a06062"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d6d/a06086.html">AISpellInfoType</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#adaf99f0a5a2d4993e5408eec175f5e24">AISpellInfo</a></td></tr>
<tr class="separator:adaf99f0a5a2d4993e5408eec175f5e24 inherit pub_static_attribs_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_a06074"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_a06074')"><img src="../../closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="../../dc/d36/a06074.html">CreatureAI</a></td></tr>
<tr class="memitem:ae03ccfe1e27501ed9ccbfecdbd3c4e39 inherit pro_methods_a06074"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ae03ccfe1e27501ed9ccbfecdbd3c4e39">UpdateVictim</a> ()</td></tr>
<tr class="separator:ae03ccfe1e27501ed9ccbfecdbd3c4e39 inherit pro_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9249068ab66d6be483bd5a610b616eae inherit pro_methods_a06074"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a9249068ab66d6be483bd5a610b616eae">UpdateVictimWithGaze</a> ()</td></tr>
<tr class="separator:a9249068ab66d6be483bd5a610b616eae inherit pro_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae23cd0abf3ef7c0c7fa43f169d95f258 inherit pro_methods_a06074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#ae23cd0abf3ef7c0c7fa43f169d95f258">SetGazeOn</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *target)</td></tr>
<tr class="separator:ae23cd0abf3ef7c0c7fa43f169d95f258 inherit pro_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4813dbd4c14f1b7ba74f14c76f80823d inherit pro_methods_a06074"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d49/a07778.html">Creature</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a4813dbd4c14f1b7ba74f14c76f80823d">DoSummon</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> entry, <a class="el" href="../../d6/dc8/a08226.html">Position</a> const &amp;pos, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> despawnTime=30000, <a class="el" href="../../d4/d4b/a03464.html#a38c6d8d01cbe0c49b035f348f7724148">TempSummonType</a> summonType=<a class="el" href="../../d4/d4b/a03464.html#a38c6d8d01cbe0c49b035f348f7724148ae10d0bfbb29fbbfe0e3c50203548d01a">TEMPSUMMON_CORPSE_TIMED_DESPAWN</a>)</td></tr>
<tr class="separator:a4813dbd4c14f1b7ba74f14c76f80823d inherit pro_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea867029296aaa7739a5d46c4294105f inherit pro_methods_a06074"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d49/a07778.html">Creature</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#aea867029296aaa7739a5d46c4294105f">DoSummon</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> entry, <a class="el" href="../../db/df3/a08182.html">WorldObject</a> *obj, float radius=5.0f, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> despawnTime=30000, <a class="el" href="../../d4/d4b/a03464.html#a38c6d8d01cbe0c49b035f348f7724148">TempSummonType</a> summonType=<a class="el" href="../../d4/d4b/a03464.html#a38c6d8d01cbe0c49b035f348f7724148ae10d0bfbb29fbbfe0e3c50203548d01a">TEMPSUMMON_CORPSE_TIMED_DESPAWN</a>)</td></tr>
<tr class="separator:aea867029296aaa7739a5d46c4294105f inherit pro_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40ce129b0c97a9d38edbbfc888c53486 inherit pro_methods_a06074"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d49/a07778.html">Creature</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a40ce129b0c97a9d38edbbfc888c53486">DoSummonFlyer</a> (<a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> entry, <a class="el" href="../../db/df3/a08182.html">WorldObject</a> *obj, float flightZ, float radius=5.0f, <a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> despawnTime=30000, <a class="el" href="../../d4/d4b/a03464.html#a38c6d8d01cbe0c49b035f348f7724148">TempSummonType</a> summonType=<a class="el" href="../../d4/d4b/a03464.html#a38c6d8d01cbe0c49b035f348f7724148ae10d0bfbb29fbbfe0e3c50203548d01a">TEMPSUMMON_CORPSE_TIMED_DESPAWN</a>)</td></tr>
<tr class="separator:a40ce129b0c97a9d38edbbfc888c53486 inherit pro_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1280f8bcf72254ad31c453b810615f87 inherit pro_methods_a06074"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a1280f8bcf72254ad31c453b810615f87">MoveInLineOfSight</a> (<a class="el" href="../../de/d71/a08530.html">Unit</a> *)</td></tr>
<tr class="separator:a1280f8bcf72254ad31c453b810615f87 inherit pro_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cd0b6bf7ee616d4d4e98045f7b808c0 inherit pro_methods_a06074"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a7cd0b6bf7ee616d4d4e98045f7b808c0">_EnterEvadeMode</a> (<a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbb">EvadeReason</a> why=<a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbba0a93738d4e35efeb13a3ce07963de027">EVADE_REASON_OTHER</a>)</td></tr>
<tr class="separator:a7cd0b6bf7ee616d4d4e98045f7b808c0 inherit pro_methods_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_a06074"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_a06074')"><img src="../../closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="../../dc/d36/a06074.html">CreatureAI</a></td></tr>
<tr class="memitem:aee5bf3d421199445de241a34798ae819 inherit pro_attribs_a06074"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d49/a07778.html">Creature</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a></td></tr>
<tr class="separator:aee5bf3d421199445de241a34798ae819 inherit pro_attribs_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7066c4909aefe3f44ad24f910003aa59 inherit pro_attribs_a06074"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/ded/a05374.html">EventMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a7066c4909aefe3f44ad24f910003aa59">events</a></td></tr>
<tr class="separator:a7066c4909aefe3f44ad24f910003aa59 inherit pro_attribs_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a708f334e3ff40b7e1bbdfbff7ba765 inherit pro_attribs_a06074"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d2b/a05454.html">TaskScheduler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a7a708f334e3ff40b7e1bbdfbff7ba765">scheduler</a></td></tr>
<tr class="separator:a7a708f334e3ff40b7e1bbdfbff7ba765 inherit pro_attribs_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e4f2f89c0db37331135074c50285b47 inherit pro_attribs_a06074"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d81/a02966.html#a7994a32cb10f6de9d90e32ef2d6c1f37">CreatureBoundary</a> const  *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a3e4f2f89c0db37331135074c50285b47">_boundary</a></td></tr>
<tr class="separator:a3e4f2f89c0db37331135074c50285b47 inherit pro_attribs_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f2ae661d30adaded885764ad0f1df22 inherit pro_attribs_a06074"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d36/a06074.html#a7f2ae661d30adaded885764ad0f1df22">_negateBoundary</a></td></tr>
<tr class="separator:a7f2ae661d30adaded885764ad0f1df22 inherit pro_attribs_a06074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_a06062"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_a06062')"><img src="../../closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="../../d9/de2/a06062.html">UnitAI</a></td></tr>
<tr class="memitem:ac2af548c72570d8a48295fdfa334278e inherit pro_attribs_a06062"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d71/a08530.html">Unit</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de2/a06062.html#ac2af548c72570d8a48295fdfa334278e">me</a></td></tr>
<tr class="separator:ac2af548c72570d8a48295fdfa334278e inherit pro_attribs_a06062"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9fd8e152cff0c7604c16c9e9549c257a" name="a9fd8e152cff0c7604c16c9e9549c257a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fd8e152cff0c7604c16c9e9549c257a">&#9670;&#160;</a></span>PetAI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PetAI::PetAI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d49/a07778.html">Creature</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   44</span>                        : <a class="code hl_class" href="../../dc/d36/a06074.html">CreatureAI</a>(c), <a class="code hl_variable" href="../../d0/dbe/a06026.html#abd873f793021a2937e2c9a2a9450cf1f">i_tracker</a>(<a class="code hl_define" href="../../df/d81/a02966.html#a8de08a341cdd207e19eef425c2f5f152">TIME_INTERVAL_LOOK</a>)</div>
<div class="line"><span class="lineno">   45</span>{</div>
<div class="line"><span class="lineno">   46</span>    <a class="code hl_function" href="../../d0/dbe/a06026.html#a611f7bd5e1cf0cb592087bd836c2b922">UpdateAllies</a>();</div>
<div class="line"><span class="lineno">   47</span>}</div>
<div class="ttc" id="aa02966_html_a8de08a341cdd207e19eef425c2f5f152"><div class="ttname"><a href="../../df/d81/a02966.html#a8de08a341cdd207e19eef425c2f5f152">TIME_INTERVAL_LOOK</a></div><div class="ttdeci">#define TIME_INTERVAL_LOOK</div><div class="ttdef"><b>Definition:</b> CreatureAI.h:35</div></div>
<div class="ttc" id="aa06026_html_a611f7bd5e1cf0cb592087bd836c2b922"><div class="ttname"><a href="../../d0/dbe/a06026.html#a611f7bd5e1cf0cb592087bd836c2b922">PetAI::UpdateAllies</a></div><div class="ttdeci">void UpdateAllies()</div><div class="ttdef"><b>Definition:</b> PetAI.cpp:353</div></div>
<div class="ttc" id="aa06026_html_abd873f793021a2937e2c9a2a9450cf1f"><div class="ttname"><a href="../../d0/dbe/a06026.html#abd873f793021a2937e2c9a2a9450cf1f">PetAI::i_tracker</a></div><div class="ttdeci">TimeTracker i_tracker</div><div class="ttdef"><b>Definition:</b> PetAI.h:82</div></div>
<div class="ttc" id="aa06074_html"><div class="ttname"><a href="../../dc/d36/a06074.html">CreatureAI</a></div><div class="ttdef"><b>Definition:</b> CreatureAI.h:70</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00353">UpdateAllies()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a25fb8a89f10d36e1189c8c77e0d9345e" name="a25fb8a89f10d36e1189c8c77e0d9345e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25fb8a89f10d36e1189c8c77e0d9345e">&#9670;&#160;</a></span>_canMeleeAttack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool PetAI::_canMeleeAttack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  101</span>{</div>
<div class="line"><span class="lineno">  102</span>    <a class="code hl_variable" href="../../d0/dbe/a06026.html#a4b9d25512fc4f8c9f0eb538542f72644">combatRange</a> = 0.f;</div>
<div class="line"><span class="lineno">  103</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>())</div>
<div class="line"><span class="lineno">  104</span>    {</div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffab9abb8f92c8fdad08f49606aafda6896">ENTRY_IMP</a>:</div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa8ef9e2169f6035568dc57b89cb823cd5">ENTRY_WATER_ELEMENTAL</a>:</div>
<div class="line"><span class="lineno">  107</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa2cec2788a794b1b4d9559fb23d4a5a99">ENTRY_WATER_ELEMENTAL_PERM</a>:</div>
<div class="line"><span class="lineno">  108</span>            {</div>
<div class="line"><span class="lineno">  109</span>                <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a0aa6b0526eeec473ca465cf4a1c23b31">GetPetAutoSpellSize</a>(); ++i)</div>
<div class="line"><span class="lineno">  110</span>                {</div>
<div class="line"><span class="lineno">  111</span>                    <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellID = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#acc2c5f7925a968c540b54b5f126a0f7d">GetPetAutoSpellOnPos</a>(i);</div>
<div class="line"><span class="lineno">  112</span>                    <span class="keywordflow">switch</span> (spellID)</div>
<div class="line"><span class="lineno">  113</span>                    {</div>
<div class="line"><span class="lineno">  114</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffaa00bd8f04ba86fd6ec18af50421dcf1c">IMP_FIREBOLT_RANK_1</a>:</div>
<div class="line"><span class="lineno">  115</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa641520548259a83c82be403219e71406">IMP_FIREBOLT_RANK_2</a>:</div>
<div class="line"><span class="lineno">  116</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffad5d762472639e0c0e4c4e12facf8cab6">IMP_FIREBOLT_RANK_3</a>:</div>
<div class="line"><span class="lineno">  117</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa7eccd511642f2e5d0537d5059511aba7">IMP_FIREBOLT_RANK_4</a>:</div>
<div class="line"><span class="lineno">  118</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffaf3a0d7d7c4554f335bec7b31ac1821ac">IMP_FIREBOLT_RANK_5</a>:</div>
<div class="line"><span class="lineno">  119</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa6741051a9b4416d85efce89c68ebd2c5">IMP_FIREBOLT_RANK_6</a>:</div>
<div class="line"><span class="lineno">  120</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa789304c4db65564436821950d063de7a">IMP_FIREBOLT_RANK_7</a>:</div>
<div class="line"><span class="lineno">  121</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffaeda3e66d9782a330597fe42f0babfb25">IMP_FIREBOLT_RANK_8</a>:</div>
<div class="line"><span class="lineno">  122</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffab0b0d7d2597750db196c82204e5fa948">IMP_FIREBOLT_RANK_9</a>:</div>
<div class="line"><span class="lineno">  123</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa1afbd4a095d65be61fa03e05a1c49e1d">WATER_ELEMENTAL_WATERBOLT_1</a>:</div>
<div class="line"><span class="lineno">  124</span>                        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa5d7df8261631aa8076f63045a79896e1">WATER_ELEMENTAL_WATERBOLT_2</a>:</div>
<div class="line"><span class="lineno">  125</span>                            {</div>
<div class="line"><span class="lineno">  126</span>                                <a class="code hl_class" href="../../dd/df5/a10910.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(spellID);</div>
<div class="line"><span class="lineno">  127</span>                                <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> mana = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a>);</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>                                <span class="keywordflow">if</span> (mana &gt;= spellInfo-&gt;<a class="code hl_function" href="../../dd/df5/a10910.html#ad0c4a259fce678a7e551e18d90b0c795">CalcPowerCost</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>, spellInfo-&gt;<a class="code hl_function" href="../../dd/df5/a10910.html#a8dc618d81b8658f72b686f8ac9e90829">GetSchoolMask</a>()))</div>
<div class="line"><span class="lineno">  130</span>                                {</div>
<div class="line"><span class="lineno">  131</span>                                    <a class="code hl_variable" href="../../d0/dbe/a06026.html#a4b9d25512fc4f8c9f0eb538542f72644">combatRange</a> = spellInfo-&gt;<a class="code hl_function" href="../../dd/df5/a10910.html#ab2a598820f94464fba55f9706449ce25">GetMaxRange</a>();</div>
<div class="line"><span class="lineno">  132</span>                                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  133</span>                                }</div>
<div class="line"><span class="lineno">  134</span>                            }</div>
<div class="line"><span class="lineno">  135</span>                        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  136</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  137</span>                    }</div>
<div class="line"><span class="lineno">  138</span>                }</div>
<div class="line"><span class="lineno">  139</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  140</span>            }</div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  142</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  143</span>    }</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  146</span>}</div>
<div class="ttc" id="aa00497_html_a0bf9964a3ce962c07ad3d8b5432bbbcd"><div class="ttname"><a href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a></div><div class="ttdeci">std::int32_t int32</div><div class="ttdef"><b>Definition:</b> Define.h:103</div></div>
<div class="ttc" id="aa00497_html_a15a8d014fadf85c99a2268d8cbd00767"><div class="ttname"><a href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a></div><div class="ttdeci">std::uint8_t uint8</div><div class="ttdef"><b>Definition:</b> Define.h:109</div></div>
<div class="ttc" id="aa00497_html_a22f78cc9780bf32aff91ae17c3101c8d"><div class="ttname"><a href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a></div><div class="ttdeci">std::uint32_t uint32</div><div class="ttdef"><b>Definition:</b> Define.h:107</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414ab3e4f73d6494c917b99431bae75a4d5f">POWER_MANA</a></div><div class="ttdeci">@ POWER_MANA</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:269</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffa1afbd4a095d65be61fa03e05a1c49e1d"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa1afbd4a095d65be61fa03e05a1c49e1d">WATER_ELEMENTAL_WATERBOLT_1</a></div><div class="ttdeci">@ WATER_ELEMENTAL_WATERBOLT_1</div><div class="ttdef"><b>Definition:</b> PetAI.h:42</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffa2cec2788a794b1b4d9559fb23d4a5a99"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa2cec2788a794b1b4d9559fb23d4a5a99">ENTRY_WATER_ELEMENTAL_PERM</a></div><div class="ttdeci">@ ENTRY_WATER_ELEMENTAL_PERM</div><div class="ttdef"><b>Definition:</b> PetAI.h:31</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffa5d7df8261631aa8076f63045a79896e1"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa5d7df8261631aa8076f63045a79896e1">WATER_ELEMENTAL_WATERBOLT_2</a></div><div class="ttdeci">@ WATER_ELEMENTAL_WATERBOLT_2</div><div class="ttdef"><b>Definition:</b> PetAI.h:43</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffa641520548259a83c82be403219e71406"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa641520548259a83c82be403219e71406">IMP_FIREBOLT_RANK_2</a></div><div class="ttdeci">@ IMP_FIREBOLT_RANK_2</div><div class="ttdef"><b>Definition:</b> PetAI.h:34</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffa6741051a9b4416d85efce89c68ebd2c5"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa6741051a9b4416d85efce89c68ebd2c5">IMP_FIREBOLT_RANK_6</a></div><div class="ttdeci">@ IMP_FIREBOLT_RANK_6</div><div class="ttdef"><b>Definition:</b> PetAI.h:38</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffa789304c4db65564436821950d063de7a"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa789304c4db65564436821950d063de7a">IMP_FIREBOLT_RANK_7</a></div><div class="ttdeci">@ IMP_FIREBOLT_RANK_7</div><div class="ttdef"><b>Definition:</b> PetAI.h:39</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffa7eccd511642f2e5d0537d5059511aba7"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa7eccd511642f2e5d0537d5059511aba7">IMP_FIREBOLT_RANK_4</a></div><div class="ttdeci">@ IMP_FIREBOLT_RANK_4</div><div class="ttdef"><b>Definition:</b> PetAI.h:36</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffa8ef9e2169f6035568dc57b89cb823cd5"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffa8ef9e2169f6035568dc57b89cb823cd5">ENTRY_WATER_ELEMENTAL</a></div><div class="ttdeci">@ ENTRY_WATER_ELEMENTAL</div><div class="ttdef"><b>Definition:</b> PetAI.h:30</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffaa00bd8f04ba86fd6ec18af50421dcf1c"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffaa00bd8f04ba86fd6ec18af50421dcf1c">IMP_FIREBOLT_RANK_1</a></div><div class="ttdeci">@ IMP_FIREBOLT_RANK_1</div><div class="ttdef"><b>Definition:</b> PetAI.h:33</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffab0b0d7d2597750db196c82204e5fa948"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffab0b0d7d2597750db196c82204e5fa948">IMP_FIREBOLT_RANK_9</a></div><div class="ttdeci">@ IMP_FIREBOLT_RANK_9</div><div class="ttdef"><b>Definition:</b> PetAI.h:41</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffab9abb8f92c8fdad08f49606aafda6896"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffab9abb8f92c8fdad08f49606aafda6896">ENTRY_IMP</a></div><div class="ttdeci">@ ENTRY_IMP</div><div class="ttdef"><b>Definition:</b> PetAI.h:29</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffad5d762472639e0c0e4c4e12facf8cab6"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffad5d762472639e0c0e4c4e12facf8cab6">IMP_FIREBOLT_RANK_3</a></div><div class="ttdeci">@ IMP_FIREBOLT_RANK_3</div><div class="ttdef"><b>Definition:</b> PetAI.h:35</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffaeda3e66d9782a330597fe42f0babfb25"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffaeda3e66d9782a330597fe42f0babfb25">IMP_FIREBOLT_RANK_8</a></div><div class="ttdeci">@ IMP_FIREBOLT_RANK_8</div><div class="ttdef"><b>Definition:</b> PetAI.h:40</div></div>
<div class="ttc" id="aa02894_html_a22fe79e956db2d74e141a56fef6d1cffaf3a0d7d7c4554f335bec7b31ac1821ac"><div class="ttname"><a href="../../dc/d38/a02894.html#a22fe79e956db2d74e141a56fef6d1cffaf3a0d7d7c4554f335bec7b31ac1821ac">IMP_FIREBOLT_RANK_5</a></div><div class="ttdeci">@ IMP_FIREBOLT_RANK_5</div><div class="ttdef"><b>Definition:</b> PetAI.h:37</div></div>
<div class="ttc" id="aa03110_html_aa21e14d8e1145507b746a69b5487109d"><div class="ttname"><a href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a></div><div class="ttdeci">#define sSpellMgr</div><div class="ttdef"><b>Definition:</b> SpellMgr.h:825</div></div>
<div class="ttc" id="aa06026_html_a4b9d25512fc4f8c9f0eb538542f72644"><div class="ttname"><a href="../../d0/dbe/a06026.html#a4b9d25512fc4f8c9f0eb538542f72644">PetAI::combatRange</a></div><div class="ttdeci">float combatRange</div><div class="ttdef"><b>Definition:</b> PetAI.h:85</div></div>
<div class="ttc" id="aa06074_html_aee5bf3d421199445de241a34798ae819"><div class="ttname"><a href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">CreatureAI::me</a></div><div class="ttdeci">Creature *const me</div><div class="ttdef"><b>Definition:</b> CreatureAI.h:72</div></div>
<div class="ttc" id="aa07778_html_a0aa6b0526eeec473ca465cf4a1c23b31"><div class="ttname"><a href="../../df/d49/a07778.html#a0aa6b0526eeec473ca465cf4a1c23b31">Creature::GetPetAutoSpellSize</a></div><div class="ttdeci">virtual uint8 GetPetAutoSpellSize() const</div><div class="ttdef"><b>Definition:</b> Creature.h:320</div></div>
<div class="ttc" id="aa07778_html_acc2c5f7925a968c540b54b5f126a0f7d"><div class="ttname"><a href="../../df/d49/a07778.html#acc2c5f7925a968c540b54b5f126a0f7d">Creature::GetPetAutoSpellOnPos</a></div><div class="ttdeci">virtual uint32 GetPetAutoSpellOnPos(uint8 pos) const</div><div class="ttdef"><b>Definition:</b> Creature.h:321</div></div>
<div class="ttc" id="aa08150_html_aa627fe2967ed0e0ed1d8aeeb4365a961"><div class="ttname"><a href="../../d6/d80/a08150.html#aa627fe2967ed0e0ed1d8aeeb4365a961">Object::GetEntry</a></div><div class="ttdeci">uint32 GetEntry() const</div><div class="ttdef"><b>Definition:</b> Object.h:115</div></div>
<div class="ttc" id="aa08530_html_ad7e475d80b9af430cc076d7c01f967e9"><div class="ttname"><a href="../../de/d71/a08530.html#ad7e475d80b9af430cc076d7c01f967e9">Unit::GetPower</a></div><div class="ttdeci">uint32 GetPower(Powers power) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1056</div></div>
<div class="ttc" id="aa10910_html"><div class="ttname"><a href="../../dd/df5/a10910.html">SpellInfo</a></div><div class="ttdef"><b>Definition:</b> SpellInfo.h:316</div></div>
<div class="ttc" id="aa10910_html_a8dc618d81b8658f72b686f8ac9e90829"><div class="ttname"><a href="../../dd/df5/a10910.html#a8dc618d81b8658f72b686f8ac9e90829">SpellInfo::GetSchoolMask</a></div><div class="ttdeci">SpellSchoolMask GetSchoolMask() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1987</div></div>
<div class="ttc" id="aa10910_html_ab2a598820f94464fba55f9706449ce25"><div class="ttname"><a href="../../dd/df5/a10910.html#ab2a598820f94464fba55f9706449ce25">SpellInfo::GetMaxRange</a></div><div class="ttdeci">float GetMaxRange(bool positive=false, Unit *caster=nullptr, Spell *spell=nullptr) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:2323</div></div>
<div class="ttc" id="aa10910_html_ad0c4a259fce678a7e551e18d90b0c795"><div class="ttname"><a href="../../dd/df5/a10910.html#ad0c4a259fce678a7e551e18d90b0c795">SpellInfo::CalcPowerCost</a></div><div class="ttdeci">int32 CalcPowerCost(Unit const *caster, SpellSchoolMask schoolMask, Spell *spell=nullptr) const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:2401</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02401">SpellInfo::CalcPowerCost()</a>, <a class="el" href="../../#l00085">combatRange</a>, <a class="el" href="../../#l00029">ENTRY_IMP</a>, <a class="el" href="../../#l00030">ENTRY_WATER_ELEMENTAL</a>, <a class="el" href="../../#l00031">ENTRY_WATER_ELEMENTAL_PERM</a>, <a class="el" href="../../#l00115">Object::GetEntry()</a>, <a class="el" href="../../#l02323">SpellInfo::GetMaxRange()</a>, <a class="el" href="../../#l00321">Creature::GetPetAutoSpellOnPos()</a>, <a class="el" href="../../#l00320">Creature::GetPetAutoSpellSize()</a>, <a class="el" href="../../#l01056">Unit::GetPower()</a>, <a class="el" href="../../#l01987">SpellInfo::GetSchoolMask()</a>, <a class="el" href="../../#l00033">IMP_FIREBOLT_RANK_1</a>, <a class="el" href="../../#l00034">IMP_FIREBOLT_RANK_2</a>, <a class="el" href="../../#l00035">IMP_FIREBOLT_RANK_3</a>, <a class="el" href="../../#l00036">IMP_FIREBOLT_RANK_4</a>, <a class="el" href="../../#l00037">IMP_FIREBOLT_RANK_5</a>, <a class="el" href="../../#l00038">IMP_FIREBOLT_RANK_6</a>, <a class="el" href="../../#l00039">IMP_FIREBOLT_RANK_7</a>, <a class="el" href="../../#l00040">IMP_FIREBOLT_RANK_8</a>, <a class="el" href="../../#l00041">IMP_FIREBOLT_RANK_9</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00269">POWER_MANA</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, <a class="el" href="../../#l00042">WATER_ELEMENTAL_WATERBOLT_1</a>, and <a class="el" href="../../#l00043">WATER_ELEMENTAL_WATERBOLT_2</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00091">_doMeleeAttack()</a>, and <a class="el" href="../../#l00591">DoAttack()</a>.</p>

</div>
</div>
<a id="a9844910170b61d3f5e60783d0ec73322" name="a9844910170b61d3f5e60783d0ec73322"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9844910170b61d3f5e60783d0ec73322">&#9670;&#160;</a></span>_doMeleeAttack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::_doMeleeAttack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   92</span>{</div>
<div class="line"><span class="lineno">   93</span>    <span class="comment">// Xinef: Imps cannot attack with melee</span></div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d0/dbe/a06026.html#a25fb8a89f10d36e1189c8c77e0d9345e">_canMeleeAttack</a>())</div>
<div class="line"><span class="lineno">   95</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>    <a class="code hl_function" href="../../d9/de2/a06062.html#a348a472089a9be6210b58aace8fafa9f">DoMeleeAttackIfReady</a>();</div>
<div class="line"><span class="lineno">   98</span>}</div>
<div class="ttc" id="aa06026_html_a25fb8a89f10d36e1189c8c77e0d9345e"><div class="ttname"><a href="../../d0/dbe/a06026.html#a25fb8a89f10d36e1189c8c77e0d9345e">PetAI::_canMeleeAttack</a></div><div class="ttdeci">bool _canMeleeAttack()</div><div class="ttdef"><b>Definition:</b> PetAI.cpp:100</div></div>
<div class="ttc" id="aa06062_html_a348a472089a9be6210b58aace8fafa9f"><div class="ttname"><a href="../../d9/de2/a06062.html#a348a472089a9be6210b58aace8fafa9f">UnitAI::DoMeleeAttackIfReady</a></div><div class="ttdeci">void DoMeleeAttackIfReady()</div><div class="ttdef"><b>Definition:</b> UnitAI.cpp:39</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00100">_canMeleeAttack()</a>, and <a class="el" href="../../#l00039">UnitAI::DoMeleeAttackIfReady()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00148">UpdateAI()</a>.</p>

</div>
</div>
<a id="aa297cbcee57b47ade3bec433f8ca0cd3" name="aa297cbcee57b47ade3bec433f8ca0cd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa297cbcee57b47ade3bec433f8ca0cd3">&#9670;&#160;</a></span>_isVisible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool PetAI::_isVisible </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2db745b751d87fad8e473701e80b30cb" name="a2db745b751d87fad8e473701e80b30cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2db745b751d87fad8e473701e80b30cb">&#9670;&#160;</a></span>_needToStop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool PetAI::_needToStop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   50</span>{</div>
<div class="line"><span class="lineno">   51</span>    <span class="comment">// This is needed for charmed creatures, as once their target was reset other effects can trigger threat</span></div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a0679821cba7b3361497706bc348d8d32">IsCharmed</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() == <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a3e41c41854a54e38fbdff48ed8ce5062">GetCharmer</a>())</div>
<div class="line"><span class="lineno">   53</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>    <span class="comment">// xinef: dont allow to follow targets out of visibility range</span></div>
<div class="line"><span class="lineno">   56</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/dc8/a08226.html#a45b83c2b057421d190c01b819b513cdc">GetExactDist</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>()) &gt; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../db/df3/a08182.html#abc340e4279a3a719bf5e14ed332b722f">GetVisibilityRange</a>() - 5.0f)</div>
<div class="line"><span class="lineno">   57</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>    <span class="comment">// dont allow pets to follow targets far away from owner</span></div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* owner = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a7cdd398abd6ac328deb42529195e6add">GetCharmerOrOwner</a>())</div>
<div class="line"><span class="lineno">   61</span>        <span class="keywordflow">if</span> (owner-&gt;GetExactDist(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>) &gt;= (owner-&gt;GetVisibilityRange() - 10.0f))</div>
<div class="line"><span class="lineno">   62</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">return</span> !<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a42cd2388a23189619d6c0f8131040132">CanCreatureAttack</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>());</div>
<div class="line"><span class="lineno">   65</span>}</div>
<div class="ttc" id="aa07778_html_a42cd2388a23189619d6c0f8131040132"><div class="ttname"><a href="../../df/d49/a07778.html#a42cd2388a23189619d6c0f8131040132">Creature::CanCreatureAttack</a></div><div class="ttdeci">bool CanCreatureAttack(Unit const *victim, bool skipDistCheck=false) const</div><div class="ttdef"><b>Definition:</b> Creature.cpp:2625</div></div>
<div class="ttc" id="aa08182_html_abc340e4279a3a719bf5e14ed332b722f"><div class="ttname"><a href="../../db/df3/a08182.html#abc340e4279a3a719bf5e14ed332b722f">WorldObject::GetVisibilityRange</a></div><div class="ttdeci">float GetVisibilityRange() const</div><div class="ttdef"><b>Definition:</b> Object.cpp:1656</div></div>
<div class="ttc" id="aa08226_html_a45b83c2b057421d190c01b819b513cdc"><div class="ttname"><a href="../../d6/dc8/a08226.html#a45b83c2b057421d190c01b819b513cdc">Position::GetExactDist</a></div><div class="ttdeci">float GetExactDist(float x, float y, float z) const</div><div class="ttdef"><b>Definition:</b> Position.h:177</div></div>
<div class="ttc" id="aa08530_html"><div class="ttname"><a href="../../de/d71/a08530.html">Unit</a></div><div class="ttdef"><b>Definition:</b> Unit.h:630</div></div>
<div class="ttc" id="aa08530_html_a0679821cba7b3361497706bc348d8d32"><div class="ttname"><a href="../../de/d71/a08530.html#a0679821cba7b3361497706bc348d8d32">Unit::IsCharmed</a></div><div class="ttdeci">bool IsCharmed() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1235</div></div>
<div class="ttc" id="aa08530_html_a3e41c41854a54e38fbdff48ed8ce5062"><div class="ttname"><a href="../../de/d71/a08530.html#a3e41c41854a54e38fbdff48ed8ce5062">Unit::GetCharmer</a></div><div class="ttdeci">Unit * GetCharmer() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10608</div></div>
<div class="ttc" id="aa08530_html_a7cdd398abd6ac328deb42529195e6add"><div class="ttname"><a href="../../de/d71/a08530.html#a7cdd398abd6ac328deb42529195e6add">Unit::GetCharmerOrOwner</a></div><div class="ttdeci">Unit * GetCharmerOrOwner() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1211</div></div>
<div class="ttc" id="aa08530_html_aae09d03a474ea5517d671e64dc393739"><div class="ttname"><a href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">Unit::GetVictim</a></div><div class="ttdeci">Unit * GetVictim() const</div><div class="ttdef"><b>Definition:</b> Unit.h:853</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02625">Creature::CanCreatureAttack()</a>, <a class="el" href="../../#l10608">Unit::GetCharmer()</a>, <a class="el" href="../../#l01211">Unit::GetCharmerOrOwner()</a>, <a class="el" href="../../#l00177">Position::GetExactDist()</a>, <a class="el" href="../../#l00853">Unit::GetVictim()</a>, <a class="el" href="../../#l01656">WorldObject::GetVisibilityRange()</a>, <a class="el" href="../../#l01235">Unit::IsCharmed()</a>, and <a class="el" href="../../#l00072">CreatureAI::me</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00148">UpdateAI()</a>.</p>

</div>
</div>
<a id="ad917a38ff0553bd974694f37242076b0" name="ad917a38ff0553bd974694f37242076b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad917a38ff0553bd974694f37242076b0">&#9670;&#160;</a></span>_stopAttack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::_stopAttack </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   73</span>{</div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno">   75</span>    {</div>
<div class="line"><span class="lineno">   76</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;entities.unit.ai&quot;</span>, <span class="stringliteral">&quot;Creature stoped attacking cuz his dead [{}]&quot;</span>, <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../d9/d08/a08198.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>());</div>
<div class="line"><span class="lineno">   77</span>        <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#afa6ffa9c5d6897f3aad3ac524c7bb35a">Clear</a>();</div>
<div class="line"><span class="lineno">   78</span>        <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#ad0697d75ff06afb1247424100c99619f">MoveIdle</a>();</div>
<div class="line"><span class="lineno">   79</span>        <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a18f77484ed2acc7be7fa29d1df7a0c12">CombatStop</a>();</div>
<div class="line"><span class="lineno">   80</span>        <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a83fe30829a1470536e408efbf56dd5f5">getHostileRefMgr</a>().<a class="code hl_function" href="../../d3/dd4/a07606.html#a0327a7238535a3d0961da1cca2102b0e">deleteReferences</a>();</div>
<div class="line"><span class="lineno">   81</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   82</span>    }</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aee07e22b70ed433a845b0673579d5fee">AttackStop</a>();</div>
<div class="line"><span class="lineno">   85</span>    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a2bdfe38bdc28869a9002094e4341d56e">InterruptNonMeleeSpells</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">   86</span>    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#aeb43c19961bd58b4e2ad114f2d4b5aa2">SetIsCommandAttack</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">   87</span>    <a class="code hl_function" href="../../d0/dbe/a06026.html#ac444db9042968b0d7aff3fe2cb2e00ae">ClearCharmInfoFlags</a>();</div>
<div class="line"><span class="lineno">   88</span>    <a class="code hl_function" href="../../d0/dbe/a06026.html#aebd92475342c2905052a2ea9601c1423">HandleReturnMovement</a>();</div>
<div class="line"><span class="lineno">   89</span>}</div>
<div class="ttc" id="aa00035_html_a47ac782b14a7531c6232777165a1a161"><div class="ttname"><a href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG(filterType__,...)</div><div class="ttdef"><b>Definition:</b> Log.h:169</div></div>
<div class="ttc" id="aa06026_html_ac444db9042968b0d7aff3fe2cb2e00ae"><div class="ttname"><a href="../../d0/dbe/a06026.html#ac444db9042968b0d7aff3fe2cb2e00ae">PetAI::ClearCharmInfoFlags</a></div><div class="ttdeci">void ClearCharmInfoFlags()</div><div class="ttdef"><b>Definition:</b> PetAI.cpp:767</div></div>
<div class="ttc" id="aa06026_html_aebd92475342c2905052a2ea9601c1423"><div class="ttname"><a href="../../d0/dbe/a06026.html#aebd92475342c2905052a2ea9601c1423">PetAI::HandleReturnMovement</a></div><div class="ttdeci">void HandleReturnMovement()</div><div class="ttdef"><b>Definition:</b> PetAI.cpp:525</div></div>
<div class="ttc" id="aa07606_html_a0327a7238535a3d0961da1cca2102b0e"><div class="ttname"><a href="../../d3/dd4/a07606.html#a0327a7238535a3d0961da1cca2102b0e">HostileRefMgr::deleteReferences</a></div><div class="ttdeci">void deleteReferences(bool removeFromMap=false)</div><div class="ttdef"><b>Definition:</b> HostileRefMgr.cpp:125</div></div>
<div class="ttc" id="aa08150_html_ad23b997e2442fa6a6228ba73a7ecc138"><div class="ttname"><a href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">Object::GetGUID</a></div><div class="ttdeci">static ObjectGuid GetGUID(Object const *o)</div><div class="ttdef"><b>Definition:</b> Object.h:112</div></div>
<div class="ttc" id="aa08198_html_a78f5fb47e3b35addf8984000c175125b"><div class="ttname"><a href="../../d9/d08/a08198.html#a78f5fb47e3b35addf8984000c175125b">ObjectGuid::ToString</a></div><div class="ttdeci">std::string ToString() const</div><div class="ttdef"><b>Definition:</b> ObjectGuid.cpp:47</div></div>
<div class="ttc" id="aa08462_html_aeb43c19961bd58b4e2ad114f2d4b5aa2"><div class="ttname"><a href="../../d8/dea/a08462.html#aeb43c19961bd58b4e2ad114f2d4b5aa2">CharmInfo::SetIsCommandAttack</a></div><div class="ttdeci">void SetIsCommandAttack(bool val)</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:303</div></div>
<div class="ttc" id="aa08530_html_a18f77484ed2acc7be7fa29d1df7a0c12"><div class="ttname"><a href="../../de/d71/a08530.html#a18f77484ed2acc7be7fa29d1df7a0c12">Unit::CombatStop</a></div><div class="ttdeci">void CombatStop(bool includingCast=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10436</div></div>
<div class="ttc" id="aa08530_html_a2bdfe38bdc28869a9002094e4341d56e"><div class="ttname"><a href="../../de/d71/a08530.html#a2bdfe38bdc28869a9002094e4341d56e">Unit::InterruptNonMeleeSpells</a></div><div class="ttdeci">void InterruptNonMeleeSpells(bool withDelayed, uint32 spellid=0, bool withInstant=true, bool bySelf=false)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:4129</div></div>
<div class="ttc" id="aa08530_html_a4a04a3f22c3b0d6f4933993ac0cc7aa4"><div class="ttname"><a href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">Unit::GetMotionMaster</a></div><div class="ttdeci">MotionMaster * GetMotionMaster()</div><div class="ttdef"><b>Definition:</b> Unit.h:1620</div></div>
<div class="ttc" id="aa08530_html_a5ea3f54af571493f7889220724667189"><div class="ttname"><a href="../../de/d71/a08530.html#a5ea3f54af571493f7889220724667189">Unit::IsAlive</a></div><div class="ttdeci">bool IsAlive() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1654</div></div>
<div class="ttc" id="aa08530_html_a66f99d0d7cdf9c7013788fe6265a5c3b"><div class="ttname"><a href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">Unit::GetCharmInfo</a></div><div class="ttdeci">CharmInfo * GetCharmInfo()</div><div class="ttdef"><b>Definition:</b> Unit.h:1206</div></div>
<div class="ttc" id="aa08530_html_a83fe30829a1470536e408efbf56dd5f5"><div class="ttname"><a href="../../de/d71/a08530.html#a83fe30829a1470536e408efbf56dd5f5">Unit::getHostileRefMgr</a></div><div class="ttdeci">HostileRefMgr &amp; getHostileRefMgr()</div><div class="ttdef"><b>Definition:</b> Unit.h:907</div></div>
<div class="ttc" id="aa08530_html_aee07e22b70ed433a845b0673579d5fee"><div class="ttname"><a href="../../de/d71/a08530.html#aee07e22b70ed433a845b0673579d5fee">Unit::AttackStop</a></div><div class="ttdeci">bool AttackStop()</div><div class="ttdoc">Force the unit to stop attacking. This will clear UNIT_STATE_MELEE_ATTACKING, Interrupt current spell...</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10403</div></div>
<div class="ttc" id="aa09674_html_ad0697d75ff06afb1247424100c99619f"><div class="ttname"><a href="../../da/df6/a09674.html#ad0697d75ff06afb1247424100c99619f">MotionMaster::MoveIdle</a></div><div class="ttdeci">void MoveIdle()</div><div class="ttdef"><b>Definition:</b> MotionMaster.cpp:232</div></div>
<div class="ttc" id="aa09674_html_afa6ffa9c5d6897f3aad3ac524c7bb35a"><div class="ttname"><a href="../../da/df6/a09674.html#afa6ffa9c5d6897f3aad3ac524c7bb35a">MotionMaster::Clear</a></div><div class="ttdeci">void Clear(bool reset=true)</div><div class="ttdef"><b>Definition:</b> MotionMaster.h:167</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l10403">Unit::AttackStop()</a>, <a class="el" href="../../#l00167">MotionMaster::Clear()</a>, <a class="el" href="../../#l00767">ClearCharmInfoFlags()</a>, <a class="el" href="../../#l10436">Unit::CombatStop()</a>, <a class="el" href="../../#l00125">HostileRefMgr::deleteReferences()</a>, <a class="el" href="../../#l01206">Unit::GetCharmInfo()</a>, <a class="el" href="../../#l00112">Object::GetGUID()</a>, <a class="el" href="../../#l00907">Unit::getHostileRefMgr()</a>, <a class="el" href="../../#l01620">Unit::GetMotionMaster()</a>, <a class="el" href="../../#l00525">HandleReturnMovement()</a>, <a class="el" href="../../#l04129">Unit::InterruptNonMeleeSpells()</a>, <a class="el" href="../../#l01654">Unit::IsAlive()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00232">MotionMaster::MoveIdle()</a>, <a class="el" href="../../#l00303">CharmInfo::SetIsCommandAttack()</a>, and <a class="el" href="../../#l00047">ObjectGuid::ToString()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00067">PetStopAttack()</a>, and <a class="el" href="../../#l00148">UpdateAI()</a>.</p>

</div>
</div>
<a id="ae395f8a622199714c0204f8df0bd3c0d" name="ae395f8a622199714c0204f8df0bd3c0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae395f8a622199714c0204f8df0bd3c0d">&#9670;&#160;</a></span>AttackedBy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::AttackedBy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>attacker</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="../../dc/d36/a06074.html#a57b18b733f139df7116009c73a78fd4b">CreatureAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  784</span>{</div>
<div class="line"><span class="lineno">  785</span>    <span class="comment">// Called when pet takes damage. This function helps keep pets from running off</span></div>
<div class="line"><span class="lineno">  786</span>    <span class="comment">//  simply due to gaining aggro.</span></div>
<div class="line"><span class="lineno">  787</span> </div>
<div class="line"><span class="lineno">  788</span>    <span class="keywordflow">if</span> (!attacker)</div>
<div class="line"><span class="lineno">  789</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>    <span class="comment">// Passive pets don&#39;t do anything</span></div>
<div class="line"><span class="lineno">  792</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a46a7576522c3b964bd50388091f95951">HasReactState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37a8b5a7f923cba80ea3a429286eb38d0a0">REACT_PASSIVE</a>))</div>
<div class="line"><span class="lineno">  793</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  794</span> </div>
<div class="line"><span class="lineno">  795</span>    <span class="comment">// Prevent pet from disengaging from current target</span></div>
<div class="line"><span class="lineno">  796</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>()-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno">  797</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  798</span> </div>
<div class="line"><span class="lineno">  799</span>    <span class="comment">// Continue to evaluate and attack if necessary</span></div>
<div class="line"><span class="lineno">  800</span>    <a class="code hl_function" href="../../d0/dbe/a06026.html#a2b6e07ca92d367bcd3e3d27bf6e5cc9b">AttackStart</a>(attacker);</div>
<div class="line"><span class="lineno">  801</span>}</div>
<div class="ttc" id="aa03515_html_a5e9099d162ad74df5a3e3f5c0f056c37a8b5a7f923cba80ea3a429286eb38d0a0"><div class="ttname"><a href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37a8b5a7f923cba80ea3a429286eb38d0a0">REACT_PASSIVE</a></div><div class="ttdeci">@ REACT_PASSIVE</div><div class="ttdef"><b>Definition:</b> Unit.h:548</div></div>
<div class="ttc" id="aa06026_html_a2b6e07ca92d367bcd3e3d27bf6e5cc9b"><div class="ttname"><a href="../../d0/dbe/a06026.html#a2b6e07ca92d367bcd3e3d27bf6e5cc9b">PetAI::AttackStart</a></div><div class="ttdeci">void AttackStart(Unit *target) override</div><div class="ttdef"><b>Definition:</b> PetAI.cpp:417</div></div>
<div class="ttc" id="aa07778_html_a46a7576522c3b964bd50388091f95951"><div class="ttname"><a href="../../df/d49/a07778.html#a46a7576522c3b964bd50388091f95951">Creature::HasReactState</a></div><div class="ttdeci">bool HasReactState(ReactStates state) const</div><div class="ttdef"><b>Definition:</b> Creature.h:96</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00417">AttackStart()</a>, <a class="el" href="../../#l00853">Unit::GetVictim()</a>, <a class="el" href="../../#l00096">Creature::HasReactState()</a>, <a class="el" href="../../#l01654">Unit::IsAlive()</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, and <a class="el" href="../../#l00548">REACT_PASSIVE</a>.</p>

</div>
</div>
<a id="a2b6e07ca92d367bcd3e3d27bf6e5cc9b" name="a2b6e07ca92d367bcd3e3d27bf6e5cc9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b6e07ca92d367bcd3e3d27bf6e5cc9b">&#9670;&#160;</a></span>AttackStart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::AttackStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="../../d9/de2/a06062.html#ae120634c255d365f1567e341e2cf1feb">UnitAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  418</span>{</div>
<div class="line"><span class="lineno">  419</span>    <span class="comment">// Overrides Unit::AttackStart to correctly evaluate Pet states</span></div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>    <span class="comment">// Check all pet states to decide if we can attack this target</span></div>
<div class="line"><span class="lineno">  422</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d0/dbe/a06026.html#acccb6f24c7b1bb0762d542fdc013b330">CanAttack</a>(target))</div>
<div class="line"><span class="lineno">  423</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>    <span class="comment">// Only chase if not commanded to stay or if stay but commanded to attack</span></div>
<div class="line"><span class="lineno">  426</span>    <a class="code hl_function" href="../../d0/dbe/a06026.html#a9db3295e6d83e5407c8a55b004ccf4c7">DoAttack</a>(target, (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#ab817266875b889133f8297d31c0f911e">HasCommandState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#af147d8054b617fd731305de8a69bd257ab33055c9492afc567e3a602f88347ca5">COMMAND_STAY</a>) || <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a2589e58973f407555d8f6c95c89f378e">IsCommandAttack</a>()));</div>
<div class="line"><span class="lineno">  427</span>}</div>
<div class="ttc" id="aa03515_html_af147d8054b617fd731305de8a69bd257ab33055c9492afc567e3a602f88347ca5"><div class="ttname"><a href="../../de/d3d/a03515.html#af147d8054b617fd731305de8a69bd257ab33055c9492afc567e3a602f88347ca5">COMMAND_STAY</a></div><div class="ttdeci">@ COMMAND_STAY</div><div class="ttdef"><b>Definition:</b> Unit.h:555</div></div>
<div class="ttc" id="aa06026_html_a9db3295e6d83e5407c8a55b004ccf4c7"><div class="ttname"><a href="../../d0/dbe/a06026.html#a9db3295e6d83e5407c8a55b004ccf4c7">PetAI::DoAttack</a></div><div class="ttdeci">void DoAttack(Unit *target, bool chase)</div><div class="ttdef"><b>Definition:</b> PetAI.cpp:591</div></div>
<div class="ttc" id="aa06026_html_acccb6f24c7b1bb0762d542fdc013b330"><div class="ttname"><a href="../../d0/dbe/a06026.html#acccb6f24c7b1bb0762d542fdc013b330">PetAI::CanAttack</a></div><div class="ttdeci">bool CanAttack(Unit *target, SpellInfo const *spellInfo=nullptr)</div><div class="ttdef"><b>Definition:</b> PetAI.cpp:666</div></div>
<div class="ttc" id="aa08462_html_a2589e58973f407555d8f6c95c89f378e"><div class="ttname"><a href="../../d8/dea/a08462.html#a2589e58973f407555d8f6c95c89f378e">CharmInfo::IsCommandAttack</a></div><div class="ttdeci">bool IsCommandAttack()</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:308</div></div>
<div class="ttc" id="aa08462_html_ab817266875b889133f8297d31c0f911e"><div class="ttname"><a href="../../d8/dea/a08462.html#ab817266875b889133f8297d31c0f911e">CharmInfo::HasCommandState</a></div><div class="ttdeci">bool HasCommandState(CommandStates state) const</div><div class="ttdef"><b>Definition:</b> CharmInfo.h:137</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00666">CanAttack()</a>, <a class="el" href="../../#l00555">COMMAND_STAY</a>, <a class="el" href="../../#l00591">DoAttack()</a>, <a class="el" href="../../#l01206">Unit::GetCharmInfo()</a>, <a class="el" href="../../#l00137">CharmInfo::HasCommandState()</a>, <a class="el" href="../../#l00308">CharmInfo::IsCommandAttack()</a>, and <a class="el" href="../../#l00072">CreatureAI::me</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00783">AttackedBy()</a>, <a class="el" href="../../#l00392">KilledUnit()</a>, <a class="el" href="../../#l00449">OwnerAttacked()</a>, <a class="el" href="../../#l00429">OwnerAttackedBy()</a>, <a class="el" href="../../#l00062">npc_pet_pri_shadowfiend::Reset()</a>, and <a class="el" href="../../#l00148">UpdateAI()</a>.</p>

</div>
</div>
<a id="acccb6f24c7b1bb0762d542fdc013b330" name="acccb6f24c7b1bb0762d542fdc013b330"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acccb6f24c7b1bb0762d542fdc013b330">&#9670;&#160;</a></span>CanAttack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool PetAI::CanAttack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/df5/a10910.html">SpellInfo</a> const *&#160;</td>
          <td class="paramname"><em>spellInfo</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  667</span>{</div>
<div class="line"><span class="lineno">  668</span>    <span class="comment">// Evaluates wether a pet can attack a specific target based on CommandState, ReactState and other flags</span></div>
<div class="line"><span class="lineno">  669</span>    <span class="comment">// IMPORTANT: The order in which things are checked is important, be careful if you add or remove checks</span></div>
<div class="line"><span class="lineno">  670</span> </div>
<div class="line"><span class="lineno">  671</span>    <span class="comment">// Hmmm...</span></div>
<div class="line"><span class="lineno">  672</span>    <span class="keywordflow">if</span> (!target)</div>
<div class="line"><span class="lineno">  673</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  674</span> </div>
<div class="line"><span class="lineno">  675</span>    <span class="keywordflow">if</span> (!target-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno">  676</span>    {</div>
<div class="line"><span class="lineno">  677</span>        <span class="comment">// xinef: if target is invalid, pet should evade automaticly</span></div>
<div class="line"><span class="lineno">  678</span>        <span class="comment">// Clear target to prevent getting stuck on dead targets</span></div>
<div class="line"><span class="lineno">  679</span>        <span class="comment">//me-&gt;AttackStop();</span></div>
<div class="line"><span class="lineno">  680</span>        <span class="comment">//me-&gt;InterruptNonMeleeSpells(false);</span></div>
<div class="line"><span class="lineno">  681</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  682</span>    }</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>    <span class="comment">// xinef: check unit states of pet</span></div>
<div class="line"><span class="lineno">  685</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a34a7a71af516d15da1a0fff2d4c6eba9">UNIT_STATE_LOST_CONTROL</a>))</div>
<div class="line"><span class="lineno">  686</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  687</span> </div>
<div class="line"><span class="lineno">  688</span>    <span class="comment">// xinef: pets of mounted players have stunned flag only, check this also</span></div>
<div class="line"><span class="lineno">  689</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4af419c3eef4085ecaad8fd08e536800">HasUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a20d03528858479b31941a42820257eeb">UNIT_FLAG_STUNNED</a>))</div>
<div class="line"><span class="lineno">  690</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  691</span> </div>
<div class="line"><span class="lineno">  692</span>    <span class="comment">// pussywizard: TEMP!</span></div>
<div class="line"><span class="lineno">  693</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>())</div>
<div class="line"><span class="lineno">  694</span>    {</div>
<div class="line"><span class="lineno">  695</span>        <a class="code hl_define" href="../../d4/d8c/a00035.html#a271e427d8e8481efd5cd5f537ec9e419">LOG_INFO</a>(<span class="stringliteral">&quot;misc&quot;</span>, <span class="stringliteral">&quot;PetAI::CanAttack (A1) - {}, {}&quot;</span>, <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#aa627fe2967ed0e0ed1d8aeeb4365a961">GetEntry</a>(), <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>().<a class="code hl_function" href="../../d9/d08/a08198.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>());</div>
<div class="line"><span class="lineno">  696</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  697</span>    }</div>
<div class="line"><span class="lineno">  698</span> </div>
<div class="line"><span class="lineno">  699</span>    <span class="comment">// Passive - passive pets can attack if told to</span></div>
<div class="line"><span class="lineno">  700</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a46a7576522c3b964bd50388091f95951">HasReactState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37a8b5a7f923cba80ea3a429286eb38d0a0">REACT_PASSIVE</a>))</div>
<div class="line"><span class="lineno">  701</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a2589e58973f407555d8f6c95c89f378e">IsCommandAttack</a>();</div>
<div class="line"><span class="lineno">  702</span> </div>
<div class="line"><span class="lineno">  703</span>    <span class="comment">// CC - mobs under crowd control can be attacked if owner commanded</span></div>
<div class="line"><span class="lineno">  704</span>    <span class="keywordflow">if</span> (target-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a27f82c66a0abd2cbfcb95511934f82da">HasBreakableByDamageCrowdControlAura</a>() &amp;&amp; (!spellInfo || !spellInfo-&gt;HasAttribute(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#aec1a0b3970de527f109db7fb8b7df5b6ad67c11c16b7239803ce216691ed50360">SPELL_ATTR4_REACTIVE_DAMAGE_PROC</a>)))</div>
<div class="line"><span class="lineno">  705</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a2589e58973f407555d8f6c95c89f378e">IsCommandAttack</a>();</div>
<div class="line"><span class="lineno">  706</span> </div>
<div class="line"><span class="lineno">  707</span>    <span class="comment">// Returning - pets ignore attacks only if owner clicked follow</span></div>
<div class="line"><span class="lineno">  708</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a6c7fd5cb2ad02009e66d53b0da537947">IsReturning</a>())</div>
<div class="line"><span class="lineno">  709</span>        <span class="keywordflow">return</span> !<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#ad773a76312512848455f04490f494539">IsCommandFollow</a>();</div>
<div class="line"><span class="lineno">  710</span> </div>
<div class="line"><span class="lineno">  711</span>    <span class="comment">// Stay - can attack if target is within range or commanded to</span></div>
<div class="line"><span class="lineno">  712</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#ab817266875b889133f8297d31c0f911e">HasCommandState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#af147d8054b617fd731305de8a69bd257ab33055c9492afc567e3a602f88347ca5">COMMAND_STAY</a>))</div>
<div class="line"><span class="lineno">  713</span>        <span class="keywordflow">return</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a748fa068a1b1b9850141f91ff17fc65d">IsWithinMeleeRange</a>(target) || <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a2589e58973f407555d8f6c95c89f378e">IsCommandAttack</a>());</div>
<div class="line"><span class="lineno">  714</span> </div>
<div class="line"><span class="lineno">  715</span>    <span class="comment">//  Pets attacking something (or chasing) should only switch targets if owner tells them to</span></div>
<div class="line"><span class="lineno">  716</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() != target)</div>
<div class="line"><span class="lineno">  717</span>    {</div>
<div class="line"><span class="lineno">  718</span>        <span class="comment">// Forced change target if it&#39;s taunt</span></div>
<div class="line"><span class="lineno">  719</span>        <span class="keywordflow">if</span> (spellInfo &amp;&amp; spellInfo-&gt;HasAura(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a>))</div>
<div class="line"><span class="lineno">  720</span>        {</div>
<div class="line"><span class="lineno">  721</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  722</span>        }</div>
<div class="line"><span class="lineno">  723</span> </div>
<div class="line"><span class="lineno">  724</span>        <span class="comment">// Check if our owner selected this target and clicked &quot;attack&quot;</span></div>
<div class="line"><span class="lineno">  725</span>        <a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* ownerTarget = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  726</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d86/a08398.html">Player</a>* owner = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a7cdd398abd6ac328deb42529195e6add">GetCharmerOrOwner</a>()-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>())</div>
<div class="line"><span class="lineno">  727</span>            ownerTarget = owner-&gt;GetSelectedUnit();</div>
<div class="line"><span class="lineno">  728</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  729</span>            ownerTarget = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a7cdd398abd6ac328deb42529195e6add">GetCharmerOrOwner</a>()-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>();</div>
<div class="line"><span class="lineno">  730</span> </div>
<div class="line"><span class="lineno">  731</span>        <span class="keywordflow">if</span> (ownerTarget &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a2589e58973f407555d8f6c95c89f378e">IsCommandAttack</a>())</div>
<div class="line"><span class="lineno">  732</span>            <span class="keywordflow">return</span> (target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>() == ownerTarget-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno">  733</span>    }</div>
<div class="line"><span class="lineno">  734</span> </div>
<div class="line"><span class="lineno">  735</span>    <span class="comment">// Follow</span></div>
<div class="line"><span class="lineno">  736</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#ab817266875b889133f8297d31c0f911e">HasCommandState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#af147d8054b617fd731305de8a69bd257af73d9126113ee58d7e19783dd3c38c45">COMMAND_FOLLOW</a>))</div>
<div class="line"><span class="lineno">  737</span>        <span class="keywordflow">return</span> !<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a6c7fd5cb2ad02009e66d53b0da537947">IsReturning</a>();</div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span>    <span class="comment">// default, though we shouldn&#39;t ever get here</span></div>
<div class="line"><span class="lineno">  740</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  741</span>}</div>
<div class="ttc" id="aa00035_html_a271e427d8e8481efd5cd5f537ec9e419"><div class="ttname"><a href="../../d4/d8c/a00035.html#a271e427d8e8481efd5cd5f537ec9e419">LOG_INFO</a></div><div class="ttdeci">#define LOG_INFO(filterType__,...)</div><div class="ttdef"><b>Definition:</b> Log.h:165</div></div>
<div class="ttc" id="aa02771_html_aec1a0b3970de527f109db7fb8b7df5b6ad67c11c16b7239803ce216691ed50360"><div class="ttname"><a href="../../d0/dbd/a02771.html#aec1a0b3970de527f109db7fb8b7df5b6ad67c11c16b7239803ce216691ed50360">SPELL_ATTR4_REACTIVE_DAMAGE_PROC</a></div><div class="ttdeci">@ SPELL_ATTR4_REACTIVE_DAMAGE_PROC</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:544</div></div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a></div><div class="ttdeci">@ SPELL_AURA_MOD_TAUNT</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:74</div></div>
<div class="ttc" id="aa03515_html_af147d8054b617fd731305de8a69bd257af73d9126113ee58d7e19783dd3c38c45"><div class="ttname"><a href="../../de/d3d/a03515.html#af147d8054b617fd731305de8a69bd257af73d9126113ee58d7e19783dd3c38c45">COMMAND_FOLLOW</a></div><div class="ttdeci">@ COMMAND_FOLLOW</div><div class="ttdef"><b>Definition:</b> Unit.h:556</div></div>
<div class="ttc" id="aa03521_html_ae51d2ecb71f7a5cb3882982a622c9544a34a7a71af516d15da1a0fff2d4c6eba9"><div class="ttname"><a href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544a34a7a71af516d15da1a0fff2d4c6eba9">UNIT_STATE_LOST_CONTROL</a></div><div class="ttdeci">@ UNIT_STATE_LOST_CONTROL</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:191</div></div>
<div class="ttc" id="aa03521_html_affdd0d554c8bcaaa85a879f5a9d60934a20d03528858479b31941a42820257eeb"><div class="ttname"><a href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934a20d03528858479b31941a42820257eeb">UNIT_FLAG_STUNNED</a></div><div class="ttdeci">@ UNIT_FLAG_STUNNED</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:247</div></div>
<div class="ttc" id="aa08150_html_a328d5f752cc33ed398b3d9861ef6929d"><div class="ttname"><a href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">Object::ToPlayer</a></div><div class="ttdeci">Player * ToPlayer()</div><div class="ttdef"><b>Definition:</b> Object.h:201</div></div>
<div class="ttc" id="aa08398_html"><div class="ttname"><a href="../../d9/d86/a08398.html">Player</a></div><div class="ttdef"><b>Definition:</b> Player.h:1081</div></div>
<div class="ttc" id="aa08462_html_a6c7fd5cb2ad02009e66d53b0da537947"><div class="ttname"><a href="../../d8/dea/a08462.html#a6c7fd5cb2ad02009e66d53b0da537947">CharmInfo::IsReturning</a></div><div class="ttdeci">bool IsReturning()</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:390</div></div>
<div class="ttc" id="aa08462_html_ad773a76312512848455f04490f494539"><div class="ttname"><a href="../../d8/dea/a08462.html#ad773a76312512848455f04490f494539">CharmInfo::IsCommandFollow</a></div><div class="ttdeci">bool IsCommandFollow()</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:318</div></div>
<div class="ttc" id="aa08530_html_a27f82c66a0abd2cbfcb95511934f82da"><div class="ttname"><a href="../../de/d71/a08530.html#a27f82c66a0abd2cbfcb95511934f82da">Unit::HasBreakableByDamageCrowdControlAura</a></div><div class="ttdeci">bool HasBreakableByDamageCrowdControlAura(Unit *excludeCasterChannel=nullptr) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:787</div></div>
<div class="ttc" id="aa08530_html_a4af419c3eef4085ecaad8fd08e536800"><div class="ttname"><a href="../../de/d71/a08530.html#a4af419c3eef4085ecaad8fd08e536800">Unit::HasUnitFlag</a></div><div class="ttdeci">bool HasUnitFlag(UnitFlags flags) const</div><div class="ttdef"><b>Definition:</b> Unit.h:712</div></div>
<div class="ttc" id="aa08530_html_a748fa068a1b1b9850141f91ff17fc65d"><div class="ttname"><a href="../../de/d71/a08530.html#a748fa068a1b1b9850141f91ff17fc65d">Unit::IsWithinMeleeRange</a></div><div class="ttdeci">bool IsWithinMeleeRange(Unit const *obj, float dist=0.f) const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:664</div></div>
<div class="ttc" id="aa08530_html_ab78147cd520d2dac6be709b4c80a7de3"><div class="ttname"><a href="../../de/d71/a08530.html#ab78147cd520d2dac6be709b4c80a7de3">Unit::HasUnitState</a></div><div class="ttdeci">bool HasUnitState(const uint32 f) const</div><div class="ttdef"><b>Definition:</b> Unit.h:701</div></div>
<div class="ttc" id="aa08530_html_ac0f51b4cac0b9ad35347a50a91826785"><div class="ttname"><a href="../../de/d71/a08530.html#ac0f51b4cac0b9ad35347a50a91826785">Unit::GetOwnerGUID</a></div><div class="ttdeci">ObjectGuid GetOwnerGUID() const</div><div class="ttdef"><b>Definition:</b> Unit.h:678</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00556">COMMAND_FOLLOW</a>, <a class="el" href="../../#l00555">COMMAND_STAY</a>, <a class="el" href="../../#l01211">Unit::GetCharmerOrOwner()</a>, <a class="el" href="../../#l01206">Unit::GetCharmInfo()</a>, <a class="el" href="../../#l00115">Object::GetEntry()</a>, <a class="el" href="../../#l00112">Object::GetGUID()</a>, <a class="el" href="../../#l00678">Unit::GetOwnerGUID()</a>, <a class="el" href="../../#l00853">Unit::GetVictim()</a>, <a class="el" href="../../#l00415">SpellInfo::HasAttribute()</a>, <a class="el" href="../../#l00893">SpellInfo::HasAura()</a>, <a class="el" href="../../#l00787">Unit::HasBreakableByDamageCrowdControlAura()</a>, <a class="el" href="../../#l00137">CharmInfo::HasCommandState()</a>, <a class="el" href="../../#l00096">Creature::HasReactState()</a>, <a class="el" href="../../#l00712">Unit::HasUnitFlag()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l01654">Unit::IsAlive()</a>, <a class="el" href="../../#l00308">CharmInfo::IsCommandAttack()</a>, <a class="el" href="../../#l00318">CharmInfo::IsCommandFollow()</a>, <a class="el" href="../../#l00390">CharmInfo::IsReturning()</a>, <a class="el" href="../../#l00664">Unit::IsWithinMeleeRange()</a>, <a class="el" href="../../#l00165">LOG_INFO</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00548">REACT_PASSIVE</a>, <a class="el" href="../../#l00544">SPELL_ATTR4_REACTIVE_DAMAGE_PROC</a>, <a class="el" href="../../#l00074">SPELL_AURA_MOD_TAUNT</a>, <a class="el" href="../../#l00201">Object::ToPlayer()</a>, <a class="el" href="../../#l00047">ObjectGuid::ToString()</a>, <a class="el" href="../../#l00247">UNIT_FLAG_STUNNED</a>, and <a class="el" href="../../#l00191">UNIT_STATE_LOST_CONTROL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00417">AttackStart()</a>, <a class="el" href="../../#l00575">SpellHit()</a>, and <a class="el" href="../../#l00148">UpdateAI()</a>.</p>

</div>
</div>
<a id="ac444db9042968b0d7aff3fe2cb2e00ae" name="ac444db9042968b0d7aff3fe2cb2e00ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac444db9042968b0d7aff3fe2cb2e00ae">&#9670;&#160;</a></span>ClearCharmInfoFlags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::ClearCharmInfoFlags </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  768</span>{</div>
<div class="line"><span class="lineno">  769</span>    <span class="comment">// Quick access to set all flags to FALSE</span></div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>    <a class="code hl_struct" href="../../d8/dea/a08462.html">CharmInfo</a>* ci = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>();</div>
<div class="line"><span class="lineno">  772</span> </div>
<div class="line"><span class="lineno">  773</span>    <span class="keywordflow">if</span> (ci)</div>
<div class="line"><span class="lineno">  774</span>    {</div>
<div class="line"><span class="lineno">  775</span>        ci-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a56312bfccc83a4d7c27395a8781ee968">SetIsAtStay</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  776</span>        ci-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#aeb43c19961bd58b4e2ad114f2d4b5aa2">SetIsCommandAttack</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  777</span>        ci-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a1f0a58b55c95f17044d3130b04836edb">SetIsCommandFollow</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  778</span>        ci-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a6c9f0cdcb179ef99203904987ffb16f5">SetIsFollowing</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  779</span>        ci-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a8c071166d63d55752342226bdf3c7474">SetIsReturning</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  780</span>    }</div>
<div class="line"><span class="lineno">  781</span>}</div>
<div class="ttc" id="aa08462_html"><div class="ttname"><a href="../../d8/dea/a08462.html">CharmInfo</a></div><div class="ttdef"><b>Definition:</b> CharmInfo.h:127</div></div>
<div class="ttc" id="aa08462_html_a1f0a58b55c95f17044d3130b04836edb"><div class="ttname"><a href="../../d8/dea/a08462.html#a1f0a58b55c95f17044d3130b04836edb">CharmInfo::SetIsCommandFollow</a></div><div class="ttdeci">void SetIsCommandFollow(bool val)</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:313</div></div>
<div class="ttc" id="aa08462_html_a56312bfccc83a4d7c27395a8781ee968"><div class="ttname"><a href="../../d8/dea/a08462.html#a56312bfccc83a4d7c27395a8781ee968">CharmInfo::SetIsAtStay</a></div><div class="ttdeci">void SetIsAtStay(bool val)</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:365</div></div>
<div class="ttc" id="aa08462_html_a6c9f0cdcb179ef99203904987ffb16f5"><div class="ttname"><a href="../../d8/dea/a08462.html#a6c9f0cdcb179ef99203904987ffb16f5">CharmInfo::SetIsFollowing</a></div><div class="ttdeci">void SetIsFollowing(bool val)</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:375</div></div>
<div class="ttc" id="aa08462_html_a8c071166d63d55752342226bdf3c7474"><div class="ttname"><a href="../../d8/dea/a08462.html#a8c071166d63d55752342226bdf3c7474">CharmInfo::SetIsReturning</a></div><div class="ttdeci">void SetIsReturning(bool val)</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:385</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01206">Unit::GetCharmInfo()</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00365">CharmInfo::SetIsAtStay()</a>, <a class="el" href="../../#l00303">CharmInfo::SetIsCommandAttack()</a>, <a class="el" href="../../#l00313">CharmInfo::SetIsCommandFollow()</a>, <a class="el" href="../../#l00375">CharmInfo::SetIsFollowing()</a>, and <a class="el" href="../../#l00385">CharmInfo::SetIsReturning()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00072">_stopAttack()</a>, <a class="el" href="../../#l00591">DoAttack()</a>, <a class="el" href="../../#l00525">HandleReturnMovement()</a>, and <a class="el" href="../../#l00632">MovementInform()</a>.</p>

</div>
</div>
<a id="a9db3295e6d83e5407c8a55b004ccf4c7" name="a9db3295e6d83e5407c8a55b004ccf4c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9db3295e6d83e5407c8a55b004ccf4c7">&#9670;&#160;</a></span>DoAttack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::DoAttack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>chase</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  592</span>{</div>
<div class="line"><span class="lineno">  593</span>    <span class="comment">// Handles attack with or without chase and also resets flags</span></div>
<div class="line"><span class="lineno">  594</span>    <span class="comment">// for next update / creature kill</span></div>
<div class="line"><span class="lineno">  595</span> </div>
<div class="line"><span class="lineno">  596</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a8d910c36ac5d61171ee5ddaeb696292c">Attack</a>(target, <span class="keyword">true</span>))</div>
<div class="line"><span class="lineno">  597</span>    {</div>
<div class="line"><span class="lineno">  598</span>        <span class="comment">// xinef: properly fix fake combat after pet is sent to attack</span></div>
<div class="line"><span class="lineno">  599</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* owner = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a16a73fea59a6ef3595093aa29225b37b">GetOwner</a>())</div>
<div class="line"><span class="lineno">  600</span>            owner-&gt;SetUnitFlag(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934af11799a3fd105b2cb9c0bd9ad70b09ee">UNIT_FLAG_PET_IN_COMBAT</a>);</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>        <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ad9f2d48b20f62e17abf5c1892cebe296">SetUnitFlag</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934af11799a3fd105b2cb9c0bd9ad70b09ee">UNIT_FLAG_PET_IN_COMBAT</a>);</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>        <span class="comment">// Play sound to let the player know the pet is attacking something it picked on its own</span></div>
<div class="line"><span class="lineno">  605</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a46a7576522c3b964bd50388091f95951">HasReactState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37ab0d46448581f9ac821fb076f185661fc">REACT_AGGRESSIVE</a>) &amp;&amp; !<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a2589e58973f407555d8f6c95c89f378e">IsCommandAttack</a>())</div>
<div class="line"><span class="lineno">  606</span>            <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aaba2ba129cfe4189dcec609c5aba7c53">SendPetAIReaction</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno">  607</span> </div>
<div class="line"><span class="lineno">  608</span>        <span class="keywordflow">if</span> (chase)</div>
<div class="line"><span class="lineno">  609</span>        {</div>
<div class="line"><span class="lineno">  610</span>            <span class="keywordtype">bool</span> oldCmdAttack = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a2589e58973f407555d8f6c95c89f378e">IsCommandAttack</a>(); <span class="comment">// This needs to be reset after other flags are cleared</span></div>
<div class="line"><span class="lineno">  611</span>            <a class="code hl_function" href="../../d0/dbe/a06026.html#ac444db9042968b0d7aff3fe2cb2e00ae">ClearCharmInfoFlags</a>();</div>
<div class="line"><span class="lineno">  612</span>            <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#aeb43c19961bd58b4e2ad114f2d4b5aa2">SetIsCommandAttack</a>(oldCmdAttack); <span class="comment">// For passive pets commanded to attack so they will use spells</span></div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d0/dbe/a06026.html#a25fb8a89f10d36e1189c8c77e0d9345e">_canMeleeAttack</a>())</div>
<div class="line"><span class="lineno">  615</span>            {</div>
<div class="line"><span class="lineno">  616</span>                <span class="keywordtype">float</span> angle = <a class="code hl_variable" href="../../d0/dbe/a06026.html#a4b9d25512fc4f8c9f0eb538542f72644">combatRange</a> == 0.f &amp;&amp; !target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; !target-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>() ? float(M_PI) : 0.f;</div>
<div class="line"><span class="lineno">  617</span>                <span class="keywordtype">float</span> tolerance = <a class="code hl_variable" href="../../d0/dbe/a06026.html#a4b9d25512fc4f8c9f0eb538542f72644">combatRange</a> == 0.f ? float(M_PI_4) : float(M_PI * 2);</div>
<div class="line"><span class="lineno">  618</span>                <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#a3ff14061961bcc5cf1d34842683d90ac">MoveChase</a>(target, <a class="code hl_struct" href="../../db/da7/a09666.html">ChaseRange</a>(0.f, <a class="code hl_variable" href="../../d0/dbe/a06026.html#a4b9d25512fc4f8c9f0eb538542f72644">combatRange</a>), <a class="code hl_struct" href="../../d7/d67/a09670.html">ChaseAngle</a>(angle, tolerance));</div>
<div class="line"><span class="lineno">  619</span>            }</div>
<div class="line"><span class="lineno">  620</span>        }</div>
<div class="line"><span class="lineno">  621</span>        <span class="keywordflow">else</span> <span class="comment">// (Stay &amp;&amp; ((Aggressive || Defensive) &amp;&amp; In Melee Range)))</span></div>
<div class="line"><span class="lineno">  622</span>        {</div>
<div class="line"><span class="lineno">  623</span>            <a class="code hl_function" href="../../d0/dbe/a06026.html#ac444db9042968b0d7aff3fe2cb2e00ae">ClearCharmInfoFlags</a>();</div>
<div class="line"><span class="lineno">  624</span> </div>
<div class="line"><span class="lineno">  625</span>            <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a56312bfccc83a4d7c27395a8781ee968">SetIsAtStay</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  626</span>            <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#a48a7732160d5a64aa32a82f976f2aeb4">MovementExpiredOnSlot</a>(<a class="code hl_enumvalue" href="../../d2/df3/a03890.html#a42f80f4e5d95e3ba656adbee43cfc3f5a89ae2a485a626fc8f0ba275f61cc5fcc">MOTION_SLOT_ACTIVE</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  627</span>            <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#ad0697d75ff06afb1247424100c99619f">MoveIdle</a>();</div>
<div class="line"><span class="lineno">  628</span>        }</div>
<div class="line"><span class="lineno">  629</span>    }</div>
<div class="line"><span class="lineno">  630</span>}</div>
<div class="ttc" id="aa03515_html_a5e9099d162ad74df5a3e3f5c0f056c37ab0d46448581f9ac821fb076f185661fc"><div class="ttname"><a href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37ab0d46448581f9ac821fb076f185661fc">REACT_AGGRESSIVE</a></div><div class="ttdeci">@ REACT_AGGRESSIVE</div><div class="ttdef"><b>Definition:</b> Unit.h:550</div></div>
<div class="ttc" id="aa03521_html_affdd0d554c8bcaaa85a879f5a9d60934af11799a3fd105b2cb9c0bd9ad70b09ee"><div class="ttname"><a href="../../d8/dbe/a03521.html#affdd0d554c8bcaaa85a879f5a9d60934af11799a3fd105b2cb9c0bd9ad70b09ee">UNIT_FLAG_PET_IN_COMBAT</a></div><div class="ttdeci">@ UNIT_FLAG_PET_IN_COMBAT</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:240</div></div>
<div class="ttc" id="aa03890_html_a42f80f4e5d95e3ba656adbee43cfc3f5a89ae2a485a626fc8f0ba275f61cc5fcc"><div class="ttname"><a href="../../d2/df3/a03890.html#a42f80f4e5d95e3ba656adbee43cfc3f5a89ae2a485a626fc8f0ba275f61cc5fcc">MOTION_SLOT_ACTIVE</a></div><div class="ttdeci">@ MOTION_SLOT_ACTIVE</div><div class="ttdef"><b>Definition:</b> MotionMaster.h:64</div></div>
<div class="ttc" id="aa08150_html_a1b9ed00e8d7ac5fed698ef6431905296"><div class="ttname"><a href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">Object::IsPlayer</a></div><div class="ttdeci">bool IsPlayer() const</div><div class="ttdef"><b>Definition:</b> Object.h:200</div></div>
<div class="ttc" id="aa08530_html_a16a73fea59a6ef3595093aa29225b37b"><div class="ttname"><a href="../../de/d71/a08530.html#a16a73fea59a6ef3595093aa29225b37b">Unit::GetOwner</a></div><div class="ttdeci">Unit * GetOwner() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10600</div></div>
<div class="ttc" id="aa08530_html_a4ad2fdcc45e2c3c85ad59ff49268b58c"><div class="ttname"><a href="../../de/d71/a08530.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">Unit::IsPet</a></div><div class="ttdeci">bool IsPet() const</div><div class="ttdef"><b>Definition:</b> Unit.h:754</div></div>
<div class="ttc" id="aa08530_html_a8d910c36ac5d61171ee5ddaeb696292c"><div class="ttname"><a href="../../de/d71/a08530.html#a8d910c36ac5d61171ee5ddaeb696292c">Unit::Attack</a></div><div class="ttdeci">bool Attack(Unit *victim, bool meleeAttack)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:10272</div></div>
<div class="ttc" id="aa08530_html_aaba2ba129cfe4189dcec609c5aba7c53"><div class="ttname"><a href="../../de/d71/a08530.html#aaba2ba129cfe4189dcec609c5aba7c53">Unit::SendPetAIReaction</a></div><div class="ttdeci">void SendPetAIReaction(ObjectGuid guid)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:16631</div></div>
<div class="ttc" id="aa08530_html_ad9f2d48b20f62e17abf5c1892cebe296"><div class="ttname"><a href="../../de/d71/a08530.html#ad9f2d48b20f62e17abf5c1892cebe296">Unit::SetUnitFlag</a></div><div class="ttdeci">void SetUnitFlag(UnitFlags flags)</div><div class="ttdoc">UnitFlags available in UnitDefines.h.</div><div class="ttdef"><b>Definition:</b> Unit.h:713</div></div>
<div class="ttc" id="aa09666_html"><div class="ttname"><a href="../../db/da7/a09666.html">ChaseRange</a></div><div class="ttdef"><b>Definition:</b> MotionMaster.h:84</div></div>
<div class="ttc" id="aa09670_html"><div class="ttname"><a href="../../d7/d67/a09670.html">ChaseAngle</a></div><div class="ttdef"><b>Definition:</b> MotionMaster.h:97</div></div>
<div class="ttc" id="aa09674_html_a3ff14061961bcc5cf1d34842683d90ac"><div class="ttname"><a href="../../da/df6/a09674.html#a3ff14061961bcc5cf1d34842683d90ac">MotionMaster::MoveChase</a></div><div class="ttdeci">void MoveChase(Unit *target, std::optional&lt; ChaseRange &gt; dist={}, std::optional&lt; ChaseAngle &gt; angle={})</div><div class="ttdoc">Force the unit to chase this target. Doesn't work with UNIT_FLAG_DISABLE_MOVE.</div><div class="ttdef"><b>Definition:</b> MotionMaster.cpp:313</div></div>
<div class="ttc" id="aa09674_html_a48a7732160d5a64aa32a82f976f2aeb4"><div class="ttname"><a href="../../da/df6/a09674.html#a48a7732160d5a64aa32a82f976f2aeb4">MotionMaster::MovementExpiredOnSlot</a></div><div class="ttdeci">void MovementExpiredOnSlot(MovementSlot slot, bool reset=true)</div><div class="ttdef"><b>Definition:</b> MotionMaster.h:194</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00100">_canMeleeAttack()</a>, <a class="el" href="../../#l10272">Unit::Attack()</a>, <a class="el" href="../../#l00767">ClearCharmInfoFlags()</a>, <a class="el" href="../../#l00085">combatRange</a>, <a class="el" href="../../#l01206">Unit::GetCharmInfo()</a>, <a class="el" href="../../#l00112">Object::GetGUID()</a>, <a class="el" href="../../#l01620">Unit::GetMotionMaster()</a>, <a class="el" href="../../#l10600">Unit::GetOwner()</a>, <a class="el" href="../../#l00096">Creature::HasReactState()</a>, <a class="el" href="../../#l00308">CharmInfo::IsCommandAttack()</a>, <a class="el" href="../../#l00754">Unit::IsPet()</a>, <a class="el" href="../../#l00200">Object::IsPlayer()</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00064">MOTION_SLOT_ACTIVE</a>, <a class="el" href="../../#l00313">MotionMaster::MoveChase()</a>, <a class="el" href="../../#l00232">MotionMaster::MoveIdle()</a>, <a class="el" href="../../#l00194">MotionMaster::MovementExpiredOnSlot()</a>, <a class="el" href="../../#l00550">REACT_AGGRESSIVE</a>, <a class="el" href="../../#l16631">Unit::SendPetAIReaction()</a>, <a class="el" href="../../#l00365">CharmInfo::SetIsAtStay()</a>, <a class="el" href="../../#l00303">CharmInfo::SetIsCommandAttack()</a>, <a class="el" href="../../#l00713">Unit::SetUnitFlag()</a>, and <a class="el" href="../../#l00240">UNIT_FLAG_PET_IN_COMBAT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00417">AttackStart()</a>, and <a class="el" href="../../#l00575">SpellHit()</a>.</p>

</div>
</div>
<a id="a40cee95bfee96c4743b3c05ffc674d04" name="a40cee95bfee96c4743b3c05ffc674d04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40cee95bfee96c4743b3c05ffc674d04">&#9670;&#160;</a></span>EnterEvadeMode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::EnterEvadeMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d36/a06074.html#a48b996440be01f98686cd088857a5dbb">EvadeReason</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="../../dc/d36/a06074.html#afe5dd68e11d20028510eca29d4184778">CreatureAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>{} <span class="comment">// For fleeing, pets don&#39;t use this type of Evade mechanic</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aebd92475342c2905052a2ea9601c1423" name="aebd92475342c2905052a2ea9601c1423"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebd92475342c2905052a2ea9601c1423">&#9670;&#160;</a></span>HandleReturnMovement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::HandleReturnMovement </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  526</span>{</div>
<div class="line"><span class="lineno">  527</span>    <span class="comment">// Handles moving the pet back to stay or owner</span></div>
<div class="line"><span class="lineno">  528</span> </div>
<div class="line"><span class="lineno">  529</span>    <span class="comment">// Prevent activating movement when under control of spells</span></div>
<div class="line"><span class="lineno">  530</span>    <span class="comment">// such as &quot;Eyes of the Beast&quot;</span></div>
<div class="line"><span class="lineno">  531</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a91a41d93263c55b220b7c48254a106fe">isPossessed</a>())</div>
<div class="line"><span class="lineno">  532</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#ab817266875b889133f8297d31c0f911e">HasCommandState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#af147d8054b617fd731305de8a69bd257ab33055c9492afc567e3a602f88347ca5">COMMAND_STAY</a>))</div>
<div class="line"><span class="lineno">  535</span>    {</div>
<div class="line"><span class="lineno">  536</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#ab1d9cb620b4aef51185759dc35e8dae8">IsAtStay</a>() &amp;&amp; !<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a6c7fd5cb2ad02009e66d53b0da537947">IsReturning</a>())</div>
<div class="line"><span class="lineno">  537</span>        {</div>
<div class="line"><span class="lineno">  538</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#afdba1130c18eee3726df0b9c6400294d">HasStayPosition</a>())</div>
<div class="line"><span class="lineno">  539</span>            {</div>
<div class="line"><span class="lineno">  540</span>                <span class="comment">// Return to previous position where stay was clicked</span></div>
<div class="line"><span class="lineno">  541</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#a381fce2243c843d8a7ffef127d607c07">GetMotionSlotType</a>(<a class="code hl_enumvalue" href="../../d2/df3/a03890.html#a42f80f4e5d95e3ba656adbee43cfc3f5a4b14f4870ac324393280d0d554f9c41e">MOTION_SLOT_CONTROLLED</a>) == <a class="code hl_enumvalue" href="../../d2/df3/a03890.html#a4f12806b915efea564eae942207002f9a9e63cfaad6d8b0e2c14a8b53f6f02e0b">NULL_MOTION_TYPE</a>)</div>
<div class="line"><span class="lineno">  542</span>                {</div>
<div class="line"><span class="lineno">  543</span>                    <span class="keywordtype">float</span> x, y, z;</div>
<div class="line"><span class="lineno">  544</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#abf37696f18b8ed07d388b50780e2ac77">GetStayPosition</a>(x, y, z);</div>
<div class="line"><span class="lineno">  545</span>                    <a class="code hl_function" href="../../d0/dbe/a06026.html#ac444db9042968b0d7aff3fe2cb2e00ae">ClearCharmInfoFlags</a>();</div>
<div class="line"><span class="lineno">  546</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a8c071166d63d55752342226bdf3c7474">SetIsReturning</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  547</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#afa6ffa9c5d6897f3aad3ac524c7bb35a">Clear</a>();</div>
<div class="line"><span class="lineno">  548</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#a903a48c63482ebbd45d63272b218df7f">MovePoint</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../d9/d08/a08198.html#a0df27b85c91a2c619e8f1d9c2cb31677">GetCounter</a>(), x, y, z);</div>
<div class="line"><span class="lineno">  549</span>                }</div>
<div class="line"><span class="lineno">  550</span>            }</div>
<div class="line"><span class="lineno">  551</span>        }</div>
<div class="line"><span class="lineno">  552</span>    }</div>
<div class="line"><span class="lineno">  553</span>    <span class="keywordflow">else</span> <span class="comment">// COMMAND_FOLLOW</span></div>
<div class="line"><span class="lineno">  554</span>    {</div>
<div class="line"><span class="lineno">  555</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a565c393e227624a53d503d5a38c9234e">IsFollowing</a>() &amp;&amp; !<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a6c7fd5cb2ad02009e66d53b0da537947">IsReturning</a>())</div>
<div class="line"><span class="lineno">  556</span>        {</div>
<div class="line"><span class="lineno">  557</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#a381fce2243c843d8a7ffef127d607c07">GetMotionSlotType</a>(<a class="code hl_enumvalue" href="../../d2/df3/a03890.html#a42f80f4e5d95e3ba656adbee43cfc3f5a4b14f4870ac324393280d0d554f9c41e">MOTION_SLOT_CONTROLLED</a>) == <a class="code hl_enumvalue" href="../../d2/df3/a03890.html#a4f12806b915efea564eae942207002f9a9e63cfaad6d8b0e2c14a8b53f6f02e0b">NULL_MOTION_TYPE</a>)</div>
<div class="line"><span class="lineno">  558</span>            {</div>
<div class="line"><span class="lineno">  559</span>                <a class="code hl_function" href="../../d0/dbe/a06026.html#ac444db9042968b0d7aff3fe2cb2e00ae">ClearCharmInfoFlags</a>();</div>
<div class="line"><span class="lineno">  560</span>                <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a8c071166d63d55752342226bdf3c7474">SetIsReturning</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  561</span>                <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#afa6ffa9c5d6897f3aad3ac524c7bb35a">Clear</a>();</div>
<div class="line"><span class="lineno">  562</span>                <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#a46ca73c3acc43c9f0aaef6e847eb79fa">MoveFollow</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a7cdd398abd6ac328deb42529195e6add">GetCharmerOrOwner</a>(), <a class="code hl_define" href="../../d0/de9/a03530.html#a83e96c6d024ceb5d1189baac7b823d5d">PET_FOLLOW_DIST</a>, <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aacb06d14c640d7758b3ac3afa874a151">GetFollowAngle</a>());</div>
<div class="line"><span class="lineno">  563</span>            }</div>
<div class="line"><span class="lineno">  564</span>        }</div>
<div class="line"><span class="lineno">  565</span>    }</div>
<div class="line"><span class="lineno">  566</span> </div>
<div class="line"><span class="lineno">  567</span>    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a9cbd0809f04ca1fa3f02da9d1fa09d94">SetForcedSpell</a>(0);</div>
<div class="line"><span class="lineno">  568</span>    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#aded1ef1d1f0ec2e9d22c9d9af09be798">SetForcedTargetGUID</a>();</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>    <span class="comment">// xinef: remember that npcs summoned by npcs can also be pets</span></div>
<div class="line"><span class="lineno">  571</span>    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ad56089c61bf09419bedbb4edd2d94aeb">GetThreatMgr</a>().<a class="code hl_function" href="../../d5/dbe/a07622.html#a6e1716a276a5c87fa37d5aff81501b83">ClearAllThreat</a>();</div>
<div class="line"><span class="lineno">  572</span>    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a8f288d694ce1fd9f27c7815c8a608767">ClearInPetCombat</a>();</div>
<div class="line"><span class="lineno">  573</span>}</div>
<div class="ttc" id="aa03530_html_a83e96c6d024ceb5d1189baac7b823d5d"><div class="ttname"><a href="../../d0/de9/a03530.html#a83e96c6d024ceb5d1189baac7b823d5d">PET_FOLLOW_DIST</a></div><div class="ttdeci">#define PET_FOLLOW_DIST</div><div class="ttdef"><b>Definition:</b> PetDefines.h:198</div></div>
<div class="ttc" id="aa03890_html_a42f80f4e5d95e3ba656adbee43cfc3f5a4b14f4870ac324393280d0d554f9c41e"><div class="ttname"><a href="../../d2/df3/a03890.html#a42f80f4e5d95e3ba656adbee43cfc3f5a4b14f4870ac324393280d0d554f9c41e">MOTION_SLOT_CONTROLLED</a></div><div class="ttdeci">@ MOTION_SLOT_CONTROLLED</div><div class="ttdef"><b>Definition:</b> MotionMaster.h:65</div></div>
<div class="ttc" id="aa03890_html_a4f12806b915efea564eae942207002f9a9e63cfaad6d8b0e2c14a8b53f6f02e0b"><div class="ttname"><a href="../../d2/df3/a03890.html#a4f12806b915efea564eae942207002f9a9e63cfaad6d8b0e2c14a8b53f6f02e0b">NULL_MOTION_TYPE</a></div><div class="ttdeci">@ NULL_MOTION_TYPE</div><div class="ttdef"><b>Definition:</b> MotionMaster.h:58</div></div>
<div class="ttc" id="aa07622_html_a6e1716a276a5c87fa37d5aff81501b83"><div class="ttname"><a href="../../d5/dbe/a07622.html#a6e1716a276a5c87fa37d5aff81501b83">ThreatMgr::ClearAllThreat</a></div><div class="ttdeci">void ClearAllThreat()</div><div class="ttdef"><b>Definition:</b> ThreatMgr.cpp:417</div></div>
<div class="ttc" id="aa08198_html_a0df27b85c91a2c619e8f1d9c2cb31677"><div class="ttname"><a href="../../d9/d08/a08198.html#a0df27b85c91a2c619e8f1d9c2cb31677">ObjectGuid::GetCounter</a></div><div class="ttdeci">LowType GetCounter() const</div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:145</div></div>
<div class="ttc" id="aa08462_html_a565c393e227624a53d503d5a38c9234e"><div class="ttname"><a href="../../d8/dea/a08462.html#a565c393e227624a53d503d5a38c9234e">CharmInfo::IsFollowing</a></div><div class="ttdeci">bool IsFollowing()</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:380</div></div>
<div class="ttc" id="aa08462_html_a9cbd0809f04ca1fa3f02da9d1fa09d94"><div class="ttname"><a href="../../d8/dea/a08462.html#a9cbd0809f04ca1fa3f02da9d1fa09d94">CharmInfo::SetForcedSpell</a></div><div class="ttdeci">void SetForcedSpell(uint32 id)</div><div class="ttdef"><b>Definition:</b> CharmInfo.h:177</div></div>
<div class="ttc" id="aa08462_html_ab1d9cb620b4aef51185759dc35e8dae8"><div class="ttname"><a href="../../d8/dea/a08462.html#ab1d9cb620b4aef51185759dc35e8dae8">CharmInfo::IsAtStay</a></div><div class="ttdeci">bool IsAtStay()</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:370</div></div>
<div class="ttc" id="aa08462_html_abf37696f18b8ed07d388b50780e2ac77"><div class="ttname"><a href="../../d8/dea/a08462.html#abf37696f18b8ed07d388b50780e2ac77">CharmInfo::GetStayPosition</a></div><div class="ttdeci">void GetStayPosition(float &amp;x, float &amp;y, float &amp;z)</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:346</div></div>
<div class="ttc" id="aa08462_html_aded1ef1d1f0ec2e9d22c9d9af09be798"><div class="ttname"><a href="../../d8/dea/a08462.html#aded1ef1d1f0ec2e9d22c9d9af09be798">CharmInfo::SetForcedTargetGUID</a></div><div class="ttdeci">void SetForcedTargetGUID(ObjectGuid guid=ObjectGuid::Empty)</div><div class="ttdef"><b>Definition:</b> CharmInfo.h:179</div></div>
<div class="ttc" id="aa08462_html_afdba1130c18eee3726df0b9c6400294d"><div class="ttname"><a href="../../d8/dea/a08462.html#afdba1130c18eee3726df0b9c6400294d">CharmInfo::HasStayPosition</a></div><div class="ttdeci">bool HasStayPosition()</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:360</div></div>
<div class="ttc" id="aa08530_html_a8f288d694ce1fd9f27c7815c8a608767"><div class="ttname"><a href="../../de/d71/a08530.html#a8f288d694ce1fd9f27c7815c8a608767">Unit::ClearInPetCombat</a></div><div class="ttdeci">void ClearInPetCombat()</div><div class="ttdef"><b>Definition:</b> Unit.cpp:13844</div></div>
<div class="ttc" id="aa08530_html_a91a41d93263c55b220b7c48254a106fe"><div class="ttname"><a href="../../de/d71/a08530.html#a91a41d93263c55b220b7c48254a106fe">Unit::isPossessed</a></div><div class="ttdeci">bool isPossessed() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1236</div></div>
<div class="ttc" id="aa08530_html_aacb06d14c640d7758b3ac3afa874a151"><div class="ttname"><a href="../../de/d71/a08530.html#aacb06d14c640d7758b3ac3afa874a151">Unit::GetFollowAngle</a></div><div class="ttdeci">virtual float GetFollowAngle() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1756</div></div>
<div class="ttc" id="aa08530_html_ad56089c61bf09419bedbb4edd2d94aeb"><div class="ttname"><a href="../../de/d71/a08530.html#ad56089c61bf09419bedbb4edd2d94aeb">Unit::GetThreatMgr</a></div><div class="ttdeci">ThreatMgr &amp; GetThreatMgr()</div><div class="ttdef"><b>Definition:</b> Unit.h:903</div></div>
<div class="ttc" id="aa09674_html_a381fce2243c843d8a7ffef127d607c07"><div class="ttname"><a href="../../da/df6/a09674.html#a381fce2243c843d8a7ffef127d607c07">MotionMaster::GetMotionSlotType</a></div><div class="ttdeci">MovementGeneratorType GetMotionSlotType(int slot) const</div><div class="ttdef"><b>Definition:</b> MotionMaster.cpp:921</div></div>
<div class="ttc" id="aa09674_html_a46ca73c3acc43c9f0aaef6e847eb79fa"><div class="ttname"><a href="../../da/df6/a09674.html#a46ca73c3acc43c9f0aaef6e847eb79fa">MotionMaster::MoveFollow</a></div><div class="ttdeci">void MoveFollow(Unit *target, float dist, float angle, MovementSlot slot=MOTION_SLOT_ACTIVE, bool inheritWalkState=true)</div><div class="ttdoc">The unit will follow this target. Doesn't work with UNIT_FLAG_DISABLE_MOVE.</div><div class="ttdef"><b>Definition:</b> MotionMaster.cpp:409</div></div>
<div class="ttc" id="aa09674_html_a903a48c63482ebbd45d63272b218df7f"><div class="ttname"><a href="../../da/df6/a09674.html#a903a48c63482ebbd45d63272b218df7f">MotionMaster::MovePoint</a></div><div class="ttdeci">void MovePoint(uint32 id, const Position &amp;pos, bool generatePath=true, bool forceDestination=true)</div><div class="ttdef"><b>Definition:</b> MotionMaster.h:213</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00167">MotionMaster::Clear()</a>, <a class="el" href="../../#l00417">ThreatMgr::ClearAllThreat()</a>, <a class="el" href="../../#l00767">ClearCharmInfoFlags()</a>, <a class="el" href="../../#l13844">Unit::ClearInPetCombat()</a>, <a class="el" href="../../#l00555">COMMAND_STAY</a>, <a class="el" href="../../#l01211">Unit::GetCharmerOrOwner()</a>, <a class="el" href="../../#l01206">Unit::GetCharmInfo()</a>, <a class="el" href="../../#l00145">ObjectGuid::GetCounter()</a>, <a class="el" href="../../#l01756">Unit::GetFollowAngle()</a>, <a class="el" href="../../#l00112">Object::GetGUID()</a>, <a class="el" href="../../#l01620">Unit::GetMotionMaster()</a>, <a class="el" href="../../#l00921">MotionMaster::GetMotionSlotType()</a>, <a class="el" href="../../#l00346">CharmInfo::GetStayPosition()</a>, <a class="el" href="../../#l00903">Unit::GetThreatMgr()</a>, <a class="el" href="../../#l00137">CharmInfo::HasCommandState()</a>, <a class="el" href="../../#l00360">CharmInfo::HasStayPosition()</a>, <a class="el" href="../../#l00370">CharmInfo::IsAtStay()</a>, <a class="el" href="../../#l00380">CharmInfo::IsFollowing()</a>, <a class="el" href="../../#l01236">Unit::isPossessed()</a>, <a class="el" href="../../#l00390">CharmInfo::IsReturning()</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00065">MOTION_SLOT_CONTROLLED</a>, <a class="el" href="../../#l00409">MotionMaster::MoveFollow()</a>, <a class="el" href="../../#l00213">MotionMaster::MovePoint()</a>, <a class="el" href="../../#l00058">NULL_MOTION_TYPE</a>, <a class="el" href="../../#l00198">PET_FOLLOW_DIST</a>, <a class="el" href="../../#l00177">CharmInfo::SetForcedSpell()</a>, <a class="el" href="../../#l00179">CharmInfo::SetForcedTargetGUID()</a>, and <a class="el" href="../../#l00385">CharmInfo::SetIsReturning()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00072">_stopAttack()</a>, <a class="el" href="../../#l00392">KilledUnit()</a>, and <a class="el" href="../../#l00148">UpdateAI()</a>.</p>

</div>
</div>
<a id="ac8163d14de6e317393ecdbfeb2e1d24b" name="ac8163d14de6e317393ecdbfeb2e1d24b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8163d14de6e317393ecdbfeb2e1d24b">&#9670;&#160;</a></span>KilledUnit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::KilledUnit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>victim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="../../dc/d36/a06074.html#ab9ec4de552a9f0b08b8494bb782eed58">CreatureAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  393</span>{</div>
<div class="line"><span class="lineno">  394</span>    <span class="comment">// Called from Unit::Kill() in case where pet or owner kills something</span></div>
<div class="line"><span class="lineno">  395</span>    <span class="comment">// if owner killed this victim, pet may still be attacking something else</span></div>
<div class="line"><span class="lineno">  396</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() != victim)</div>
<div class="line"><span class="lineno">  397</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <span class="comment">// Xinef: if pet is channeling a spell and owner killed something different, dont interrupt it</span></div>
<div class="line"><span class="lineno">  400</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54">UNIT_STATE_CASTING</a>) &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#af7b6a5afebd7c3297e369213be44e059">GetGuidValue</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a2ade5a94dc5b622bd2dfdad5eddaf273">UNIT_FIELD_CHANNEL_OBJECT</a>) &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#af7b6a5afebd7c3297e369213be44e059">GetGuidValue</a>(<a class="code hl_enumvalue" href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a2ade5a94dc5b622bd2dfdad5eddaf273">UNIT_FIELD_CHANNEL_OBJECT</a>) != victim-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>())</div>
<div class="line"><span class="lineno">  401</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>    <span class="comment">// Clear target just in case. May help problem where health / focus / mana</span></div>
<div class="line"><span class="lineno">  404</span>    <span class="comment">// regen gets stuck. Also resets attack command.</span></div>
<div class="line"><span class="lineno">  405</span>    <span class="comment">// Can&#39;t use _stopAttack() because that activates movement handlers and ignores</span></div>
<div class="line"><span class="lineno">  406</span>    <span class="comment">// next target selection</span></div>
<div class="line"><span class="lineno">  407</span>    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aee07e22b70ed433a845b0673579d5fee">AttackStop</a>();</div>
<div class="line"><span class="lineno">  408</span>    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a2bdfe38bdc28869a9002094e4341d56e">InterruptNonMeleeSpells</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>    <span class="comment">// Before returning to owner, see if there are more things to attack</span></div>
<div class="line"><span class="lineno">  411</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* nextTarget = <a class="code hl_function" href="../../d0/dbe/a06026.html#add179efcb9c2ed0dd01aa3b2ac74004b">SelectNextTarget</a>(<span class="keyword">false</span>))</div>
<div class="line"><span class="lineno">  412</span>        <a class="code hl_function" href="../../d0/dbe/a06026.html#a2b6e07ca92d367bcd3e3d27bf6e5cc9b">AttackStart</a>(nextTarget);</div>
<div class="line"><span class="lineno">  413</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  414</span>        <a class="code hl_function" href="../../d0/dbe/a06026.html#aebd92475342c2905052a2ea9601c1423">HandleReturnMovement</a>(); <span class="comment">// Return</span></div>
<div class="line"><span class="lineno">  415</span>}</div>
<div class="ttc" id="aa03479_html_a0e42dc606678c9df7884e1aad621e881a2ade5a94dc5b622bd2dfdad5eddaf273"><div class="ttname"><a href="../../dc/d14/a03479.html#a0e42dc606678c9df7884e1aad621e881a2ade5a94dc5b622bd2dfdad5eddaf273">UNIT_FIELD_CHANNEL_OBJECT</a></div><div class="ttdeci">@ UNIT_FIELD_CHANNEL_OBJECT</div><div class="ttdef"><b>Definition:</b> UpdateFields.h:93</div></div>
<div class="ttc" id="aa03521_html_ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54"><div class="ttname"><a href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54">UNIT_STATE_CASTING</a></div><div class="ttdeci">@ UNIT_STATE_CASTING</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:164</div></div>
<div class="ttc" id="aa06026_html_add179efcb9c2ed0dd01aa3b2ac74004b"><div class="ttname"><a href="../../d0/dbe/a06026.html#add179efcb9c2ed0dd01aa3b2ac74004b">PetAI::SelectNextTarget</a></div><div class="ttdeci">Unit * SelectNextTarget(bool allowAutoSelect) const</div><div class="ttdef"><b>Definition:</b> PetAI.cpp:470</div></div>
<div class="ttc" id="aa08150_html_af7b6a5afebd7c3297e369213be44e059"><div class="ttname"><a href="../../d6/d80/a08150.html#af7b6a5afebd7c3297e369213be44e059">Object::GetGuidValue</a></div><div class="ttdeci">ObjectGuid GetGuidValue(uint16 index) const</div><div class="ttdef"><b>Definition:</b> Object.cpp:337</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00417">AttackStart()</a>, <a class="el" href="../../#l10403">Unit::AttackStop()</a>, <a class="el" href="../../#l00112">Object::GetGUID()</a>, <a class="el" href="../../#l00337">Object::GetGuidValue()</a>, <a class="el" href="../../#l00853">Unit::GetVictim()</a>, <a class="el" href="../../#l00525">HandleReturnMovement()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l04129">Unit::InterruptNonMeleeSpells()</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00470">SelectNextTarget()</a>, <a class="el" href="../../#l00093">UNIT_FIELD_CHANNEL_OBJECT</a>, and <a class="el" href="../../#l00164">UNIT_STATE_CASTING</a>.</p>

</div>
</div>
<a id="a5aacaa70911c4249a36a2e50a0fd3362" name="a5aacaa70911c4249a36a2e50a0fd3362"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aacaa70911c4249a36a2e50a0fd3362">&#9670;&#160;</a></span>MoveInLineOfSight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::MoveInLineOfSight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="../../dc/d36/a06074.html#a1280f8bcf72254ad31c453b810615f87">CreatureAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span>{} <span class="comment">// CreatureAI interferes with returning pets</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="adea0e094c01741e6d883a3a378ceaced" name="adea0e094c01741e6d883a3a378ceaced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adea0e094c01741e6d883a3a378ceaced">&#9670;&#160;</a></span>MoveInLineOfSight_Safe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::MoveInLineOfSight_Safe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   66</span>{} <span class="comment">// CreatureAI interferes with returning pets</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a85d9d8d91c784c81473360bba6159722" name="a85d9d8d91c784c81473360bba6159722"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85d9d8d91c784c81473360bba6159722">&#9670;&#160;</a></span>MovementInform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::MovementInform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>moveType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="../../dc/d36/a06074.html#ab0438b14dc1d7f038221d9d7a2f37043">CreatureAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  633</span>{</div>
<div class="line"><span class="lineno">  634</span>    <span class="comment">// Receives notification when pet reaches stay or follow owner</span></div>
<div class="line"><span class="lineno">  635</span>    <span class="keywordflow">switch</span> (moveType)</div>
<div class="line"><span class="lineno">  636</span>    {</div>
<div class="line"><span class="lineno">  637</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/df3/a03890.html#a4f12806b915efea564eae942207002f9ad05105e19ca15912eceb8a1d856c7467">POINT_MOTION_TYPE</a>:</div>
<div class="line"><span class="lineno">  638</span>            {</div>
<div class="line"><span class="lineno">  639</span>                <span class="comment">// Pet is returning to where stay was clicked. data should be</span></div>
<div class="line"><span class="lineno">  640</span>                <span class="comment">// pet&#39;s GUIDLow since we set that as the waypoint ID</span></div>
<div class="line"><span class="lineno">  641</span>                <span class="keywordflow">if</span> (data == <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../d9/d08/a08198.html#a0df27b85c91a2c619e8f1d9c2cb31677">GetCounter</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a6c7fd5cb2ad02009e66d53b0da537947">IsReturning</a>())</div>
<div class="line"><span class="lineno">  642</span>                {</div>
<div class="line"><span class="lineno">  643</span>                    <a class="code hl_function" href="../../d0/dbe/a06026.html#ac444db9042968b0d7aff3fe2cb2e00ae">ClearCharmInfoFlags</a>();</div>
<div class="line"><span class="lineno">  644</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a56312bfccc83a4d7c27395a8781ee968">SetIsAtStay</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  645</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#afa6ffa9c5d6897f3aad3ac524c7bb35a">Clear</a>();</div>
<div class="line"><span class="lineno">  646</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#ad0697d75ff06afb1247424100c99619f">MoveIdle</a>();</div>
<div class="line"><span class="lineno">  647</span>                }</div>
<div class="line"><span class="lineno">  648</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  649</span>            }</div>
<div class="line"><span class="lineno">  650</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d2/df3/a03890.html#a4f12806b915efea564eae942207002f9ae99e76e1e80feb6d7ff6e1df01e98e9c">FOLLOW_MOTION_TYPE</a>:</div>
<div class="line"><span class="lineno">  651</span>            {</div>
<div class="line"><span class="lineno">  652</span>                <span class="comment">// If data is owner&#39;s GUIDLow then we&#39;ve reached follow point,</span></div>
<div class="line"><span class="lineno">  653</span>                <span class="comment">// otherwise we&#39;re probably chasing a creature</span></div>
<div class="line"><span class="lineno">  654</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a7cdd398abd6ac328deb42529195e6add">GetCharmerOrOwner</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>() &amp;&amp; data == <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a7cdd398abd6ac328deb42529195e6add">GetCharmerOrOwner</a>()-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../d9/d08/a08198.html#a0df27b85c91a2c619e8f1d9c2cb31677">GetCounter</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a6c7fd5cb2ad02009e66d53b0da537947">IsReturning</a>())</div>
<div class="line"><span class="lineno">  655</span>                {</div>
<div class="line"><span class="lineno">  656</span>                    <a class="code hl_function" href="../../d0/dbe/a06026.html#ac444db9042968b0d7aff3fe2cb2e00ae">ClearCharmInfoFlags</a>();</div>
<div class="line"><span class="lineno">  657</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a6c9f0cdcb179ef99203904987ffb16f5">SetIsFollowing</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  658</span>                }</div>
<div class="line"><span class="lineno">  659</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  660</span>            }</div>
<div class="line"><span class="lineno">  661</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  662</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  663</span>    }</div>
<div class="line"><span class="lineno">  664</span>}</div>
<div class="ttc" id="aa03890_html_a4f12806b915efea564eae942207002f9ad05105e19ca15912eceb8a1d856c7467"><div class="ttname"><a href="../../d2/df3/a03890.html#a4f12806b915efea564eae942207002f9ad05105e19ca15912eceb8a1d856c7467">POINT_MOTION_TYPE</a></div><div class="ttdeci">@ POINT_MOTION_TYPE</div><div class="ttdef"><b>Definition:</b> MotionMaster.h:48</div></div>
<div class="ttc" id="aa03890_html_a4f12806b915efea564eae942207002f9ae99e76e1e80feb6d7ff6e1df01e98e9c"><div class="ttname"><a href="../../d2/df3/a03890.html#a4f12806b915efea564eae942207002f9ae99e76e1e80feb6d7ff6e1df01e98e9c">FOLLOW_MOTION_TYPE</a></div><div class="ttdeci">@ FOLLOW_MOTION_TYPE</div><div class="ttdef"><b>Definition:</b> MotionMaster.h:54</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00167">MotionMaster::Clear()</a>, <a class="el" href="../../#l00767">ClearCharmInfoFlags()</a>, <a class="el" href="../../#l00054">FOLLOW_MOTION_TYPE</a>, <a class="el" href="../../#l01211">Unit::GetCharmerOrOwner()</a>, <a class="el" href="../../#l01206">Unit::GetCharmInfo()</a>, <a class="el" href="../../#l00145">ObjectGuid::GetCounter()</a>, <a class="el" href="../../#l00112">Object::GetGUID()</a>, <a class="el" href="../../#l01620">Unit::GetMotionMaster()</a>, <a class="el" href="../../#l00390">CharmInfo::IsReturning()</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00232">MotionMaster::MoveIdle()</a>, <a class="el" href="../../#l00048">POINT_MOTION_TYPE</a>, <a class="el" href="../../#l00365">CharmInfo::SetIsAtStay()</a>, and <a class="el" href="../../#l00375">CharmInfo::SetIsFollowing()</a>.</p>

</div>
</div>
<a id="a2c06c119e98937f84a0a45c08dab6457" name="a2c06c119e98937f84a0a45c08dab6457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c06c119e98937f84a0a45c08dab6457">&#9670;&#160;</a></span>OwnerAttacked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::OwnerAttacked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="../../dc/d36/a06074.html#a0e1c155745ee7fa6a970d38828352ad6">CreatureAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  450</span>{</div>
<div class="line"><span class="lineno">  451</span>    <span class="comment">// Called when owner attacks something. Allows defensive pets to know</span></div>
<div class="line"><span class="lineno">  452</span>    <span class="comment">//  that they need to assist</span></div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>    <span class="comment">// Target might be nullptr if called from spell with invalid cast targets</span></div>
<div class="line"><span class="lineno">  455</span>    <span class="keywordflow">if</span> (!target)</div>
<div class="line"><span class="lineno">  456</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>    <span class="comment">// Passive pets don&#39;t do anything</span></div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a46a7576522c3b964bd50388091f95951">HasReactState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37a8b5a7f923cba80ea3a429286eb38d0a0">REACT_PASSIVE</a>))</div>
<div class="line"><span class="lineno">  460</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>    <span class="comment">// Prevent pet from disengaging from current target</span></div>
<div class="line"><span class="lineno">  463</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>()-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno">  464</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>    <span class="comment">// Continue to evaluate and attack if necessary</span></div>
<div class="line"><span class="lineno">  467</span>    <a class="code hl_function" href="../../d0/dbe/a06026.html#a2b6e07ca92d367bcd3e3d27bf6e5cc9b">AttackStart</a>(target);</div>
<div class="line"><span class="lineno">  468</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00417">AttackStart()</a>, <a class="el" href="../../#l00853">Unit::GetVictim()</a>, <a class="el" href="../../#l00096">Creature::HasReactState()</a>, <a class="el" href="../../#l01654">Unit::IsAlive()</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, and <a class="el" href="../../#l00548">REACT_PASSIVE</a>.</p>

</div>
</div>
<a id="a1fc49263e5d964bf79c6a5fe14d87721" name="a1fc49263e5d964bf79c6a5fe14d87721"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fc49263e5d964bf79c6a5fe14d87721">&#9670;&#160;</a></span>OwnerAttackedBy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::OwnerAttackedBy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>attacker</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="../../dc/d36/a06074.html#a3358b036c3afc22343e44c1f69d5f19d">CreatureAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  430</span>{</div>
<div class="line"><span class="lineno">  431</span>    <span class="comment">// Called when owner takes damage. This function helps keep pets from running off</span></div>
<div class="line"><span class="lineno">  432</span>    <span class="comment">//  simply due to owner gaining aggro.</span></div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>    <span class="keywordflow">if</span> (!attacker)</div>
<div class="line"><span class="lineno">  435</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>    <span class="comment">// Passive pets don&#39;t do anything</span></div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a46a7576522c3b964bd50388091f95951">HasReactState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37a8b5a7f923cba80ea3a429286eb38d0a0">REACT_PASSIVE</a>))</div>
<div class="line"><span class="lineno">  439</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>    <span class="comment">// Prevent pet from disengaging from current target</span></div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>()-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno">  443</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>    <span class="comment">// Continue to evaluate and attack if necessary</span></div>
<div class="line"><span class="lineno">  446</span>    <a class="code hl_function" href="../../d0/dbe/a06026.html#a2b6e07ca92d367bcd3e3d27bf6e5cc9b">AttackStart</a>(attacker);</div>
<div class="line"><span class="lineno">  447</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00417">AttackStart()</a>, <a class="el" href="../../#l00853">Unit::GetVictim()</a>, <a class="el" href="../../#l00096">Creature::HasReactState()</a>, <a class="el" href="../../#l01654">Unit::IsAlive()</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, and <a class="el" href="../../#l00548">REACT_PASSIVE</a>.</p>

</div>
</div>
<a id="a4185f1f3c2193717eef59bc391854812" name="a4185f1f3c2193717eef59bc391854812"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4185f1f3c2193717eef59bc391854812">&#9670;&#160;</a></span>Permissible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a0bf9964a3ce962c07ad3d8b5432bbbcd">int32</a> PetAI::Permissible </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d49/a07778.html">Creature</a> const *&#160;</td>
          <td class="paramname"><em>creature</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   33</span>{</div>
<div class="line"><span class="lineno">   34</span>    <span class="keywordflow">if</span> (creature-&gt;HasUnitTypeMask(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#a111db1c9ed7ec701bc06841238cd7b04a1b023722ae04fdce479c20dd23fa2f5a">UNIT_MASK_CONTROLABLE_GUARDIAN</a>))</div>
<div class="line"><span class="lineno">   35</span>    {</div>
<div class="line"><span class="lineno">   36</span>        <span class="keywordflow">if</span> (<span class="keyword">reinterpret_cast&lt;</span><a class="code hl_class" href="../../d2/dd7/a07914.html">Guardian</a> const*<span class="keyword">&gt;</span>(creature)-&gt;GetOwner()-&gt;IsPlayer())</div>
<div class="line"><span class="lineno">   37</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d81/a02966.html#adf806592547de59418c6070d69c5efb9a06a019c60b174cae59e682299512d78c">PERMIT_BASE_PROACTIVE</a>;</div>
<div class="line"><span class="lineno">   38</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d81/a02966.html#adf806592547de59418c6070d69c5efb9a8781eb0d588151b618bd98b03423dc58">PERMIT_BASE_REACTIVE</a>;</div>
<div class="line"><span class="lineno">   39</span>    }</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../df/d81/a02966.html#adf806592547de59418c6070d69c5efb9a3ea8686bf6c00259f435df8f34da17c0">PERMIT_BASE_NO</a>;</div>
<div class="line"><span class="lineno">   42</span>}</div>
<div class="ttc" id="aa02966_html_adf806592547de59418c6070d69c5efb9a06a019c60b174cae59e682299512d78c"><div class="ttname"><a href="../../df/d81/a02966.html#adf806592547de59418c6070d69c5efb9a06a019c60b174cae59e682299512d78c">PERMIT_BASE_PROACTIVE</a></div><div class="ttdeci">@ PERMIT_BASE_PROACTIVE</div><div class="ttdef"><b>Definition:</b> CreatureAI.h:244</div></div>
<div class="ttc" id="aa02966_html_adf806592547de59418c6070d69c5efb9a3ea8686bf6c00259f435df8f34da17c0"><div class="ttname"><a href="../../df/d81/a02966.html#adf806592547de59418c6070d69c5efb9a3ea8686bf6c00259f435df8f34da17c0">PERMIT_BASE_NO</a></div><div class="ttdeci">@ PERMIT_BASE_NO</div><div class="ttdef"><b>Definition:</b> CreatureAI.h:241</div></div>
<div class="ttc" id="aa02966_html_adf806592547de59418c6070d69c5efb9a8781eb0d588151b618bd98b03423dc58"><div class="ttname"><a href="../../df/d81/a02966.html#adf806592547de59418c6070d69c5efb9a8781eb0d588151b618bd98b03423dc58">PERMIT_BASE_REACTIVE</a></div><div class="ttdeci">@ PERMIT_BASE_REACTIVE</div><div class="ttdef"><b>Definition:</b> CreatureAI.h:243</div></div>
<div class="ttc" id="aa03521_html_a111db1c9ed7ec701bc06841238cd7b04a1b023722ae04fdce479c20dd23fa2f5a"><div class="ttname"><a href="../../d8/dbe/a03521.html#a111db1c9ed7ec701bc06841238cd7b04a1b023722ae04fdce479c20dd23fa2f5a">UNIT_MASK_CONTROLABLE_GUARDIAN</a></div><div class="ttdeci">@ UNIT_MASK_CONTROLABLE_GUARDIAN</div><div class="ttdef"><b>Definition:</b> UnitDefines.h:143</div></div>
<div class="ttc" id="aa07914_html"><div class="ttname"><a href="../../d2/dd7/a07914.html">Guardian</a></div><div class="ttdef"><b>Definition:</b> TemporarySummon.h:95</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00706">Unit::HasUnitTypeMask()</a>, <a class="el" href="../../#l00241">PERMIT_BASE_NO</a>, <a class="el" href="../../#l00244">PERMIT_BASE_PROACTIVE</a>, <a class="el" href="../../#l00243">PERMIT_BASE_REACTIVE</a>, and <a class="el" href="../../#l00143">UNIT_MASK_CONTROLABLE_GUARDIAN</a>.</p>

</div>
</div>
<a id="a4ee1ac5c9e0235957c823e8f3c847d9f" name="a4ee1ac5c9e0235957c823e8f3c847d9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ee1ac5c9e0235957c823e8f3c847d9f">&#9670;&#160;</a></span>PetStopAttack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::PetStopAttack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="../../dc/d36/a06074.html#ae16f47644ea272cf4ba3aa5f6c7256ee">CreatureAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>{</div>
<div class="line"><span class="lineno">   69</span>    <a class="code hl_function" href="../../d0/dbe/a06026.html#ad917a38ff0553bd974694f37242076b0">_stopAttack</a>();</div>
<div class="line"><span class="lineno">   70</span>}</div>
<div class="ttc" id="aa06026_html_ad917a38ff0553bd974694f37242076b0"><div class="ttname"><a href="../../d0/dbe/a06026.html#ad917a38ff0553bd974694f37242076b0">PetAI::_stopAttack</a></div><div class="ttdeci">void _stopAttack(void)</div><div class="ttdef"><b>Definition:</b> PetAI.cpp:72</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00072">_stopAttack()</a>.</p>

</div>
</div>
<a id="a0fdb1df9497319d5a874df78c74caf39" name="a0fdb1df9497319d5a874df78c74caf39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fdb1df9497319d5a874df78c74caf39">&#9670;&#160;</a></span>ReceiveEmote()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::ReceiveEmote </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d86/a08398.html">Player</a> *&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"><em>textEmote</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="../../dc/d36/a06074.html#abb43fe424c8e27543a935a335c133c86">CreatureAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  744</span>{</div>
<div class="line"><span class="lineno">  745</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ac0f51b4cac0b9ad35347a50a91826785">GetOwnerGUID</a>() == player-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>())</div>
<div class="line"><span class="lineno">  746</span>        <span class="keywordflow">switch</span> (emote)</div>
<div class="line"><span class="lineno">  747</span>        {</div>
<div class="line"><span class="lineno">  748</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a745c5be4d6fbeb9a2744f84c81734ba9ab4e57d7b4e8c8a280956fc5fdac5191a">TEXT_EMOTE_COWER</a>:</div>
<div class="line"><span class="lineno">  749</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a16c186b19f846fbce1252427943caefc">ToPet</a>()-&gt;<a class="code hl_function" href="../../de/d0e/a07910.html#ae56acaeea6d1cf9735345cb784f3dcd3">IsPetGhoul</a>())</div>
<div class="line"><span class="lineno">  750</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#adeebdc78f840a40e89361e5c792b0e53">HandleEmoteCommand</a>(<span class="comment">/*EMOTE_ONESHOT_ROAR*/</span><a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a0e527855c554e31654c9beb340145574a600680da54086d16db58ae7bb2e94e14">EMOTE_ONESHOT_OMNICAST_GHOUL</a>);</div>
<div class="line"><span class="lineno">  751</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  752</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a745c5be4d6fbeb9a2744f84c81734ba9a5f7bbbd319ea87f557e677da64386d7d">TEXT_EMOTE_ANGRY</a>:</div>
<div class="line"><span class="lineno">  753</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a16c186b19f846fbce1252427943caefc">ToPet</a>()-&gt;<a class="code hl_function" href="../../de/d0e/a07910.html#ae56acaeea6d1cf9735345cb784f3dcd3">IsPetGhoul</a>())</div>
<div class="line"><span class="lineno">  754</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#adeebdc78f840a40e89361e5c792b0e53">HandleEmoteCommand</a>(<span class="comment">/*EMOTE_ONESHOT_COWER*/</span><a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a0e527855c554e31654c9beb340145574aac8b077506be3c6ce2dda446450d13da">EMOTE_STATE_STUN</a>);</div>
<div class="line"><span class="lineno">  755</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  756</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a745c5be4d6fbeb9a2744f84c81734ba9ac8c7dc24b6b442d637e23461c106b237">TEXT_EMOTE_GLARE</a>:</div>
<div class="line"><span class="lineno">  757</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a16c186b19f846fbce1252427943caefc">ToPet</a>()-&gt;<a class="code hl_function" href="../../de/d0e/a07910.html#ae56acaeea6d1cf9735345cb784f3dcd3">IsPetGhoul</a>())</div>
<div class="line"><span class="lineno">  758</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#adeebdc78f840a40e89361e5c792b0e53">HandleEmoteCommand</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a0e527855c554e31654c9beb340145574aac8b077506be3c6ce2dda446450d13da">EMOTE_STATE_STUN</a>);</div>
<div class="line"><span class="lineno">  759</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  760</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a745c5be4d6fbeb9a2744f84c81734ba9aa9a44e90a081b72a7bcd4beaeed32167">TEXT_EMOTE_SOOTHE</a>:</div>
<div class="line"><span class="lineno">  761</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a16c186b19f846fbce1252427943caefc">ToPet</a>()-&gt;<a class="code hl_function" href="../../de/d0e/a07910.html#ae56acaeea6d1cf9735345cb784f3dcd3">IsPetGhoul</a>())</div>
<div class="line"><span class="lineno">  762</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#adeebdc78f840a40e89361e5c792b0e53">HandleEmoteCommand</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a0e527855c554e31654c9beb340145574a600680da54086d16db58ae7bb2e94e14">EMOTE_ONESHOT_OMNICAST_GHOUL</a>);</div>
<div class="line"><span class="lineno">  763</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  764</span>        }</div>
<div class="line"><span class="lineno">  765</span>}</div>
<div class="ttc" id="aa02771_html_a0e527855c554e31654c9beb340145574a600680da54086d16db58ae7bb2e94e14"><div class="ttname"><a href="../../d0/dbd/a02771.html#a0e527855c554e31654c9beb340145574a600680da54086d16db58ae7bb2e94e14">EMOTE_ONESHOT_OMNICAST_GHOUL</a></div><div class="ttdeci">@ EMOTE_ONESHOT_OMNICAST_GHOUL</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:2028</div></div>
<div class="ttc" id="aa02771_html_a0e527855c554e31654c9beb340145574aac8b077506be3c6ce2dda446450d13da"><div class="ttname"><a href="../../d0/dbd/a02771.html#a0e527855c554e31654c9beb340145574aac8b077506be3c6ce2dda446450d13da">EMOTE_STATE_STUN</a></div><div class="ttdeci">@ EMOTE_STATE_STUN</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1940</div></div>
<div class="ttc" id="aa02771_html_a745c5be4d6fbeb9a2744f84c81734ba9a5f7bbbd319ea87f557e677da64386d7d"><div class="ttname"><a href="../../d0/dbd/a02771.html#a745c5be4d6fbeb9a2744f84c81734ba9a5f7bbbd319ea87f557e677da64386d7d">TEXT_EMOTE_ANGRY</a></div><div class="ttdeci">@ TEXT_EMOTE_ANGRY</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1638</div></div>
<div class="ttc" id="aa02771_html_a745c5be4d6fbeb9a2744f84c81734ba9aa9a44e90a081b72a7bcd4beaeed32167"><div class="ttname"><a href="../../d0/dbd/a02771.html#a745c5be4d6fbeb9a2744f84c81734ba9aa9a44e90a081b72a7bcd4beaeed32167">TEXT_EMOTE_SOOTHE</a></div><div class="ttdeci">@ TEXT_EMOTE_SOOTHE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1769</div></div>
<div class="ttc" id="aa02771_html_a745c5be4d6fbeb9a2744f84c81734ba9ab4e57d7b4e8c8a280956fc5fdac5191a"><div class="ttname"><a href="../../d0/dbd/a02771.html#a745c5be4d6fbeb9a2744f84c81734ba9ab4e57d7b4e8c8a280956fc5fdac5191a">TEXT_EMOTE_COWER</a></div><div class="ttdeci">@ TEXT_EMOTE_COWER</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1663</div></div>
<div class="ttc" id="aa02771_html_a745c5be4d6fbeb9a2744f84c81734ba9ac8c7dc24b6b442d637e23461c106b237"><div class="ttname"><a href="../../d0/dbd/a02771.html#a745c5be4d6fbeb9a2744f84c81734ba9ac8c7dc24b6b442d637e23461c106b237">TEXT_EMOTE_GLARE</a></div><div class="ttdeci">@ TEXT_EMOTE_GLARE</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:1681</div></div>
<div class="ttc" id="aa07910_html_ae56acaeea6d1cf9735345cb784f3dcd3"><div class="ttname"><a href="../../de/d0e/a07910.html#ae56acaeea6d1cf9735345cb784f3dcd3">Minion::IsPetGhoul</a></div><div class="ttdeci">bool IsPetGhoul() const</div><div class="ttdef"><b>Definition:</b> TemporarySummon.h:84</div></div>
<div class="ttc" id="aa08530_html_a16c186b19f846fbce1252427943caefc"><div class="ttname"><a href="../../de/d71/a08530.html#a16c186b19f846fbce1252427943caefc">Unit::ToPet</a></div><div class="ttdeci">Pet * ToPet()</div><div class="ttdef"><b>Definition:</b> Unit.h:694</div></div>
<div class="ttc" id="aa08530_html_adeebdc78f840a40e89361e5c792b0e53"><div class="ttname"><a href="../../de/d71/a08530.html#adeebdc78f840a40e89361e5c792b0e53">Unit::HandleEmoteCommand</a></div><div class="ttdeci">void HandleEmoteCommand(uint32 emoteId)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:2000</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02028">EMOTE_ONESHOT_OMNICAST_GHOUL</a>, <a class="el" href="../../#l01940">EMOTE_STATE_STUN</a>, <a class="el" href="../../#l00112">Object::GetGUID()</a>, <a class="el" href="../../#l00678">Unit::GetOwnerGUID()</a>, <a class="el" href="../../#l02000">Unit::HandleEmoteCommand()</a>, <a class="el" href="../../#l00754">Unit::IsPet()</a>, <a class="el" href="../../#l00084">Minion::IsPetGhoul()</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l01638">TEXT_EMOTE_ANGRY</a>, <a class="el" href="../../#l01663">TEXT_EMOTE_COWER</a>, <a class="el" href="../../#l01681">TEXT_EMOTE_GLARE</a>, <a class="el" href="../../#l01769">TEXT_EMOTE_SOOTHE</a>, and <a class="el" href="../../#l00694">Unit::ToPet()</a>.</p>

</div>
</div>
<a id="add179efcb9c2ed0dd01aa3b2ac74004b" name="add179efcb9c2ed0dd01aa3b2ac74004b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add179efcb9c2ed0dd01aa3b2ac74004b">&#9670;&#160;</a></span>SelectNextTarget()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d71/a08530.html">Unit</a> * PetAI::SelectNextTarget </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allowAutoSelect</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  471</span>{</div>
<div class="line"><span class="lineno">  472</span>    <span class="comment">// Provides next target selection after current target death.</span></div>
<div class="line"><span class="lineno">  473</span>    <span class="comment">// This function should only be called internally by the AI</span></div>
<div class="line"><span class="lineno">  474</span>    <span class="comment">// Targets are not evaluated here for being valid targets, that is done in _CanAttack()</span></div>
<div class="line"><span class="lineno">  475</span>    <span class="comment">// The parameter: allowAutoSelect lets us disable aggressive pet auto targeting for certain situations</span></div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>    <span class="comment">// Passive pets don&#39;t do next target selection</span></div>
<div class="line"><span class="lineno">  478</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a46a7576522c3b964bd50388091f95951">HasReactState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37a8b5a7f923cba80ea3a429286eb38d0a0">REACT_PASSIVE</a>))</div>
<div class="line"><span class="lineno">  479</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>    <span class="comment">// Check pet attackers first so we don&#39;t drag a bunch of targets to the owner</span></div>
<div class="line"><span class="lineno">  482</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* myAttacker = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a40701366d968723298d7dd3d4e59c2fe">getAttackerForHelper</a>())</div>
<div class="line"><span class="lineno">  483</span>        <span class="keywordflow">if</span> (!myAttacker-&gt;HasBreakableByDamageCrowdControlAura() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a42cd2388a23189619d6c0f8131040132">CanCreatureAttack</a>(myAttacker))</div>
<div class="line"><span class="lineno">  484</span>            <span class="keywordflow">return</span> myAttacker;</div>
<div class="line"><span class="lineno">  485</span> </div>
<div class="line"><span class="lineno">  486</span>    <span class="comment">// Check pet&#39;s attackers first to prevent dragging mobs back to owner</span></div>
<div class="line"><span class="lineno">  487</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#af3a8f0038d3f4eb880de64b083efc8cd">HasTauntAura</a>())</div>
<div class="line"><span class="lineno">  488</span>    {</div>
<div class="line"><span class="lineno">  489</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d71/a08530.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a>&amp; tauntAuras = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a0b6417e1489c3f2e1ced1e0384d48ff8">GetAuraEffectsByType</a>(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a>);</div>
<div class="line"><span class="lineno">  490</span>        <span class="keywordflow">if</span> (!tauntAuras.empty())</div>
<div class="line"><span class="lineno">  491</span>            <span class="keywordflow">for</span> (Unit::AuraEffectList::const_reverse_iterator itr = tauntAuras.rbegin(); itr != tauntAuras.rend(); ++itr)</div>
<div class="line"><span class="lineno">  492</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* caster = (*itr)-&gt;GetCaster())</div>
<div class="line"><span class="lineno">  493</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a42cd2388a23189619d6c0f8131040132">CanCreatureAttack</a>(caster) &amp;&amp; !caster-&gt;HasAuraTypeWithCaster(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799af68ea2e3dbd416aee413864788174dee">SPELL_AURA_IGNORED</a>, <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>()))</div>
<div class="line"><span class="lineno">  494</span>                        <span class="keywordflow">return</span> caster;</div>
<div class="line"><span class="lineno">  495</span>    }</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>    <span class="comment">// Not sure why we wouldn&#39;t have an owner but just in case...</span></div>
<div class="line"><span class="lineno">  498</span>    <a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* owner = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a7cdd398abd6ac328deb42529195e6add">GetCharmerOrOwner</a>();</div>
<div class="line"><span class="lineno">  499</span>    <span class="keywordflow">if</span> (!owner)</div>
<div class="line"><span class="lineno">  500</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>    <span class="comment">// Check owner attackers</span></div>
<div class="line"><span class="lineno">  503</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* ownerAttacker = owner-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a40701366d968723298d7dd3d4e59c2fe">getAttackerForHelper</a>())</div>
<div class="line"><span class="lineno">  504</span>        <span class="keywordflow">if</span> (!ownerAttacker-&gt;HasBreakableByDamageCrowdControlAura() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a42cd2388a23189619d6c0f8131040132">CanCreatureAttack</a>(ownerAttacker))</div>
<div class="line"><span class="lineno">  505</span>            <span class="keywordflow">return</span> ownerAttacker;</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>    <span class="comment">// Check owner victim</span></div>
<div class="line"><span class="lineno">  508</span>    <span class="comment">// 3.0.2 - Pets now start attacking their owners victim in defensive mode as soon as the hunter does</span></div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* ownerVictim = owner-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>())</div>
<div class="line"><span class="lineno">  510</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a42cd2388a23189619d6c0f8131040132">CanCreatureAttack</a>(ownerVictim))</div>
<div class="line"><span class="lineno">  511</span>            <span class="keywordflow">return</span> ownerVictim;</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>    <span class="comment">// Neither pet or owner had a target and aggressive pets can pick any target</span></div>
<div class="line"><span class="lineno">  514</span>    <span class="comment">// To prevent aggressive pets from chain selecting targets and running off, we</span></div>
<div class="line"><span class="lineno">  515</span>    <span class="comment">// only select a random target if certain conditions are met.</span></div>
<div class="line"><span class="lineno">  516</span>    <span class="keywordflow">if</span> (allowAutoSelect)</div>
<div class="line"><span class="lineno">  517</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a6c7fd5cb2ad02009e66d53b0da537947">IsReturning</a>() || <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a565c393e227624a53d503d5a38c9234e">IsFollowing</a>() || <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#ab1d9cb620b4aef51185759dc35e8dae8">IsAtStay</a>())</div>
<div class="line"><span class="lineno">  518</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* nearTarget = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">ToCreature</a>()-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#aac094f3afa9cbb202f7a6e42c23122b1">SelectNearestTargetInAttackDistance</a>(<a class="code hl_define" href="../../de/d3d/a03515.html#a664c114bdaa48d227bce3c91eb5eb5ad">MAX_AGGRO_RADIUS</a>))</div>
<div class="line"><span class="lineno">  519</span>                <span class="keywordflow">return</span> nearTarget;</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>    <span class="comment">// Default - no valid targets</span></div>
<div class="line"><span class="lineno">  522</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  523</span>}</div>
<div class="ttc" id="aa03092_html_a538cdc259460b365f406fe0b3a981799af68ea2e3dbd416aee413864788174dee"><div class="ttname"><a href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799af68ea2e3dbd416aee413864788174dee">SPELL_AURA_IGNORED</a></div><div class="ttdeci">@ SPELL_AURA_IGNORED</div><div class="ttdef"><b>Definition:</b> SpellAuraDefines.h:284</div></div>
<div class="ttc" id="aa03515_html_a664c114bdaa48d227bce3c91eb5eb5ad"><div class="ttname"><a href="../../de/d3d/a03515.html#a664c114bdaa48d227bce3c91eb5eb5ad">MAX_AGGRO_RADIUS</a></div><div class="ttdeci">#define MAX_AGGRO_RADIUS</div><div class="ttdef"><b>Definition:</b> Unit.h:43</div></div>
<div class="ttc" id="aa07778_html_aac094f3afa9cbb202f7a6e42c23122b1"><div class="ttname"><a href="../../df/d49/a07778.html#aac094f3afa9cbb202f7a6e42c23122b1">Creature::SelectNearestTargetInAttackDistance</a></div><div class="ttdeci">Unit * SelectNearestTargetInAttackDistance(float dist) const</div><div class="ttdoc">Select nearest hostile unit within the given attack distance (i.e. distance is ignored if &gt; than ATTA...</div><div class="ttdef"><b>Definition:</b> Creature.cpp:2406</div></div>
<div class="ttc" id="aa08150_html_ab0e2ef1ac1daa91476f749e0ec6ad3c6"><div class="ttname"><a href="../../d6/d80/a08150.html#ab0e2ef1ac1daa91476f749e0ec6ad3c6">Object::ToCreature</a></div><div class="ttdeci">Creature * ToCreature()</div><div class="ttdef"><b>Definition:</b> Object.h:205</div></div>
<div class="ttc" id="aa08530_html_a0b6417e1489c3f2e1ced1e0384d48ff8"><div class="ttname"><a href="../../de/d71/a08530.html#a0b6417e1489c3f2e1ced1e0384d48ff8">Unit::GetAuraEffectsByType</a></div><div class="ttdeci">AuraEffectList const &amp; GetAuraEffectsByType(AuraType type) const</div><div class="ttdef"><b>Definition:</b> Unit.h:1349</div></div>
<div class="ttc" id="aa08530_html_a40701366d968723298d7dd3d4e59c2fe"><div class="ttname"><a href="../../de/d71/a08530.html#a40701366d968723298d7dd3d4e59c2fe">Unit::getAttackerForHelper</a></div><div class="ttdeci">Unit * getAttackerForHelper() const</div><div class="ttdef"><b>Definition:</b> Unit.cpp:740</div></div>
<div class="ttc" id="aa08530_html_adcdd87d0c137619dfc869536c1315dd7"><div class="ttname"><a href="../../de/d71/a08530.html#adcdd87d0c137619dfc869536c1315dd7">Unit::AuraEffectList</a></div><div class="ttdeci">std::list&lt; AuraEffect * &gt; AuraEffectList</div><div class="ttdef"><b>Definition:</b> Unit.h:646</div></div>
<div class="ttc" id="aa08530_html_af3a8f0038d3f4eb880de64b083efc8cd"><div class="ttname"><a href="../../de/d71/a08530.html#af3a8f0038d3f4eb880de64b083efc8cd">Unit::HasTauntAura</a></div><div class="ttdeci">bool HasTauntAura() const</div><div class="ttdef"><b>Definition:</b> Unit.h:1701</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02625">Creature::CanCreatureAttack()</a>, <a class="el" href="../../#l00740">Unit::getAttackerForHelper()</a>, <a class="el" href="../../#l01349">Unit::GetAuraEffectsByType()</a>, <a class="el" href="../../#l01211">Unit::GetCharmerOrOwner()</a>, <a class="el" href="../../#l01206">Unit::GetCharmInfo()</a>, <a class="el" href="../../#l00112">Object::GetGUID()</a>, <a class="el" href="../../#l00853">Unit::GetVictim()</a>, <a class="el" href="../../#l00096">Creature::HasReactState()</a>, <a class="el" href="../../#l01701">Unit::HasTauntAura()</a>, <a class="el" href="../../#l00370">CharmInfo::IsAtStay()</a>, <a class="el" href="../../#l00380">CharmInfo::IsFollowing()</a>, <a class="el" href="../../#l00390">CharmInfo::IsReturning()</a>, <a class="el" href="../../#l00043">MAX_AGGRO_RADIUS</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00548">REACT_PASSIVE</a>, <a class="el" href="../../#l02406">Creature::SelectNearestTargetInAttackDistance()</a>, <a class="el" href="../../#l00284">SPELL_AURA_IGNORED</a>, <a class="el" href="../../#l00074">SPELL_AURA_MOD_TAUNT</a>, and <a class="el" href="../../#l00205">Object::ToCreature()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00392">KilledUnit()</a>, and <a class="el" href="../../#l00148">UpdateAI()</a>.</p>

</div>
</div>
<a id="a42fba073be62e3a35fc671f288d6e02b" name="a42fba073be62e3a35fc671f288d6e02b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42fba073be62e3a35fc671f288d6e02b">&#9670;&#160;</a></span>SpellHit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::SpellHit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d71/a08530.html">Unit</a> *&#160;</td>
          <td class="paramname"><em>caster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/df5/a10910.html">SpellInfo</a> const *&#160;</td>
          <td class="paramname"><em>spellInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="../../dc/d36/a06074.html#a6afb39c4bf86a1e882cc80fd7ec80a8f">CreatureAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  576</span>{</div>
<div class="line"><span class="lineno">  577</span>    <span class="comment">// Xinef: taunt behavior code</span></div>
<div class="line"><span class="lineno">  578</span>    <span class="keywordflow">if</span> (spellInfo-&gt;HasAura(<a class="code hl_enumvalue" href="../../d5/d37/a03092.html#a538cdc259460b365f406fe0b3a981799a9a82bcb2293394d7dc4a105cc52f8aa1">SPELL_AURA_MOD_TAUNT</a>) &amp;&amp; !<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a46a7576522c3b964bd50388091f95951">HasReactState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37a8b5a7f923cba80ea3a429286eb38d0a0">REACT_PASSIVE</a>))</div>
<div class="line"><span class="lineno">  579</span>    {</div>
<div class="line"><span class="lineno">  580</span>        <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a9cbd0809f04ca1fa3f02da9d1fa09d94">SetForcedSpell</a>(0);</div>
<div class="line"><span class="lineno">  581</span>        <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#aded1ef1d1f0ec2e9d22c9d9af09be798">SetForcedTargetGUID</a>();</div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d0/dbe/a06026.html#acccb6f24c7b1bb0762d542fdc013b330">CanAttack</a>(caster, spellInfo))</div>
<div class="line"><span class="lineno">  584</span>        {</div>
<div class="line"><span class="lineno">  585</span>            <span class="comment">// Only chase if not commanded to stay or if stay but commanded to attack</span></div>
<div class="line"><span class="lineno">  586</span>            <a class="code hl_function" href="../../d0/dbe/a06026.html#a9db3295e6d83e5407c8a55b004ccf4c7">DoAttack</a>(caster, (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#ab817266875b889133f8297d31c0f911e">HasCommandState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#af147d8054b617fd731305de8a69bd257ab33055c9492afc567e3a602f88347ca5">COMMAND_STAY</a>) || <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a2589e58973f407555d8f6c95c89f378e">IsCommandAttack</a>()));</div>
<div class="line"><span class="lineno">  587</span>        }</div>
<div class="line"><span class="lineno">  588</span>    }</div>
<div class="line"><span class="lineno">  589</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00666">CanAttack()</a>, <a class="el" href="../../#l00555">COMMAND_STAY</a>, <a class="el" href="../../#l00591">DoAttack()</a>, <a class="el" href="../../#l01206">Unit::GetCharmInfo()</a>, <a class="el" href="../../#l00893">SpellInfo::HasAura()</a>, <a class="el" href="../../#l00137">CharmInfo::HasCommandState()</a>, <a class="el" href="../../#l00096">Creature::HasReactState()</a>, <a class="el" href="../../#l00308">CharmInfo::IsCommandAttack()</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00548">REACT_PASSIVE</a>, <a class="el" href="../../#l00177">CharmInfo::SetForcedSpell()</a>, <a class="el" href="../../#l00179">CharmInfo::SetForcedTargetGUID()</a>, and <a class="el" href="../../#l00074">SPELL_AURA_MOD_TAUNT</a>.</p>

</div>
</div>
<a id="aea55a7701940e23f90b68fd43a6367ff" name="aea55a7701940e23f90b68fd43a6367ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea55a7701940e23f90b68fd43a6367ff">&#9670;&#160;</a></span>UpdateAI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::UpdateAI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use to start attacking a target. Called just before <a class="el" href="../../dc/d36/a06074.html#a15f691c9137273cd5c3d5ba6f0762300" title="Called for reaction when initially engaged.">JustEngagedWith()</a> </p>

<p>Implements <a class="el" href="../../d9/de2/a06062.html#a7288294b38c6161ab1218d75fe622fc0">UnitAI</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  149</span>{</div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a5ea3f54af571493f7889220724667189">IsAlive</a>() || !<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>())</div>
<div class="line"><span class="lineno">  151</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>    <a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* owner = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a7cdd398abd6ac328deb42529195e6add">GetCharmerOrOwner</a>();</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d0/dbe/a06026.html#acbc18dc58935e17b2bc224a78f43250b">m_updateAlliesTimer</a> &lt;= diff)</div>
<div class="line"><span class="lineno">  156</span>        <span class="comment">// UpdateAllies self set update timer</span></div>
<div class="line"><span class="lineno">  157</span>        <a class="code hl_function" href="../../d0/dbe/a06026.html#a611f7bd5e1cf0cb592087bd836c2b922">UpdateAllies</a>();</div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  159</span>        <a class="code hl_variable" href="../../d0/dbe/a06026.html#acbc18dc58935e17b2bc224a78f43250b">m_updateAlliesTimer</a> -= diff;</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>()-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a5ea3f54af571493f7889220724667189">IsAlive</a>())</div>
<div class="line"><span class="lineno">  162</span>    {</div>
<div class="line"><span class="lineno">  163</span>        <span class="comment">// is only necessary to stop casting, the pet must not exit combat</span></div>
<div class="line"><span class="lineno">  164</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>()-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a27f82c66a0abd2cbfcb95511934f82da">HasBreakableByDamageCrowdControlAura</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>))</div>
<div class="line"><span class="lineno">  165</span>        {</div>
<div class="line"><span class="lineno">  166</span>            <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a2bdfe38bdc28869a9002094e4341d56e">InterruptNonMeleeSpells</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  167</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  168</span>        }</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d0/dbe/a06026.html#a2db745b751d87fad8e473701e80b30cb">_needToStop</a>())</div>
<div class="line"><span class="lineno">  171</span>        {</div>
<div class="line"><span class="lineno">  172</span>            <a class="code hl_define" href="../../d4/d8c/a00035.html#a47ac782b14a7531c6232777165a1a161">LOG_DEBUG</a>(<span class="stringliteral">&quot;entities.unit.ai&quot;</span>, <span class="stringliteral">&quot;Pet AI stopped attacking [{}]&quot;</span>, <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>().<a class="code hl_function" href="../../d9/d08/a08198.html#a78f5fb47e3b35addf8984000c175125b">ToString</a>());</div>
<div class="line"><span class="lineno">  173</span>            <a class="code hl_function" href="../../d0/dbe/a06026.html#ad917a38ff0553bd974694f37242076b0">_stopAttack</a>();</div>
<div class="line"><span class="lineno">  174</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  175</span>        }</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>        <span class="comment">// Check before attacking to prevent pets from leaving stay position</span></div>
<div class="line"><span class="lineno">  178</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#ab817266875b889133f8297d31c0f911e">HasCommandState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#af147d8054b617fd731305de8a69bd257ab33055c9492afc567e3a602f88347ca5">COMMAND_STAY</a>))</div>
<div class="line"><span class="lineno">  179</span>        {</div>
<div class="line"><span class="lineno">  180</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a2589e58973f407555d8f6c95c89f378e">IsCommandAttack</a>() || (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#ab1d9cb620b4aef51185759dc35e8dae8">IsAtStay</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a748fa068a1b1b9850141f91ff17fc65d">IsWithinMeleeRange</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>())))</div>
<div class="line"><span class="lineno">  181</span>                <a class="code hl_function" href="../../d0/dbe/a06026.html#a9844910170b61d3f5e60783d0ec73322">_doMeleeAttack</a>();</div>
<div class="line"><span class="lineno">  182</span>        }</div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  184</span>            <a class="code hl_function" href="../../d0/dbe/a06026.html#a9844910170b61d3f5e60783d0ec73322">_doMeleeAttack</a>();</div>
<div class="line"><span class="lineno">  185</span>    }</div>
<div class="line"><span class="lineno">  186</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>() || (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a1e7ec9745d2b9356267636aae280b3f8">GetForcedSpell</a>() &amp;&amp; !(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a16c186b19f846fbce1252427943caefc">ToPet</a>()-&gt;<a class="code hl_function" href="../../dd/d7d/a08262.html#a029e483c79cb68affc04d04ca0c81d0e">HasTempSpell</a>()) &amp;&amp; !<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54">UNIT_STATE_CASTING</a>)))</div>
<div class="line"><span class="lineno">  187</span>    {</div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a46a7576522c3b964bd50388091f95951">HasReactState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37ab0d46448581f9ac821fb076f185661fc">REACT_AGGRESSIVE</a>) || <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#ab1d9cb620b4aef51185759dc35e8dae8">IsAtStay</a>())</div>
<div class="line"><span class="lineno">  189</span>        {</div>
<div class="line"><span class="lineno">  190</span>            <span class="comment">// Every update we need to check targets only in certain cases</span></div>
<div class="line"><span class="lineno">  191</span>            <span class="comment">// Aggressive - Allow auto select if owner or pet don&#39;t have a target</span></div>
<div class="line"><span class="lineno">  192</span>            <span class="comment">// Stay - Only pick from pet or owner targets / attackers so targets won&#39;t run by</span></div>
<div class="line"><span class="lineno">  193</span>            <span class="comment">//   while chasing our owner. Don&#39;t do auto select.</span></div>
<div class="line"><span class="lineno">  194</span>            <span class="comment">// All other cases (ie: defensive) - Targets are assigned by AttackedBy(), OwnerAttackedBy(), OwnerAttacked(), etc.</span></div>
<div class="line"><span class="lineno">  195</span>            <a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* nextTarget = <a class="code hl_function" href="../../d0/dbe/a06026.html#add179efcb9c2ed0dd01aa3b2ac74004b">SelectNextTarget</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a46a7576522c3b964bd50388091f95951">HasReactState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37ab0d46448581f9ac821fb076f185661fc">REACT_AGGRESSIVE</a>));</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>            <span class="keywordflow">if</span> (nextTarget)</div>
<div class="line"><span class="lineno">  198</span>                <a class="code hl_function" href="../../d0/dbe/a06026.html#a2b6e07ca92d367bcd3e3d27bf6e5cc9b">AttackStart</a>(nextTarget);</div>
<div class="line"><span class="lineno">  199</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  200</span>                <a class="code hl_function" href="../../d0/dbe/a06026.html#aebd92475342c2905052a2ea9601c1423">HandleReturnMovement</a>();</div>
<div class="line"><span class="lineno">  201</span>        }</div>
<div class="line"><span class="lineno">  202</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  203</span>            <a class="code hl_function" href="../../d0/dbe/a06026.html#aebd92475342c2905052a2ea9601c1423">HandleReturnMovement</a>();</div>
<div class="line"><span class="lineno">  204</span>    }</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>    <span class="comment">// xinef: charm info must be always available</span></div>
<div class="line"><span class="lineno">  207</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>())</div>
<div class="line"><span class="lineno">  208</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>    <span class="comment">// Autocast (casted only in combat or persistent spells in any state)</span></div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54">UNIT_STATE_CASTING</a>))</div>
<div class="line"><span class="lineno">  212</span>    {</div>
<div class="line"><span class="lineno">  213</span>        <span class="keywordflow">if</span> (owner &amp;&amp; owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a1e7ec9745d2b9356267636aae280b3f8">GetForcedSpell</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a2484c82adc8c25c18ba91b6fe1b21065">GetForcedTarget</a>())</div>
<div class="line"><span class="lineno">  214</span>        {</div>
<div class="line"><span class="lineno">  215</span>            owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d9/d86/a08398.html#a6ab11ca64cde7c5cde1f53998a6f7253">GetSession</a>()-&gt;<a class="code hl_function" href="../../d1/d5e/a10754.html#aed37ffeb8c5b74e5762ed7b0a688951e">HandlePetActionHelper</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>, <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>(), std::abs(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a1e7ec9745d2b9356267636aae280b3f8">GetForcedSpell</a>()), <a class="code hl_enumvalue" href="../../dd/daf/a03503.html#aaec28a439b9086a5fd69bd5358bb46daa60dbce51e005270fd5bc183457883952">ACT_ENABLED</a>, <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a2484c82adc8c25c18ba91b6fe1b21065">GetForcedTarget</a>());</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>            <span class="comment">// xinef: if spell was casted properly and we are in passive mode, handle return</span></div>
<div class="line"><span class="lineno">  218</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a1e7ec9745d2b9356267636aae280b3f8">GetForcedSpell</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a46a7576522c3b964bd50388091f95951">HasReactState</a>(<a class="code hl_enumvalue" href="../../de/d3d/a03515.html#a5e9099d162ad74df5a3e3f5c0f056c37a8b5a7f923cba80ea3a429286eb38d0a0">REACT_PASSIVE</a>))</div>
<div class="line"><span class="lineno">  219</span>            {</div>
<div class="line"><span class="lineno">  220</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ab78147cd520d2dac6be709b4c80a7de3">HasUnitState</a>(<a class="code hl_enumvalue" href="../../d8/dbe/a03521.html#ae51d2ecb71f7a5cb3882982a622c9544addeb46481f5261653c159d6f0db9cd54">UNIT_STATE_CASTING</a>))</div>
<div class="line"><span class="lineno">  221</span>                {</div>
<div class="line"><span class="lineno">  222</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4a04a3f22c3b0d6f4933993ac0cc7aa4">GetMotionMaster</a>()-&gt;<a class="code hl_function" href="../../da/df6/a09674.html#afa6ffa9c5d6897f3aad3ac524c7bb35a">Clear</a>(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  223</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a61edf6ab694fa8f7ed6ef194fd4dd103">StopMoving</a>();</div>
<div class="line"><span class="lineno">  224</span>                }</div>
<div class="line"><span class="lineno">  225</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  226</span>                    <a class="code hl_function" href="../../d0/dbe/a06026.html#ad917a38ff0553bd974694f37242076b0">_stopAttack</a>();</div>
<div class="line"><span class="lineno">  227</span>            }</div>
<div class="line"><span class="lineno">  228</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  229</span>        }</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>        <span class="comment">// xinef: dont allow ghouls to cast spells below 75 energy</span></div>
<div class="line"><span class="lineno">  232</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a4ad2fdcc45e2c3c85ad59ff49268b58c">IsPet</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a16c186b19f846fbce1252427943caefc">ToPet</a>()-&gt;<a class="code hl_function" href="../../de/d0e/a07910.html#ae56acaeea6d1cf9735345cb784f3dcd3">IsPetGhoul</a>() &amp;&amp; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ad7e475d80b9af430cc076d7c01f967e9">GetPower</a>(<a class="code hl_enumvalue" href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a>) &lt; 75)</div>
<div class="line"><span class="lineno">  233</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>        <span class="keyword">typedef</span> std::vector&lt;std::pair&lt;Unit*, Spell*&gt; &gt; TargetSpellList;</div>
<div class="line"><span class="lineno">  236</span>        TargetSpellList targetSpellStore;</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>        <span class="keywordflow">for</span> (<a class="code hl_typedef" href="../../d4/d1e/a00497.html#a15a8d014fadf85c99a2268d8cbd00767">uint8</a> i = 0; i &lt; <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a0aa6b0526eeec473ca465cf4a1c23b31">GetPetAutoSpellSize</a>(); ++i)</div>
<div class="line"><span class="lineno">  239</span>        {</div>
<div class="line"><span class="lineno">  240</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> spellID = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#acc2c5f7925a968c540b54b5f126a0f7d">GetPetAutoSpellOnPos</a>(i);</div>
<div class="line"><span class="lineno">  241</span>            <span class="keywordflow">if</span> (!spellID)</div>
<div class="line"><span class="lineno">  242</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>            <a class="code hl_class" href="../../dd/df5/a10910.html">SpellInfo</a> <span class="keyword">const</span>* spellInfo = <a class="code hl_define" href="../../df/d64/a03110.html#aa21e14d8e1145507b746a69b5487109d">sSpellMgr</a>-&gt;GetSpellInfo(spellID);</div>
<div class="line"><span class="lineno">  245</span>            <span class="keywordflow">if</span> (!spellInfo)</div>
<div class="line"><span class="lineno">  246</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a66f99d0d7cdf9c7013788fe6265a5c3b">GetCharmInfo</a>()-&gt;<a class="code hl_function" href="../../d8/dea/a08462.html#a38dc3f578f6ec33693d2aa30adb17ed8">GetGlobalCooldownMgr</a>().<a class="code hl_function" href="../../d1/d8b/a08454.html#a7487d19ae8c59e5c5e871b2e1afabfba">HasGlobalCooldown</a>(spellInfo))</div>
<div class="line"><span class="lineno">  249</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>            <span class="comment">// check spell cooldown, this should be checked in CheckCast...</span></div>
<div class="line"><span class="lineno">  252</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#a223db1b78a3dc2730c1096f7d2ca3675">HasSpellCooldown</a>(spellInfo-&gt;<a class="code hl_variable" href="../../dd/df5/a10910.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>))</div>
<div class="line"><span class="lineno">  253</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>            <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code hl_function" href="../../dd/df5/a10910.html#adef74790281b92d72ac2c2118a665096">IsPositive</a>())</div>
<div class="line"><span class="lineno">  256</span>            {</div>
<div class="line"><span class="lineno">  257</span>                <span class="keywordflow">if</span> (spellInfo-&gt;<a class="code hl_function" href="../../dd/df5/a10910.html#a7e496d4dc01e50c75feab5c951c17894">CanBeUsedInCombat</a>())</div>
<div class="line"><span class="lineno">  258</span>                {</div>
<div class="line"><span class="lineno">  259</span>                    <span class="comment">// Check if we&#39;re in combat or commanded to attack (exlude auras with infinity duration)</span></div>
<div class="line"><span class="lineno">  260</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#af5e75d013dfa8a8b888d7714992e3f2a">IsInCombat</a>() &amp;&amp; spellInfo-&gt;<a class="code hl_function" href="../../dd/df5/a10910.html#a6cc135f2b87d1fecd6e7db475f9039dd">GetMaxDuration</a>() != -1 &amp;&amp; !<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a68b6c4d77485415bd8df8593d4dd6ced">IsPetInCombat</a>())</div>
<div class="line"><span class="lineno">  261</span>                    {</div>
<div class="line"><span class="lineno">  262</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  263</span>                    }</div>
<div class="line"><span class="lineno">  264</span>                }</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>                <a class="code hl_class" href="../../d5/d56/a10846.html">Spell</a>* spell = <span class="keyword">new</span> <a class="code hl_class" href="../../d5/d56/a10846.html">Spell</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>, spellInfo, <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967ad2e82d2342b545f831dfe79d922a3b20">TRIGGERED_NONE</a>);</div>
<div class="line"><span class="lineno">  267</span>                spell-&gt;<a class="code hl_function" href="../../d5/d56/a10846.html#a15fb735ebd7b6b956042e947aa0bf4a3">LoadScripts</a>(); <span class="comment">// xinef: load for CanAutoCast (calling CheckPetCast)</span></div>
<div class="line"><span class="lineno">  268</span>                <span class="keywordtype">bool</span> spellUsed = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>                <span class="comment">// Some spells can target enemy or friendly (DK Ghoul&#39;s Leap)</span></div>
<div class="line"><span class="lineno">  271</span>                <span class="comment">// Check for enemy first (pet then owner)</span></div>
<div class="line"><span class="lineno">  272</span>                <a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* target = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a40701366d968723298d7dd3d4e59c2fe">getAttackerForHelper</a>();</div>
<div class="line"><span class="lineno">  273</span>                <span class="keywordflow">if</span> (!target &amp;&amp; owner)</div>
<div class="line"><span class="lineno">  274</span>                    target = owner-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a40701366d968723298d7dd3d4e59c2fe">getAttackerForHelper</a>();</div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span>                <span class="keywordflow">if</span> (target)</div>
<div class="line"><span class="lineno">  277</span>                {</div>
<div class="line"><span class="lineno">  278</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d0/dbe/a06026.html#acccb6f24c7b1bb0762d542fdc013b330">CanAttack</a>(target) &amp;&amp; spell-&gt;<a class="code hl_function" href="../../d5/d56/a10846.html#aff5477a54c2dfe98575d5ea12984b86f">CanAutoCast</a>(target))</div>
<div class="line"><span class="lineno">  279</span>                    {</div>
<div class="line"><span class="lineno">  280</span>                        targetSpellStore.emplace_back(target, spell);</div>
<div class="line"><span class="lineno">  281</span>                        spellUsed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  282</span>                    }</div>
<div class="line"><span class="lineno">  283</span>                }</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>                <span class="comment">// No enemy, check friendly</span></div>
<div class="line"><span class="lineno">  286</span>                <span class="keywordflow">if</span> (!spellUsed)</div>
<div class="line"><span class="lineno">  287</span>                {</div>
<div class="line"><span class="lineno">  288</span>                    <span class="keywordflow">for</span> (<a class="code hl_class" href="../../d9/d08/a08198.html">ObjectGuid</a> <span class="keyword">const</span>&amp; guid : <a class="code hl_variable" href="../../d0/dbe/a06026.html#a77bf7a57505e47e830eeb1fefb5a4493">m_AllySet</a>)</div>
<div class="line"><span class="lineno">  289</span>                    {</div>
<div class="line"><span class="lineno">  290</span>                        <a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* ally = <a class="code hl_function" href="../../d9/d06/a04735.html#a02c2dfb59db7d7e2501dcc9a4f9baf07">ObjectAccessor::GetUnit</a>(*<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>, guid);</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>                        <span class="comment">//only buff targets that are in combat, unless the spell can only be cast while out of combat</span></div>
<div class="line"><span class="lineno">  293</span>                        <span class="keywordflow">if</span> (!ally)</div>
<div class="line"><span class="lineno">  294</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>                        <span class="keywordflow">if</span> (spell-&gt;<a class="code hl_function" href="../../d5/d56/a10846.html#aff5477a54c2dfe98575d5ea12984b86f">CanAutoCast</a>(ally))</div>
<div class="line"><span class="lineno">  297</span>                        {</div>
<div class="line"><span class="lineno">  298</span>                            targetSpellStore.emplace_back(ally, spell);</div>
<div class="line"><span class="lineno">  299</span>                            spellUsed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  300</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  301</span>                        }</div>
<div class="line"><span class="lineno">  302</span>                    }</div>
<div class="line"><span class="lineno">  303</span>                }</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>                <span class="comment">// No valid targets at all</span></div>
<div class="line"><span class="lineno">  306</span>                <span class="keywordflow">if</span> (!spellUsed)</div>
<div class="line"><span class="lineno">  307</span>                    <span class="keyword">delete</span> spell;</div>
<div class="line"><span class="lineno">  308</span>            }</div>
<div class="line"><span class="lineno">  309</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>() &amp;&amp; <a class="code hl_function" href="../../d0/dbe/a06026.html#acccb6f24c7b1bb0762d542fdc013b330">CanAttack</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>(), spellInfo) &amp;&amp; spellInfo-&gt;<a class="code hl_function" href="../../dd/df5/a10910.html#a7e496d4dc01e50c75feab5c951c17894">CanBeUsedInCombat</a>())</div>
<div class="line"><span class="lineno">  310</span>            {</div>
<div class="line"><span class="lineno">  311</span>                <a class="code hl_class" href="../../d5/d56/a10846.html">Spell</a>* spell = <span class="keyword">new</span> <a class="code hl_class" href="../../d5/d56/a10846.html">Spell</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>, spellInfo, <a class="code hl_enumvalue" href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967ad2e82d2342b545f831dfe79d922a3b20">TRIGGERED_NONE</a>);</div>
<div class="line"><span class="lineno">  312</span>                <span class="keywordflow">if</span> (spell-&gt;<a class="code hl_function" href="../../d5/d56/a10846.html#aff5477a54c2dfe98575d5ea12984b86f">CanAutoCast</a>(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>()))</div>
<div class="line"><span class="lineno">  313</span>                    targetSpellStore.emplace_back(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#aae09d03a474ea5517d671e64dc393739">GetVictim</a>(), spell);</div>
<div class="line"><span class="lineno">  314</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  315</span>                    <span class="keyword">delete</span> spell;</div>
<div class="line"><span class="lineno">  316</span>            }</div>
<div class="line"><span class="lineno">  317</span>        }</div>
<div class="line"><span class="lineno">  318</span> </div>
<div class="line"><span class="lineno">  319</span>        <span class="comment">//found units to cast on to</span></div>
<div class="line"><span class="lineno">  320</span>        <span class="keywordflow">if</span> (!targetSpellStore.empty())</div>
<div class="line"><span class="lineno">  321</span>        {</div>
<div class="line"><span class="lineno">  322</span>            <a class="code hl_typedef" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> index = <a class="code hl_function" href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a>(0, targetSpellStore.size() - 1);</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>            <a class="code hl_class" href="../../d5/d56/a10846.html">Spell</a>* spell  = targetSpellStore[index].second;</div>
<div class="line"><span class="lineno">  325</span>            <a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>*  target = targetSpellStore[index].first;</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>            targetSpellStore.erase(targetSpellStore.begin() + index);</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>            <a class="code hl_class" href="../../d6/dd9/a10826.html">SpellCastTargets</a> targets;</div>
<div class="line"><span class="lineno">  330</span>            targets.<a class="code hl_function" href="../../d6/dd9/a10826.html#a981f7520eed4002d70d7b15eb5e710a7">SetUnitTarget</a>(target);</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/dc8/a08226.html#a7e91a07c89b5645ddff795e0b5495632">HasInArc</a>(M_PI, target))</div>
<div class="line"><span class="lineno">  333</span>            {</div>
<div class="line"><span class="lineno">  334</span>                <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#ae2ce6a171e27e575ad183809a78286ae">SetInFront</a>(target);</div>
<div class="line"><span class="lineno">  335</span>                <span class="keywordflow">if</span> (target &amp;&amp; target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno">  336</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#adc648c59e740565161b8c8b29dc0f3e5">SendUpdateToPlayer</a>(target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>());</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>                <span class="keywordflow">if</span> (owner &amp;&amp; owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno">  339</span>                    <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#adc648c59e740565161b8c8b29dc0f3e5">SendUpdateToPlayer</a>(owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>());</div>
<div class="line"><span class="lineno">  340</span>            }</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>            <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../df/d49/a07778.html#ab0dbb5f519f404a1003b7ef55112e79c">AddSpellCooldown</a>(spell-&gt;<a class="code hl_variable" href="../../d5/d56/a10846.html#af46c9b635b8928c161d943f10ae693f1">m_spellInfo</a>-&gt;<a class="code hl_variable" href="../../dd/df5/a10910.html#a49bc14059c2bd3785231c52e0d54d382">Id</a>, 0, 0);</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>            spell-&gt;<a class="code hl_function" href="../../d5/d56/a10846.html#a26ce7c494bc33a4bdd0bc238d00cff79">prepare</a>(&amp;targets);</div>
<div class="line"><span class="lineno">  345</span>        }</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>        <span class="comment">// deleted cached Spell objects</span></div>
<div class="line"><span class="lineno">  348</span>        <span class="keywordflow">for</span> (TargetSpellList::const_iterator itr = targetSpellStore.begin(); itr != targetSpellStore.end(); ++itr)</div>
<div class="line"><span class="lineno">  349</span>            <span class="keyword">delete</span> itr-&gt;second;</div>
<div class="line"><span class="lineno">  350</span>    }</div>
<div class="line"><span class="lineno">  351</span>}</div>
<div class="ttc" id="aa00359_html_ab17def34ccbbd868dc87a16bf35acdbd"><div class="ttname"><a href="../../d4/def/a00359.html#ab17def34ccbbd868dc87a16bf35acdbd">urand</a></div><div class="ttdeci">uint32 urand(uint32 min, uint32 max)</div><div class="ttdef"><b>Definition:</b> Random.cpp:44</div></div>
<div class="ttc" id="aa02771_html_a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288"><div class="ttname"><a href="../../d0/dbd/a02771.html#a17e15fab4b89f4840e745f31ca76a414a535f3e3322566811e43bef82808b5288">POWER_ENERGY</a></div><div class="ttdeci">@ POWER_ENERGY</div><div class="ttdef"><b>Definition:</b> SharedDefines.h:272</div></div>
<div class="ttc" id="aa03080_html_a9f3c49d8db7e142b86eba36bc8951967ad2e82d2342b545f831dfe79d922a3b20"><div class="ttname"><a href="../../d1/d7a/a03080.html#a9f3c49d8db7e142b86eba36bc8951967ad2e82d2342b545f831dfe79d922a3b20">TRIGGERED_NONE</a></div><div class="ttdeci">@ TRIGGERED_NONE</div><div class="ttdef"><b>Definition:</b> SpellDefines.h:133</div></div>
<div class="ttc" id="aa03503_html_aaec28a439b9086a5fd69bd5358bb46daa60dbce51e005270fd5bc183457883952"><div class="ttname"><a href="../../dd/daf/a03503.html#aaec28a439b9086a5fd69bd5358bb46daa60dbce51e005270fd5bc183457883952">ACT_ENABLED</a></div><div class="ttdeci">@ ACT_ENABLED</div><div class="ttdef"><b>Definition:</b> CharmInfo.h:63</div></div>
<div class="ttc" id="aa04735_html_a02c2dfb59db7d7e2501dcc9a4f9baf07"><div class="ttname"><a href="../../d9/d06/a04735.html#a02c2dfb59db7d7e2501dcc9a4f9baf07">ObjectAccessor::GetUnit</a></div><div class="ttdeci">Unit * GetUnit(WorldObject const &amp;, ObjectGuid const guid)</div><div class="ttdef"><b>Definition:</b> ObjectAccessor.cpp:199</div></div>
<div class="ttc" id="aa06026_html_a2db745b751d87fad8e473701e80b30cb"><div class="ttname"><a href="../../d0/dbe/a06026.html#a2db745b751d87fad8e473701e80b30cb">PetAI::_needToStop</a></div><div class="ttdeci">bool _needToStop(void)</div><div class="ttdef"><b>Definition:</b> PetAI.cpp:49</div></div>
<div class="ttc" id="aa06026_html_a77bf7a57505e47e830eeb1fefb5a4493"><div class="ttname"><a href="../../d0/dbe/a06026.html#a77bf7a57505e47e830eeb1fefb5a4493">PetAI::m_AllySet</a></div><div class="ttdeci">GuidSet m_AllySet</div><div class="ttdef"><b>Definition:</b> PetAI.h:83</div></div>
<div class="ttc" id="aa06026_html_a9844910170b61d3f5e60783d0ec73322"><div class="ttname"><a href="../../d0/dbe/a06026.html#a9844910170b61d3f5e60783d0ec73322">PetAI::_doMeleeAttack</a></div><div class="ttdeci">void _doMeleeAttack()</div><div class="ttdef"><b>Definition:</b> PetAI.cpp:91</div></div>
<div class="ttc" id="aa06026_html_acbc18dc58935e17b2bc224a78f43250b"><div class="ttname"><a href="../../d0/dbe/a06026.html#acbc18dc58935e17b2bc224a78f43250b">PetAI::m_updateAlliesTimer</a></div><div class="ttdeci">uint32 m_updateAlliesTimer</div><div class="ttdef"><b>Definition:</b> PetAI.h:84</div></div>
<div class="ttc" id="aa07778_html_a223db1b78a3dc2730c1096f7d2ca3675"><div class="ttname"><a href="../../df/d49/a07778.html#a223db1b78a3dc2730c1096f7d2ca3675">Creature::HasSpellCooldown</a></div><div class="ttdeci">bool HasSpellCooldown(uint32 spell_id) const override</div><div class="ttdef"><b>Definition:</b> Creature.cpp:2915</div></div>
<div class="ttc" id="aa07778_html_ab0dbb5f519f404a1003b7ef55112e79c"><div class="ttname"><a href="../../df/d49/a07778.html#ab0dbb5f519f404a1003b7ef55112e79c">Creature::AddSpellCooldown</a></div><div class="ttdeci">void AddSpellCooldown(uint32 spell_id, uint32, uint32 end_time, bool needSendToClient=false, bool forceSendToSpectator=false) override</div><div class="ttdef"><b>Definition:</b> Creature.cpp:2860</div></div>
<div class="ttc" id="aa08150_html_adc648c59e740565161b8c8b29dc0f3e5"><div class="ttname"><a href="../../d6/d80/a08150.html#adc648c59e740565161b8c8b29dc0f3e5">Object::SendUpdateToPlayer</a></div><div class="ttdeci">void SendUpdateToPlayer(Player *player)</div><div class="ttdef"><b>Definition:</b> Object.cpp:246</div></div>
<div class="ttc" id="aa08198_html"><div class="ttname"><a href="../../d9/d08/a08198.html">ObjectGuid</a></div><div class="ttdef"><b>Definition:</b> ObjectGuid.h:118</div></div>
<div class="ttc" id="aa08226_html_a7e91a07c89b5645ddff795e0b5495632"><div class="ttname"><a href="../../d6/dc8/a08226.html#a7e91a07c89b5645ddff795e0b5495632">Position::HasInArc</a></div><div class="ttdeci">bool HasInArc(float arcangle, const Position *pos, float targetRadius=0.0f) const</div><div class="ttdef"><b>Definition:</b> Position.cpp:141</div></div>
<div class="ttc" id="aa08262_html_a029e483c79cb68affc04d04ca0c81d0e"><div class="ttname"><a href="../../dd/d7d/a08262.html#a029e483c79cb68affc04d04ca0c81d0e">Pet::HasTempSpell</a></div><div class="ttdeci">bool HasTempSpell() const</div><div class="ttdef"><b>Definition:</b> Pet.h:147</div></div>
<div class="ttc" id="aa08398_html_a6ab11ca64cde7c5cde1f53998a6f7253"><div class="ttname"><a href="../../d9/d86/a08398.html#a6ab11ca64cde7c5cde1f53998a6f7253">Player::GetSession</a></div><div class="ttdeci">WorldSession * GetSession() const</div><div class="ttdef"><b>Definition:</b> Player.h:1998</div></div>
<div class="ttc" id="aa08454_html_a7487d19ae8c59e5c5e871b2e1afabfba"><div class="ttname"><a href="../../d1/d8b/a08454.html#a7487d19ae8c59e5c5e871b2e1afabfba">GlobalCooldownMgr::HasGlobalCooldown</a></div><div class="ttdeci">bool HasGlobalCooldown(SpellInfo const *spellInfo) const</div><div class="ttdef"><b>Definition:</b> CharmInfo.cpp:397</div></div>
<div class="ttc" id="aa08462_html_a1e7ec9745d2b9356267636aae280b3f8"><div class="ttname"><a href="../../d8/dea/a08462.html#a1e7ec9745d2b9356267636aae280b3f8">CharmInfo::GetForcedSpell</a></div><div class="ttdeci">int32 GetForcedSpell()</div><div class="ttdef"><b>Definition:</b> CharmInfo.h:178</div></div>
<div class="ttc" id="aa08462_html_a2484c82adc8c25c18ba91b6fe1b21065"><div class="ttname"><a href="../../d8/dea/a08462.html#a2484c82adc8c25c18ba91b6fe1b21065">CharmInfo::GetForcedTarget</a></div><div class="ttdeci">ObjectGuid GetForcedTarget()</div><div class="ttdef"><b>Definition:</b> CharmInfo.h:180</div></div>
<div class="ttc" id="aa08462_html_a38dc3f578f6ec33693d2aa30adb17ed8"><div class="ttname"><a href="../../d8/dea/a08462.html#a38dc3f578f6ec33693d2aa30adb17ed8">CharmInfo::GetGlobalCooldownMgr</a></div><div class="ttdeci">GlobalCooldownMgr &amp; GetGlobalCooldownMgr()</div><div class="ttdef"><b>Definition:</b> CharmInfo.h:160</div></div>
<div class="ttc" id="aa08530_html_a61edf6ab694fa8f7ed6ef194fd4dd103"><div class="ttname"><a href="../../de/d71/a08530.html#a61edf6ab694fa8f7ed6ef194fd4dd103">Unit::StopMoving</a></div><div class="ttdeci">void StopMoving()</div><div class="ttdef"><b>Definition:</b> Unit.cpp:16650</div></div>
<div class="ttc" id="aa08530_html_a68b6c4d77485415bd8df8593d4dd6ced"><div class="ttname"><a href="../../de/d71/a08530.html#a68b6c4d77485415bd8df8593d4dd6ced">Unit::IsPetInCombat</a></div><div class="ttdeci">bool IsPetInCombat() const</div><div class="ttdef"><b>Definition:</b> Unit.h:887</div></div>
<div class="ttc" id="aa08530_html_ae2ce6a171e27e575ad183809a78286ae"><div class="ttname"><a href="../../de/d71/a08530.html#ae2ce6a171e27e575ad183809a78286ae">Unit::SetInFront</a></div><div class="ttdeci">void SetInFront(WorldObject const *target)</div><div class="ttdef"><b>Definition:</b> Unit.cpp:20521</div></div>
<div class="ttc" id="aa08530_html_af5e75d013dfa8a8b888d7714992e3f2a"><div class="ttname"><a href="../../de/d71/a08530.html#af5e75d013dfa8a8b888d7714992e3f2a">Unit::IsInCombat</a></div><div class="ttdeci">bool IsInCombat() const</div><div class="ttdef"><b>Definition:</b> Unit.h:884</div></div>
<div class="ttc" id="aa10754_html_aed37ffeb8c5b74e5762ed7b0a688951e"><div class="ttname"><a href="../../d1/d5e/a10754.html#aed37ffeb8c5b74e5762ed7b0a688951e">WorldSession::HandlePetActionHelper</a></div><div class="ttdeci">void HandlePetActionHelper(Unit *pet, ObjectGuid guid1, uint32 spellid, uint16 flag, ObjectGuid guid2)</div><div class="ttdef"><b>Definition:</b> PetHandler.cpp:150</div></div>
<div class="ttc" id="aa10826_html"><div class="ttname"><a href="../../d6/dd9/a10826.html">SpellCastTargets</a></div><div class="ttdef"><b>Definition:</b> Spell.h:111</div></div>
<div class="ttc" id="aa10826_html_a981f7520eed4002d70d7b15eb5e710a7"><div class="ttname"><a href="../../d6/dd9/a10826.html#a981f7520eed4002d70d7b15eb5e710a7">SpellCastTargets::SetUnitTarget</a></div><div class="ttdeci">void SetUnitTarget(Unit *target)</div><div class="ttdef"><b>Definition:</b> Spell.cpp:239</div></div>
<div class="ttc" id="aa10846_html"><div class="ttname"><a href="../../d5/d56/a10846.html">Spell</a></div><div class="ttdef"><b>Definition:</b> Spell.h:287</div></div>
<div class="ttc" id="aa10846_html_a15fb735ebd7b6b956042e947aa0bf4a3"><div class="ttname"><a href="../../d5/d56/a10846.html#a15fb735ebd7b6b956042e947aa0bf4a3">Spell::LoadScripts</a></div><div class="ttdeci">void LoadScripts()</div><div class="ttdef"><b>Definition:</b> Spell.cpp:8510</div></div>
<div class="ttc" id="aa10846_html_a26ce7c494bc33a4bdd0bc238d00cff79"><div class="ttname"><a href="../../d5/d56/a10846.html#a26ce7c494bc33a4bdd0bc238d00cff79">Spell::prepare</a></div><div class="ttdeci">SpellCastResult prepare(SpellCastTargets const *targets, AuraEffect const *triggeredByAura=nullptr)</div><div class="ttdef"><b>Definition:</b> Spell.cpp:3480</div></div>
<div class="ttc" id="aa10846_html_af46c9b635b8928c161d943f10ae693f1"><div class="ttname"><a href="../../d5/d56/a10846.html#af46c9b635b8928c161d943f10ae693f1">Spell::m_spellInfo</a></div><div class="ttdeci">SpellInfo const  *const m_spellInfo</div><div class="ttdef"><b>Definition:</b> Spell.h:523</div></div>
<div class="ttc" id="aa10846_html_aff5477a54c2dfe98575d5ea12984b86f"><div class="ttname"><a href="../../d5/d56/a10846.html#aff5477a54c2dfe98575d5ea12984b86f">Spell::CanAutoCast</a></div><div class="ttdeci">bool CanAutoCast(Unit *target)</div><div class="ttdef"><b>Definition:</b> Spell.cpp:7012</div></div>
<div class="ttc" id="aa10910_html_a49bc14059c2bd3785231c52e0d54d382"><div class="ttname"><a href="../../dd/df5/a10910.html#a49bc14059c2bd3785231c52e0d54d382">SpellInfo::Id</a></div><div class="ttdeci">uint32 Id</div><div class="ttdef"><b>Definition:</b> SpellInfo.h:320</div></div>
<div class="ttc" id="aa10910_html_a6cc135f2b87d1fecd6e7db475f9039dd"><div class="ttname"><a href="../../dd/df5/a10910.html#a6cc135f2b87d1fecd6e7db475f9039dd">SpellInfo::GetMaxDuration</a></div><div class="ttdeci">int32 GetMaxDuration() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:2345</div></div>
<div class="ttc" id="aa10910_html_a7e496d4dc01e50c75feab5c951c17894"><div class="ttname"><a href="../../dd/df5/a10910.html#a7e496d4dc01e50c75feab5c951c17894">SpellInfo::CanBeUsedInCombat</a></div><div class="ttdeci">bool CanBeUsedInCombat() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1232</div></div>
<div class="ttc" id="aa10910_html_adef74790281b92d72ac2c2118a665096"><div class="ttname"><a href="../../dd/df5/a10910.html#adef74790281b92d72ac2c2118a665096">SpellInfo::IsPositive</a></div><div class="ttdeci">bool IsPositive() const</div><div class="ttdef"><b>Definition:</b> SpellInfo.cpp:1237</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00091">_doMeleeAttack()</a>, <a class="el" href="../../#l00049">_needToStop()</a>, <a class="el" href="../../#l00072">_stopAttack()</a>, <a class="el" href="../../#l00063">ACT_ENABLED</a>, <a class="el" href="../../#l02860">Creature::AddSpellCooldown()</a>, <a class="el" href="../../#l00417">AttackStart()</a>, <a class="el" href="../../#l00666">CanAttack()</a>, <a class="el" href="../../#l07012">Spell::CanAutoCast()</a>, <a class="el" href="../../#l01232">SpellInfo::CanBeUsedInCombat()</a>, <a class="el" href="../../#l00167">MotionMaster::Clear()</a>, <a class="el" href="../../#l00555">COMMAND_STAY</a>, <a class="el" href="../../#l00740">Unit::getAttackerForHelper()</a>, <a class="el" href="../../#l01211">Unit::GetCharmerOrOwner()</a>, <a class="el" href="../../#l01206">Unit::GetCharmInfo()</a>, <a class="el" href="../../#l00178">CharmInfo::GetForcedSpell()</a>, <a class="el" href="../../#l00180">CharmInfo::GetForcedTarget()</a>, <a class="el" href="../../#l00160">CharmInfo::GetGlobalCooldownMgr()</a>, <a class="el" href="../../#l00112">Object::GetGUID()</a>, <a class="el" href="../../#l02345">SpellInfo::GetMaxDuration()</a>, <a class="el" href="../../#l01620">Unit::GetMotionMaster()</a>, <a class="el" href="../../#l00321">Creature::GetPetAutoSpellOnPos()</a>, <a class="el" href="../../#l00320">Creature::GetPetAutoSpellSize()</a>, <a class="el" href="../../#l01056">Unit::GetPower()</a>, <a class="el" href="../../#l01998">Player::GetSession()</a>, <a class="el" href="../../#l00199">ObjectAccessor::GetUnit()</a>, <a class="el" href="../../#l00853">Unit::GetVictim()</a>, <a class="el" href="../../#l00150">WorldSession::HandlePetActionHelper()</a>, <a class="el" href="../../#l00525">HandleReturnMovement()</a>, <a class="el" href="../../#l00787">Unit::HasBreakableByDamageCrowdControlAura()</a>, <a class="el" href="../../#l00137">CharmInfo::HasCommandState()</a>, <a class="el" href="../../#l00397">GlobalCooldownMgr::HasGlobalCooldown()</a>, <a class="el" href="../../#l00141">Position::HasInArc()</a>, <a class="el" href="../../#l00096">Creature::HasReactState()</a>, <a class="el" href="../../#l02915">Creature::HasSpellCooldown()</a>, <a class="el" href="../../#l00147">Pet::HasTempSpell()</a>, <a class="el" href="../../#l00701">Unit::HasUnitState()</a>, <a class="el" href="../../#l00320">SpellInfo::Id</a>, <a class="el" href="../../#l04129">Unit::InterruptNonMeleeSpells()</a>, <a class="el" href="../../#l01654">Unit::IsAlive()</a>, <a class="el" href="../../#l00370">CharmInfo::IsAtStay()</a>, <a class="el" href="../../#l00308">CharmInfo::IsCommandAttack()</a>, <a class="el" href="../../#l00884">Unit::IsInCombat()</a>, <a class="el" href="../../#l00754">Unit::IsPet()</a>, <a class="el" href="../../#l00084">Minion::IsPetGhoul()</a>, <a class="el" href="../../#l00887">Unit::IsPetInCombat()</a>, <a class="el" href="../../#l00200">Object::IsPlayer()</a>, <a class="el" href="../../#l01237">SpellInfo::IsPositive()</a>, <a class="el" href="../../#l00664">Unit::IsWithinMeleeRange()</a>, <a class="el" href="../../#l08510">Spell::LoadScripts()</a>, <a class="el" href="../../#l00169">LOG_DEBUG</a>, <a class="el" href="../../#l00083">m_AllySet</a>, <a class="el" href="../../#l00523">Spell::m_spellInfo</a>, <a class="el" href="../../#l00084">m_updateAlliesTimer</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00272">POWER_ENERGY</a>, <a class="el" href="../../#l03480">Spell::prepare()</a>, <a class="el" href="../../#l00550">REACT_AGGRESSIVE</a>, <a class="el" href="../../#l00548">REACT_PASSIVE</a>, <a class="el" href="../../#l00470">SelectNextTarget()</a>, <a class="el" href="../../#l00246">Object::SendUpdateToPlayer()</a>, <a class="el" href="../../#l20521">Unit::SetInFront()</a>, <a class="el" href="../../#l00239">SpellCastTargets::SetUnitTarget()</a>, <a class="el" href="../../#l00825">sSpellMgr</a>, <a class="el" href="../../#l16650">Unit::StopMoving()</a>, <a class="el" href="../../#l00694">Unit::ToPet()</a>, <a class="el" href="../../#l00201">Object::ToPlayer()</a>, <a class="el" href="../../#l00047">ObjectGuid::ToString()</a>, <a class="el" href="../../#l00133">TRIGGERED_NONE</a>, <a class="el" href="../../#l00164">UNIT_STATE_CASTING</a>, <a class="el" href="../../#l00353">UpdateAllies()</a>, and <a class="el" href="../../#l00044">urand()</a>.</p>

</div>
</div>
<a id="a611f7bd5e1cf0cb592087bd836c2b922" name="a611f7bd5e1cf0cb592087bd836c2b922"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a611f7bd5e1cf0cb592087bd836c2b922">&#9670;&#160;</a></span>UpdateAllies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PetAI::UpdateAllies </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  354</span>{</div>
<div class="line"><span class="lineno">  355</span>    <a class="code hl_class" href="../../de/d71/a08530.html">Unit</a>* owner = <a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../de/d71/a08530.html#a7cdd398abd6ac328deb42529195e6add">GetCharmerOrOwner</a>();</div>
<div class="line"><span class="lineno">  356</span>    <a class="code hl_class" href="../../db/dd5/a09214.html">Group</a>* group = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>    <a class="code hl_variable" href="../../d0/dbe/a06026.html#acbc18dc58935e17b2bc224a78f43250b">m_updateAlliesTimer</a> = 10 * <a class="code hl_variable" href="../../d4/d51/a00017.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a>;              <span class="comment">//update friendly targets every 10 seconds, lesser checks increase performance</span></div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>    <span class="keywordflow">if</span> (!owner)</div>
<div class="line"><span class="lineno">  361</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  362</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a1b9ed00e8d7ac5fed698ef6431905296">IsPlayer</a>())</div>
<div class="line"><span class="lineno">  363</span>        group = owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>()-&gt;<a class="code hl_function" href="../../d9/d86/a08398.html#a99fc00f9ac903dbe9adcadc5f7415abb">GetGroup</a>();</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>    <span class="comment">//only pet and owner/not in group-&gt;ok</span></div>
<div class="line"><span class="lineno">  366</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d0/dbe/a06026.html#a77bf7a57505e47e830eeb1fefb5a4493">m_AllySet</a>.size() == 2 &amp;&amp; !group)</div>
<div class="line"><span class="lineno">  367</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  368</span>    <span class="comment">//owner is in group; group members filled in already (no raid -&gt; subgroupcount = whole count)</span></div>
<div class="line"><span class="lineno">  369</span>    <span class="keywordflow">if</span> (group &amp;&amp; !group-&gt;<a class="code hl_function" href="../../db/dd5/a09214.html#af451cbb50edfecf4ba130bac6cf8fa61">isRaidGroup</a>() &amp;&amp; <a class="code hl_variable" href="../../d0/dbe/a06026.html#a77bf7a57505e47e830eeb1fefb5a4493">m_AllySet</a>.size() == (group-&gt;<a class="code hl_function" href="../../db/dd5/a09214.html#a7999bad7025b6116145e263e467f1f4b">GetMembersCount</a>() + 2))</div>
<div class="line"><span class="lineno">  370</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>    <a class="code hl_variable" href="../../d0/dbe/a06026.html#a77bf7a57505e47e830eeb1fefb5a4493">m_AllySet</a>.clear();</div>
<div class="line"><span class="lineno">  373</span>    <a class="code hl_variable" href="../../d0/dbe/a06026.html#a77bf7a57505e47e830eeb1fefb5a4493">m_AllySet</a>.insert(<a class="code hl_variable" href="../../dc/d36/a06074.html#aee5bf3d421199445de241a34798ae819">me</a>-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno">  374</span>    <span class="keywordflow">if</span> (group)                                              <span class="comment">//add group</span></div>
<div class="line"><span class="lineno">  375</span>    {</div>
<div class="line"><span class="lineno">  376</span>        <span class="keywordflow">for</span> (<a class="code hl_class" href="../../d1/deb/a09226.html">GroupReference</a>* itr = group-&gt;<a class="code hl_function" href="../../db/dd5/a09214.html#ab86a2772b15a7f7a72703b7a5593cb1e">GetFirstMember</a>(); itr != <span class="keyword">nullptr</span>; itr = itr-&gt;<a class="code hl_function" href="../../d1/deb/a09226.html#a6f8f406f1209dd7060904d40f5424b41">next</a>())</div>
<div class="line"><span class="lineno">  377</span>        {</div>
<div class="line"><span class="lineno">  378</span>            <a class="code hl_class" href="../../d9/d86/a08398.html">Player</a>* Target = itr-&gt;GetSource();</div>
<div class="line"><span class="lineno">  379</span>            <span class="keywordflow">if</span> (!Target || !Target-&gt;<a class="code hl_function" href="../../db/df3/a08182.html#aedc362bb48f474ee7291f4c82f585837">IsInMap</a>(owner) || !group-&gt;<a class="code hl_function" href="../../db/dd5/a09214.html#ac1e40ceba44c8c1e9900b95fd4c221b0">SameSubGroup</a>(owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#a328d5f752cc33ed398b3d9861ef6929d">ToPlayer</a>(), Target))</div>
<div class="line"><span class="lineno">  380</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>            <span class="keywordflow">if</span> (Target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>() == owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>())</div>
<div class="line"><span class="lineno">  383</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>            <a class="code hl_variable" href="../../d0/dbe/a06026.html#a77bf7a57505e47e830eeb1fefb5a4493">m_AllySet</a>.insert(Target-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno">  386</span>        }</div>
<div class="line"><span class="lineno">  387</span>    }</div>
<div class="line"><span class="lineno">  388</span>    <span class="keywordflow">else</span>                                                    <span class="comment">//remove group</span></div>
<div class="line"><span class="lineno">  389</span>        <a class="code hl_variable" href="../../d0/dbe/a06026.html#a77bf7a57505e47e830eeb1fefb5a4493">m_AllySet</a>.insert(owner-&gt;<a class="code hl_function" href="../../d6/d80/a08150.html#ad23b997e2442fa6a6228ba73a7ecc138">GetGUID</a>());</div>
<div class="line"><span class="lineno">  390</span>}</div>
<div class="ttc" id="aa00017_html_a84190f79c8167211609f67284e066c58"><div class="ttname"><a href="../../d4/d51/a00017.html#a84190f79c8167211609f67284e066c58">IN_MILLISECONDS</a></div><div class="ttdeci">constexpr auto IN_MILLISECONDS</div><div class="ttdef"><b>Definition:</b> Common.h:53</div></div>
<div class="ttc" id="aa08182_html_aedc362bb48f474ee7291f4c82f585837"><div class="ttname"><a href="../../db/df3/a08182.html#aedc362bb48f474ee7291f4c82f585837">WorldObject::IsInMap</a></div><div class="ttdeci">bool IsInMap(WorldObject const *obj) const</div><div class="ttdef"><b>Definition:</b> Object.cpp:1296</div></div>
<div class="ttc" id="aa08398_html_a99fc00f9ac903dbe9adcadc5f7415abb"><div class="ttname"><a href="../../d9/d86/a08398.html#a99fc00f9ac903dbe9adcadc5f7415abb">Player::GetGroup</a></div><div class="ttdeci">Group * GetGroup()</div><div class="ttdef"><b>Definition:</b> Player.h:2468</div></div>
<div class="ttc" id="aa09214_html"><div class="ttname"><a href="../../db/dd5/a09214.html">Group</a></div><div class="ttdef"><b>Definition:</b> Group.h:169</div></div>
<div class="ttc" id="aa09214_html_a7999bad7025b6116145e263e467f1f4b"><div class="ttname"><a href="../../db/dd5/a09214.html#a7999bad7025b6116145e263e467f1f4b">Group::GetMembersCount</a></div><div class="ttdeci">uint32 GetMembersCount() const</div><div class="ttdef"><b>Definition:</b> Group.h:245</div></div>
<div class="ttc" id="aa09214_html_ab86a2772b15a7f7a72703b7a5593cb1e"><div class="ttname"><a href="../../db/dd5/a09214.html#ab86a2772b15a7f7a72703b7a5593cb1e">Group::GetFirstMember</a></div><div class="ttdeci">GroupReference * GetFirstMember()</div><div class="ttdef"><b>Definition:</b> Group.h:243</div></div>
<div class="ttc" id="aa09214_html_ac1e40ceba44c8c1e9900b95fd4c221b0"><div class="ttname"><a href="../../db/dd5/a09214.html#ac1e40ceba44c8c1e9900b95fd4c221b0">Group::SameSubGroup</a></div><div class="ttdeci">bool SameSubGroup(ObjectGuid guid1, ObjectGuid guid2) const</div><div class="ttdef"><b>Definition:</b> Group.cpp:2359</div></div>
<div class="ttc" id="aa09214_html_af451cbb50edfecf4ba130bac6cf8fa61"><div class="ttname"><a href="../../db/dd5/a09214.html#af451cbb50edfecf4ba130bac6cf8fa61">Group::isRaidGroup</a></div><div class="ttdeci">bool isRaidGroup() const</div><div class="ttdef"><b>Definition:</b> Group.cpp:2267</div></div>
<div class="ttc" id="aa09226_html"><div class="ttname"><a href="../../d1/deb/a09226.html">GroupReference</a></div><div class="ttdef"><b>Definition:</b> GroupReference.h:27</div></div>
<div class="ttc" id="aa09226_html_a6f8f406f1209dd7060904d40f5424b41"><div class="ttname"><a href="../../d1/deb/a09226.html#a6f8f406f1209dd7060904d40f5424b41">GroupReference::next</a></div><div class="ttdeci">GroupReference * next()</div><div class="ttdef"><b>Definition:</b> GroupReference.h:36</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01211">Unit::GetCharmerOrOwner()</a>, <a class="el" href="../../#l00243">Group::GetFirstMember()</a>, <a class="el" href="../../#l02468">Player::GetGroup()</a>, <a class="el" href="../../#l00112">Object::GetGUID()</a>, <a class="el" href="../../#l00245">Group::GetMembersCount()</a>, <a class="el" href="../../#l00053">IN_MILLISECONDS</a>, <a class="el" href="../../#l01296">WorldObject::IsInMap()</a>, <a class="el" href="../../#l00200">Object::IsPlayer()</a>, <a class="el" href="../../#l02267">Group::isRaidGroup()</a>, <a class="el" href="../../#l00083">m_AllySet</a>, <a class="el" href="../../#l00084">m_updateAlliesTimer</a>, <a class="el" href="../../#l00072">CreatureAI::me</a>, <a class="el" href="../../#l00036">GroupReference::next()</a>, <a class="el" href="../../#l02359">Group::SameSubGroup()</a>, and <a class="el" href="../../#l00201">Object::ToPlayer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00044">PetAI()</a>, and <a class="el" href="../../#l00148">UpdateAI()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4b9d25512fc4f8c9f0eb538542f72644" name="a4b9d25512fc4f8c9f0eb538542f72644"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b9d25512fc4f8c9f0eb538542f72644">&#9670;&#160;</a></span>combatRange</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float PetAI::combatRange</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00100">_canMeleeAttack()</a>, and <a class="el" href="../../#l00591">DoAttack()</a>.</p>

</div>
</div>
<a id="abd873f793021a2937e2c9a2a9450cf1f" name="abd873f793021a2937e2c9a2a9450cf1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd873f793021a2937e2c9a2a9450cf1f">&#9670;&#160;</a></span>i_tracker</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/de0/a05478.html">TimeTracker</a> PetAI::i_tracker</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a77bf7a57505e47e830eeb1fefb5a4493" name="a77bf7a57505e47e830eeb1fefb5a4493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77bf7a57505e47e830eeb1fefb5a4493">&#9670;&#160;</a></span>m_AllySet</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/db0/a03467.html#a62874da4f73709809fa3c7609d3e30af">GuidSet</a> PetAI::m_AllySet</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00148">UpdateAI()</a>, and <a class="el" href="../../#l00353">UpdateAllies()</a>.</p>

</div>
</div>
<a id="acbc18dc58935e17b2bc224a78f43250b" name="acbc18dc58935e17b2bc224a78f43250b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbc18dc58935e17b2bc224a78f43250b">&#9670;&#160;</a></span>m_updateAlliesTimer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d1e/a00497.html#a22f78cc9780bf32aff91ae17c3101c8d">uint32</a> PetAI::m_updateAlliesTimer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00148">UpdateAI()</a>, and <a class="el" href="../../#l00353">UpdateAllies()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d0/dbe/a06026.html">PetAI</a></li>
    <li class="footer">Generated on Mon Dec 16 2024 20:43:58 for AzerothCore by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
